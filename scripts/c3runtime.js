// Generated by Construct 3, the game and app creator :: https://www.construct.net
"use strict";
// ../3rdparty/glmatrix.js
/*
 @fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.3.0

Copyright (c) 2015-2020, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
'use strict';(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):(global=global||self,factory(global.glMatrix={}))})(this,function(exports){var EPSILON=1E-6;var ARRAY_TYPE=typeof Float32Array!=="undefined"?Float32Array:Array;var RANDOM=Math.random;function setMatrixArrayType(type){ARRAY_TYPE=type}var degree=Math.PI/180;function toRadian(a){return a*degree}function equals(a,b){return Math.abs(a-
b)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}if(!Math.hypot)Math.hypot=function(){var y=0,i=arguments.length;while(i--)y+=arguments[i]*arguments[i];return Math.sqrt(y)};var common=Object.freeze({__proto__:null,EPSILON:EPSILON,get ARRAY_TYPE(){return ARRAY_TYPE},RANDOM:RANDOM,setMatrixArrayType:setMatrixArrayType,toRadian:toRadian,equals:equals});function create(){var out=new ARRAY_TYPE(4);if(ARRAY_TYPE!=Float32Array){out[1]=0;out[2]=0}out[0]=1;out[3]=1;return out}function clone(a){var out=new ARRAY_TYPE(4);
out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out}function copy(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out}function identity(out){out[0]=1;out[1]=0;out[2]=0;out[3]=1;return out}function fromValues(m00,m01,m10,m11){var out=new ARRAY_TYPE(4);out[0]=m00;out[1]=m01;out[2]=m10;out[3]=m11;return out}function set(out,m00,m01,m10,m11){out[0]=m00;out[1]=m01;out[2]=m10;out[3]=m11;return out}function transpose(out,a){if(out===a){var a1=a[1];out[1]=a[2];out[2]=a1}else{out[0]=a[0];
out[1]=a[2];out[2]=a[1];out[3]=a[3]}return out}function invert(out,a){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var det=a0*a3-a2*a1;if(!det)return null;det=1/det;out[0]=a3*det;out[1]=-a1*det;out[2]=-a2*det;out[3]=a0*det;return out}function adjoint(out,a){var a0=a[0];out[0]=a[3];out[1]=-a[1];out[2]=-a[2];out[3]=a0;return out}function determinant(a){return a[0]*a[3]-a[2]*a[1]}function multiply(out,a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];out[0]=a0*b0+a2*b1;out[1]=a1*b0+
a3*b1;out[2]=a0*b2+a2*b3;out[3]=a1*b2+a3*b3;return out}function rotate(out,a,rad){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var s=Math.sin(rad);var c=Math.cos(rad);out[0]=a0*c+a2*s;out[1]=a1*c+a3*s;out[2]=a0*-s+a2*c;out[3]=a1*-s+a3*c;return out}function scale(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var v0=v[0],v1=v[1];out[0]=a0*v0;out[1]=a1*v0;out[2]=a2*v1;out[3]=a3*v1;return out}function fromRotation(out,rad){var s=Math.sin(rad);var c=Math.cos(rad);out[0]=c;out[1]=s;out[2]=-s;out[3]=c;return out}
function fromScaling(out,v){out[0]=v[0];out[1]=0;out[2]=0;out[3]=v[1];return out}function str(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}function frob(a){return Math.hypot(a[0],a[1],a[2],a[3])}function LDU(L,D,U,a){L[2]=a[2]/a[0];U[0]=a[0];U[1]=a[1];U[3]=a[3]-L[2]*U[1];return[L,D,U]}function add(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];return out}function subtract(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];return out}
function exactEquals(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]}function equals$1(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];return Math.abs(a0-b0)<=EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))}function multiplyScalar(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;
out[2]=a[2]*b;out[3]=a[3]*b;return out}function multiplyScalarAndAdd(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;return out}var mul=multiply;var sub=subtract;var mat2=Object.freeze({__proto__:null,create:create,clone:clone,copy:copy,identity:identity,fromValues:fromValues,set:set,transpose:transpose,invert:invert,adjoint:adjoint,determinant:determinant,multiply:multiply,rotate:rotate,scale:scale,fromRotation:fromRotation,fromScaling:fromScaling,
str:str,frob:frob,LDU:LDU,add:add,subtract:subtract,exactEquals:exactEquals,equals:equals$1,multiplyScalar:multiplyScalar,multiplyScalarAndAdd:multiplyScalarAndAdd,mul:mul,sub:sub});function create$1(){var out=new ARRAY_TYPE(6);if(ARRAY_TYPE!=Float32Array){out[1]=0;out[2]=0;out[4]=0;out[5]=0}out[0]=1;out[3]=1;return out}function clone$1(a){var out=new ARRAY_TYPE(6);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];return out}function copy$1(out,a){out[0]=a[0];out[1]=a[1];out[2]=
a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];return out}function identity$1(out){out[0]=1;out[1]=0;out[2]=0;out[3]=1;out[4]=0;out[5]=0;return out}function fromValues$1(a,b,c,d,tx,ty){var out=new ARRAY_TYPE(6);out[0]=a;out[1]=b;out[2]=c;out[3]=d;out[4]=tx;out[5]=ty;return out}function set$1(out,a,b,c,d,tx,ty){out[0]=a;out[1]=b;out[2]=c;out[3]=d;out[4]=tx;out[5]=ty;return out}function invert$1(out,a){var aa=a[0],ab=a[1],ac=a[2],ad=a[3];var atx=a[4],aty=a[5];var det=aa*ad-ab*ac;if(!det)return null;det=1/
det;out[0]=ad*det;out[1]=-ab*det;out[2]=-ac*det;out[3]=aa*det;out[4]=(ac*aty-ad*atx)*det;out[5]=(ab*atx-aa*aty)*det;return out}function determinant$1(a){return a[0]*a[3]-a[1]*a[2]}function multiply$1(out,a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5];var b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5];out[0]=a0*b0+a2*b1;out[1]=a1*b0+a3*b1;out[2]=a0*b2+a2*b3;out[3]=a1*b2+a3*b3;out[4]=a0*b4+a2*b5+a4;out[5]=a1*b4+a3*b5+a5;return out}function rotate$1(out,a,rad){var a0=a[0],a1=a[1],a2=a[2],
a3=a[3],a4=a[4],a5=a[5];var s=Math.sin(rad);var c=Math.cos(rad);out[0]=a0*c+a2*s;out[1]=a1*c+a3*s;out[2]=a0*-s+a2*c;out[3]=a1*-s+a3*c;out[4]=a4;out[5]=a5;return out}function scale$1(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5];var v0=v[0],v1=v[1];out[0]=a0*v0;out[1]=a1*v0;out[2]=a2*v1;out[3]=a3*v1;out[4]=a4;out[5]=a5;return out}function translate(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5];var v0=v[0],v1=v[1];out[0]=a0;out[1]=a1;out[2]=a2;out[3]=a3;out[4]=a0*v0+a2*
v1+a4;out[5]=a1*v0+a3*v1+a5;return out}function fromRotation$1(out,rad){var s=Math.sin(rad),c=Math.cos(rad);out[0]=c;out[1]=s;out[2]=-s;out[3]=c;out[4]=0;out[5]=0;return out}function fromScaling$1(out,v){out[0]=v[0];out[1]=0;out[2]=0;out[3]=v[1];out[4]=0;out[5]=0;return out}function fromTranslation(out,v){out[0]=1;out[1]=0;out[2]=0;out[3]=1;out[4]=v[0];out[5]=v[1];return out}function str$1(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"}function frob$1(a){return Math.hypot(a[0],
a[1],a[2],a[3],a[4],a[5],1)}function add$1(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];out[4]=a[4]+b[4];out[5]=a[5]+b[5];return out}function subtract$1(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];out[4]=a[4]-b[4];out[5]=a[5]-b[5];return out}function multiplyScalar$1(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;out[4]=a[4]*b;out[5]=a[5]*b;return out}function multiplyScalarAndAdd$1(out,a,b,scale){out[0]=a[0]+b[0]*
scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;out[4]=a[4]+b[4]*scale;out[5]=a[5]+b[5]*scale;return out}function exactEquals$1(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]}function equals$2(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5];var b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5];return Math.abs(a0-b0)<=EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&
Math.abs(a2-b2)<=EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))}var mul$1=multiply$1;var sub$1=subtract$1;var mat2d=Object.freeze({__proto__:null,create:create$1,clone:clone$1,copy:copy$1,identity:identity$1,fromValues:fromValues$1,set:set$1,invert:invert$1,determinant:determinant$1,multiply:multiply$1,rotate:rotate$1,
scale:scale$1,translate:translate,fromRotation:fromRotation$1,fromScaling:fromScaling$1,fromTranslation:fromTranslation,str:str$1,frob:frob$1,add:add$1,subtract:subtract$1,multiplyScalar:multiplyScalar$1,multiplyScalarAndAdd:multiplyScalarAndAdd$1,exactEquals:exactEquals$1,equals:equals$2,mul:mul$1,sub:sub$1});function create$2(){var out=new ARRAY_TYPE(9);if(ARRAY_TYPE!=Float32Array){out[1]=0;out[2]=0;out[3]=0;out[5]=0;out[6]=0;out[7]=0}out[0]=1;out[4]=1;out[8]=1;return out}function fromMat4(out,
a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[4];out[4]=a[5];out[5]=a[6];out[6]=a[8];out[7]=a[9];out[8]=a[10];return out}function clone$2(a){var out=new ARRAY_TYPE(9);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];return out}function copy$2(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];return out}function fromValues$2(m00,m01,m02,m10,m11,m12,m20,m21,m22){var out=new ARRAY_TYPE(9);
out[0]=m00;out[1]=m01;out[2]=m02;out[3]=m10;out[4]=m11;out[5]=m12;out[6]=m20;out[7]=m21;out[8]=m22;return out}function set$2(out,m00,m01,m02,m10,m11,m12,m20,m21,m22){out[0]=m00;out[1]=m01;out[2]=m02;out[3]=m10;out[4]=m11;out[5]=m12;out[6]=m20;out[7]=m21;out[8]=m22;return out}function identity$2(out){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=1;out[5]=0;out[6]=0;out[7]=0;out[8]=1;return out}function transpose$1(out,a){if(out===a){var a01=a[1],a02=a[2],a12=a[5];out[1]=a[3];out[2]=a[6];out[3]=a01;out[5]=
a[7];out[6]=a02;out[7]=a12}else{out[0]=a[0];out[1]=a[3];out[2]=a[6];out[3]=a[1];out[4]=a[4];out[5]=a[7];out[6]=a[2];out[7]=a[5];out[8]=a[8]}return out}function invert$2(out,a){var a00=a[0],a01=a[1],a02=a[2];var a10=a[3],a11=a[4],a12=a[5];var a20=a[6],a21=a[7],a22=a[8];var b01=a22*a11-a12*a21;var b11=-a22*a10+a12*a20;var b21=a21*a10-a11*a20;var det=a00*b01+a01*b11+a02*b21;if(!det)return null;det=1/det;out[0]=b01*det;out[1]=(-a22*a01+a02*a21)*det;out[2]=(a12*a01-a02*a11)*det;out[3]=b11*det;out[4]=(a22*
a00-a02*a20)*det;out[5]=(-a12*a00+a02*a10)*det;out[6]=b21*det;out[7]=(-a21*a00+a01*a20)*det;out[8]=(a11*a00-a01*a10)*det;return out}function adjoint$1(out,a){var a00=a[0],a01=a[1],a02=a[2];var a10=a[3],a11=a[4],a12=a[5];var a20=a[6],a21=a[7],a22=a[8];out[0]=a11*a22-a12*a21;out[1]=a02*a21-a01*a22;out[2]=a01*a12-a02*a11;out[3]=a12*a20-a10*a22;out[4]=a00*a22-a02*a20;out[5]=a02*a10-a00*a12;out[6]=a10*a21-a11*a20;out[7]=a01*a20-a00*a21;out[8]=a00*a11-a01*a10;return out}function determinant$2(a){var a00=
a[0],a01=a[1],a02=a[2];var a10=a[3],a11=a[4],a12=a[5];var a20=a[6],a21=a[7],a22=a[8];return a00*(a22*a11-a12*a21)+a01*(-a22*a10+a12*a20)+a02*(a21*a10-a11*a20)}function multiply$2(out,a,b){var a00=a[0],a01=a[1],a02=a[2];var a10=a[3],a11=a[4],a12=a[5];var a20=a[6],a21=a[7],a22=a[8];var b00=b[0],b01=b[1],b02=b[2];var b10=b[3],b11=b[4],b12=b[5];var b20=b[6],b21=b[7],b22=b[8];out[0]=b00*a00+b01*a10+b02*a20;out[1]=b00*a01+b01*a11+b02*a21;out[2]=b00*a02+b01*a12+b02*a22;out[3]=b10*a00+b11*a10+b12*a20;out[4]=
b10*a01+b11*a11+b12*a21;out[5]=b10*a02+b11*a12+b12*a22;out[6]=b20*a00+b21*a10+b22*a20;out[7]=b20*a01+b21*a11+b22*a21;out[8]=b20*a02+b21*a12+b22*a22;return out}function translate$1(out,a,v){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],x=v[0],y=v[1];out[0]=a00;out[1]=a01;out[2]=a02;out[3]=a10;out[4]=a11;out[5]=a12;out[6]=x*a00+y*a10+a20;out[7]=x*a01+y*a11+a21;out[8]=x*a02+y*a12+a22;return out}function rotate$2(out,a,rad){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],
a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],s=Math.sin(rad),c=Math.cos(rad);out[0]=c*a00+s*a10;out[1]=c*a01+s*a11;out[2]=c*a02+s*a12;out[3]=c*a10-s*a00;out[4]=c*a11-s*a01;out[5]=c*a12-s*a02;out[6]=a20;out[7]=a21;out[8]=a22;return out}function scale$2(out,a,v){var x=v[0],y=v[1];out[0]=x*a[0];out[1]=x*a[1];out[2]=x*a[2];out[3]=y*a[3];out[4]=y*a[4];out[5]=y*a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];return out}function fromTranslation$1(out,v){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=1;out[5]=0;out[6]=
v[0];out[7]=v[1];out[8]=1;return out}function fromRotation$2(out,rad){var s=Math.sin(rad),c=Math.cos(rad);out[0]=c;out[1]=s;out[2]=0;out[3]=-s;out[4]=c;out[5]=0;out[6]=0;out[7]=0;out[8]=1;return out}function fromScaling$2(out,v){out[0]=v[0];out[1]=0;out[2]=0;out[3]=0;out[4]=v[1];out[5]=0;out[6]=0;out[7]=0;out[8]=1;return out}function fromMat2d(out,a){out[0]=a[0];out[1]=a[1];out[2]=0;out[3]=a[2];out[4]=a[3];out[5]=0;out[6]=a[4];out[7]=a[5];out[8]=1;return out}function fromQuat(out,q){var x=q[0],y=
q[1],z=q[2],w=q[3];var x2=x+x;var y2=y+y;var z2=z+z;var xx=x*x2;var yx=y*x2;var yy=y*y2;var zx=z*x2;var zy=z*y2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;out[0]=1-yy-zz;out[3]=yx-wz;out[6]=zx+wy;out[1]=yx+wz;out[4]=1-xx-zz;out[7]=zy-wx;out[2]=zx-wy;out[5]=zy+wx;out[8]=1-xx-yy;return out}function normalFromMat4(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3];var a10=a[4],a11=a[5],a12=a[6],a13=a[7];var a20=a[8],a21=a[9],a22=a[10],a23=a[11];var a30=a[12],a31=a[13],a32=a[14],a33=a[15];var b00=a00*
a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(!det)return null;det=1/det;out[0]=(a11*b11-a12*b10+a13*b09)*det;out[1]=(a12*b08-a10*b11-a13*b07)*det;out[2]=(a10*b10-a11*b08+a13*b06)*det;out[3]=(a02*b10-a01*b11-a03*
b09)*det;out[4]=(a00*b11-a02*b08+a03*b07)*det;out[5]=(a01*b08-a00*b10-a03*b06)*det;out[6]=(a31*b05-a32*b04+a33*b03)*det;out[7]=(a32*b02-a30*b05-a33*b01)*det;out[8]=(a30*b04-a31*b02+a33*b00)*det;return out}function projection(out,width,height){out[0]=2/width;out[1]=0;out[2]=0;out[3]=0;out[4]=-2/height;out[5]=0;out[6]=-1;out[7]=1;out[8]=1;return out}function str$2(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"}function frob$2(a){return Math.hypot(a[0],
a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])}function add$2(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];out[4]=a[4]+b[4];out[5]=a[5]+b[5];out[6]=a[6]+b[6];out[7]=a[7]+b[7];out[8]=a[8]+b[8];return out}function subtract$2(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];out[4]=a[4]-b[4];out[5]=a[5]-b[5];out[6]=a[6]-b[6];out[7]=a[7]-b[7];out[8]=a[8]-b[8];return out}function multiplyScalar$2(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=
a[3]*b;out[4]=a[4]*b;out[5]=a[5]*b;out[6]=a[6]*b;out[7]=a[7]*b;out[8]=a[8]*b;return out}function multiplyScalarAndAdd$2(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;out[4]=a[4]+b[4]*scale;out[5]=a[5]+b[5]*scale;out[6]=a[6]+b[6]*scale;out[7]=a[7]+b[7]*scale;out[8]=a[8]+b[8]*scale;return out}function exactEquals$2(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]}
function equals$3(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7],a8=a[8];var b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8];return Math.abs(a0-b0)<=EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&
Math.abs(a5-b5)<=EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=EPSILON*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=EPSILON*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=EPSILON*Math.max(1,Math.abs(a8),Math.abs(b8))}var mul$2=multiply$2;var sub$2=subtract$2;var mat3=Object.freeze({__proto__:null,create:create$2,fromMat4:fromMat4,clone:clone$2,copy:copy$2,fromValues:fromValues$2,set:set$2,identity:identity$2,transpose:transpose$1,invert:invert$2,adjoint:adjoint$1,
determinant:determinant$2,multiply:multiply$2,translate:translate$1,rotate:rotate$2,scale:scale$2,fromTranslation:fromTranslation$1,fromRotation:fromRotation$2,fromScaling:fromScaling$2,fromMat2d:fromMat2d,fromQuat:fromQuat,normalFromMat4:normalFromMat4,projection:projection,str:str$2,frob:frob$2,add:add$2,subtract:subtract$2,multiplyScalar:multiplyScalar$2,multiplyScalarAndAdd:multiplyScalarAndAdd$2,exactEquals:exactEquals$2,equals:equals$3,mul:mul$2,sub:sub$2});function create$3(){var out=new ARRAY_TYPE(16);
if(ARRAY_TYPE!=Float32Array){out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[11]=0;out[12]=0;out[13]=0;out[14]=0}out[0]=1;out[5]=1;out[10]=1;out[15]=1;return out}function clone$3(a){var out=new ARRAY_TYPE(16);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15];return out}function copy$3(out,a){out[0]=a[0];out[1]=a[1];out[2]=
a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15];return out}function fromValues$3(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){var out=new ARRAY_TYPE(16);out[0]=m00;out[1]=m01;out[2]=m02;out[3]=m03;out[4]=m10;out[5]=m11;out[6]=m12;out[7]=m13;out[8]=m20;out[9]=m21;out[10]=m22;out[11]=m23;out[12]=m30;out[13]=m31;out[14]=m32;out[15]=m33;return out}function set$3(out,
m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){out[0]=m00;out[1]=m01;out[2]=m02;out[3]=m03;out[4]=m10;out[5]=m11;out[6]=m12;out[7]=m13;out[8]=m20;out[9]=m21;out[10]=m22;out[11]=m23;out[12]=m30;out[13]=m31;out[14]=m32;out[15]=m33;return out}function identity$3(out){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=1;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}function transpose$2(out,a){if(out===a){var a01=a[1],a02=
a[2],a03=a[3];var a12=a[6],a13=a[7];var a23=a[11];out[1]=a[4];out[2]=a[8];out[3]=a[12];out[4]=a01;out[6]=a[9];out[7]=a[13];out[8]=a02;out[9]=a12;out[11]=a[14];out[12]=a03;out[13]=a13;out[14]=a23}else{out[0]=a[0];out[1]=a[4];out[2]=a[8];out[3]=a[12];out[4]=a[1];out[5]=a[5];out[6]=a[9];out[7]=a[13];out[8]=a[2];out[9]=a[6];out[10]=a[10];out[11]=a[14];out[12]=a[3];out[13]=a[7];out[14]=a[11];out[15]=a[15]}return out}function invert$3(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3];var a10=a[4],a11=a[5],
a12=a[6],a13=a[7];var a20=a[8],a21=a[9],a22=a[10],a23=a[11];var a30=a[12],a31=a[13],a32=a[14],a33=a[15];var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;var det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(!det)return null;det=1/det;out[0]=(a11*b11-a12*b10+
a13*b09)*det;out[1]=(a02*b10-a01*b11-a03*b09)*det;out[2]=(a31*b05-a32*b04+a33*b03)*det;out[3]=(a22*b04-a21*b05-a23*b03)*det;out[4]=(a12*b08-a10*b11-a13*b07)*det;out[5]=(a00*b11-a02*b08+a03*b07)*det;out[6]=(a32*b02-a30*b05-a33*b01)*det;out[7]=(a20*b05-a22*b02+a23*b01)*det;out[8]=(a10*b10-a11*b08+a13*b06)*det;out[9]=(a01*b08-a00*b10-a03*b06)*det;out[10]=(a30*b04-a31*b02+a33*b00)*det;out[11]=(a21*b02-a20*b04-a23*b00)*det;out[12]=(a11*b07-a10*b09-a12*b06)*det;out[13]=(a00*b09-a01*b07+a02*b06)*det;out[14]=
(a31*b01-a30*b03-a32*b00)*det;out[15]=(a20*b03-a21*b01+a22*b00)*det;return out}function adjoint$2(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3];var a10=a[4],a11=a[5],a12=a[6],a13=a[7];var a20=a[8],a21=a[9],a22=a[10],a23=a[11];var a30=a[12],a31=a[13],a32=a[14],a33=a[15];out[0]=a11*(a22*a33-a23*a32)-a21*(a12*a33-a13*a32)+a31*(a12*a23-a13*a22);out[1]=-(a01*(a22*a33-a23*a32)-a21*(a02*a33-a03*a32)+a31*(a02*a23-a03*a22));out[2]=a01*(a12*a33-a13*a32)-a11*(a02*a33-a03*a32)+a31*(a02*a13-a03*a12);out[3]=-(a01*
(a12*a23-a13*a22)-a11*(a02*a23-a03*a22)+a21*(a02*a13-a03*a12));out[4]=-(a10*(a22*a33-a23*a32)-a20*(a12*a33-a13*a32)+a30*(a12*a23-a13*a22));out[5]=a00*(a22*a33-a23*a32)-a20*(a02*a33-a03*a32)+a30*(a02*a23-a03*a22);out[6]=-(a00*(a12*a33-a13*a32)-a10*(a02*a33-a03*a32)+a30*(a02*a13-a03*a12));out[7]=a00*(a12*a23-a13*a22)-a10*(a02*a23-a03*a22)+a20*(a02*a13-a03*a12);out[8]=a10*(a21*a33-a23*a31)-a20*(a11*a33-a13*a31)+a30*(a11*a23-a13*a21);out[9]=-(a00*(a21*a33-a23*a31)-a20*(a01*a33-a03*a31)+a30*(a01*a23-a03*
a21));out[10]=a00*(a11*a33-a13*a31)-a10*(a01*a33-a03*a31)+a30*(a01*a13-a03*a11);out[11]=-(a00*(a11*a23-a13*a21)-a10*(a01*a23-a03*a21)+a20*(a01*a13-a03*a11));out[12]=-(a10*(a21*a32-a22*a31)-a20*(a11*a32-a12*a31)+a30*(a11*a22-a12*a21));out[13]=a00*(a21*a32-a22*a31)-a20*(a01*a32-a02*a31)+a30*(a01*a22-a02*a21);out[14]=-(a00*(a11*a32-a12*a31)-a10*(a01*a32-a02*a31)+a30*(a01*a12-a02*a11));out[15]=a00*(a11*a22-a12*a21)-a10*(a01*a22-a02*a21)+a20*(a01*a12-a02*a11);return out}function determinant$3(a){var a00=
a[0],a01=a[1],a02=a[2],a03=a[3];var a10=a[4],a11=a[5],a12=a[6],a13=a[7];var a20=a[8],a21=a[9],a22=a[10],a23=a[11];var a30=a[12],a31=a[13],a32=a[14],a33=a[15];var b00=a00*a11-a01*a10;var b01=a00*a12-a02*a10;var b02=a00*a13-a03*a10;var b03=a01*a12-a02*a11;var b04=a01*a13-a03*a11;var b05=a02*a13-a03*a12;var b06=a20*a31-a21*a30;var b07=a20*a32-a22*a30;var b08=a20*a33-a23*a30;var b09=a21*a32-a22*a31;var b10=a21*a33-a23*a31;var b11=a22*a33-a23*a32;return b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06}
function multiply$3(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a03=a[3];var a10=a[4],a11=a[5],a12=a[6],a13=a[7];var a20=a[8],a21=a[9],a22=a[10],a23=a[11];var a30=a[12],a31=a[13],a32=a[14],a33=a[15];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];out[0]=b0*a00+b1*a10+b2*a20+b3*a30;out[1]=b0*a01+b1*a11+b2*a21+b3*a31;out[2]=b0*a02+b1*a12+b2*a22+b3*a32;out[3]=b0*a03+b1*a13+b2*a23+b3*a33;b0=b[4];b1=b[5];b2=b[6];b3=b[7];out[4]=b0*a00+b1*a10+b2*a20+b3*a30;out[5]=b0*a01+b1*a11+b2*a21+b3*a31;out[6]=b0*a02+b1*a12+b2*a22+
b3*a32;out[7]=b0*a03+b1*a13+b2*a23+b3*a33;b0=b[8];b1=b[9];b2=b[10];b3=b[11];out[8]=b0*a00+b1*a10+b2*a20+b3*a30;out[9]=b0*a01+b1*a11+b2*a21+b3*a31;out[10]=b0*a02+b1*a12+b2*a22+b3*a32;out[11]=b0*a03+b1*a13+b2*a23+b3*a33;b0=b[12];b1=b[13];b2=b[14];b3=b[15];out[12]=b0*a00+b1*a10+b2*a20+b3*a30;out[13]=b0*a01+b1*a11+b2*a21+b3*a31;out[14]=b0*a02+b1*a12+b2*a22+b3*a32;out[15]=b0*a03+b1*a13+b2*a23+b3*a33;return out}function translate$2(out,a,v){var x=v[0],y=v[1],z=v[2];var a00,a01,a02,a03;var a10,a11,a12,a13;
var a20,a21,a22,a23;if(a===out){out[12]=a[0]*x+a[4]*y+a[8]*z+a[12];out[13]=a[1]*x+a[5]*y+a[9]*z+a[13];out[14]=a[2]*x+a[6]*y+a[10]*z+a[14];out[15]=a[3]*x+a[7]*y+a[11]*z+a[15]}else{a00=a[0];a01=a[1];a02=a[2];a03=a[3];a10=a[4];a11=a[5];a12=a[6];a13=a[7];a20=a[8];a21=a[9];a22=a[10];a23=a[11];out[0]=a00;out[1]=a01;out[2]=a02;out[3]=a03;out[4]=a10;out[5]=a11;out[6]=a12;out[7]=a13;out[8]=a20;out[9]=a21;out[10]=a22;out[11]=a23;out[12]=a00*x+a10*y+a20*z+a[12];out[13]=a01*x+a11*y+a21*z+a[13];out[14]=a02*x+
a12*y+a22*z+a[14];out[15]=a03*x+a13*y+a23*z+a[15]}return out}function scale$3(out,a,v){var x=v[0],y=v[1],z=v[2];out[0]=a[0]*x;out[1]=a[1]*x;out[2]=a[2]*x;out[3]=a[3]*x;out[4]=a[4]*y;out[5]=a[5]*y;out[6]=a[6]*y;out[7]=a[7]*y;out[8]=a[8]*z;out[9]=a[9]*z;out[10]=a[10]*z;out[11]=a[11]*z;out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15];return out}function rotate$3(out,a,rad,axis){var x=axis[0],y=axis[1],z=axis[2];var len=Math.hypot(x,y,z);var s,c,t;var a00,a01,a02,a03;var a10,a11,a12,a13;var a20,
a21,a22,a23;var b00,b01,b02;var b10,b11,b12;var b20,b21,b22;if(len<EPSILON)return null;len=1/len;x*=len;y*=len;z*=len;s=Math.sin(rad);c=Math.cos(rad);t=1-c;a00=a[0];a01=a[1];a02=a[2];a03=a[3];a10=a[4];a11=a[5];a12=a[6];a13=a[7];a20=a[8];a21=a[9];a22=a[10];a23=a[11];b00=x*x*t+c;b01=y*x*t+z*s;b02=z*x*t-y*s;b10=x*y*t-z*s;b11=y*y*t+c;b12=z*y*t+x*s;b20=x*z*t+y*s;b21=y*z*t-x*s;b22=z*z*t+c;out[0]=a00*b00+a10*b01+a20*b02;out[1]=a01*b00+a11*b01+a21*b02;out[2]=a02*b00+a12*b01+a22*b02;out[3]=a03*b00+a13*b01+
a23*b02;out[4]=a00*b10+a10*b11+a20*b12;out[5]=a01*b10+a11*b11+a21*b12;out[6]=a02*b10+a12*b11+a22*b12;out[7]=a03*b10+a13*b11+a23*b12;out[8]=a00*b20+a10*b21+a20*b22;out[9]=a01*b20+a11*b21+a21*b22;out[10]=a02*b20+a12*b21+a22*b22;out[11]=a03*b20+a13*b21+a23*b22;if(a!==out){out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}return out}function rotateX(out,a,rad){var s=Math.sin(rad);var c=Math.cos(rad);var a10=a[4];var a11=a[5];var a12=a[6];var a13=a[7];var a20=a[8];var a21=a[9];var a22=a[10];var a23=
a[11];if(a!==out){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}out[4]=a10*c+a20*s;out[5]=a11*c+a21*s;out[6]=a12*c+a22*s;out[7]=a13*c+a23*s;out[8]=a20*c-a10*s;out[9]=a21*c-a11*s;out[10]=a22*c-a12*s;out[11]=a23*c-a13*s;return out}function rotateY(out,a,rad){var s=Math.sin(rad);var c=Math.cos(rad);var a00=a[0];var a01=a[1];var a02=a[2];var a03=a[3];var a20=a[8];var a21=a[9];var a22=a[10];var a23=a[11];if(a!==out){out[4]=a[4];out[5]=a[5];out[6]=
a[6];out[7]=a[7];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}out[0]=a00*c-a20*s;out[1]=a01*c-a21*s;out[2]=a02*c-a22*s;out[3]=a03*c-a23*s;out[8]=a00*s+a20*c;out[9]=a01*s+a21*c;out[10]=a02*s+a22*c;out[11]=a03*s+a23*c;return out}function rotateZ(out,a,rad){var s=Math.sin(rad);var c=Math.cos(rad);var a00=a[0];var a01=a[1];var a02=a[2];var a03=a[3];var a10=a[4];var a11=a[5];var a12=a[6];var a13=a[7];if(a!==out){out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=a[12];out[13]=a[13];
out[14]=a[14];out[15]=a[15]}out[0]=a00*c+a10*s;out[1]=a01*c+a11*s;out[2]=a02*c+a12*s;out[3]=a03*c+a13*s;out[4]=a10*c-a00*s;out[5]=a11*c-a01*s;out[6]=a12*c-a02*s;out[7]=a13*c-a03*s;return out}function fromTranslation$2(out,v){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=1;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=0;out[12]=v[0];out[13]=v[1];out[14]=v[2];out[15]=1;return out}function fromScaling$3(out,v){out[0]=v[0];out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=v[1];out[6]=0;out[7]=
0;out[8]=0;out[9]=0;out[10]=v[2];out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}function fromRotation$3(out,rad,axis){var x=axis[0],y=axis[1],z=axis[2];var len=Math.hypot(x,y,z);var s,c,t;if(len<EPSILON)return null;len=1/len;x*=len;y*=len;z*=len;s=Math.sin(rad);c=Math.cos(rad);t=1-c;out[0]=x*x*t+c;out[1]=y*x*t+z*s;out[2]=z*x*t-y*s;out[3]=0;out[4]=x*y*t-z*s;out[5]=y*y*t+c;out[6]=z*y*t+x*s;out[7]=0;out[8]=x*z*t+y*s;out[9]=y*z*t-x*s;out[10]=z*z*t+c;out[11]=0;out[12]=0;out[13]=0;out[14]=
0;out[15]=1;return out}function fromXRotation(out,rad){var s=Math.sin(rad);var c=Math.cos(rad);out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=c;out[6]=s;out[7]=0;out[8]=0;out[9]=-s;out[10]=c;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}function fromYRotation(out,rad){var s=Math.sin(rad);var c=Math.cos(rad);out[0]=c;out[1]=0;out[2]=-s;out[3]=0;out[4]=0;out[5]=1;out[6]=0;out[7]=0;out[8]=s;out[9]=0;out[10]=c;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}function fromZRotation(out,
rad){var s=Math.sin(rad);var c=Math.cos(rad);out[0]=c;out[1]=s;out[2]=0;out[3]=0;out[4]=-s;out[5]=c;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}function fromRotationTranslation(out,q,v){var x=q[0],y=q[1],z=q[2],w=q[3];var x2=x+x;var y2=y+y;var z2=z+z;var xx=x*x2;var xy=x*y2;var xz=x*z2;var yy=y*y2;var yz=y*z2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;out[0]=1-(yy+zz);out[1]=xy+wz;out[2]=xz-wy;out[3]=0;out[4]=xy-wz;out[5]=1-(xx+zz);
out[6]=yz+wx;out[7]=0;out[8]=xz+wy;out[9]=yz-wx;out[10]=1-(xx+yy);out[11]=0;out[12]=v[0];out[13]=v[1];out[14]=v[2];out[15]=1;return out}function fromQuat2(out,a){var translation=new ARRAY_TYPE(3);var bx=-a[0],by=-a[1],bz=-a[2],bw=a[3],ax=a[4],ay=a[5],az=a[6],aw=a[7];var magnitude=bx*bx+by*by+bz*bz+bw*bw;if(magnitude>0){translation[0]=(ax*bw+aw*bx+ay*bz-az*by)*2/magnitude;translation[1]=(ay*bw+aw*by+az*bx-ax*bz)*2/magnitude;translation[2]=(az*bw+aw*bz+ax*by-ay*bx)*2/magnitude}else{translation[0]=(ax*
bw+aw*bx+ay*bz-az*by)*2;translation[1]=(ay*bw+aw*by+az*bx-ax*bz)*2;translation[2]=(az*bw+aw*bz+ax*by-ay*bx)*2}fromRotationTranslation(out,a,translation);return out}function getTranslation(out,mat){out[0]=mat[12];out[1]=mat[13];out[2]=mat[14];return out}function getScaling(out,mat){var m11=mat[0];var m12=mat[1];var m13=mat[2];var m21=mat[4];var m22=mat[5];var m23=mat[6];var m31=mat[8];var m32=mat[9];var m33=mat[10];out[0]=Math.hypot(m11,m12,m13);out[1]=Math.hypot(m21,m22,m23);out[2]=Math.hypot(m31,
m32,m33);return out}function getRotation(out,mat){var scaling=new ARRAY_TYPE(3);getScaling(scaling,mat);var is1=1/scaling[0];var is2=1/scaling[1];var is3=1/scaling[2];var sm11=mat[0]*is1;var sm12=mat[1]*is2;var sm13=mat[2]*is3;var sm21=mat[4]*is1;var sm22=mat[5]*is2;var sm23=mat[6]*is3;var sm31=mat[8]*is1;var sm32=mat[9]*is2;var sm33=mat[10]*is3;var trace=sm11+sm22+sm33;var S=0;if(trace>0){S=Math.sqrt(trace+1)*2;out[3]=.25*S;out[0]=(sm23-sm32)/S;out[1]=(sm31-sm13)/S;out[2]=(sm12-sm21)/S}else if(sm11>
sm22&&sm11>sm33){S=Math.sqrt(1+sm11-sm22-sm33)*2;out[3]=(sm23-sm32)/S;out[0]=.25*S;out[1]=(sm12+sm21)/S;out[2]=(sm31+sm13)/S}else if(sm22>sm33){S=Math.sqrt(1+sm22-sm11-sm33)*2;out[3]=(sm31-sm13)/S;out[0]=(sm12+sm21)/S;out[1]=.25*S;out[2]=(sm23+sm32)/S}else{S=Math.sqrt(1+sm33-sm11-sm22)*2;out[3]=(sm12-sm21)/S;out[0]=(sm31+sm13)/S;out[1]=(sm23+sm32)/S;out[2]=.25*S}return out}function fromRotationTranslationScale(out,q,v,s){var x=q[0],y=q[1],z=q[2],w=q[3];var x2=x+x;var y2=y+y;var z2=z+z;var xx=x*x2;
var xy=x*y2;var xz=x*z2;var yy=y*y2;var yz=y*z2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;var sx=s[0];var sy=s[1];var sz=s[2];out[0]=(1-(yy+zz))*sx;out[1]=(xy+wz)*sx;out[2]=(xz-wy)*sx;out[3]=0;out[4]=(xy-wz)*sy;out[5]=(1-(xx+zz))*sy;out[6]=(yz+wx)*sy;out[7]=0;out[8]=(xz+wy)*sz;out[9]=(yz-wx)*sz;out[10]=(1-(xx+yy))*sz;out[11]=0;out[12]=v[0];out[13]=v[1];out[14]=v[2];out[15]=1;return out}function fromRotationTranslationScaleOrigin(out,q,v,s,o){var x=q[0],y=q[1],z=q[2],w=q[3];var x2=x+x;var y2=
y+y;var z2=z+z;var xx=x*x2;var xy=x*y2;var xz=x*z2;var yy=y*y2;var yz=y*z2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;var sx=s[0];var sy=s[1];var sz=s[2];var ox=o[0];var oy=o[1];var oz=o[2];var out0=(1-(yy+zz))*sx;var out1=(xy+wz)*sx;var out2=(xz-wy)*sx;var out4=(xy-wz)*sy;var out5=(1-(xx+zz))*sy;var out6=(yz+wx)*sy;var out8=(xz+wy)*sz;var out9=(yz-wx)*sz;var out10=(1-(xx+yy))*sz;out[0]=out0;out[1]=out1;out[2]=out2;out[3]=0;out[4]=out4;out[5]=out5;out[6]=out6;out[7]=0;out[8]=out8;out[9]=out9;
out[10]=out10;out[11]=0;out[12]=v[0]+ox-(out0*ox+out4*oy+out8*oz);out[13]=v[1]+oy-(out1*ox+out5*oy+out9*oz);out[14]=v[2]+oz-(out2*ox+out6*oy+out10*oz);out[15]=1;return out}function fromQuat$1(out,q){var x=q[0],y=q[1],z=q[2],w=q[3];var x2=x+x;var y2=y+y;var z2=z+z;var xx=x*x2;var yx=y*x2;var yy=y*y2;var zx=z*x2;var zy=z*y2;var zz=z*z2;var wx=w*x2;var wy=w*y2;var wz=w*z2;out[0]=1-yy-zz;out[1]=yx+wz;out[2]=zx-wy;out[3]=0;out[4]=yx-wz;out[5]=1-xx-zz;out[6]=zy+wx;out[7]=0;out[8]=zx+wy;out[9]=zy-wx;out[10]=
1-xx-yy;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}function frustum(out,left,right,bottom,top,near,far){var rl=1/(right-left);var tb=1/(top-bottom);var nf=1/(near-far);out[0]=near*2*rl;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=near*2*tb;out[6]=0;out[7]=0;out[8]=(right+left)*rl;out[9]=(top+bottom)*tb;out[10]=(far+near)*nf;out[11]=-1;out[12]=0;out[13]=0;out[14]=far*near*2*nf;out[15]=0;return out}function perspective(out,fovy,aspect,near,far){var f=1/Math.tan(fovy/2),nf;out[0]=f/aspect;
out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=f;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[11]=-1;out[12]=0;out[13]=0;out[15]=0;if(far!=null&&far!==Infinity){nf=1/(near-far);out[10]=(far+near)*nf;out[14]=2*far*near*nf}else{out[10]=-1;out[14]=-2*near}return out}function perspectiveFromFieldOfView(out,fov,near,far){var upTan=Math.tan(fov.upDegrees*Math.PI/180);var downTan=Math.tan(fov.downDegrees*Math.PI/180);var leftTan=Math.tan(fov.leftDegrees*Math.PI/180);var rightTan=Math.tan(fov.rightDegrees*Math.PI/
180);var xScale=2/(leftTan+rightTan);var yScale=2/(upTan+downTan);out[0]=xScale;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=yScale;out[6]=0;out[7]=0;out[8]=-((leftTan-rightTan)*xScale*.5);out[9]=(upTan-downTan)*yScale*.5;out[10]=far/(near-far);out[11]=-1;out[12]=0;out[13]=0;out[14]=far*near/(near-far);out[15]=0;return out}function ortho(out,left,right,bottom,top,near,far){var lr=1/(left-right);var bt=1/(bottom-top);var nf=1/(near-far);out[0]=-2*lr;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=-2*bt;out[6]=
0;out[7]=0;out[8]=0;out[9]=0;out[10]=2*nf;out[11]=0;out[12]=(left+right)*lr;out[13]=(top+bottom)*bt;out[14]=(far+near)*nf;out[15]=1;return out}function lookAt(out,eye,center,up){var x0,x1,x2,y0,y1,y2,z0,z1,z2,len;var eyex=eye[0];var eyey=eye[1];var eyez=eye[2];var upx=up[0];var upy=up[1];var upz=up[2];var centerx=center[0];var centery=center[1];var centerz=center[2];if(Math.abs(eyex-centerx)<EPSILON&&Math.abs(eyey-centery)<EPSILON&&Math.abs(eyez-centerz)<EPSILON)return identity$3(out);z0=eyex-centerx;
z1=eyey-centery;z2=eyez-centerz;len=1/Math.hypot(z0,z1,z2);z0*=len;z1*=len;z2*=len;x0=upy*z2-upz*z1;x1=upz*z0-upx*z2;x2=upx*z1-upy*z0;len=Math.hypot(x0,x1,x2);if(!len){x0=0;x1=0;x2=0}else{len=1/len;x0*=len;x1*=len;x2*=len}y0=z1*x2-z2*x1;y1=z2*x0-z0*x2;y2=z0*x1-z1*x0;len=Math.hypot(y0,y1,y2);if(!len){y0=0;y1=0;y2=0}else{len=1/len;y0*=len;y1*=len;y2*=len}out[0]=x0;out[1]=y0;out[2]=z0;out[3]=0;out[4]=x1;out[5]=y1;out[6]=z1;out[7]=0;out[8]=x2;out[9]=y2;out[10]=z2;out[11]=0;out[12]=-(x0*eyex+x1*eyey+x2*
eyez);out[13]=-(y0*eyex+y1*eyey+y2*eyez);out[14]=-(z0*eyex+z1*eyey+z2*eyez);out[15]=1;return out}function targetTo(out,eye,target,up){var eyex=eye[0],eyey=eye[1],eyez=eye[2],upx=up[0],upy=up[1],upz=up[2];var z0=eyex-target[0],z1=eyey-target[1],z2=eyez-target[2];var len=z0*z0+z1*z1+z2*z2;if(len>0){len=1/Math.sqrt(len);z0*=len;z1*=len;z2*=len}var x0=upy*z2-upz*z1,x1=upz*z0-upx*z2,x2=upx*z1-upy*z0;len=x0*x0+x1*x1+x2*x2;if(len>0){len=1/Math.sqrt(len);x0*=len;x1*=len;x2*=len}out[0]=x0;out[1]=x1;out[2]=
x2;out[3]=0;out[4]=z1*x2-z2*x1;out[5]=z2*x0-z0*x2;out[6]=z0*x1-z1*x0;out[7]=0;out[8]=z0;out[9]=z1;out[10]=z2;out[11]=0;out[12]=eyex;out[13]=eyey;out[14]=eyez;out[15]=1;return out}function str$3(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function frob$3(a){return Math.hypot(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])}function add$3(out,
a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];out[4]=a[4]+b[4];out[5]=a[5]+b[5];out[6]=a[6]+b[6];out[7]=a[7]+b[7];out[8]=a[8]+b[8];out[9]=a[9]+b[9];out[10]=a[10]+b[10];out[11]=a[11]+b[11];out[12]=a[12]+b[12];out[13]=a[13]+b[13];out[14]=a[14]+b[14];out[15]=a[15]+b[15];return out}function subtract$3(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];out[4]=a[4]-b[4];out[5]=a[5]-b[5];out[6]=a[6]-b[6];out[7]=a[7]-b[7];out[8]=a[8]-b[8];out[9]=a[9]-b[9];
out[10]=a[10]-b[10];out[11]=a[11]-b[11];out[12]=a[12]-b[12];out[13]=a[13]-b[13];out[14]=a[14]-b[14];out[15]=a[15]-b[15];return out}function multiplyScalar$3(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;out[4]=a[4]*b;out[5]=a[5]*b;out[6]=a[6]*b;out[7]=a[7]*b;out[8]=a[8]*b;out[9]=a[9]*b;out[10]=a[10]*b;out[11]=a[11]*b;out[12]=a[12]*b;out[13]=a[13]*b;out[14]=a[14]*b;out[15]=a[15]*b;return out}function multiplyScalarAndAdd$3(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;
out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;out[4]=a[4]+b[4]*scale;out[5]=a[5]+b[5]*scale;out[6]=a[6]+b[6]*scale;out[7]=a[7]+b[7]*scale;out[8]=a[8]+b[8]*scale;out[9]=a[9]+b[9]*scale;out[10]=a[10]+b[10]*scale;out[11]=a[11]+b[11]*scale;out[12]=a[12]+b[12]*scale;out[13]=a[13]+b[13]*scale;out[14]=a[14]+b[14]*scale;out[15]=a[15]+b[15]*scale;return out}function exactEquals$3(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&
a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]}function equals$4(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var a4=a[4],a5=a[5],a6=a[6],a7=a[7];var a8=a[8],a9=a[9],a10=a[10],a11=a[11];var a12=a[12],a13=a[13],a14=a[14],a15=a[15];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];var b4=b[4],b5=b[5],b6=b[6],b7=b[7];var b8=b[8],b9=b[9],b10=b[10],b11=b[11];var b12=b[12],b13=b[13],b14=b[14],b15=b[15];return Math.abs(a0-b0)<=EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&
Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=EPSILON*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=EPSILON*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=EPSILON*Math.max(1,Math.abs(a8),Math.abs(b8))&&
Math.abs(a9-b9)<=EPSILON*Math.max(1,Math.abs(a9),Math.abs(b9))&&Math.abs(a10-b10)<=EPSILON*Math.max(1,Math.abs(a10),Math.abs(b10))&&Math.abs(a11-b11)<=EPSILON*Math.max(1,Math.abs(a11),Math.abs(b11))&&Math.abs(a12-b12)<=EPSILON*Math.max(1,Math.abs(a12),Math.abs(b12))&&Math.abs(a13-b13)<=EPSILON*Math.max(1,Math.abs(a13),Math.abs(b13))&&Math.abs(a14-b14)<=EPSILON*Math.max(1,Math.abs(a14),Math.abs(b14))&&Math.abs(a15-b15)<=EPSILON*Math.max(1,Math.abs(a15),Math.abs(b15))}var mul$3=multiply$3;var sub$3=
subtract$3;var mat4=Object.freeze({__proto__:null,create:create$3,clone:clone$3,copy:copy$3,fromValues:fromValues$3,set:set$3,identity:identity$3,transpose:transpose$2,invert:invert$3,adjoint:adjoint$2,determinant:determinant$3,multiply:multiply$3,translate:translate$2,scale:scale$3,rotate:rotate$3,rotateX:rotateX,rotateY:rotateY,rotateZ:rotateZ,fromTranslation:fromTranslation$2,fromScaling:fromScaling$3,fromRotation:fromRotation$3,fromXRotation:fromXRotation,fromYRotation:fromYRotation,fromZRotation:fromZRotation,
fromRotationTranslation:fromRotationTranslation,fromQuat2:fromQuat2,getTranslation:getTranslation,getScaling:getScaling,getRotation:getRotation,fromRotationTranslationScale:fromRotationTranslationScale,fromRotationTranslationScaleOrigin:fromRotationTranslationScaleOrigin,fromQuat:fromQuat$1,frustum:frustum,perspective:perspective,perspectiveFromFieldOfView:perspectiveFromFieldOfView,ortho:ortho,lookAt:lookAt,targetTo:targetTo,str:str$3,frob:frob$3,add:add$3,subtract:subtract$3,multiplyScalar:multiplyScalar$3,
multiplyScalarAndAdd:multiplyScalarAndAdd$3,exactEquals:exactEquals$3,equals:equals$4,mul:mul$3,sub:sub$3});function create$4(){var out=new ARRAY_TYPE(3);if(ARRAY_TYPE!=Float32Array){out[0]=0;out[1]=0;out[2]=0}return out}function clone$4(a){var out=new ARRAY_TYPE(3);out[0]=a[0];out[1]=a[1];out[2]=a[2];return out}function length(a){var x=a[0];var y=a[1];var z=a[2];return Math.hypot(x,y,z)}function fromValues$4(x,y,z){var out=new ARRAY_TYPE(3);out[0]=x;out[1]=y;out[2]=z;return out}function copy$4(out,
a){out[0]=a[0];out[1]=a[1];out[2]=a[2];return out}function set$4(out,x,y,z){out[0]=x;out[1]=y;out[2]=z;return out}function add$4(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];return out}function subtract$4(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];return out}function multiply$4(out,a,b){out[0]=a[0]*b[0];out[1]=a[1]*b[1];out[2]=a[2]*b[2];return out}function divide(out,a,b){out[0]=a[0]/b[0];out[1]=a[1]/b[1];out[2]=a[2]/b[2];return out}function ceil(out,a){out[0]=Math.ceil(a[0]);
out[1]=Math.ceil(a[1]);out[2]=Math.ceil(a[2]);return out}function floor(out,a){out[0]=Math.floor(a[0]);out[1]=Math.floor(a[1]);out[2]=Math.floor(a[2]);return out}function min(out,a,b){out[0]=Math.min(a[0],b[0]);out[1]=Math.min(a[1],b[1]);out[2]=Math.min(a[2],b[2]);return out}function max(out,a,b){out[0]=Math.max(a[0],b[0]);out[1]=Math.max(a[1],b[1]);out[2]=Math.max(a[2],b[2]);return out}function round(out,a){out[0]=Math.round(a[0]);out[1]=Math.round(a[1]);out[2]=Math.round(a[2]);return out}function scale$4(out,
a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;return out}function scaleAndAdd(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;return out}function distance(a,b){var x=b[0]-a[0];var y=b[1]-a[1];var z=b[2]-a[2];return Math.hypot(x,y,z)}function squaredDistance(a,b){var x=b[0]-a[0];var y=b[1]-a[1];var z=b[2]-a[2];return x*x+y*y+z*z}function squaredLength(a){var x=a[0];var y=a[1];var z=a[2];return x*x+y*y+z*z}function negate(out,a){out[0]=-a[0];out[1]=-a[1];out[2]=
-a[2];return out}function inverse(out,a){out[0]=1/a[0];out[1]=1/a[1];out[2]=1/a[2];return out}function normalize(out,a){var x=a[0];var y=a[1];var z=a[2];var len=x*x+y*y+z*z;if(len>0)len=1/Math.sqrt(len);out[0]=a[0]*len;out[1]=a[1]*len;out[2]=a[2]*len;return out}function dot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cross(out,a,b){var ax=a[0],ay=a[1],az=a[2];var bx=b[0],by=b[1],bz=b[2];out[0]=ay*bz-az*by;out[1]=az*bx-ax*bz;out[2]=ax*by-ay*bx;return out}function lerp(out,a,b,t){var ax=a[0];
var ay=a[1];var az=a[2];out[0]=ax+t*(b[0]-ax);out[1]=ay+t*(b[1]-ay);out[2]=az+t*(b[2]-az);return out}function hermite(out,a,b,c,d,t){var factorTimes2=t*t;var factor1=factorTimes2*(2*t-3)+1;var factor2=factorTimes2*(t-2)+t;var factor3=factorTimes2*(t-1);var factor4=factorTimes2*(3-2*t);out[0]=a[0]*factor1+b[0]*factor2+c[0]*factor3+d[0]*factor4;out[1]=a[1]*factor1+b[1]*factor2+c[1]*factor3+d[1]*factor4;out[2]=a[2]*factor1+b[2]*factor2+c[2]*factor3+d[2]*factor4;return out}function bezier(out,a,b,c,d,
t){var inverseFactor=1-t;var inverseFactorTimesTwo=inverseFactor*inverseFactor;var factorTimes2=t*t;var factor1=inverseFactorTimesTwo*inverseFactor;var factor2=3*t*inverseFactorTimesTwo;var factor3=3*factorTimes2*inverseFactor;var factor4=factorTimes2*t;out[0]=a[0]*factor1+b[0]*factor2+c[0]*factor3+d[0]*factor4;out[1]=a[1]*factor1+b[1]*factor2+c[1]*factor3+d[1]*factor4;out[2]=a[2]*factor1+b[2]*factor2+c[2]*factor3+d[2]*factor4;return out}function random(out,scale){scale=scale||1;var r=RANDOM()*2*
Math.PI;var z=RANDOM()*2-1;var zScale=Math.sqrt(1-z*z)*scale;out[0]=Math.cos(r)*zScale;out[1]=Math.sin(r)*zScale;out[2]=z*scale;return out}function transformMat4(out,a,m){var x=a[0],y=a[1],z=a[2];var w=m[3]*x+m[7]*y+m[11]*z+m[15];w=w||1;out[0]=(m[0]*x+m[4]*y+m[8]*z+m[12])/w;out[1]=(m[1]*x+m[5]*y+m[9]*z+m[13])/w;out[2]=(m[2]*x+m[6]*y+m[10]*z+m[14])/w;return out}function transformMat3(out,a,m){var x=a[0],y=a[1],z=a[2];out[0]=x*m[0]+y*m[3]+z*m[6];out[1]=x*m[1]+y*m[4]+z*m[7];out[2]=x*m[2]+y*m[5]+z*m[8];
return out}function transformQuat(out,a,q){var qx=q[0],qy=q[1],qz=q[2],qw=q[3];var x=a[0],y=a[1],z=a[2];var uvx=qy*z-qz*y,uvy=qz*x-qx*z,uvz=qx*y-qy*x;var uuvx=qy*uvz-qz*uvy,uuvy=qz*uvx-qx*uvz,uuvz=qx*uvy-qy*uvx;var w2=qw*2;uvx*=w2;uvy*=w2;uvz*=w2;uuvx*=2;uuvy*=2;uuvz*=2;out[0]=x+uvx+uuvx;out[1]=y+uvy+uuvy;out[2]=z+uvz+uuvz;return out}function rotateX$1(out,a,b,rad){var p=[],r=[];p[0]=a[0]-b[0];p[1]=a[1]-b[1];p[2]=a[2]-b[2];r[0]=p[0];r[1]=p[1]*Math.cos(rad)-p[2]*Math.sin(rad);r[2]=p[1]*Math.sin(rad)+
p[2]*Math.cos(rad);out[0]=r[0]+b[0];out[1]=r[1]+b[1];out[2]=r[2]+b[2];return out}function rotateY$1(out,a,b,rad){var p=[],r=[];p[0]=a[0]-b[0];p[1]=a[1]-b[1];p[2]=a[2]-b[2];r[0]=p[2]*Math.sin(rad)+p[0]*Math.cos(rad);r[1]=p[1];r[2]=p[2]*Math.cos(rad)-p[0]*Math.sin(rad);out[0]=r[0]+b[0];out[1]=r[1]+b[1];out[2]=r[2]+b[2];return out}function rotateZ$1(out,a,b,rad){var p=[],r=[];p[0]=a[0]-b[0];p[1]=a[1]-b[1];p[2]=a[2]-b[2];r[0]=p[0]*Math.cos(rad)-p[1]*Math.sin(rad);r[1]=p[0]*Math.sin(rad)+p[1]*Math.cos(rad);
r[2]=p[2];out[0]=r[0]+b[0];out[1]=r[1]+b[1];out[2]=r[2]+b[2];return out}function angle(a,b){var ax=a[0],ay=a[1],az=a[2],bx=b[0],by=b[1],bz=b[2],mag1=Math.sqrt(ax*ax+ay*ay+az*az),mag2=Math.sqrt(bx*bx+by*by+bz*bz),mag=mag1*mag2,cosine=mag&&dot(a,b)/mag;return Math.acos(Math.min(Math.max(cosine,-1),1))}function zero(out){out[0]=0;out[1]=0;out[2]=0;return out}function str$4(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"}function exactEquals$4(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]}function equals$5(a,
b){var a0=a[0],a1=a[1],a2=a[2];var b0=b[0],b1=b[1],b2=b[2];return Math.abs(a0-b0)<=EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))}var sub$4=subtract$4;var mul$4=multiply$4;var div=divide;var dist=distance;var sqrDist=squaredDistance;var len=length;var sqrLen=squaredLength;var forEach=function(){var vec=create$4();return function(a,stride,offset,count,fn,arg){var i,l;if(!stride)stride=
3;if(!offset)offset=0;if(count)l=Math.min(count*stride+offset,a.length);else l=a.length;for(i=offset;i<l;i+=stride){vec[0]=a[i];vec[1]=a[i+1];vec[2]=a[i+2];fn(vec,vec,arg);a[i]=vec[0];a[i+1]=vec[1];a[i+2]=vec[2]}return a}}();var vec3=Object.freeze({__proto__:null,create:create$4,clone:clone$4,length:length,fromValues:fromValues$4,copy:copy$4,set:set$4,add:add$4,subtract:subtract$4,multiply:multiply$4,divide:divide,ceil:ceil,floor:floor,min:min,max:max,round:round,scale:scale$4,scaleAndAdd:scaleAndAdd,
distance:distance,squaredDistance:squaredDistance,squaredLength:squaredLength,negate:negate,inverse:inverse,normalize:normalize,dot:dot,cross:cross,lerp:lerp,hermite:hermite,bezier:bezier,random:random,transformMat4:transformMat4,transformMat3:transformMat3,transformQuat:transformQuat,rotateX:rotateX$1,rotateY:rotateY$1,rotateZ:rotateZ$1,angle:angle,zero:zero,str:str$4,exactEquals:exactEquals$4,equals:equals$5,sub:sub$4,mul:mul$4,div:div,dist:dist,sqrDist:sqrDist,len:len,sqrLen:sqrLen,forEach:forEach});
function create$5(){var out=new ARRAY_TYPE(4);if(ARRAY_TYPE!=Float32Array){out[0]=0;out[1]=0;out[2]=0;out[3]=0}return out}function clone$5(a){var out=new ARRAY_TYPE(4);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out}function fromValues$5(x,y,z,w){var out=new ARRAY_TYPE(4);out[0]=x;out[1]=y;out[2]=z;out[3]=w;return out}function copy$5(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out}function set$5(out,x,y,z,w){out[0]=x;out[1]=y;out[2]=z;out[3]=w;return out}function add$5(out,
a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];return out}function subtract$5(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];return out}function multiply$5(out,a,b){out[0]=a[0]*b[0];out[1]=a[1]*b[1];out[2]=a[2]*b[2];out[3]=a[3]*b[3];return out}function divide$1(out,a,b){out[0]=a[0]/b[0];out[1]=a[1]/b[1];out[2]=a[2]/b[2];out[3]=a[3]/b[3];return out}function ceil$1(out,a){out[0]=Math.ceil(a[0]);out[1]=Math.ceil(a[1]);out[2]=Math.ceil(a[2]);out[3]=
Math.ceil(a[3]);return out}function floor$1(out,a){out[0]=Math.floor(a[0]);out[1]=Math.floor(a[1]);out[2]=Math.floor(a[2]);out[3]=Math.floor(a[3]);return out}function min$1(out,a,b){out[0]=Math.min(a[0],b[0]);out[1]=Math.min(a[1],b[1]);out[2]=Math.min(a[2],b[2]);out[3]=Math.min(a[3],b[3]);return out}function max$1(out,a,b){out[0]=Math.max(a[0],b[0]);out[1]=Math.max(a[1],b[1]);out[2]=Math.max(a[2],b[2]);out[3]=Math.max(a[3],b[3]);return out}function round$1(out,a){out[0]=Math.round(a[0]);out[1]=Math.round(a[1]);
out[2]=Math.round(a[2]);out[3]=Math.round(a[3]);return out}function scale$5(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;return out}function scaleAndAdd$1(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;return out}function distance$1(a,b){var x=b[0]-a[0];var y=b[1]-a[1];var z=b[2]-a[2];var w=b[3]-a[3];return Math.hypot(x,y,z,w)}function squaredDistance$1(a,b){var x=b[0]-a[0];var y=b[1]-a[1];var z=b[2]-a[2];var w=b[3]-a[3];
return x*x+y*y+z*z+w*w}function length$1(a){var x=a[0];var y=a[1];var z=a[2];var w=a[3];return Math.hypot(x,y,z,w)}function squaredLength$1(a){var x=a[0];var y=a[1];var z=a[2];var w=a[3];return x*x+y*y+z*z+w*w}function negate$1(out,a){out[0]=-a[0];out[1]=-a[1];out[2]=-a[2];out[3]=-a[3];return out}function inverse$1(out,a){out[0]=1/a[0];out[1]=1/a[1];out[2]=1/a[2];out[3]=1/a[3];return out}function normalize$1(out,a){var x=a[0];var y=a[1];var z=a[2];var w=a[3];var len=x*x+y*y+z*z+w*w;if(len>0)len=1/
Math.sqrt(len);out[0]=x*len;out[1]=y*len;out[2]=z*len;out[3]=w*len;return out}function dot$1(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function cross$1(out,u,v,w){var A=v[0]*w[1]-v[1]*w[0],B=v[0]*w[2]-v[2]*w[0],C=v[0]*w[3]-v[3]*w[0],D=v[1]*w[2]-v[2]*w[1],E=v[1]*w[3]-v[3]*w[1],F=v[2]*w[3]-v[3]*w[2];var G=u[0];var H=u[1];var I=u[2];var J=u[3];out[0]=H*F-I*E+J*D;out[1]=-(G*F)+I*C-J*B;out[2]=G*E-H*C+J*A;out[3]=-(G*D)+H*B-I*A;return out}function lerp$1(out,a,b,t){var ax=a[0];var ay=a[1];var az=
a[2];var aw=a[3];out[0]=ax+t*(b[0]-ax);out[1]=ay+t*(b[1]-ay);out[2]=az+t*(b[2]-az);out[3]=aw+t*(b[3]-aw);return out}function random$1(out,scale){scale=scale||1;var v1,v2,v3,v4;var s1,s2;do{v1=RANDOM()*2-1;v2=RANDOM()*2-1;s1=v1*v1+v2*v2}while(s1>=1);do{v3=RANDOM()*2-1;v4=RANDOM()*2-1;s2=v3*v3+v4*v4}while(s2>=1);var d=Math.sqrt((1-s1)/s2);out[0]=scale*v1;out[1]=scale*v2;out[2]=scale*v3*d;out[3]=scale*v4*d;return out}function transformMat4$1(out,a,m){var x=a[0],y=a[1],z=a[2],w=a[3];out[0]=m[0]*x+m[4]*
y+m[8]*z+m[12]*w;out[1]=m[1]*x+m[5]*y+m[9]*z+m[13]*w;out[2]=m[2]*x+m[6]*y+m[10]*z+m[14]*w;out[3]=m[3]*x+m[7]*y+m[11]*z+m[15]*w;return out}function transformQuat$1(out,a,q){var x=a[0],y=a[1],z=a[2];var qx=q[0],qy=q[1],qz=q[2],qw=q[3];var ix=qw*x+qy*z-qz*y;var iy=qw*y+qz*x-qx*z;var iz=qw*z+qx*y-qy*x;var iw=-qx*x-qy*y-qz*z;out[0]=ix*qw+iw*-qx+iy*-qz-iz*-qy;out[1]=iy*qw+iw*-qy+iz*-qx-ix*-qz;out[2]=iz*qw+iw*-qz+ix*-qy-iy*-qx;out[3]=a[3];return out}function zero$1(out){out[0]=0;out[1]=0;out[2]=0;out[3]=
0;return out}function str$5(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}function exactEquals$5(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]}function equals$6(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];return Math.abs(a0-b0)<=EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=EPSILON*Math.max(1,Math.abs(a3),
Math.abs(b3))}var sub$5=subtract$5;var mul$5=multiply$5;var div$1=divide$1;var dist$1=distance$1;var sqrDist$1=squaredDistance$1;var len$1=length$1;var sqrLen$1=squaredLength$1;var forEach$1=function(){var vec=create$5();return function(a,stride,offset,count,fn,arg){var i,l;if(!stride)stride=4;if(!offset)offset=0;if(count)l=Math.min(count*stride+offset,a.length);else l=a.length;for(i=offset;i<l;i+=stride){vec[0]=a[i];vec[1]=a[i+1];vec[2]=a[i+2];vec[3]=a[i+3];fn(vec,vec,arg);a[i]=vec[0];a[i+1]=vec[1];
a[i+2]=vec[2];a[i+3]=vec[3]}return a}}();var vec4=Object.freeze({__proto__:null,create:create$5,clone:clone$5,fromValues:fromValues$5,copy:copy$5,set:set$5,add:add$5,subtract:subtract$5,multiply:multiply$5,divide:divide$1,ceil:ceil$1,floor:floor$1,min:min$1,max:max$1,round:round$1,scale:scale$5,scaleAndAdd:scaleAndAdd$1,distance:distance$1,squaredDistance:squaredDistance$1,length:length$1,squaredLength:squaredLength$1,negate:negate$1,inverse:inverse$1,normalize:normalize$1,dot:dot$1,cross:cross$1,
lerp:lerp$1,random:random$1,transformMat4:transformMat4$1,transformQuat:transformQuat$1,zero:zero$1,str:str$5,exactEquals:exactEquals$5,equals:equals$6,sub:sub$5,mul:mul$5,div:div$1,dist:dist$1,sqrDist:sqrDist$1,len:len$1,sqrLen:sqrLen$1,forEach:forEach$1});function create$6(){var out=new ARRAY_TYPE(4);if(ARRAY_TYPE!=Float32Array){out[0]=0;out[1]=0;out[2]=0}out[3]=1;return out}function identity$4(out){out[0]=0;out[1]=0;out[2]=0;out[3]=1;return out}function setAxisAngle(out,axis,rad){rad=rad*.5;var s=
Math.sin(rad);out[0]=s*axis[0];out[1]=s*axis[1];out[2]=s*axis[2];out[3]=Math.cos(rad);return out}function getAxisAngle(out_axis,q){var rad=Math.acos(q[3])*2;var s=Math.sin(rad/2);if(s>EPSILON){out_axis[0]=q[0]/s;out_axis[1]=q[1]/s;out_axis[2]=q[2]/s}else{out_axis[0]=1;out_axis[1]=0;out_axis[2]=0}return rad}function getAngle(a,b){var dotproduct=dot$2(a,b);return Math.acos(2*dotproduct*dotproduct-1)}function multiply$6(out,a,b){var ax=a[0],ay=a[1],az=a[2],aw=a[3];var bx=b[0],by=b[1],bz=b[2],bw=b[3];
out[0]=ax*bw+aw*bx+ay*bz-az*by;out[1]=ay*bw+aw*by+az*bx-ax*bz;out[2]=az*bw+aw*bz+ax*by-ay*bx;out[3]=aw*bw-ax*bx-ay*by-az*bz;return out}function rotateX$2(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3];var bx=Math.sin(rad),bw=Math.cos(rad);out[0]=ax*bw+aw*bx;out[1]=ay*bw+az*bx;out[2]=az*bw-ay*bx;out[3]=aw*bw-ax*bx;return out}function rotateY$2(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3];var by=Math.sin(rad),bw=Math.cos(rad);out[0]=ax*bw-az*by;out[1]=ay*bw+aw*by;out[2]=az*bw+ax*by;
out[3]=aw*bw-ay*by;return out}function rotateZ$2(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3];var bz=Math.sin(rad),bw=Math.cos(rad);out[0]=ax*bw+ay*bz;out[1]=ay*bw-ax*bz;out[2]=az*bw+aw*bz;out[3]=aw*bw-az*bz;return out}function calculateW(out,a){var x=a[0],y=a[1],z=a[2];out[0]=x;out[1]=y;out[2]=z;out[3]=Math.sqrt(Math.abs(1-x*x-y*y-z*z));return out}function exp(out,a){var x=a[0],y=a[1],z=a[2],w=a[3];var r=Math.sqrt(x*x+y*y+z*z);var et=Math.exp(w);var s=r>0?et*Math.sin(r)/r:0;out[0]=x*s;
out[1]=y*s;out[2]=z*s;out[3]=et*Math.cos(r);return out}function ln(out,a){var x=a[0],y=a[1],z=a[2],w=a[3];var r=Math.sqrt(x*x+y*y+z*z);var t=r>0?Math.atan2(r,w)/r:0;out[0]=x*t;out[1]=y*t;out[2]=z*t;out[3]=.5*Math.log(x*x+y*y+z*z+w*w);return out}function pow(out,a,b){ln(out,a);scale$6(out,out,b);exp(out,out);return out}function slerp(out,a,b,t){var ax=a[0],ay=a[1],az=a[2],aw=a[3];var bx=b[0],by=b[1],bz=b[2],bw=b[3];var omega,cosom,sinom,scale0,scale1;cosom=ax*bx+ay*by+az*bz+aw*bw;if(cosom<0){cosom=
-cosom;bx=-bx;by=-by;bz=-bz;bw=-bw}if(1-cosom>EPSILON){omega=Math.acos(cosom);sinom=Math.sin(omega);scale0=Math.sin((1-t)*omega)/sinom;scale1=Math.sin(t*omega)/sinom}else{scale0=1-t;scale1=t}out[0]=scale0*ax+scale1*bx;out[1]=scale0*ay+scale1*by;out[2]=scale0*az+scale1*bz;out[3]=scale0*aw+scale1*bw;return out}function random$2(out){var u1=RANDOM();var u2=RANDOM();var u3=RANDOM();var sqrt1MinusU1=Math.sqrt(1-u1);var sqrtU1=Math.sqrt(u1);out[0]=sqrt1MinusU1*Math.sin(2*Math.PI*u2);out[1]=sqrt1MinusU1*
Math.cos(2*Math.PI*u2);out[2]=sqrtU1*Math.sin(2*Math.PI*u3);out[3]=sqrtU1*Math.cos(2*Math.PI*u3);return out}function invert$4(out,a){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var dot=a0*a0+a1*a1+a2*a2+a3*a3;var invDot=dot?1/dot:0;out[0]=-a0*invDot;out[1]=-a1*invDot;out[2]=-a2*invDot;out[3]=a3*invDot;return out}function conjugate(out,a){out[0]=-a[0];out[1]=-a[1];out[2]=-a[2];out[3]=a[3];return out}function fromMat3(out,m){var fTrace=m[0]+m[4]+m[8];var fRoot;if(fTrace>0){fRoot=Math.sqrt(fTrace+1);out[3]=
.5*fRoot;fRoot=.5/fRoot;out[0]=(m[5]-m[7])*fRoot;out[1]=(m[6]-m[2])*fRoot;out[2]=(m[1]-m[3])*fRoot}else{var i=0;if(m[4]>m[0])i=1;if(m[8]>m[i*3+i])i=2;var j=(i+1)%3;var k=(i+2)%3;fRoot=Math.sqrt(m[i*3+i]-m[j*3+j]-m[k*3+k]+1);out[i]=.5*fRoot;fRoot=.5/fRoot;out[3]=(m[j*3+k]-m[k*3+j])*fRoot;out[j]=(m[j*3+i]+m[i*3+j])*fRoot;out[k]=(m[k*3+i]+m[i*3+k])*fRoot}return out}function fromEuler(out,x,y,z){var halfToRad=.5*Math.PI/180;x*=halfToRad;y*=halfToRad;z*=halfToRad;var sx=Math.sin(x);var cx=Math.cos(x);
var sy=Math.sin(y);var cy=Math.cos(y);var sz=Math.sin(z);var cz=Math.cos(z);out[0]=sx*cy*cz-cx*sy*sz;out[1]=cx*sy*cz+sx*cy*sz;out[2]=cx*cy*sz-sx*sy*cz;out[3]=cx*cy*cz+sx*sy*sz;return out}function str$6(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}var clone$6=clone$5;var fromValues$6=fromValues$5;var copy$6=copy$5;var set$6=set$5;var add$6=add$5;var mul$6=multiply$6;var scale$6=scale$5;var dot$2=dot$1;var lerp$2=lerp$1;var length$2=length$1;var len$2=length$2;var squaredLength$2=squaredLength$1;
var sqrLen$2=squaredLength$2;var normalize$2=normalize$1;var exactEquals$6=exactEquals$5;var equals$7=equals$6;var rotationTo=function(){var tmpvec3=create$4();var xUnitVec3=fromValues$4(1,0,0);var yUnitVec3=fromValues$4(0,1,0);return function(out,a,b){var dot$1=dot(a,b);if(dot$1<-.999999){cross(tmpvec3,xUnitVec3,a);if(len(tmpvec3)<1E-6)cross(tmpvec3,yUnitVec3,a);normalize(tmpvec3,tmpvec3);setAxisAngle(out,tmpvec3,Math.PI);return out}else if(dot$1>.999999){out[0]=0;out[1]=0;out[2]=0;out[3]=1;return out}else{cross(tmpvec3,
a,b);out[0]=tmpvec3[0];out[1]=tmpvec3[1];out[2]=tmpvec3[2];out[3]=1+dot$1;return normalize$2(out,out)}}}();var sqlerp=function(){var temp1=create$6();var temp2=create$6();return function(out,a,b,c,d,t){slerp(temp1,a,d,t);slerp(temp2,b,c,t);slerp(out,temp1,temp2,2*t*(1-t));return out}}();var setAxes=function(){var matr=create$2();return function(out,view,right,up){matr[0]=right[0];matr[3]=right[1];matr[6]=right[2];matr[1]=up[0];matr[4]=up[1];matr[7]=up[2];matr[2]=-view[0];matr[5]=-view[1];matr[8]=
-view[2];return normalize$2(out,fromMat3(out,matr))}}();var quat=Object.freeze({__proto__:null,create:create$6,identity:identity$4,setAxisAngle:setAxisAngle,getAxisAngle:getAxisAngle,getAngle:getAngle,multiply:multiply$6,rotateX:rotateX$2,rotateY:rotateY$2,rotateZ:rotateZ$2,calculateW:calculateW,exp:exp,ln:ln,pow:pow,slerp:slerp,random:random$2,invert:invert$4,conjugate:conjugate,fromMat3:fromMat3,fromEuler:fromEuler,str:str$6,clone:clone$6,fromValues:fromValues$6,copy:copy$6,set:set$6,add:add$6,
mul:mul$6,scale:scale$6,dot:dot$2,lerp:lerp$2,length:length$2,len:len$2,squaredLength:squaredLength$2,sqrLen:sqrLen$2,normalize:normalize$2,exactEquals:exactEquals$6,equals:equals$7,rotationTo:rotationTo,sqlerp:sqlerp,setAxes:setAxes});function create$7(){var dq=new ARRAY_TYPE(8);if(ARRAY_TYPE!=Float32Array){dq[0]=0;dq[1]=0;dq[2]=0;dq[4]=0;dq[5]=0;dq[6]=0;dq[7]=0}dq[3]=1;return dq}function clone$7(a){var dq=new ARRAY_TYPE(8);dq[0]=a[0];dq[1]=a[1];dq[2]=a[2];dq[3]=a[3];dq[4]=a[4];dq[5]=a[5];dq[6]=
a[6];dq[7]=a[7];return dq}function fromValues$7(x1,y1,z1,w1,x2,y2,z2,w2){var dq=new ARRAY_TYPE(8);dq[0]=x1;dq[1]=y1;dq[2]=z1;dq[3]=w1;dq[4]=x2;dq[5]=y2;dq[6]=z2;dq[7]=w2;return dq}function fromRotationTranslationValues(x1,y1,z1,w1,x2,y2,z2){var dq=new ARRAY_TYPE(8);dq[0]=x1;dq[1]=y1;dq[2]=z1;dq[3]=w1;var ax=x2*.5,ay=y2*.5,az=z2*.5;dq[4]=ax*w1+ay*z1-az*y1;dq[5]=ay*w1+az*x1-ax*z1;dq[6]=az*w1+ax*y1-ay*x1;dq[7]=-ax*x1-ay*y1-az*z1;return dq}function fromRotationTranslation$1(out,q,t){var ax=t[0]*.5,ay=
t[1]*.5,az=t[2]*.5,bx=q[0],by=q[1],bz=q[2],bw=q[3];out[0]=bx;out[1]=by;out[2]=bz;out[3]=bw;out[4]=ax*bw+ay*bz-az*by;out[5]=ay*bw+az*bx-ax*bz;out[6]=az*bw+ax*by-ay*bx;out[7]=-ax*bx-ay*by-az*bz;return out}function fromTranslation$3(out,t){out[0]=0;out[1]=0;out[2]=0;out[3]=1;out[4]=t[0]*.5;out[5]=t[1]*.5;out[6]=t[2]*.5;out[7]=0;return out}function fromRotation$4(out,q){out[0]=q[0];out[1]=q[1];out[2]=q[2];out[3]=q[3];out[4]=0;out[5]=0;out[6]=0;out[7]=0;return out}function fromMat4$1(out,a){var outer=
create$6();getRotation(outer,a);var t=new ARRAY_TYPE(3);getTranslation(t,a);fromRotationTranslation$1(out,outer,t);return out}function copy$7(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];return out}function identity$5(out){out[0]=0;out[1]=0;out[2]=0;out[3]=1;out[4]=0;out[5]=0;out[6]=0;out[7]=0;return out}function set$7(out,x1,y1,z1,w1,x2,y2,z2,w2){out[0]=x1;out[1]=y1;out[2]=z1;out[3]=w1;out[4]=x2;out[5]=y2;out[6]=z2;out[7]=w2;return out}var getReal=
copy$6;function getDual(out,a){out[0]=a[4];out[1]=a[5];out[2]=a[6];out[3]=a[7];return out}var setReal=copy$6;function setDual(out,q){out[4]=q[0];out[5]=q[1];out[6]=q[2];out[7]=q[3];return out}function getTranslation$1(out,a){var ax=a[4],ay=a[5],az=a[6],aw=a[7],bx=-a[0],by=-a[1],bz=-a[2],bw=a[3];out[0]=(ax*bw+aw*bx+ay*bz-az*by)*2;out[1]=(ay*bw+aw*by+az*bx-ax*bz)*2;out[2]=(az*bw+aw*bz+ax*by-ay*bx)*2;return out}function translate$3(out,a,v){var ax1=a[0],ay1=a[1],az1=a[2],aw1=a[3],bx1=v[0]*.5,by1=v[1]*
.5,bz1=v[2]*.5,ax2=a[4],ay2=a[5],az2=a[6],aw2=a[7];out[0]=ax1;out[1]=ay1;out[2]=az1;out[3]=aw1;out[4]=aw1*bx1+ay1*bz1-az1*by1+ax2;out[5]=aw1*by1+az1*bx1-ax1*bz1+ay2;out[6]=aw1*bz1+ax1*by1-ay1*bx1+az2;out[7]=-ax1*bx1-ay1*by1-az1*bz1+aw2;return out}function rotateX$3(out,a,rad){var bx=-a[0],by=-a[1],bz=-a[2],bw=a[3],ax=a[4],ay=a[5],az=a[6],aw=a[7],ax1=ax*bw+aw*bx+ay*bz-az*by,ay1=ay*bw+aw*by+az*bx-ax*bz,az1=az*bw+aw*bz+ax*by-ay*bx,aw1=aw*bw-ax*bx-ay*by-az*bz;rotateX$2(out,a,rad);bx=out[0];by=out[1];
bz=out[2];bw=out[3];out[4]=ax1*bw+aw1*bx+ay1*bz-az1*by;out[5]=ay1*bw+aw1*by+az1*bx-ax1*bz;out[6]=az1*bw+aw1*bz+ax1*by-ay1*bx;out[7]=aw1*bw-ax1*bx-ay1*by-az1*bz;return out}function rotateY$3(out,a,rad){var bx=-a[0],by=-a[1],bz=-a[2],bw=a[3],ax=a[4],ay=a[5],az=a[6],aw=a[7],ax1=ax*bw+aw*bx+ay*bz-az*by,ay1=ay*bw+aw*by+az*bx-ax*bz,az1=az*bw+aw*bz+ax*by-ay*bx,aw1=aw*bw-ax*bx-ay*by-az*bz;rotateY$2(out,a,rad);bx=out[0];by=out[1];bz=out[2];bw=out[3];out[4]=ax1*bw+aw1*bx+ay1*bz-az1*by;out[5]=ay1*bw+aw1*by+
az1*bx-ax1*bz;out[6]=az1*bw+aw1*bz+ax1*by-ay1*bx;out[7]=aw1*bw-ax1*bx-ay1*by-az1*bz;return out}function rotateZ$3(out,a,rad){var bx=-a[0],by=-a[1],bz=-a[2],bw=a[3],ax=a[4],ay=a[5],az=a[6],aw=a[7],ax1=ax*bw+aw*bx+ay*bz-az*by,ay1=ay*bw+aw*by+az*bx-ax*bz,az1=az*bw+aw*bz+ax*by-ay*bx,aw1=aw*bw-ax*bx-ay*by-az*bz;rotateZ$2(out,a,rad);bx=out[0];by=out[1];bz=out[2];bw=out[3];out[4]=ax1*bw+aw1*bx+ay1*bz-az1*by;out[5]=ay1*bw+aw1*by+az1*bx-ax1*bz;out[6]=az1*bw+aw1*bz+ax1*by-ay1*bx;out[7]=aw1*bw-ax1*bx-ay1*by-
az1*bz;return out}function rotateByQuatAppend(out,a,q){var qx=q[0],qy=q[1],qz=q[2],qw=q[3],ax=a[0],ay=a[1],az=a[2],aw=a[3];out[0]=ax*qw+aw*qx+ay*qz-az*qy;out[1]=ay*qw+aw*qy+az*qx-ax*qz;out[2]=az*qw+aw*qz+ax*qy-ay*qx;out[3]=aw*qw-ax*qx-ay*qy-az*qz;ax=a[4];ay=a[5];az=a[6];aw=a[7];out[4]=ax*qw+aw*qx+ay*qz-az*qy;out[5]=ay*qw+aw*qy+az*qx-ax*qz;out[6]=az*qw+aw*qz+ax*qy-ay*qx;out[7]=aw*qw-ax*qx-ay*qy-az*qz;return out}function rotateByQuatPrepend(out,q,a){var qx=q[0],qy=q[1],qz=q[2],qw=q[3],bx=a[0],by=a[1],
bz=a[2],bw=a[3];out[0]=qx*bw+qw*bx+qy*bz-qz*by;out[1]=qy*bw+qw*by+qz*bx-qx*bz;out[2]=qz*bw+qw*bz+qx*by-qy*bx;out[3]=qw*bw-qx*bx-qy*by-qz*bz;bx=a[4];by=a[5];bz=a[6];bw=a[7];out[4]=qx*bw+qw*bx+qy*bz-qz*by;out[5]=qy*bw+qw*by+qz*bx-qx*bz;out[6]=qz*bw+qw*bz+qx*by-qy*bx;out[7]=qw*bw-qx*bx-qy*by-qz*bz;return out}function rotateAroundAxis(out,a,axis,rad){if(Math.abs(rad)<EPSILON)return copy$7(out,a);var axisLength=Math.hypot(axis[0],axis[1],axis[2]);rad=rad*.5;var s=Math.sin(rad);var bx=s*axis[0]/axisLength;
var by=s*axis[1]/axisLength;var bz=s*axis[2]/axisLength;var bw=Math.cos(rad);var ax1=a[0],ay1=a[1],az1=a[2],aw1=a[3];out[0]=ax1*bw+aw1*bx+ay1*bz-az1*by;out[1]=ay1*bw+aw1*by+az1*bx-ax1*bz;out[2]=az1*bw+aw1*bz+ax1*by-ay1*bx;out[3]=aw1*bw-ax1*bx-ay1*by-az1*bz;var ax=a[4],ay=a[5],az=a[6],aw=a[7];out[4]=ax*bw+aw*bx+ay*bz-az*by;out[5]=ay*bw+aw*by+az*bx-ax*bz;out[6]=az*bw+aw*bz+ax*by-ay*bx;out[7]=aw*bw-ax*bx-ay*by-az*bz;return out}function add$7(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];
out[3]=a[3]+b[3];out[4]=a[4]+b[4];out[5]=a[5]+b[5];out[6]=a[6]+b[6];out[7]=a[7]+b[7];return out}function multiply$7(out,a,b){var ax0=a[0],ay0=a[1],az0=a[2],aw0=a[3],bx1=b[4],by1=b[5],bz1=b[6],bw1=b[7],ax1=a[4],ay1=a[5],az1=a[6],aw1=a[7],bx0=b[0],by0=b[1],bz0=b[2],bw0=b[3];out[0]=ax0*bw0+aw0*bx0+ay0*bz0-az0*by0;out[1]=ay0*bw0+aw0*by0+az0*bx0-ax0*bz0;out[2]=az0*bw0+aw0*bz0+ax0*by0-ay0*bx0;out[3]=aw0*bw0-ax0*bx0-ay0*by0-az0*bz0;out[4]=ax0*bw1+aw0*bx1+ay0*bz1-az0*by1+ax1*bw0+aw1*bx0+ay1*bz0-az1*by0;out[5]=
ay0*bw1+aw0*by1+az0*bx1-ax0*bz1+ay1*bw0+aw1*by0+az1*bx0-ax1*bz0;out[6]=az0*bw1+aw0*bz1+ax0*by1-ay0*bx1+az1*bw0+aw1*bz0+ax1*by0-ay1*bx0;out[7]=aw0*bw1-ax0*bx1-ay0*by1-az0*bz1+aw1*bw0-ax1*bx0-ay1*by0-az1*bz0;return out}var mul$7=multiply$7;function scale$7(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;out[4]=a[4]*b;out[5]=a[5]*b;out[6]=a[6]*b;out[7]=a[7]*b;return out}var dot$3=dot$2;function lerp$3(out,a,b,t){var mt=1-t;if(dot$3(a,b)<0)t=-t;out[0]=a[0]*mt+b[0]*t;out[1]=a[1]*mt+b[1]*
t;out[2]=a[2]*mt+b[2]*t;out[3]=a[3]*mt+b[3]*t;out[4]=a[4]*mt+b[4]*t;out[5]=a[5]*mt+b[5]*t;out[6]=a[6]*mt+b[6]*t;out[7]=a[7]*mt+b[7]*t;return out}function invert$5(out,a){var sqlen=squaredLength$3(a);out[0]=-a[0]/sqlen;out[1]=-a[1]/sqlen;out[2]=-a[2]/sqlen;out[3]=a[3]/sqlen;out[4]=-a[4]/sqlen;out[5]=-a[5]/sqlen;out[6]=-a[6]/sqlen;out[7]=a[7]/sqlen;return out}function conjugate$1(out,a){out[0]=-a[0];out[1]=-a[1];out[2]=-a[2];out[3]=a[3];out[4]=-a[4];out[5]=-a[5];out[6]=-a[6];out[7]=a[7];return out}
var length$3=length$2;var len$3=length$3;var squaredLength$3=squaredLength$2;var sqrLen$3=squaredLength$3;function normalize$3(out,a){var magnitude=squaredLength$3(a);if(magnitude>0){magnitude=Math.sqrt(magnitude);var a0=a[0]/magnitude;var a1=a[1]/magnitude;var a2=a[2]/magnitude;var a3=a[3]/magnitude;var b0=a[4];var b1=a[5];var b2=a[6];var b3=a[7];var a_dot_b=a0*b0+a1*b1+a2*b2+a3*b3;out[0]=a0;out[1]=a1;out[2]=a2;out[3]=a3;out[4]=(b0-a0*a_dot_b)/magnitude;out[5]=(b1-a1*a_dot_b)/magnitude;out[6]=(b2-
a2*a_dot_b)/magnitude;out[7]=(b3-a3*a_dot_b)/magnitude}return out}function str$7(a){return"quat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+")"}function exactEquals$7(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]}function equals$8(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7];var b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7];return Math.abs(a0-b0)<=EPSILON*
Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=EPSILON*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=EPSILON*Math.max(1,Math.abs(a7),Math.abs(b7))}var quat2=Object.freeze({__proto__:null,
create:create$7,clone:clone$7,fromValues:fromValues$7,fromRotationTranslationValues:fromRotationTranslationValues,fromRotationTranslation:fromRotationTranslation$1,fromTranslation:fromTranslation$3,fromRotation:fromRotation$4,fromMat4:fromMat4$1,copy:copy$7,identity:identity$5,set:set$7,getReal:getReal,getDual:getDual,setReal:setReal,setDual:setDual,getTranslation:getTranslation$1,translate:translate$3,rotateX:rotateX$3,rotateY:rotateY$3,rotateZ:rotateZ$3,rotateByQuatAppend:rotateByQuatAppend,rotateByQuatPrepend:rotateByQuatPrepend,
rotateAroundAxis:rotateAroundAxis,add:add$7,multiply:multiply$7,mul:mul$7,scale:scale$7,dot:dot$3,lerp:lerp$3,invert:invert$5,conjugate:conjugate$1,length:length$3,len:len$3,squaredLength:squaredLength$3,sqrLen:sqrLen$3,normalize:normalize$3,str:str$7,exactEquals:exactEquals$7,equals:equals$8});function create$8(){var out=new ARRAY_TYPE(2);if(ARRAY_TYPE!=Float32Array){out[0]=0;out[1]=0}return out}function clone$8(a){var out=new ARRAY_TYPE(2);out[0]=a[0];out[1]=a[1];return out}function fromValues$8(x,
y){var out=new ARRAY_TYPE(2);out[0]=x;out[1]=y;return out}function copy$8(out,a){out[0]=a[0];out[1]=a[1];return out}function set$8(out,x,y){out[0]=x;out[1]=y;return out}function add$8(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];return out}function subtract$6(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];return out}function multiply$8(out,a,b){out[0]=a[0]*b[0];out[1]=a[1]*b[1];return out}function divide$2(out,a,b){out[0]=a[0]/b[0];out[1]=a[1]/b[1];return out}function ceil$2(out,a){out[0]=Math.ceil(a[0]);
out[1]=Math.ceil(a[1]);return out}function floor$2(out,a){out[0]=Math.floor(a[0]);out[1]=Math.floor(a[1]);return out}function min$2(out,a,b){out[0]=Math.min(a[0],b[0]);out[1]=Math.min(a[1],b[1]);return out}function max$2(out,a,b){out[0]=Math.max(a[0],b[0]);out[1]=Math.max(a[1],b[1]);return out}function round$2(out,a){out[0]=Math.round(a[0]);out[1]=Math.round(a[1]);return out}function scale$8(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;return out}function scaleAndAdd$2(out,a,b,scale){out[0]=a[0]+b[0]*scale;
out[1]=a[1]+b[1]*scale;return out}function distance$2(a,b){var x=b[0]-a[0],y=b[1]-a[1];return Math.hypot(x,y)}function squaredDistance$2(a,b){var x=b[0]-a[0],y=b[1]-a[1];return x*x+y*y}function length$4(a){var x=a[0],y=a[1];return Math.hypot(x,y)}function squaredLength$4(a){var x=a[0],y=a[1];return x*x+y*y}function negate$2(out,a){out[0]=-a[0];out[1]=-a[1];return out}function inverse$2(out,a){out[0]=1/a[0];out[1]=1/a[1];return out}function normalize$4(out,a){var x=a[0],y=a[1];var len=x*x+y*y;if(len>
0)len=1/Math.sqrt(len);out[0]=a[0]*len;out[1]=a[1]*len;return out}function dot$4(a,b){return a[0]*b[0]+a[1]*b[1]}function cross$2(out,a,b){var z=a[0]*b[1]-a[1]*b[0];out[0]=out[1]=0;out[2]=z;return out}function lerp$4(out,a,b,t){var ax=a[0],ay=a[1];out[0]=ax+t*(b[0]-ax);out[1]=ay+t*(b[1]-ay);return out}function random$3(out,scale){scale=scale||1;var r=RANDOM()*2*Math.PI;out[0]=Math.cos(r)*scale;out[1]=Math.sin(r)*scale;return out}function transformMat2(out,a,m){var x=a[0],y=a[1];out[0]=m[0]*x+m[2]*
y;out[1]=m[1]*x+m[3]*y;return out}function transformMat2d(out,a,m){var x=a[0],y=a[1];out[0]=m[0]*x+m[2]*y+m[4];out[1]=m[1]*x+m[3]*y+m[5];return out}function transformMat3$1(out,a,m){var x=a[0],y=a[1];out[0]=m[0]*x+m[3]*y+m[6];out[1]=m[1]*x+m[4]*y+m[7];return out}function transformMat4$2(out,a,m){var x=a[0];var y=a[1];out[0]=m[0]*x+m[4]*y+m[12];out[1]=m[1]*x+m[5]*y+m[13];return out}function rotate$4(out,a,b,rad){var p0=a[0]-b[0],p1=a[1]-b[1],sinC=Math.sin(rad),cosC=Math.cos(rad);out[0]=p0*cosC-p1*
sinC+b[0];out[1]=p0*sinC+p1*cosC+b[1];return out}function angle$1(a,b){var x1=a[0],y1=a[1],x2=b[0],y2=b[1],mag=Math.sqrt(x1*x1+y1*y1)*Math.sqrt(x2*x2+y2*y2),cosine=mag&&(x1*x2+y1*y2)/mag;return Math.acos(Math.min(Math.max(cosine,-1),1))}function zero$2(out){out[0]=0;out[1]=0;return out}function str$8(a){return"vec2("+a[0]+", "+a[1]+")"}function exactEquals$8(a,b){return a[0]===b[0]&&a[1]===b[1]}function equals$9(a,b){var a0=a[0],a1=a[1];var b0=b[0],b1=b[1];return Math.abs(a0-b0)<=EPSILON*Math.max(1,
Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))}var len$4=length$4;var sub$6=subtract$6;var mul$8=multiply$8;var div$2=divide$2;var dist$2=distance$2;var sqrDist$2=squaredDistance$2;var sqrLen$4=squaredLength$4;var forEach$2=function(){var vec=create$8();return function(a,stride,offset,count,fn,arg){var i,l;if(!stride)stride=2;if(!offset)offset=0;if(count)l=Math.min(count*stride+offset,a.length);else l=a.length;for(i=offset;i<l;i+=stride){vec[0]=a[i];vec[1]=
a[i+1];fn(vec,vec,arg);a[i]=vec[0];a[i+1]=vec[1]}return a}}();var vec2=Object.freeze({__proto__:null,create:create$8,clone:clone$8,fromValues:fromValues$8,copy:copy$8,set:set$8,add:add$8,subtract:subtract$6,multiply:multiply$8,divide:divide$2,ceil:ceil$2,floor:floor$2,min:min$2,max:max$2,round:round$2,scale:scale$8,scaleAndAdd:scaleAndAdd$2,distance:distance$2,squaredDistance:squaredDistance$2,length:length$4,squaredLength:squaredLength$4,negate:negate$2,inverse:inverse$2,normalize:normalize$4,dot:dot$4,
cross:cross$2,lerp:lerp$4,random:random$3,transformMat2:transformMat2,transformMat2d:transformMat2d,transformMat3:transformMat3$1,transformMat4:transformMat4$2,rotate:rotate$4,angle:angle$1,zero:zero$2,str:str$8,exactEquals:exactEquals$8,equals:equals$9,len:len$4,sub:sub$6,mul:mul$8,div:div$2,dist:dist$2,sqrDist:sqrDist$2,sqrLen:sqrLen$4,forEach:forEach$2});exports.glMatrix=common;exports.mat2=mat2;exports.mat2d=mat2d;exports.mat3=mat3;exports.mat4=mat4;exports.quat=quat;exports.quat2=quat2;exports.vec2=
vec2;exports.vec3=vec3;exports.vec4=vec4;Object.defineProperty(exports,"__esModule",{value:true})});


// c3/3rdparty/poly-decomp.js
'use strict';{function lineInt(l1,l2,precision){precision=precision||0;var i=[0,0];var a1,b1,c1,a2,b2,c2,det;a1=l1[1][1]-l1[0][1];b1=l1[0][0]-l1[1][0];c1=a1*l1[0][0]+b1*l1[0][1];a2=l2[1][1]-l2[0][1];b2=l2[0][0]-l2[1][0];c2=a2*l2[0][0]+b2*l2[0][1];det=a1*b2-a2*b1;if(!scalar_eq(det,0,precision)){i[0]=(b2*c1-b1*c2)/det;i[1]=(a1*c2-a2*c1)/det}return i}function lineSegmentsIntersect(p1,p2,q1,q2){var dx=p2[0]-p1[0];var dy=p2[1]-p1[1];var da=q2[0]-q1[0];var db=q2[1]-q1[1];if(da*dy-db*dx===0)return false;
var s=(dx*(q1[1]-p1[1])+dy*(p1[0]-q1[0]))/(da*dy-db*dx);var t=(da*(p1[1]-q1[1])+db*(q1[0]-p1[0]))/(db*dx-da*dy);return s>=0&&s<=1&&t>=0&&t<=1}function triangleArea(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1])}function isLeft(a,b,c){return triangleArea(a,b,c)>0}function isLeftOn(a,b,c){return triangleArea(a,b,c)>=0}function isRight(a,b,c){return triangleArea(a,b,c)<0}function isRightOn(a,b,c){return triangleArea(a,b,c)<=0}var tmpPoint1=[],tmpPoint2=[];function collinear(a,b,c,thresholdAngle){if(!thresholdAngle)return triangleArea(a,
b,c)===0;else{var ab=tmpPoint1,bc=tmpPoint2;ab[0]=b[0]-a[0];ab[1]=b[1]-a[1];bc[0]=c[0]-b[0];bc[1]=c[1]-b[1];var dot=ab[0]*bc[0]+ab[1]*bc[1],magA=Math.sqrt(ab[0]*ab[0]+ab[1]*ab[1]),magB=Math.sqrt(bc[0]*bc[0]+bc[1]*bc[1]),angle=Math.acos(dot/(magA*magB));return angle<thresholdAngle}}function sqdist(a,b){var dx=b[0]-a[0];var dy=b[1]-a[1];return dx*dx+dy*dy}function polygonAt(polygon,i){var s=polygon.length;return polygon[i<0?i%s+s:i%s]}function polygonClear(polygon){polygon.length=0}function polygonAppend(polygon,
poly,from,to){for(var i=from;i<to;i++)polygon.push(poly[i])}function polygonMakeCCW(polygon){var br=0,v=polygon;for(var i=1;i<polygon.length;++i)if(v[i][1]<v[br][1]||v[i][1]===v[br][1]&&v[i][0]>v[br][0])br=i;if(!isLeft(polygonAt(polygon,br-1),polygonAt(polygon,br),polygonAt(polygon,br+1))){polygonReverse(polygon);return true}else return false}function polygonReverse(polygon){var tmp=[];var N=polygon.length;for(var i=0;i!==N;i++)tmp.push(polygon.pop());for(var i=0;i!==N;i++)polygon[i]=tmp[i]}function polygonIsReflex(polygon,
i){return isRight(polygonAt(polygon,i-1),polygonAt(polygon,i),polygonAt(polygon,i+1))}var tmpLine1=[],tmpLine2=[];function polygonCanSee(polygon,a,b){var p,dist,l1=tmpLine1,l2=tmpLine2;if(isLeftOn(polygonAt(polygon,a+1),polygonAt(polygon,a),polygonAt(polygon,b))&&isRightOn(polygonAt(polygon,a-1),polygonAt(polygon,a),polygonAt(polygon,b)))return false;dist=sqdist(polygonAt(polygon,a),polygonAt(polygon,b));for(var i=0;i!==polygon.length;++i){if((i+1)%polygon.length===a||i===a)continue;if(isLeftOn(polygonAt(polygon,
a),polygonAt(polygon,b),polygonAt(polygon,i+1))&&isRightOn(polygonAt(polygon,a),polygonAt(polygon,b),polygonAt(polygon,i))){l1[0]=polygonAt(polygon,a);l1[1]=polygonAt(polygon,b);l2[0]=polygonAt(polygon,i);l2[1]=polygonAt(polygon,i+1);p=lineInt(l1,l2);if(sqdist(polygonAt(polygon,a),p)<dist)return false}}return true}function polygonCanSee2(polygon,a,b){for(var i=0;i!==polygon.length;++i){if(i===a||i===b||(i+1)%polygon.length===a||(i+1)%polygon.length===b)continue;if(lineSegmentsIntersect(polygonAt(polygon,
a),polygonAt(polygon,b),polygonAt(polygon,i),polygonAt(polygon,i+1)))return false}return true}function polygonCopy(polygon,i,j,targetPoly){var p=targetPoly||[];polygonClear(p);if(i<j)for(var k=i;k<=j;k++)p.push(polygon[k]);else{for(var k=0;k<=j;k++)p.push(polygon[k]);for(var k=i;k<polygon.length;k++)p.push(polygon[k])}return p}function polygonGetCutEdges(polygon){var min=[],tmp1=[],tmp2=[],tmpPoly=[];var nDiags=Number.MAX_VALUE;for(var i=0;i<polygon.length;++i)if(polygonIsReflex(polygon,i))for(var j=
0;j<polygon.length;++j)if(polygonCanSee(polygon,i,j)){tmp1=polygonGetCutEdges(polygonCopy(polygon,i,j,tmpPoly));tmp2=polygonGetCutEdges(polygonCopy(polygon,j,i,tmpPoly));for(var k=0;k<tmp2.length;k++)tmp1.push(tmp2[k]);if(tmp1.length<nDiags){min=tmp1;nDiags=tmp1.length;min.push([polygonAt(polygon,i),polygonAt(polygon,j)])}}return min}function polygonDecomp(polygon){var edges=polygonGetCutEdges(polygon);if(edges.length>0)return polygonSlice(polygon,edges);else return[polygon]}function polygonSlice(polygon,
cutEdges){if(cutEdges.length===0)return[polygon];if(cutEdges instanceof Array&&cutEdges.length&&cutEdges[0]instanceof Array&&cutEdges[0].length===2&&cutEdges[0][0]instanceof Array){var polys=[polygon];for(var i=0;i<cutEdges.length;i++){var cutEdge=cutEdges[i];for(var j=0;j<polys.length;j++){var poly=polys[j];var result=polygonSlice(poly,cutEdge);if(result){polys.splice(j,1);polys.push(result[0],result[1]);break}}}return polys}else{var cutEdge=cutEdges;var i=polygon.indexOf(cutEdge[0]);var j=polygon.indexOf(cutEdge[1]);
if(i!==-1&&j!==-1)return[polygonCopy(polygon,i,j),polygonCopy(polygon,j,i)];else return false}}function polygonIsSimple(polygon){var path=polygon,i;for(i=0;i<path.length-1;i++)for(var j=0;j<i-1;j++)if(lineSegmentsIntersect(path[i],path[i+1],path[j],path[j+1]))return false;for(i=1;i<path.length-2;i++)if(lineSegmentsIntersect(path[0],path[path.length-1],path[i],path[i+1]))return false;return true}function getIntersectionPoint(p1,p2,q1,q2,delta){delta=delta||0;var a1=p2[1]-p1[1];var b1=p1[0]-p2[0];var c1=
a1*p1[0]+b1*p1[1];var a2=q2[1]-q1[1];var b2=q1[0]-q2[0];var c2=a2*q1[0]+b2*q1[1];var det=a1*b2-a2*b1;if(!scalar_eq(det,0,delta))return[(b2*c1-b1*c2)/det,(a1*c2-a2*c1)/det];else return[0,0]}function polygonQuickDecomp(polygon,result,reflexVertices,steinerPoints,delta,maxlevel,level){maxlevel=maxlevel||100;level=level||0;delta=delta||25;result=typeof result!=="undefined"?result:[];reflexVertices=reflexVertices||[];steinerPoints=steinerPoints||[];var upperInt=[0,0],lowerInt=[0,0],p=[0,0];var upperDist=
0,lowerDist=0,d=0,closestDist=0;var upperIndex=0,lowerIndex=0,closestIndex=0;var lowerPoly=[],upperPoly=[];var poly=polygon,v=polygon;if(v.length<3)return result;level++;if(level>maxlevel){console.warn("quickDecomp: max level ("+maxlevel+") reached.");return result}for(var i=0;i<polygon.length;++i)if(polygonIsReflex(poly,i)){reflexVertices.push(poly[i]);upperDist=lowerDist=Number.MAX_VALUE;for(var j=0;j<polygon.length;++j){if(isLeft(polygonAt(poly,i-1),polygonAt(poly,i),polygonAt(poly,j))&&isRightOn(polygonAt(poly,
i-1),polygonAt(poly,i),polygonAt(poly,j-1))){p=getIntersectionPoint(polygonAt(poly,i-1),polygonAt(poly,i),polygonAt(poly,j),polygonAt(poly,j-1));if(isRight(polygonAt(poly,i+1),polygonAt(poly,i),p)){d=sqdist(poly[i],p);if(d<lowerDist){lowerDist=d;lowerInt=p;lowerIndex=j}}}if(isLeft(polygonAt(poly,i+1),polygonAt(poly,i),polygonAt(poly,j+1))&&isRightOn(polygonAt(poly,i+1),polygonAt(poly,i),polygonAt(poly,j))){p=getIntersectionPoint(polygonAt(poly,i+1),polygonAt(poly,i),polygonAt(poly,j),polygonAt(poly,
j+1));if(isLeft(polygonAt(poly,i-1),polygonAt(poly,i),p)){d=sqdist(poly[i],p);if(d<upperDist){upperDist=d;upperInt=p;upperIndex=j}}}}if(lowerIndex===(upperIndex+1)%polygon.length){p[0]=(lowerInt[0]+upperInt[0])/2;p[1]=(lowerInt[1]+upperInt[1])/2;steinerPoints.push(p);if(i<upperIndex){polygonAppend(lowerPoly,poly,i,upperIndex+1);lowerPoly.push(p);upperPoly.push(p);if(lowerIndex!==0)polygonAppend(upperPoly,poly,lowerIndex,poly.length);polygonAppend(upperPoly,poly,0,i+1)}else{if(i!==0)polygonAppend(lowerPoly,
poly,i,poly.length);polygonAppend(lowerPoly,poly,0,upperIndex+1);lowerPoly.push(p);upperPoly.push(p);polygonAppend(upperPoly,poly,lowerIndex,i+1)}}else{if(lowerIndex>upperIndex)upperIndex+=polygon.length;closestDist=Number.MAX_VALUE;if(upperIndex<lowerIndex)return result;for(var j=lowerIndex;j<=upperIndex;++j)if(isLeftOn(polygonAt(poly,i-1),polygonAt(poly,i),polygonAt(poly,j))&&isRightOn(polygonAt(poly,i+1),polygonAt(poly,i),polygonAt(poly,j))){d=sqdist(polygonAt(poly,i),polygonAt(poly,j));if(d<closestDist&&
polygonCanSee2(poly,i,j)){closestDist=d;closestIndex=j%polygon.length}}if(i<closestIndex){polygonAppend(lowerPoly,poly,i,closestIndex+1);if(closestIndex!==0)polygonAppend(upperPoly,poly,closestIndex,v.length);polygonAppend(upperPoly,poly,0,i+1)}else{if(i!==0)polygonAppend(lowerPoly,poly,i,v.length);polygonAppend(lowerPoly,poly,0,closestIndex+1);polygonAppend(upperPoly,poly,closestIndex,i+1)}}if(lowerPoly.length<upperPoly.length){polygonQuickDecomp(lowerPoly,result,reflexVertices,steinerPoints,delta,
maxlevel,level);polygonQuickDecomp(upperPoly,result,reflexVertices,steinerPoints,delta,maxlevel,level)}else{polygonQuickDecomp(upperPoly,result,reflexVertices,steinerPoints,delta,maxlevel,level);polygonQuickDecomp(lowerPoly,result,reflexVertices,steinerPoints,delta,maxlevel,level)}return result}result.push(polygon);return result}function polygonRemoveCollinearPoints(polygon,precision){var num=0;for(var i=polygon.length-1;polygon.length>3&&i>=0;--i)if(collinear(polygonAt(polygon,i-1),polygonAt(polygon,
i),polygonAt(polygon,i+1),precision)){polygon.splice(i%polygon.length,1);num++}return num}function polygonRemoveDuplicatePoints(polygon,precision){for(var i=polygon.length-1;i>=1;--i){var pi=polygon[i];for(var j=i-1;j>=0;--j)if(points_eq(pi,polygon[j],precision)){polygon.splice(i,1);continue}}}function scalar_eq(a,b,precision){precision=precision||0;return Math.abs(a-b)<=precision}function points_eq(a,b,precision){return scalar_eq(a[0],b[0],precision)&&scalar_eq(a[1],b[1],precision)}self.polyDecomp=
{decomp:polygonDecomp,quickDecomp:polygonQuickDecomp,isSimple:polygonIsSimple,removeCollinearPoints:polygonRemoveCollinearPoints,removeDuplicatePoints:polygonRemoveDuplicatePoints,makeCCW:polygonMakeCCW}};


// c3/lib/c3.js
'use strict';{let isReady=false;let hasAppStarted=false;let buildMode="dev";const C3=self.C3=class C3{constructor(){throw TypeError("static class can't be instantiated");}static SetReady(){isReady=true}static IsReady(){return isReady}static SetAppStarted(){hasAppStarted=true}static HasAppStarted(){return hasAppStarted}static SetBuildMode(m){buildMode=m}static GetBuildMode(){return buildMode}static IsReleaseBuild(){return buildMode==="final"}};C3.isDebug=false;C3.isDebugDefend=false;C3.hardwareConcurrency=
navigator.hardwareConcurrency||2};


// ../lib/queryParser.js
'use strict';{const C3=self.C3;C3.QueryParser=class QueryParser{constructor(queryString){this._queryString=queryString;this._parameters=new Map;this._Parse()}_Parse(){let str=this._queryString;if(str.startsWith("?")||str.startsWith("#"))str=str.substr(1);const arr=str.split("&");for(const p of arr)this._ParseParameter(p)}_ParseParameter(p){if(!p)return;if(!p.includes("=")){this._parameters.set(p,null);return}const i=p.indexOf("=");const parameterName=decodeURIComponent(p.substring(0,i));const parameterValue=
decodeURIComponent(p.substring(i+1));this._parameters.set(parameterName,parameterValue)}LogAll(){for(const e of this._parameters)console.log("[QueryParser] Parameter '"+e[0]+"' = "+(e[1]===null?"null":"'"+e[1]+"'"))}Has(name){return this._parameters.has(name)}Get(name){const ret=this._parameters.get(name);if(typeof ret==="undefined")return null;else return ret}ClearHash(){history.replaceState("",document.title,location.pathname+location.search)}Reparse(str){this._queryString=str;this._parameters.clear();
this._Parse()}};C3.QueryString=new C3.QueryParser(location.search);C3.LocationHashString=new C3.QueryParser(location.hash);if(C3.QueryString.Get("mode")!=="dev")C3.SetBuildMode("final")};


// ../lib/detect/detect.js
'use strict';{const C3=self.C3;const UNKNOWN="(unknown)";const UA=navigator.userAgent;let Flags={linux:/linux|openbsd|freebsd|netbsd/i.test(UA),chromeOS:/CrOS/.test(UA),windowsTizen:/trident|iemobile|msie|tizen/i.test(UA),genericMS:/trident|iemobile|msie|edge\//i.test(UA),opera:/OPR\//.test(UA),blackberry:/bb10/i.test(UA),edge:/edge\//i.test(UA),trident:/trident/i.test(UA),webkit:/webkit/i.test(UA),safari:/safari\//i.test(UA),chrome:/chrome\//i.test(UA),chromium:/chromium\//i.test(UA),crosswalk:/crosswalk|xwalk/i.test(UA),
nwjs:/nwjs/i.test(UA),amazonwebapp:/amazonwebappplatform/i.test(UA),webview:/wv\)/.test(UA),android:/android/i.test(UA),nokia:/nokiabrowser\/[0-9.]+/i.test(UA)};let Versions={windows:/windows\s+nt\s+\d+\.\d+/i.exec(UA),OSX:/mac\s+os\s+x\s+[0-9_]+/i.exec(UA),android:/android\s+[0-9.]+/i.exec(UA),opera:/OPR\/[0-9.]+/.exec(UA),tizen:/tizen\s+[0-9.]+/i.exec(UA),iphone:/iphone\s+os\s+[0-9_]+/i.exec(UA),ipad:/ipad[^)]*os\s+[0-9_]+/i.exec(UA),winPhone:/windows\s+phone\s+[0-9.]+/i.exec(UA),winPhoneOS:/windows\s+phone\s+os\s+[0-9.]+/i.exec(UA),
chrome:/chrome\/[0-9.]+/i.exec(UA),chromium:/chromium\/[0-9.]+/i.exec(UA),nwjs:/nwjs\/[0-9.]+/i.exec(UA),firefox:/firefox\/[0-9.]+/i.exec(UA),ie:/msie\s+[0-9.]+/i.exec(UA),edge:/edge\/[0-9.]+/i.exec(UA),edgeChromium:/edg\/[0-9.]+/i.exec(UA),silk:/silk\/[0-9.]+/i.exec(UA)};let os=UNKNOWN;let os_version=UNKNOWN;let os_arch=UNKNOWN;let browser=UNKNOWN;let browser_version=UNKNOWN;let browser_arch=UNKNOWN;let engine=UNKNOWN;let context="browser";let is_desktop=false;let is_desktop_app=false;let testResults=
new Map;function runTest(name,value,fn){if(value===true){const result=fn();testResults.set(name,true)}else if(value&&value.length){const result=fn(value[0]);testResults.set(name,true)}else;}runTest("isWindows",Versions.windows,WIN=>{os="Windows";const nt_ver=WIN.split(" ")[2];if(nt_ver)switch(nt_ver){case "5.0":os_version="2000";break;case "5.1":os_version="XP";break;case "5.2":os_version="XP";break;case "6.0":os_version="Vista";break;case "6.1":os_version="7";break;case "6.2":os_version="8";break;
case "6.3":os_version="8.1";break;case "10.0":os_version="10";break}});runTest("isOSX",Versions.OSX,OSX=>{os="Mac OS X";const osx_ver=OSX.split(" ")[3];if(osx_ver)os_version=osx_ver.replace("_",".")});runTest("isLinux",Flags.linux,()=>{os="Linux"});runTest("isChromeOS",Flags.chromeOS,()=>{os="Chrome OS"});runTest("isAndroid",!Flags.windowsTizen&&Versions.android,AND=>{os="Android";const android_ver=AND.split(" ")[1];if(android_ver)os_version=android_ver});runTest("isTizen",Versions.tizen,TIZ=>{os=
"Tizen";const tizen_ver=TIZ.split(" ")[1];if(tizen_ver)os_version=tizen_ver});runTest("isIPhone",!Flags.windowsTizen&&Versions.iphone,IOS=>{os="iOS";const ios_ver=IOS.split(" ")[2];if(ios_ver)os_version=ios_ver.replace("_",".")});runTest("isIPad",!Flags.windowsTizen&&Versions.ipad,IOS=>{os="iOS";const ios_ver=IOS.split(" ")[3];if(ios_ver)os_version=ios_ver.replace("_",".")});runTest("isWindowsPhone",Versions.winPhone,WIN=>{os="Windows Phone";const ver_str=WIN.split(" ")[2];if(ver_str)os_version=ver_str});
runTest("isWindowsPhoneOS",Versions.winPhoneOS,WIN=>{os="Windows Phone";const ver_str=WIN.split(" ")[3];if(ver_str)os_version=ver_str});runTest("isBlackberry",Flags.blackberry,()=>{os="Blackberry";os_version="10";browser="stock";engine="webkit"});runTest("isChrome",!Flags.edge&&!Flags.opera&&Versions.chrome,CHR=>{browser="Chrome";engine="Chromium";const ver_str=CHR.split("/")[1];if(ver_str)browser_version=ver_str});runTest("isOpera",Versions.opera,OPR=>{browser="Opera";engine="Chromium";const ver_str=
OPR.split("/")[1];if(ver_str)browser_version=ver_str});runTest("isChromium",Versions.chromium,CHR=>{browser="Chromium";engine="Chromium";const ver_str=CHR.split("/")[1];if(ver_str)browser_version=ver_str});runTest("isFirefox",Versions.firefox,FIR=>{browser="Firefox";engine="Gecko";const ver_str=FIR.split("/")[1];if(ver_str)browser_version=ver_str});runTest("isInternetExplorer",Versions.ie,IE=>{browser="Internet Explorer";engine="Trident";const ver_str=IE.split(" ")[1];if(ver_str)browser_version=ver_str});
runTest("isTrident",browser!=="Internet Explorer"&&Flags.trident,()=>{engine="Trident";const rRv=/rv:[0-9.]+/i.exec(UA);if(rRv&&rRv.length){browser="Internet Explorer";const ver_str=rRv[0].split(":")[1];if(ver_str)browser_version=ver_str}});runTest("isEdge",Versions.edge,EDGE=>{browser="Edge";engine="Edge";const ver_str=EDGE.split("/")[1];if(ver_str)browser_version=ver_str});runTest("isEdgeChromium",Versions.edgeChromium,EDGECHR=>{browser="Edge";engine="Chromium";const ver_str=EDGECHR.split("/")[1];
if(ver_str)browser_version=ver_str});runTest("isSafari",Flags.safari&&!Flags.nokia&&!Flags.chrome&&!Flags.chromium&&!Flags.genericIE&&!Flags.blackberry,()=>{browser="Safari";engine="WebKit";const rVersion=/version\/[0-9.]+/i.exec(UA);const rChromeiOS=/crios\/[0-9.]+/i.exec(UA);const rFirefoxiOS=/fxios\/[0-9.]+/i.exec(UA);if(rVersion&&rVersion.length){const ver_str=rVersion[0].split("/")[1];if(ver_str)browser_version=ver_str}if(rChromeiOS&&rChromeiOS.length){browser="Chrome for iOS";const ver_str=
rChromeiOS[0].split("/")[1];if(ver_str)browser_version=ver_str}if(rFirefoxiOS&&rFirefoxiOS.length){browser="Firefox for iOS";const ver_str=rFirefoxiOS[0].split("/")[1];if(ver_str)browser_version=ver_str}});runTest("isSilk",Versions.silk,SILK=>{browser="Silk";const ver_str=SILK.split("/")[1];if(ver_str)browser_version=ver_str});runTest("isCrosswalk",Flags.crosswalk,()=>context="crosswalk");runTest("isCordova",self["device"]&&(self["device"]["cordova"]||self["device"]["phonegap"]),()=>context="cordova");
runTest("isNWJS",Versions.nwjs,NWJS=>{context="nwjs";browser="NW.js";engine="Chromium";const ver_str=NWJS.split("/")[1];if(ver_str)browser_version=ver_str});runTest("isAmazonWebApp",Flags.amazonwebapp,()=>context="webapp");runTest("isHomeScreenWebApp",context!=="nwjs"&&typeof window!=="undefined"&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator["standalone"]),()=>context="webapp");runTest("isFalseSafari",browser==="Safari"&&(os==="Android"||os==="Tizen"||os===
"Blackberry"),()=>browser="stock");runTest("isAndroidWebview",browser==="Chrome"&&context==="browser"&&Flags.webview,()=>context="webview");runTest("isFirefoxOS",browser==="Firefox"&&os===UNKNOWN,()=>os="Firefox OS");runTest("isAndroidFallback",os===UNKNOWN&&!Flags.windowsTizen&&Flags.android,()=>os="Android");runTest("isTridentFallback",os===UNKNOWN&&Flags.trident,()=>engine="Trident");runTest("isWebkitFallback",os===UNKNOWN&&Flags.webkit,()=>engine="WebKit");runTest("is64Bit",(is64=>{return is64.test(UA)||
is64.test(navigator.platform)||navigator.cpuClass==="x64"})(/x86_64|x86-64|win64|x64;|x64\)|x64_|amd64|wow64|ia64|arm64|arch64|sparc64|ppc64|irix64/i),()=>os_arch="64-bit");runTest("is32Bit",(is32=>{return is32.test(UA)||is32.test(navigator.platform)||navigator.cpuClass==="x86"})(/x86;|x86\)|i86|i386|i486|i586|i686|armv1|armv2|armv3|armv4|armv5|armv6|armv7/i),()=>os_arch="32-bit");runTest("is64BitFallback",os_arch===UNKNOWN&&os==="Mac OS X"&&parseFloat(os_version)>=10.7,()=>os_arch="64-bit");runTest("is32BitFallback",
os_arch===UNKNOWN&&os==="Windows"||os==="Android"&&parseFloat(os_version)<5,()=>os_arch="32-bit");runTest("is32BitBrowser",os_arch==="32-bit"||/wow64/i.test(UA),()=>browser_arch="32-bit");runTest("is64BitBrowser",/win64/i.test(UA),()=>browser_arch="64-bit");runTest("isDesktop",(()=>{return os==="Windows"||os==="Mac OS X"||os==="Linux"||os==="Chrome OS"||context==="nwjs"})(),()=>is_desktop=true);if(engine==="Edge"&&typeof Windows!=="undefined"&&typeof Windows["System"]!=="undefined")context="windows-store";
is_desktop_app=context==="nwjs";const is_ipad_os=os==="Mac OS X"&&navigator["maxTouchPoints"]&&navigator["maxTouchPoints"]>2;if(is_ipad_os){os="iOS";os_version=browser_version;is_desktop=false;is_desktop_app=false}C3.Platform={OS:os,OSVersion:os_version,OSArchitecture:os_arch,Browser:browser,BrowserVersion:browser_version,BrowserVersionNumber:parseFloat(browser_version),BrowserArchitecture:browser_arch,BrowserEngine:engine,Context:context,IsDesktop:is_desktop,IsMobile:!is_desktop,IsDesktopApp:is_desktop_app,
IsChromeWebStore:!!(self["chrome"]&&self["chrome"]["runtime"]&&self["chrome"]["runtime"]["id"]),IsAppleOS:os==="Mac OS X"||os==="iOS",IsIpadOS:is_ipad_os,IsLinux:os==="Linux"}};


// ../lib/storage/kvStorage.js
'use strict';{const VERSION=2;const STORE_NAME="keyvaluepairs";const DATABASE_PROMISE_MAP=new Map;const SUPPORTS_GETALL=typeof IDBObjectStore!=="undefined"&&typeof IDBObjectStore.prototype.getAll==="function";const SUPPORTS_GETALLKEYS=typeof IDBObjectStore!=="undefined"&&typeof IDBObjectStore.prototype.getAllKeys==="function";function asyncifyRequest(request){return new Promise((res,rej)=>{request.onsuccess=()=>res(request.result);request.onerror=()=>rej(request.error)})}function asyncifyTransaction(tx){return new Promise((res,
rej)=>{tx.oncomplete=()=>res();tx.onerror=()=>rej(tx.error);tx.onabort=()=>rej(tx.error)})}function openReadOnlyTransaction(name,method){return openTransaction(name,method)}function openWriteTransaction(name,method){return openTransaction(name,method,true)}async function openTransaction(name,method,write=false,allowRetry=true){const db=await lazyOpenDatabase(name);try{const tx=db.transaction([STORE_NAME],write?"readwrite":"readonly");return method(tx)}catch(err){if(allowRetry&&err["name"]==="InvalidStateError"){DATABASE_PROMISE_MAP.delete(name);
return openTransaction(name,method,write,false)}else throw err;}}function lazyOpenDatabase(name){RequireString(name);let dbPromise=DATABASE_PROMISE_MAP.get(name);if(!(dbPromise instanceof Promise)){dbPromise=openDatabase(name);DATABASE_PROMISE_MAP.set(name,dbPromise);dbPromise.catch(err=>DATABASE_PROMISE_MAP.delete(name))}return dbPromise}async function openDatabase(name){RequireString(name);const openRequest=indexedDB.open(name,VERSION);openRequest.addEventListener("upgradeneeded",e=>{try{const db=
e.target.result;db.createObjectStore(STORE_NAME)}catch(err){console.error(`Failed to create objectstore for database ${name}`,err)}});return asyncifyRequest(openRequest)}function RequireString(x){if(typeof x!=="string")throw new TypeError("expected string");}function getEntriesFromCursor(tx,type){const request=tx.objectStore(STORE_NAME).openCursor();return new Promise(resolve=>{const results=[];request.onsuccess=event=>{const cursor=event.target.result;if(cursor){switch(type){case "entries":results.push([cursor.key,
cursor.value]);break;case "keys":results.push(cursor.key);break;case "values":results.push(cursor.value);break}cursor.continue()}else resolve(results)}})}class KVStorageContainer{constructor(name){RequireString(name);this.name=name}async ready(){await lazyOpenDatabase(this.name)}set(key,value){RequireString(key);return openWriteTransaction(this.name,async tx=>{const request=tx.objectStore(STORE_NAME).put(value,key);const requestPromise=asyncifyRequest(request);const txPromise=asyncifyTransaction(tx);
await Promise.all([txPromise,requestPromise])})}get(key){RequireString(key);return openReadOnlyTransaction(this.name,async tx=>{const request=tx.objectStore(STORE_NAME).get(key);const requestPromise=asyncifyRequest(request);const txPromise=asyncifyTransaction(tx);const [_,value]=await Promise.all([txPromise,requestPromise]);return value})}delete(key){RequireString(key);return openWriteTransaction(this.name,async tx=>{const request=tx.objectStore(STORE_NAME).delete(key);const requestPromise=asyncifyRequest(request);
const txPromise=asyncifyTransaction(tx);await Promise.all([txPromise,requestPromise])})}clear(){return openWriteTransaction(this.name,async tx=>{const request=tx.objectStore(STORE_NAME).clear();const requestPromise=asyncifyRequest(request);const txPromise=asyncifyTransaction(tx);await Promise.all([txPromise,requestPromise])})}keys(){return openReadOnlyTransaction(this.name,async tx=>{let requestPromise;if(SUPPORTS_GETALLKEYS){const request=tx.objectStore(STORE_NAME).getAllKeys();requestPromise=asyncifyRequest(request)}else requestPromise=
getEntriesFromCursor(tx,"keys");const txPromise=asyncifyTransaction(tx);const [_,value]=await Promise.all([txPromise,requestPromise]);return value})}values(){return openReadOnlyTransaction(this.name,async tx=>{let requestPromise;if(SUPPORTS_GETALL){const request=tx.objectStore(STORE_NAME).getAll();requestPromise=asyncifyRequest(request)}else requestPromise=getEntriesFromCursor(tx,"values");const txPromise=asyncifyTransaction(tx);const [_,value]=await Promise.all([txPromise,requestPromise]);return value})}entries(){return openReadOnlyTransaction(this.name,
async tx=>{const requestPromise=getEntriesFromCursor(tx,"entries");const txPromise=asyncifyTransaction(tx);const [_,value]=await Promise.all([txPromise,requestPromise]);return value})}}self.KVStorageContainer=KVStorageContainer};


// ../lib/storage/localForageAdaptor.js
'use strict';{const KVStorageContainer=self.KVStorageContainer;const CRITICAL_ERRORS=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];const memoryStorage=new WeakMap;let isInMemory=false;if(typeof indexedDB==="undefined"){isInMemory=true;
console.warn("Unable to use local storage because indexedDB is not defined")}function NOT_IMPLEMENTED(name){throw new Error(`"${name}" is not implemented`);}function DISALLOW_CALLBACK(fn){if(typeof fn==="function")throw new Error(`localforage callback API is not implemented; please use the promise API instead`);}function StructuredClone(value){if(typeof value==="object")return new Promise(resolve=>{const {port1,port2}=new MessageChannel;port2.onmessage=ev=>resolve(ev.data);port1.postMessage(value)});
else return Promise.resolve(value)}class ForageAdaptor{constructor(inst){this._inst=inst;memoryStorage.set(this,new Map)}_MaybeSwitchToMemoryFallback(err){if(isInMemory)return;for(const regex of CRITICAL_ERRORS)if(err&&regex.test(err.message)){console.error("Unable to use local storage, reverting to in-memory store: ",err,err.message);isInMemory=true;break}}async _getItemFallback(name){const value=memoryStorage.get(this).get(name);const ret=await StructuredClone(value);return typeof ret==="undefined"?
null:ret}async _setItemFallback(name,value){value=await StructuredClone(value);memoryStorage.get(this).set(name,value)}_removeItemFallback(name){memoryStorage.get(this).delete(name)}_clearFallback(){memoryStorage.get(this).clear()}_keysFallback(){return Array.from(memoryStorage.get(this).keys())}IsUsingFallback(){return isInMemory}async getItem(key,successCallback){DISALLOW_CALLBACK(successCallback);if(isInMemory)return await this._getItemFallback(key);let result;try{result=await this._inst.get(key)}catch(err){this._MaybeSwitchToMemoryFallback(err);
if(isInMemory)return await this._getItemFallback(key);else{console.error(`Error reading '${key}' from storage, returning null: `,err);return null}}return typeof result==="undefined"?null:result}async setItem(key,value,successCallback){DISALLOW_CALLBACK(successCallback);if(typeof value==="undefined")value=null;if(isInMemory){await this._setItemFallback(key,value);return}try{await this._inst.set(key,value)}catch(err){this._MaybeSwitchToMemoryFallback(err);if(isInMemory)await this._setItemFallback(key,
value);else throw err;}}async removeItem(key,successCallback){DISALLOW_CALLBACK(successCallback);if(isInMemory){this._removeItemFallback(key);return}try{await this._inst.delete(key)}catch(err){this._MaybeSwitchToMemoryFallback(err);if(isInMemory)this._removeItemFallback(key);else console.error(`Error removing '${key}' from storage: `,err)}}async clear(successCallback){DISALLOW_CALLBACK(successCallback);if(isInMemory){this._clearFallback();return}try{await this._inst.clear()}catch(err){this._MaybeSwitchToMemoryFallback(err);
if(isInMemory)this._clearFallback();else console.error(`Error clearing storage: `,err)}}async keys(successCallback){DISALLOW_CALLBACK(successCallback);if(isInMemory)return this._keysFallback();let result=[];try{result=await this._inst.keys()}catch(err){this._MaybeSwitchToMemoryFallback(err);if(isInMemory)return this._keysFallback();else console.error(`Error getting storage keys: `,err)}return result}ready(successCallback){DISALLOW_CALLBACK(successCallback);if(isInMemory)return Promise.resolve(true);
else return this._inst.ready()}createInstance(options){if(typeof options!=="object")throw new TypeError("invalid options object");const name=options["name"];if(typeof name!=="string")throw new TypeError("invalid store name");const inst=new KVStorageContainer(name);return new ForageAdaptor(inst)}length(successCallback){NOT_IMPLEMENTED("localforage.length()")}key(index,successCallback){NOT_IMPLEMENTED("localforage.key()")}iterate(iteratorCallback,successCallback){NOT_IMPLEMENTED("localforage.iterate()")}setDriver(driverName){NOT_IMPLEMENTED("localforage.setDriver()")}config(options){NOT_IMPLEMENTED("localforage.config()")}defineDriver(customDriver){NOT_IMPLEMENTED("localforage.defineDriver()")}driver(){NOT_IMPLEMENTED("localforage.driver()")}supports(driverName){NOT_IMPLEMENTED("localforage.supports()")}dropInstance(){NOT_IMPLEMENTED("localforage.dropInstance()")}disableMemoryMode(){isInMemory=
false}}self["localforage"]=new ForageAdaptor(new KVStorageContainer("localforage"))};


// ../lib/misc/supports.js
'use strict';{const C3=self.C3;C3.Supports={};C3.Supports.WebAnimations=(()=>{try{if(C3.Platform.Browser==="Safari")return false;if(typeof document==="undefined")return false;const e=document.createElement("div");if(typeof e.animate==="undefined")return false;const player=e.animate([{opacity:"0"},{opacity:"1"}],1E3);return typeof player.reverse!=="undefined"}catch(e){return false}})();C3.Supports.DialogElement=typeof HTMLDialogElement!=="undefined";C3.Supports.RequestIdleCallback=!!self.requestIdleCallback;
C3.Supports.ImageBitmap=!!self.createImageBitmap;C3.Supports.ImageBitmapOptions=false;if(C3.Supports.ImageBitmap)try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(imageBitmap=>{C3.Supports.ImageBitmapOptions=true}).catch(err=>{C3.Supports.ImageBitmapOptions=false})}catch(e){C3.Supports.ImageBitmapOptions=false}C3.Supports.ClipboardReadText=!!(navigator["clipboard"]&&navigator["clipboard"]["readText"]&&C3.Platform.Browser!=="Firefox");C3.Supports.PermissionsQuery=!!(navigator["permissions"]&&
navigator["permissions"]["query"]);C3.Supports.Proxies=typeof Proxy!=="undefined";C3.Supports.DownloadAttribute=(()=>{if(typeof document==="undefined")return false;const a=document.createElement("a");return typeof a.download!=="undefined"})();C3.Supports.CanvasToBlob=(()=>{return typeof HTMLCanvasElement!=="undefined"&&HTMLCanvasElement.prototype.toBlob})();C3.Supports.Fetch=typeof fetch==="function";C3.Supports.PersistentStorage=!!(self.isSecureContext&&C3.Platform.Browser!=="Opera"&&(navigator["storage"]&&
navigator["storage"]["persist"]));C3.Supports.StorageQuotaEstimate=!!(self.isSecureContext&&(navigator["storage"]&&navigator["storage"]["estimate"]));C3.Supports.Fullscreen=(()=>{if(typeof document==="undefined")return false;if(C3.Platform.OS==="iOS")return false;const elem=document.documentElement;return!!(elem.requestFullscreen||elem.msRequestFullscreen||elem.mozRequestFullScreen||elem.webkitRequestFullscreen)})();C3.Supports.ImageDecoder=typeof self["ImageDecoder"]!=="undefined";C3.Supports.NativeFileSystemAPI=
!!self["showOpenFilePicker"];C3.Supports.NavigatorFontsQuery=!!(navigator["fonts"]&&navigator["fonts"]["query"])};


// ../lib/misc/polyfills.js
'use strict';{const C3=self.C3;if(!String.prototype.trimStart){const startWhitespace=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function trimStart(){return this.replace(startWhitespace,"")}}if(!String.prototype.trimEnd){const endWhitespace=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;
String.prototype.trimEnd=function trimEnd(){return this.replace(endWhitespace,"")}}if(!String.prototype.replaceAll)String.prototype.replaceAll=function replaceAll(find,replace){return this.replace(new RegExp(C3.EscapeRegex(find),"g"),replace)};if(!Array.prototype.values)Array.prototype.values=function*(){for(const i of this)yield i};if(!Array.prototype.flat){function arrayFlat(arr,depth){return arr.reduce((acc,val)=>{if(depth>0&&Array.isArray(val)){Array.prototype.push.apply(acc,arrayFlat(val,depth-
1));return acc}else{acc.push(val);return acc}},[])}Array.prototype.flat=function(depth=1){return arrayFlat(this,depth)}}if(!RegExp.escape)RegExp.escape=function(s){return String(s).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")};if(navigator["storage"]&&!navigator["storage"]["estimate"]&&navigator["webkitTemporaryStorage"]&&navigator["webkitTemporaryStorage"]["queryUsageAndQuota"])navigator["storage"]["estimate"]=function(){return new Promise((resolve,reject)=>{return navigator["webkitTemporaryStorage"]["queryUsageAndQuota"]((usage,
quota)=>resolve({"usage":usage,"quota":quota}),reject)})};if(typeof HTMLCollection!=="undefined"&&!HTMLCollection.prototype[Symbol.iterator])HTMLCollection.prototype[Symbol.iterator]=function(){let i=0;return{next:()=>{if(i>=this.length)return{done:true};else return{value:this.item(i++),done:false}}}};if(typeof NodeList!=="undefined"&&!NodeList.prototype[Symbol.iterator])NodeList.prototype[Symbol.iterator]=function(){let i=0;return{next:()=>{if(i>=this.length)return{done:true};else return{value:this.item(i++),
done:false}}}};if(typeof DOMTokenList!=="undefined"&&!DOMTokenList.prototype[Symbol.iterator])DOMTokenList.prototype[Symbol.iterator]=function(){let i=0;return{next:()=>{if(i>=this.length)return{done:true};else return{value:this.item(i++),done:false}}}};if(typeof FileList!=="undefined"&&!FileList.prototype[Symbol.iterator])FileList.prototype[Symbol.iterator]=function(){let i=0;return{next:()=>{if(i>=this.length)return{done:true};else return{value:this.item(i++),done:false}}}};if(typeof TextEncoder===
"undefined"){self.TextEncoder=class TextEncoder{constructor(){Object.defineProperty(this,"encoding",{"value":"utf-8","writable":false})}encode(str){var Len=str.length,resPos=-1;var resArr=new Uint8Array(Len*3);for(var point=0,nextcode=0,i=0;i!==Len;){point=str.charCodeAt(i),i+=1;if(point>=55296&&point<=56319){if(i===Len){resArr[resPos+=1]=239;resArr[resPos+=1]=191;resArr[resPos+=1]=189;break}nextcode=str.charCodeAt(i);if(nextcode>=56320&&nextcode<=57343){point=(point-55296)*1024+nextcode-56320+65536;
i+=1;if(point>65535){resArr[resPos+=1]=30<<3|point>>>18;resArr[resPos+=1]=2<<6|point>>>12&63;resArr[resPos+=1]=2<<6|point>>>6&63;resArr[resPos+=1]=2<<6|point&63;continue}}else{resArr[resPos+=1]=239;resArr[resPos+=1]=191;resArr[resPos+=1]=189;continue}}if(point<=127)resArr[resPos+=1]=0<<7|point;else if(point<=2047){resArr[resPos+=1]=6<<5|point>>>6;resArr[resPos+=1]=2<<6|point&63}else{resArr[resPos+=1]=14<<4|point>>>12;resArr[resPos+=1]=2<<6|point>>>6&63;resArr[resPos+=1]=2<<6|point&63}}return new Uint8Array(resArr.buffer.slice(0,
resPos+1))}toString(){return"[object TextEncoder]"}};TextEncoder[Symbol.toStringTag]="TextEncoder"}if(typeof TextDecoder==="undefined"){function persist(iterable){const itr=iterable[Symbol.iterator]();return{next:_=>itr.next(),[Symbol.iterator](){return this}}}function readNext(bytes){const n=bytes.next();if(n.done)throw new Error("unexpected end of input");if((n.value&192^128)!=0)throw new Error("invalid byte");return n.value&63}const _decoders=new Map;_decoders.set("utf-8",(arr,fatal)=>{let view;
if(arr.buffer)view=new Uint8Array(arr.buffer,arr.byteOffset,arr.byteLength);else if(view instanceof ArrayBuffer)view=new Uint8Array(arr);else throw new Error("Invalid parameter");const bytes=persist(view);const result=[];try{for(const ch of bytes){let val;if(ch<127)val=ch&127;else if(ch<223)val=(ch&31)<<6|readNext(bytes);else if(ch<239)val=(ch&15)<<12|readNext(bytes)<<6|readNext(bytes);else if(ch<247)val=(ch&7)<<18|readNext(bytes)<<12|readNext(bytes)<<6|readNext(bytes);else throw new Error("Invalid character");
result.push(String.fromCodePoint(val))}}catch(e){if(fatal)throw e;result.push("\ufffd")}return result.join("")});_decoders.set("utf8",_decoders.get("utf-8"));_decoders.set("utf-16le",(arr,fatal)=>{throw new Error("utf-16le decoder not implemented");});self.TextDecoder=class TextDecoder{constructor(label="utf-8",options={}){const decoder=_decoders.get(label);if(!decoder)throw new Error(`TextDecoder polyfill does not support "${label}"`);Object.defineProperty(this,"fatal",{"value":options["fatal"]===
true,"writable":false});Object.defineProperty(this,"_decoder",{"value":decoder,"writable":false});Object.defineProperty(this,"encoding",{"value":label,"writable":false})}decode(arr){return this["_decoder"](arr,this["fatal"])}toString(){return"[object TextDecoder]"}};TextDecoder[Symbol.toStringTag]="TextDecoder"}if(typeof self.isSecureContext==="undefined")self.isSecureContext=location.protocol==="https:";if(typeof self["globalThis"]==="undefined")self["globalThis"]=self};


// c3/lib/misc/assert.js
'use strict';{const C3=self.C3;function assertFail(msg_){let stack=C3.GetCallStack();let msg="Assertion failure: "+msg_+"\n\nStack trace:\n"+stack;console.error(msg)}self.assert=function assert(cnd_,msg_){if(!cnd_)assertFail(msg_)}};


// ../lib/misc/typeChecks.js
'use strict';{const C3=self.C3;C3.IsNumber=function IsNumber(x){return typeof x==="number"};C3.IsFiniteNumber=function IsFiniteNumber(x){return C3.IsNumber(x)&&isFinite(x)};C3.RequireNumber=function RequireNumber(x){if(!C3.IsNumber(x))throw new TypeError("expected number");};C3.RequireOptionalNumber=function RequireOptionalNumber(x){if(C3.IsNullOrUndefined(x))return};C3.RequireNumberInRange=function RequireNumberInRange(x,low,high){if(!C3.IsNumber(x)||isNaN(x)||low>x||high<x)throw new RangeError("number outside of range");
};C3.RequireAllNumber=function RequireAllNumber(...args){for(let a of args);};C3.RequireFiniteNumber=function RequireFiniteNumber(x){if(!C3.IsFiniteNumber(x))throw new TypeError("expected finite number");};C3.RequireOptionalFiniteNumber=function RequireOptionalFiniteNumber(x){if(C3.IsNullOrUndefined(x))return};C3.RequireAllFiniteNumber=function RequireAllFiniteNumber(...args){for(let a of args);};C3.IsString=function IsString(x){return typeof x==="string"};C3.RequireString=function RequireString(x){if(!C3.IsString(x))throw new TypeError("expected string");
};C3.RequireOptionalString=function RequireOptionalString(x){if(C3.IsNullOrUndefined(x))return};C3.RequireAllString=function RequireAllString(...args){for(let a of args);};C3.IsSimpleObject=function IsSimpleObject(x){if(typeof x!=="object"||x===null)return false;let proto=Object.getPrototypeOf(x);return proto?proto.constructor===Object:proto===null};C3.RequireSimpleObject=function RequireSimpleObject(x){if(!C3.IsSimpleObject(x))throw new TypeError("expected simple object");};C3.RequireOptionalSimpleObject=
function RequireSimpleObject(x){if(C3.IsNullOrUndefined(x))return;if(!C3.IsSimpleObject(x))throw new TypeError("expected simple object");};C3.IsObject=function IsObject(x){return typeof x==="object"&&x!==null&&!Array.isArray(x)};C3.RequireObject=function RequireObject(x){if(!C3.IsObject(x))throw new TypeError("expected object");};C3.RequireOptionalObject=function RequireOptionalObject(x){if(C3.IsNullOrUndefined(x))return};C3.RequireAllObject=function RequireAllObject(...args){for(let a of args);};
C3.IsFileLike=function IsFileLike(x){return C3.IsInstanceOf(x,Blob)&&typeof x["name"]==="string"};C3.RequireFileLike=function RequireFileLike(x){if(!C3.IsFileLike(x))throw new TypeError("expected file");};C3.RequireOptionalFileLike=function RequireOptionalFileLike(x){if(C3.IsNullOrUndefined(x))return};C3.IsArray=function IsArray(x){return Array.isArray(x)};C3.RequireArray=function RequireArray(x){if(!C3.IsArray(x))throw new TypeError("expected array");};C3.RequireOptionalArray=function RequireOptionalArray(x){if(C3.IsNullOrUndefined(x))return};
C3.RequireAllArray=function RequireAllArray(...args){for(let a of args);};C3.Is2DArray=function(x){if(!C3.IsArray(x))return false;if(!x.length)return true;if(!C3.IsArray(x[0]))return false;return true};C3.Require2DArray=function Require2DArray(x){if(!C3.Is2DArray(x))throw new TypeError("expected 2d array");for(let arr of x)if(!C3.IsArray(arr))throw new TypeError("expected 2d array");};C3.RequireOptional2DArray=function Require2DArray(x){if(C3.IsNullOrUndefined(x))return};C3.IsFunction=function IsFunction(x){return typeof x===
"function"};C3.RequireFunction=function RequireFunction(x,f){if(!C3.IsFunction(x))throw new TypeError("expected function");if(!C3.IsNullOrUndefined(f))if(x!==f)throw new TypeError("expected same function reference");};C3.RequireOptionalFunction=function RequireOptionalFunction(x){if(C3.IsNullOrUndefined(x))return};C3.RequireAllFunction=function RequireAllFunction(...args){for(let a of args);};C3.RequireAnyFunction=function RequireAllFunction(x,...args){if(!C3.IsFunction(x))throw new TypeError("expected function");
if(!args.length)throw new Error("missing comparison functions");for(let a of args)if(!C3.IsNullOrUndefined(a))if(x===a)return;throw new TypeError("expected same function reference");};C3.RequireOptionalAllFunction=function RequireAllFunction(...args){if(C3.IsNullOrUndefined(args))return;for(let a of args);};C3.IsInstanceOf=function IsInstanceOf(x,t){return x instanceof t};C3.IsInstanceOfAny=function IsInstanceOfAny(x,...args){for(let t of args)if(C3.IsInstanceOf(x,t))return true;return false};C3.RequireInstanceOf=
function RequireInstanceOf(x,t){if(!C3.IsInstanceOf(x,t))throw new TypeError("unexpected type");};C3.RequireOptionalInstanceOf=function RequireOptionalInstanceOf(x,t){if(C3.IsNullOrUndefined(x))return};C3.RequireAllInstanceOf=function RequireAllInstanceOf(t,...args){for(let a of args);};C3.RequireAnyInstanceOf=function RequireAnyInstanceOf(x,...args){if(!C3.IsInstanceOfAny(x,...args))throw new TypeError("unexpected type");};C3.RequireAnyOptionalInstanceOf=function RequireAnyOptionalInstanceOf(x,...args){if(C3.IsNullOrUndefined(x))return;
if(!C3.IsInstanceOfAny(x,...args))throw new TypeError("unexpected type");};C3.IsArrayOf=function IsArrayOf(x,t){for(let i of x)if(!C3.IsInstanceOf(i,t))return false;return true};C3.IsArrayOfFiniteNumbers=function IsArrayOf(x){for(let i of x)if(!C3.IsFiniteNumber(i))return false;return true};C3.RequireArrayOf=function RequireArrayOf(x,t){for(let i of x);};C3.RequireOptionalArrayOf=function RequireOptionalArrayOf(x,t){if(C3.IsNullOrUndefined(x))return;for(let i of x);};C3.RequireArrayOfAny=function RequireArrayOf(x,
...args){for(let i of x);};C3.RequireOptionalArrayOfAny=function RequireOptionalArrayOfAny(x,...args){if(C3.IsNullOrUndefined(x))return;for(let i of x);};C3.IsDOMNode=function IsDOMNode(d,n){if(C3.IsNullOrUndefined(d)||!C3.IsString(d.nodeName))return false;return!n||C3.equalsNoCase(d.nodeName,n)};C3.RequireDOMNode=function RequireDOMNode(d,n){if(C3.IsNullOrUndefined(d)||!C3.IsString(d.nodeName))throw new TypeError("expected DOM node");if(n&&!C3.equalsNoCase(d.nodeName,n))throw new TypeError(`expected DOM '${n}' node`);
};C3.RequireOptionalDOMNode=function RequireOptionalDOMNode(d,n){if(C3.IsNullOrUndefined(d))return};C3.IsHTMLElement=function IsHTMLElement(e,t){if(C3.IsNullOrUndefined(e)||!C3.IsString(e.tagName))return false;return!t||C3.equalsNoCase(e.tagName,t)};C3.RequireHTMLElement=function RequireHTMLElement(e,t){if(C3.IsNullOrUndefined(e)||!C3.IsString(e.tagName))throw new TypeError("expected HTML element");if(t&&!C3.equalsNoCase(e.tagName,t))throw new TypeError(`expected HTML '${t}' element`);};C3.RequireOptionalHTMLElement=
function RequireOptionalHTMLElement(e,t){if(C3.IsNullOrUndefined(e))return};C3.IsDrawable=function IsDrawable(d){return C3.IsHTMLElement(d,"img")||C3.IsHTMLElement(d,"canvas")||C3.IsHTMLElement(d,"video")||typeof OffscreenCanvas!=="undefined"&&d instanceof OffscreenCanvas||typeof ImageBitmap!=="undefined"&&d instanceof ImageBitmap};C3.RequireDrawable=function RequireDrawable(d){if(!C3.IsDrawable(d))throw new TypeError("expected drawable");};C3.RequireOptionalDrawable=function RequireOptionalDrawable(d){if(C3.IsNullOrUndefined(d))return};
C3.IsDrawableOrImageData=function IsDrawableOrImageData(x){if(x instanceof ImageData)return true;return C3.IsDrawable(x)};C3.RequireDrawableOrImageData=function RequireDrawableOrImageData(d){if(!C3.IsDrawableOrImageData(d))throw new TypeError("expected drawable or image data");};C3.RequireOptionalDrawableOrImageData=function RequireOptionalDrawableOrImageData(d){if(C3.IsNullOrUndefined(d))return;if(!C3.IsDrawableOrImageData(d))throw new TypeError("expected drawable or image data");};C3.IsStringLike=
function IsStringLike(x){return typeof x==="string"||x instanceof C3.HtmlString||x instanceof C3.BBString};C3.RequireStringLike=function RequireStringLike(x){if(!C3.IsStringLike(x))throw new TypeError("expected string-like");};C3.RequireOptionalStringLike=function RequireOptionalStringLike(x){if(C3.IsNullOrUndefined(x))return};C3.RequireAllStringLike=function RequireAllStringLike(...args){for(let a of args);};C3.RequireOverride=function RequireOverride(){throw new Error("must be overridden");};C3.NotYetImplemented=
function NotYetImplemented(){throw new Error("not yet implemented");};C3.IsDefined=function isDefined(obj,...follow){let currentObject=obj;if(typeof currentObject==="undefined")return false;for(let key of follow){if(typeof currentObject[key]==="undefined")return false;currentObject=currentObject[key]}return true};C3.IsNullOrUndefined=function(x){return typeof x==="undefined"||x===null};C3.AreArrayElementsOfSameType=function(arr){let type=arr[0].constructor;for(let x of arr)if(x.constructor!==type)return false;
return type};C3.AreArrayElementsOfType=function(arr,t){for(let x of arr)if(!(x instanceof t))return false;return true};const TypedArray=Object.getPrototypeOf(Uint8Array);C3.IsTypedArray=function(view){return C3.IsInstanceOf(view,TypedArray)};C3.RequireTypedArray=function(view){};C3.WeakRequireTypedArray=function WeakRequireTypedArray(inst){C3.WeakRequireInstanceOf(inst,TypedArray)};C3.WeakRequireAnyInstanceOf=function WeakRequireAnyInstanceOf(inst,...ctors){if(!C3.WeakIsAnyInstanceOf(inst,...ctors))throw new TypeError("unexpected type");
};C3.WeakIsAnyInstanceOf=function WeakIsAnyInstanceOf(inst,...ctors){for(const ctor of ctors)if(C3.WeakIsInstanceOf(inst,ctor))return true;return false};C3.WeakRequireInstanceOf=function WeakRequireInstanceOf(inst,ctor){if(!C3.WeakIsInstanceOf(inst,ctor))throw new TypeError("unexpected type");};C3.WeakIsInstanceOf=function WeakIsInstanceOf(inst,ctor){while(inst=Object.getPrototypeOf(inst))if(inst.constructor.name===ctor.name)return true;return false}};


// ../lib/misc/jsutil.js
'use strict';{const C3=self.C3;C3.GetCallStack=function GetCallStack(){return(new Error).stack};C3.Debugger=function Debugger(){debugger};C3.cast=function cast(o,T){if(o&&o instanceof T)return o;else return null};C3.getName=function getName(o){if(typeof o==="undefined")return"undefined";if(o===null)return"null";if(typeof o==="boolean")return"<boolean>";if(C3.IsNumber(o))return"<number>";if(C3.IsString(o))return"<string>";if(C3.IsArray(o))return"<array>";if(typeof o==="symbol")return"<"+o.toString()+
">";if(C3.IsFunction(o)){if(o.name&&o.name!=="Function")return o.name;return"<anonymous function>"}if(typeof o==="object"){if(o.constructor&&o.constructor.name&&o.constructor.name!=="Object")return o.constructor.name;return"<anonymous object>"}return"<unknown>"};C3.getType=function getType(o){if(o===null)return"null";if(Array.isArray(o))return"array";return typeof o};C3.range=function*range(a,b){if(!isFinite(Math.abs(a-b)))throw new Error("Invalid parameters");if(a>b)for(let i=a-1;i>=b;i--)yield i;
else for(let i=a;i<b;i++)yield i};function isValidTypeChange(from,to){let fromType=C3.getType(from);let toType=C3.getType(to);if(fromType==="null"||toType==="null")return true;if(fromType==="undefined"||toType==="undefined")return false;return fromType===toType}let ctorObjectToProxy=new Map;let ctorProxyToObject=new Map;let proxyToObject=new WeakMap;let releasedObjects=new WeakMap;C3.DefendHandler={};const VALID_GET_MISSING_KEYS=new Set(["then","splice"]);function logDefendedObjectWarning(msg){console.warn("[Defence] "+
msg+" @",C3.GetCallStack())}C3.DefendHandler.get=function defended_get(target,key){if(!(key in target)&&typeof key!=="symbol"&&!VALID_GET_MISSING_KEYS.has(key))logDefendedObjectWarning(`Accessed missing property '${key}' from defended object '${C3.getName(target)}', returning undefined`);if(releasedObjects.has(target)&&typeof key!=="symbol"&&!VALID_GET_MISSING_KEYS.has(key))logDefendedObjectWarning(`Accessed property '${key}' on a released object '${C3.getName(target)}'\nObject was originally released at: ${releasedObjects.get(target)})\nCall stack at access: `);
return target[key]};C3.DefendHandler.set=function defended_set(target,key,value){if(!(key in target)&&!ctorObjectToProxy.has(target))logDefendedObjectWarning(`Set non-existent property '${key}' to '${value}' on defended object '${C3.getName(target)}'`);if(!isValidTypeChange(target[key],value)&&!ctorObjectToProxy.has(target))logDefendedObjectWarning(`Set '${C3.getType(target[key])}' property '${key}' to type '${C3.getType(value)}' on defended object '${C3.getName(target)}'`);if(releasedObjects.has(target))logDefendedObjectWarning(`Set property '${key}' on a released object '${C3.getName(target)}'\nObject was originally released at: ${releasedObjects.get(target)})\nCall stack at access: `);
target[key]=value;return true};C3.DefendHandler.deleteProperty=function defended_deleteProperty(target,key){throw new ReferenceError(`Cannot delete property '${key}' from defended object '${C3.getName(target)}'`);};C3.DefendHandler.defineProperty=function defended_defineProperty(target,key,desc){throw new ReferenceError(`Cannot define property '${key}' on defended object '${C3.getName(target)}'`);};C3.DefendHandler.enumerate=function defended_enumerate(target){throw new ReferenceError(`Cannot enumerate defended object '${C3.getName(target)}'`);
};let checkRafId=-1;function CheckDefendedObjectsUsedCorrectly(){checkRafId=-1;if(ctorObjectToProxy.size>0||ctorProxyToObject.size>0){let uniqueNames=new Set([...ctorObjectToProxy.keys()].map(o=>C3.getName(o)));let leftoverNames=[...uniqueNames].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${leftoverNames}`);ctorObjectToProxy.clear();ctorProxyToObject.clear()}}
C3.DefendedBase=class DefendedBase{constructor(){if(!C3.isDebugDefend||!C3.Supports.Proxies)return;let newTarget=new.target;let realObject=Object.create(newTarget.prototype);let proxy=new Proxy(realObject,C3.DefendHandler);ctorObjectToProxy.set(realObject,proxy);ctorProxyToObject.set(proxy,realObject);proxyToObject.set(proxy,realObject);if(checkRafId===-1)checkRafId=requestAnimationFrame(CheckDefendedObjectsUsedCorrectly);return proxy}};C3.debugDefend=function debugDefend(o){if(C3.isDebugDefend&&
C3.Supports.Proxies&&o instanceof C3.DefendedBase){if(!ctorProxyToObject.has(o))return o;let realObject=ctorProxyToObject.get(o);ctorProxyToObject.delete(o);ctorObjectToProxy.delete(realObject);return o}else if(C3.isDebug)return Object.seal(o);else return o};C3.New=function New(Type,...args){let o;try{o=new Type(...args)}catch(e){ctorProxyToObject.clear();ctorObjectToProxy.clear();throw e;}if(C3.isDebugDefend)VerifyObjectPropertiesConsistent(Type,o);return C3.debugDefend(o)};C3.Release=function Release(o){let realObject=
proxyToObject.get(o);if(realObject)releasedObjects.set(realObject,C3.GetCallStack())};C3.WasReleased=function(o){let realObject=proxyToObject.get(o);if(!realObject)return false;return!!releasedObjects.get(realObject)};let typeProperties=new Map;function getObjectPropertySet(o){let ret=new Set;for(let k in o)ret.add(k);return ret}function VerifyObjectPropertiesConsistent(Type,o){let properties=getObjectPropertySet(o);let existingProperties=typeProperties.get(Type);if(existingProperties){let inconsistentProperties=
[];for(let k of existingProperties.values())if(properties.has(k))properties.delete(k);else inconsistentProperties.push(k);C3.appendArray(inconsistentProperties,[...properties]);if(inconsistentProperties.length)console.warn(`[Defence] '${C3.getName(Type)}' constructor creates inconsistent properties: ${inconsistentProperties.join(", ")}`)}else typeProperties.set(Type,properties)}C3.PerfMark=class PerfMark{constructor(name){this._name="";if(name)this.start(name)}start(name){this._name=name;performance.mark(this._name+
"-Start")}end(){performance.mark(this._name+"-End");performance.measure(this._name,this._name+"-Start",this._name+"-End")}next(name){this.end();this._name=name;performance.mark(this._name+"-Start")}}};


// ../lib/misc/mathutil.js
'use strict';{const C3=self.C3;const TWO_PI=Math.PI*2;const D_TO_R=Math.PI/180;const R_TO_D=180/Math.PI;C3.wrap=function wrap(x,min,max){x=Math.floor(x);min=Math.floor(min);max=Math.floor(max);if(x<min){let r=max-(min-x)%(max-min);return r===max?0:r}else return min+(x-min)%(max-min)};C3.mapToRange=function mapToRange(x,inMin,inMax,outMin,outMax){return(x-inMin)*(outMax-outMin)/(inMax-inMin)+outMin};C3.normalize=function normalize(value,minimum,maximum){return(value-minimum)/(maximum-minimum)};C3.clamp=
function clamp(x,a,b){if(x<a)return a;else if(x>b)return b;else return x};C3.clampAngle=function clampAngle(a){a%=TWO_PI;if(a<0)a+=TWO_PI;return a};C3.toRadians=function toRadians(x){return x*D_TO_R};C3.toDegrees=function toDegrees(x){return x*R_TO_D};C3.distanceTo=function distanceTo(x1,y1,x2,y2){return Math.hypot(x2-x1,y2-y1)};C3.distanceSquared=function distanceSquared(x1,y1,x2,y2){const dx=x2-x1;const dy=y2-y1;return dx*dx+dy*dy};C3.angleTo=function angleTo(x1,y1,x2,y2){return Math.atan2(y2-y1,
x2-x1)};C3.angleDiff=function angleDiff(a1,a2){if(a1===a2)return 0;let s1=Math.sin(a1);let c1=Math.cos(a1);let s2=Math.sin(a2);let c2=Math.cos(a2);let n=s1*s2+c1*c2;if(n>=1)return 0;if(n<=-1)return Math.PI;return Math.acos(n)};C3.angleRotate=function angleRotate(start,end,step){let ss=Math.sin(start);let cs=Math.cos(start);let se=Math.sin(end);let ce=Math.cos(end);if(Math.acos(ss*se+cs*ce)>step)if(cs*se-ss*ce>0)return C3.clampAngle(start+step);else return C3.clampAngle(start-step);else return C3.clampAngle(end)};
C3.angleClockwise=function angleClockwise(a1,a2){let s1=Math.sin(a1);let c1=Math.cos(a1);let s2=Math.sin(a2);let c2=Math.cos(a2);return c1*s2-s1*c2<=0};C3.angleLerp=function angleLerp(a,b,x,r=0){let diff=C3.angleDiff(a,b);const revs=TWO_PI*r;if(C3.angleClockwise(b,a))return C3.clampAngle(a+(diff+revs)*x);else return C3.clampAngle(a-(diff+revs)*x)};C3.angleLerpClockwise=function angleLerpClockwise(a,b,x,r=0){const diff=C3.angleDiff(a,b);const revs=TWO_PI*r;if(C3.angleClockwise(b,a))return C3.clampAngle(a+
(diff+revs)*x);return C3.clampAngle((TWO_PI-diff+revs)*x)};C3.angleLerpAntiClockwise=function angleLerpAntiClockwise(a,b,x,r=0){const diff=C3.angleDiff(a,b);const revs=TWO_PI*r;if(C3.angleClockwise(b,a))return C3.clampAngle((-TWO_PI+diff-revs)*x);return C3.clampAngle(a-(diff+revs)*x)};C3.lerp=function lerp(a,b,x){return a+x*(b-a)};C3.unlerp=function unlerp(a,b,x){if(a===b)return 0;return(x-a)/(b-a)};C3.relerp=function relerp(a,b,x,c,d){return C3.lerp(c,d,C3.unlerp(a,b,x))};C3.qarp=function qarp(a,
b,c,x){return C3.lerp(C3.lerp(a,b,x),C3.lerp(b,c,x),x)};C3.cubic=function cubic(a,b,c,d,x){return C3.lerp(C3.qarp(a,b,c,x),C3.qarp(b,c,d,x),x)};C3.cosp=function cosp(a,b,x){return(a+b+(a-b)*Math.cos(x*Math.PI))/2};C3.isPOT=function isPOT(x){return x>0&&(x-1&x)===0};C3.nextHighestPowerOfTwo=function nextHighestPowerOfTwo(x){--x;for(let i=1;i<32;i<<=1)x=x|x>>i;return x+1};C3.roundToNearestFraction=function roundToNearestFraction(x,n){return Math.round(x*n)/n};C3.floorToNearestFraction=function floorToNearestFraction(x,
n){return Math.floor(x*n)/n};C3.round6dp=function round6dp(x){return Math.round(x*1E6)/1E6};C3.toFixed=function toFixed(n,dp){let ret=n.toFixed(dp);let last=ret.length-1;for(;last>=0&&ret.charAt(last)==="0";--last);if(last>=0&&ret.charAt(last)===".")--last;if(last<0)return ret;return ret.substr(0,last+1)};C3.PackRGB=function PackRGB(red,green,blue){return C3.clamp(red,0,255)|C3.clamp(green,0,255)<<8|C3.clamp(blue,0,255)<<16};const ALPHAEX_SHIFT=1024;const ALPHAEX_MAX=1023;const RGBEX_SHIFT=16384;
const RGBEX_MAX=8191;const RGBEX_MIN=-8192;C3.PackRGBAEx=function PackRGBAEx(red,green,blue,alpha){red=C3.clamp(Math.floor(red*1024),RGBEX_MIN,RGBEX_MAX);green=C3.clamp(Math.floor(green*1024),RGBEX_MIN,RGBEX_MAX);blue=C3.clamp(Math.floor(blue*1024),RGBEX_MIN,RGBEX_MAX);alpha=C3.clamp(Math.floor(alpha*ALPHAEX_MAX),0,ALPHAEX_MAX);if(red<0)red+=RGBEX_SHIFT;if(green<0)green+=RGBEX_SHIFT;if(blue<0)blue+=RGBEX_SHIFT;return-(red*RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT+green*RGBEX_SHIFT*ALPHAEX_SHIFT+blue*
ALPHAEX_SHIFT+alpha)};C3.PackRGBEx=function PackRGBEx(red,green,blue){return C3.PackRGBAEx(red,green,blue,1)};function isNegativeZero(x){return x===0&&1/x<0}C3.GetRValue=function GetRValue(rgb){if(rgb>=0)return(rgb&255)/255;else{let v=Math.floor(-rgb/(RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT));if(v>RGBEX_MAX)v-=RGBEX_SHIFT;return v/1024}};C3.GetGValue=function GetGValue(rgb){if(rgb>=0)return((rgb&65280)>>8)/255;else{let v=Math.floor(-rgb%(RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT)/(RGBEX_SHIFT*ALPHAEX_SHIFT));
if(v>RGBEX_MAX)v-=RGBEX_SHIFT;return v/1024}};C3.GetBValue=function GetBValue(rgb){if(rgb>=0)return((rgb&16711680)>>16)/255;else{let v=Math.floor(-rgb%(RGBEX_SHIFT*ALPHAEX_SHIFT)/ALPHAEX_SHIFT);if(v>RGBEX_MAX)v-=RGBEX_SHIFT;return v/1024}};C3.GetAValue=function GetAValue(rgb){if(isNegativeZero(rgb))return 0;else if(rgb>=0)return 1;else{const v=Math.floor(-rgb%ALPHAEX_SHIFT);return v/ALPHAEX_MAX}};C3.greatestCommonDivisor=function greatestCommonDivisor(a,b){a=Math.floor(a);b=Math.floor(b);while(b!==
0){let t=b;b=a%b;a=t}return a};const COMMON_ASPECT_RATIOS=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];C3.getAspectRatio=function getAspectRatio(w,h){w=Math.floor(w);h=Math.floor(h);if(w===h)return[1,1];for(let aspect of COMMON_ASPECT_RATIOS){let approxH=w/aspect[0]*aspect[1];if(Math.abs(h-approxH)<1)return aspect.slice(0);approxH=w/aspect[1]*aspect[0];if(Math.abs(h-approxH)<1)return[aspect[1],aspect[0]]}let gcd=C3.greatestCommonDivisor(w,h);return[w/gcd,h/gcd]};C3.segmentsIntersect=
function segmentsIntersect(a1x,a1y,a2x,a2y,b1x,b1y,b2x,b2y){const min_ax=Math.min(a1x,a2x);const max_ax=Math.max(a1x,a2x);const min_bx=Math.min(b1x,b2x);const max_bx=Math.max(b1x,b2x);if(max_ax<min_bx||min_ax>max_bx)return false;const min_ay=Math.min(a1y,a2y);const max_ay=Math.max(a1y,a2y);const min_by=Math.min(b1y,b2y);const max_by=Math.max(b1y,b2y);if(max_ay<min_by||min_ay>max_by)return false;const dpx=b1x-a1x+b2x-a2x;const dpy=b1y-a1y+b2y-a2y;const qax=a2x-a1x;const qay=a2y-a1y;const qbx=b2x-b1x;
const qby=b2y-b1y;const d=Math.abs(qay*qbx-qby*qax);const la=qbx*dpy-qby*dpx;if(Math.abs(la)>d)return false;const lb=qax*dpy-qay*dpx;return Math.abs(lb)<=d};C3.segmentsIntersectPreCalc=function segmentsIntersectPreCalc(a1x,a1y,a2x,a2y,min_ax,max_ax,min_ay,max_ay,b1x,b1y,b2x,b2y){const min_bx=Math.min(b1x,b2x);const max_bx=Math.max(b1x,b2x);if(max_ax<min_bx||min_ax>max_bx)return false;const min_by=Math.min(b1y,b2y);const max_by=Math.max(b1y,b2y);if(max_ay<min_by||min_ay>max_by)return false;const dpx=
b1x-a1x+b2x-a2x;const dpy=b1y-a1y+b2y-a2y;const qax=a2x-a1x;const qay=a2y-a1y;const qbx=b2x-b1x;const qby=b2y-b1y;const d=Math.abs(qay*qbx-qby*qax);const la=qbx*dpy-qby*dpx;if(Math.abs(la)>d)return false;const lb=qax*dpy-qay*dpx;return Math.abs(lb)<=d};C3.segmentIntersectsQuad=function segmentIntersectsQuad(x1,y1,x2,y2,q){const min_x=Math.min(x1,x2);const max_x=Math.max(x1,x2);const min_y=Math.min(y1,y2);const max_y=Math.max(y1,y2);const tlx=q.getTlx(),tly=q.getTly(),trx=q.getTrx(),try_=q.getTry(),
brx=q.getBrx(),bry=q.getBry(),blx=q.getBlx(),bly=q.getBly();return C3.segmentsIntersectPreCalc(x1,y1,x2,y2,min_x,max_x,min_y,max_y,tlx,tly,trx,try_)||C3.segmentsIntersectPreCalc(x1,y1,x2,y2,min_x,max_x,min_y,max_y,trx,try_,brx,bry)||C3.segmentsIntersectPreCalc(x1,y1,x2,y2,min_x,max_x,min_y,max_y,brx,bry,blx,bly)||C3.segmentsIntersectPreCalc(x1,y1,x2,y2,min_x,max_x,min_y,max_y,blx,bly,tlx,tly)};C3.segmentIntersectsAnyN=function segmentIntersectsAnyN(x1,y1,x2,y2,points){const min_x=Math.min(x1,x2);
const max_x=Math.max(x1,x2);const min_y=Math.min(y1,y2);const max_y=Math.max(y1,y2);let i=0;for(let last=points.length-4;i<=last;i+=2)if(C3.segmentsIntersectPreCalc(x1,y1,x2,y2,min_x,max_x,min_y,max_y,points[i],points[i+1],points[i+2],points[i+3]))return true;return C3.segmentsIntersectPreCalc(x1,y1,x2,y2,min_x,max_x,min_y,max_y,points[i],points[i+1],points[0],points[1])};const NO_HIT=2;const PADDING=1E-6;C3.rayIntersect=function rayIntersect(rx1,ry1,rx2,ry2,sx1,sy1,sx2,sy2){const rdx=rx2-rx1;const rdy=
ry2-ry1;const sdx=sx2-sx1;const sdy=sy2-sy1;const det=rdx*sdy-rdy*sdx;if(det===0)return NO_HIT;const gamma=((ry1-ry2)*(sx2-rx1)+rdx*(sy2-ry1))/det;if(0<gamma&&gamma<1+PADDING)return(sdy*(sx2-rx1)+(sx1-sx2)*(sy2-ry1))/det;return NO_HIT};C3.rayIntersectExtended=function rayIntersect(rx1,ry1,rx2,ry2,sx1,sy1,sx2,sy2,f){const dx=(sx2-sx1)*f;const dy=(sy2-sy1)*f;return C3.rayIntersect(rx1,ry1,rx2,ry2,sx1-dx,sy1-dy,sx2+dx,sy2+dy)};C3.isPointInTriangleInclusive=function isPointInTriangleInclusive(px,py,tx1,
ty1,tx2,ty2,tx3,ty3){const v0x=tx2-tx1;const v0y=ty2-ty1;const v1x=tx3-tx1;const v1y=ty3-ty1;const v2x=px-tx1;const v2y=py-ty1;const dot00=v0x*v0x+v0y*v0y;const dot01=v0x*v1x+v0y*v1y;const dot02=v0x*v2x+v0y*v2y;const dot11=v1x*v1x+v1y*v1y;const dot12=v1x*v2x+v1y*v2y;const invDenom=1/(dot00*dot11-dot01*dot01);const u=(dot11*dot02-dot01*dot12)*invDenom;const v=(dot00*dot12-dot01*dot02)*invDenom;return u>=0&&v>=0&&u+v<=1};C3.triangleCartesianToBarycentric=function triangleCartesianToBarycentric(px,py,
tx1,ty1,tx2,ty2,tx3,ty3){const v0x=tx2-tx1;const v0y=ty2-ty1;const v1x=tx3-tx1;const v1y=ty3-ty1;const v2x=px-tx1;const v2y=py-ty1;const dot00=v0x*v0x+v0y*v0y;const dot01=v0x*v1x+v0y*v1y;const dot11=v1x*v1x+v1y*v1y;const dot20=v2x*v0x+v2y*v0y;const dot21=v2x*v1x+v2y*v1y;const denom=dot00*dot11-dot01*dot01;const v=(dot11*dot20-dot01*dot21)/denom;const w=(dot00*dot21-dot01*dot20)/denom;const u=1-v-w;return[u,v,w]};C3.triangleBarycentricToCartesian=function triangleBarycentricToCartesian(u,v,w,tx1,ty1,
tx2,ty2,tx3,ty3){return[u*tx1+v*tx2+w*tx3,u*ty1+v*ty2+w*ty3]}};


// ../lib/misc/miscutil.js
'use strict';{const C3=self.C3;let mainDocument=null;let baseHref="";if(typeof document!=="undefined"){mainDocument=document;const baseElem=document.querySelector("base");baseHref=baseElem&&baseElem.hasAttribute("href")?baseElem.getAttribute("href"):"";if(baseHref){if(baseHref.startsWith("/"))baseHref=baseHref.substr(1);if(!baseHref.endsWith("/"))baseHref+="/"}}C3.GetBaseHref=function GetBaseHref(){return baseHref};C3.GetBaseURL=function GetBaseURL(){if(!mainDocument)return"";const loc=mainDocument.location;
return C3.GetPathFromURL(loc.origin+loc.pathname)+baseHref};C3.GetPathFromURL=function GetPathFromURL(url){if(!url.length)return url;if(url.endsWith("/")||url.endsWith("\\"))return url;const lastSlash=Math.max(url.lastIndexOf("/"),url.lastIndexOf("\\"));if(lastSlash===-1)return"";return url.substr(0,lastSlash+1)};C3.GetFilenameFromURL=function GetFilenameFromURL(url){if(!url.length)return url;if(url.endsWith("/")||url.endsWith("\\"))return"";const lastSlash=Math.max(url.lastIndexOf("/"),url.lastIndexOf("\\"));
if(lastSlash===-1)return url;return url.substr(lastSlash+1)};C3.DataTransferHasFiles=function DataTransferHasFiles(dataTransfer){if(dataTransfer.types)for(let i=0;i<dataTransfer.types.length;i++)if(dataTransfer.types[i]==="Files"||dataTransfer.types[i]==="application/x-c3-file")return true;return false};C3.DataTransferFilterFiles=async function DataTransferHasFiles(dataTransfer,filter){const ret=Array.from(dataTransfer.files).filter(file=>{return file.size!==0}).filter(file=>{return filter(file)}).map(async file=>
{try{return await C3.CloneFile(file)}catch(err){return null}});const files=await Promise.all(ret);return files.filter(file=>file)};C3.IsFileAnImage=function IsFileAnImage(file){if(file.type)return file.type.search(/image\/.*/)!==-1;else{const type=C3.MimeType.GetForFileExtension(C3.GetFileExtension(file.name)).GetString();return type.search(/image\/.*/)!==-1}};C3.IsFileAnSVG=function IsFileAnSVG(file){return file.type==="image/svg+xml"};C3.IsFileAMultiImageContainer=function IsFileAMultiImageContainer(file){if(file.type)return C3.MimeType.Get(file.type).IsAnimatedImage();
else return C3.MimeType.GetForFileExtension(C3.GetFileExtension(file.name)).IsAnimatedImage()};C3.GetFileExtension=function GetFileExtension(filename){let i=filename.lastIndexOf(".");if(i<1)return"";else return filename.substr(i)};C3.GetFileNamePart=function GetFileNamePart(filename){let i=filename.lastIndexOf(".");if(i<1)return filename;else return filename.substr(0,i)};C3.NormalizeFileSeparator=function NormalizeFileSeparator(path){return path.replace(/\\/g,"/")};C3.ParseFilePath=function ParseFilePath(path){path=
C3.NormalizeFileSeparator(path);let root=/^\w:\//.exec(path);if(root){root=root[0];path=path.slice(3);if(path[0]!=="/")path="/"+path}else root="";path=path.replace(/\/{2,}/g,"/");if(path.length>1&&path.slice(-1)==="/")path=path.slice(0,-1);const start=path.lastIndexOf("/")+1;let dir="",base=path,name,ext="";if(start>0){dir=path.slice(0,start);base=path.slice(start)}name=base;const end=base.lastIndexOf(".");if(end>0){ext=base.slice(end);name=base.slice(0,-ext.length)}const full=root+dir+base;return{dir,
base,name,root,ext,full}};C3.Wait=function Wait(delay,argument){return new Promise((resolve,reject)=>{self.setTimeout(resolve,delay,argument)})};C3.swallowException=function swallowException(f){try{f()}catch(e){if(C3.isDebug)console.warn("Swallowed exception: ",e)}};C3.noop=function noop(){};C3.equalsNoCase=function equalsNoCase(a,b){if(typeof a!=="string"||typeof b!=="string")return false;if(a===b)return true;a=a.normalize();b=b.normalize();if(a.length!==b.length)return false;return a.toLowerCase()===
b.toLowerCase()};C3.equalsCase=function equalsCase(a,b){if(typeof a!=="string"||typeof b!=="string")return false;if(a===b)return true;return a.normalize()===b.normalize()};C3.typedArraySet16=function typedArraySet16(dest,src,i){dest[i++]=src[0];dest[i++]=src[1];dest[i++]=src[2];dest[i++]=src[3];dest[i++]=src[4];dest[i++]=src[5];dest[i++]=src[6];dest[i++]=src[7];dest[i++]=src[8];dest[i++]=src[9];dest[i++]=src[10];dest[i++]=src[11];dest[i++]=src[12];dest[i++]=src[13];dest[i++]=src[14];dest[i]=src[15]};
C3.truncateArray=function truncateArray(arr,index){arr.length=index};C3.clearArray=function clearArray(arr){if(!arr)return;if(arr.length===0)return;C3.truncateArray(arr,0)};C3.clear2DArray=function clear2DArray(arr){if(!arr)return;for(let i=0;i<arr.length;i++){let a=arr[i];C3.truncateArray(a,0)}C3.truncateArray(arr,0)};C3.extendArray=function extendArray(arr,len,filler){len=len|0;const arrayLength=arr.length;if(len<=arrayLength)return;for(let i=arrayLength;i<len;++i)arr.push(filler)};C3.resizeArray=
function resizeArray(arr,len,filler){len=len|0;const arrayLength=arr.length;if(len<arrayLength)C3.truncateArray(arr,len);else if(len>arrayLength)C3.extendArray(arr,len,filler)};C3.shallowAssignArray=function shallowAssignArray(dest,src){C3.clearArray(dest);C3.appendArray(dest,src)};C3.appendArray=function appendArray(a,b){if(b.length<1E4)a.push(...b);else for(let i=0,len=b.length;i<len;++i)a.push(b[i])};C3.arrayRemove=function(arr,index){index=Math.floor(index);if(index<0||index>=arr.length)return;
let len=arr.length-1;for(let i=index;i<len;++i)arr[i]=arr[i+1];C3.truncateArray(arr,len)};C3.arrayFindRemove=function arrayFindRemove(a,o){let i=a.indexOf(o);if(i>=0)a.splice(i,1)};C3.arraysEqual=function arraysEqual(a,b){let len=a.length;if(b.length!==len)return false;for(let i=0;i<len;++i)if(a[i]!==b[i])return false;return true};C3.arrayFilterOut=function arrayFilterOut(arr,callback){let ret=[];let j=0;for(let i=0,len=arr.length;i<len;++i){let item=arr[i];if(callback(item))ret.push(item);else{arr[j]=
item;++j}}C3.truncateArray(arr,j);return ret};C3.arrayRemoveAllInSet=function arrayRemoveAllInSet(arr,s){const oldLen=arr.length;let j=0;for(let i=0,len=arr.length;i<len;++i){let item=arr[i];if(!s.has(item))arr[j++]=item}C3.truncateArray(arr,j);return oldLen-j};C3.isArrayIndexInBounds=function isArrayIndexInBounds(index,array){if(index!==Math.floor(index))return false;return index>=0&&index<array.length};C3.validateArrayIndex=function validateArrayIndex(index,array){if(!C3.isArrayIndexInBounds(index,
array))throw new RangeError("array index out of bounds");};C3.cloneArray=function cloneArray(array){return array.slice()};C3.deepCloneArray=function deepCloneArray(array,f){let ret=[];for(let e of array)if(C3.IsObject(e)){let clone=f(e);if(!clone)throw new Error("missing clone");if(clone.constructor!==e.constructor)throw new Error("object is not a clone");ret.push(clone)}else if(C3.IsArray(e))ret.push(C3.deepCloneArray(e,f));else ret.push(e);return ret};C3.clone2DArray=function cloneArray(array){let ret=
[];for(let arr of array)ret.push(arr.slice());return ret};C3.mergeSets=function mergeSets(set1,set2){return new Set([...set1,...set2])};C3.mergeSetsInPlace=function mergeSetsInPlace(set1,set2){for(const item of set2)set1.add(item);return set1};C3.first=function first(iterable){for(let i of iterable)return i;return null};C3.xor=function(x,y){return!x!==!y};C3.compare=function compare(x,cmp,y){switch(cmp){case 0:return x===y;case 1:return x!==y;case 2:return x<y;case 3:return x<=y;case 4:return x>y;
case 5:return x>=y;default:return false}};C3.hasAnyOwnProperty=function hasAnyOwnProperty(o){for(let p in o)if(o.hasOwnProperty(p))return true;return false};C3.PromiseAllWithProgress=function PromiseAllWithProgress(arr,progressCallback){if(!arr.length)return Promise.resolve([]);return new Promise((resolve,reject)=>{const results=[];let numberCompleted=0;let cancelled=false;for(let i=0,len=arr.length;i<len;++i){results.push(void 0);arr[i].then(result=>{if(cancelled)return;results[i]=result;++numberCompleted;
if(numberCompleted===arr.length)resolve(results);else progressCallback(numberCompleted,arr.length)}).catch(err=>{cancelled=true;reject(err)})}})};let memoryCallbacks=[];C3.AddLibraryMemoryCallback=function AddLibraryMemoryCallback(f){memoryCallbacks.push(f)};C3.GetEstimatedLibraryMemoryUsage=function GetEstimatedLibraryMemoryUsage(){let ret=0;for(let f of memoryCallbacks){let m=f();ret+=m}return Math.floor(ret)};let nextTaskId=1;const activeTaskIds=new Map;const taskMessageChannel=new MessageChannel;
taskMessageChannel.port2.onmessage=function OnTask(e){const id=e.data;const callback=activeTaskIds.get(id);activeTaskIds.delete(id);if(callback)callback(e.timeStamp)};C3.RequestUnlimitedAnimationFrame=function RequestUnlimitedAnimationFrame(callback){const id=nextTaskId++;activeTaskIds.set(id,callback);taskMessageChannel.port1.postMessage(id);return id};C3.CancelUnlimitedAnimationFrame=function CancelUnlimitedAnimationFrame(id){activeTaskIds.delete(id)};C3.PostTask=C3.RequestUnlimitedAnimationFrame;
C3.WaitForNextTask=function WaitForNextTask(){return new Promise(resolve=>C3.PostTask(resolve))};const activeRPAFids=new Set;C3.RequestPostAnimationFrame=function RequestPostAnimationFrame(callback){const id=self.requestAnimationFrame(async timestamp=>{await C3.WaitForNextTask();if(!activeRPAFids.has(id))return;activeRPAFids.delete(id);callback(timestamp)});activeRPAFids.add(id);return id};C3.CancelPostAnimationFrame=function CancelPostAnimationFrame(id){if(!activeRPAFids.has(id))return;self.cancelAnimationFrame(id);
activeRPAFids.delete(id)}};


// c3/lib/misc/runtimeutil.js
'use strict';{const C3=self.C3;C3.IsAbsoluteURL=function IsAbsoluteURL(url){return/^(?:[a-z]+:)?\/\//.test(url)||url.substr(0,5)==="data:"||url.substr(0,5)==="blob:"};C3.IsRelativeURL=function IsRelativeURL(url){return!C3.IsAbsoluteURL(url)};C3.ThrowIfNotOk=function ThrowIfNotOk(response){if(!response.ok)throw new Error(`fetch '${response.url}' response returned ${response.status} ${response.statusText}`);};C3.FetchOk=function FetchOk(url,init){return fetch(url,init).then(response=>{C3.ThrowIfNotOk(response);
return response})};C3.FetchText=function FetchText(url){return C3.FetchOk(url).then(response=>response.text())};C3.FetchJson=function FetchJson(url){return C3.FetchOk(url).then(response=>response.json())};C3.FetchBlob=function FetchBlob(url){return C3.FetchOk(url).then(response=>response.blob())};C3.FetchArrayBuffer=function FetchArrayBuffer(url){return C3.FetchOk(url).then(response=>response.arrayBuffer())};C3.FetchImage=function FetchImage(url){return new Promise((resolve,reject)=>{const img=new Image;
img.onload=()=>resolve(img);img.onerror=err=>reject(err);img.src=url})};C3.BlobToArrayBuffer=function BlobToArrayBuffer(blob){if(typeof blob["arrayBuffer"]==="function")return blob["arrayBuffer"]();else return new Promise((resolve,reject)=>{const fileReader=new FileReader;fileReader.onload=()=>resolve(fileReader.result);fileReader.onerror=()=>reject(fileReader.error);fileReader.readAsArrayBuffer(blob)})};C3.BlobToString=function BlobToString(blob){if(typeof blob["text"]==="function")return blob["text"]();
else return new Promise((resolve,reject)=>{const fileReader=new FileReader;fileReader.onload=()=>resolve(fileReader.result);fileReader.onerror=()=>reject(fileReader.error);fileReader.readAsText(blob)})};C3.BlobToJson=function BlobToJson(blob){return C3.BlobToString(blob).then(text=>JSON.parse(text))};C3.BlobToImage=async function BlobToImage(blob,decodeImage){let blobUrl=URL.createObjectURL(blob);try{const img=await C3.FetchImage(blobUrl);URL.revokeObjectURL(blobUrl);blobUrl="";if(decodeImage&&typeof img["decode"]===
"function")await img["decode"]();return img}finally{if(blobUrl)URL.revokeObjectURL(blobUrl)}};C3.CreateCanvas=function CreateCanvas(width,height){if(typeof document!=="undefined"&&typeof document.createElement==="function"){const canvas=document.createElement("canvas");canvas.width=width;canvas.height=height;return canvas}else return new OffscreenCanvas(width,height)};C3.CanvasToBlob=function CanvasToBlob(canvas,type,quality){if(typeof quality!=="number")quality=1;type=type||"image/png";quality=C3.clamp(quality,
0,1);if(canvas.toBlob)return new Promise(resolve=>canvas.toBlob(resolve,type,quality));else if(canvas["convertToBlob"])return canvas["convertToBlob"]({"type":type,"quality":quality});else return C3.Asyncify(()=>C3.CanvasToBlobSync(canvas,type,quality))};C3.CanvasToBlobSync=function CanvasToBlobSync(canvas,type,quality){if(typeof quality!=="number")quality=1;type=type||"image/png";quality=C3.clamp(quality,0,1);return C3.DataURIToBinaryBlobSync(canvas.toDataURL(type,quality))};C3.DataURIToBinaryBlobSync=
function DataURIToBinaryBlobSync(datauri){const o=C3.ParseDataURI(datauri);return C3.BinaryStringToBlob(o.data,o.mime_type)};C3.ParseDataURI=function ParseDataURI(datauri){if(datauri.substr(0,5)!=="data:")throw new URIError("expected data: uri");let comma=datauri.indexOf(",");if(comma<0)throw new URIError("expected comma in data: uri");let typepart=datauri.substring(5,comma);let datapart=datauri.substring(comma+1);let typearr=typepart.split(";");let mimetype=typearr[0]||"";let encoding1=typearr[1];
let encoding2=typearr[2];let decodeddata;if(encoding1==="base64"||encoding2==="base64")decodeddata=atob(datapart);else decodeddata=decodeURIComponent(datapart);return{mime_type:mimetype,data:decodeddata}};C3.BinaryStringToBlob=function BinaryStringToBlob(binstr,mime_type){let len=binstr.length;let len32=len>>2;let a8=new Uint8Array(len);let a32=new Uint32Array(a8.buffer,0,len32);let i,j;for(i=0,j=0;i<len32;++i)a32[i]=binstr.charCodeAt(j++)|binstr.charCodeAt(j++)<<8|binstr.charCodeAt(j++)<<16|binstr.charCodeAt(j++)<<
24;let tailLength=len&3;while(tailLength--){a8[j]=binstr.charCodeAt(j);++j}if(mime_type)return new Blob([a8],{"type":mime_type});else return new Blob([a8])};C3.DrawableToBlob=function DrawableToBlob(drawable,type,quality){const canvas=C3.CreateCanvas(drawable.width,drawable.height);const ctx=canvas.getContext("2d");ctx.drawImage(drawable,0,0);return C3.CanvasToBlob(canvas,type,quality)};C3.ImageDataToBlobSync=function ImageDataToBlobSync(imageData,type,quality){const canvas=C3.CreateCanvas(imageData.width,
imageData.height);const ctx=canvas.getContext("2d");ctx.putImageData(imageData,0,0);return C3.CanvasToBlobSync(canvas,type,quality)};C3.ImageDataToBlob=function ImageDataToBlob(imageData,type,quality){if(C3.Supports.ImageBitmapOptions)return createImageBitmap(imageData,{"premultiplyAlpha":"none"}).then(imageBitmap=>C3.DrawableToBlob(imageBitmap,type,quality));else if(C3.Supports.ImageBitmap)return createImageBitmap(imageData).then(imageBitmap=>C3.DrawableToBlob(imageBitmap,type,quality));else{const canvas=
C3.CreateCanvas(imageData.width,imageData.height);const ctx=canvas.getContext("2d");ctx.putImageData(imageData,0,0);return C3.CanvasToBlob(canvas,type,quality)}};C3.CopySet=function CopySet(dest,src){dest.clear();for(const x of src)dest.add(x)};C3.MapToObject=function MapToObject(map){const ret=Object.create(null);for(const [k,v]of map.entries())ret[k]=v;return ret};C3.ObjectToMap=function ObjectToMap(o,map){map.clear();for(const [k,v]of Object.entries(o))map.set(k,v)};C3.ToSuperJSON=function ToSuperJSON(v){if(typeof v===
"object"&&v!==null)if(v instanceof Set)return{"_c3type_":"set","data":[...v].map(o=>ToSuperJSON(o))};else if(v instanceof Map)return{"_c3type_":"map","data":[...v].map(pair=>[pair[0],ToSuperJSON(pair[1])])};else{const ret=Object.create(null);for(const [key,value]of Object.entries(v))ret[key]=ToSuperJSON(value);return ret}return v};C3.FromSuperJSON=function FromSuperJSON(v){if(typeof v==="object"&v!==null)if(v["_c3type_"]==="set")return new Set(v["data"].map(o=>FromSuperJSON(o)));else if(v["_c3type_"]===
"map")return new Map(v["data"].map(pair=>[pair[0],FromSuperJSON(pair[1])]));else{const ret=Object.create(null);for(const [key,value]of Object.entries(v))ret[key]=FromSuperJSON(value);return ret}return v};C3.CSSToCamelCase=function(str){let ret="";let isAfterHyphen=false;for(const ch of str)if(ch==="-")isAfterHyphen=true;else if(isAfterHyphen){ret+=ch.toUpperCase();isAfterHyphen=false}else ret+=ch;return ret};C3.IsIterator=function(o){return typeof o==="object"&&typeof o.next==="function"};C3.MakeFilledArray=
function MakeFilledArray(len,data){const ret=[];if(typeof data==="function")for(let i=0;i<len;++i)ret.push(data());else for(let i=0;i<len;++i)ret.push(data);return ret}};


// ../lib/misc/color.js
'use strict';{const C3=self.C3;const HSL_TEST=/([0-9.]+),([0-9.]+)%?,([0-9.]+)%?/i;const HSLA_TEST=/([0-9.]+),([0-9.]+)%?,([0-9.]+)%?,([0-9.])/i;function padTwoDigits(str){if(str.length===0)return"00";else if(str.length===1)return"0"+str;else return str}function hueToRGB(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p}C3.Color=class Color{constructor(r,g,b,a){this._r=NaN;this._g=NaN;this._b=NaN;this._a=NaN;this._r=0;this._g=0;
this._b=0;this._a=0;if(r instanceof C3.Color)this.set(r);else this.setRgba(r||0,g||0,b||0,a||0)}setRgb(r,g,b){this._r=+r;this._g=+g;this._b=+b;this.clamp();return this}setRgba(r,g,b,a){this._r=+r;this._g=+g;this._b=+b;this._a=+a;this.clamp();return this}set(c){this._r=c._r;this._g=c._g;this._b=c._b;this._a=c._a;return this}copy(c){return this.set(c)}add(c){this._r+=c._r;this._g+=c._g;this._b+=c._b;this._a+=c._a;this.clamp()}addRgb(r,g,b,a=0){this._r+=+r;this._g+=+g;this._b+=+b;this._a+=+a;this.clamp()}diff(c){this.setR(Math.max(this._r,
c._r)-Math.min(this._r,c._r));this.setG(Math.max(this._g,c._g)-Math.min(this._g,c._g));this.setB(Math.max(this._b,c._b)-Math.min(this._b,c._b));this.setA(Math.max(this._a,c._a)-Math.min(this._a,c._a));this.clamp()}copyRgb(c){this._r=c._r;this._g=c._g;this._b=c._b}setR(r){this._r=C3.clamp(+r,0,1)}getR(){return this._r}setG(g){this._g=C3.clamp(+g,0,1)}getG(){return this._g}setB(b){this._b=C3.clamp(+b,0,1)}getB(){return this._b}setA(a){this._a=C3.clamp(+a,0,1)}getA(){return this._a}clone(){return C3.New(C3.Color,
this._r,this._g,this._b,this._a)}toArray(){return[this._r,this._g,this._b,this._a]}toTypedArray(){return new Float64Array(this.toArray())}writeToTypedArray(ta,i){ta[i++]=this._r;ta[i++]=this._g;ta[i++]=this._b;ta[i]=this._a}equals(c){return this._r===c._r&&this._g===c._g&&this._b===c._b&&this._a===c._a}equalsIgnoringAlpha(c){return this._r===c._r&&this._g===c._g&&this._b===c._b}equalsRgb(r,g,b){return this._r===r&&this._g===g&&this._b===b}equalsRgba(r,g,b,a){return this._r===r&&this._g===g&&this._b===
b&&this._a===a}multiply(c){this._r*=c._r;this._g*=c._g;this._b*=c._b;this._a*=c._a}multiplyAlpha(a){this._r*=a;this._g*=a;this._b*=a;this._a*=a}premultiply(){this._r*=this._a;this._g*=this._a;this._b*=this._a;return this}unpremultiply(){this._r/=this._a;this._g/=this._a;this._b/=this._a;return this}clamp(){this._r=C3.clamp(this._r,0,1);this._g=C3.clamp(this._g,0,1);this._b=C3.clamp(this._b,0,1);this._a=C3.clamp(this._a,0,1);return this}setFromRgbValue(rgb){this._r=C3.GetRValue(rgb);this._g=C3.GetGValue(rgb);
this._b=C3.GetBValue(rgb);this._a=C3.GetAValue(rgb)}getCssRgb(_r,_g,_b){const r=C3.IsFiniteNumber(_r)?_r:this.getR();const g=C3.IsFiniteNumber(_g)?_g:this.getG();const b=C3.IsFiniteNumber(_b)?_b:this.getB();return`rgb(${r*100}%, ${g*100}%, ${b*100}%)`}getCssRgba(_r,_g,_b,_a){const r=C3.IsFiniteNumber(_r)?_r:this.getR();const g=C3.IsFiniteNumber(_g)?_g:this.getG();const b=C3.IsFiniteNumber(_b)?_b:this.getB();const a=C3.IsFiniteNumber(_a)?_a:this.getA();return`rgba(${r*100}%, ${g*100}%, ${b*100}%, ${a})`}toHexString(){const rh=
Math.round(this.getR()*255);const gh=Math.round(this.getG()*255);const bh=Math.round(this.getB()*255);return"#"+padTwoDigits(rh.toString(16))+padTwoDigits(gh.toString(16))+padTwoDigits(bh.toString(16))}parseHexString(str){if(typeof str!=="string")return false;str=str.trim();if(str.charAt(0)==="#")str=str.substr(1);let rv;let gv;let bv;if(str.length===3){rv=parseInt(str[0],16)/15;gv=parseInt(str[1],16)/15;bv=parseInt(str[2],16)/15}else if(str.length===6){rv=parseInt(str.substr(0,2),16)/255;gv=parseInt(str.substr(2,
2),16)/255;bv=parseInt(str.substr(4,2),16)/255}else return false;if(isFinite(rv))this.setR(rv);if(isFinite(gv))this.setG(gv);if(isFinite(bv))this.setB(bv);this.setA(1);return true}toCommaSeparatedRgb(){const rv=Math.round(this.getR()*255);const gv=Math.round(this.getG()*255);const bv=Math.round(this.getB()*255);return`${rv}, ${gv}, ${bv}`}toRgbArray(){const rv=Math.round(this.getR()*255);const gv=Math.round(this.getG()*255);const bv=Math.round(this.getB()*255);return[rv,gv,bv]}parseCommaSeparatedRgb(str){if(typeof str!==
"string")return false;str=str.replace(/^rgb\(|\)|%/,"");const arr=str.split(",");if(arr.length<3)return false;const rv=parseInt(arr[0].trim(),10)/255;const gv=parseInt(arr[1].trim(),10)/255;const bv=parseInt(arr[2].trim(),10)/255;if(isFinite(rv))this.setR(rv);if(isFinite(gv))this.setG(gv);if(isFinite(bv))this.setB(bv);this.setA(1);return true}parseCommaSeparatedPercentageRgb(str){if(typeof str!=="string")return false;str=str.replace(/^rgb\(|\)|%/,"");const arr=str.split(",");if(arr.length<3)return false;
const rv=parseInt(arr[0].trim(),10)/100;const gv=parseInt(arr[1].trim(),10)/100;const bv=parseInt(arr[2].trim(),10)/100;if(isFinite(rv))this.setR(rv);if(isFinite(gv))this.setG(gv);if(isFinite(bv))this.setB(bv);this.setA(1);return true}parseCommaSeparatedRgba(str){if(typeof str!=="string")return false;str=str.replace(/^rgba\(|\)|%/,"");const arr=str.split(",");if(arr.length<4)return false;const rv=parseInt(arr[0].trim(),10)/255;const gv=parseInt(arr[1].trim(),10)/255;const bv=parseInt(arr[2].trim(),
10)/255;const av=parseFloat(arr[3].trim());if(isFinite(rv))this.setR(rv);if(isFinite(gv))this.setG(gv);if(isFinite(bv))this.setB(bv);if(isFinite(av))this.setA(av);return true}parseCommaSeparatedPercentageRgba(str){if(typeof str!=="string")return false;str=str.replace(/^rgba\(|\)|%/,"");const arr=str.split(",");if(arr.length<4)return false;const rv=parseInt(arr[0].trim(),10)/100;const gv=parseInt(arr[1].trim(),10)/100;const bv=parseInt(arr[2].trim(),10)/100;const av=parseFloat(arr[3].trim());if(isFinite(rv))this.setR(rv);
if(isFinite(gv))this.setG(gv);if(isFinite(bv))this.setB(bv);if(isFinite(av))this.setA(av);return true}parseString(str){if(typeof str!=="string")return false;str=str.replace(/\s+/,"");if(str.includes(","))if(str.startsWith("rgb("))if(str.includes("%"))return this.parseCommaSeparatedPercentageRgb(str);else return this.parseCommaSeparatedRgb(str);else if(str.startsWith("rgba("))if(str.includes("%"))return this.parseCommaSeparatedPercentageRgba(str);else return this.parseCommaSeparatedRgba(str);else if(str.startsWith("hsl(")||
str.startsWith("hsla("))return this.parseHSLString(str);else{const components=str.split(",");if(str.includes("%")){if(components.length===3)return this.parseCommaSeparatedPercentageRgb(str);else if(components.length===4)return this.parseCommaSeparatedPercentageRgba(str);return false}else{if(components.length===3)return this.parseCommaSeparatedRgb(str);else if(components.length===4)return this.parseCommaSeparatedRgba(str);return false}}else return this.parseHexString(str)}toJSON(){return[this._r,this._g,
this._b,this._a]}setFromHSLA(h,s,l,a){let r;let g;let b;h%=360;s=C3.clamp(s,0,100);l=C3.clamp(l,0,100);a=C3.clamp(a,0,1);h/=360;s/=100;l/=100;if(s===0)r=g=b=l;else{const q=l<.5?l*(1+s):l+s-l*s;const p=2*l-q;r=hueToRGB(p,q,h+1/3);g=hueToRGB(p,q,h);b=hueToRGB(p,q,h-1/3)}this.setR(r);this.setG(g);this.setB(b);this.setA(a);return this}parseHSLString(str){const cleanString=str.replace(/ |hsl|hsla|\(|\)|;/gi,"");const hsl=HSL_TEST.exec(cleanString);const hsla=HSLA_TEST.exec(cleanString);if(hsl&&hsl.length===
4){this.setFromHSLA(+hsl[1],+hsl[2],+hsl[3],1);return true}else if(hsla&&hsla.length===5){this.setFromHSLA(+hsl[1],+hsl[2],+hsl[3],+hsl[4]);return true}return false}toHSLAString(){const r=this._r;const g=this._g;const b=this._b;const a=this._a;const h=C3.Color.GetHue(r,g,b);const s=C3.Color.GetSaturation(r,g,b);const l=C3.Color.GetLuminosity(r,g,b);return`hsla(${h}, ${s}%, ${l}%, ${a})`}toHSLAArray(){const r=this._r;const g=this._g;const b=this._b;return[C3.Color.GetHue(r,g,b),C3.Color.GetSaturation(r,
g,b),C3.Color.GetLuminosity(r,g,b),this._a]}setFromJSON(arr){if(!Array.isArray(arr))return;if(arr.length<3)return;this._r=arr[0];this._g=arr[1];this._b=arr[2];if(arr.length>=4)this._a=arr[3];else this._a=1}set r(r){this.setR(r)}get r(){return this.getR()}set g(g){this.setG(g)}get g(){return this.getG()}set b(b){this.setB(b)}get b(){return this.getB()}set a(a){this.setA(a)}get a(){return this.getA()}setAtIndex(i,v){switch(i){case 0:this.setR(v);break;case 1:this.setG(v);break;case 2:this.setB(v);break;
case 3:this.setA(v);break;default:throw new RangeError("invalid color index");}}getAtIndex(i){switch(i){case 0:return this.getR();case 1:return this.getG();case 2:return this.getB();case 3:return this.getA();default:throw new RangeError("invalid color index");}}static DiffChannel(channel1,channel2){return C3.clamp(Math.max(channel1,channel2)-Math.min(channel1,channel2),0,1)}static Diff(c1,c2){const ret=new C3.Color;ret.setR(Math.max(c1._r,c2._r)-Math.min(c1._r,c2._r));ret.setG(Math.max(c1._g,c2._g)-
Math.min(c1._g,c2._g));ret.setB(Math.max(c1._b,c2._b)-Math.min(c1._b,c2._b));ret.setA(Math.max(c1._a,c2._a)-Math.min(c1._a,c2._a));return ret}static DiffNoAlpha(c1,c2){const ret=new C3.Color(0,0,0,1);ret.setR(Math.max(c1._r,c2._r)-Math.min(c1._r,c2._r));ret.setG(Math.max(c1._g,c2._g)-Math.min(c1._g,c2._g));ret.setB(Math.max(c1._b,c2._b)-Math.min(c1._b,c2._b));return ret}static GetHue(r,g,b){const max=Math.max(r,g,b);const min=Math.min(r,g,b);if(max===min)return 0;let h=0;switch(max){case r:h=(g-b)/
(max-min)+(g<b?6:0);break;case g:h=(b-r)/(max-min)+2;break;case b:h=(r-g)/(max-min)+4;break}return Math.round(h/6*360)}static GetSaturation(r,g,b){const max=Math.max(r,g,b);const min=Math.min(r,g,b);if(max===min)return 0;const l=(max+min)/2;const d=max-min;const s=l>.5?d/(2-max-min):d/(max+min);return Math.round(s*100)}static GetLuminosity(r,g,b){const max=Math.max(r,g,b);const min=Math.min(r,g,b);const l=(max+min)/2;if(!max)return 0;return Math.round(l*100)}};C3.Color.White=Object.freeze(C3.New(C3.Color,
1,1,1,1));C3.Color.Black=Object.freeze(C3.New(C3.Color,0,0,0,1));C3.Color.TransparentBlack=Object.freeze(C3.New(C3.Color,0,0,0,0))};


// ../lib/misc/vector2.js
'use strict';{const C3=self.C3;C3.Vector2=class Vector2{constructor(x,y){this._x=0;this._y=0;if(x instanceof C3.Vector2)this.copy(x);else this.set(x||0,y||0)}set(x,y){this._x=+x;this._y=+y}copy(v){this._x=v._x;this._y=v._y}equals(v){return this._x===v._x&&this._y===v._y}setX(x){this._x=+x}getX(){return this._x}setY(y){this._y=+y}getY(){return this._y}toArray(){return[this._x,this._y]}toTypedArray(){return new Float64Array(this.toArray())}writeToTypedArray(ta,i){ta[i++]=this._x;ta[i]=this._y}offset(x,
y){this._x+=+x;this._y+=+y}scale(x,y){this._x*=x;this._y*=y}divide(x,y){this._x/=x;this._y/=y}round(){this._x=Math.round(this._x);this._y=Math.round(this._y)}floor(){this._x=Math.floor(this._x);this._y=Math.floor(this._y)}ceil(){this._x=Math.ceil(this._x);this._y=Math.ceil(this._y)}angle(){return C3.angleTo(0,0,this._x,this._y)}lengthSquared(){return this._x*this._x+this._y*this._y}length(){return Math.sqrt(this.lengthSquared())}rotatePrecalc(sin_a,cos_a){const temp=this._x*cos_a-this._y*sin_a;this._y=
this._y*cos_a+this._x*sin_a;this._x=temp}rotate(a){if(a===0)return;this.rotatePrecalc(Math.sin(a),Math.cos(a))}rotateAbout(a,x,y){if(a===0||x===this._x&&y===this._y)return;this._x-=x;this._y-=y;this.rotatePrecalc(Math.sin(a),Math.cos(a));this._x+=+x;this._y+=+y}move(a,dist){if(dist===0)return;this._x+=Math.cos(a)*dist;this._y+=Math.sin(a)*dist}normalize(){const m=this.length();if(m!==0&&m!==1){this._x/=m;this._y/=m}}clamp(lower,upper){this._x=C3.clamp(this._x,lower,upper);this._y=C3.clamp(this._y,
lower,upper)}}};


// ../lib/misc/rect.js
'use strict';{const C3=self.C3;C3.Rect=class Rect{constructor(left,top,right,bottom){this._left=NaN;this._top=NaN;this._right=NaN;this._bottom=NaN;this._left=0;this._top=0;this._right=0;this._bottom=0;if(left instanceof C3.Rect)this.copy(left);else this.set(left||0,top||0,right||0,bottom||0)}set(left,top,right,bottom){this._left=+left;this._top=+top;this._right=+right;this._bottom=+bottom}setWH(left,top,width,height){left=+left;top=+top;this._left=left;this._top=top;this._right=left+ +width;this._bottom=
top+ +height}copy(rect){this._left=+rect._left;this._top=+rect._top;this._right=+rect._right;this._bottom=+rect._bottom}clone(){return new C3.Rect(this._left,this._top,this._right,this._bottom)}static Merge(first,second){const ret=new C3.Rect;ret.setLeft(Math.min(first._left,second._left));ret.setTop(Math.min(first._top,second._top));ret.setRight(Math.max(first._right,second._right));ret.setBottom(Math.max(first._bottom,second._bottom));return ret}static FromObject(o){return new C3.Rect(o.left,o.top,
o.right,o.bottom)}equals(rect){return this._left===rect._left&&this._top===rect._top&&this._right===rect._right&&this._bottom===rect._bottom}setLeft(l){this._left=+l}getLeft(){return this._left}setTop(t){this._top=+t}getTop(){return this._top}setRight(r){this._right=+r}getRight(){return this._right}setBottom(b){this._bottom=+b}getBottom(){return this._bottom}toArray(){return[this._left,this._top,this._right,this._bottom]}toTypedArray(){return new Float64Array(this.toArray())}toDOMRect(){return new DOMRect(this._left,
this._top,this.width(),this.height())}writeToTypedArray(ta,i){ta[i++]=this._left;ta[i++]=this._top;ta[i++]=this._right;ta[i]=this._bottom}writeAsQuadToTypedArray(ta,i){ta[i++]=this._left;ta[i++]=this._top;ta[i++]=this._right;ta[i++]=this._top;ta[i++]=this._right;ta[i++]=this._bottom;ta[i++]=this._left;ta[i]=this._bottom}width(){return this._right-this._left}height(){return this._bottom-this._top}midX(){return(this._left+this._right)/2}midY(){return(this._top+this._bottom)/2}offset(x,y){x=+x;y=+y;
this._left+=x;this._top+=y;this._right+=x;this._bottom+=y}offsetLeft(x){this._left+=+x}offsetTop(y){this._top+=+y}offsetRight(x){this._right+=+x}offsetBottom(y){this._bottom+=+y}toSquare(axis){if(axis!=="x")throw new Error("invalid axis, only 'x' supported");if(this._top<this._bottom)if(this._left<this._right)this._bottom=this._top+this.width();else this._bottom=this._top-this.width();else if(this._left<this._right)this._bottom=this._top-this.width();else this._bottom=this._top+this.width()}inflate(x,
y){x=+x;y=+y;this._left-=x;this._top-=y;this._right+=x;this._bottom+=y}deflate(x,y){x=+x;y=+y;this._left+=x;this._top+=y;this._right-=x;this._bottom-=y}multiply(x,y){this._left*=x;this._top*=y;this._right*=x;this._bottom*=y}divide(x,y){this._left/=x;this._top/=y;this._right/=x;this._bottom/=y}mirrorAround(origin){this._left=+origin-this._left;this._right=+origin-this._right}flipAround(origin){this._top=+origin-this._top;this._bottom=+origin-this._bottom}swapLeftRight(){const temp=this._left;this._left=
this._right;this._right=temp}swapTopBottom(){const temp=this._top;this._top=this._bottom;this._bottom=temp}shuntY(h){const top=this._top;this._top=+h-this._bottom;this._bottom=+h-top}round(){this._left=Math.round(this._left);this._top=Math.round(this._top);this._right=Math.round(this._right);this._bottom=Math.round(this._bottom)}roundInner(){this._left=Math.ceil(this._left);this._top=Math.ceil(this._top);this._right=Math.floor(this._right);this._bottom=Math.floor(this._bottom)}roundOuter(){this._left=
Math.floor(this._left);this._top=Math.floor(this._top);this._right=Math.ceil(this._right);this._bottom=Math.ceil(this._bottom)}floor(){this._left=Math.floor(this._left);this._top=Math.floor(this._top);this._right=Math.floor(this._right);this._bottom=Math.floor(this._bottom)}ceil(){this._left=Math.ceil(this._left);this._top=Math.ceil(this._top);this._right=Math.ceil(this._right);this._bottom=Math.ceil(this._bottom)}clamp(l,t,r,b){if(this._left<l)this._left=+l;if(this._top<t)this._top=+t;if(this._right>
r)this._right=+r;if(this._bottom>b)this._bottom=+b}clampFlipped(l,t,r,b){if(this._left<l)this._left=+l;if(this._top>t)this._top=+t;if(this._right>r)this._right=+r;if(this._bottom<b)this._bottom=+b}normalize(){if(this._left>this._right)this.swapLeftRight();if(this._top>this._bottom)this.swapTopBottom()}intersectsRect(rect){return!(rect._right<this._left||rect._bottom<this._top||rect._left>this._right||rect._top>this._bottom)}intersectsRectOffset(rect,x,y){return!(rect._right+x<this._left||rect._bottom+
y<this._top||rect._left+x>this._right||rect._top+y>this._bottom)}containsPoint(x,y){return x>=this._left&&x<=this._right&&y>=this._top&&y<=this._bottom}containsRect(rect){return rect._left>=this._left&&rect._top>=this._top&&rect._right<=this._right&&rect._bottom<=this._bottom}expandToContain(rect){if(rect._left<this._left)this._left=+rect._left;if(rect._top<this._top)this._top=+rect._top;if(rect._right>this._right)this._right=+rect._right;if(rect._bottom>this._bottom)this._bottom=+rect._bottom}lerpInto(rect){this._left=
C3.lerp(rect._left,rect._right,this._left);this._top=C3.lerp(rect._top,rect._bottom,this._top);this._right=C3.lerp(rect._left,rect._right,this._right);this._bottom=C3.lerp(rect._top,rect._bottom,this._bottom)}}};


// ../lib/misc/quad.js
'use strict';{const C3=self.C3;C3.Quad=class Quad{constructor(tlx,tly,trx,try_,brx,bry,blx,bly){this._tlx=NaN;this._tly=NaN;this._trx=NaN;this._try=NaN;this._brx=NaN;this._bry=NaN;this._blx=NaN;this._bly=NaN;this._tlx=0;this._tly=0;this._trx=0;this._try=0;this._brx=0;this._bry=0;this._blx=0;this._bly=0;if(tlx instanceof C3.Quad)this.copy(tlx);else this.set(tlx||0,tly||0,trx||0,try_||0,brx||0,bry||0,blx||0,bly||0)}set(tlx,tly,trx,try_,brx,bry,blx,bly){this._tlx=+tlx;this._tly=+tly;this._trx=+trx;this._try=
+try_;this._brx=+brx;this._bry=+bry;this._blx=+blx;this._bly=+bly}setRect(left,top,right,bottom){this.set(left,top,right,top,right,bottom,left,bottom)}copy(q){this._tlx=q._tlx;this._tly=q._tly;this._trx=q._trx;this._try=q._try;this._brx=q._brx;this._bry=q._bry;this._blx=q._blx;this._bly=q._bly}equals(q){return this._tlx===q._tlx&&this._tly===q._tly&&this._trx===q._trx&&this._try===q._try&&this._brx===q._brx&&this._bry===q._bry&&this._blx===q._blx&&this._bly===q._bly}setTlx(v){this._tlx=+v}getTlx(){return this._tlx}setTly(v){this._tly=
+v}getTly(){return this._tly}setTrx(v){this._trx=+v}getTrx(){return this._trx}setTry(v){this._try=+v}getTry(){return this._try}setBrx(v){this._brx=+v}getBrx(){return this._brx}setBry(v){this._bry=+v}getBry(){return this._bry}setBlx(v){this._blx=+v}getBlx(){return this._blx}setBly(v){this._bly=+v}getBly(){return this._bly}toDOMQuad(){return new DOMQuad(new DOMPoint(this._tlx,this._tly),new DOMPoint(this._trx,this._try),new DOMPoint(this._brx,this._bry),new DOMPoint(this._blx,this._bly))}toArray(){return[this._tlx,
this._tly,this._trx,this._try,this._brx,this._bry,this._blx,this._bly]}toTypedArray(){return new Float64Array(this.toArray())}writeToTypedArray(ta,i){ta[i++]=this._tlx;ta[i++]=this._tly;ta[i++]=this._trx;ta[i++]=this._try;ta[i++]=this._brx;ta[i++]=this._bry;ta[i++]=this._blx;ta[i]=this._bly}writeToTypedArray3D(ta,i,z){ta[i++]=this._tlx;ta[i++]=this._tly;ta[i++]=z;ta[i++]=this._trx;ta[i++]=this._try;ta[i++]=z;ta[i++]=this._brx;ta[i++]=this._bry;ta[i++]=z;ta[i++]=this._blx;ta[i++]=this._bly;ta[i]=z}offset(x,
y){x=+x;y=+y;this._tlx+=x;this._tly+=y;this._trx+=x;this._try+=y;this._brx+=x;this._bry+=y;this._blx+=x;this._bly+=y}round(){this._tlx=Math.round(this._tlx);this._tly=Math.round(this._tly);this._trx=Math.round(this._trx);this._try=Math.round(this._try);this._brx=Math.round(this._brx);this._bry=Math.round(this._bry);this._blx=Math.round(this._blx);this._bly=Math.round(this._bly)}floor(){this._tlx=Math.floor(this._tlx);this._tly=Math.floor(this._tly);this._trx=Math.floor(this._trx);this._try=Math.floor(this._try);
this._brx=Math.floor(this._brx);this._bry=Math.floor(this._bry);this._blx=Math.floor(this._blx);this._bly=Math.floor(this._bly)}ceil(){this._tlx=Math.ceil(this._tlx);this._tly=Math.ceil(this._tly);this._trx=Math.ceil(this._trx);this._try=Math.ceil(this._try);this._brx=Math.ceil(this._brx);this._bry=Math.ceil(this._bry);this._blx=Math.ceil(this._blx);this._bly=Math.ceil(this._bly)}setFromRect(rect){this._tlx=rect._left;this._tly=rect._top;this._trx=rect._right;this._try=rect._top;this._brx=rect._right;
this._bry=rect._bottom;this._blx=rect._left;this._bly=rect._bottom}setFromRotatedRect(rect,a){if(a===0)this.setFromRect(rect);else this.setFromRotatedRectPrecalc(rect,Math.sin(a),Math.cos(a))}setFromRotatedRectPrecalc(rect,sin_a,cos_a){const left_sin_a=rect._left*sin_a;const top_sin_a=rect._top*sin_a;const right_sin_a=rect._right*sin_a;const bottom_sin_a=rect._bottom*sin_a;const left_cos_a=rect._left*cos_a;const top_cos_a=rect._top*cos_a;const right_cos_a=rect._right*cos_a;const bottom_cos_a=rect._bottom*
cos_a;this._tlx=left_cos_a-top_sin_a;this._tly=top_cos_a+left_sin_a;this._trx=right_cos_a-top_sin_a;this._try=top_cos_a+right_sin_a;this._brx=right_cos_a-bottom_sin_a;this._bry=bottom_cos_a+right_sin_a;this._blx=left_cos_a-bottom_sin_a;this._bly=bottom_cos_a+left_sin_a}getBoundingBox(rect){rect.set(Math.min(this._tlx,this._trx,this._brx,this._blx),Math.min(this._tly,this._try,this._bry,this._bly),Math.max(this._tlx,this._trx,this._brx,this._blx),Math.max(this._tly,this._try,this._bry,this._bly))}containsPoint(x,
y){let v0x=this._trx-this._tlx;let v0y=this._try-this._tly;const v1x=this._brx-this._tlx;const v1y=this._bry-this._tly;const v2x=x-this._tlx;const v2y=y-this._tly;let dot00=v0x*v0x+v0y*v0y;let dot01=v0x*v1x+v0y*v1y;let dot02=v0x*v2x+v0y*v2y;const dot11=v1x*v1x+v1y*v1y;const dot12=v1x*v2x+v1y*v2y;let invDenom=1/(dot00*dot11-dot01*dot01);let u=(dot11*dot02-dot01*dot12)*invDenom;let v=(dot00*dot12-dot01*dot02)*invDenom;if(u>=0&&v>0&&u+v<1)return true;v0x=this._blx-this._tlx;v0y=this._bly-this._tly;dot00=
v0x*v0x+v0y*v0y;dot01=v0x*v1x+v0y*v1y;dot02=v0x*v2x+v0y*v2y;invDenom=1/(dot00*dot11-dot01*dot01);u=(dot11*dot02-dot01*dot12)*invDenom;v=(dot00*dot12-dot01*dot02)*invDenom;return u>=0&&v>0&&u+v<1}midX(){return(this._tlx+this._trx+this._brx+this._blx)/4}midY(){return(this._tly+this._try+this._bry+this._bly)/4}intersectsSegment(x1,y1,x2,y2){if(this.containsPoint(x1,y1)||this.containsPoint(x2,y2))return true;return C3.segmentIntersectsQuad(x1,y1,x2,y2,this)}intersectsQuad(rhs){let midX=rhs.midX();let midY=
rhs.midY();if(this.containsPoint(midX,midY))return true;midX=this.midX();midY=this.midY();if(rhs.containsPoint(midX,midY))return true;const tlx=this._tlx,tly=this._tly,trx=this._trx,try_=this._try,brx=this._brx,bry=this._bry,blx=this._blx,bly=this._bly;return C3.segmentIntersectsQuad(tlx,tly,trx,try_,rhs)||C3.segmentIntersectsQuad(trx,try_,brx,bry,rhs)||C3.segmentIntersectsQuad(brx,bry,blx,bly,rhs)||C3.segmentIntersectsQuad(blx,bly,tlx,tly,rhs)}mirror(){this._swap(0,2);this._swap(1,3);this._swap(6,
4);this._swap(7,5)}flip(){this._swap(0,6);this._swap(1,7);this._swap(2,4);this._swap(3,5)}diag(){this._swap(2,6);this._swap(3,7)}_swap(i,j){const tmp=this._getAtIndex(i);this._setAtIndex(i,this._getAtIndex(j));this._setAtIndex(j,tmp)}_getAtIndex(i){switch(i){case 0:return this._tlx;case 1:return this._tly;case 2:return this._trx;case 3:return this._try;case 4:return this._brx;case 5:return this._bry;case 6:return this._blx;case 7:return this._bly;default:throw new RangeError("invalid quad point index");
}}_setAtIndex(i,v){v=+v;switch(i){case 0:this._tlx=v;break;case 1:this._tly=v;break;case 2:this._trx=v;break;case 3:this._try=v;break;case 4:this._brx=v;break;case 5:this._bry=v;break;case 6:this._blx=v;break;case 7:this._bly=v;break;default:throw new RangeError("invalid quad point index");}}}};


// c3/lib/misc/collisionPoly.js
'use strict';{const C3=self.C3;const assert=self.assert;const DEFAULT_POLY_POINTS=[0,0,1,0,1,1,0,1];const tempQuad=C3.New(C3.Quad);C3.CollisionPoly=class CollisionPoly extends C3.DefendedBase{constructor(pointsArr,enabled=true){super();if(!pointsArr)pointsArr=DEFAULT_POLY_POINTS;this._ptsArr=Float64Array.from(pointsArr);this._bbox=new C3.Rect;this._isBboxChanged=true;this._enabled=enabled}Release(){}pointsArr(){return this._ptsArr}pointCount(){return this._ptsArr.length/2}setPoints(pointsArr){if(this._ptsArr.length===
pointsArr.length)this._ptsArr.set(pointsArr);else this._ptsArr=Float64Array.from(pointsArr);this._isBboxChanged=true}setDefaultPoints(){this.setPoints(DEFAULT_POLY_POINTS)}copy(poly){this.setPoints(poly._ptsArr)}setBboxChanged(){this._isBboxChanged=true}_updateBbox(){if(!this._isBboxChanged)return;const ptsArr=this._ptsArr;let left=ptsArr[0];let top=ptsArr[1];let right=left;let bottom=top;for(let i=0,len=ptsArr.length;i<len;i+=2){const x=ptsArr[i];const y=ptsArr[i+1];if(x<left)left=x;if(x>right)right=
x;if(y<top)top=y;if(y>bottom)bottom=y}this._bbox.set(left,top,right,bottom);this._isBboxChanged=false}setFromRect(rc,offX,offY){let ptsArr=this._ptsArr;if(ptsArr.length!==8){ptsArr=new Float64Array(8);this._ptsArr=ptsArr}ptsArr[0]=rc.getLeft()-offX;ptsArr[1]=rc.getTop()-offY;ptsArr[2]=rc.getRight()-offX;ptsArr[3]=rc.getTop()-offY;ptsArr[4]=rc.getRight()-offX;ptsArr[5]=rc.getBottom()-offY;ptsArr[6]=rc.getLeft()-offX;ptsArr[7]=rc.getBottom()-offY;this._bbox.copy(rc);if(offX!==0||offY!==0)this._bbox.offset(-offX,
-offY);this._isBboxChanged=false}setFromQuad(q,offX,offY){tempQuad.copy(q);tempQuad.offset(offX,offY);this.setPoints(tempQuad.toArray());this._isBboxChanged=true}transform(w,h,a){let sina=0;let cosa=1;if(a!==0){sina=Math.sin(a);cosa=Math.cos(a)}this.transformPrecalc(w,h,sina,cosa)}transformPrecalc(w,h,sina,cosa){const ptsArr=this._ptsArr;for(let i=0,len=ptsArr.length;i<len;i+=2){const j=i+1;const x=ptsArr[i]*w;const y=ptsArr[j]*h;ptsArr[i]=x*cosa-y*sina;ptsArr[j]=y*cosa+x*sina}this._isBboxChanged=
true}offset(x,y){const ptsArr=this._ptsArr;for(let i=0,len=ptsArr.length;i<len;i+=2){ptsArr[i]+=x;ptsArr[i+1]+=y}}containsPoint(a2x,a2y){const ptsArr=this._ptsArr;if(a2x===ptsArr[0]&&a2y===ptsArr[1])return true;this._updateBbox();const bbox=this._bbox;const a1x=bbox.getLeft()-110;const a1y=bbox.getTop()-101;const a3x=bbox.getRight()+131;const a3y=bbox.getBottom()+120;let minAx12=0;let minAy12=0;let maxAx12=0;let maxAy12=0;let minAx32=0;let minAy32=0;let maxAx32=0;let maxAy32=0;if(a1x<a2x){minAx12=
a1x;maxAx12=a2x}else{minAx12=a2x;maxAx12=a1x}if(a1y<a2y){minAy12=a1y;maxAy12=a2y}else{minAy12=a2y;maxAy12=a1y}if(a3x<a2x){minAx32=a3x;maxAx32=a2x}else{minAx32=a2x;maxAx32=a3x}if(a3y<a2y){minAy32=a3y;maxAy32=a2y}else{minAy32=a2y;maxAy32=a3y}let count1=0;let count2=0;for(let i=0,len=ptsArr.length;i<len;i+=2){const j=(i+2)%len;const b1x=ptsArr[i];const b1y=ptsArr[i+1];const b2x=ptsArr[j];const b2y=ptsArr[j+1];if(C3.segmentsIntersectPreCalc(a1x,a1y,a2x,a2y,minAx12,maxAx12,minAy12,maxAy12,b1x,b1y,b2x,
b2y))++count1;if(C3.segmentsIntersectPreCalc(a3x,a3y,a2x,a2y,minAx32,maxAx32,minAy32,maxAy32,b1x,b1y,b2x,b2y))++count2}return count1%2===1||count2%2===1}intersectsPoly(poly,offX,offY){const rPts=poly._ptsArr;const lPts=this._ptsArr;if(this.containsPoint(rPts[0]+offX,rPts[1]+offY))return true;if(poly.containsPoint(lPts[0]-offX,lPts[1]-offY))return true;for(let i=0,leni=lPts.length;i<leni;i+=2){const j=(i+2)%leni;const a1x=lPts[i];const a1y=lPts[i+1];const a2x=lPts[j];const a2y=lPts[j+1];let minAx=
0;let minAy=0;let maxAx=0;let maxAy=0;if(a1x<a2x){minAx=a1x;maxAx=a2x}else{minAx=a2x;maxAx=a1x}if(a1y<a2y){minAy=a1y;maxAy=a2y}else{minAy=a2y;maxAy=a1y}for(let k=0,lenk=rPts.length;k<lenk;k+=2){const l=(k+2)%lenk;const b1x=rPts[k]+offX;const b1y=rPts[k+1]+offY;const b2x=rPts[l]+offX;const b2y=rPts[l+1]+offY;if(C3.segmentsIntersectPreCalc(a1x,a1y,a2x,a2y,minAx,maxAx,minAy,maxAy,b1x,b1y,b2x,b2y))return true}}return false}intersectsSegment(offX,offY,a1x,a1y,a2x,a2y){if(this.containsPoint(a1x-offX,a1y-
offY))return true;if(this.containsPoint(a2x-offX,a2y-offY))return true;let minAx=0;let minAy=0;let maxAx=0;let maxAy=0;if(a1x<a2x){minAx=a1x;maxAx=a2x}else{minAx=a2x;maxAx=a1x}if(a1y<a2y){minAy=a1y;maxAy=a2y}else{minAy=a2y;maxAy=a1y}const ptsArr=this._ptsArr;for(let i=0,len=ptsArr.length;i<len;i+=2){const j=(i+2)%len;const b1x=ptsArr[i]+offX;const b1y=ptsArr[i+1]+offY;const b2x=ptsArr[j]+offX;const b2y=ptsArr[j+1]+offY;if(C3.segmentsIntersectPreCalc(a1x,a1y,a2x,a2y,minAx,maxAx,minAy,maxAy,b1x,b1y,
b2x,b2y))return true}return false}mirror(px){const ptsArr=this._ptsArr;for(let i=0,len=ptsArr.length;i<len;i+=2)ptsArr[i]=px*2-ptsArr[i];this._isBboxChanged=true}flip(py){const ptsArr=this._ptsArr;for(let i=0,len=ptsArr.length;i<len;i+=2){const j=i+1;ptsArr[j]=py*2-ptsArr[j]}this._isBboxChanged=true}diag(){const ptsArr=this._ptsArr;for(let i=0,len=ptsArr.length;i<len;i+=2){const j=i+1;const temp=ptsArr[i];ptsArr[i]=ptsArr[j];ptsArr[j]=temp}this._isBboxChanged=true}GetMidX(){const ptsArr=this._ptsArr;
let ret=0;for(let i=0,len=ptsArr.length;i<len;i+=2)ret+=ptsArr[i];return ret/this.pointCount()}GetMidY(){const ptsArr=this._ptsArr;let ret=0;for(let i=0,len=ptsArr.length;i<len;i+=2)ret+=ptsArr[i+1];return ret/this.pointCount()}GetPointsArray(){return this._ptsArr}GetPointCount(){return this.pointCount()}IsEnabled(){return this._enabled}}};


// c3/lib/misc/pairMap.js
'use strict';{const C3=self.C3;C3.PairMap=class PairMap extends C3.DefendedBase{constructor(iterable){super();this._firstMap=new Map;if(iterable)for(const [x,y,value]of iterable)this.Set(x,y,value)}Release(){this.Clear();this._firstMap=null}Clear(){const firstMap=this._firstMap;for(const secondMap of firstMap.values())secondMap.clear();firstMap.clear()}Set(x,y,value){const firstMap=this._firstMap;let secondMap=firstMap.get(x);if(!secondMap){secondMap=new Map;firstMap.set(x,secondMap)}secondMap.set(y,
value)}Get(x,y){const secondMap=this._firstMap.get(x);if(!secondMap)return secondMap;return secondMap.get(y)}Has(x,y){const secondMap=this._firstMap.get(x);if(!secondMap)return false;return secondMap.has(y)}Delete(x,y){const firstMap=this._firstMap;const secondMap=firstMap.get(x);if(!secondMap)return false;const ret=secondMap.delete(y);if(ret&&secondMap.size===0)firstMap.delete(x);return ret}DeleteEither(k){const firstMap=this._firstMap;const secondMap=firstMap.get(k);if(secondMap){secondMap.clear();
firstMap.delete(k)}for(const [x,secondMap]of firstMap.entries())if(secondMap.delete(k)&&secondMap.size===0)firstMap.delete(x)}GetSize(){let ret=0;for(const secondMap of this._firstMap.values())ret+=secondMap.size;return ret}*values(){for(const secondMap of this._firstMap.values())yield*secondMap.values()}*keyPairs(){for(const [x,secondMap]of this._firstMap.entries())for(const y of secondMap.keys())yield[x,y]}*entries(){for(const [x,secondMap]of this._firstMap.entries())for(const [y,value]of secondMap.entries())yield[x,
y,value]}}};


// c3/lib/misc/arraySet.js
'use strict';{const C3=self.C3;C3.ArraySet=class ArraySet extends C3.DefendedBase{constructor(){super();this._set=new Set;this._arr=[];this._needToRebuildArray=false}Release(){this.Clear()}Clear(){this._set.clear();C3.clearArray(this._arr);this._needToRebuildArray=false}Add(v){if(this._set.has(v))return;this._set.add(v);if(!this._needToRebuildArray)this._arr.push(v)}Has(v){return this._set.has(v)}Delete(v){if(this._set.delete(v))this._needToRebuildArray=true}GetSize(){return this._set.size}IsEmpty(){return this._set.size===
0}GetArray(){if(this._needToRebuildArray){this._RebuildArray();this._needToRebuildArray=false}return this._arr}_RebuildArray(){const arr=this._arr;C3.clearArray(arr);for(const v of this._set)arr.push(v)}}};


// ../lib/misc/ease.js
'use strict';{const C3=self.C3;const EASE_MAP=new Map;const PREDEFINED_EASE_MAP=new Map;const CUSTOM_EASE_EDITOR_MAP=new Map;const CUSTOM_EASE_RUNTIME_MAP=new Map;const PRIVATE_EASE_MAP=new Map;const ALIAS_MAP=new Map;ALIAS_MAP.set("linear","noease");ALIAS_MAP.set("default","noease");self.Ease=class Ease{constructor(){}static InheritEase(){return"default"}static DefaultEase(){return"noease"}static GetEditorEaseNames(project,...filter){this._CreateEaseMap();if(!CUSTOM_EASE_EDITOR_MAP.has(project))CUSTOM_EASE_EDITOR_MAP.set(project,
new Map);const customEaseMap=CUSTOM_EASE_EDITOR_MAP.get(project);return[...PREDEFINED_EASE_MAP.keys()].concat([...customEaseMap.keys()]).filter(ease=>!filter.includes(ease))}static GetRuntimeEaseNames(){this._CreateEaseMap();return[...PREDEFINED_EASE_MAP.keys()].concat([...CUSTOM_EASE_RUNTIME_MAP.keys()])}static IsNamePredefined(easeName){this._CreateEaseMap();return[...PREDEFINED_EASE_MAP.keys()].includes(easeName)}static _GetEase(easeName){const realEaseName=ALIAS_MAP.get(easeName);if(realEaseName)return EASE_MAP.get(realEaseName);
if(Ease.IsNamePredefined(easeName))return EASE_MAP.get(easeName);if(PRIVATE_EASE_MAP.has(easeName))return PRIVATE_EASE_MAP.get(easeName)}static GetEditorEase(easeName,project){this._CreateEaseMap();const ease=Ease._GetEase(easeName);if(ease)return ease;return CUSTOM_EASE_EDITOR_MAP.get(project).get(easeName)}static GetRuntimeEase(easeName){this._CreateEaseMap();const ease=Ease._GetEase(easeName);if(ease)return ease;return CUSTOM_EASE_RUNTIME_MAP.get(easeName)}static GetEaseFromIndex(index){this._CreateEaseMap();
const names=this.GetRuntimeEaseNames();return names[index]}static GetIndexForEase(name,project){this._CreateEaseMap();const names=this.GetEditorEaseNames(project);return names.indexOf(name)}static _CreateEaseMap(){if(EASE_MAP.size!==0)return;this._AddPredifinedEase("default",()=>{});this._AddPredifinedEase("noease",this.NoEase);this._AddPredifinedEase("easeinsine",this.EaseInSine);this._AddPredifinedEase("easeoutsine",this.EaseOutSine);this._AddPredifinedEase("easeinoutsine",this.EaseInOutSine);this._AddPredifinedEase("easeinelastic",
this.EaseInElastic);this._AddPredifinedEase("easeoutelastic",this.EaseOutElastic);this._AddPredifinedEase("easeinoutelastic",this.EaseInOutElastic);this._AddPredifinedEase("easeinback",this.EaseInBack);this._AddPredifinedEase("easeoutback",this.EaseOutBack);this._AddPredifinedEase("easeinoutback",this.EaseInOutBack);this._AddPredifinedEase("easeinbounce",this.EaseInBounce);this._AddPredifinedEase("easeoutbounce",this.EaseOutBounce);this._AddPredifinedEase("easeinoutbounce",this.EaseInOutBounce);this._AddPredifinedEase("easeincubic",
this.EaseInCubic);this._AddPredifinedEase("easeoutcubic",this.EaseOutCubic);this._AddPredifinedEase("easeinoutcubic",this.EaseInOutCubic);this._AddPredifinedEase("easeinquad",this.EaseInQuad);this._AddPredifinedEase("easeoutquad",this.EaseOutQuad);this._AddPredifinedEase("easeinoutquad",this.EaseInOutQuad);this._AddPredifinedEase("easeinquart",this.EaseInQuart);this._AddPredifinedEase("easeoutquart",this.EaseOutQuart);this._AddPredifinedEase("easeinoutquart",this.EaseInOutQuart);this._AddPredifinedEase("easeinquint",
this.EaseInQuint);this._AddPredifinedEase("easeoutquint",this.EaseOutQuint);this._AddPredifinedEase("easeinoutquint",this.EaseInOutQuint);this._AddPredifinedEase("easeincirc",this.EaseInCirc);this._AddPredifinedEase("easeoutcirc",this.EaseOutCirc);this._AddPredifinedEase("easeinoutcirc",this.EaseInOutCirc);this._AddPredifinedEase("easeinexpo",this.EaseInExpo);this._AddPredifinedEase("easeoutexpo",this.EaseOutExpo);this._AddPredifinedEase("easeinoutexpo",this.EaseInOutExpo);this._AddPrivateCustomEase("cubicbezier",
this.EaseCubicBezier);this._AddPrivateCustomEase("spline",this.EaseSpline)}static _AddPredifinedEase(name,func){Ease._AddEase(name,func,"predefined")}static _AddPrivateCustomEase(name,func){Ease._AddEase(name,func,"private")}static AddCustomEase(name,func,project){this._CreateEaseMap();Ease._AddEase(name,func,"custom",project)}static RemoveCustomEase(name,project){if(this.IsNamePredefined(name))return;if([...PRIVATE_EASE_MAP.keys()].includes(name))return;const customEaseMap=CUSTOM_EASE_EDITOR_MAP.get(project);
if(customEaseMap)customEaseMap.delete(name)}static _AddEase(name,func,mode,project){switch(mode){case "predefined":EASE_MAP.set(name,func);PREDEFINED_EASE_MAP.set(name,func);break;case "custom":if(project){if(!CUSTOM_EASE_EDITOR_MAP.has(project))CUSTOM_EASE_EDITOR_MAP.set(project,new Map);const customEaseMap=CUSTOM_EASE_EDITOR_MAP.get(project);customEaseMap.set(name,func)}else CUSTOM_EASE_RUNTIME_MAP.set(name,func);break;case "private":EASE_MAP.set(name,func);PRIVATE_EASE_MAP.set(name,func);break;
default:throw new Error("unexpected ease mode");}}static NoEase(t,b,c,d){return c*t/d+b}static EaseInQuad(t,b,c,d){return c*(t/=d)*t+b}static EaseOutQuad(t,b,c,d){return-c*(t/=d)*(t-2)+b}static EaseInOutQuad(t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*(--t*(t-2)-1)+b}static EaseInCubic(t,b,c,d){return c*(t/=d)*t*t+b}static EaseOutCubic(t,b,c,d){return c*((t=t/d-1)*t*t+1)+b}static EaseInOutCubic(t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b}static EaseInQuart(t,b,c,d){return c*
(t/=d)*t*t*t+b}static EaseOutQuart(t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b}static EaseInOutQuart(t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b}static EaseInQuint(t,b,c,d){return c*(t/=d)*t*t*t*t+b}static EaseOutQuint(t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b}static EaseInOutQuint(t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b}static EaseInSine(t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b}static EaseOutSine(t,b,c,d){return c*Math.sin(t/
d*(Math.PI/2))+b}static EaseInOutSine(t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b}static EaseInExpo(t,b,c,d){return t===0?b:c*Math.pow(2,10*(t/d-1))+b}static EaseOutExpo(t,b,c,d){return t===d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b}static EaseInOutExpo(t,b,c,d){if(t===0)return b;if(t===d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b}static EaseInCirc(t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b}static EaseOutCirc(t,b,c,d){return c*Math.sqrt(1-(t=t/
d-1)*t)+b}static EaseInOutCirc(t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b}static EaseInElastic(t,b,c,d){let s=1.70158;let p=0;let a=c;if(t===0)return b;if((t/=d)===1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;s=p/4}else s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b}static EaseOutElastic(t,b,c,d){let s=1.70158;let p=0;let a=c;if(t===0)return b;if((t/=d)===1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=
c;s=p/4}else s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b}static EaseInOutElastic(t,b,c,d){let s=1.70158;let p=0;let a=c;if(t===0)return b;if((t/=d/2)===2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;s=p/4}else s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b}static EaseInBack(t,b,c,d,s){if(s===undefined)s=1.70158;
return c*(t/=d)*t*((s+1)*t-s)+b}static EaseOutBack(t,b,c,d,s){if(s===undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b}static EaseInOutBack(t,b,c,d,s){if(s===undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=1.525)+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b}static EaseInBounce(t,b,c,d){return c-Ease.EaseOutBounce(d-t,0,c,d)+b}static EaseOutBounce(t,b,c,d){if((t/=d)<1/2.75)return c*(7.5625*t*t)+b;else if(t<2/2.75)return c*(7.5625*(t-=1.5/2.75)*t+.75)+b;else if(t<2.5/2.75)return c*
(7.5625*(t-=2.25/2.75)*t+.9375)+b;else return c*(7.5625*(t-=2.625/2.75)*t+.984375)+b}static EaseInOutBounce(t,b,c,d){if(t<d/2)return Ease.EaseInBounce(t*2,0,c,d)*.5+b;return Ease.EaseOutBounce(t*2-d,0,c,d)*.5+c*.5+b}static EaseCubicBezier(t,p0,p1,p2,p3){const _0=p0;const _1=3*t*(p1-p0);const _2=3*t**2*(p0+p2-2*p1);const _3=t**3*(p3-p0+3*p1-3*p2);return _0+_1+_2+_3}static EaseSpline(t,sx,sy,x1,y1,x2,y2,ex,ey,samples){if(x1===y1&&x2===y2)return t;const tx=get_t_for_x(t,sx,x1,x2,ex,samples);const va=
a(sy,y1,y2,ey);const vb=b(sy,y1,y2,ey);const vc=c(sy,y1,y2,ey);return calc_bezier(tx,va,vb,vc)}static GetBezierSamples(startx,a1x,a2x,endx){const ret=[];const va=a(startx,a1x,a2x,endx);const vb=b(startx,a1x,a2x,endx);const vc=c(startx,a1x,a2x,endx);for(let i=0;i<SAMPLE_COUNT;++i){const sample=calc_bezier(i*SAMPLE_STEP,va,vb,vc);ret.push(sample)}return ret}};const SAMPLE_COUNT=11;const SAMPLE_STEP=1/(SAMPLE_COUNT-1);const NEWTON_RAPHSON_ITERATIONS=4;const NEWTON_RAPHSON_MIN_SLOPE=.02;const SUBDIVISION_PRECISION=
1E-7;const SUBDIVISION_MAX_ITERATIONS=10;const a=(p0,p1,p2,p3)=>{return p3-3*p2+3*p1-p0};const b=(p0,p1,p2,p3)=>{return 3*p2-6*p1+3*p0};const c=(p0,p1,p2,p3)=>{return 3*(p1-p0)};const calc_bezier=(aT,a,b,c)=>{return((a*aT+b)*aT+c)*aT};const get_slope=(aT,a,b,c)=>{return 3*a*aT*aT+2*b*aT+c};const get_t_for_x=(aX,p0,p1,p2,p3,samples)=>{if(aX==1)return 1;let intervalStart=0;let currentSampleIndex=1;let currentSampleValue=samples[currentSampleIndex];let lastSampleIndex=SAMPLE_COUNT-1;let lastSampleValue=
samples[SAMPLE_COUNT-1];while(currentSampleIndex!=lastSampleIndex&&currentSampleValue<=aX){currentSampleIndex++;currentSampleValue=samples[currentSampleIndex];intervalStart+=SAMPLE_STEP}currentSampleIndex--;currentSampleValue=samples[currentSampleIndex];const dist=(aX-currentSampleValue)/(samples[currentSampleIndex+1]-currentSampleValue);let guess=intervalStart+dist*SAMPLE_STEP;const va=a(p0,p1,p2,p3);const vb=b(p0,p1,p2,p3);const vc=c(p0,p1,p2,p3);const initSlope=get_slope(guess,va,vb,vc);if(initSlope===
0)return guess;else if(initSlope>=NEWTON_RAPHSON_MIN_SLOPE){for(let i=0;i<NEWTON_RAPHSON_ITERATIONS;++i){const x=calc_bezier(guess,va,vb,vc)-aX;const slope=get_slope(guess,va,vb,vc);guess-=x/slope}return guess}else{let aA=intervalStart;let aB=intervalStart+SAMPLE_STEP;let i=0;let precissionLimit;let maxIterations;do{guess=aA+(aB-aA)/2;let x=calc_bezier(guess,va,vb,vc)-aX;if(x>0)aB=guess;else aA=guess;precissionLimit=Math.abs(x)>SUBDIVISION_PRECISION;maxIterations=++i<SUBDIVISION_MAX_ITERATIONS}while(precissionLimit&&
maxIterations);return guess}}};


// ../lib/misc/probability.js
'use strict';{const C3=self.C3;function RequireStringOrNumber(value){if(!C3.IsString(value));}C3.ProbabilityTable=class ProbabilityTable{constructor(){this._items=[];this._totalWeight=0}Release(){this.Clear();this._items=null}Clear(){C3.clear2DArray(this._items);this._totalWeight=0}GetTotalWeight(){return this._totalWeight}Sample(t=Math.random()*this.GetTotalWeight()){let sumWeight=0;for(const [weight,value]of this._items){sumWeight+=weight;if(t<sumWeight)return value}return 0}AddItem(weight,value){RequireStringOrNumber(value);
this._totalWeight+=weight;this._items.push([weight,value])}RemoveItem(weight,value){RequireStringOrNumber(value);const ignoreWeight=weight===0;for(let i=0;i<this._items.length;i++){const item=this._items[i];const doesWeightMatch=ignoreWeight||item[0]===weight;const doesValueMatch=item[1]===value;if(doesWeightMatch&&doesValueMatch){this._items.splice(i,1);this._totalWeight-=item[0];break}}}asJSON(){return JSON.stringify(this._items)}static fromJSON(str){const table=new C3.ProbabilityTable;const items=
JSON.parse(str);for(const item of items){const weight=item[0];const value=item[1];table.AddItem(weight,value)}return table}}};


// ../lib/events/event.js
'use strict';{const C3=self.C3;C3.Event=class Event{constructor(type,cancelable){this.type=type;this.cancelable=!!cancelable;this.defaultPrevented=false;this.propagationStopped=false;this.isAsync=false}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=true}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.isAsync)throw new Error(`cannot stop async event '${this.type}' propagation`);
this.propagationStopped=true}}};


// ../lib/events/handler.js
'use strict';{const C3=self.C3;const assert=self.assert;C3.Event.Handler=class EventHandler extends C3.DefendedBase{constructor(type){super();this._type=type;this._captureListeners=[];this._captureListenersSet=new Set;this._listeners=[];this._listenersSet=new Set;this._fireDepth=0;this._queueAddListeners=[];this._queueRemoveCaptureListeners=[];this._queueRemoveListeners=[]}Release(){if(this._fireDepth>0)return;C3.clearArray(this._captureListeners);this._captureListenersSet.clear();C3.clearArray(this._listeners);
this._listenersSet.clear();C3.clearArray(this._queueAddListeners);C3.clearArray(this._queueRemoveCaptureListeners);C3.clearArray(this._queueRemoveListeners);C3.Release(this)}_AddListener(func,capture){if(this._IsFiring()){this._queueAddListeners.push([func,capture]);return}if(capture){if(this._captureListenersSet.has(func))return;this._captureListeners.push(func);this._captureListenersSet.add(func)}else{if(this._listenersSet.has(func))return;this._listeners.push(func);this._listenersSet.add(func)}}_RemoveListener(func,
capture){if(this._IsFiring()){if(capture)this._queueRemoveCaptureListeners.push(func);else this._queueRemoveListeners.push(func);return}if(capture){if(this._captureListenersSet.has(func)){this._captureListenersSet.delete(func);C3.arrayFindRemove(this._captureListeners,func)}}else if(this._listenersSet.has(func)){this._listenersSet.delete(func);C3.arrayFindRemove(this._listeners,func)}}_IsEmpty(){return!this._captureListeners.length&&!this._listeners.length}_IsFiring(){return this._fireDepth>0}_ProcessQueuedListeners(){for(let q of this._queueAddListeners)this._AddListener(...q);
C3.clearArray(this._queueAddListeners);for(const func of this._queueRemoveListeners)this._listenersSet.delete(func);for(const func of this._queueRemoveCaptureListeners)this._captureListenersSet.delete(func);const removeListenersSet=new Set(this._queueRemoveListeners);const removeCaptureListenersSet=new Set(this._queueRemoveCaptureListeners);C3.arrayRemoveAllInSet(this._listeners,removeListenersSet);C3.arrayRemoveAllInSet(this._captureListeners,removeCaptureListenersSet);C3.clearArray(this._queueRemoveCaptureListeners);
C3.clearArray(this._queueRemoveListeners)}_FireCancellable(event){this._IncreaseFireDepth();let isStopped=false;for(let i=0,len=this._captureListeners.length;i<len;++i){this._captureListeners[i](event);if(event.propagationStopped){isStopped=true;break}}if(!isStopped)for(let i=0,len=this._listeners.length;i<len;++i){this._listeners[i](event);if(event.propagationStopped)break}this._DecreaseFireDepth();return!event.defaultPrevented}_FireNonCancellable(event){this._IncreaseFireDepth();for(let i=0,len=
this._captureListeners.length;i<len;++i)this._captureListeners[i](event);for(let i=0,len=this._listeners.length;i<len;++i)this._listeners[i](event);this._DecreaseFireDepth();return true}_IncreaseFireDepth(){this._fireDepth++}_DecreaseFireDepth(){this._fireDepth--;if(this._fireDepth===0&&(this._queueAddListeners.length||this._queueRemoveCaptureListeners.length||this._queueRemoveListeners.length))this._ProcessQueuedListeners()}SetDelayRemoveEventsEnabled(e){if(e)this._IncreaseFireDepth();else this._DecreaseFireDepth()}_FireAsync(event){let callbackPromises=
[];for(let i=0,len=this._captureListeners.length;i<len;++i){let func=this._captureListeners[i];callbackPromises.push(C3.Asyncify(()=>func(event)))}for(let i=0,len=this._listeners.length;i<len;++i){let func=this._listeners[i];callbackPromises.push(C3.Asyncify(()=>func(event)))}return Promise.all(callbackPromises).then(()=>!event.defaultPrevented)}_FireAndWait_AsyncOptional(event){const results=[];this._IncreaseFireDepth();for(let i=0,len=this._captureListeners.length;i<len;++i){const ret=this._captureListeners[i](event);
if(ret instanceof Promise)results.push(ret)}for(let i=0,len=this._listeners.length;i<len;++i){const ret=this._listeners[i](event);if(ret instanceof Promise)results.push(ret)}this._DecreaseFireDepth();if(results.length)return Promise.all(results).then(()=>!event.defaultPrevented);else return!event.defaultPrevented}async _FireAndWaitAsync(event){return await this._FireAndWait_AsyncOptional(event)}async _FireAndWaitAsyncSequential(event){this._IncreaseFireDepth();for(let i=0,len=this._captureListeners.length;i<
len;++i){const ret=this._captureListeners[i](event);if(ret instanceof Promise)await ret}for(let i=0,len=this._listeners.length;i<len;++i){const ret=this._listeners[i](event);if(ret instanceof Promise)await ret}this._DecreaseFireDepth();return!event.defaultPrevented}*_FireAsGenerator(event){this._IncreaseFireDepth();for(let i=0,len=this._captureListeners.length;i<len;++i){const ret=this._captureListeners[i](event);if(C3.IsIterator(ret))yield*ret}for(let i=0,len=this._listeners.length;i<len;++i){const ret=
this._listeners[i](event);if(C3.IsIterator(ret))yield*ret}this._DecreaseFireDepth()}}};


// ../lib/events/dispatcher.js
'use strict';{const C3=self.C3;C3.Event.Dispatcher=class EventDispatcher extends C3.DefendedBase{constructor(){super();this._eventHandlers=new Map;this._dispatcherWasReleased=false}Release(){if(this._dispatcherWasReleased)throw new Error("already released");this.ClearEvents();this._dispatcherWasReleased=true;C3.Release(this)}WasReleased(){return this._dispatcherWasReleased}ClearEvents(){for(let handler of this._eventHandlers.values())handler.Release();this._eventHandlers.clear()}_GetHandlerByType(type,
create_if_missing){let handler=this._eventHandlers.get(type);if(handler)return handler;if(create_if_missing){handler=C3.New(C3.Event.Handler,type);this._eventHandlers.set(type,handler);return handler}return null}HasAnyHandlerFor(type){return this._eventHandlers.has(type)}addEventListener(type,func,capture){let handler=this._GetHandlerByType(type,true);handler._AddListener(func,!!capture)}removeEventListener(type,func,capture){let handler=this._GetHandlerByType(type,false);if(!handler)return;handler._RemoveListener(func,
!!capture);if(handler._IsEmpty())this._eventHandlers.delete(type)}dispatchEvent(event){const handler=this._GetHandlerByType(event.type,false);if(!handler)return true;if(event.cancelable)return handler._FireCancellable(event);else return handler._FireNonCancellable(event)}dispatchEventAsync(event){const handler=this._GetHandlerByType(event.type,false);if(!handler)return Promise.resolve(true);event.isAsync=true;return handler._FireAsync(event)}async dispatchEventAndClearAsync(event){const handler=this._GetHandlerByType(event.type,
false);if(!handler)return true;this._eventHandlers.delete(event.type);event.isAsync=true;const ret=await handler._FireAsync(event);handler.Release();return ret}async dispatchEventAndWaitAsync(event){const handler=this._GetHandlerByType(event.type,false);if(!handler)return true;return await handler._FireAndWaitAsync(event)}dispatchEventAndWait_AsyncOptional(event){const handler=this._GetHandlerByType(event.type,false);if(!handler)return true;return handler._FireAndWait_AsyncOptional(event)}async dispatchEventAndWaitAsyncSequential(event){const handler=
this._GetHandlerByType(event.type,false);if(!handler)return true;return await handler._FireAndWaitAsyncSequential(event)}dispatchGeneratorEvent(event){const handler=this._GetHandlerByType(event.type,false);if(!handler)return null;if(event.cancelable)throw new Error("not supported");else return handler._FireAsGenerator(event)}SetDelayRemoveEventsEnabled(e){for(const handler of this._eventHandlers.values())handler.SetDelayRemoveEventsEnabled(e)}}};


// ../lib/util/asyncify.js
'use strict';{const C3=self.C3;const SETTIMEOUT_WORK_DURATION=12;const SETTIMEOUT_INTERVAL=16;const IDLECALLBACK_TIMEOUT=35;const SUPPORTS_RIC=typeof requestIdleCallback!=="undefined";let workQueue=[];let callbackId=-1;let highThroughputMode=0;function SetNewCallback(timerTimeout){if(SUPPORTS_RIC&&highThroughputMode===0)callbackId=requestIdleCallback(DoAsyncifiedWork,{timeout:IDLECALLBACK_TIMEOUT});else callbackId=setTimeout(DoAsyncifiedWork,highThroughputMode>0?1:timerTimeout)}function DoAsyncifiedWork(deadline){callbackId=
-1;if(!workQueue.length)return;let startTime=performance.now();let curTime=startTime;let jobCount=0;let estimatedNextJobDuration=0;do{DoNextAsyncifiedJob(workQueue.shift());curTime=performance.now();++jobCount;estimatedNextJobDuration=(curTime-startTime)/jobCount*1.1}while(workQueue.length&&(SUPPORTS_RIC&&highThroughputMode===0&&typeof deadline!=="undefined"?estimatedNextJobDuration<deadline["timeRemaining"]():curTime-startTime+estimatedNextJobDuration<SETTIMEOUT_WORK_DURATION));if(callbackId===-1&&
workQueue.length){let workDuration=curTime-startTime;let timeout=Math.max(SETTIMEOUT_INTERVAL-workDuration,4);SetNewCallback(timeout)}}function DoNextAsyncifiedJob(w){let ret;try{ret=w.func()}catch(e){w.reject(e);return}w.resolve(ret)}let asyncifyDisabled=C3.QueryString.Has("disable-asyncify");if(asyncifyDisabled)console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously.");C3.Asyncify=function Asyncify(func){let stack=
null;if(C3.isDebug)stack=C3.GetCallStack();return new Promise((resolve,reject)=>{workQueue.push({func:func,resolve:resolve,reject:reject,stack:stack});if(asyncifyDisabled){DoNextAsyncifiedJob(workQueue.pop());return}if(callbackId===-1)SetNewCallback(SETTIMEOUT_INTERVAL)})};C3.Asyncify.SetHighThroughputMode=function SetHighThroughputMode(m){if(m)++highThroughputMode;else{--highThroughputMode;if(highThroughputMode<0)throw new Error("already turned off high throughput mode");}}};


// ../lib/util/idleTimeout.js
'use strict';{const C3=self.C3;const IDLE_CHECK_MIN_INTERVAL=1E3;const IDLE_CHECK_TIMER_OVERSHOOT=100;let cachedNowTime=-1;function ClearTimeCache(){cachedNowTime=-1}C3.FastGetDateNow=function FastGetDateNow(){if(cachedNowTime===-1){cachedNowTime=Date.now();self.setTimeout(ClearTimeCache,16)}return cachedNowTime};let timerId=-1;let nextDeadline=-1;let activeIdleTimeouts=new Set;function CheckActiveIdleTimeouts(){timerId=-1;nextDeadline=-1;let nowTime=Date.now();for(let i of activeIdleTimeouts)if(i._CheckTimeout(nowTime)){let deadline=
i._GetDeadline();if(nextDeadline===-1||deadline<nextDeadline)nextDeadline=deadline}else activeIdleTimeouts.delete(i);if(nextDeadline!==-1){let duration=Math.max(nextDeadline-nowTime+IDLE_CHECK_TIMER_OVERSHOOT,IDLE_CHECK_MIN_INTERVAL);timerId=self.setTimeout(CheckActiveIdleTimeouts,duration)}}C3.IdleTimeout=class IdleTimeout{constructor(callback,timeoutInSeconds){this._callback=callback;this._timeout=timeoutInSeconds*1E3;this._deadline=0;this._isActive=false}Reset(){let nowTime=C3.FastGetDateNow();
this._deadline=nowTime+this._timeout;if(!this._isActive){activeIdleTimeouts.add(this);this._isActive=true}if(timerId===-1){nextDeadline=this._deadline;timerId=self.setTimeout(CheckActiveIdleTimeouts,this._timeout+IDLE_CHECK_TIMER_OVERSHOOT)}else if(this._deadline<nextDeadline&&nextDeadline>nowTime+IDLE_CHECK_MIN_INTERVAL){self.clearTimeout(timerId);nextDeadline=this._deadline;timerId=self.setTimeout(CheckActiveIdleTimeouts,this._timeout+IDLE_CHECK_TIMER_OVERSHOOT)}}_CheckTimeout(nowTime){if(nowTime>=
this._deadline){if(this._callback()){this._deadline=nowTime+this._timeout;return true}this._isActive=false;return false}return true}_GetDeadline(){return this._deadline}Cancel(){if(this._isActive){activeIdleTimeouts.delete(this);this._isActive=false;if(activeIdleTimeouts.size===0&&timerId!==-1){self.clearTimeout(timerId);timerId=-1;nextDeadline=-1}}}Release(){this.Cancel();this._callback=null}}};


// ../lib/util/disposable.js
'use strict';{const C3=self.C3;C3.Disposable=class Disposable{constructor(disposeAction){this._disposed=false;this._disposeAction=disposeAction}Dispose(){if(this._disposed)return;this._disposed=true;if(this._disposeAction){this._disposeAction();this._disposeAction=null}}IsDisposed(){return this._disposed}Release(){this.Dispose()}static Release(instance){return new Disposable(()=>instance.Release())}static From(eventDispatcher,eventNames,eventHandler,opts,scope){if(typeof opts==="undefined"||opts===
null)opts=false;else if(typeof opts!=="boolean"&&typeof opts!=="object")throw new TypeError("invalid event listener options");if(scope)eventHandler=eventHandler.bind(scope);if(eventNames.includes(" ")){eventNames=eventNames.split(" ");const disposable=new C3.CompositeDisposable;for(let eventName of eventNames){eventDispatcher.addEventListener(eventName,eventHandler,opts);disposable.Add(C3.New(C3.Disposable,()=>eventDispatcher.removeEventListener(eventName,eventHandler,opts)))}return disposable}else{eventDispatcher.addEventListener(eventNames,
eventHandler,opts);return C3.New(C3.Disposable,()=>eventDispatcher.removeEventListener(eventNames,eventHandler,opts))}}};C3.StubDisposable=class StubDisposable extends C3.Disposable{SetAction(disposeAction){this._disposeAction=disposeAction}};C3.CompositeDisposable=class CompositeDisposable extends C3.Disposable{constructor(...disposables){super();this._disposables=new Set;for(let disposable of disposables)this.Add(disposable)}Add(...disposables){if(this._disposed)throw new Error("already disposed");
for(let disposable of disposables)this._disposables.add(disposable)}Remove(disposable){if(this._disposed)throw new Error("already disposed");this._disposables.delete(disposable)}RemoveAll(){if(this._disposed)throw new Error("already disposed");if(!this._disposables)return;for(let disposable of this._disposables)disposable.Dispose();this._disposables.clear()}IsDisposed(){return this._disposed}Dispose(){if(this._disposed)throw new Error("already disposed");this._disposed=true;for(let disposable of this._disposables)disposable.Dispose();
this._disposables.clear();this._disposables=null}Release(){this.Dispose()}}};


// c3/lib/util/kahanSum.js
'use strict';{const C3=self.C3;C3.KahanSum=class KahanSum extends C3.DefendedBase{constructor(){super();this._c=0;this._y=0;this._t=0;this._sum=0}Add(v){v=+v;this._y=v-this._c;this._t=this._sum+this._y;this._c=this._t-this._sum-this._y;this._sum=this._t}Subtract(v){this._sum-=+v}Get(){return this._sum}Reset(){this._c=0;this._y=0;this._t=0;this._sum=0}Set(s){this._c=0;this._y=0;this._t=0;this._sum=+s}Release(){}}};


// c3/lib/util/redblackset.js
'use strict';{const C3=self.C3;const js_cols={};const RED=true;const BLACK=false;js_cols.RBnode=function(tree){this.tree=tree;this.right=this.tree.sentinel;this.left=this.tree.sentinel;this.parent=null;this.color=false;this.key=null};js_cols.RedBlackSet=function(compare_func){this.size=0;this.sentinel=new js_cols.RBnode(this);this.sentinel.color=BLACK;this.root=this.sentinel;this.root.parent=this.sentinel;this.compare=compare_func||this.default_compare};js_cols.RedBlackSet.prototype.default_compare=
function(a,b){if(a<b)return-1;else if(b<a)return 1;else return 0};js_cols.RedBlackSet.prototype.clone=function(){var rv=new js_cols.RedBlackSet(this.compare);rv.insertAll(this);return rv};js_cols.RedBlackSet.prototype.clear=function(){this.size=0;this.sentinel=new js_cols.RBnode(this);this.sentinel.color=BLACK;this.root=this.sentinel;this.root.parent=this.sentinel};js_cols.RedBlackSet.prototype.leftRotate=function(x){var y=x.right;x.right=y.left;if(y.left!=this.sentinel)y.left.parent=x;y.parent=x.parent;
if(x.parent==this.sentinel)this.root=y;else if(x==x.parent.left)x.parent.left=y;else x.parent.right=y;y.left=x;x.parent=y};js_cols.RedBlackSet.prototype.rightRotate=function(x){var y=x.left;x.left=y.right;if(y.right!=this.sentinel)y.right.parent=x;y.parent=x.parent;if(x.parent==this.sentinel)this.root=y;else if(x==x.parent.right)x.parent.right=y;else x.parent.left=y;y.right=x;x.parent=y};js_cols.RedBlackSet.prototype.insert=function(key){if(!this.contains(key)){var z=new js_cols.RBnode(this);z.key=
key;var y=this.sentinel;var x=this.root;while(x!=this.sentinel){y=x;if(this.compare(z.key,x.key)<0)x=x.left;else x=x.right}z.parent=y;if(y==this.sentinel)this.root=z;else if(this.compare(z.key,y.key)<0)y.left=z;else y.right=z;z.left=this.sentinel;z.right=this.sentinel;z.color=RED;this.insertFixup(z);this.size++}else{var node=this.get_(key);node.key=key}};js_cols.RedBlackSet.prototype.insertFixup=function(z){while(z!=this.sentinel&&z!=this.root&&z.parent.color==RED)if(z.parent==z.parent.parent.left){var y=
z.parent.parent.right;if(y.color==RED){z.parent.color=BLACK;y.color=BLACK;z.parent.parent.color=RED;z=z.parent.parent}else{if(z==z.parent.right){z=z.parent;this.leftRotate(z)}z.parent.color=BLACK;z.parent.parent.color=RED;if(z.parent.parent!=this.sentinel)this.rightRotate(z.parent.parent)}}else{var y=z.parent.parent.left;if(y.color==RED){z.parent.color=BLACK;y.color=BLACK;z.parent.parent.color=RED;z=z.parent.parent}else{if(z==z.parent.left){z=z.parent;this.rightRotate(z)}z.parent.color=BLACK;z.parent.parent.color=
RED;if(z.parent.parent!=this.sentinel)this.leftRotate(z.parent.parent)}}this.root.color=BLACK};js_cols.RedBlackSet.prototype.delete_=function(z){var y;var x;if(z.left==this.sentinel||z.right==this.sentinel)y=z;else y=this.successor_(z);if(y.left!=this.sentinel)x=y.left;else x=y.right;x.parent=y.parent;if(y.parent==this.sentinel)this.root=x;else if(y==y.parent.left)y.parent.left=x;else y.parent.right=x;if(y!=z)z.key=y.key;if(y.color==BLACK)this.deleteFixup(x);this.size--};js_cols.RedBlackSet.prototype.deleteFixup=
function(x){while(x!=this.root&&x.color==BLACK)if(x==x.parent.left){var w=x.parent.right;if(w.color==RED){w.color=BLACK;x.parent.color=RED;this.leftRotate(x.parent);w=x.parent.right}if(w.left.color==BLACK&&w.right.color==BLACK){w.color=RED;x=x.parent}else{if(w.right.color==BLACK){w.left.color=BLACK;w.color=RED;this.rightRotate(w);w=x.parent.right}w.color=x.parent.color;x.parent.color=BLACK;w.right.color=BLACK;this.leftRotate(x.parent);x=this.root}}else{var w=x.parent.left;if(w.color==RED){w.color=
BLACK;x.parent.color=RED;this.rightRotate(x.parent);w=x.parent.left}if(w.right.color==BLACK&&w.left.color==BLACK){w.color=RED;x=x.parent}else{if(w.left.color==BLACK){w.right.color=BLACK;w.color=RED;this.leftRotate(w);w=x.parent.left}w.color=x.parent.color;x.parent.color=BLACK;w.left.color=BLACK;this.rightRotate(x.parent);x=this.root}}x.color=BLACK};js_cols.RedBlackSet.prototype.remove=function(key){var x=this.get_(key);if(x!=this.sentinel){var retval=x.key;this.delete_(x);return retval}else return null};
js_cols.RedBlackSet.prototype.removeSwapped=function(value,key){this.remove(key)};js_cols.RedBlackSet.prototype.min=function(x){while(x.left!=this.sentinel)x=x.left;return x};js_cols.RedBlackSet.prototype.max=function(x){while(x.right!=this.sentinel)x=x.right;return x};js_cols.RedBlackSet.prototype.successor_=function(x){if(x.right!=this.sentinel)return this.min(x.right);var y=x.parent;while(y!=this.sentinel&&x==y.right){x=y;y=y.parent}return y};js_cols.RedBlackSet.prototype.predeccessor_=function(x){if(x.left!=
this.sentinel)return this.max(x.left);var y=x.parent;while(y!=this.sentinel&&x==y.left){x=y;y=y.parent}return y};js_cols.RedBlackSet.prototype.successor=function(key){if(this.size>0){var x=this.get_(key);if(x==this.sentinel)return null;if(x.right!=this.sentinel)return this.min(x.right).key;var y=x.parent;while(y!=this.sentinel&&x==y.right){x=y;y=y.parent}if(y!=this.sentinel)return y.key;else return null}else return null};js_cols.RedBlackSet.prototype.predecessor=function(key){if(this.size>0){var x=
this.get_(key);if(x==this.sentinel)return null;if(x.left!=this.sentinel)return this.max(x.left).key;var y=x.parent;while(y!=this.sentinel&&x==y.left){x=y;y=y.parent}if(y!=this.sentinel)return y.key;else return null}else return null};js_cols.RedBlackSet.prototype.getMin=function(){return this.min(this.root).key};js_cols.RedBlackSet.prototype.getMax=function(){return this.max(this.root).key};js_cols.RedBlackSet.prototype.get_=function(key){var x=this.root;while(x!=this.sentinel&&this.compare(x.key,
key)!=0)if(this.compare(key,x.key)<0)x=x.left;else x=x.right;return x};js_cols.RedBlackSet.prototype.contains=function(key){return this.get_(key).key!=null};js_cols.RedBlackSet.prototype.getValues=function(){var ret=[];this.forEach(function(x){ret.push(x)});return ret};js_cols.RedBlackSet.prototype.insertAll=function(col){if(js_cols.typeOf(col)=="array")for(var i=0;i<col.length;i++)this.insert(col[i]);else if(js_cols.typeOf(col.forEach)=="function")col.forEach(this.insert,this);else if(js_cols.typeOf(col.getValues)==
"function"){var arr=col.getValues();for(var i=0;i<arr.length;i++)this.insert(arr[i])}else if(js_cols.typeOf(col)=="object")for(var key in col)this.insert(col[key])};js_cols.RedBlackSet.prototype.removeAll=function(col){if(js_cols.typeOf(col)=="array")for(var i=0;i<col.length;i++)this.remove(col[i]);else if(js_cols.typeOf(col.forEach)=="function")col.forEach(this.removeSwapped,this);else if(js_cols.typeOf(col.getValues)=="function"){var arr=col.getValues();for(var i=0;i<arr.length;i++)this.remove(arr[i])}else if(js_cols.typeOf(col)==
"object")for(var key in col)this.remove(col[key])};js_cols.RedBlackSet.prototype.containsAll=function(col){if(js_cols.typeOf(col)=="array"){for(var i=0;i<col.length;i++)if(!this.contains(col[i]))return false;return true}else if(js_cols.typeOf(col.forEach)=="function")return col.every(this.contains,this);else if(js_cols.typeOf(col.getValues)=="function"){var arr=col.getValues();for(var i=0;i<arr.length;i++)if(!this.contains(arr[i]))return false;return true}else if(js_cols.typeOf(col)=="object"){for(var key in col)if(!this.contains(col[key]))return false;
return true}};js_cols.RedBlackSet.prototype.range=function(from,to){var retArray=[];this.traverseFromTo(function(x){retArray.push(x)},from,to);return retArray};js_cols.RedBlackSet.prototype.traverse=function(f,opt_obj){if(this.isEmpty())return;var node=this.min(this.root);while(node!=this.sentinel){if(f.call(opt_obj,node.key,this))return;node=this.successor_(node)}};js_cols.RedBlackSet.prototype.traverseFrom=function(f,fromKey,opt_obj){if(this.isEmpty())return;var node=this.get_(fromKey);while(node!=
this.sentinel){if(f.call(opt_obj,node.key,this))return;node=this.successor_(node)}};js_cols.RedBlackSet.prototype.traverseTo=function(f,toKey,opt_obj){if(this.isEmpty())return;var node=this.min(this.root);var toNode=this.get_(toKey);while(node!=toNode){if(f.call(opt_obj,node.key,this))return;node=this.successor_(node)}};js_cols.RedBlackSet.prototype.traverseFromTo=function(f,fromKey,toKey,opt_obj){if(this.isEmpty())return;var node=this.get_(fromKey);var toNode=this.get_(toKey);while(node!=toNode){if(f.call(opt_obj,
node.key,this))return;node=this.successor_(node)}};js_cols.RedBlackSet.prototype.traverseBackwards=function(f,opt_obj){if(this.isEmpty())return;var node=this.max(this.root);while(node!=this.sentinel){if(f.call(opt_obj,node.key,this))return;node=this.predeccessor_(node)}};js_cols.RedBlackSet.prototype.forEach=function(f,opt_obj){if(this.isEmpty())return;for(var n=this.min(this.root);n!=this.sentinel;n=this.successor_(n))f.call(opt_obj,n.key,n.key,this)};js_cols.RedBlackSet.prototype.some=function(f,
opt_obj){if(this.isEmpty())return false;for(var n=this.min(this.root);n!=this.sentinel;n=this.successor_(n))if(f.call(opt_obj,n.key,n.key,this))return true;return false};js_cols.RedBlackSet.prototype.every=function(f,opt_obj){if(this.isEmpty())return false;for(var n=this.min(this.root);n!=this.sentinel;n=this.successor_(n))if(!f.call(opt_obj,n.key,n.key,this))return false;return true};js_cols.RedBlackSet.prototype.map=function(f,opt_obj){var rv=[];if(this.isEmpty())return rv;for(var n=this.min(this.root);n!=
this.sentinel;n=this.successor_(n))rv.push(f.call(opt_obj,n.key,n.key,this));return rv};js_cols.RedBlackSet.prototype.filter=function(f,opt_obj){var rv=[];if(this.isEmpty())return rv;for(var n=this.min(this.root);n!=this.sentinel;n=this.successor_(n))if(f.call(opt_obj,n.key,n.key,this))rv.push(n.key);return rv};js_cols.RedBlackSet.prototype.getCount=function(){return this.size};js_cols.RedBlackSet.prototype.isEmpty=function(){return this.size==0};js_cols.RedBlackSet.prototype.isSubsetOf=function(col){var colCount=
js_cols.getCount(col);if(this.getCount()>colCount)return false;var i=0;if(this.isEmpty())return true;for(var n=this.min(this.root);n!=this.sentinel;n=this.successor_(n))if(js_cols.contains.call(col,col,n.key))i++;return i==this.getCount()};js_cols.RedBlackSet.prototype.intersection=function(col){var result=new js_cols.RedBlackSet(this.compare);if(this.isEmpty())return result;for(var n=this.min(this.root);n!=this.sentinel;n=this.successor_(n))if(col.contains.call(col,n.key,n.key,this))result.insert(n.key);
return result};C3.RedBlackSet=class RedBlackSet extends C3.DefendedBase{constructor(sortFunc){super();this._rbSet=new js_cols.RedBlackSet(sortFunc);this._enableQueue=false;this._queueInsert=new Set;this._queueRemove=new Set}Add(item){if(this._enableQueue)if(this._rbSet.contains(item))this._queueRemove.delete(item);else this._queueInsert.add(item);else this._rbSet.insert(item)}Remove(item){if(this._enableQueue)if(this._rbSet.contains(item))this._queueRemove.add(item);else this._queueInsert.delete(item);
else this._rbSet.remove(item)}Has(item){if(this._enableQueue){if(this._queueInsert.has(item))return true;return!this._queueRemove.has(item)&&this._rbSet.contains(item)}else return this._rbSet.contains(item)}Clear(){this._rbSet.clear();this._queueInsert.clear();this._queueRemove.clear()}toArray(){if(this._enableQueue)throw new Error("cannot be used in queueing mode");return this._rbSet.getValues()}GetSize(){return this._rbSet.getCount()+this._queueInsert.size-this._queueRemove.size}IsEmpty(){return this.GetSize()===
0}Front(){if(this.IsEmpty())throw new Error("empty set");if(this._enableQueue)throw new Error("cannot be used in queueing mode");const rbSet=this._rbSet;const n=rbSet.min(rbSet.root);return n.key}Shift(){if(this.IsEmpty())throw new Error("empty set");if(this._enableQueue)throw new Error("cannot be used in queueing mode");const item=this.Front();this.Remove(item);return item}SetQueueingEnabled(q){q=!!q;if(this._enableQueue===q)return;this._enableQueue=q;if(!q){for(const item of this._queueRemove)this._rbSet.remove(item);
this._queueRemove.clear();for(const item of this._queueInsert)this._rbSet.insert(item);this._queueInsert.clear()}}ForEach(func){this._rbSet.forEach(func)}*values(){if(this.IsEmpty())return;const rbSet=this._rbSet;for(let n=rbSet.min(rbSet.root);n!=rbSet.sentinel;n=rbSet.successor_(n))yield n.key}[Symbol.iterator](){return this.values()}}};


// ../lib/util/promiseThrottle.js
'use strict';{const C3=self.C3;C3.PromiseThrottle=class PromiseThrottle{constructor(maxParallel=C3.hardwareConcurrency){this._maxParallel=maxParallel;this._queue=[];this._activeCount=0}Add(func){return new Promise((resolve,reject)=>{this._queue.push({func,resolve,reject});this._MaybeStartNext()})}_FindInQueue(func){for(let i=0,len=this._queue.length;i<len;++i)if(this._queue[i].func===func)return i;return-1}RemoveAndResolve(func,value){const i=this._FindInQueue(func);if(i===-1)throw new Error("cannot find promise to resolve");
this._queue[i].resolve(value);this._queue.splice(i,1)}RemoveAndReject(func,value){const i=this._FindInQueue(func);if(i===-1)throw new Error("cannot find promise to reject");this._queue[i].reject(value);this._queue.splice(i,1)}async _MaybeStartNext(){if(!this._queue.length)return;if(this._activeCount>=this._maxParallel)return;this._activeCount++;const job=this._queue.shift();try{const result=await job.func();job.resolve(result)}catch(err){job.reject(err)}this._activeCount--;this._MaybeStartNext()}static async Batch(concurrency,
methods){const results=[];let failed=false;const execute=async _=>{let fn;while(fn=methods.pop()){if(failed)return;try{results.push(await fn())}catch(e){failed=true;throw e;}}};const promises=[];while(concurrency--)promises.push(execute());await Promise.all(promises);return results}}};


// ../lib/util/rateLimiter.js
'use strict';{const C3=self.C3;C3.RateLimiter=class RateLimiter{constructor(callback,interval,intervalOnBattery){this._callback=callback;this._interval=interval;this._intervalOnBattery=intervalOnBattery||interval*2;this._timerId=-1;this._lastCallTime=-Infinity;this._timerCallFunc=()=>this._OnTimer();this._ignoreReset=false;this._canRunImmediate=false;this._callbackArguments=null}SetCanRunImmediate(c){this._canRunImmediate=!!c}_GetInterval(){if(typeof C3.Battery!=="undefined"&&C3.Battery.IsOnBatteryPower())return this._intervalOnBattery;
else return this._interval}Call(...args){if(this._timerId!==-1)return;this._callbackArguments=args;let nowTime=C3.FastGetDateNow();let timeSinceLastCall=nowTime-this._lastCallTime;let interval=this._GetInterval();if(timeSinceLastCall>=interval&&this._canRunImmediate){this._lastCallTime=nowTime;this._RunCallback()}else this._timerId=self.setTimeout(this._timerCallFunc,Math.max(interval-timeSinceLastCall,4))}_RunCallback(){this._ignoreReset=true;const args=this._callbackArguments;this._callbackArguments=
null;if(args)this._callback(...args);else this._callback();this._ignoreReset=false}Reset(){if(this._ignoreReset)return;this._CancelTimer();this._callbackArguments=null;this._lastCallTime=C3.FastGetDateNow()}_OnTimer(){this._timerId=-1;this._lastCallTime=C3.FastGetDateNow();this._RunCallback()}_CancelTimer(){if(this._timerId!==-1){self.clearTimeout(this._timerId);this._timerId=-1}}Release(){this._CancelTimer();this._callback=null;this._callbackArguments=null;this._timerCallFunc=null}}};


// ../lib/util/svgRaster/svgRasterManager.js
'use strict';{const C3=self.C3;C3.SVGRasterManager=class SVGRasterManager{constructor(){this._images=new Map;this._allowNpotSurfaces=false;this._getBaseSizeCallback=null;this._rasterAtSizeCallback=null;this._releaseResultCallback=null;this._redrawCallback=null}SetNpotSurfaceAllowed(a){this._allowNpotSurfaces=!!a}IsNpotSurfaceAllowed(){return this._allowNpotSurfaces}SetGetBaseSizeCallback(f){this._getBaseSizeCallback=f}GetBaseSize(dataSource){if(!this._getBaseSizeCallback)throw new Error("no get base size callback set");
return this._getBaseSizeCallback(dataSource)}SetRasterAtSizeCallback(f){this._rasterAtSizeCallback=f}RasterAtSize(dataSource,context,surfaceWidth,surfaceHeight,imageWidth,imageHeight){if(!this._rasterAtSizeCallback)throw new Error("no raster at size callback set");return this._rasterAtSizeCallback(dataSource,context,surfaceWidth,surfaceHeight,imageWidth,imageHeight)}SetReleaseResultCallback(f){this._releaseResultCallback=f}ReleaseResult(rasterizedResult){if(!this._releaseResultCallback)throw new Error("no release result callback set");
this._releaseResultCallback(rasterizedResult)}SetRedrawCallback(f){this._redrawCallback=f}Redraw(){if(!this._redrawCallback)throw new Error("no redraw callback set");this._redrawCallback()}AddImage(dataSource){let ret=this._images.get(dataSource);if(!ret){ret=C3.New(C3.SVGRasterImage,this,dataSource);this._images.set(dataSource,ret)}ret.IncReference();return ret}_RemoveImage(ri){this._images.delete(ri.GetDataSource())}}};


// ../lib/util/svgRaster/svgRasterImage.js
'use strict';{const C3=self.C3;const MAX_SURFACE_SIZE=2048;C3.SVGRasterImage=class SVGRasterImage{constructor(manager,dataSource){this._manager=manager;this._dataSource=dataSource;this._refCount=0;this._baseWidth=0;this._baseHeight=0;this._getBaseSizePromise=this._manager.GetBaseSize(dataSource).then(baseSize=>{this._baseWidth=baseSize[0];this._baseHeight=baseSize[1];this._manager.Redraw()}).catch(err=>{console.error("[SVG] Error loading SVG: ",err);this._hadError=true;this._manager.Redraw()});this._rasterSurfaceWidth=
0;this._rasterSurfaceHeight=0;this._rasterImageWidth=0;this._rasterImageHeight=0;this._isRasterizing=false;this._rasterizedResult=null;this._forceRaster=false;this._hadError=false}Release(){if(this._refCount<=0)throw new Error("already released");this._refCount--;if(this._refCount===0)this._Release()}_Release(){if(this._rasterizedResult){this._manager.ReleaseResult(this._rasterizedResult);this._rasterizedResult=null}this._manager._RemoveImage(this);this._manager=null}GetDataSource(){return this._dataSource}IncReference(){this._refCount++}HasReferences(){return this._refCount>
0}GetRasterizedResult(){return this._rasterizedResult}ForceRasterAgain(){this._forceRaster=true}async StartRasterForSize(context,width,height){if(width===0||height===0||this._hadError)return;if(this._isRasterizing)return;let rasterSurfaceWidth=C3.nextHighestPowerOfTwo(Math.ceil(width));let rasterSurfaceHeight=C3.nextHighestPowerOfTwo(Math.ceil(height));const maxDim=Math.max(rasterSurfaceWidth,rasterSurfaceHeight);if(maxDim>MAX_SURFACE_SIZE){const scale=MAX_SURFACE_SIZE/maxDim;width*=scale;height*=
scale;rasterSurfaceWidth=Math.min(Math.ceil(rasterSurfaceWidth*scale),MAX_SURFACE_SIZE);rasterSurfaceHeight=Math.min(Math.ceil(rasterSurfaceHeight*scale),MAX_SURFACE_SIZE)}if(width<rasterSurfaceWidth&&height<rasterSurfaceHeight){const imageAspectRatio=width/height;const surfaceAspectRatio=rasterSurfaceWidth/rasterSurfaceHeight;if(surfaceAspectRatio>imageAspectRatio){width=rasterSurfaceHeight*imageAspectRatio;height=rasterSurfaceHeight}else{width=rasterSurfaceWidth;height=rasterSurfaceWidth/imageAspectRatio}}if(this._manager.IsNpotSurfaceAllowed()){rasterSurfaceWidth=
Math.ceil(width);rasterSurfaceHeight=Math.ceil(height)}if(rasterSurfaceWidth<=this._rasterSurfaceWidth&&rasterSurfaceHeight<=this._rasterSurfaceHeight&&!this._forceRaster)return;this._isRasterizing=true;this._rasterSurfaceWidth=rasterSurfaceWidth;this._rasterSurfaceHeight=rasterSurfaceHeight;const newRasterizedResult=await this._manager.RasterAtSize(this._dataSource,context,this._rasterSurfaceWidth,this._rasterSurfaceHeight,width,height);if(this._rasterizedResult)this._manager.ReleaseResult(this._rasterizedResult);
this._rasterizedResult=newRasterizedResult;this._rasterImageWidth=width;this._rasterImageHeight=height;this._isRasterizing=false;this._forceRaster=false;this._manager.Redraw()}WhenBaseSizeReady(){return this._getBaseSizePromise}GetBaseWidth(){return this._baseWidth}GetBaseHeight(){return this._baseHeight}GetRasterWidth(){return this._rasterImageWidth}GetRasterHeight(){return this._rasterImageHeight}HadError(){return this._hadError}}};


// ../lib/str/str.js
'use strict';{const C3=self.C3;C3.UTF8_BOM="\ufeff";const NUMERIC_CHARS=new Set([..."0123456789"]);C3.IsNumericChar=function IsNumericChar(c){return NUMERIC_CHARS.has(c)};const WHITESPACE_CHARS=new Set([..." \t\n\r\u00a0\u0085\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u202f\u205f\u3000"]);C3.IsWhitespaceChar=function IsWhitespaceChar(c){return WHITESPACE_CHARS.has(c)};C3.FilterWhitespace=function FilterWhitespace(str){return[...str].filter(ch=>!C3.IsWhitespaceChar(ch)).join("")};
C3.IsStringAllWhitespace=function IsStringAllWhitespace(str){for(const ch of str)if(!C3.IsWhitespaceChar(ch))return false;return true};C3.IsUnprintableChar=function IsUnprintableChar(c){return c.length===1&&c.charCodeAt(0)<32};C3.FilterUnprintableChars=function FilterUnprintableChars(str){return[...str].filter(ch=>!C3.IsUnprintableChar(ch)).join("")};const NUMERIC_STRING_CHARS=new Set([..."0123456789.+-e"]);C3.IsStringNumber=function IsStringNumber(str){str=str.trim();if(!str.length)return false;
let firstChar=str.charAt(0);if(firstChar!=="-"&&!NUMERIC_CHARS.has(firstChar))return false;for(let ch of str)if(!NUMERIC_STRING_CHARS.has(ch))return false;return true};C3.RemoveTrailingDigits=function RemoveTrailingDigits(str){let i=str.length;while(i>0){let prev_ch=str.charAt(i-1);if(!C3.IsNumericChar(prev_ch))break;--i}return str.substr(0,i)};C3.IncrementNumberAtEndOf=function IncrementNumberAtEndOf(str){let baseStr=C3.RemoveTrailingDigits(str);let numberStr=str.substr(baseStr.length);if(numberStr)numberStr=
(parseInt(numberStr,10)+1).toString();else numberStr="2";return baseStr+numberStr};const HTML_ENTITY_MAP=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]);function lookupHtmlEntity(s){return HTML_ENTITY_MAP.get(s)}const HTML_ENTITY_REGEX=/[&<>"']/g;C3.EscapeHTML=function EscapeHTML(str){return str.replace(HTML_ENTITY_REGEX,lookupHtmlEntity)};C3.EscapeJS=function EscapeJS(str){let ret=C3.ReplaceAll(str,"\\","\\\\");ret=C3.ReplaceAll(ret,'"','\\"');ret=C3.ReplaceAll(ret,
"\t","\\t");ret=C3.ReplaceAll(ret,"\r","");return C3.ReplaceAll(ret,"\n","\\n")};C3.EscapeXML=function EscapeXML(str){let ret=C3.ReplaceAll(str,"&","&amp;");ret=C3.ReplaceAll(ret,"<","&lt;");ret=C3.ReplaceAll(ret,">","&gt;");return C3.ReplaceAll(ret,'"',"&quot;")};const ESCAPE_REGEX=/[-[\]{}()*+?.,\\^$|#\s]/g;C3.EscapeRegex=function EscapeRegex(str){return str.replace(ESCAPE_REGEX,"\\$&")};C3.FindAll=function FindAll(str,find,matchCase=false){if(!find)return[];if(!matchCase){str=str.toLowerCase();
find=find.toLowerCase()}const findLen=find.length;let startIndex=0;let index=0;let ret=[];while((index=str.indexOf(find,startIndex))>-1){ret.push(index);startIndex=index+findLen}return ret};C3.ReplaceAll=function ReplaceAll(str,find,replace){return str.replaceAll(find,()=>replace)};C3.ReplaceAllCaseInsensitive=function ReplaceAll(str,find,replace){return str.replace(new RegExp(C3.EscapeRegex(find),"gi"),()=>replace)};C3.SetElementContent=function SetElementContent(elem,stringlike){if(typeof stringlike===
"string")elem.textContent=stringlike;else if(stringlike.isPlainText())elem.textContent=stringlike.toString();else{elem.innerHTML=stringlike.toHTML();if(stringlike instanceof C3.BBString)stringlike.attachLinkHandlers(elem)}};C3.StringLikeEquals=function StringLikeEquals(a,b){if(a instanceof C3.HtmlString||a instanceof C3.BBString)return a.equals(b);else if(b instanceof C3.HtmlString||b instanceof C3.BBString)return b.equals(a);else return a===b};C3.StringSubstitute=function StringSubstitute(str,...arr){let ret=
str;for(let i=0,len=arr.length;i<len;++i){const sub=`{${i}}`;if(!str.includes(sub))throw new Error(`missing placeholder '${sub}' in string substitution`);ret=ret.replace(sub,arr[i].toString())}return ret};C3.StringSubstituteAllowMissing=function StringSubstituteAllowMissing(str,...arr){let ret=str;let lowestMissingIndex=-1;let highestUsedIndex=-1;for(let i=0,len=arr.length;i<len;++i){const sub=`{${i}}`;if(str.includes(sub)){highestUsedIndex=i;ret=ret.replace(sub,arr[i].toString())}else if(lowestMissingIndex===
-1)lowestMissingIndex=i}if(lowestMissingIndex>=0&&highestUsedIndex>=0&&lowestMissingIndex<highestUsedIndex)throw new Error(`missing placeholder '${lowestMissingIndex}' in string substitution`);return ret};C3.StringSubstituteMap=function StringSubstituteMap(str,o){let ret=str;for(let [placeholder,substitution]of Object.entries(o))ret=ret.replaceAll(placeholder,substitution.toString());return ret};C3.SortAZCaseInsensitive=function SortAZCaseInsensitive(a,b){let lowerA=a.toLowerCase();let lowerB=b.toLowerCase();
if(lowerA>lowerB)return 1;else if(lowerA<lowerB)return-1;else return 0};const KILOBYTE=1024;const MEGABYTE=KILOBYTE*1024;const GIGABYTE=MEGABYTE*1024;const TERABYTE=GIGABYTE*1024;C3.FormatDataSize=function FormatDataSize(sizeInBytes,asRate){let rootKey="common."+(asRate?"dataRates":"dataSizes")+".";const langSub=self.langSub;if(sizeInBytes<KILOBYTE)return langSub(rootKey+"bytes",sizeInBytes);else if(sizeInBytes<MEGABYTE){let kb=sizeInBytes/KILOBYTE;if(kb<10)kb=Math.round(kb*10)/10;else kb=Math.round(kb);
return langSub(rootKey+"kilobytes",kb)}else if(sizeInBytes<GIGABYTE){let mb=sizeInBytes/MEGABYTE;if(mb<10)mb=Math.round(mb*10)/10;else mb=Math.round(mb);return langSub(rootKey+"megabytes",mb)}else if(sizeInBytes<TERABYTE){let gb=sizeInBytes/GIGABYTE;if(gb<10)gb=Math.round(gb*10)/10;else gb=Math.round(gb);return langSub(rootKey+"gigabytes",gb)}else{let tb=sizeInBytes/TERABYTE;if(tb<10)tb=Math.round(tb*10)/10;else tb=Math.round(tb);return langSub(rootKey+"terabytes",tb)}};const DEFAULT_FORMATTIME_OPTS=
{approximate:false,days:true,hours:true,minutes:true,seconds:true};C3.FormatTime=function FormatTime(secondsTotal,opts){opts=Object.assign({},DEFAULT_FORMATTIME_OPTS,opts);C3.Lang.PushContext("common.time");const parts=[];const lang=self.lang;const langPluralSub=self.langPluralSub;if(opts.days){const days=Math.floor(secondsTotal/(24*3600));if(days>0){secondsTotal-=days*24*3600;parts.push(langPluralSub(".days",null,days))}}if(opts.hours){const hours=Math.floor(secondsTotal/3600);if(hours>0||parts.length){secondsTotal-=
hours*3600;parts.push(langPluralSub(".hours",null,hours))}}if(opts.minutes){const minutes=Math.floor(secondsTotal/60);if(minutes>0||parts.length||!opts.seconds){secondsTotal-=minutes*60;parts.push(langPluralSub(".minutes",null,minutes))}}if(opts.seconds){const seconds=Math.floor(secondsTotal%60);parts.push(langPluralSub(".seconds",null,seconds))}const ret=(opts.approximate?lang(".approx-prefix"):"")+parts.join(lang(".separator"));C3.Lang.PopContext();return ret};C3.ZeroPad=function(n,d){let s=n<0?
"-":"";n=Math.abs(n);let nStr=n.toString();let zeroes=d-nStr.length;for(let i=0;i<zeroes;++i)s+="0";return s+nStr};C3.StringToTitleCase=function StringToTitleCase(str){return str.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())};C3.CompareVersionStrings=function CompareVersionStrings(v1,v2){let a1=v1.split(".").map(s=>s.trim());let a2=v2.split(".").map(s=>s.trim());C3.resizeArray(a1,4,"0");C3.resizeArray(a2,4,"0");a1=a1.map(s=>parseInt(s,10));a2=a2.map(s=>parseInt(s,10));for(let i=0;i<4;++i){const diff=
a1[i]-a2[i];if(diff!==0)return diff<0?-1:1}return 0};C3.CreateGUID=function CreateGUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,c=>{const r=Math.floor(Math.random()*16);const v=c==="x"?r:r&3|8;return v.toString(16)})};C3.StringHammingDistance=function StringHammingDistance(a,b){if(a.length!==b.length)throw new Error("strings must be same length");let ret=0;for(let i=0,len=a.length;i<len;++i)if(a.charAt(i)!==b.charAt(i))++ret;return ret};C3.StringLevenshteinDistance=function StringLevenshteinDistance(a,
b){if(a.length===0)return b.length;if(b.length===0)return a.length;let tmp,i,j,prev,val,row;if(a.length>b.length){tmp=a;a=b;b=tmp}row=Array(a.length+1);for(i=0;i<=a.length;i++)row[i]=i;for(i=1;i<=b.length;i++){prev=i;for(j=1;j<=a.length;j++){if(b[i-1]===a[j-1])val=row[j-1];else val=Math.min(row[j-1]+1,Math.min(prev+1,row[j]+1));row[j-1]=prev;prev=val}row[a.length]=prev}return row[a.length]}};


// ../lib/str/bbstring.js
'use strict';{const C3=self.C3;const assert=self.assert;const BB_CODE_MAP=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span",
"bbCodeItem"]]]);const BBREGEX=/\[(\/?)([a-zA-Z0-9]+)\]/g;const CUSTOM_BBREGEX=/\[(\/?)([^\[]*?)\]/g;let linkActions=null;let classIndex=0;function bbToHtmlReplacerFunc(match,closeSlash,tagName){const entry=BB_CODE_MAP.get(tagName);if(entry)if(typeof entry==="string")if(entry==="a"&&!closeSlash){const index=parseInt(tagName.substring(1),10)-1;if(index<0||index>=linkActions.length)throw new Error("invalid bbcode link substitution");const linkAction=linkActions[index];if(typeof linkAction==="string")return`<a href="${linkActions[index]}">`;
else if(typeof linkAction==="function")return`<a class="bblink${index}">`;else throw new TypeError("invalid bbcode link action");}else return"<"+closeSlash+entry+">";else if(Array.isArray(entry)){let tag=entry[0];let className=entry[1];if(closeSlash)return"</"+tag+">";else return`<${tag} class="${className}">`}else;else if(tagName==="class")if(closeSlash)return"</span>";else return`<span class="bbclass${classIndex++}">`;else return match}const LINEBREAK_REGEX=/\n/g;C3.BBString=class BBString{constructor(str,
opts){this._bbstr=opts&&opts.noEscape?str:C3.EscapeHTML(str);this._htmlstr="";this._convertLineBreaks=false;this._linkActions=[];if(opts){this._convertLineBreaks=!!opts.convertLineBreaks;if(opts.links){if(opts.links.length>9)throw new Error("too many links");this._linkActions=opts.links}}this._hasAnyBBtags=this._bbstr.includes("[");this._needsLineBreakConversion=this._convertLineBreaks&&this._bbstr.includes("\n");this._isPlain=!this._hasAnyBBtags&&!this._needsLineBreakConversion&&!this._bbstr.includes("&");
this._hasParsedFragments=false;this._fragments=[]}toString(){return this._bbstr}valueOf(){return this._bbstr}isPlainText(){return this._isPlain}toPlainText(){if(this._hasAnyBBtags)return this._bbstr.replace(BBREGEX,"");else return this._bbstr}toHTML(){if(this._isPlain)return this._bbstr;if(!this._htmlstr&&this._bbstr){let str=this._bbstr;if(this._hasAnyBBtags){classIndex=0;linkActions=this._linkActions;str=str.replace(BBREGEX,bbToHtmlReplacerFunc);linkActions=null}if(this._needsLineBreakConversion)str=
str.replace(LINEBREAK_REGEX,"<br>");this._htmlstr=str}return this._htmlstr}attachLinkHandlers(parentElem){if(!this._linkActions.length)return;for(let i=0,len=this._linkActions.length;i<len;++i){const linkAction=this._linkActions[i];if(typeof linkAction!=="function")continue;const linkElem=parentElem.querySelector(".bblink"+i);if(!linkElem)throw new Error("unable to attach BBString link handler");linkElem.onclick=linkAction}}equals(s){if(s instanceof C3.HtmlString)return this.toHTML()===s.toHTML();
else if(s instanceof C3.BBString)return this._bbstr===s._bbstr;else return this._bbstr===s}toFragmentList(){if(this._hasParsedFragments)return this._fragments;const bbStr=this._bbstr;const styleStack=[];CUSTOM_BBREGEX.lastIndex=0;let prevIndex=0;let result=null;while((result=CUSTOM_BBREGEX.exec(bbStr))!==null){const index=result.index;if(index>0&&bbStr.charAt(index-1)==="\\")continue;const matchStr=result[0];const closeSlash=result[1];const tagName=result[2];const strFrag=bbStr.substring(prevIndex,
index);prevIndex=index+matchStr.length;if(strFrag)this._fragments.push({text:strFrag,styles:styleStack.slice(0)});if(!tagName)continue;if(closeSlash){const lowerTagName=tagName.toLowerCase();for(let i=styleStack.length-1;i>=0;--i)if(styleStack[i].tag===lowerTagName){styleStack.splice(i,1);break}}else{let tag=tagName;let param=null;const eq=tagName.indexOf("=");if(eq!==-1){tag=tagName.substring(0,eq).toLowerCase();param=tagName.substring(eq+1)}else tag=tag.toLowerCase();styleStack.push({tag,param})}}if(prevIndex<
bbStr.length)this._fragments.push({text:bbStr.substring(prevIndex),styles:styleStack.slice(0)});for(const frag of this._fragments)frag.text=this._ProcessBBCodeEscapeSequences(frag.text);this._hasParsedFragments=true;return this._fragments}_ProcessBBCodeEscapeSequences(text){text=C3.ReplaceAll(text,"\\[","[");return C3.ReplaceAll(text,"\\\\","\\")}static StripTags(str){return C3.New(C3.BBString,str,{noEscape:true}).toPlainText()}static StripAnyTags(str){return str.replace(CUSTOM_BBREGEX,"")}}};


// ../lib/str/wordWrap.js
'use strict';{const C3=self.C3;C3.WordWrap=class WordWrap{constructor(){this._lines=[]}GetLines(){return this._lines}GetLineCount(){return this._lines.length}_MeasureLine(line,measureFunc){let width=0;let height=0;for(const frag of line){if(frag.width===-1){const m=measureFunc(frag.text,frag.styles);frag.width=m.width;frag.height=m.height}width+=frag.width;height=Math.max(height,frag.height)}return{width,height}}_AddLine(fragments,width,height){this._lines.push({fragments,width,height})}WordWrap(fragmentArr,
measureFunc,wrapWidth,wrapMode,endOfLineMargin){if(typeof fragmentArr==="string")fragmentArr=[{text:fragmentArr,styles:[]}];C3.clearArray(this._lines);if(!fragmentArr.length||fragmentArr.length===1&&!fragmentArr[0].text.length||wrapWidth<2)return;if(fragmentArr.length===1){const frag=fragmentArr[0];const text=frag.text;const styles=frag.styles;if(text.length<=100&&!text.includes("\n")){let {width,height}=measureFunc(text,styles);width+=endOfLineMargin;if(width<=wrapWidth){this._AddLine([{text,styles,
width,height}],width,height);return}}}let tokenisedFragments;if(wrapMode==="word")tokenisedFragments=this._TokeniseWords(fragmentArr);else{tokenisedFragments=[];for(const frag of fragmentArr)C3.appendArray(tokenisedFragments,[...frag.text].map(ch=>[{text:ch,styles:frag.styles}]))}this._WrapText(tokenisedFragments,measureFunc,wrapWidth,endOfLineMargin)}_TokeniseWords(fragmentArr){const ret=[];let curWord=[];let isCurWhitespace=false;for(const frag of fragmentArr){const text=frag.text;const styles=
frag.styles;for(const ch of text)if(ch==="\n"){if(curWord.length>0)ret.push(curWord);ret.push([{text:"\n",styles}]);curWord=[]}else if(curWord.length===0){curWord.push({text:ch,styles});isCurWhitespace=C3.IsWhitespaceChar(ch)}else{const isWhitespace=C3.IsWhitespaceChar(ch);if(isWhitespace===isCurWhitespace){const curFrag=curWord[curWord.length-1];if(curFrag.styles===styles)curFrag.text+=ch;else curWord.push({text:ch,styles})}else{ret.push(curWord);curWord=[];curWord.push({text:ch,styles});isCurWhitespace=
isWhitespace}}}if(curWord.length>0)ret.push(curWord);return ret}_CopyLine(line){return line.map(f=>({text:f.text,styles:f.styles,width:f.width,height:f.height}))}_AddWordToLine(currentLine,curWord){const lastFrag=currentLine.length?currentLine[currentLine.length-1]:null;let i=0;if(lastFrag&&curWord[0].styles===lastFrag.styles){lastFrag.text+=curWord[0].text;lastFrag.width=-1;lastFrag.height=-1;i=1}for(let len=curWord.length;i<len;++i){const f=curWord[i];currentLine.push({text:f.text,styles:f.styles,
width:-1,height:-1})}}_WrapText(tokenisedFragments,measureFunc,wrapWidth,endOfLineMargin){let currentLine=[];let currentLineWidth=0;let currentLineHeight=0;for(const curWord of tokenisedFragments){if(curWord.length===1&&curWord[0].text==="\n"){if(currentLineHeight===0)currentLineHeight=measureFunc(" ",curWord[0].styles).height;this._AddLine(currentLine,currentLineWidth,currentLineHeight);currentLine=[];currentLineWidth=0;currentLineHeight=0;continue}const tryLine=this._CopyLine(currentLine);this._AddWordToLine(tryLine,
curWord);const tryMetrics=this._MeasureLine(tryLine,measureFunc);const tryLineWidth=tryMetrics.width;const tryLineHeight=tryMetrics.height;if(tryLineWidth>=wrapWidth){if(currentLine.length>0)this._AddLine(currentLine,currentLineWidth,currentLineHeight);currentLine=[];if(C3.IsStringAllWhitespace(curWord[0].text)){currentLineWidth=0;currentLineHeight=0}else{this._AddWordToLine(currentLine,curWord);const metrics=this._MeasureLine(currentLine,measureFunc);currentLineWidth=metrics.width;currentLineHeight=
metrics.height}}else{currentLine=tryLine;currentLineWidth=tryLineWidth;currentLineHeight=tryLineHeight}}if(currentLine.length>0)this._AddLine(currentLine,currentLineWidth,currentLineHeight);this._TrimLinesTrailingWhitespace(measureFunc,endOfLineMargin)}_TrimLinesTrailingWhitespace(measureFunc,endOfLineMargin){for(const line of this._lines){const fragments=line.fragments;if(!fragments.length)continue;let lastFrag=fragments[fragments.length-1];const text=lastFrag.text;const trimmedText=text.trimEnd();
if(!trimmedText){line.width-=lastFrag.width;fragments.pop()}else if(trimmedText.length<text.length){const trimmedWidth=measureFunc(trimmedText,lastFrag.styles).width;const diff=lastFrag.width-trimmedWidth;lastFrag.width=trimmedWidth;lastFrag.text=trimmedText;line.width-=diff}if(endOfLineMargin!==0&&fragments.length>0){lastFrag=fragments[fragments.length-1];lastFrag.width+=endOfLineMargin;line.width+=endOfLineMargin}}}Clear(){C3.clearArray(this._lines)}GetMaxLineWidth(){return this._lines.reduce((a,
v)=>Math.max(a,v.width),0)}GetTotalLineHeight(){return this._lines.reduce((a,v)=>a+v.height,0)}}};


// ../lib/gfx/gfx.js
'use strict';self.C3.Gfx={};


// ../lib/gfx/rendererBase.js
'use strict';{const C3=self.C3;const PERSPECTIVE_NEAR_Z=1;const PERSPECTIVE_FAR_Z=1E4;const fTempo=[0,0,0,0,0,0,0,0];const glMatrix=self.glMatrix;const vec3=glMatrix.vec3;const mat4=glMatrix.mat4;const tmpVec3=vec3.fromValues(0,0,0);C3.Gfx.RendererBase=class RendererBase{constructor(){this._width=0;this._height=0;this._cam=vec3.fromValues(0,0,100);this._look=vec3.fromValues(0,0,0);this._up=vec3.fromValues(0,1,0);this._worldScale=vec3.fromValues(1,1,1);this._matP=mat4.create();this._matMV=mat4.create();
this._lastMV=mat4.create();this._allShaderPrograms=[];this._shaderProgramsByName=new Map;this._spTextureFill=null;this._stateGroups=new Map;this._currentStateGroup=null;this._blendModeTable=[];this._namedBlendModeMap=new Map;this._frameNumber=0;this._enableMipmaps=true}FillIndexBufferData(indexData){let i=0,len=indexData.length,fv=0;while(i<len){indexData[i++]=fv;indexData[i++]=fv+1;indexData[i++]=fv+2;indexData[i++]=fv;indexData[i++]=fv+2;indexData[i++]=fv+3;fv+=4}}Project(x,y,w,h,out){const mv=
this._matMV;const proj=this._matP;for(let i=0,len=fTempo.length;i<len;++i)fTempo[i]=0;fTempo[0]=mv[0]*x+mv[4]*y+mv[12];fTempo[1]=mv[1]*x+mv[5]*y+mv[13];fTempo[2]=mv[2]*x+mv[6]*y+mv[14];fTempo[3]=mv[3]*x+mv[7]*y+mv[15];fTempo[4]=proj[0]*fTempo[0]+proj[4]*fTempo[1]+proj[8]*fTempo[2]+proj[12]*fTempo[3];fTempo[5]=proj[1]*fTempo[0]+proj[5]*fTempo[1]+proj[9]*fTempo[2]+proj[13]*fTempo[3];fTempo[6]=proj[2]*fTempo[0]+proj[6]*fTempo[1]+proj[10]*fTempo[2]+proj[14]*fTempo[3];fTempo[7]=-fTempo[2];if(fTempo[7]===
0)return;fTempo[7]=1/fTempo[7];fTempo[4]*=fTempo[7];fTempo[5]*=fTempo[7];fTempo[6]*=fTempo[7];out[0]=(fTempo[4]*.5+.5)*w;out[1]=(fTempo[5]*.5+.5)*h}GetWidth(){return this._width}GetHeight(){return this._height}GetNearZ(){return PERSPECTIVE_NEAR_Z}GetFarZ(){return PERSPECTIVE_FAR_Z}SetCameraXYZ(x,y,z){this._cam[0]=x*this._worldScale[0];this._cam[1]=y*this._worldScale[1];this._cam[2]=z}SetLookXYZ(x,y,z){this._look[0]=x*this._worldScale[0];this._look[1]=y*this._worldScale[1];this._look[2]=z}ResetModelView(alternateUpVector){mat4.lookAt(this._matMV,
this._cam,this._look,alternateUpVector||this._up);mat4.scale(this._matMV,this._matMV,this._worldScale)}Translate(x,y){if(x===0&&y===0)return;tmpVec3[0]=x;tmpVec3[1]=y;tmpVec3[2]=0;mat4.translate(this._matMV,this._matMV,tmpVec3)}Scale(x,y){if(x===1&&y===1)return;tmpVec3[0]=x;tmpVec3[1]=y;tmpVec3[2]=1;mat4.scale(this._matMV,this._matMV,tmpVec3)}RotateZ(a){if(a===0)return;mat4.rotateZ(this._matMV,this._matMV,a)}_AddShaderProgram(sp){this._allShaderPrograms.push(sp);this._shaderProgramsByName.set(sp.GetName(),
sp)}_RemoveShaderProgram(sp){const i=this._allShaderPrograms.indexOf(sp);if(i!==-1)this._allShaderPrograms.splice(i,1);this._shaderProgramsByName.delete(sp.GetName())}_ClearAllShaderPrograms(){C3.clearArray(this._allShaderPrograms);this._shaderProgramsByName.clear()}GetShaderProgramByName(name){return this._shaderProgramsByName.get(name)||null}GetTextureFillShaderProgram(){return this._spTextureFill}_SetCurrentStateGroup(sg){this._currentStateGroup=sg}GetCurrentStateGroup(){return this._currentStateGroup}AcquireStateGroup(shaderProgram_or_name,
blendMode,color,zElevation){const key=C3.Gfx.StateGroup.MakeKey(shaderProgram_or_name,blendMode,color,zElevation);let stateGroup=this._stateGroups.get(key);if(!stateGroup){stateGroup=C3.New(C3.Gfx.StateGroup,this,shaderProgram_or_name,blendMode,color,zElevation);this._stateGroups.set(key,stateGroup)}stateGroup.AddRef();return stateGroup}ReleaseStateGroup(stateGroup){stateGroup.DecRef();if(stateGroup._GetRefCount()===0){if(this._currentStateGroup===stateGroup)this._currentStateGroup=null;this._stateGroups.delete(stateGroup.GetKey());
stateGroup.Release()}}_InitBlendModeData(blendModeData){C3.clearArray(this._blendModeTable);this._namedBlendModeMap.clear();for(const bmd of blendModeData){const name=bmd[0];const srcBlend=bmd[1];const destBlend=bmd[2];this._blendModeTable.push([srcBlend,destBlend]);this._namedBlendModeMap.set(name,{srcBlend,destBlend})}}_GetBlendByIndex(blendIndex){return this._blendModeTable[blendIndex]}GetSrcBlendByIndex(blendIndex){return this._GetBlendByIndex(blendIndex)[0]}GetDestBlendByIndex(blendIndex){return this._GetBlendByIndex(blendIndex)[1]}GetNamedBlend(blendName){const ret=
this._namedBlendModeMap.get(blendName);if(typeof ret==="undefined")throw new Error("invalid blend name");return ret}Finish(){this.EndBatch();this._frameNumber++}GetFrameNumber(){return this._frameNumber}IncrementFrameNumber(){this._frameNumber++}SetMipmapsEnabled(e){this._enableMipmaps=!!e}AreMipmapsEnabled(){return this._enableMipmaps}}};


// ../lib/gfx/stateGroup.js
'use strict';{const C3=self.C3;C3.Gfx.StateGroup=class StateGroup{constructor(renderer,shaderProgram_or_name,blendMode,color,zElevation){this._renderer=renderer;this._refCount=0;this._shaderProgram=null;this._shaderProgramName="";this._blendMode=blendMode;this._color=C3.New(C3.Color);this._color.set(color);this._zElevation=zElevation;if(typeof shaderProgram_or_name==="string")this._shaderProgramName=shaderProgram_or_name;else{this._shaderProgram=shaderProgram_or_name;this._shaderProgramName=this._shaderProgram.GetName()}}Release(){if(this._refCount>
0)throw new Error("releasing state group still in use");this._renderer=null;this._shaderProgram=null;this._shaderProgramName=""}Apply(){const renderer=this._renderer;renderer.SetProgram(this._shaderProgram);renderer.SetBlendMode(this._blendMode);renderer.SetColor(this._color);renderer.SetCurrentZ(this._zElevation);renderer._SetCurrentStateGroup(this)}GetKey(){return C3.Gfx.StateGroup.MakeKey(this._shaderProgramName,this._blendMode,this._color,this._zElevation)}AddRef(){++this._refCount}DecRef(){--this._refCount}_GetRefCount(){return this._refCount}OnContextLost(){this._shaderProgram=
null}OnContextRestored(renderer){this._shaderProgram=renderer.GetShaderProgramByName(this._shaderProgramName);if(!this._shaderProgram)throw new Error("failed to restore shader program");}static MakeKey(shaderProgram_or_name,blendMode,c,zElevation){const shaderProgramName=typeof shaderProgram_or_name==="string"?shaderProgram_or_name:shaderProgram_or_name.GetName();return shaderProgramName+","+blendMode+","+c.getR()+","+c.getG()+","+c.getB()+","+c.getA()+","+zElevation}}};


// ../lib/gfx/mesh.js
'use strict';{const C3=self.C3;const tempQuadPos=C3.New(C3.Quad);const tempQuadTex=C3.New(C3.Quad);function interpolateQuad(srcX,srcY,quad){const qtlx=quad.getTlx();const qtly=quad.getTly();const qtrx=quad.getTrx()-qtlx;const qtry=quad.getTry()-qtly;const qblx=quad.getBlx()-qtlx;const qbly=quad.getBly()-qtly;const xix=qtrx*srcX;const xiy=qtry*srcX;const yix=qblx*srcY;const yiy=qbly*srcY;return[qtlx+xix+yix,qtly+xiy+yiy]}class MeshPoint{constructor(mesh){this._mesh=mesh;this._x=NaN;this._y=NaN;this._u=
NaN;this._v=NaN;this._x=0;this._y=0;this._u=0;this._v=0}_Init(x,y,u,v){this._x=x;this._y=y;this._u=u;this._v=v}GetX(){return this._x}SetX(x){if(this._x===x)return;this._x=x;this._mesh._SetPointsChanged()}GetY(){return this._y}SetY(y){if(this._y===y)return;this._y=y;this._mesh._SetPointsChanged()}GetU(){return this._u}SetU(u){this._u=u}GetV(){return this._v}SetV(v){this._v=v}_Interpolate_TexRect(srcPoint,quadPos,rcTex){[this._x,this._y]=interpolateQuad(srcPoint._x,srcPoint._y,quadPos);this._u=C3.lerp(rcTex.getLeft(),
rcTex.getRight(),srcPoint._u);this._v=C3.lerp(rcTex.getTop(),rcTex.getBottom(),srcPoint._v)}_Interpolate_TexQuad(srcPoint,quadPos,quadTex){[this._x,this._y]=interpolateQuad(srcPoint._x,srcPoint._y,quadPos);[this._u,this._v]=interpolateQuad(srcPoint._u,srcPoint._v,quadTex)}SaveToJson(){return{"x":this.GetX(),"y":this.GetY(),"u":this.GetU(),"v":this.GetV()}}LoadFromJson(o){this.SetX(o["x"]);this.SetY(o["y"]);this.SetU(o["u"]);this.SetV(o["v"])}}C3.Gfx.Mesh=class Mesh{constructor(hsize,vsize){if(hsize<
2||vsize<2)throw new Error("invalid mesh size");this._hsize=hsize;this._vsize=vsize;this._pts=[];this._minX=0;this._minY=0;this._maxX=1;this._maxY=1;this._pointsChanged=false;const lastX=hsize-1;const lastY=vsize-1;for(let y=0;y<vsize;++y){const row=[];for(let x=0;x<hsize;++x){const meshPoint=C3.New(MeshPoint,this);const xf=x/lastX;const yf=y/lastY;meshPoint._Init(xf,yf,xf,yf);row.push(meshPoint)}this._pts.push(row)}}Release(){C3.clearArray(this._pts)}GetHSize(){return this._hsize}GetVSize(){return this._vsize}_GetPoints(){return this._pts}_SetPointsChanged(){this._pointsChanged=
true}_MaybeComputeBounds(){if(!this._pointsChanged)return;let minX=Infinity;let minY=Infinity;let maxX=-Infinity;let maxY=-Infinity;for(const row of this._pts)for(const meshPoint of row){const x=meshPoint.GetX();const y=meshPoint.GetY();minX=Math.min(minX,x);minY=Math.min(minY,y);maxX=Math.max(maxX,x);maxY=Math.max(maxY,y)}this._minX=minX;this._minY=minY;this._maxX=maxX;this._maxY=maxY;this._pointsChanged=false}GetMinX(){this._MaybeComputeBounds();return this._minX}GetMinY(){this._MaybeComputeBounds();
return this._minY}GetMaxX(){this._MaybeComputeBounds();return this._maxX}GetMaxY(){this._MaybeComputeBounds();return this._maxY}GetMeshPointAt(x,y){x=Math.floor(x);y=Math.floor(y);if(x<0||x>=this._hsize||y<0||y>=this._vsize)return null;return this._pts[y][x]}CalculateTransformedMesh(srcMesh,quadPos,rcTex_or_quad){const isTexRect=rcTex_or_quad instanceof C3.Rect;if(srcMesh.GetHSize()!==this.GetHSize()||srcMesh.GetVSize()!==this.GetVSize())throw new Error("source mesh wrong size");const srcPts=srcMesh._pts;
const destPts=this._pts;for(let y=0,lenY=destPts.length;y<lenY;++y){const srcRow=srcPts[y];const destRow=destPts[y];for(let x=0,lenX=destRow.length;x<lenX;++x){const srcPoint=srcRow[x];const destPoint=destRow[x];if(isTexRect)destPoint._Interpolate_TexRect(srcPoint,quadPos,rcTex_or_quad);else destPoint._Interpolate_TexQuad(srcPoint,quadPos,rcTex_or_quad)}}}Draw(renderer){const pts=this._pts;let prevRow=pts[0];for(let y=1,lenY=pts.length;y<lenY;++y){const row=pts[y];let tl=prevRow[0];let bl=row[0];
for(let x=1,lenX=row.length;x<lenX;++x){const tr=prevRow[x];const br=row[x];tempQuadPos.set(tl.GetX(),tl.GetY(),tr.GetX(),tr.GetY(),br.GetX(),br.GetY(),bl.GetX(),bl.GetY());tempQuadTex.set(tl.GetU(),tl.GetV(),tr.GetU(),tr.GetV(),br.GetU(),br.GetV(),bl.GetU(),bl.GetV());renderer.Quad4(tempQuadPos,tempQuadTex);tl=tr;bl=br}prevRow=row}}Outline(renderer,transformFunc){if(!transformFunc)transformFunc=(x,y)=>[x,y];const pts=this._pts;let prevRow=pts[0];for(let y=1,lenY=pts.length;y<lenY;++y){const row=
pts[y];let tl=prevRow[0];let bl=row[0];for(let x=1,lenX=row.length;x<lenX;++x){const tr=prevRow[x];const br=row[x];const [tlx,tly]=transformFunc(tl.GetX(),tl.GetY());const [trx,try_]=transformFunc(tr.GetX(),tr.GetY());const [brx,bry]=transformFunc(br.GetX(),br.GetY());const [blx,bly]=transformFunc(bl.GetX(),bl.GetY());renderer.Line(tlx,tly,trx,try_);renderer.Line(tlx,tly,brx,bry);renderer.Line(tlx,tly,blx,bly);if(x===lenX-1)renderer.Line(trx,try_,brx,bry);if(y===lenY-1)renderer.Line(blx,bly,brx,bry);
tl=tr;bl=br}prevRow=row}}InsertPolyMeshVertices(srcPoly){const RAY_EXT_DIST=.001;const MIN_RAY_DIST=0;const MAX_RAY_DIST=.99999999;const inPts=srcPoly.pointsArr();const outPts=[];const colCount=this.GetHSize()-1;const rowCount=this.GetVSize()-1;const colWidthNorm=1/colCount;const rowHeightNorm=1/rowCount;const lastCol=colCount-1;const lastRow=rowCount-1;let curX=inPts[0];let curY=inPts[1];let curCol=C3.clamp(Math.floor(curX*colCount),0,lastCol);let curRow=C3.clamp(Math.floor(curY*rowCount),0,lastRow);
let isUpper=true;let nextX=0;let nextY=0;let rayHit=0;const NOTHING_DISABLED=-1;const DISABLE_DIAGONAL=0;const DISABLE_LEFT_EDGE=1;const DISABLE_TOP_EDGE=2;const DISABLE_RIGHT_EDGE=3;const DISABLE_BOTTOM_EDGE=4;let disableCheck=NOTHING_DISABLED;const addVertexAtRayHit=()=>{curX=C3.clamp(C3.lerp(curX,nextX,rayHit),0,1);curY=C3.clamp(C3.lerp(curY,nextY,rayHit),0,1);outPts.push(curX,curY)};for(let i=0,len=inPts.length;i<len;i+=2){curX=inPts[i];curY=inPts[i+1];outPts.push(curX,curY);curCol=C3.clamp(Math.floor(curX*
colCount),0,lastCol);curRow=C3.clamp(Math.floor(curY*rowCount),0,lastRow);const j=(i+2)%len;nextX=inPts[j];nextY=inPts[j+1];disableCheck=NOTHING_DISABLED;while(true){if(outPts.length>1E6)throw new Error("Too many mesh poly points");const srcTlx=curCol*colWidthNorm;const srcTly=curRow*rowHeightNorm;const srcBrx=(curCol+1)*colWidthNorm;const srcBry=(curRow+1)*rowHeightNorm;isUpper=C3.isPointInTriangleInclusive(curX,curY,srcTlx,srcTly,srcBrx,srcTly,srcBrx,srcBry);if(disableCheck!==DISABLE_DIAGONAL){rayHit=
C3.rayIntersectExtended(curX,curY,nextX,nextY,srcTlx,srcTly,srcBrx,srcBry,-RAY_EXT_DIST);if(rayHit>=MIN_RAY_DIST&&rayHit<=MAX_RAY_DIST){addVertexAtRayHit();isUpper=!isUpper;disableCheck=DISABLE_DIAGONAL;continue}}if(curRow>0&&disableCheck!==DISABLE_TOP_EDGE){rayHit=C3.rayIntersectExtended(curX,curY,nextX,nextY,srcTlx,srcTly,srcBrx,srcTly,RAY_EXT_DIST);if(rayHit>=MIN_RAY_DIST&&rayHit<=MAX_RAY_DIST){addVertexAtRayHit();curRow--;isUpper=false;disableCheck=DISABLE_BOTTOM_EDGE;continue}}if(curCol<lastCol&&
disableCheck!==DISABLE_RIGHT_EDGE){rayHit=C3.rayIntersectExtended(curX,curY,nextX,nextY,srcBrx,srcTly,srcBrx,srcBry,RAY_EXT_DIST);if(rayHit>=MIN_RAY_DIST&&rayHit<=MAX_RAY_DIST){addVertexAtRayHit();curCol++;isUpper=false;disableCheck=DISABLE_LEFT_EDGE;continue}}if(curCol>0&&disableCheck!==DISABLE_LEFT_EDGE){rayHit=C3.rayIntersectExtended(curX,curY,nextX,nextY,srcTlx,srcTly,srcTlx,srcBry,RAY_EXT_DIST);if(rayHit>=MIN_RAY_DIST&&rayHit<=MAX_RAY_DIST){addVertexAtRayHit();curCol--;isUpper=true;disableCheck=
DISABLE_RIGHT_EDGE;continue}}if(curRow<lastRow&&disableCheck!==DISABLE_BOTTOM_EDGE){rayHit=C3.rayIntersectExtended(curX,curY,nextX,nextY,srcTlx,srcBry,srcBrx,srcBry,RAY_EXT_DIST);if(rayHit>=MIN_RAY_DIST&&rayHit<=MAX_RAY_DIST){addVertexAtRayHit();curRow++;isUpper=true;disableCheck=DISABLE_TOP_EDGE;continue}}break}}return C3.New(C3.CollisionPoly,outPts)}TransformCollisionPoly(srcPoly,destPoly){const ptsArr=this._TransformPolyPoints(srcPoly);this._SimplifyPoly(ptsArr);destPoly.setPoints(ptsArr)}_TransformPolyPoints(srcPoly){const outPts=
[];const ptsArr=srcPoly.pointsArr();for(let i=0,len=ptsArr.length;i<len;i+=2){const srcX=ptsArr[i];const srcY=ptsArr[i+1];const [destX,destY]=this.TransformPoint(srcX,srcY);outPts.push(destX,destY)}return outPts}TransformPoint(srcX,srcY){const lastCol=this.GetHSize()-1;const lastRow=this.GetVSize()-1;const colWidthNorm=1/lastCol;const rowHeightNorm=1/lastRow;const srcCol=C3.clamp(Math.floor(srcX*lastCol),0,lastCol-1);const srcRow=C3.clamp(Math.floor(srcY*lastRow),0,lastRow-1);const srcTlx=srcCol*
colWidthNorm;const srcTly=srcRow*rowHeightNorm;const srcBrx=(srcCol+1)*colWidthNorm;const srcBry=(srcRow+1)*rowHeightNorm;const destTl=this.GetMeshPointAt(srcCol,srcRow);const destBr=this.GetMeshPointAt(srcCol+1,srcRow+1);const isUpper=C3.isPointInTriangleInclusive(srcX,srcY,srcTlx,srcTly,srcBrx,srcTly,srcBrx,srcBry);const srcAltX=isUpper?srcTlx+colWidthNorm:srcTlx;const srcAltY=isUpper?srcTly:srcTly+rowHeightNorm;const destAlt=this.GetMeshPointAt(srcCol+(isUpper?1:0),srcRow+(isUpper?0:1));const [u,
v,w]=C3.triangleCartesianToBarycentric(srcX,srcY,srcTlx,srcTly,srcAltX,srcAltY,srcBrx,srcBry);return C3.triangleBarycentricToCartesian(u,v,w,destTl.GetX(),destTl.GetY(),destAlt.GetX(),destAlt.GetY(),destBr.GetX(),destBr.GetY())}_SimplifyPoly(ptsArr){const outPts=[];const EPSILON=1E-7;let curX=ptsArr[0];let curY=ptsArr[1];let lastDx=curX-ptsArr[ptsArr.length-2];let lastDy=curY-ptsArr[ptsArr.length-1];for(let i=0,len=ptsArr.length;i<len;i+=2){const j=(i+2)%len;const nextX=ptsArr[j];const nextY=ptsArr[j+
1];const dx=nextX-curX;const dy=nextY-curY;const bothXNearZero=Math.abs(dx)<EPSILON&&Math.abs(lastDx)<EPSILON&&Math.sign(dy)===Math.sign(lastDy);const bothYNearZero=Math.abs(dy)<EPSILON&&Math.abs(lastDy)<EPSILON&&Math.sign(dx)===Math.sign(lastDx);if(!bothXNearZero&&!bothYNearZero&&Math.abs(dx/lastDx-dy/lastDy)>EPSILON||dx==0&&dy===0)outPts.push(curX,curY);curX=nextX;curY=nextY;lastDx=dx;lastDy=dy}if(outPts.length<ptsArr.length)C3.shallowAssignArray(ptsArr,outPts)}SaveToJson(){return{"cols":this.GetHSize(),
"rows":this.GetVSize(),"points":this._pts.map(row=>row.map(pt=>pt.SaveToJson()))}}LoadFromJson(o){const cols=this.GetHSize();const rows=this.GetVSize();if(o["cols"]!==cols||o["rows"]!==rows)throw new Error("mesh data wrong size");const meshRows=o["points"];for(let y=0;y<rows;++y){const rowData=meshRows[y];for(let x=0;x<cols;++x){const pt=this.GetMeshPointAt(x,y);pt.LoadFromJson(rowData[x])}}}}};


// ../lib/gfx/webgl/texture.js
'use strict';{const C3=self.C3;const VALID_PIXEL_FORMATS=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]);const VALID_SAMPLINGS=new Set(["nearest","bilinear","trilinear"]);const VALID_MIPMAP_QUALITIES=new Set(["default","low","high"]);const VALID_WRAP_MODES=new Set(["clamp-to-edge","repeat","mirror-repeat"]);function GetFormatSpecifiers(pixelFormat,gl){let sizedinternalformat;let internalformat;let format;let type;switch(pixelFormat){case "rgba8":sizedinternalformat=gl.RGBA8;internalformat=gl.RGBA;
format=gl.RGBA;type=gl.UNSIGNED_BYTE;break;case "rgb8":sizedinternalformat=gl.RGB8;internalformat=gl.RGB;format=gl.RGB;type=gl.UNSIGNED_BYTE;break;case "rgba4":sizedinternalformat=gl.RGBA4;internalformat=gl.RGBA;format=gl.RGBA;type=gl.UNSIGNED_SHORT_4_4_4_4;break;case "rgb5_a1":sizedinternalformat=gl.RGB5_A1;internalformat=gl.RGBA;format=gl.RGBA;type=gl.UNSIGNED_SHORT_5_5_5_1;break;case "rgb565":sizedinternalformat=gl.RGB565;internalformat=gl.RGB;format=gl.RGB;type=gl.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format");
}return{sizedinternalformat,internalformat,format,type}}const CREATEFROM_DEFAULT_OPTIONS={wrapX:"clamp-to-edge",wrapY:"clamp-to-edge",sampling:"trilinear",pixelFormat:"rgba8",mipMap:true,mipMapQuality:"default",premultiplyAlpha:true,isSvg:false,width:-1,height:-1};const UPDATE_DEFAULT_OPTIONS={premultiplyAlpha:true,flipY:false};const allTextures=new Set;C3.Gfx.WebGLRendererTexture=class WebGLRendererTexture{constructor(renderer){this._renderer=renderer;this._texture=null;this._width=0;this._height=
0;this._isStatic=true;this._wrapX="clamp-to-edge";this._wrapY="clamp-to-edge";this._sampling="trilinear";this._pixelFormat="rgba8";this._isMipMapped=false;this._mipMapQuality="default";this._refCount=0}_CreateStatic(data,opts){if((typeof HTMLImageElement==="undefined"||!(data instanceof HTMLImageElement))&&(typeof HTMLCanvasElement==="undefined"||!(data instanceof HTMLCanvasElement))&&(typeof ImageBitmap==="undefined"||!(data instanceof ImageBitmap))&&(typeof OffscreenCanvas==="undefined"||!(data instanceof
OffscreenCanvas))&&!(data instanceof ImageData)&&!(data instanceof ArrayBuffer)&&data!==null)throw new Error("invalid texture source");opts=Object.assign({},CREATEFROM_DEFAULT_OPTIONS,opts);if(this._texture)throw new Error("already created texture");this._wrapX=opts.wrapX;this._wrapY=opts.wrapY;this._sampling=opts.sampling;this._pixelFormat=opts.pixelFormat;this._isMipMapped=!!opts.mipMap&&this._renderer.AreMipmapsEnabled();this._mipMapQuality=opts.mipMapQuality;if(!VALID_WRAP_MODES.has(this._wrapX)||
!VALID_WRAP_MODES.has(this._wrapY))throw new Error("invalid wrap mode");if(!VALID_SAMPLINGS.has(this._sampling))throw new Error("invalid sampling");if(!VALID_PIXEL_FORMATS.has(this._pixelFormat))throw new Error("invalid pixel format");if(!VALID_MIPMAP_QUALITIES.has(this._mipMapQuality))throw new Error("invalid mipmap quality");this._isStatic=true;if(data instanceof ArrayBuffer||data===null||opts.isSvg){this._width=opts.width;this._height=opts.height;if(data instanceof ArrayBuffer&&data.byteLength!==
this._width*this._height*4)throw new Error("ArrayBuffer wrong size");}else{this._width=data.width;this._height=data.height}if(this._width<=0||this._height<=0)throw new Error("invalid texture data size");if(opts.isSvg){const canvas=C3.CreateCanvas(this._width,this._height);const ctx=canvas.getContext("2d");ctx.drawImage(data,0,0,this._width,this._height);data=canvas}const isPOT=C3.isPOT(this._width)&&C3.isPOT(this._height);const maxTextureSize=this._renderer.GetMaxTextureSize();if(this._width>maxTextureSize||
this._height>maxTextureSize)throw new Error("texture data exceeds maximum texture size");const gl=this._renderer.GetContext();const webglVersion=this._renderer.GetWebGLVersionNumber();this._texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,this._texture);gl.pixelStorei(gl["UNPACK_PREMULTIPLY_ALPHA_WEBGL"],opts.premultiplyAlpha);const formatspec=GetFormatSpecifiers(this._pixelFormat,gl);if(!this._renderer.SupportsNPOTTextures()&&!isPOT&&this._IsTiled()){if(data===null)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");
if(data instanceof ArrayBuffer)data=new ImageData(new Uint8ClampedArray(data),this._width,this._height);if(data instanceof ImageData){const tmpCanvas=C3.CreateCanvas(this._width,this._height);const tmpCtx=tmpCanvas.getContext("2d");tmpCtx.putImageData(data,0,0);data=tmpCanvas}const canvas=C3.CreateCanvas(C3.nextHighestPowerOfTwo(this._width),C3.nextHighestPowerOfTwo(this._height));const ctx=canvas.getContext("2d");ctx.imageSmoothingEnabled=this._sampling!=="nearest";ctx.drawImage(data,0,0,this._width,
this._height,0,0,canvas.width,canvas.height);gl.texImage2D(gl.TEXTURE_2D,0,formatspec.internalformat,formatspec.format,formatspec.type,canvas)}else if(webglVersion>=2){let levels;if(this._isMipMapped)levels=Math.floor(Math.log2(Math.max(this._width,this._height))+1);else levels=1;gl.texStorage2D(gl.TEXTURE_2D,levels,formatspec.sizedinternalformat,this._width,this._height);if(data instanceof ArrayBuffer)gl.texSubImage2D(gl.TEXTURE_2D,0,0,0,this._width,this._height,formatspec.format,formatspec.type,
new Uint8Array(data));else if(data!==null)gl.texSubImage2D(gl.TEXTURE_2D,0,0,0,formatspec.format,formatspec.type,data)}else if(data instanceof ArrayBuffer)gl.texImage2D(gl.TEXTURE_2D,0,formatspec.internalformat,this._width,this._height,0,formatspec.format,formatspec.type,new Uint8Array(data));else if(data===null)gl.texImage2D(gl.TEXTURE_2D,0,formatspec.internalformat,this._width,this._height,0,formatspec.format,formatspec.type,null);else gl.texImage2D(gl.TEXTURE_2D,0,formatspec.internalformat,formatspec.format,
formatspec.type,data);if(data!==null)this._SetTextureParameters(gl);gl.bindTexture(gl.TEXTURE_2D,null);this._renderer._ResetLastTexture();this._refCount=1;allTextures.add(this)}_CreateDynamic(width,height,opts){opts=Object.assign({},CREATEFROM_DEFAULT_OPTIONS,opts);if(this._texture)throw new Error("already created texture");this._wrapX=opts.wrapX;this._wrapY=opts.wrapY;this._sampling=opts.sampling;this._pixelFormat=opts.pixelFormat;this._isMipMapped=!!opts.mipMap&&this._renderer.AreMipmapsEnabled();
this._mipMapQuality=opts.mipMapQuality;if(!VALID_WRAP_MODES.has(this._wrapX)||!VALID_WRAP_MODES.has(this._wrapY))throw new Error("invalid wrap mode");if(!VALID_SAMPLINGS.has(this._sampling))throw new Error("invalid sampling");if(!VALID_PIXEL_FORMATS.has(this._pixelFormat))throw new Error("invalid pixel format");if(!VALID_MIPMAP_QUALITIES.has(this._mipMapQuality))throw new Error("invalid mipmap quality");this._isStatic=false;this._width=Math.floor(width);this._height=Math.floor(height);const isPOT=
C3.isPOT(this._width)&&C3.isPOT(this._height);const maxTextureSize=this._renderer.GetMaxTextureSize();if(this._width<=0||this._height<=0)throw new Error("invalid texture size");if(this._width>maxTextureSize||this._height>maxTextureSize)throw new Error("texture exceeds maximum texture size");if(!this._renderer.SupportsNPOTTextures()&&this._IsTiled()&&!isPOT)throw new Error("non-power-of-two tiled textures not supported");const gl=this._renderer.GetContext();const webglVersion=this._renderer.GetWebGLVersionNumber();
this._texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,this._texture);gl.pixelStorei(gl["UNPACK_PREMULTIPLY_ALPHA_WEBGL"],opts.premultiplyAlpha);const formatspec=GetFormatSpecifiers(this._pixelFormat,gl);const internalformat=webglVersion>=2?formatspec.sizedinternalformat:formatspec.internalformat;gl.texImage2D(gl.TEXTURE_2D,0,internalformat,this._width,this._height,0,formatspec.format,formatspec.type,null);this._SetTextureParameters(gl);gl.bindTexture(gl.TEXTURE_2D,null);this._renderer._ResetLastTexture();
this._refCount=1;allTextures.add(this)}_GetMipMapHint(gl){if(this._mipMapQuality==="default")return this._isStatic?gl.NICEST:gl.FASTEST;else if(this._mipMapQuality==="low")return gl.FASTEST;else if(this._mipMapQuality==="high")return gl.NICEST;else throw new Error("invalid mipmap quality");}_IsTiled(){return this._wrapX!=="clamp-to-edge"||this._wrapY!=="clamp-to-edge"}_GetTextureWrapMode(gl,wrapMode){if(wrapMode==="clamp-to-edge")return gl.CLAMP_TO_EDGE;else if(wrapMode==="repeat")return gl.REPEAT;
else if(wrapMode==="mirror-repeat")return gl.MIRRORED_REPEAT;else throw new Error("invalid wrap mode");}_SetTextureParameters(gl){const isPOT=C3.isPOT(this._width)&&C3.isPOT(this._height);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,this._GetTextureWrapMode(gl,this._wrapX));gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,this._GetTextureWrapMode(gl,this._wrapY));if(this._sampling==="nearest"){gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,
gl.NEAREST);this._isMipMapped=false}else{gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR);if((isPOT||this._renderer.SupportsNPOTTextures())&&this._isMipMapped){gl.hint(gl.GENERATE_MIPMAP_HINT,this._GetMipMapHint(gl));gl.generateMipmap(gl.TEXTURE_2D);const useTrilinear=this._sampling==="trilinear"&&!this._renderer.HasMajorPerformanceCaveat();gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,useTrilinear?gl.LINEAR_MIPMAP_LINEAR:gl.LINEAR_MIPMAP_NEAREST)}else{gl.texParameteri(gl.TEXTURE_2D,
gl.TEXTURE_MIN_FILTER,gl.LINEAR);this._isMipMapped=false}}}_Update(data,opts){if((typeof HTMLImageElement==="undefined"||!(data instanceof HTMLImageElement))&&(typeof HTMLVideoElement==="undefined"||!(data instanceof HTMLVideoElement))&&(typeof HTMLCanvasElement==="undefined"||!(data instanceof HTMLCanvasElement))&&(typeof ImageBitmap==="undefined"||!(data instanceof ImageBitmap))&&(typeof OffscreenCanvas==="undefined"||!(data instanceof OffscreenCanvas))&&!(data instanceof ImageData))throw new Error("invalid texture source");
if(!this._texture||this._refCount<=0)throw new Error("texture not created");if(this._isStatic)throw new Error("cannot update static texture");opts=Object.assign({},UPDATE_DEFAULT_OPTIONS,opts);const dataWidth=data.width||data.videoWidth;const dataHeight=data.height||data.videoHeight;const webglVersion=this._renderer.GetWebGLVersionNumber();const gl=this._renderer.GetContext();gl.bindTexture(gl.TEXTURE_2D,this._texture);gl.pixelStorei(gl["UNPACK_PREMULTIPLY_ALPHA_WEBGL"],opts.premultiplyAlpha);gl.pixelStorei(gl["UNPACK_FLIP_Y_WEBGL"],
!!opts.flipY);const formatspec=GetFormatSpecifiers(this._pixelFormat,gl);const internalformat=webglVersion>=2?formatspec.sizedinternalformat:formatspec.internalformat;try{if(this._width===dataWidth&&this._height===dataHeight){const isPOT=C3.isPOT(this._width)&&C3.isPOT(this._height);gl.texSubImage2D(gl.TEXTURE_2D,0,0,0,formatspec.format,formatspec.type,data);if((isPOT||this._renderer.SupportsNPOTTextures())&&this._isMipMapped){gl.hint(gl.GENERATE_MIPMAP_HINT,this._GetMipMapHint(gl));gl.generateMipmap(gl.TEXTURE_2D)}}else{this._width=
dataWidth;this._height=dataHeight;const isPOT=C3.isPOT(this._width)&&C3.isPOT(this._height);if(!this._renderer.SupportsNPOTTextures()&&this._IsTiled()&&!isPOT)throw new Error("non-power-of-two tiled textures not supported");gl.texImage2D(gl.TEXTURE_2D,0,internalformat,formatspec.format,formatspec.type,data);if((isPOT||this._renderer.SupportsNPOTTextures())&&this._isMipMapped){gl.hint(gl.GENERATE_MIPMAP_HINT,this._GetMipMapHint(gl));gl.generateMipmap(gl.TEXTURE_2D)}}}catch(e){console.error("Error updating WebGL texture: ",
e)}gl.bindTexture(gl.TEXTURE_2D,null);this._renderer._ResetLastTexture()}_Delete(){if(this._refCount>0)throw new Error("texture still has references");if(!this._texture)throw new Error("already deleted texture");allTextures.delete(this);const gl=this._renderer.GetContext();gl.deleteTexture(this._texture);this._texture=null}IsValid(){return!!this._texture}_GetTexture(){return this._texture}GetRenderer(){return this._renderer}AddReference(){this._refCount++}SubtractReference(){if(this._refCount<=0)throw new Error("no more references");
this._refCount--}GetReferenceCount(){return this._refCount}GetWidth(){return this._width}GetHeight(){return this._height}IsStatic(){return this._isStatic}GetEstimatedMemoryUsage(){let size=this._width*this._height;switch(this._pixelFormat){case "rgba8":size*=4;break;case "rgb8":size*=3;break;case "rgba4":case "rgb5_a1":case "rgb565":size*=2;break}if(this._isMipMapped)size+=Math.floor(size/3);return size}static OnContextLost(){allTextures.clear()}static allTextures(){return allTextures.values()}}};


// ../lib/gfx/webgl/renderTarget.js
'use strict';{const C3=self.C3;const assert=self.assert;const VALID_SAMPLINGS=new Set(["nearest","bilinear","trilinear"]);const DEFAULT_RENDERTARGET_OPTIONS={sampling:"trilinear",alpha:true,readback:true,isDefaultSize:true,multisampling:0};const allRenderTargets=new Set;C3.Gfx.WebGLRenderTarget=class WebGLRenderTarget{constructor(renderer){this._renderer=renderer;this._frameBuffer=null;this._texture=null;this._renderBuffer=null;this._width=0;this._height=0;this._isDefaultSize=true;this._sampling=
"trilinear";this._alpha=true;this._readback=true;this._multisampling=0}_Create(width,height,opts){opts=Object.assign({},DEFAULT_RENDERTARGET_OPTIONS,opts);const webGLVersion=this._renderer.GetWebGLVersionNumber();if(this._texture||this._renderBuffer)throw new Error("already created render target");this._sampling=opts.sampling;this._alpha=!!opts.alpha;this._readback=!!opts.readback;this._isDefaultSize=!!opts.isDefaultSize;this._multisampling=opts.multisampling;if(!VALID_SAMPLINGS.has(this._sampling))throw new Error("invalid sampling");
if(this._multisampling>0&&(webGLVersion<2||this._readback))throw new Error("invalid use of multisampling");if(webGLVersion<2)this._readback=true;this._width=width;this._height=height;if(this._width<=0||this._height<=0)throw new Error("invalid render target size");const gl=this._renderer.GetContext();this._frameBuffer=gl.createFramebuffer();gl.bindFramebuffer(gl.FRAMEBUFFER,this._frameBuffer);if(this._readback){this._texture=this._renderer.CreateDynamicTexture(this._width,this._height,{sampling:this._sampling,
pixelFormat:this._alpha?"rgba8":"rgb8",mipMap:false});const tex=this._texture._GetTexture();gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,tex,0)}else{this._renderBuffer=gl.createRenderbuffer();gl.bindRenderbuffer(gl.RENDERBUFFER,this._renderBuffer);const internalFormat=this._alpha?gl.RGBA8:gl.RGB8;if(this._multisampling>0){const formatSamples=gl.getInternalformatParameter(gl.RENDERBUFFER,internalFormat,gl.SAMPLES);if(formatSamples&&formatSamples[0]){const maxSamples=formatSamples[0];
if(this._multisampling>maxSamples)this._multisampling=maxSamples}else this._multisampling=0}if(this._multisampling===0)gl.renderbufferStorage(gl.RENDERBUFFER,internalFormat,this._width,this._height);else gl.renderbufferStorageMultisample(gl.RENDERBUFFER,this._multisampling,internalFormat,this._width,this._height);gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.RENDERBUFFER,this._renderBuffer);gl.bindRenderbuffer(gl.RENDERBUFFER,null)}gl.bindFramebuffer(gl.FRAMEBUFFER,null);allRenderTargets.add(this)}_Resize(width,
height){if(this._width===width&&this._height===height)return;this._width=width;this._height=height;const gl=this._renderer.GetContext();gl.bindFramebuffer(gl.FRAMEBUFFER,this._frameBuffer);if(this._texture)this._texture._Update(new ImageData(this._width,this._height));else{gl.bindRenderbuffer(gl.RENDERBUFFER,this._renderBuffer);gl.renderbufferStorage(gl.RENDERBUFFER,this._alpha?gl.RGBA8:gl.RGB8,this._width,this._height);gl.bindRenderbuffer(gl.RENDERBUFFER,null)}gl.bindFramebuffer(gl.FRAMEBUFFER,null)}_Delete(){if(!this._texture&&
!this._renderBuffer)throw new Error("already deleted render target");allRenderTargets.delete(this);const gl=this._renderer.GetContext();gl.bindFramebuffer(gl.FRAMEBUFFER,this._frameBuffer);if(this._texture){gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,null,0);this._renderer.DeleteTexture(this._texture);this._texture=null}else if(this._renderBuffer){gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.RENDERBUFFER,null);gl.deleteRenderbuffer(this._renderBuffer);
this._renderBuffer=null}gl.bindFramebuffer(gl.FRAMEBUFFER,null);if(this._renderer.GetWebGLVersionNumber()>=2){gl.bindFramebuffer(gl.READ_FRAMEBUFFER,null);gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER,null)}gl.deleteFramebuffer(this._frameBuffer);this._renderer.GetBatchState().currentFramebuffer=null;this._frameBuffer=null}_GetFramebuffer(){return this._frameBuffer}GetWebGLRenderer(){return this._renderer}GetTexture(){return this._texture}IsLinearSampling(){return this._sampling!=="nearest"}HasAlpha(){return this._alpha}IsReadback(){return this._readback}GetWidth(){return this._width}GetHeight(){return this._height}IsDefaultSize(){return this._isDefaultSize}GetMultisampling(){return this._multisampling}GetOptions(){const ret=
{sampling:this._sampling,alpha:this._alpha,readback:this._readback};if(!this._isDefaultSize){ret.width=this._width;ret.height=this._height}return ret}IsCompatibleWithOptions(opts){opts=Object.assign({},DEFAULT_RENDERTARGET_OPTIONS,opts);if(opts.sampling!=="nearest"!==this.IsLinearSampling())return false;if(!!opts.alpha!==this.HasAlpha())return false;if(this._renderer.GetWebGLVersionNumber()>=2)if(!!opts.readback!==this.IsReadback())return false;if(typeof opts.width==="number"||typeof opts.height===
"number")return!this.IsDefaultSize()&&this.GetWidth()===opts.width&&this.GetHeight()===opts.height;else return this.IsDefaultSize()}_GetWebGLTexture(){if(!this._texture)return null;return this._texture._GetTexture()}GetEstimatedMemoryUsage(){if(this._texture)return this._texture.GetEstimatedMemoryUsage();return this._width*this._height*(this._alpha?4:3)}static async DebugReadPixelsToBlob(renderer,renderTarget){const imageData=await renderer.ReadBackRenderTargetToImageData(renderTarget,true);return await C3.ImageDataToBlob(imageData)}static OnContextLost(){allRenderTargets.clear()}static allRenderTargets(){return allRenderTargets.values()}static ResizeAll(width,
height){for(const rt of allRenderTargets)if(rt.IsDefaultSize())rt._Resize(width,height)}}};


// ../lib/gfx/webgl/shaderProgram.js
'use strict';{const C3=self.C3;const glMatrix=self.glMatrix;const vec3=glMatrix.vec3;const mat4=glMatrix.mat4;const RESERVED_UNIFORM_NAMES=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness"]);C3.Gfx.WebGLShaderProgram=class WebGLShaderProgram{static async Compile(renderer,
fragSrc,vsSource,name){const gl=renderer.GetContext();const fragmentShader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(fragmentShader,fragSrc);gl.compileShader(fragmentShader);const vertexShader=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(vertexShader,vsSource);gl.compileShader(vertexShader);const shaderProgram=gl.createProgram();gl.attachShader(shaderProgram,fragmentShader);gl.attachShader(shaderProgram,vertexShader);gl.bindAttribLocation(shaderProgram,0,"aPos");gl.bindAttribLocation(shaderProgram,
1,"aTex");gl.bindAttribLocation(shaderProgram,2,"aPoints");gl.linkProgram(shaderProgram);const parallelShaderCompileExt=renderer._GetParallelShaderCompileExtension();if(parallelShaderCompileExt)await renderer._WaitForObjectReady(()=>gl.getProgramParameter(shaderProgram,parallelShaderCompileExt["COMPLETION_STATUS_KHR"]));else await C3.Wait(5);if(!gl.getShaderParameter(fragmentShader,gl.COMPILE_STATUS)){const log=gl.getShaderInfoLog(fragmentShader);gl.deleteShader(fragmentShader);gl.deleteShader(vertexShader);
gl.deleteProgram(shaderProgram);throw new Error("Error compiling fragment shader: "+log);}if(!gl.getShaderParameter(vertexShader,gl.COMPILE_STATUS)){const log=gl.getShaderInfoLog(vertexShader);gl.deleteShader(fragmentShader);gl.deleteShader(vertexShader);gl.deleteProgram(shaderProgram);throw new Error("Error compiling vertex shader: "+log);}if(!gl.getProgramParameter(shaderProgram,gl.LINK_STATUS)){const log=gl.getProgramInfoLog(shaderProgram);gl.deleteShader(fragmentShader);gl.deleteShader(vertexShader);
gl.deleteProgram(shaderProgram);throw new Error("Error linking shader program: "+log);}const infoLog=C3.FilterUnprintableChars(gl.getProgramInfoLog(shaderProgram)||"").trim();if(infoLog&&!C3.IsStringAllWhitespace(infoLog))console.info(`[WebGL] Shader program '${name}' compilation log: `,infoLog);gl.deleteShader(fragmentShader);gl.deleteShader(vertexShader);return shaderProgram}static async Create(renderer,shaderInfo,vsSource,name){const shaderProgram=await C3.Gfx.WebGLShaderProgram.Compile(renderer,
shaderInfo.src,vsSource,name);return new C3.Gfx.WebGLShaderProgram(renderer,shaderProgram,shaderInfo,name)}constructor(renderer,shaderProgram,shaderInfo,name){const gl=renderer.GetContext();const batchState=renderer.GetBatchState();renderer.EndBatch();gl.useProgram(shaderProgram);this._gl=gl;this._renderer=renderer;this._name=name;this._shaderProgram=shaderProgram;this._isDeviceTransform=name==="<default-device-transform>";const locAPos=gl.getAttribLocation(shaderProgram,"aPos");const locATex=gl.getAttribLocation(shaderProgram,
"aTex");const locAPoints=gl.getAttribLocation(shaderProgram,"aPoints");if(locAPos!==-1){gl.bindBuffer(gl.ARRAY_BUFFER,renderer._vertexBuffer);gl.vertexAttribPointer(locAPos,renderer.GetNumVertexComponents(),gl.FLOAT,false,0,0);gl.enableVertexAttribArray(locAPos)}if(locATex!==-1){gl.bindBuffer(gl.ARRAY_BUFFER,renderer._texcoordBuffer);gl.vertexAttribPointer(locATex,2,gl.FLOAT,false,0,0);gl.enableVertexAttribArray(locATex)}if(locAPoints!==-1){gl.bindBuffer(gl.ARRAY_BUFFER,renderer._pointBuffer);gl.vertexAttribPointer(locAPoints,
4,gl.FLOAT,false,0,0);gl.enableVertexAttribArray(locAPoints)}gl.bindBuffer(gl.ARRAY_BUFFER,null);this._uMatP=new C3.Gfx.WebGLShaderUniform(this,"matP","mat4");this._uMatMV=new C3.Gfx.WebGLShaderUniform(this,"matMV","mat4");this._uColor=new C3.Gfx.WebGLShaderUniform(this,"color","vec4");this._uSamplerFront=new C3.Gfx.WebGLShaderUniform(this,"samplerFront","sampler");this._uPointTexStart=new C3.Gfx.WebGLShaderUniform(this,"pointTexStart","vec2");this._uPointTexEnd=new C3.Gfx.WebGLShaderUniform(this,
"pointTexEnd","vec2");this._uZElevation=new C3.Gfx.WebGLShaderUniform(this,"zElevation","float");this._uTileSize=new C3.Gfx.WebGLShaderUniform(this,"tileSize","vec2");this._uTileSpacing=new C3.Gfx.WebGLShaderUniform(this,"tileSpacing","vec2");this._uColor2=new C3.Gfx.WebGLShaderUniform(this,"color2_","vec4");this._uOutlineThickness=new C3.Gfx.WebGLShaderUniform(this,"outlineThickness","float");this._uSamplerBack=new C3.Gfx.WebGLShaderUniform(this,"samplerBack","sampler");this._uDestStart=new C3.Gfx.WebGLShaderUniform(this,
"destStart","vec2");this._uDestEnd=new C3.Gfx.WebGLShaderUniform(this,"destEnd","vec2");this._uSrcStart=new C3.Gfx.WebGLShaderUniform(this,"srcStart","vec2");this._uSrcEnd=new C3.Gfx.WebGLShaderUniform(this,"srcEnd","vec2");this._uSrcOriginStart=new C3.Gfx.WebGLShaderUniform(this,"srcOriginStart","vec2");this._uSrcOriginEnd=new C3.Gfx.WebGLShaderUniform(this,"srcOriginEnd","vec2");this._uPixelSize=new C3.Gfx.WebGLShaderUniform(this,"pixelSize","vec2");this._uSeconds=new C3.Gfx.WebGLShaderUniform(this,
"seconds","float");this._uLayerScale=new C3.Gfx.WebGLShaderUniform(this,"layerScale","float");this._uLayerAngle=new C3.Gfx.WebGLShaderUniform(this,"layerAngle","float");this._uLayoutStart=new C3.Gfx.WebGLShaderUniform(this,"layoutStart","vec2");this._uLayoutEnd=new C3.Gfx.WebGLShaderUniform(this,"layoutEnd","vec2");this._hasAnyOptionalUniforms=!!(this._uPixelSize.IsUsed()||this._uSeconds.IsUsed()||this._uSamplerBack.IsUsed()||this._uDestStart.IsUsed()||this._uDestEnd.IsUsed()||this._uSrcStart.IsUsed()||
this._uSrcEnd.IsUsed()||this._uSrcOriginStart.IsUsed()||this._uSrcOriginEnd.IsUsed()||this._uLayerScale.IsUsed()||this._uLayerAngle.IsUsed()||this._uLayoutStart.IsUsed()||this._uLayoutEnd.IsUsed());this._extendBoxHorizontal=shaderInfo.extendBoxHorizontal||0;this._extendBoxVertical=shaderInfo.extendBoxVertical||0;this._crossSampling=!!shaderInfo.crossSampling;this._mustPreDraw=!!shaderInfo.mustPreDraw;this._preservesOpaqueness=!!shaderInfo.preservesOpaqueness;this._animated=!!shaderInfo.animated;const customParameterDefs=
shaderInfo.parameters||[];this._uCustomParameters=[];this._usesDest=this._uDestStart.IsUsed()||this._uDestEnd.IsUsed();this._usesAnySrcRectOrPixelSize=this._uPixelSize.IsUsed()||this._uSrcStart.IsUsed()||this._uSrcEnd.IsUsed()||this._uSrcOriginStart.IsUsed()||this._uSrcOriginEnd.IsUsed();this._needsPostDrawOrExtendBox=this._crossSampling||this._usesDest||this._extendBoxHorizontal!==0||this._extendBoxVertical!==0;this._hasCurrentMatP=false;this._hasCurrentMatMV=false;this._uColor.Init4f(1,1,1,1);this._uColor2.Init4f(1,
1,1,1);this._uSamplerFront.Init1i(0);this._uSamplerBack.Init1i(1);this._uPointTexStart.Init2f(0,0);this._uPointTexEnd.Init2f(1,1);this._uZElevation.Init1f(0);this._uTileSize.Init2f(0,0);this._uTileSpacing.Init2f(0,0);this._uDestStart.Init2f(0,0);this._uDestEnd.Init2f(1,1);this._uSrcStart.Init2f(0,0);this._uSrcEnd.Init2f(0,0);this._uSrcOriginStart.Init2f(0,0);this._uSrcOriginEnd.Init2f(0,0);this._uPixelSize.Init2f(0,0);this._uLayerScale.Init1f(1);this._uLayerAngle.Init1f(0);this._uSeconds.Init1f(0);
this._uLayoutStart.Init2f(0,0);this._uLayoutEnd.Init2f(0,0);this._uOutlineThickness.Init1f(1);for(const p of customParameterDefs){const uniformName=p[0];const paramType=p[2];const shaderUniform=new C3.Gfx.WebGLShaderUniform(this,uniformName,paramType);if(paramType==="color")shaderUniform.Init3f(0,0,0);else shaderUniform.Init1f(0);this._uCustomParameters.push(shaderUniform)}if(this._isDeviceTransform)this._UpdateDeviceTransformUniforms(batchState.currentMatP);else{this.UpdateMatP(batchState.currentMatP,
true);this.UpdateMatMV(batchState.currentMV,true)}const currentShader=batchState.currentShader;gl.useProgram(currentShader?currentShader._shaderProgram:null)}Release(){this._gl.deleteProgram(this._shaderProgram);this._shaderProgram=null;this._renderer._RemoveShaderProgram(this);this._gl=null;this._renderer=null}GetName(){return this._name}GetWebGLContext(){return this._gl}GetShaderProgram(){return this._shaderProgram}UsesDest(){return this._usesDest}UsesCrossSampling(){return this._crossSampling}MustPreDraw(){return this._mustPreDraw}PreservesOpaqueness(){return this._preservesOpaqueness}ExtendsBox(){return this._extendBoxHorizontal!==
0||this._extendBoxVertical!==0}GetBoxExtendHorizontal(){return this._extendBoxHorizontal}GetBoxExtendVertical(){return this._extendBoxVertical}UsesAnySrcRectOrPixelSize(){return this._usesAnySrcRectOrPixelSize}NeedsPostDrawOrExtendsBox(){return this._needsPostDrawOrExtendBox}GetParameterCount(){return this._uCustomParameters.length}GetParameterType(paramIndex){return this._uCustomParameters[paramIndex].GetType()}AreCustomParametersAlreadySetInBatch(params){for(let i=0,len=params.length;i<len;++i)if(!this._uCustomParameters[i].IsSetToCustomInBatch(params[i]))return false;
return true}SetCustomParametersInBatch(params){for(let i=0,len=params.length;i<len;++i)this._uCustomParameters[i].SetBatchValueCustom(params[i])}AreOptionalUniformsAlreadySetInBatch(destRect,srcRect,srcOriginRect,layoutRect,pixelWidth,pixelHeight,layerScale,layerAngle,time){if(this._uSamplerBack.IsUsed())return false;if(this._uPixelSize.IsUsed()&&!this._uPixelSize.IsSetTo2InBatch(pixelWidth,pixelHeight))return false;if(this._uDestStart.IsUsed()&&!this._uDestStart.IsSetTo2InBatch(destRect.getLeft(),
destRect.getTop()))return false;if(this._uDestEnd.IsUsed()&&!this._uDestEnd.IsSetTo2InBatch(destRect.getRight(),destRect.getBottom()))return false;if(this._uLayerScale.IsUsed()&&!this._uLayerScale.IsSetTo1InBatch(layerScale))return false;if(this._uLayerAngle.IsUsed()&&!this._uLayerAngle.IsSetTo1InBatch(layerAngle))return false;if(this._uSrcStart.IsUsed()&&!this._uSrcStart.IsSetTo2InBatch(srcRect.getLeft(),srcRect.getTop()))return false;if(this._uSrcEnd.IsUsed()&&!this._uSrcEnd.IsSetTo2InBatch(srcRect.getRight(),
srcRect.getBottom()))return false;if(this._uSrcOriginStart.IsUsed()&&!this._uSrcOriginStart.IsSetTo2InBatch(srcOriginRect.getLeft(),srcOriginRect.getTop()))return false;if(this._uSrcOriginEnd.IsUsed()&&!this._uSrcOriginEnd.IsSetTo2InBatch(srcOriginRect.getRight(),srcOriginRect.getBottom()))return false;if(this._uLayoutStart.IsUsed()&&!this._uLayoutStart.IsSetTo2InBatch(layoutRect.getLeft(),layoutRect.getTop()))return false;if(this._uLayoutEnd.IsUsed()&&!this._uLayoutEnd.IsSetTo2InBatch(layoutRect.getTop(),
layoutRect.getBottom()))return false;if(this._uSeconds.IsUsed()&&!this._uSeconds.IsSetTo1InBatch(time))return false;return true}SetOptionalUniformsInBatch(destRect,srcRect,srcOriginRect,layoutRect,pixelWidth,pixelHeight,layerScale,layerAngle,time){if(this._uSamplerBack.IsUsed())return;if(this._uPixelSize.IsUsed())this._uPixelSize.SetBatch2(pixelWidth,pixelHeight);if(this._uDestStart.IsUsed())this._uDestStart.SetBatch2(destRect.getLeft(),destRect.getTop());if(this._uDestEnd.IsUsed())this._uDestEnd.SetBatch2(destRect.getRight(),
destRect.getBottom());if(this._uLayerScale.IsUsed())this._uLayerScale.SetBatch1(layerScale);if(this._uLayerAngle.IsUsed())this._uLayerAngle.SetBatch1(layerAngle);if(this._uSrcStart.IsUsed())this._uSrcStart.SetBatch2(srcRect.getLeft(),srcRect.getTop());if(this._uSrcEnd.IsUsed())this._uSrcEnd.SetBatch2(srcRect.getRight(),srcRect.getBottom());if(this._uSrcOriginStart.IsUsed())this._uSrcOriginStart.SetBatch2(srcOriginRect.getLeft(),srcOriginRect.getTop());if(this._uSrcOriginEnd.IsUsed())this._uSrcOriginEnd.SetBatch2(srcOriginRect.getRight(),
srcOriginRect.getBottom());if(this._uLayoutStart.IsUsed())this._uLayoutStart.SetBatch2(layoutRect.getLeft(),layoutRect.getTop());if(this._uLayoutEnd.IsUsed())this._uLayoutEnd.SetBatch2(layoutRect.getTop(),layoutRect.getBottom());if(this._uSeconds.IsUsed())this._uSeconds.SetBatch1(time)}IsAnimated(){return this._animated}UpdateMatP(matP,force){if(this._hasCurrentMatP&&!force)return;if(this._isDeviceTransform)return;if(this._uMatP.IsUsed())this._uMatP.UpdateMatrix4fv(matP);this._hasCurrentMatP=true}SetMatPStale(){this._hasCurrentMatP=
false}UpdateMatMV(matMV,force){if(this._hasCurrentMatMV&&!force)return;if(this._isDeviceTransform)return;if(this._uMatMV.IsUsed())this._uMatMV.UpdateMatrix4fv(matMV);this._hasCurrentMatMV=true}SetMatMVStale(){this._hasCurrentMatMV=false}_UpdateDeviceTransformUniforms(matP){if(!this._isDeviceTransform)throw new Error("not device transform shader");this._uMatP.UpdateMatrix4fv(matP);const renderer=this._renderer;const scrollX=renderer.GetWidth()/2;const scrollY=renderer.GetHeight()/2;const worldScale=
renderer._worldScale;const cam=vec3.fromValues(scrollX*worldScale[0],scrollY*worldScale[1],100*self.devicePixelRatio);const look=vec3.fromValues(scrollX*worldScale[0],scrollY*worldScale[1],0);const mv=mat4.create();mat4.lookAt(mv,cam,look,renderer._up);mat4.scale(mv,mv,worldScale);this._uMatMV.UpdateMatrix4fv(mv)}UpdateColor(c){if(this._uColor.IsUsed())this._uColor.Update4f(c[0],c[1],c[2],c[3])}static GetReservedUniformNames(){return RESERVED_UNIFORM_NAMES}static GetDefaultVertexShaderSource(is3d,
useHighP){const texPrecision=useHighP?"highmedp":"mediump";return[`#ifdef GL_FRAGMENT_PRECISION_HIGH`,`#define highmedp highp`,`#else`,`#define highmedp mediump`,`#endif`,`attribute highp ${is3d?"vec3":"vec2"} aPos;`,`attribute ${texPrecision} vec2 aTex;`,`varying ${texPrecision} vec2 vTex;`,`uniform highp mat4 matP;`,`uniform highp mat4 matMV;`,`void main(void) {`,`	gl_Position = matP * matMV * vec4(aPos, ${is3d?"":"0.0,"} 1.0);`,`	vTex = aTex;`,`}`].join("\n")}static GetTextureFillFragmentShaderSource(){return["varying mediump vec2 vTex;",
"uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static GetTilemapFragmentShaderSource(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;",
"uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static GetPointVertexShaderSource(){return["attribute vec4 aPoints;",
"varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static GetPointFragmentShaderSource(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {",
"\tgl_FragColor = texture2D(samplerFront, mix(pointTexStart, pointTexEnd, gl_PointCoord)) * color * pointOpacity;","}"].join("\n")}static GetColorFillFragmentShaderSource(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static GetLinearGradientFillFragmentShaderSource(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));",
"\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);",
"\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static GetSmoothLineFillFragmentShaderSource(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static GetHardEllipseFillFragmentShaderSource(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);",
"\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static GetHardEllipseOutlineFragmentShaderSource(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);",
"\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static GetSmoothEllipseFillFragmentShaderSource(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {",
"\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static GetSmoothEllipseOutlineFragmentShaderSource(){return["varying mediump vec2 vTex;",
"uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;",
"\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;",
"}"].join("\n")}}};


// ../lib/gfx/webgl/shaderUniform.js
'use strict';{const C3=self.C3;const TYPE_SIZES=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);function areMat4sEqual(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]}C3.Gfx.WebGLShaderUniform=class WebGLShaderUniform{constructor(owner,name,type){if(!TYPE_SIZES.has(type))throw new Error("invalid uniform type");
this._owner=owner;this._gl=this._owner.GetWebGLContext();this._name=name;this._type=type;this._isColorType=this._type==="color";this._location=this._gl.getUniformLocation(this._owner.GetShaderProgram(),name);this._isUsed=!!this._location;const typeSize=TYPE_SIZES.get(type);this._lastValue=new Float32Array(typeSize);this._lastBatchValue=new Float32Array(typeSize)}Release(){this._owner=null;this._gl=null;this._location=null}IsUsed(){return this._isUsed}GetType(){return this._type}IsColorType(){return this._isColorType}Init1f(v0){if(!this.IsUsed())return;
this._lastValue[0]=v0;this._lastBatchValue.set(this._lastValue);this._gl.uniform1f(this._location,v0)}Init1i(v0){if(!this.IsUsed())return;this._lastValue[0]=v0;this._lastBatchValue.set(this._lastValue);this._gl.uniform1i(this._location,v0)}Init2f(v0,v1){if(!this.IsUsed())return;this._lastValue[0]=v0;this._lastValue[1]=v1;this._lastBatchValue.set(this._lastValue);this._gl.uniform2f(this._location,v0,v1)}Init3f(v0,v1,v2){if(!this.IsUsed())return;this._lastValue[0]=v0;this._lastValue[1]=v1;this._lastValue[2]=
v2;this._lastBatchValue.set(this._lastValue);this._gl.uniform3f(this._location,v0,v1,v2)}Init4f(v0,v1,v2,v3){if(!this.IsUsed())return;this._lastValue[0]=v0;this._lastValue[1]=v1;this._lastValue[2]=v2;this._lastValue[3]=v3;this._lastBatchValue.set(this._lastValue);this._gl.uniform4f(this._location,v0,v1,v2,v3)}Update1f(v0){v0=Math.fround(v0);const lastValue=this._lastValue;if(lastValue[0]===v0)return;lastValue[0]=v0;this._gl.uniform1f(this._location,v0)}Update1i(v0){const lastValue=this._lastValue;
if(lastValue[0]===v0)return;lastValue[0]=v0;this._gl.uniform1i(this._location,v0)}Update2f(v0,v1){v0=Math.fround(v0);v1=Math.fround(v1);const lastValue=this._lastValue;if(lastValue[0]===v0&&lastValue[1]===v1)return;lastValue[0]=v0;lastValue[1]=v1;this._gl.uniform2f(this._location,v0,v1)}Update3f(v0,v1,v2){v0=Math.fround(v0);v1=Math.fround(v1);v2=Math.fround(v2);const lastValue=this._lastValue;if(lastValue[0]===v0&&lastValue[1]===v1&&lastValue[2]===v2)return;lastValue[0]=v0;lastValue[1]=v1;lastValue[2]=
v2;this._gl.uniform3f(this._location,v0,v1,v2)}Update4f(v0,v1,v2,v3){v0=Math.fround(v0);v1=Math.fround(v1);v2=Math.fround(v2);v3=Math.fround(v3);const lastValue=this._lastValue;if(lastValue[0]===v0&&lastValue[1]===v1&&lastValue[2]===v2&&lastValue[3]===v3)return;lastValue[0]=v0;lastValue[1]=v1;lastValue[2]=v2;lastValue[3]=v3;this._gl.uniform4f(this._location,v0,v1,v2,v3)}UpdateMatrix4fv(m){const lastValue=this._lastValue;if(areMat4sEqual(lastValue,m))return;C3.typedArraySet16(lastValue,m,0);this._gl.uniformMatrix4fv(this._location,
false,m)}IsSetToCustomInBatch(p){const batchValue=this._lastBatchValue;if(this.IsColorType())return batchValue[0]===Math.fround(p.getR())&&batchValue[1]===Math.fround(p.getG())&&batchValue[2]===Math.fround(p.getB());else return batchValue[0]===Math.fround(p)}SetBatchValueCustom(p){const batchValue=this._lastBatchValue;if(this.IsColorType()){batchValue[0]=p.getR();batchValue[1]=p.getG();batchValue[2]=p.getB()}else batchValue[0]=p}IsSetTo1InBatch(x){return this._lastBatchValue[0]===Math.fround(x)}IsSetTo2InBatch(x,
y){const batchValue=this._lastBatchValue;return batchValue[0]===Math.fround(x)&&batchValue[1]===Math.fround(y)}SetBatch1(x){this._lastBatchValue[0]=x}SetBatch2(x,y){const batchValue=this._lastBatchValue;batchValue[0]=x;batchValue[1]=y}}};


// ../lib/gfx/webgl/batchJob.js
'use strict';{const C3=self.C3;const glMatrix=self.glMatrix;const vec4=glMatrix.vec4;const mat4=glMatrix.mat4;const BATCH_NULL=0;const BATCH_QUAD=1;const BATCH_SETTEXTURE=2;const BATCH_SETCOLOR=3;const BATCH_SETBLEND=4;const BATCH_UPDATEMODELVIEW=5;const BATCH_SETRENDERTARGET=6;const BATCH_CLEARSURFACE=7;const BATCH_CLEARRECT=8;const BATCH_POINTS=9;const BATCH_SETPROGRAM=10;const BATCH_SETPROGRAMPARAMETERS=11;const BATCH_INVALIDATEFRAMEBUFFER=12;const BATCH_SETPOINTTEXCOORDS=13;const BATCH_SETTILEMAPINFO=
14;const BATCH_BLITFRAMEBUFFER=15;const BATCH_STARTQUERY=16;const BATCH_ENDQUERY=17;const BATCH_SETELLIPSEPARAMS=18;const BATCH_SETGRADIENTCOLOR=19;C3.Gfx.BatchState=class BatchState{constructor(renderer){this.renderer=renderer;this.currentMV=mat4.create();this.currentMatP=mat4.create();this.currentFramebuffer=null;this.currentColor=vec4.fromValues(1,1,1,1);this.currentShader=null;this.pointTexCoords=new C3.Rect;this.clearColor=C3.New(C3.Color,0,0,0,0)}};C3.Gfx.WebGLBatchJob=class WebGLBatchJob{constructor(batchState){const arrayBuffer=
new ArrayBuffer(96);this._type=0;this._batchState=batchState;this._gl=batchState.renderer.GetContext();this._startIndex=0;this._indexCount=0;this._texParam=null;this._mat4param=new Float32Array(arrayBuffer,0,16);this._colorParam=new Float32Array(arrayBuffer,64,4);this._srcOriginRect=new Float32Array(arrayBuffer,80,4);this._shaderParams=[]}InitQuad(startIndex,indexCount){this._type=BATCH_QUAD;this._startIndex=startIndex;this._indexCount=indexCount}DoQuad(){const gl=this._gl;gl.drawElements(gl.TRIANGLES,
this._indexCount,gl.UNSIGNED_SHORT,this._startIndex)}InitSetTexture(rendererTex){this._type=BATCH_SETTEXTURE;this._texParam=rendererTex}DoSetTexture(){const gl=this._gl;const texParam=this._texParam;gl.bindTexture(gl.TEXTURE_2D,texParam?texParam._GetTexture():null)}InitSetColor(c){this._type=BATCH_SETCOLOR;c.writeToTypedArray(this._colorParam,0)}DoSetColor(){const c=this._colorParam;const batchState=this._batchState;vec4.copy(batchState.currentColor,c);batchState.currentShader.UpdateColor(c)}InitSetGradientColor(c){this._type=
BATCH_SETGRADIENTCOLOR;c.writeToTypedArray(this._colorParam,0)}DoSetGradientColor(){const c=this._colorParam;const s=this._batchState.currentShader;if(s._uColor2.IsUsed())s._uColor2.Update4f(c[0],c[1],c[2],c[3])}InitSetBlend(s,d){this._type=BATCH_SETBLEND;this._startIndex=s;this._indexCount=d}DoSetBlend(){this._gl.blendFunc(this._startIndex,this._indexCount)}InitUpdateModelView(m){this._type=BATCH_UPDATEMODELVIEW;mat4.copy(this._mat4param,m)}DoUpdateModelView(){const batchState=this._batchState;const allShaderPrograms=
batchState.renderer._allShaderPrograms;const currentShader=batchState.currentShader;const mat4param=this._mat4param;for(let i=0,len=allShaderPrograms.length;i<len;++i){const s=allShaderPrograms[i];if(s===currentShader)s.UpdateMatMV(mat4param,true);else s.SetMatMVStale()}mat4.copy(batchState.currentMV,mat4param)}InitSetRenderTarget(renderTarget,didSurfaceSizeChange,matP){this._type=BATCH_SETRENDERTARGET;this._texParam=renderTarget;this._startIndex=didSurfaceSizeChange?1:0;if(didSurfaceSizeChange)mat4.copy(this._mat4param,
matP)}DoSetRenderTarget(){const gl=this._gl;const renderTarget=this._texParam;const didSurfaceSizeChange=this._startIndex!==0;const matP=this._mat4param;const batchState=this._batchState;const renderer=batchState.renderer;let newViewportWidth,newViewportHeight;if(renderTarget){const fbo=renderTarget._GetFramebuffer();batchState.currentFramebuffer=fbo;gl.bindFramebuffer(gl.FRAMEBUFFER,fbo);newViewportWidth=renderTarget.GetWidth();newViewportHeight=renderTarget.GetHeight()}else{batchState.currentFramebuffer=
null;gl.bindFramebuffer(gl.FRAMEBUFFER,null);newViewportWidth=renderer.GetScissoredViewportWidth();newViewportHeight=renderer.GetScissoredViewportHeight()}if(didSurfaceSizeChange)renderer._UpdateViewportBatch(newViewportWidth,newViewportHeight,matP)}InitClearSurface(c){this._type=BATCH_CLEARSURFACE;c.writeToTypedArray(this._mat4param,0)}InitClearSurface2(r,g,b,a){this._type=BATCH_CLEARSURFACE;const c=this._mat4param;c[0]=r;c[1]=g;c[2]=b;c[3]=a}DoClearSurface(){const gl=this._gl;const mat4param=this._mat4param;
const batchState=this._batchState;const renderer=batchState.renderer;const lastClearColor=batchState.clearColor;const debugSkipScissor=renderer._isScissorViewport&&C3.isDebug;if(debugSkipScissor)gl.disable(gl.SCISSOR_TEST);const r=mat4param[0];const g=mat4param[1];const b=mat4param[2];const a=mat4param[3];if(!lastClearColor.equalsRgba(r,g,b,a)){gl.clearColor(r,g,b,a);lastClearColor.setRgba(r,g,b,a)}gl.clear(gl.COLOR_BUFFER_BIT);if(debugSkipScissor)gl.enable(gl.SCISSOR_TEST)}InitClearRect(x,y,w,h,
r,g,b,a){this._type=BATCH_CLEARRECT;const m=this._mat4param;m[0]=x;m[1]=y;m[2]=w;m[3]=h;m[4]=r;m[5]=g;m[6]=b;m[7]=a}DoClearRectangle(){const gl=this._gl;const mat4param=this._mat4param;const batchState=this._batchState;const renderer=batchState.renderer;const lastClearColor=batchState.clearColor;if(!renderer._isScissorViewport)gl.enable(gl.SCISSOR_TEST);gl.scissor(mat4param[0],mat4param[1],mat4param[2],mat4param[3]);const r=mat4param[4];const g=mat4param[5];const b=mat4param[6];const a=mat4param[7];
if(!lastClearColor.equalsRgba(r,g,b,a)){gl.clearColor(r,g,b,a);lastClearColor.setRgba(r,g,b,a)}gl.clear(gl.COLOR_BUFFER_BIT);if(!renderer._isScissorViewport)gl.disable(gl.SCISSOR_TEST);else gl.scissor(0,0,renderer._viewportScissorWidth,renderer._viewportScissorHeight)}InitSetPointTexCoords(rect){this._type=BATCH_SETPOINTTEXCOORDS;rect.writeToTypedArray(this._mat4param,0)}DoSetPointTextureCoords(){const mat4param=this._mat4param;this._batchState.pointTexCoords.set(mat4param[0],mat4param[1],mat4param[2],
mat4param[3])}InitPoints(startIndex,z){this._type=BATCH_POINTS;this._startIndex=startIndex;this._indexCount=1;this._mat4param[0]=z}DoPoints(){const gl=this._gl;const batchState=this._batchState;const renderer=batchState.renderer;const s=renderer._spPoints;gl.useProgram(s._shaderProgram);s.UpdateMatP(batchState.currentMatP,false);s.UpdateMatMV(batchState.currentMV,false);const ptc=batchState.pointTexCoords;if(s._uPointTexStart.IsUsed())s._uPointTexStart.Update2f(ptc.getLeft(),ptc.getTop());if(s._uPointTexEnd.IsUsed())s._uPointTexEnd.Update2f(ptc.getRight(),
ptc.getBottom());const z=this._mat4param[0];if(s._uZElevation.IsUsed())s._uZElevation.Update1f(z);if(s._uColor.IsUsed()){const c=batchState.currentColor;s._uColor.Update4f(c[0],c[1],c[2],c[3])}gl.drawArrays(gl.POINTS,this._startIndex/4,this._indexCount);gl.useProgram(batchState.currentShader._shaderProgram)}InitSetProgram(program){this._type=BATCH_SETPROGRAM;this._texParam=program}DoSetProgram(){const gl=this._gl;const batchState=this._batchState;const s=this._texParam;batchState.currentShader=s;
gl.useProgram(s._shaderProgram);s.UpdateMatP(batchState.currentMatP,false);s.UpdateMatMV(batchState.currentMV,false);if(s._uColor.IsUsed()){const c=batchState.currentColor;s._uColor.Update4f(c[0],c[1],c[2],c[3])}}InitSetProgramParameters(){this._type=BATCH_SETPROGRAMPARAMETERS}DoSetProgramParameters(){const s=this._batchState.currentShader;if(s._hasAnyOptionalUniforms)this._DoSetOptionalUniformProgramParameters(s);if(s._uCustomParameters.length)this._DoUpdateCustomProgramParameters(s)}_DoSetOptionalUniformProgramParameters(s){const gl=
this._gl;const mat4param=this._mat4param;const colorParam=this._colorParam;const srcOriginRect=this._srcOriginRect;if(s._uSamplerBack.IsUsed()){const renderer=this._batchState.renderer;const texParam=this._texParam;if(renderer._lastTexture1!==texParam){gl.activeTexture(gl.TEXTURE1);gl.bindTexture(gl.TEXTURE_2D,texParam?texParam._GetTexture():null);renderer._lastTexture1=texParam;gl.activeTexture(gl.TEXTURE0)}}if(s._uPixelSize.IsUsed())s._uPixelSize.Update2f(mat4param[0],mat4param[1]);if(s._uDestStart.IsUsed())s._uDestStart.Update2f(mat4param[2],
mat4param[3]);if(s._uDestEnd.IsUsed())s._uDestEnd.Update2f(mat4param[4],mat4param[5]);if(s._uLayerScale.IsUsed())s._uLayerScale.Update1f(mat4param[6]);if(s._uLayerAngle.IsUsed())s._uLayerAngle.Update1f(mat4param[7]);if(s._uSrcStart.IsUsed())s._uSrcStart.Update2f(mat4param[12],mat4param[13]);if(s._uSrcEnd.IsUsed())s._uSrcEnd.Update2f(mat4param[14],mat4param[15]);if(s._uSrcOriginStart.IsUsed())s._uSrcOriginStart.Update2f(srcOriginRect[0],srcOriginRect[1]);if(s._uSrcOriginEnd.IsUsed())s._uSrcOriginEnd.Update2f(srcOriginRect[2],
srcOriginRect[3]);if(s._uLayoutStart.IsUsed())s._uLayoutStart.Update2f(colorParam[0],colorParam[1]);if(s._uLayoutEnd.IsUsed())s._uLayoutEnd.Update2f(colorParam[2],colorParam[3]);if(s._uSeconds.IsUsed())s._uSeconds.Update1f(this._startIndex)}_DoUpdateCustomProgramParameters(s){const uCustomParameters=s._uCustomParameters;const shaderParams=this._shaderParams;for(let i=0,len=uCustomParameters.length;i<len;++i){const shaderUniform=uCustomParameters[i];const paramValue=shaderParams[i];if(shaderUniform.IsColorType())shaderUniform.Update3f(paramValue.getR(),
paramValue.getG(),paramValue.getB());else shaderUniform.Update1f(paramValue)}}InitInvalidateFramebuffer(fbo){this._type=BATCH_INVALIDATEFRAMEBUFFER;this._texParam=fbo}DoInvalidateFramebuffer(){const gl=this._gl;const fbo=this._texParam;const lastBoundFbo=this._batchState.currentFramebuffer;if(fbo!==lastBoundFbo)gl.bindFramebuffer(gl.FRAMEBUFFER,fbo);gl.invalidateFramebuffer(gl.FRAMEBUFFER,[gl.COLOR_ATTACHMENT0]);if(fbo!==lastBoundFbo)gl.bindFramebuffer(gl.FRAMEBUFFER,lastBoundFbo)}InitBlitFramebuffer(sourceRenderTarget,
destRenderTarget,mode){this._type=BATCH_BLITFRAMEBUFFER;const mat4param=this._mat4param;const renderer=this._batchState.renderer;mat4param[0]=sourceRenderTarget.GetWidth();mat4param[1]=sourceRenderTarget.GetHeight();mat4param[2]=destRenderTarget?destRenderTarget.GetWidth():renderer.GetWidth();mat4param[3]=destRenderTarget?destRenderTarget.GetHeight():renderer.GetHeight();mat4param[4]=sourceRenderTarget.IsLinearSampling()?1:0;mat4param[5]=mode==="stretch";const shaderParams=this._shaderParams;C3.clearArray(shaderParams);
shaderParams.push(sourceRenderTarget._GetFramebuffer());shaderParams.push(destRenderTarget?destRenderTarget._GetFramebuffer():null)}DoBlitFramebuffer(){const mat4param=this._mat4param;const shaderParams=this._shaderParams;const gl=this._gl;const srcWidth=mat4param[0];const srcHeight=mat4param[1];const destWidth=mat4param[2];const destHeight=mat4param[3];const isLinearSampling=mat4param[4]!==0;const isStretch=mat4param[5]!==0;const srcFbo=shaderParams[0];const destFbo=shaderParams[1];gl.bindFramebuffer(gl.READ_FRAMEBUFFER,
srcFbo);gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER,destFbo);if(isStretch)gl.blitFramebuffer(0,0,srcWidth,srcHeight,0,0,destWidth,destHeight,gl.COLOR_BUFFER_BIT,isLinearSampling?gl.LINEAR:gl.NEAREST);else{const w=Math.min(srcWidth,destWidth);const h=Math.min(srcHeight,destHeight);const srcOffY=Math.max(srcHeight-destHeight,0);const destOffY=Math.max(destHeight-srcHeight,0);gl.blitFramebuffer(0,srcOffY,w,h+srcOffY,0,destOffY,w,h+destOffY,gl.COLOR_BUFFER_BIT,gl.NEAREST)}}InitStartQuery(query){this._type=
BATCH_STARTQUERY;this._texParam=query}DoStartQuery(){this._texParam.BeginTimeElapsed();this._texParam=null}InitEndQuery(query){this._type=BATCH_ENDQUERY;this._texParam=query}DoEndQuery(){this._texParam.EndTimeElapsed();this._texParam=null}InitSetEllipseParams(pixelW,pixelH,outlineThickness){this._type=BATCH_SETELLIPSEPARAMS;const mat4param=this._mat4param;mat4param[0]=pixelW;mat4param[1]=pixelH;mat4param[2]=outlineThickness}DoSetEllipseParams(){const s=this._batchState.currentShader;const mat4param=
this._mat4param;if(s._uPixelSize.IsUsed())s._uPixelSize.Update2f(mat4param[0],mat4param[1]);if(s._uOutlineThickness.IsUsed())s._uOutlineThickness.Update1f(mat4param[2])}InitSetTilemapInfo(srcRect,textureWidth,textureHeight,tileWidth,tileHeight,tileSpacingX,tileSpacingY){this._type=BATCH_SETTILEMAPINFO;const mat4param=this._mat4param;srcRect.writeToTypedArray(mat4param,0);mat4param[4]=1/textureWidth;mat4param[5]=1/textureHeight;mat4param[6]=tileWidth/textureWidth;mat4param[7]=tileHeight/textureHeight;
mat4param[8]=tileSpacingX/textureWidth;mat4param[9]=tileSpacingY/textureHeight}DoSetTilemapInfo(){const s=this._batchState.currentShader;const mat4param=this._mat4param;if(s._uSrcStart.IsUsed())s._uSrcStart.Update2f(mat4param[0],mat4param[1]);if(s._uPixelSize.IsUsed())s._uPixelSize.Update2f(mat4param[4],mat4param[5]);if(s._uTileSize.IsUsed())s._uTileSize.Update2f(mat4param[6],mat4param[7]);if(s._uTileSpacing.IsUsed())s._uTileSpacing.Update2f(mat4param[8],mat4param[9])}Run(){switch(this._type){case 1:this.DoQuad();
return;case 2:this.DoSetTexture();return;case 3:this.DoSetColor();return;case 4:this.DoSetBlend();return;case 5:this.DoUpdateModelView();return;case 6:this.DoSetRenderTarget();return;case 7:this.DoClearSurface();return;case 8:this.DoClearRectangle();return;case 9:this.DoPoints();return;case 10:this.DoSetProgram();return;case 11:this.DoSetProgramParameters();return;case 12:this.DoInvalidateFramebuffer();return;case 13:this.DoSetPointTextureCoords();return;case 14:this.DoSetTilemapInfo();return;case 15:this.DoBlitFramebuffer();
return;case 16:this.DoStartQuery();return;case 17:this.DoEndQuery();return;case 18:this.DoSetEllipseParams();return;case 19:this.DoSetGradientColor();return}}}};


// ../lib/gfx/text.js
'use strict';{const C3=self.C3;const MAX_TEXTURE_SIZE=2048;const EXTRA_LINE_HEIGHT=4;const DEFAULT_OPTS={timeout:60};const tempColor=new C3.Color(0,0,0,1);const VALID_HORIZ_ALIGNMENTS=new Set(["left","center","right"]);const VALID_VERT_ALIGNMENTS=new Set(["top","center","bottom"]);const VALID_WORD_WRAP_MODES=new Set(["word","character"]);const allRendererTexts=new Set;if(C3.FontManager)C3.FontManager.addEventListener("fontload",e=>{const fontName=e.font.GetName();for(const f of allRendererTexts)if(f.IsBBCodeEnabled()||
C3.equalsNoCase(f.GetFontName(),fontName))f._SetTextChanged()});function fillOrStrokeText(ctx,isStroke,text,x,y,maxWidth){if(isStroke)if(C3.Platform.BrowserEngine==="Gecko")ctx.strokeText(text,x,y,maxWidth);else ctx.strokeText(text,x,y);else if(C3.Platform.BrowserEngine==="Gecko")ctx.fillText(text,x,y,maxWidth);else ctx.fillText(text,x,y)}function fillOrStrokeRect(ctx,isStroke,x,y,w,h){if(isStroke)ctx.strokeRect(x,y,w,h);else ctx.fillRect(x,y,w,h)}function ptToPx(pt){return pt*(4/3)}C3.Gfx.RendererText=
class RendererText{constructor(renderer,opts){opts=Object.assign({},DEFAULT_OPTS,opts);this._renderer=renderer;this._fontName="Arial";this._fontSize=16;this._lineHeight=0;this._isBold=false;this._isItalic=false;this._colorStr="black";this._isBBcodeEnabled=false;this.onloadfont=null;this._alreadyLoadedFonts=new Set;this._horizontalAlign="left";this._verticalAlign="top";this._text="";this._bbString=null;this._wrappedText=C3.New(C3.WordWrap);this._wrapMode="word";this._textChanged=false;this._isUpdating=
false;this._isAsync=true;this._drawMaxCharCount=-1;this._drawCharCount=0;this._cssWidth=0;this._cssHeight=0;this._width=0;this._height=0;this._zoom=1;this._changed=false;this._textCanvas=null;this._textContext=null;this._measureContext=null;this._lastCanvasWidth=-1;this._lastCanvasHeight=-1;this._lastTextCanvasFont="";this._lastMeasureCanvasFont="";this._lastTextCanvasFillStyle="";this._lastTextCanvasOpacity=1;this._lastTextCanvasLineWidth=1;this._measureTextCallback=(text,styles)=>this._MeasureText(text,
styles);this._texture=null;this._textureWidth=0;this._textureHeight=0;this._rcTex=new C3.Rect;this._scaleFactor=1;this._needToRecreateTexture=false;this._textureTimeout=new C3.IdleTimeout(()=>{this.ReleaseTexture();this._SetTextCanvasSize(8,8)},opts.timeout);this.ontextureupdate=null;this._wasReleased=false;allRendererTexts.add(this)}Release(){this.onloadfont=null;this._alreadyLoadedFonts.clear();this._bbString=null;this._textCanvas=null;this._textContext=null;this._measureContext=null;this._measureTextCallback=
null;this._textureTimeout.Release();this.ontextureupdate=null;this.ReleaseTexture();this._wrappedText.Clear();this._wrappedText=null;this._renderer=null;this._wasReleased=true;allRendererTexts.delete(this)}_SetChanged(){this._changed=true}_SetTextChanged(){this._SetChanged();this._wrappedText.Clear();this._textChanged=true}SetIsAsync(a){this._isAsync=!!a}IsAsync(){return this._isAsync}SetBBCodeEnabled(e){e=!!e;if(this._isBBcodeEnabled===e)return;this._isBBcodeEnabled=e;if(this._textContext)this._textContext.textBaseline=
this._isBBcodeEnabled?"alphabetic":"top";this._SetTextChanged()}IsBBCodeEnabled(){return this._isBBcodeEnabled}SetFontName(fontName){if(!fontName)fontName="serif";if(this._fontName===fontName)return;this._fontName=fontName;this._SetTextChanged()}GetFontName(){return this._fontName}SetFontSize(fontSize){if(fontSize<.1)fontSize=.1;if(this._fontSize===fontSize)return;this._fontSize=fontSize;this._SetTextChanged()}SetLineHeight(h){if(this._lineHeight===h)return;this._lineHeight=h;this._SetChanged()}SetBold(bold){bold=
!!bold;if(this._isBold===bold)return;this._isBold=bold;this._SetTextChanged()}SetItalic(italic){italic=!!italic;if(this._isItalic===italic)return;this._isItalic=italic;this._SetTextChanged()}SetDrawMaxCharacterCount(n){n=Math.floor(n);if(this._drawMaxCharCount===n)return;this._drawMaxCharCount=n;this._SetChanged()}GetDrawMaxCharacterCount(){return this._drawMaxCharCount}_GetStyleTag(styles,tag){for(let i=styles.length-1;i>=0;--i){const s=styles[i];if(s.tag===tag)return s}return null}_HasStyleTag(styles,
tag){return!!this._GetStyleTag(styles,tag)}_GetFontString(useCssUnits,styles){let ret="";if(this._isBold||this._HasStyleTag(styles,"b"))ret+="bold";if(this._isItalic||this._HasStyleTag(styles,"i"))ret+=" italic";const sizeStyle=this._GetStyleTag(styles,"size");const fontSize=sizeStyle?parseFloat(sizeStyle.param):this._fontSize;if(useCssUnits)ret+=" "+fontSize+"pt";else ret+=" "+fontSize*this._scaleFactor*this._zoom*self.devicePixelRatio+"pt";let fontName=this._fontName;const fontStyle=this._GetStyleTag(styles,
"font");if(fontStyle&&fontStyle.param){fontName=fontStyle.param;if(this.onloadfont&&!this._alreadyLoadedFonts.has(fontName)){this.onloadfont(fontName);this._alreadyLoadedFonts.add(fontName)}}if(fontName)ret+=' "'+fontName+'"';return ret}SetColor(c){if(c instanceof C3.Color)c=c.getCssRgb();if(this._colorStr===c)return;this._colorStr=c;this._SetChanged()}SetColorRgb(r,g,b){tempColor.setRgb(r,g,b);this.SetColor(tempColor)}SetHorizontalAlignment(h){if(!VALID_HORIZ_ALIGNMENTS.has(h))throw new Error("invalid horizontal alignment");
if(this._horizontalAlign===h)return;this._horizontalAlign=h;this._SetChanged()}SetVerticalAlignment(v){if(!VALID_VERT_ALIGNMENTS.has(v))throw new Error("invalid vertical alignment");if(this._verticalAlign===v)return;this._verticalAlign=v;this._SetChanged()}SetWordWrapMode(m){if(!VALID_WORD_WRAP_MODES.has(m))throw new Error("invalid word wrap mode");if(this._wrapMode===m)return;this._wrapMode=m;this._SetTextChanged()}SetText(text){if(this._text===text)return;this._text=text;this._SetTextChanged()}SetSize(cssWidth,
cssHeight,zoom){if(typeof zoom==="undefined")zoom=1;if(cssWidth<=0||cssWidth<=0)return;if(this._cssWidth===cssWidth&&this._cssHeight===cssHeight&&this._zoom===zoom)return;if(this._zoom===1!==(zoom===1))this._needToRecreateTexture=true;const oldCssWidth=this._cssWidth;const oldZoom=this._zoom;this._cssWidth=cssWidth;this._cssHeight=cssHeight;this._zoom=zoom;const dpr=self.devicePixelRatio;this._width=this._cssWidth*this._zoom*dpr;this._height=this._cssHeight*this._zoom*dpr;const maxDim=Math.max(this._width,
this._height);const maxTextureSize=Math.min(this._renderer.GetMaxTextureSize(),MAX_TEXTURE_SIZE);let scale=1;if(maxDim>maxTextureSize){scale=maxTextureSize/maxDim;this._width=Math.min(this._width*scale,maxTextureSize);this._height=Math.min(this._height*scale,maxTextureSize)}this._scaleFactor=scale;if(this._textureWidth>0&&this._textureHeight>0&&this._zoom===oldZoom)this._rcTex.set(0,0,this._width/this._textureWidth,this._height/this._textureHeight);if(this._cssWidth!==oldCssWidth)this._SetTextChanged();
else this._SetChanged()}GetWidth(){return this._width}GetHeight(){return this._height}GetTextWidth(){this._MaybeWrapText();return this._wrappedText.GetMaxLineWidth()}GetTextHeight(){this._MaybeWrapText();return this._wrappedText.GetTotalLineHeight()+this._wrappedText.GetLineCount()*(this._lineHeight+EXTRA_LINE_HEIGHT)-this._lineHeight}GetTexture(){this._textureTimeout.Reset();this._MaybeUpdate();return this._texture}_MaybeUpdate(){if(this._texture&&!this._changed&&!this._textChanged)return;if(this._isUpdating)return;
if(this._width<=0||this._height<=0)return;this._changed=false;this._isUpdating=true;if(this._isAsync)C3.Asyncify(()=>this._DoUpdate());else this._DoUpdate()}_DoUpdate(){if(this._wasReleased)return;this._SetTextCanvasSize(Math.ceil(this._width),Math.ceil(this._height));this._MaybeWrapText();this._DrawTextToCanvas();this._UpdateTexture();this._textureTimeout.Reset();this._isUpdating=false}_SetTextCanvasSize(w,h){if(!this._textCanvas)this._textCanvas=C3.CreateCanvas(16,16);let wasReset=false;if(this._lastCanvasWidth!==
w||this._lastCanvasHeight!==h){this._lastCanvasWidth=w;this._lastCanvasHeight=h;this._textCanvas.width=w;this._textCanvas.height=h;wasReset=true}if(!this._textContext){this._textContext=this._textCanvas.getContext("2d");wasReset=true}if(wasReset){this._textContext.textBaseline=this._isBBcodeEnabled?"alphabetic":"top";this._textContext.font=this._lastTextCanvasFont;this._textContext.fillStyle=this._lastTextCanvasFillStyle;this._textContext.strokeStyle=this._lastTextCanvasFillStyle;this._textContext.globalAlpha=
this._lastTextCanvasOpacity;this._textContext.lineWidth=this._lastTextCanvasLineWidth}else this._textContext.clearRect(0,0,w,h)}_MaybeCreateMeasureContext(){if(this._measureContext)return;this._measureContext=C3.CreateCanvas(16,16).getContext("2d")}_SetMeasureFontString(fontString){if(this._lastMeasureCanvasFont===fontString)return;this._lastMeasureCanvasFont=fontString;this._measureContext.font=fontString}_MaybeWrapText(){if(!this._textChanged)return;this._MaybeCreateMeasureContext();if(this._isBBcodeEnabled&&
(!this._bbString||this._bbString.toString()!==this._text))this._bbString=new C3.BBString(this._text,{noEscape:true});this._wrappedText.WordWrap(this._isBBcodeEnabled?this._bbString.toFragmentList():this._text,this._measureTextCallback,this._cssWidth,this._wrapMode,0);this._textChanged=false}_MeasureText(text,styles){this._SetMeasureFontString(this._GetFontString(true,styles));const sizeStyle=this._GetStyleTag(styles,"size");const fontSize=sizeStyle?parseFloat(sizeStyle.param):this._fontSize;return{width:this._measureContext.measureText(text).width,
height:ptToPx(fontSize)}}_SetDrawFontString(fontString){if(this._lastTextCanvasFont===fontString)return;this._lastTextCanvasFont=fontString;this._textContext.font=fontString}_SetDrawCanvasColor(styleStr){if(this._lastTextCanvasFillStyle===styleStr)return;this._lastTextCanvasFillStyle=styleStr;this._textContext.fillStyle=styleStr;this._textContext.strokeStyle=styleStr}_SetDrawCanvasOpacity(o){if(this._lastTextCanvasOpacity===o)return;this._lastTextCanvasOpacity=o;this._textContext.globalAlpha=o}_SetDrawCanvasLineWith(w){if(this._lastTextCanvasLineWidth===
w)return;this._lastTextCanvasLineWidth=w;this._textContext.lineWidth=w}_DrawTextToCanvas(){this._drawCharCount=0;const scale=this._scaleFactor*this._zoom*self.devicePixelRatio;const lineSpaceHeight=(EXTRA_LINE_HEIGHT+this._lineHeight)*scale;let penY=0;const lines=this._wrappedText.GetLines();const linesTotalHeight=lines.reduce((a,v)=>a+v.height*scale+lineSpaceHeight,0)-this._lineHeight*scale;if(this._verticalAlign==="center")penY=Math.max(this._height/2-linesTotalHeight/2,0);else if(this._verticalAlign===
"bottom")penY=this._height-linesTotalHeight-2;for(let i=0,len=lines.length;i<len;++i){const line=lines[i];const curLineTextHeight=line.height*scale;const startPenY=penY;if(this._isBBcodeEnabled){penY+=curLineTextHeight;if(i>0&&penY>this._height-EXTRA_LINE_HEIGHT*scale)break}else if(i>0&&penY>=this._height-curLineTextHeight)break;if(startPenY>=0)this._DrawTextLine(line,penY,scale);if(!this._isBBcodeEnabled)penY+=curLineTextHeight;penY+=lineSpaceHeight}}_DrawTextLine(line,penY,scale){let penX=0;if(this._horizontalAlign===
"center")penX=(this._width-line.width*scale)/2;else if(this._horizontalAlign==="right")penX=this._width-line.width*scale;for(const frag of line.fragments){this._DrawTextFragment(frag,penX,penY,scale,line.height);penX+=frag.width*scale}}_DrawTextFragment(frag,penX,penY,scale,lineHeight){const textContext=this._textContext;const lineFontScale=lineHeight/16;let fragWidth=frag.width*scale;const fragHeight=frag.height*scale;const fragFontScale=frag.height/16;const lineSpaceHeight=(EXTRA_LINE_HEIGHT+this._lineHeight)*
scale;const styles=frag.styles;let text=frag.text;if(this._drawMaxCharCount!==-1){if(this._drawCharCount>=this._drawMaxCharCount)return;if(this._drawCharCount+text.length>this._drawMaxCharCount){text=text.substr(0,this._drawMaxCharCount-this._drawCharCount);fragWidth=this._MeasureText(text,styles).width*scale}this._drawCharCount+=text.length}const backgroundStyle=this._GetStyleTag(styles,"background");const hasUnderline=this._HasStyleTag(styles,"u");const hasStrikethrough=this._HasStyleTag(styles,
"s");if(C3.IsStringAllWhitespace(text)&&!backgroundStyle&&!hasUnderline&&!hasStrikethrough||this._HasStyleTag(styles,"hide"))return;const offsetXStyle=this._GetStyleTag(styles,"offsetx");penX+=offsetXStyle?parseFloat(offsetXStyle.param)*scale:0;const offsetYStyle=this._GetStyleTag(styles,"offsety");penY+=offsetYStyle?parseFloat(offsetYStyle.param)*scale:0;if(backgroundStyle){this._SetDrawCanvasColor(backgroundStyle.param);textContext.fillRect(penX,penY-fragHeight,fragWidth,fragHeight+lineSpaceHeight)}const colorStyle=
this._GetStyleTag(styles,"color");this._SetDrawCanvasColor(colorStyle?colorStyle.param:this._colorStr);const opacityStyle=this._GetStyleTag(styles,"opacity");this._SetDrawCanvasOpacity(opacityStyle?parseFloat(opacityStyle.param)/100:1);const isStroke=this._HasStyleTag(styles,"stroke");if(isStroke)this._SetDrawCanvasLineWith(fragFontScale*this._scaleFactor*this._zoom);if(hasUnderline)fillOrStrokeRect(textContext,isStroke,penX,penY+scale*lineFontScale,fragWidth,scale*lineFontScale);if(hasStrikethrough)fillOrStrokeRect(textContext,
isStroke,penX,penY-fragHeight/4,fragWidth,scale*fragFontScale);this._SetDrawFontString(this._GetFontString(false,styles));fillOrStrokeText(textContext,isStroke,text,penX,penY,fragWidth);if(!isStroke){this._SetDrawCanvasLineWith(fragFontScale*this._scaleFactor*this._zoom);const outlineStyle=this._GetStyleTag(styles,"outline");if(outlineStyle){this._SetDrawCanvasColor(outlineStyle.param);fillOrStrokeText(textContext,true,text,penX,penY,fragWidth)}}}_UpdateTexture(){if(this._renderer.IsContextLost())return;
this._textureWidth=Math.ceil(this._width);this._textureHeight=Math.ceil(this._height);this._rcTex.set(0,0,this._width/this._textureWidth,this._height/this._textureHeight);if(this._needToRecreateTexture){this.ReleaseTexture();this._needToRecreateTexture=false}if(!this._texture)this._texture=this._renderer.CreateDynamicTexture(this._textureWidth,this._textureHeight,{mipMap:this._zoom===1,mipMapQuality:"high"});this._renderer.UpdateTexture(this._textCanvas,this._texture);if(this.ontextureupdate)this.ontextureupdate()}GetTexRect(){return this._rcTex}ReleaseTexture(){if(this._texture){if(!this._renderer.IsContextLost())this._renderer.DeleteTexture(this._texture);
this._texture=null}}static OnContextLost(){for(const rendererText of allRendererTexts)rendererText.ReleaseTexture()}static GetAll(){return allRendererTexts.values()}}};


// ../lib/gfx/webgl/query.js
'use strict';{const C3=self.C3;class WebGLRealTimeElapsedQuery{constructor(renderer){this._gl=renderer.GetContext();this._version=renderer.GetWebGLVersionNumber();this._timerExt=renderer._GetDisjointTimerQueryExtension();this._query=null;this._isActive=false;this._hasResult=false;this._result=0;if(this._version===1)this._query=this._timerExt["createQueryEXT"]();else this._query=this._gl["createQuery"]()}Release(){this._DeleteQueryObject();this._gl=null;this._timerExt=null;this._hasResult=false}_DeleteQueryObject(){if(!this._query)return;
if(this._version===1)this._timerExt["deleteQueryEXT"](this._query);else this._gl["deleteQuery"](this._query);this._query=null}BeginTimeElapsed(){if(this._isActive)throw new Error("query already active");if(this._version===1)this._timerExt["beginQueryEXT"](this._timerExt["TIME_ELAPSED_EXT"],this._query);else this._gl["beginQuery"](this._timerExt["TIME_ELAPSED_EXT"],this._query);this._isActive=true}EndTimeElapsed(){if(!this._isActive)throw new Error("query not active");if(this._version===1)this._timerExt["endQueryEXT"](this._timerExt["TIME_ELAPSED_EXT"]);
else this._gl["endQuery"](this._timerExt["TIME_ELAPSED_EXT"]);this._isActive=false}CheckForResult(){if(!this._query||this._hasResult||this._isActive)return;let available=false;if(this._version===1)available=this._timerExt["getQueryObjectEXT"](this._query,this._timerExt["QUERY_RESULT_AVAILABLE_EXT"]);else available=this._gl["getQueryParameter"](this._query,this._gl["QUERY_RESULT_AVAILABLE"]);const disjoint=this._gl.getParameter(this._timerExt["GPU_DISJOINT_EXT"]);if(available&&!disjoint){if(this._version===
1)this._result=this._timerExt["getQueryObjectEXT"](this._query,this._timerExt["QUERY_RESULT_EXT"]);else this._result=this._gl["getQueryParameter"](this._query,this._gl["QUERY_RESULT"]);this._result/=1E9;this._hasResult=true}if(available||disjoint)this._DeleteQueryObject()}HasResult(){return this._hasResult}GetResult(){if(!this._hasResult)throw new Error("no result available");return this._result}}C3.Gfx.WebGLTimeElapsedQuery=class WebGLTimeElapsedQuery{constructor(renderer){this._renderer=renderer;
this._frameNumber=renderer.GetFrameNumber();this._isActive=false;this._parentQuery=null;this._isNested=false;this._realQuery=null;this._queries=[]}Release(){for(const q of this._queries)if(q instanceof WebGLRealTimeElapsedQuery)q.Release();C3.clearArray(this._queries);this._parentQuery=null;this._realQuery=null;this._renderer=null}BeginTimeElapsed(){if(this._isActive)throw new Error("query already active");const stack=this._renderer._GetTimeQueryStack();if(stack.length>0){this._isNested=true;this._parentQuery=
stack[stack.length-1];this._parentQuery._EndReal();this._parentQuery._queries.push(this)}else{this._isNested=false;this._parentQuery=null}this._isActive=true;stack.push(this);this._StartReal()}EndTimeElapsed(){if(!this._isActive)throw new Error("query not active");const top=this._renderer._GetTimeQueryStack().pop();if(top!==this)throw new Error("can only end most nested query");this._isActive=false;this._EndReal();if(this._parentQuery){this._parentQuery._StartReal();this._parentQuery=null}}_StartReal(){this._realQuery=
C3.New(WebGLRealTimeElapsedQuery,this._renderer);this._queries.push(this._realQuery);this._realQuery.BeginTimeElapsed()}_EndReal(){this._realQuery.EndTimeElapsed();this._realQuery=null}CheckForResult(){for(const q of this._queries)q.CheckForResult()}IsNested(){return this._isNested}HasResult(){return this._queries.every(q=>q.HasResult())}GetResult(){return this._queries.reduce((a,v)=>a+v.GetResult(),0)}GetFrameNumber(){return this._frameNumber}}};


// ../lib/gfx/webgl/queryResultBuffer.js
'use strict';{const C3=self.C3;C3.Gfx.WebGLQueryResultBuffer=class WebGLQueryResultBuffer{constructor(renderer,maxQueries=1E3){this._renderer=renderer;this._maxQueries=maxQueries;this._buffer=[];this._renderer._AddQueryResultBuffer(this)}Release(){this.Clear();this._renderer._RemoveQueryResultBuffer(this);this._renderer=null}Clear(){for(const q of this._buffer)q.Release();C3.clearArray(this._buffer)}AddTimeElapsedQuery(){const ret=new C3.Gfx.WebGLTimeElapsedQuery(this._renderer);this._buffer.push(ret);
if(this._buffer.length>this._maxQueries){const oldest=this._buffer.shift();oldest.Release()}return ret}CheckForResults(toFrameNumber){for(const q of this._buffer){if(q.GetFrameNumber()>=toFrameNumber)return;if(q.IsNested())return;q.CheckForResult()}}GetFrameRangeResultSum(startFrame,endFrame){if(endFrame<=startFrame)return NaN;let sum=0;for(const q of this._buffer){if(q.GetFrameNumber()>=endFrame)break;if(q.GetFrameNumber()<startFrame)continue;if(q.HasResult())sum+=q.GetResult();else return NaN}return sum}DeleteAllBeforeFrameNumber(frameNumber){for(let i=
0,len=this._buffer.length;i<len;++i){const q=this._buffer[i];if(q.GetFrameNumber()<frameNumber)q.Release();else{if(i>0)this._buffer.splice(0,i);return}}}}};


// ../lib/gfx/webgl/webglRenderer.js
'use strict';{const C3=self.C3;const assert=self.assert;const glMatrix=self.glMatrix;const vec3=glMatrix.vec3;const vec4=glMatrix.vec4;const mat4=glMatrix.mat4;const DEFAULT_WEBGLRENDERER_OPTS={powerPreference:"default",enableGpuProfiling:true,alpha:false,lowLatency:false,maxWebGLVersion:2};const VALID_POWER_PREFERENCES=new Set(["default","low-power","high-performance"]);const MAX_VERTICES=8E3;const MAX_INDICES=MAX_VERTICES/2*3;const MAX_POINTS=8E3;const LAST_POINT=MAX_POINTS-4;const PARTIAL_TEXTURE_UPLOAD_CHUNK_SIZE=
256*1024;function areMat4sEqual(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]}const defaultTexCoordsQuad=new C3.Quad(0,0,1,0,1,1,0,1);const tmpVec3=vec3.fromValues(0,0,0);const tmpVec3b=vec3.fromValues(0,0,0);const tmpMat4=mat4.create();const tmpQuad=new C3.Quad;const tmpRect=new C3.Rect;let loseContextExtension=null;
if(C3.isDebug){self.debug_lose_context=function(){if(!loseContextExtension){console.warn("WEBGL_lose_context not supported");return}loseContextExtension.loseContext()};self.debug_restore_context=function(){if(!loseContextExtension){console.warn("WEBGL_lose_context not supported");return}loseContextExtension.restoreContext()}}const pendingPolls=new Set;let pollRafId=-1;function CheckPendingPolls(){pollRafId=-1;for(const info of pendingPolls)if(info.checkFunc()){info.resolve();pendingPolls.delete(info)}if(pendingPolls.size>
0)pollRafId=self.requestAnimationFrame(CheckPendingPolls)}function GetWebGLContext(canvas,attribs,maxWebGLVersion){let gl=null;if(maxWebGLVersion>=2){gl=canvas.getContext("webgl2",attribs);if(gl)return{gl,version:2}}gl=canvas.getContext("webgl",attribs);if(!gl)try{gl=canvas.getContext("experimental-webgl",attribs)}catch(err){console.warn("Error requesting 'experimental-webgl' context: ",err)}return{gl,version:1}}C3.Gfx.WebGLRenderer=class WebGLRenderer extends C3.Gfx.RendererBase{constructor(canvas,
opts){super();opts=Object.assign({},DEFAULT_WEBGLRENDERER_OPTS,opts);if(!VALID_POWER_PREFERENCES.has(opts.powerPreference))throw new Error("invalid power preference");let hasMajorPerformanceCaveat=false;const attribs={"alpha":!!opts.alpha,"depth":false,"antialias":false,"powerPreference":opts.powerPreference,"failIfMajorPerformanceCaveat":true};if(opts.lowLatency){attribs["desynchronized"]=true;attribs["preserveDrawingBuffer"]=true}let ctxInfo=GetWebGLContext(canvas,attribs,opts.maxWebGLVersion);
if(!ctxInfo.gl){hasMajorPerformanceCaveat=true;attribs["failIfMajorPerformanceCaveat"]=false;ctxInfo=GetWebGLContext(canvas,attribs,opts.maxWebGLVersion)}if(!ctxInfo.gl)throw new Error("failed to initialise WebGL context");const gl=ctxInfo.gl;this._gl=gl;this._attribs=gl.getContextAttributes();if(opts.lowLatency&&!this._attribs["desynchronized"])console.info("[WebGLRenderer] Low-latency mode specified but is not supported here");this._versionString=gl.getParameter(gl.VERSION);this._version=ctxInfo.version;
this._is3d=true;this._lastBackbufferWidth=0;this._lastBackbufferHeight=0;this._vertexBuffer=null;this._texcoordBuffer=null;this._indexBuffer=null;this._pointBuffer=null;this._vertexData=new Float32Array(MAX_VERTICES*this.GetNumVertexComponents());this._indexData=new Uint16Array(MAX_INDICES);this._texcoordData=new Float32Array(MAX_VERTICES*2);this._pointData=new Float32Array(MAX_POINTS*4);this._vertexPtr=0;this._texPtr=0;this._pointPtr=0;this._lastVertexPtr=0;this._lastProgram=null;this._spDeviceTransformTextureFill=
null;this._spColorFill=null;this._spLinearGradientFill=null;this._spHardEllipseFill=null;this._spHardEllipseOutline=null;this._spSmoothEllipseFill=null;this._spSmoothEllipseOutline=null;this._spSmoothLineFill=null;this._spPoints=null;this._spTilemapFill=null;this._batch=[];this._batchPtr=0;this._topOfBatch=0;this._currentRenderTarget=null;this._baseZ=0;this._currentZ=0;this._lastPointZ=0;this._batchState=C3.New(C3.Gfx.BatchState,this);this._lastColor=C3.New(C3.Color,1,1,1,1);this._lastTexture0=null;
this._lastTexture1=null;this._lastSrcBlend=0;this._lastDestBlend=0;this._lineWidth=1;this._lineWidthStack=[this._lineWidth];this._lineCap=1;this._lineCapStack=[this._lineCap];this._lineOffset=.5;this._lineOffsetStack=[this._lineOffset];this._isScissorViewport=false;this._viewportScissorWidth=-1;this._viewportScissorHeight=-1;this._lastPointTexCoords=new C3.Rect;this._maxTextureSize=-1;this._minPointSize=0;this._maxPointSize=0;this._highpPrecision=0;this._unmaskedVendor="(unavailable)";this._unmaskedRenderer=
"(unavailable)";this._extensions=[];this._hasMajorPerformanceCaveat=hasMajorPerformanceCaveat;this._isInitialisingAfterContextRestored=false;this._parallelShaderCompileExt=null;this._isGpuProfilingEnabled=!!opts.enableGpuProfiling;this._timerExt=null;this._allQueryResultBuffers=new Set;this._timeQueryStack=[];this.FillIndexBufferData(this._indexData)}async InitState(){const gl=this._gl;const numVertexComponents=this.GetNumVertexComponents();this._lastColor.setRgba(1,1,1,1);this._lastTexture0=null;
this._lastTexture1=null;this._vertexPtr=0;this._pointPtr=0;this._lastVertexPtr=MAX_VERTICES*numVertexComponents-4*numVertexComponents;C3.clearArray(this._batch);this._batchPtr=0;this._topOfBatch=0;this._lastProgram=null;this._currentRenderTarget=null;this._lastPointTexCoords.set(0,0,1,1);this._baseZ=0;this._currentZ=0;this._lastPointZ=0;const batchState=this._batchState;batchState.currentShader=null;batchState.currentFramebuffer=null;vec4.set(batchState.currentColor,1,1,1,1);batchState.clearColor.setRgba(0,
0,0,0);batchState.pointTexCoords.set(0,0,1,1);gl.clearColor(0,0,0,0);gl.clear(gl.COLOR_BUFFER_BIT);gl.enable(gl.BLEND);gl.blendFunc(gl.ONE,gl.ONE_MINUS_SRC_ALPHA);this._lastSrcBlend=gl.ONE;this._lastDestBlend=gl.ONE_MINUS_SRC_ALPHA;this._InitBlendModes(gl);gl.disable(gl.CULL_FACE);gl.disable(gl.STENCIL_TEST);gl.disable(gl.DITHER);gl.disable(gl.DEPTH_TEST);this._pointBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,this._pointBuffer);gl.bufferData(gl.ARRAY_BUFFER,this._pointData.byteLength,gl.DYNAMIC_DRAW);
this._vertexBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,this._vertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,this._vertexData.byteLength,gl.DYNAMIC_DRAW);this._texcoordBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,this._texcoordBuffer);gl.bufferData(gl.ARRAY_BUFFER,this._texcoordData.byteLength,gl.DYNAMIC_DRAW);this._indexBuffer=gl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this._indexBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,this._indexData,gl.STATIC_DRAW);gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D,null);this._maxTextureSize=gl.getParameter(gl.MAX_TEXTURE_SIZE);const pointsizes=gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);this._minPointSize=pointsizes[0];this._maxPointSize=pointsizes[1];const highpVertex=gl.getShaderPrecisionFormat(gl.VERTEX_SHADER,gl.HIGH_FLOAT);const highpFrag=gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER,gl.HIGH_FLOAT);if(highpVertex&&highpFrag)this._highpPrecision=Math.min(highpVertex["precision"],highpFrag["precision"]);else this._highpPrecision=
0;if(this._maxPointSize>2048)this._maxPointSize=2048;this._extensions=gl.getSupportedExtensions();const debug_ext=gl.getExtension("WEBGL_debug_renderer_info");if(debug_ext){this._unmaskedVendor=gl.getParameter(debug_ext["UNMASKED_VENDOR_WEBGL"]);this._unmaskedRenderer=gl.getParameter(debug_ext["UNMASKED_RENDERER_WEBGL"])}this._parallelShaderCompileExt=gl.getExtension("KHR_parallel_shader_compile");if(C3.isDebug)loseContextExtension=gl.getExtension("WEBGL_lose_context");if(this._isGpuProfilingEnabled)if(this.GetWebGLVersionNumber()===
1){if(C3.Platform.BrowserEngine!=="Chromium"||C3.Platform.BrowserVersionNumber>=81||typeof document!=="undefined")this._timerExt=gl.getExtension("EXT_disjoint_timer_query")}else this._timerExt=gl.getExtension("EXT_disjoint_timer_query_webgl2")||gl.getExtension("EXT_disjoint_timer_query");this._ClearAllShaderPrograms();const WebGLShaderProgram=C3.Gfx.WebGLShaderProgram;const vsSource=WebGLShaderProgram.GetDefaultVertexShaderSource(this._is3d,false);const DEFAULT_SHADER_PROGRAMS=[[WebGLShaderProgram.GetTextureFillFragmentShaderSource(),
vsSource,"<default>"],[WebGLShaderProgram.GetTextureFillFragmentShaderSource(),vsSource,"<default-device-transform>"],[WebGLShaderProgram.GetPointFragmentShaderSource(),WebGLShaderProgram.GetPointVertexShaderSource(),"<point>"],[WebGLShaderProgram.GetColorFillFragmentShaderSource(),vsSource,"<fill>"],[WebGLShaderProgram.GetLinearGradientFillFragmentShaderSource(),vsSource,"<lineargradient>"],[WebGLShaderProgram.GetHardEllipseFillFragmentShaderSource(),vsSource,"<hardellipse>"],[WebGLShaderProgram.GetHardEllipseOutlineFragmentShaderSource(),
vsSource,"<hardellipseoutline>"],[WebGLShaderProgram.GetSmoothEllipseFillFragmentShaderSource(),vsSource,"<smoothellipse>"],[WebGLShaderProgram.GetSmoothEllipseOutlineFragmentShaderSource(),vsSource,"<smoothellipseoutline>"],[WebGLShaderProgram.GetSmoothLineFillFragmentShaderSource(),vsSource,"<smoothline>"],[WebGLShaderProgram.GetTilemapFragmentShaderSource(),WebGLShaderProgram.GetDefaultVertexShaderSource(this._is3d,true),"<tilemap>"]];const defaultShaders=await Promise.all(DEFAULT_SHADER_PROGRAMS.map(i=>
this.CreateShaderProgram({src:i[0]},i[1],i[2])));this._spTextureFill=defaultShaders[0];this._spDeviceTransformTextureFill=defaultShaders[1];this._spPoints=defaultShaders[2];this._spColorFill=defaultShaders[3];this._spLinearGradientFill=defaultShaders[4];this._spHardEllipseFill=defaultShaders[5];this._spHardEllipseOutline=defaultShaders[6];this._spSmoothEllipseFill=defaultShaders[7];this._spSmoothEllipseOutline=defaultShaders[8];this._spSmoothLineFill=defaultShaders[9];this._spTilemapFill=defaultShaders[10];
this._currentStateGroup=null;this.SetTextureFillMode()}Is3D(){return this._is3d}GetNumVertexComponents(){return this._is3d?3:2}SetBaseZ(z){this._baseZ=z}GetBaseZ(){return this._baseZ}SetCurrentZ(z){this._currentZ=z;this._currentStateGroup=null}GetCurrentZ(){return this._currentZ}async CreateShaderProgram(shaderInfo,vsSource,name){const ret=await C3.Gfx.WebGLShaderProgram.Create(this,shaderInfo,vsSource,name);this._AddShaderProgram(ret);return ret}ResetLastProgram(){this._lastProgram=null}SetSize(w,
h,force){if(this._width===w&&this._height===h&&!force)return;this.EndBatch();const gl=this._gl;const batchState=this._batchState;this._width=w;this._height=h;const viewW=this.GetScissoredViewportWidth();const viewH=this.GetScissoredViewportHeight();this._UpdateViewportRenderer(viewW,viewH,this._width,this._height);this._UpdateViewportBatch(viewW,viewH,this._matP);if(this._spDeviceTransformTextureFill){gl.useProgram(this._spDeviceTransformTextureFill.GetShaderProgram());this._spDeviceTransformTextureFill._UpdateDeviceTransformUniforms(this._matP);
this._lastProgram=this._spDeviceTransformTextureFill;this._batchState.currentShader=this._spDeviceTransformTextureFill}gl.bindTexture(gl.TEXTURE_2D,null);gl.activeTexture(gl.TEXTURE1);gl.bindTexture(gl.TEXTURE_2D,null);gl.activeTexture(gl.TEXTURE0);this._lastTexture0=null;this._lastTexture1=null;if(this._currentRenderTarget)this._currentRenderTarget._Resize(this._width,this._height);gl.bindFramebuffer(gl.FRAMEBUFFER,null);this._currentRenderTarget=null;batchState.currentFramebuffer=null}_UpdateViewportRenderer(viewW,
viewH,surfaceW,surfaceH){this._cam[2]=100;mat4.lookAt(this._matMV,this._cam,this._look,this._up);mat4.perspective(this._matP,45,viewW/viewH,this.GetNearZ(),this.GetFarZ());const tl=[0,0];const br=[0,0];const dpr=self.devicePixelRatio;this.Project(0,0,viewW,viewH,tl);this.Project(1,1,viewW,viewH,br);this._worldScale[0]=dpr/(br[0]-tl[0]);this._worldScale[1]=-dpr/(br[1]-tl[1]);this._lastBackbufferWidth=surfaceW;this._lastBackbufferHeight=surfaceH}_UpdateViewportBatch(viewW,viewH,matP){const gl=this._gl;
const batchState=this._batchState;gl.viewport(0,0,viewW,viewH);const allShaderPrograms=this._allShaderPrograms;const currentShader=batchState.currentShader;for(let i=0,len=allShaderPrograms.length;i<len;++i){const s=allShaderPrograms[i];if(s===currentShader)s.UpdateMatP(matP,true);else s.SetMatPStale()}mat4.copy(batchState.currentMatP,matP)}SetViewportScissor(w,h){const gl=this._gl;if(this._width===w&&this._height===h){if(this._isScissorViewport){this.EndBatch();gl.disable(gl.SCISSOR_TEST);this._isScissorViewport=
false;this._viewportScissorWidth=-1;this._viewportScissorHeight=-1;this.SetSize(this._width,this._height,true)}return}if(!this._isScissorViewport){this.EndBatch();gl.enable(gl.SCISSOR_TEST);this._isScissorViewport=true}if(this._viewportScissorWidth!==w||this._viewportScissorHeight!==h){this.EndBatch();gl.scissor(0,0,w,h);this._viewportScissorWidth=w;this._viewportScissorHeight=h;this.SetSize(this._width,this._height,true)}}RemoveViewportScissor(){const gl=this._gl;if(this._isScissorViewport){this.EndBatch();
gl.disable(gl.SCISSOR_TEST);this._isScissorViewport=false}this._viewportScissorWidth=-1;this._viewportScissorHeight=-1}GetScissoredViewportWidth(){if(this._isScissorViewport)return this._viewportScissorWidth;else return this.GetWidth()}GetScissoredViewportHeight(){if(this._isScissorViewport)return this._viewportScissorHeight;else return this.GetHeight()}UpdateModelView(){if(areMat4sEqual(this._lastMV,this._matMV))return;const b=this.PushBatch();b.InitUpdateModelView(this._matMV);mat4.copy(this._lastMV,
this._matMV);this._topOfBatch=0}GetBatchState(){return this._batchState}PushBatch(){const batch=this._batch;if(this._batchPtr===batch.length)batch.push(new C3.Gfx.WebGLBatchJob(this._batchState));return batch[this._batchPtr++]}EndBatch(){if(this._batchPtr===0)return;if(this.IsContextLost())return;this._WriteBuffers();this._ExecuteBatch();this._batchPtr=0;this._vertexPtr=0;this._texPtr=0;this._pointPtr=0;this._topOfBatch=0}_WriteBuffers(){const gl=this._gl;if(this._pointPtr>0){gl.bindBuffer(gl.ARRAY_BUFFER,
this._pointBuffer);gl.bufferSubData(gl.ARRAY_BUFFER,0,this._pointData.subarray(0,this._pointPtr))}if(this._vertexPtr>0){gl.bindBuffer(gl.ARRAY_BUFFER,this._vertexBuffer);gl.bufferSubData(gl.ARRAY_BUFFER,0,this._vertexData.subarray(0,this._vertexPtr));gl.bindBuffer(gl.ARRAY_BUFFER,this._texcoordBuffer);gl.bufferSubData(gl.ARRAY_BUFFER,0,this._texcoordData.subarray(0,this._texPtr))}}_ExecuteBatch(){const batch=this._batch;for(let i=0,len=this._batchPtr;i<len;++i)batch[i].Run()}GetOpacity(){return this._lastColor.getA()}SetColorRgba(r,
g,b,a){const lastColor=this._lastColor;if(lastColor.equalsRgba(r,g,b,a))return;lastColor.setRgba(r,g,b,a);const batch=this.PushBatch();batch.InitSetColor(lastColor);this._topOfBatch=0;this._currentStateGroup=null}SetOpacity(a){const lastColor=this._lastColor;if(lastColor.getA()===a)return;lastColor.setA(a);const batch=this.PushBatch();batch.InitSetColor(lastColor);this._topOfBatch=0;this._currentStateGroup=null}SetColor(c){const lastColor=this._lastColor;if(lastColor.equals(c))return;lastColor.set(c);
const batch=this.PushBatch();batch.InitSetColor(lastColor);this._topOfBatch=0;this._currentStateGroup=null}ResetColor(){this.SetColorRgba(1,1,1,1)}GetColor(){return this._lastColor}SetTexture(rendererTex){if(rendererTex===this._lastTexture0)return;const b=this.PushBatch();b.InitSetTexture(rendererTex);this._lastTexture0=rendererTex;this._topOfBatch=0}_ResetLastTexture(){this._lastTexture0=null}SetBlendMode(bm){const arr=this._GetBlendByIndex(bm);this._SetBlend(arr[0],arr[1])}SetNamedBlendMode(bm){const o=
this.GetNamedBlend(bm);this._SetBlend(o.srcBlend,o.destBlend)}_SetBlend(s,d){if(s===this._lastSrcBlend&&d===this._lastDestBlend)return;const b=this.PushBatch();b.InitSetBlend(s,d);this._lastSrcBlend=s;this._lastDestBlend=d;this._topOfBatch=0;this._currentStateGroup=null}IsPremultipliedAlphaBlend(){return this._lastSrcBlend===this._gl.ONE&&this._lastDestBlend===this._gl.ONE_MINUS_SRC_ALPHA}SetAlphaBlend(){this._SetBlend(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)}SetNoPremultiplyAlphaBlend(){this._SetBlend(this._gl.SRC_ALPHA,
this._gl.ONE_MINUS_SRC_ALPHA)}SetCopyBlend(){this._SetBlend(this._gl.ONE,this._gl.ZERO)}Rect(r){this.Rect2(r.getLeft(),r.getTop(),r.getRight(),r.getBottom())}Rect2(left,top,right,bottom){this.Quad2(left,top,right,top,right,bottom,left,bottom)}_ExtendQuadBatch(){let v=this._vertexPtr;if(v>=this._lastVertexPtr){this.EndBatch();v=0}if(this._topOfBatch===1)this._batch[this._batchPtr-1]._indexCount+=6;else{const b=this.PushBatch();b.InitQuad(this._is3d?v:v/2*3,6);this._topOfBatch=1}}_WriteQuadToVertexBuffer(quad){quad.writeToTypedArray3D(this._vertexData,
this._vertexPtr,this._baseZ+this._currentZ);this._vertexPtr+=12}Quad(quad){this._ExtendQuadBatch();this._WriteQuadToVertexBuffer(quad);defaultTexCoordsQuad.writeToTypedArray(this._texcoordData,this._texPtr);this._texPtr+=8}Quad2(tlx,tly,trx,try_,brx,bry,blx,bly){this._ExtendQuadBatch();const vd=this._vertexData;let v=this._vertexPtr;const z=this._baseZ+this._currentZ;if(this._is3d){vd[v++]=tlx;vd[v++]=tly;vd[v++]=z;vd[v++]=trx;vd[v++]=try_;vd[v++]=z;vd[v++]=brx;vd[v++]=bry;vd[v++]=z;vd[v++]=blx;vd[v++]=
bly;vd[v++]=z}else{vd[v++]=tlx;vd[v++]=tly;vd[v++]=trx;vd[v++]=try_;vd[v++]=brx;vd[v++]=bry;vd[v++]=blx;vd[v++]=bly}this._vertexPtr=v;defaultTexCoordsQuad.writeToTypedArray(this._texcoordData,this._texPtr);this._texPtr+=8}Quad3(quad,rcTex){this._ExtendQuadBatch();this._WriteQuadToVertexBuffer(quad);rcTex.writeAsQuadToTypedArray(this._texcoordData,this._texPtr);this._texPtr+=8}Quad4(quad,uv){this._ExtendQuadBatch();this._WriteQuadToVertexBuffer(quad);uv.writeToTypedArray(this._texcoordData,this._texPtr);
this._texPtr+=8}FullscreenQuad(mode,curTex){mat4.copy(tmpMat4,this._lastMV);vec3.copy(tmpVec3,this._cam);vec3.copy(tmpVec3b,this._look);this._cam[0]=0;this._cam[1]=0;this._cam[2]=100*self.devicePixelRatio;this._look[0]=0;this._look[1]=0;this._look[2]=0;this.ResetModelView();this.UpdateModelView();if(this._isScissorViewport){const left=this._viewportScissorWidth/2;const top=this._viewportScissorHeight/2;tmpRect.set(-left,top,-left+this._viewportScissorWidth,top-this._viewportScissorHeight);tmpQuad.setFromRect(tmpRect);
tmpRect.set(0,0,this._viewportScissorWidth/this._width,this._viewportScissorHeight/this._height);this.Quad3(tmpQuad,tmpRect)}else if(mode==="crop"&&this._currentRenderTarget&&curTex){const left=this._width/2;const top=this._height/2;const srcW=curTex.GetWidth();const srcH=curTex.GetHeight();const destW=this._currentRenderTarget.GetWidth();const destH=this._currentRenderTarget.GetHeight();const copyW=Math.min(destW,srcW);const copyH=Math.min(destH,srcH);const srcOffY=Math.max(srcH-destH,0);const destOffY=
Math.max(destH-srcH,0);tmpRect.set(-left,top-destOffY,-left+copyW,top-copyH-destOffY);tmpQuad.setFromRect(tmpRect);tmpRect.set(0,srcOffY,copyW,copyH+srcOffY);tmpRect.divide(srcW,srcH);this.Quad3(tmpQuad,tmpRect)}else{let [width,height]=this.GetRenderTargetSize(this._currentRenderTarget);const halfW=width/2;const halfH=height/2;this.Rect2(-halfW,halfH,halfW,-halfH)}mat4.copy(this._matMV,tmpMat4);vec3.copy(this._cam,tmpVec3);vec3.copy(this._look,tmpVec3b);this.UpdateModelView()}ConvexPoly(pts){const pts_count=
pts.length/2;if(pts_count<3)throw new Error("need at least 3 points");const tris=pts_count-2;const last_tri=tris-1;const p0x=pts[0];const p0y=pts[1];for(let i=0;i<tris;i+=2){const i2=i*2;const p1x=pts[i2+2];const p1y=pts[i2+3];const p2x=pts[i2+4];const p2y=pts[i2+5];if(i===last_tri)this.Quad2(p0x,p0y,p1x,p1y,p2x,p2y,p2x,p2y);else{const p3x=pts[i2+6];const p3y=pts[i2+7];this.Quad2(p0x,p0y,p1x,p1y,p2x,p2y,p3x,p3y)}}}Line(x1,y1,x2,y2){const a=C3.angleTo(x1,y1,x2,y2);const sin_a=Math.sin(a);const cos_a=
Math.cos(a);const halfLineWidth=this._lineWidth*.5;const sin_a_hlw=sin_a*halfLineWidth;const cos_a_hlw=cos_a*halfLineWidth;const lineCap=this._lineCap;if(lineCap===2)this.LinePreCalc_LineCap2(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw);else if(lineCap===1)this.LinePreCalc_LineCap1(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw);else this.LinePreCalc_LineCap0(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw)}LinePreCalc_LineCap2(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw){const lineOffset=this._lineOffset;const startX=x1+lineOffset-cos_a_hlw;const startY=
y1+lineOffset-sin_a_hlw;const endX=x2+lineOffset+cos_a_hlw;const endY=y2+lineOffset+sin_a_hlw;const cos_a_lw=cos_a_hlw*2;const sin_a_lw=sin_a_hlw*2;const tlx=startX+sin_a_hlw;const tly=startY-cos_a_hlw;const blx=startX-sin_a_hlw+cos_a_lw;const bly=startY+cos_a_hlw+sin_a_lw;const trx=endX+sin_a_hlw;const try_=endY-cos_a_hlw;const brx=endX-sin_a_hlw-cos_a_lw;const bry=endY+cos_a_hlw-sin_a_lw;this.Quad2(tlx,tly,trx,try_,brx,bry,blx,bly)}LinePreCalc_LineCap1(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw){const lineOffset=
this._lineOffset;const startX=x1+lineOffset-cos_a_hlw;const startY=y1+lineOffset-sin_a_hlw;const endX=x2+lineOffset+cos_a_hlw;const endY=y2+lineOffset+sin_a_hlw;const tlx=startX+sin_a_hlw;const tly=startY-cos_a_hlw;const blx=startX-sin_a_hlw;const bly=startY+cos_a_hlw;const trx=endX+sin_a_hlw;const try_=endY-cos_a_hlw;const brx=endX-sin_a_hlw;const bry=endY+cos_a_hlw;this.Quad2(tlx,tly,trx,try_,brx,bry,blx,bly)}LinePreCalc_LineCap0(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw){const lineOffset=this._lineOffset;
const startX=x1+lineOffset;const startY=y1+lineOffset;const endX=x2+lineOffset;const endY=y2+lineOffset;const tlx=startX+sin_a_hlw;const tly=startY-cos_a_hlw;const blx=startX-sin_a_hlw;const bly=startY+cos_a_hlw;const trx=endX+sin_a_hlw;const try_=endY-cos_a_hlw;const brx=endX-sin_a_hlw;const bry=endY+cos_a_hlw;this.Quad2(tlx,tly,trx,try_,brx,bry,blx,bly)}TexturedLine(x1,y1,x2,y2,u,v){const a=C3.angleTo(x1,y1,x2,y2);const sin_a=Math.sin(a);const cos_a=Math.cos(a);const halfLineWidth=this._lineWidth*
.5;const sin_a_hlw=sin_a*halfLineWidth;const cos_a_hlw=cos_a*halfLineWidth;const lineCap=this._lineCap;if(lineCap===2)this.TexturedLinePreCalc_LineCap2(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw,u,v);else if(lineCap===1)this.TexturedLinePreCalc_LineCap1(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw,u,v);else this.TexturedLinePreCalc_LineCap0(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw,u,v)}TexturedLinePreCalc_LineCap2(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw,u,v){const lineOffset=this._lineOffset;const startX=x1+lineOffset-cos_a_hlw;const startY=
y1+lineOffset-sin_a_hlw;const endX=x2+lineOffset+cos_a_hlw;const endY=y2+lineOffset+sin_a_hlw;const cos_a_lw=cos_a_hlw*2;const sin_a_lw=sin_a_hlw*2;const tlx=startX+sin_a_hlw;const tly=startY-cos_a_hlw;const blx=startX-sin_a_hlw+cos_a_lw;const bly=startY+cos_a_hlw+sin_a_lw;const trx=endX+sin_a_hlw;const try_=endY-cos_a_hlw;const brx=endX-sin_a_hlw-cos_a_lw;const bry=endY+cos_a_hlw-sin_a_lw;tmpQuad.set(tlx,tly,trx,try_,brx,bry,blx,bly);tmpRect.set(u,0,v,0);this.Quad3(tmpQuad,tmpRect)}TexturedLinePreCalc_LineCap1(x1,
y1,x2,y2,sin_a_hlw,cos_a_hlw,u,v){const lineOffset=this._lineOffset;const startX=x1+lineOffset-cos_a_hlw;const startY=y1+lineOffset-sin_a_hlw;const endX=x2+lineOffset+cos_a_hlw;const endY=y2+lineOffset+sin_a_hlw;const tlx=startX+sin_a_hlw;const tly=startY-cos_a_hlw;const blx=startX-sin_a_hlw;const bly=startY+cos_a_hlw;const trx=endX+sin_a_hlw;const try_=endY-cos_a_hlw;const brx=endX-sin_a_hlw;const bry=endY+cos_a_hlw;tmpQuad.set(tlx,tly,trx,try_,brx,bry,blx,bly);tmpRect.set(u,0,v,0);this.Quad3(tmpQuad,
tmpRect)}TexturedLinePreCalc_LineCap0(x1,y1,x2,y2,sin_a_hlw,cos_a_hlw,u,v){const lineOffset=this._lineOffset;const startX=x1+lineOffset;const startY=y1+lineOffset;const endX=x2+lineOffset;const endY=y2+lineOffset;const tlx=startX+sin_a_hlw;const tly=startY-cos_a_hlw;const blx=startX-sin_a_hlw;const bly=startY+cos_a_hlw;const trx=endX+sin_a_hlw;const try_=endY-cos_a_hlw;const brx=endX-sin_a_hlw;const bry=endY+cos_a_hlw;tmpQuad.set(tlx,tly,trx,try_,brx,bry,blx,bly);tmpRect.set(u,0,v,0);this.Quad3(tmpQuad,
tmpRect)}LineRect(left,top,right,bottom){const halfLineWidth=this._lineWidth*.5;const lineCap=this._lineCap;if(lineCap===2)this._LineRectPreCalc_LineCap2(left,top,right,bottom,halfLineWidth);else if(lineCap===1)this._LineRectPreCalc_LineCap1(left,top,right,bottom,halfLineWidth);else this._LineRectPreCalc_LineCap0(left,top,right,bottom,halfLineWidth)}_LineRectPreCalc_LineCap2(left,top,right,bottom,halfLineWidth){this.LinePreCalc_LineCap2(left,top,right,top,0,halfLineWidth);this.LinePreCalc_LineCap2(right,
top,right,bottom,halfLineWidth,0);this.LinePreCalc_LineCap2(right,bottom,left,bottom,0,-halfLineWidth);this.LinePreCalc_LineCap2(left,bottom,left,top,-halfLineWidth,0)}_LineRectPreCalc_LineCap1(left,top,right,bottom,halfLineWidth){this.LinePreCalc_LineCap1(left,top,right,top,0,halfLineWidth);this.LinePreCalc_LineCap1(right,top,right,bottom,halfLineWidth,0);this.LinePreCalc_LineCap1(right,bottom,left,bottom,0,-halfLineWidth);this.LinePreCalc_LineCap1(left,bottom,left,top,-halfLineWidth,0)}_LineRectPreCalc_LineCap0(left,
top,right,bottom,halfLineWidth){this.LinePreCalc_LineCap0(left,top,right,top,0,halfLineWidth);this.LinePreCalc_LineCap0(right,top,right,bottom,halfLineWidth,0);this.LinePreCalc_LineCap0(right,bottom,left,bottom,0,-halfLineWidth);this.LinePreCalc_LineCap0(left,bottom,left,top,-halfLineWidth,0)}LineRect2(r){this.LineRect(r.getLeft(),r.getTop(),r.getRight(),r.getBottom())}LineQuad(q){const a=C3.angleTo(q.getTlx(),q.getTly(),q.getTrx(),q.getTry());const sin_a=Math.sin(a);const cos_a=Math.cos(a);const halfLineWidth=
this._lineWidth*.5;const sin_a_hlw=sin_a*halfLineWidth;const cos_a_hlw=cos_a*halfLineWidth;const lineCap=this._lineCap;if(lineCap===2)this._LineQuadPreCalc_LineCap2(q,sin_a_hlw,cos_a_hlw);else if(lineCap===1)this._LineQuadPreCalc_LineCap1(q,sin_a_hlw,cos_a_hlw);else this._LineQuadPreCalc_LineCap0(q,sin_a_hlw,cos_a_hlw)}_LineQuadPreCalc_LineCap2(q,sin_a_hlw,cos_a_hlw){this.LinePreCalc_LineCap2(q.getTlx(),q.getTly(),q.getTrx(),q.getTry(),sin_a_hlw,cos_a_hlw);this.LinePreCalc_LineCap2(q.getTrx(),q.getTry(),
q.getBrx(),q.getBry(),cos_a_hlw,-sin_a_hlw);this.LinePreCalc_LineCap2(q.getBrx(),q.getBry(),q.getBlx(),q.getBly(),-sin_a_hlw,-cos_a_hlw);this.LinePreCalc_LineCap2(q.getBlx(),q.getBly(),q.getTlx(),q.getTly(),-cos_a_hlw,sin_a_hlw)}_LineQuadPreCalc_LineCap1(q,sin_a_hlw,cos_a_hlw){this.LinePreCalc_LineCap1(q.getTlx(),q.getTly(),q.getTrx(),q.getTry(),sin_a_hlw,cos_a_hlw);this.LinePreCalc_LineCap1(q.getTrx(),q.getTry(),q.getBrx(),q.getBry(),cos_a_hlw,-sin_a_hlw);this.LinePreCalc_LineCap1(q.getBrx(),q.getBry(),
q.getBlx(),q.getBly(),-sin_a_hlw,-cos_a_hlw);this.LinePreCalc_LineCap1(q.getBlx(),q.getBly(),q.getTlx(),q.getTly(),-cos_a_hlw,sin_a_hlw)}_LineQuadPreCalc_LineCap0(q,sin_a_hlw,cos_a_hlw){this.LinePreCalc_LineCap0(q.getTlx(),q.getTly(),q.getTrx(),q.getTry(),sin_a_hlw,cos_a_hlw);this.LinePreCalc_LineCap0(q.getTrx(),q.getTry(),q.getBrx(),q.getBry(),cos_a_hlw,-sin_a_hlw);this.LinePreCalc_LineCap0(q.getBrx(),q.getBry(),q.getBlx(),q.getBly(),-sin_a_hlw,-cos_a_hlw);this.LinePreCalc_LineCap0(q.getBlx(),q.getBly(),
q.getTlx(),q.getTly(),-cos_a_hlw,sin_a_hlw)}SetLineWidth(n){this._lineWidth=n;this._lineWidthStack[this._lineWidthStack.length-1]=n}GetLineWidth(){return this._lineWidth}PushLineWidth(n){if(this._lineWidthStack.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this._lineWidthStack.push(n);this._lineWidth=n}PopLineWidth(){if(this._lineWidthStack.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this._lineWidthStack.pop();this._lineWidth=
this._lineWidthStack[this._lineWidthStack.length-1]}SetLineCapButt(){this._lineCap=0;this._lineCapStack[this._lineCapStack.length-1]=0}SetLineCapSquare(){this._lineCap=1;this._lineCapStack[this._lineCapStack.length-1]=0}SetLineCapZag(){this._lineCap=2;this._lineCapStack[this._lineCapStack.length-1]=0}PushLineCap(type){if(type==="butt")this.PushLineCapButt();else if(type==="square")this.PushLineCapSquare();else if(type==="zag")this.PushLineCapZag();else throw new Error("invalid line cap");}PushLineCapButt(){if(this._lineCapStack.length>=
100)throw new Error("pushed too many line caps - check push/pop pairs");this._lineCapStack.push(0);this._lineCap=0}PushLineCapSquare(){if(this._lineCapStack.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this._lineCapStack.push(1);this._lineCap=1}PushLineCapZag(){if(this._lineCapStack.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this._lineCapStack.push(2);this._lineCap=2}PopLineCap(){if(this._lineCapStack.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");
this._lineCapStack.pop();this._lineCap=this._lineCapStack[this._lineCapStack.length-1]}SetLineOffset(n){this._lineOffset=n;this._lineOffsetStack[this._lineOffsetStack.length-1]=n}GetLineOffset(){return this._lineOffset}PushLineOffset(n){if(this._lineOffsetStack.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this._lineOffsetStack.push(n);this._lineOffset=n}PopLineOffset(){if(this._lineOffsetStack.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");
this._lineOffsetStack.pop();this._lineOffset=this._lineOffsetStack[this._lineOffsetStack.length-1]}SetPointTextureCoords(rect){if(this._lastPointTexCoords.equals(rect))return;this._lastPointTexCoords.copy(rect);const b=this.PushBatch();b.InitSetPointTexCoords(rect);this._topOfBatch=0}Point(x_,y_,size_,opacity_){if(this._pointPtr>=LAST_POINT)this.EndBatch();let p=this._pointPtr;const z=this._baseZ+this._currentZ;if(this._topOfBatch===2&&this._lastPointZ===z)this._batch[this._batchPtr-1]._indexCount++;
else{const b=this.PushBatch();b.InitPoints(p,z);this._topOfBatch=2;this._lastPointZ=z}const pd=this._pointData;pd[p++]=x_;pd[p++]=y_;pd[p++]=size_;pd[p++]=opacity_;this._pointPtr=p}SetProgram(program){if(this._lastProgram===program)return;const b=this.PushBatch();b.InitSetProgram(program);this._lastProgram=program;this._topOfBatch=0;this._currentStateGroup=null}SetTextureFillMode(){this.SetProgram(this._spTextureFill)}SetDeviceTransformTextureFillMode(){this.SetProgram(this._spDeviceTransformTextureFill)}SetColorFillMode(){this.SetProgram(this._spColorFill)}SetLinearGradientFillMode(){this.SetProgram(this._spLinearGradientFill)}SetGradientColor(c){const b=
this.PushBatch();b.InitSetGradientColor(c);this._topOfBatch=0}SetHardEllipseFillMode(){this.SetProgram(this._spHardEllipseFill)}SetHardEllipseOutlineMode(){this.SetProgram(this._spHardEllipseOutline)}SetSmoothEllipseFillMode(){this.SetProgram(this._spSmoothEllipseFill)}SetSmoothEllipseOutlineMode(){this.SetProgram(this._spSmoothEllipseOutline)}SetEllipseParams(pixelW,pixelH,outlineThickness=1){const b=this.PushBatch();b.InitSetEllipseParams(pixelW,pixelH,outlineThickness);this._topOfBatch=0}SetSmoothLineFillMode(){this.SetProgram(this._spSmoothLineFill)}SetTilemapFillMode(){this.SetProgram(this._spTilemapFill)}SetTilemapInfo(srcRect,
textureWidth,textureHeight,tileWidth,tileHeight,tileSpacingX,tileSpacingY){if(this._lastProgram!==this._spTilemapFill)throw new Error("must set tilemap fill mode first");const b=this.PushBatch();b.InitSetTilemapInfo(srcRect,textureWidth,textureHeight,tileWidth,tileHeight,tileSpacingX,tileSpacingY);this._topOfBatch=0}SetProgramParameters(backTex,destRect,srcRect,srcOriginRect,layoutRect,pixelWidth,pixelHeight,layerScale,layerAngle,time,params){const s=this._lastProgram;const hasAnyOptionalUniforms=
s._hasAnyOptionalUniforms;const hasAnyCustomParams=!!params.length;if((!hasAnyOptionalUniforms||s.AreOptionalUniformsAlreadySetInBatch(destRect,srcRect,srcOriginRect,layoutRect,pixelWidth,pixelHeight,layerScale,layerAngle,time))&&(!hasAnyCustomParams||s.AreCustomParametersAlreadySetInBatch(params)))return;const b=this.PushBatch();b.InitSetProgramParameters();if(hasAnyOptionalUniforms){s.SetOptionalUniformsInBatch(destRect,srcRect,srcOriginRect,layoutRect,pixelWidth,pixelHeight,layerScale,layerAngle,
time);const mat4param=b._mat4param;mat4param[0]=pixelWidth;mat4param[1]=pixelHeight;destRect.writeToTypedArray(mat4param,2);mat4param[6]=layerScale;mat4param[7]=layerAngle;srcRect.writeToTypedArray(mat4param,12);const colorParam=b._colorParam;layoutRect.writeToTypedArray(colorParam,0);const tmp=colorParam[1];colorParam[1]=colorParam[3];colorParam[3]=tmp;srcOriginRect.writeToTypedArray(b._srcOriginRect,0);b._startIndex=time;if(s._uSamplerBack.IsUsed())b._texParam=backTex?backTex.GetTexture():null;
else b._texParam=null}if(hasAnyCustomParams){s.SetCustomParametersInBatch(params);C3.shallowAssignArray(b._shaderParams,params)}this._topOfBatch=0}ClearRgba(r,g,b_,a){const b=this.PushBatch();b.InitClearSurface2(r,g,b_,a);this._topOfBatch=0}Clear(c){const b=this.PushBatch();b.InitClearSurface(c);this._topOfBatch=0}ClearRect(x,y,w,h){this.ClearRect4(x,y,w,h,0,0,0,0)}ClearRect2(rc){this.ClearRect4(rc.getLeft(),rc.getTop(),rc.width(),rc.height(),0,0,0,0)}ClearRect3(rc,c){this.ClearRect4(rc.getLeft(),
rc.getTop(),rc.width(),rc.height(),c.getR(),c.getG(),c.getB(),c.getA())}ClearRect4(x,y,w,h,r,g,b,a){if(w<0||h<0)return;const batch=this.PushBatch();batch.InitClearRect(x,y,w,h,r,g,b,a);this._topOfBatch=0}Start(){}Finish(){super.Finish();this._gl.flush()}CheckForQueryResults(){for(const qrb of this._allQueryResultBuffers)qrb.CheckForResults(this._frameNumber)}IsContextLost(){return!this._gl||this._gl.isContextLost()||this._isInitialisingAfterContextRestored}OnContextLost(){C3.Gfx.WebGLRendererTexture.OnContextLost();
C3.Gfx.WebGLRenderTarget.OnContextLost();C3.Gfx.RendererText.OnContextLost();for(const qrb of this._allQueryResultBuffers)qrb.Clear();this._extensions=[];this._timerExt=null;this._parallelShaderCompileExt=null;this._unmaskedVendor="(unavailable)";this._unmaskedRenderer="(unavailable)";this._lastProgram=null;this._spTextureFill=null;this._spDeviceTransformTextureFill=null;this._spColorFill=null;this._spLinearGradientFill=null;this._spHardEllipseFill=null;this._spHardEllipseOutline=null;this._spSmoothEllipseFill=
null;this._spSmoothEllipseOutline=null;this._spSmoothLineFill=null;this._spPoints=null;this._spTilemapFill=null;for(const stateGroup of this._stateGroups.values())stateGroup.OnContextLost();for(const s of this._allShaderPrograms)s.Release();this._ClearAllShaderPrograms()}async OnContextRestored(){this._isInitialisingAfterContextRestored=true;await this.InitState();this._isInitialisingAfterContextRestored=false;for(const stateGroup of this._stateGroups.values())stateGroup.OnContextRestored(this);this.SetSize(this._width,
this._height,true)}CreateStaticTexture(data,opts){if(this.IsContextLost())throw new Error("context lost");this.EndBatch();const rendererTex=C3.New(C3.Gfx.WebGLRendererTexture,this);rendererTex._CreateStatic(data,opts);return rendererTex}CreateStaticTextureAsync(data,opts){if(this.IsContextLost())return Promise.reject("context lost");opts=Object.assign({},opts);const isTiled=opts.wrapX&&opts.wrapX!=="clamp-to-edge"||opts.wrapY&&opts.wrapY!=="clamp-to-edge";if(C3.Supports.ImageBitmapOptions&&(this.SupportsNPOTTextures()||
!isTiled)){opts.premultiplyAlpha=false;return createImageBitmap(data,{"premultiplyAlpha":"premultiply"}).then(imageBitmap=>C3.Asyncify(()=>this.CreateStaticTexture(imageBitmap,opts)))}else if(C3.Supports.ImageBitmap)return createImageBitmap(data).then(imageBitmap=>C3.Asyncify(()=>this.CreateStaticTexture(imageBitmap,opts)));else if(data instanceof Blob)return C3.BlobToImage(data,true).then(img=>this.CreateStaticTextureAsync(img,opts));else if(typeof HTMLImageElement!=="undefined"&&data instanceof
HTMLImageElement&&typeof data["decode"]==="function")return data["decode"]().then(()=>C3.Asyncify(()=>this.CreateStaticTexture(data,opts)));else return C3.Asyncify(()=>this.CreateStaticTexture(data,opts))}CreateDynamicTexture(width,height,opts){this.EndBatch();const rendererTex=C3.New(C3.Gfx.WebGLRendererTexture,this);rendererTex._CreateDynamic(width,height,opts);return rendererTex}UpdateTexture(data,rendererTex,opts){this.EndBatch();rendererTex._Update(data,opts)}DeleteTexture(rendererTex){if(!rendererTex)return;
rendererTex.SubtractReference();if(rendererTex.GetReferenceCount()>0)return;this.EndBatch();if(rendererTex===this._lastTexture0){this._gl.bindTexture(this._gl.TEXTURE_2D,null);this._lastTexture0=null}if(rendererTex===this._lastTexture1){this._gl.activeTexture(this._gl.TEXTURE1);this._gl.bindTexture(this._gl.TEXTURE_2D,null);this._gl.activeTexture(this._gl.TEXTURE0);this._lastTexture1=null}rendererTex._Delete()}CreateRenderTarget(opts){let width=this._width;let height=this._height;let isDefaultSize=
true;if(opts){if(typeof opts.width==="number"){width=opts.width;isDefaultSize=false}if(typeof opts.height==="number"){height=opts.height;isDefaultSize=false}}if(width<=0||height<=0)throw new Error("invalid size");this.EndBatch();const renderTarget=C3.New(C3.Gfx.WebGLRenderTarget,this);renderTarget._Create(width,height,Object.assign({isDefaultSize},opts));this._currentRenderTarget=null;this._batchState.currentFramebuffer=null;return renderTarget}SetRenderTarget(renderTarget){if(renderTarget===this._currentRenderTarget)return;
let newViewWidth,newViewHeight,newSurfaceWidth,newSurfaceHeight;if(renderTarget){if(renderTarget.IsDefaultSize())renderTarget._Resize(this._width,this._height);newSurfaceWidth=renderTarget.GetWidth();newSurfaceHeight=renderTarget.GetHeight();newViewWidth=newSurfaceWidth;newViewHeight=newSurfaceHeight}else{newSurfaceWidth=this._width;newSurfaceHeight=this._height;newViewWidth=this.GetScissoredViewportWidth();newViewHeight=this.GetScissoredViewportHeight()}const didSurfaceSizeChange=this._lastBackbufferWidth!==
newSurfaceWidth||this._lastBackbufferHeight!==newSurfaceHeight;if(didSurfaceSizeChange)this._UpdateViewportRenderer(newViewWidth,newViewHeight,newSurfaceWidth,newSurfaceHeight);const b=this.PushBatch();b.InitSetRenderTarget(renderTarget,didSurfaceSizeChange,this._matP);this._currentRenderTarget=renderTarget;this._topOfBatch=0}GetRenderTarget(){return this._currentRenderTarget}GetRenderTargetSize(renderTarget){if(renderTarget)return[renderTarget.GetWidth(),renderTarget.GetHeight()];else return[this._width,
this._height]}CopyRenderTarget(renderTarget,mode="stretch"){if(this._version<2||this._currentRenderTarget&&this._currentRenderTarget.GetMultisampling()>0){this.SetCopyBlend();this.ResetColor();this.DrawRenderTarget(renderTarget,mode)}else{const b=this.PushBatch();b.InitBlitFramebuffer(renderTarget,this._currentRenderTarget,mode);this._topOfBatch=0}}DrawRenderTarget(renderTarget,mode="stretch"){const tex=renderTarget.GetTexture();if(!tex)throw new Error("not a texture-backed render target");this.SetTexture(tex);
this.FullscreenQuad(mode,tex)}InvalidateRenderTarget(renderTarget){if(this._version<2)return;const b=this.PushBatch();b.InitInvalidateFramebuffer(renderTarget._GetFramebuffer());this._topOfBatch=0}DeleteRenderTarget(renderTarget){this.SetRenderTarget(null);this.EndBatch();const renderTex=renderTarget.GetTexture();if(renderTex===this._lastTexture0){this._gl.bindTexture(this._gl.TEXTURE_2D,null);this._lastTexture0=null}if(renderTex===this._lastTexture1){this._gl.activeTexture(this._gl.TEXTURE1);this._gl.bindTexture(this._gl.TEXTURE_2D,
null);this._gl.activeTexture(this._gl.TEXTURE0);this._lastTexture1=null}renderTarget._Delete()}async ReadBackRenderTargetToImageData(renderTarget,forceSynchronous,areaRect){this.EndBatch();const oldRenderTarget=this._currentRenderTarget;let width,height,framebuffer;if(renderTarget){width=renderTarget.GetWidth();height=renderTarget.GetHeight();framebuffer=renderTarget._GetFramebuffer()}else{width=this.GetWidth();height=this.GetHeight();framebuffer=null}let x=0;let y=0;let areaWidth=width;let areaHeight=
height;if(areaRect){x=C3.clamp(Math.floor(areaRect.getLeft()),0,width-1);y=C3.clamp(Math.floor(areaRect.getTop()),0,height-1);let w=areaRect.width();if(w===0)w=width-x;else w=C3.clamp(Math.floor(w),0,width-x);let h=areaRect.height();if(h===0)h=height-y;else h=C3.clamp(Math.floor(h),0,height-y);areaWidth=w;areaHeight=h;y=height-(y+areaHeight)}const gl=this._gl;gl.bindFramebuffer(gl.FRAMEBUFFER,framebuffer);const restorePreviousRenderTarget=()=>{gl.bindFramebuffer(gl.FRAMEBUFFER,null);this._currentRenderTarget=
null;this._batchState.currentFramebuffer=null;this.SetRenderTarget(oldRenderTarget)};let imageData;if(!forceSynchronous&&this.GetWebGLVersionNumber()>=2){gl.bindFramebuffer(gl.READ_FRAMEBUFFER,framebuffer);const pixelBuffer=gl.createBuffer();const bufferSize=areaWidth*areaHeight*4;const PIXEL_PACK_BUFFER=gl["PIXEL_PACK_BUFFER"];gl.bindBuffer(PIXEL_PACK_BUFFER,pixelBuffer);gl.bufferData(PIXEL_PACK_BUFFER,bufferSize,gl["STREAM_READ"]);gl.readPixels(x,y,areaWidth,areaHeight,gl.RGBA,gl.UNSIGNED_BYTE,
0);gl.bindFramebuffer(gl.READ_FRAMEBUFFER,null);gl.bindBuffer(PIXEL_PACK_BUFFER,null);restorePreviousRenderTarget();const sync=gl["fenceSync"](gl["SYNC_GPU_COMMANDS_COMPLETE"],0);await this._WaitForObjectReady(()=>gl["getSyncParameter"](sync,gl["SYNC_STATUS"])===gl["SIGNALED"]);gl["deleteSync"](sync);imageData=new ImageData(areaWidth,areaHeight);gl.bindBuffer(PIXEL_PACK_BUFFER,pixelBuffer);gl["getBufferSubData"](PIXEL_PACK_BUFFER,0,new Uint8Array(imageData.data.buffer),0,bufferSize);gl.bindBuffer(PIXEL_PACK_BUFFER,
null);gl.deleteBuffer(pixelBuffer)}else{imageData=new ImageData(areaWidth,areaHeight);gl.readPixels(x,y,areaWidth,areaHeight,gl.RGBA,gl.UNSIGNED_BYTE,new Uint8Array(imageData.data.buffer));restorePreviousRenderTarget()}return imageData}StartQuery(query){if(!this.SupportsGPUProfiling())return;const b=this.PushBatch();b.InitStartQuery(query);this._topOfBatch=0}EndQuery(query){if(!this.SupportsGPUProfiling())return;const b=this.PushBatch();b.InitEndQuery(query);this._topOfBatch=0}_WaitForObjectReady(checkFunc){const ret=
new Promise(resolve=>pendingPolls.add({resolve,checkFunc}));if(pollRafId===-1)pollRafId=self.requestAnimationFrame(CheckPendingPolls);return ret}IsDesynchronized(){return!!this._attribs["desynchronized"]}GetEstimatedBackBufferMemoryUsage(){return this._width*this._height*(this._attribs["alpha"]?4:3)}GetEstimatedRenderBufferMemoryUsage(){let ret=0;for(const t of C3.Gfx.WebGLRenderTarget.allRenderTargets()){if(t.GetTexture())continue;ret+=t.GetEstimatedMemoryUsage()}return ret}GetEstimatedTextureMemoryUsage(){let ret=
0;for(const t of C3.Gfx.WebGLRendererTexture.allTextures())ret+=t.GetEstimatedMemoryUsage();return ret}GetEstimatedTotalMemoryUsage(){return this.GetEstimatedBackBufferMemoryUsage()+this.GetEstimatedRenderBufferMemoryUsage()+this.GetEstimatedTextureMemoryUsage()}GetWebGLVersionString(){return this._versionString}GetWebGLVersionNumber(){return this._version}SupportsNPOTTextures(){return this.GetWebGLVersionNumber()>=2}GetMaxTextureSize(){return this._maxTextureSize}GetMinPointSize(){return this._minPointSize}GetMaxPointSize(){return this._maxPointSize}SupportsHighP(){return this._highpPrecision!==
0}GetHighPPrecision(){return this._highpPrecision}GetUnmaskedVendor(){return this._unmaskedVendor}GetUnmaskedRenderer(){return this._unmaskedRenderer}GetExtensions(){return this._extensions}HasMajorPerformanceCaveat(){return this._hasMajorPerformanceCaveat}SupportsGPUProfiling(){return!!this._timerExt}_GetDisjointTimerQueryExtension(){return this._timerExt}_GetParallelShaderCompileExtension(){return this._parallelShaderCompileExt}_AddQueryResultBuffer(qrb){this._allQueryResultBuffers.add(qrb)}_RemoveQueryResultBuffer(qrb){this._allQueryResultBuffers.delete(qrb)}_GetTimeQueryStack(){return this._timeQueryStack}GetContext(){return this._gl}_InitBlendModes(gl){this._InitBlendModeData([["normal",
gl.ONE,gl.ONE_MINUS_SRC_ALPHA],["additive",gl.ONE,gl.ONE],["xor",gl.ONE,gl.ONE_MINUS_SRC_ALPHA],["copy",gl.ONE,gl.ZERO],["destination-over",gl.ONE_MINUS_DST_ALPHA,gl.ONE],["source-in",gl.DST_ALPHA,gl.ZERO],["destination-in",gl.ZERO,gl.SRC_ALPHA],["source-out",gl.ONE_MINUS_DST_ALPHA,gl.ZERO],["destination-out",gl.ZERO,gl.ONE_MINUS_SRC_ALPHA],["source-atop",gl.DST_ALPHA,gl.ONE_MINUS_SRC_ALPHA],["destination-atop",gl.ONE_MINUS_DST_ALPHA,gl.SRC_ALPHA]])}CreateRendererText(){return C3.New(C3.Gfx.RendererText,
this)}CreateWebGLText(){return this.CreateRendererText()}}};


// c3/interfaces/IRuntime.js
'use strict';{const C3=self.C3;let runtime=null;const keysDownByKey=new Set;function SortZOrderList(a,b){const layerA=a[0];const layerB=b[0];const diff=layerA-layerB;if(diff!==0)return diff;const indexA=a[1];const indexB=b[1];return indexA-indexB}const tempZOrderList=[];const tempInstances=[];let didWarnInAlertPolyfill=false;self.IRuntime=class IRuntime{constructor(runtime_,objects){runtime=runtime_;Object.defineProperties(this,{assets:{value:runtime.GetAssetManager().GetIAssetManager(),writable:false},
objects:{value:objects,writable:false},globalVars:{value:{},writable:false},projectName:{value:runtime.GetProjectName(),writable:false},projectVersion:{value:runtime.GetProjectVersion(),writable:false},storage:{value:new self.IStorage(runtime),writable:false},isInWorker:{value:runtime.IsInWorker(),writable:false}});runtime.UserScriptDispatcher().addEventListener("keydown",e=>{if(keysDownByKey.has(e["key"])){e.stopPropagation();return}keysDownByKey.add(e["key"])});runtime.UserScriptDispatcher().addEventListener("keyup",
e=>keysDownByKey.delete(e["key"]));runtime.Dispatcher().addEventListener("window-blur",()=>keysDownByKey.clear());if(runtime.IsInWorker())self["alert"]=message=>{if(!didWarnInAlertPolyfill){didWarnInAlertPolyfill=true;console.warn("[Construct 3] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")}return this.alert(message)}}_InitGlobalVars(globalVarDescriptors){Object.defineProperties(this.globalVars,
globalVarDescriptors)}addEventListener(name,func){runtime.UserScriptDispatcher().addEventListener(name,func)}removeEventListener(name,func){runtime.UserScriptDispatcher().removeEventListener(name,func)}callFunction(name,...params){const eventSheetManager=runtime.GetEventSheetManager();const functionBlock=eventSheetManager.GetFunctionBlockByName(name);if(!functionBlock)throw new Error(`cannot find function name '${name}'`);if(!functionBlock.IsEnabled())return functionBlock.GetDefaultReturnValue();
if(params.length<functionBlock.GetFunctionParameterCount())throw new Error(`not enough function parameters passed for '${name}' (${params.length} passed, ${functionBlock.GetFunctionParameterCount()} expected)`);const callEventBlock=functionBlock.GetEventBlock();let solModifiers=null;const currentEvent=eventSheetManager.GetCurrentEvent();if(currentEvent){const sm=currentEvent.GetSolModifiersIncludingParents();if(sm.length>0){solModifiers=sm;eventSheetManager.PushCleanSol(sm)}}const ret=callEventBlock.RunAsExpressionFunctionCall(callEventBlock.GetSolModifiersIncludingParents(),
functionBlock.GetReturnType(),functionBlock.GetDefaultReturnValue(),...params);if(solModifiers)eventSheetManager.PopSol(solModifiers);return ret}setReturnValue(v){const frame=runtime.GetEventStack().GetCurrentExpFuncStackFrame();if(!frame)throw new Error("not in a function which returns a value");switch(frame.GetFunctionReturnType()){case 1:if(typeof v==="number")frame.SetFunctionReturnValue(v);break;case 2:if(typeof v==="string")frame.SetFunctionReturnValue(v);break;case 3:if(typeof v==="number"||
typeof v==="string")frame.SetFunctionReturnValue(v);break}}get dt(){return runtime.GetDt()}get gameTime(){return runtime.GetGameTime()}get wallTime(){return runtime.GetWallTime()}random(){return runtime.Random()}get layout(){return runtime.GetMainRunningLayout().GetILayout()}getLayout(nameOrIndex){const layoutManager=runtime.GetLayoutManager();let layout=null;if(typeof nameOrIndex==="number"||typeof nameOrIndex==="string")layout=layoutManager.GetLayout(nameOrIndex);else throw new TypeError("expected string or number");
if(!layout)throw new Error("invalid layout");return layout.GetILayout()}getAllLayouts(){return runtime.GetLayoutManager().GetAllLayouts().map(layout=>layout.GetILayout())}goToLayout(nameOrIndex){const layoutManager=runtime.GetLayoutManager();let layout=null;if(typeof nameOrIndex==="number"||typeof nameOrIndex==="string")layout=layoutManager.GetLayout(nameOrIndex);else throw new TypeError("expected string or number");if(!layout)throw new Error("invalid layout");if(layoutManager.IsPendingChangeMainLayout())return;
layoutManager.ChangeMainLayout(layout)}get keyboard(){const ret=runtime._GetCommonScriptInterfaces().keyboard;if(!ret)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return ret}get mouse(){const ret=runtime._GetCommonScriptInterfaces().mouse;if(!ret)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return ret}get touch(){const ret=runtime._GetCommonScriptInterfaces().touch;if(!ret)throw new Error("runtime.touch used but Touch object missing - add it to your project first");
return ret}invokeDownload(url,filename){runtime.InvokeDownload(url,filename)}getInstanceByUid(uid){const ret=runtime.GetInstanceByUID(uid);return ret?ret.GetInterfaceClass():null}sortZOrder(iterable,callback){const layout=runtime.GetCurrentLayout();for(const iinst of iterable){const inst=runtime._UnwrapScriptInterface(iinst);if(!inst||!inst.GetWorldInfo())throw new Error("invalid instance");const wi=inst.GetWorldInfo();tempZOrderList.push([wi.GetLayer().GetIndex(),wi.GetZIndex()]);tempInstances.push(inst)}if(tempZOrderList.length===
0)return;tempZOrderList.sort(SortZOrderList);tempInstances.sort((a,b)=>callback(a.GetInterfaceClass(),b.GetInterfaceClass()));let anyChanged=false;for(let i=0,len=tempZOrderList.length;i<len;++i){const inst=tempInstances[i];const layer=layout.GetLayerByIndex(tempZOrderList[i][0]);const toZ=tempZOrderList[i][1];const layerInstances=layer._GetInstances();if(layerInstances[toZ]!==inst){layerInstances[toZ]=inst;inst.GetWorldInfo()._SetLayer(layer);layer.SetZIndicesChanged();anyChanged=true}}if(anyChanged)runtime.UpdateRender();
C3.clearArray(tempZOrderList);C3.clearArray(tempInstances)}alert(message){return runtime.PostComponentMessageToDOMAsync("runtime","alert",{"message":message+(runtime.IsInWorker()?" [via Web Worker]":"")})}}};


// c3/interfaces/IAssetManager.js
'use strict';{const C3=self.C3;let assetManager=null;self.IAssetManager=class IAssetManager{constructor(assetManager_){assetManager=assetManager_;Object.defineProperties(this,{isWebMOpusSupported:{value:assetManager.IsAudioFormatSupported("audio/webm; codecs=opus"),writable:false}})}fetchText(url){return assetManager.FetchText(url)}fetchJson(url){return assetManager.FetchJson(url)}fetchBlob(url){return assetManager.FetchBlob(url)}fetchArrayBuffer(url){return assetManager.FetchArrayBuffer(url)}getProjectFileUrl(url){return assetManager.GetProjectFileUrl(url)}getMediaFileUrl(url){if(C3.IsRelativeURL(url))url=
url.toLowerCase();return assetManager.GetMediaFileUrl(url,assetManager.GetMediaSubfolder())}get mediaFolder(){return assetManager.GetMediaSubfolder()}async decodeWebMOpus(audioContext,arrayBuffer){if(this.isWebMOpusSupported)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const decodedArrayBuffer=await assetManager.GetRuntime()._WasmDecodeWebMOpus(arrayBuffer);const decodedFloats=new Float32Array(decodedArrayBuffer);const audioBuffer=audioContext["createBuffer"](1,
decodedFloats.length,48E3);const channelBuffer=audioBuffer["getChannelData"](0);channelBuffer.set(decodedFloats);return audioBuffer}loadScripts(...urls){return assetManager.LoadScripts(...urls)}compileWebAssembly(url){return assetManager.CompileWebAssembly(url)}loadStyleSheet(url){return assetManager.LoadStyleSheet(url)}}};


// c3/interfaces/IStorage.js
'use strict';{self.IStorage=class IStorage{constructor(runtime){this._storage=runtime._GetProjectStorage()}getItem(key){return this._storage.getItem(key)}setItem(key,value){return this._storage.setItem(key,value)}removeItem(key){return this._storage.removeItem(key)}clear(){return this._storage.clear()}keys(){return this._storage.keys()}}};


// c3/interfaces/IObjectClass.js
'use strict';{const C3=self.C3;const map=new WeakMap;self.IObjectClass=class IObjectClass{constructor(objectClass){map.set(this,objectClass);Object.defineProperties(this,{name:{value:objectClass.GetName(),writable:false}});objectClass.GetRuntime()._MapScriptInterface(this,objectClass)}addEventListener(name,func){map.get(this).UserScriptDispatcher().addEventListener(name,func)}removeEventListener(name,func){map.get(this).UserScriptDispatcher().removeEventListener(name,func)}getAllInstances(){return map.get(this).GetInstances().map(inst=>
inst.GetInterfaceClass())}getFirstInstance(){const instances=map.get(this).GetInstances();if(instances.length>0)return instances[0].GetInterfaceClass();else return null}getPickedInstances(){return map.get(this).GetCurrentSol().GetInstances().map(inst=>inst.GetInterfaceClass())}getFirstPickedInstance(){const pickedInstances=map.get(this).GetCurrentSol().GetInstances();if(pickedInstances.length>0)return pickedInstances[0].GetInterfaceClass();else return null}*instances(){for(const inst of map.get(this).GetInstances())yield inst.GetInterfaceClass()}*pickedInstances(){for(const inst of map.get(this).GetCurrentSol().GetInstances())yield inst.GetInterfaceClass()}setInstanceClass(Class){const objectClass=
map.get(this);if(objectClass.GetInstanceCount()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");map.get(this)._SetUserScriptInstanceClass(Class)}createInstance(layerNameOrIndex,x,y){if(typeof layerNameOrIndex!=="number"&&typeof layerNameOrIndex!=="string")throw new TypeError("invalid layer parameter");const objectClass=map.get(this);const runtime=objectClass.GetRuntime();const layer=runtime.GetMainRunningLayout().GetLayer(layerNameOrIndex);
if(!layer)throw new Error("invalid layer");const inst=runtime.CreateInstance(objectClass,layer,x,y);const eventSheetManager=runtime.GetEventSheetManager();eventSheetManager.BlockFlushingInstances(true);inst._TriggerOnCreated();if(inst.IsInContainer())for(const s of inst.siblings())s._TriggerOnCreated();eventSheetManager.BlockFlushingInstances(false);return inst.GetInterfaceClass()}}};


// c3/interfaces/ILayout.js
'use strict';{const map=new WeakMap;self.ILayout=class ILayout{constructor(layout){map.set(this,layout);const effectInstanceArr=[];const effectList=layout.GetEffectList();const effectCount=effectList.GetAllEffectTypes().length;for(let i=0;i<effectCount;++i)effectInstanceArr.push(new self.IEffectInstance(effectList,i));Object.defineProperties(this,{name:{value:layout.GetName(),writable:false},index:{value:layout.GetIndex(),writable:false},effects:{value:effectInstanceArr,writable:false}})}addEventListener(name,
func){map.get(this).UserScriptDispatcher().addEventListener(name,func)}removeEventListener(name,func){map.get(this).UserScriptDispatcher().removeEventListener(name,func)}get width(){return map.get(this).GetWidth()}set width(w){map.get(this).SetWidth(w)}get height(){return map.get(this).GetHeight()}set height(h){map.get(this).SetHeight(h)}scrollTo(x,y){const layout=map.get(this);layout.SetScrollX(x);layout.SetScrollY(y)}getLayer(nameOrIndex){const layout=map.get(this);let layer=null;if(typeof nameOrIndex===
"number"||typeof nameOrIndex==="string")layer=layout.GetLayer(nameOrIndex);else throw new TypeError("expected string or number");if(!layer)throw new Error("invalid layer");return layer.GetILayer()}getAllLayers(){return map.get(this).GetLayers().map(layer=>layer.GetILayer())}}};


// c3/interfaces/ILayer.js
'use strict';{const C3=self.C3;const map=new WeakMap;self.ILayer=class ILayer{constructor(layer){map.set(this,layer);const effectInstanceArr=[];const effectList=layer.GetEffectList();const effectCount=effectList.GetAllEffectTypes().length;for(let i=0;i<effectCount;++i)effectInstanceArr.push(new self.IEffectInstance(effectList,i));Object.defineProperties(this,{name:{value:layer.GetName(),writable:false},index:{value:layer.GetIndex(),writable:false},layout:{value:layer.GetLayout().GetILayout(),writable:false},
effects:{value:effectInstanceArr,writable:false}})}static _Unwrap(ilayer){return map.get(ilayer)}get isVisible(){return map.get(this).IsVisible()}set isVisible(v){map.get(this).SetVisible(v)}get opacity(){return map.get(this).GetOpacity()}set opacity(o){o=C3.clamp(+o,0,1);if(isNaN(o))return;map.get(this).SetOpacity(o)}getViewport(){return map.get(this).GetViewport().toDOMRect()}cssPxToLayer(clientX,clientY,z=0){const layer=map.get(this);const runtime=layer.GetRuntime();return layer.CanvasCssToLayer(clientX-
runtime.GetCanvasClientX(),clientY-runtime.GetCanvasClientY(),z)}layerToCssPx(layerX,layerY,z=0){const layer=map.get(this);const runtime=layer.GetRuntime();const [clientX,clientY]=layer.LayerToCanvasCss(layerX,layerY,z);return[clientX+runtime.GetCanvasClientX(),clientY+runtime.GetCanvasClientY()]}}};


// c3/interfaces/IInstance.js
'use strict';{const C3=self.C3;const map=new WeakMap;const dispatchers=new WeakMap;function GetDispatcher(iinst){let dispatcher=dispatchers.get(iinst);if(dispatcher)return dispatcher;dispatcher=C3.New(C3.Event.Dispatcher);dispatchers.set(iinst,dispatcher);return dispatcher}let initInst=null;self.IInstance=class IInstance{constructor(){map.set(this,initInst);const descriptors={runtime:{value:initInst.GetRuntime().GetIRuntime(),writable:false},objectType:{value:initInst.GetObjectClass().GetIObjectClass(),
writable:false},uid:{value:initInst.GetUID(),writable:false}};initInst._GetInstVarsScriptDescriptor(descriptors);initInst._GetBehaviorsScriptDescriptor(descriptors);Object.defineProperties(this,descriptors);initInst.GetRuntime()._MapScriptInterface(this,initInst)}static _Init(inst){initInst=inst}static _GetInitInst(){return initInst}_Release(){const dispatcher=dispatchers.get(this);if(dispatcher){dispatcher.Release();dispatchers.delete(this)}map.delete(this)}addEventListener(type,func,capture){GetDispatcher(this).addEventListener(type,
func,capture)}removeEventListener(type,func,capture){GetDispatcher(this).removeEventListener(type,func,capture)}dispatchEvent(e){GetDispatcher(this).dispatchEvent(e)}destroy(){const inst=map.get(this);inst.GetRuntime().DestroyInstance(inst)}}};


// c3/interfaces/IWorldInstance.js
'use strict';{const C3=self.C3;const IInstance=self.IInstance;const ILayer=self.ILayer;const map=new WeakMap;const BLEND_MODE_TO_INDEX=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]);const INDEX_TO_BLEND_MODE=new Map([...BLEND_MODE_TO_INDEX.entries()].map(a=>[a[1],a[0]]));const tempColor=C3.New(C3.Color);self.IWorldInstance=class IWorldInstance extends IInstance{constructor(){super();
const inst=IInstance._GetInitInst();map.set(this,inst);const effectInstanceArr=[];const wi=inst.GetWorldInfo();const instanceEffectList=wi.GetInstanceEffectList();if(instanceEffectList){const effectCount=wi.GetObjectClass().GetEffectList().GetAllEffectTypes().length;for(let i=0;i<effectCount;++i)effectInstanceArr.push(new self.IEffectInstance(instanceEffectList,i))}const descriptors={effects:{value:effectInstanceArr,writable:false}};Object.defineProperties(this,descriptors)}get layout(){return map.get(this).GetWorldInfo().GetLayout().GetILayout()}get layer(){return map.get(this).GetWorldInfo().GetLayer().GetILayer()}get x(){return map.get(this).GetWorldInfo().GetX()}set x(v){v=
+v;const wi=map.get(this).GetWorldInfo();if(isNaN(v)||wi.GetX()===v)return;wi.SetX(v);wi.SetBboxChanged()}get y(){return map.get(this).GetWorldInfo().GetY()}set y(v){v=+v;const wi=map.get(this).GetWorldInfo();if(isNaN(v)||wi.GetY()===v)return;wi.SetY(v);wi.SetBboxChanged()}get zElevation(){return map.get(this).GetWorldInfo().GetZElevation()}set zElevation(z){z=+z;const inst=map.get(this);const wi=inst.GetWorldInfo();if(wi.GetZElevation()===z)return;wi.SetZElevation(z);inst.GetRuntime().UpdateRender()}get totalZElevation(){return map.get(this).GetWorldInfo().GetTotalZElevation()}get width(){return map.get(this).GetWorldInfo().GetWidth()}set width(w){w=
+w;const wi=map.get(this).GetWorldInfo();if(isNaN(w)||wi.GetWidth()===w)return;wi.SetWidth(w);wi.SetBboxChanged()}get height(){return map.get(this).GetWorldInfo().GetHeight()}set height(h){h=+h;const wi=map.get(this).GetWorldInfo();if(isNaN(h)||wi.GetHeight()===h)return;wi.SetHeight(h);wi.SetBboxChanged()}get angle(){return map.get(this).GetWorldInfo().GetAngle()}set angle(a){a=C3.clampAngle(+a);const wi=map.get(this).GetWorldInfo();if(isNaN(a)||wi.GetAngle()===a)return;wi.SetAngle(a);wi.SetBboxChanged()}get angleDegrees(){return C3.toDegrees(this.angle)}set angleDegrees(a){this.angle=
C3.toRadians(a)}getBoundingBox(){return map.get(this).GetWorldInfo().GetBoundingBox().toDOMRect()}getBoundingQuad(){return map.get(this).GetWorldInfo().GetBoundingQuad().toDOMQuad()}get isVisible(){return map.get(this).GetWorldInfo().IsVisible()}set isVisible(v){v=!!v;const inst=map.get(this);const wi=inst.GetWorldInfo();if(wi.IsVisible()===v)return;wi.SetVisible(v);inst.GetRuntime().UpdateRender()}get opacity(){return map.get(this).GetWorldInfo().GetOpacity()}set opacity(o){o=C3.clamp(+o,0,1);const inst=
map.get(this);const wi=inst.GetWorldInfo();if(isNaN(o)||wi.GetOpacity()===o)return;wi.SetOpacity(o);inst.GetRuntime().UpdateRender()}set colorRgb(arr){if(arr.length<3)throw new Error("expected 3 elements");tempColor.setRgb(arr[0],arr[1],arr[2]);const inst=map.get(this);const wi=inst.GetWorldInfo();if(wi.GetUnpremultipliedColor().equalsIgnoringAlpha(tempColor))return;wi.SetUnpremultipliedColor(tempColor);inst.GetRuntime().UpdateRender()}get colorRgb(){const c=map.get(this).GetWorldInfo().GetUnpremultipliedColor();
return[c.getR(),c.getG(),c.getB()]}set blendMode(bm){const index=BLEND_MODE_TO_INDEX.get(bm);if(typeof index!=="number")throw new Error("invalid blend mode");const inst=map.get(this);const wi=inst.GetWorldInfo();wi.SetBlendMode(index);inst.GetRuntime().UpdateRender()}get blendMode(){return INDEX_TO_BLEND_MODE.get(map.get(this).GetWorldInfo().GetBlendMode())}moveToTop(){map.get(this).GetWorldInfo().ZOrderMoveToTop()}moveToBottom(){map.get(this).GetWorldInfo().ZOrderMoveToBottom()}moveToLayer(ilayer){const layer=
ILayer._Unwrap(ilayer);if(!layer)throw new Error("invalid layer");map.get(this).GetWorldInfo().ZOrderMoveToLayer(layer)}moveAdjacentToInstance(other,isAfter){map.get(this).GetWorldInfo().ZOrderMoveAdjacentToInstance(map.get(other),isAfter)}containsPoint(x,y){return map.get(this).GetWorldInfo().ContainsPoint(+x,+y)}testOverlap(worldInstance){const a=map.get(this);const b=map.get(worldInstance);return a.GetRuntime().GetCollisionEngine().TestOverlap(a,b)}testOverlapSolid(){const inst=map.get(this);const overlapInst=
inst.GetRuntime().GetCollisionEngine().TestOverlapSolid(inst);return overlapInst?overlapInst.GetInterfaceClass():null}getParent(){const parent=map.get(this).GetParent();return parent?parent.GetInterfaceClass():null}getTopParent(){const parent=map.get(this).GetTopParent();return parent?parent.GetInterfaceClass():null}*parents(){for(const parent of map.get(this).parents())yield parent.GetInterfaceClass()}getChildCount(){return map.get(this).GetChildCount()}getChildAt(index){const child=map.get(this).GetChildAt(index);
return child?child.GetInterfaceClass():null}*children(){for(const child of map.get(this).children())yield child.GetInterfaceClass()}*allChildren(){for(const child of map.get(this).allChildren())yield child.GetInterfaceClass()}addChild(ichild,opts){if(!opts)opts={};const inst=map.get(this);const child=map.get(ichild);inst.AddChild(child,opts)}removeChild(ichild){const inst=map.get(this);const child=map.get(ichild);inst.RemoveChild(child)}removeFromParent(){const inst=map.get(this);if(!inst.HasParent())return;
const parent=inst.GetParent();parent.RemoveChild(inst)}createMesh(hsize,vsize){map.get(this).GetWorldInfo().CreateMesh(hsize,vsize)}releaseMesh(){const wi=map.get(this).GetWorldInfo();wi.ReleaseMesh();wi.SetBboxChanged()}setMeshPoint(col,row,opts){const wi=map.get(this).GetWorldInfo();if(wi.SetMeshPoint(col,row,opts))wi.SetBboxChanged()}}};


// c3/interfaces/IDOMInstance.js
'use strict';{const C3=self.C3;const map=new WeakMap;self.IDOMInstance=class IDOMInstance extends self.IWorldInstance{constructor(){super();map.set(this,self.IInstance._GetInitInst())}getElement(){return map.get(this).GetSdkInstance()._GetElementInDOMMode()}focus(){map.get(this).GetSdkInstance().FocusElement()}blur(){map.get(this).GetSdkInstance().BlurElement()}setCssStyle(prop,val){map.get(this).GetSdkInstance().SetElementCSSStyle(prop,val)}}};


// c3/interfaces/IBehaviorInstance.js
'use strict';{const C3=self.C3;const map=new WeakMap;const dispatchers=new WeakMap;function GetDispatcher(ibehinst){let dispatcher=dispatchers.get(ibehinst);if(dispatcher)return dispatcher;dispatcher=C3.New(C3.Event.Dispatcher);dispatchers.set(ibehinst,dispatcher);return dispatcher}let initBehInst=null;self.IBehaviorInstance=class IBehaviorInstance{constructor(){map.set(this,initBehInst);const descriptors={runtime:{value:initBehInst.GetRuntime().GetIRuntime(),writable:false},behavior:{value:initBehInst.GetBehavior().GetIBehavior(),
writable:false}};Object.defineProperties(this,descriptors)}static _Init(behInst){initBehInst=behInst}static _GetInitInst(){return initBehInst}get instance(){return map.get(this).GetObjectInstance().GetInterfaceClass()}_Release(){const dispatcher=dispatchers.get(this);if(dispatcher){dispatcher.Release();dispatchers.delete(this)}map.delete(this)}addEventListener(type,func,capture){GetDispatcher(this).addEventListener(type,func,capture)}removeEventListener(type,func,capture){GetDispatcher(this).removeEventListener(type,
func,capture)}dispatchEvent(e){GetDispatcher(this).dispatchEvent(e)}}};


// c3/interfaces/IBehavior.js
'use strict';{const map=new WeakMap;self.IBehavior=class IBehavior{constructor(behavior){map.set(this,behavior);const descriptors={runtime:{value:behavior.GetRuntime().GetIRuntime(),writable:false}};Object.defineProperties(this,descriptors)}getAllInstances(){return map.get(this).GetInstances().map(inst=>inst.GetInterfaceClass())}}};


// c3/interfaces/IEffectInstance.js
'use strict';{const C3=self.C3;const map=new WeakMap;self.IEffectInstance=class IEffectInstance{constructor(effectList,index){map.set(this,effectList);const descriptors={index:{value:index,writable:false}};Object.defineProperties(this,descriptors)}get name(){const effectTypes=map.get(this).GetAllEffectTypes();return effectTypes[this.index].GetName()}get isActive(){return map.get(this).IsEffectIndexActive(this.index)}set isActive(a){a=!!a;const fxList=map.get(this);if(fxList.IsEffectIndexActive(this.index)===
a)return;fxList.SetEffectIndexActive(this.index,a);fxList.UpdateActiveEffects();fxList.GetRuntime().UpdateRender()}setParameter(i,v){i=Math.floor(+i);const fxList=map.get(this);const paramsArr=fxList.GetEffectParametersForIndex(this.index);if(i<0||i>=paramsArr.length)throw new RangeError("invalid effect parameter index");const oldValue=paramsArr[i];if(oldValue instanceof C3.Color){if(!Array.isArray(v)||v.length<3)throw new TypeError("expected array with 3 elements");const r=v[0];const g=v[1];const b=
v[2];if(oldValue.equalsRgb(r,g,b))return;oldValue.setRgb(r,g,b)}else{if(typeof v!=="number")throw new TypeError("expected number");if(oldValue===v)return;paramsArr[i]=v}if(fxList.IsEffectIndexActive(this.index))fxList.GetRuntime().UpdateRender()}getParameter(i){i=Math.floor(+i);const fxList=map.get(this);const paramsArr=fxList.GetEffectParametersForIndex(this.index);if(i<0||i>=paramsArr.length)throw new RangeError("invalid effect parameter index");const ret=paramsArr[i];if(ret instanceof C3.Color)return[ret.getR(),
ret.getG(),ret.getB()];else return ret}}};


// c3/assets/assetManager.js
'use strict';{const C3=self.C3;const VALID_LOAD_POLICIES=new Set(["local","remote"]);const EXT_TO_TYPE=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);function GetTypeFromFileExtension(filename){if(!filename)return"";const parts=filename.split(".");if(parts.length<2)return"";const ext=parts[parts.length-1].toLowerCase();return EXT_TO_TYPE.get(ext)||
""}function AddScript(url,type){return new Promise((resolve,reject)=>{const elem=document.createElement("script");elem.onload=resolve;elem.onerror=reject;elem.async=false;if(type==="module")elem.type="module";elem.src=url;document.head.appendChild(elem)})}C3.AssetManager=class AssetManager extends C3.DefendedBase{constructor(runtime,opts){super();const exportType=opts["exportType"];this._runtime=runtime;this._scriptsType=opts["scriptsType"];this._localUrlBlobs=new Map;this._localBlobUrlCache=new Map;
this._isCordova=exportType==="cordova";this._isiOSCordova=!!opts["isiOSCordova"];this._isFileProtocol=location.protocol==="file:";this._swClientId=opts["swClientId"];this._supportedAudioFormats=opts["supportedAudioFormats"]||{};this._audioFiles=new Map;this._preloadSounds=false;this._mediaSubfolder="";this._fontsSubfolder="";this._iconsSubfolder="";const isRemoteLoadPolicy=exportType==="html5"||exportType==="scirra-arcade"||exportType==="instant-games";this._defaultLoadPolicy=isRemoteLoadPolicy?"remote":
"local";this._allAssets=[];this._assetsByUrl=new Map;this._webFonts=[];this._loadPromises=[];this._hasFinishedInitialLoad=false;this._totalAssetSizeToLoad=0;this._assetSizeLoaded=0;this._lastLoadProgress=0;this._hasHadErrorLoading=false;this._loadingRateLimiter=C3.New(C3.RateLimiter,()=>this._FireLoadingProgressEvent(),50);this._promiseThrottle=new C3.PromiseThrottle(Math.max(C3.hardwareConcurrency,8));const localUrlBlobs=opts["previewImageBlobs"];if(localUrlBlobs){const projectFileBlobs=opts["previewProjectFileBlobs"];
if(projectFileBlobs)Object.assign(localUrlBlobs,projectFileBlobs);const projectData=opts["projectData"];if(projectData)localUrlBlobs["data.json"]=projectData;for(const [url,blob]of Object.entries(localUrlBlobs))this._localUrlBlobs.set(url.toLowerCase(),blob)}const localUrlMap=opts["previewProjectFileUrls"];if(localUrlMap)for(const [srcUrl,destUrl]of Object.entries(localUrlMap))this._localBlobUrlCache.set(srcUrl,destUrl);this._iAssetManager=new self.IAssetManager(this)}Release(){this._localUrlBlobs.clear();
for(const url of this._localBlobUrlCache.values())if(url.startsWith("blob:"))URL.revokeObjectURL(url);this._localBlobUrlCache.clear();for(const asset of this._allAssets)asset.Release();C3.clearArray(this._allAssets);this._assetsByUrl.clear();C3.clearArray(this._loadPromises);this._runtime=null}GetRuntime(){return this._runtime}_SetMediaSubfolder(folder){this._mediaSubfolder=folder}GetMediaSubfolder(){return this._mediaSubfolder}_SetFontsSubfolder(folder){this._fontsSubfolder=folder}GetFontsSubfolder(){return this._fontsSubfolder}_SetIconsSubfolder(folder){this._iconsSubfolder=
folder}GetIconsSubfolder(){return this._iconsSubfolder}_HasLocalUrlBlob(url){return this._localUrlBlobs.has(url.toLowerCase())}_GetLocalUrlBlob(url){return this._localUrlBlobs.get(url.toLowerCase())||null}GetLocalUrlAsBlobUrl(url){if(!this._HasLocalUrlBlob(url))return url;const lowerUrl=url.toLowerCase();let ret=this._localBlobUrlCache.get(lowerUrl);if(!ret){const blob=this._GetLocalUrlBlob(lowerUrl);ret=URL.createObjectURL(blob);this._localBlobUrlCache.set(lowerUrl,ret)}return ret}FetchBlob(url,
loadPolicy){loadPolicy=loadPolicy||this._defaultLoadPolicy;const localBlob=this._GetLocalUrlBlob(url);if(localBlob)return Promise.resolve(localBlob);else if(C3.IsRelativeURL(url)){const lowerUrl=url.toLowerCase();if(this._isCordova&&this._isFileProtocol)return this.CordovaFetchLocalFileAsBlob(lowerUrl);else if(loadPolicy==="local")return this._promiseThrottle.Add(()=>C3.FetchBlob(lowerUrl));else return C3.FetchBlob(lowerUrl)}else return C3.FetchBlob(url)}FetchArrayBuffer(url){const localBlob=this._GetLocalUrlBlob(url);
if(localBlob)return C3.BlobToArrayBuffer(localBlob);else if(C3.IsRelativeURL(url)){const lowerUrl=url.toLowerCase();if(this._isCordova&&this._isFileProtocol)return this.CordovaFetchLocalFileAsArrayBuffer(lowerUrl);else if(this._defaultLoadPolicy==="local")return this._promiseThrottle.Add(()=>C3.FetchArrayBuffer(lowerUrl));else return C3.FetchArrayBuffer(lowerUrl)}else return C3.FetchArrayBuffer(url)}FetchText(url){const localBlob=this._GetLocalUrlBlob(url);if(localBlob)return C3.BlobToString(localBlob);
else if(C3.IsRelativeURL(url)){const lowerUrl=url.toLowerCase();if(this._isCordova&&this._isFileProtocol)return this.CordovaFetchLocalFileAsText(lowerUrl);else if(this._defaultLoadPolicy==="local")return this._promiseThrottle.Add(()=>C3.FetchText(lowerUrl));else return C3.FetchText(lowerUrl)}else return C3.FetchText(url)}async FetchJson(url){const text=await this.FetchText(url);return JSON.parse(text)}_CordovaFetchLocalFileAs(filename,as_){return this._runtime.PostComponentMessageToDOMAsync("runtime",
"cordova-fetch-local-file",{"filename":filename,"as":as_})}CordovaFetchLocalFileAsText(filename){return this._CordovaFetchLocalFileAs(filename,"text")}async CordovaFetchLocalFileAsBlob(filename){const buffer=await this._CordovaFetchLocalFileAs(filename,"buffer");const type=GetTypeFromFileExtension(filename);return new Blob([buffer],{"type":type})}async CordovaFetchLocalFileAsBlobURL(filename){filename=filename.toLowerCase();let blobUrl=this._localBlobUrlCache.get(filename);if(blobUrl)return blobUrl;
const blob=await this.CordovaFetchLocalFileAsBlob(filename);blobUrl=URL.createObjectURL(blob);this._localBlobUrlCache.set(filename,blobUrl);return blobUrl}CordovaFetchLocalFileAsArrayBuffer(filename){return this._CordovaFetchLocalFileAs(filename,"buffer")}GetMediaFileUrl(filename){if(this._HasLocalUrlBlob(filename))return this.GetLocalUrlAsBlobUrl(filename);else return this._mediaSubfolder+filename.toLowerCase()}GetProjectFileUrl(url,subfolder=""){if(C3.IsAbsoluteURL(url)){if(subfolder)throw new Error("cannot specify subfolder with remote URL");
return Promise.resolve(url)}else if(this._HasLocalUrlBlob(url))return Promise.resolve(this.GetLocalUrlAsBlobUrl(url));else if(this._isCordova&&this._isFileProtocol)return this.CordovaFetchLocalFileAsBlobURL(subfolder+url);else return Promise.resolve(subfolder+url.toLowerCase())}GetProjectFileIframeUrl(url){if(C3.IsAbsoluteURL(url))return Promise.resolve(url);else{const queryIndex=url.indexOf("?");const queryStr=queryIndex===-1?"":url.substr(queryIndex);const urlNoSearch=queryIndex===-1?url:url.substr(0,
queryIndex);if(this._HasLocalUrlBlob(urlNoSearch)){let localUrl=this.GetLocalUrlAsBlobUrl(urlNoSearch);if(!localUrl.startsWith("blob:")&&this._swClientId){const asUrl=new URL(localUrl);const params=new URLSearchParams(queryStr);params.set("__c3_client_id",this._swClientId);asUrl.search=params.toString();localUrl=asUrl.toString()}return Promise.resolve(localUrl)}else if(this._isCordova&&this._isFileProtocol)return this.CordovaFetchLocalFileAsBlobURL(urlNoSearch);else return Promise.resolve(url.toLowerCase())}}LoadProjectFileUrl(url){return this.GetProjectFileUrl(url)}LoadImage(opts){if(opts.loadPolicy&&
!VALID_LOAD_POLICIES.has(opts.loadPolicy))throw new Error("invalid load policy");let asset=this._assetsByUrl.get(opts.url);if(asset)return asset;asset=C3.New(C3.ImageAsset,this,{url:opts.url,size:opts.size||0,loadPolicy:opts.loadPolicy||this._defaultLoadPolicy});this._allAssets.push(asset);this._assetsByUrl.set(asset.GetURL(),asset);if(!this._hasFinishedInitialLoad){this._totalAssetSizeToLoad+=asset.GetSize();this._loadPromises.push(asset.Load().then(()=>this._AddLoadedSize(asset.GetSize())))}return asset}async WaitForAllToLoad(){try{await Promise.all(this._loadPromises);
this._lastLoadProgress=1}catch(err){console.error("Error loading: ",err);this._hasHadErrorLoading=true;this._FireLoadingProgressEvent()}}SetInitialLoadFinished(){this._hasFinishedInitialLoad=true}HasHadErrorLoading(){return this._hasHadErrorLoading}_AddLoadedSize(s){this._assetSizeLoaded+=s;this._loadingRateLimiter.Call()}_FireLoadingProgressEvent(){const event=C3.New(C3.Event,"loadingprogress");this._lastLoadProgress=C3.clamp(this._assetSizeLoaded/this._totalAssetSizeToLoad,0,1);event.progress=this._lastLoadProgress;
this._runtime.Dispatcher().dispatchEvent(event)}GetLoadProgress(){return this._lastLoadProgress}_SetWebFonts(arr){C3.shallowAssignArray(this._webFonts,arr);if(this._webFonts.length)this._loadPromises.push(this._LoadWebFonts())}_LoadWebFonts(){if(typeof FontFace==="undefined")return Promise.resolve();const promises=[];for(const [name,filename,size]of this._webFonts){this._totalAssetSizeToLoad+=size;promises.push(this._LoadWebFont(name,filename).then(()=>this._AddLoadedSize(size)))}return Promise.all(promises)}async _LoadWebFont(name,
filename){try{const url=await this.GetProjectFileUrl(filename,this._fontsSubfolder);const fontFace=new FontFace(name,`url('${url}')`);if(this._runtime.IsInWorker())self.fonts.add(fontFace);else document.fonts.add(fontFace);await fontFace.load()}catch(err){console.warn(`[C3 runtime] Failed to load web font '${name}': `,err)}}IsAudioFormatSupported(type){return!!this._supportedAudioFormats[type]}_SetAudioFiles(arr,preloadSounds){this._preloadSounds=!!preloadSounds;for(const [fileName,projectFilesInfo,
isMusic]of arr)this._audioFiles.set(fileName,{fileName,formats:projectFilesInfo.map(si=>({type:si[0],fileExtension:si[1],fullName:fileName+si[1],fileSize:si[2]})),isMusic})}GetPreferredAudioFile(namePart){const info=this._audioFiles.get(namePart.toLowerCase());if(!info)return null;let webMOpusFile=null;for(const formatInfo of info.formats){if(!webMOpusFile&&formatInfo.type==="audio/webm; codecs=opus")webMOpusFile=formatInfo;if(this.IsAudioFormatSupported(formatInfo.type))return formatInfo}return webMOpusFile}GetProjectAudioFileUrl(namePart){const formatInfo=
this.GetPreferredAudioFile(namePart);if(!formatInfo)return null;return{url:this.GetMediaFileUrl(formatInfo.fullName),type:formatInfo.type}}GetAudioToPreload(){if(this._preloadSounds){const ret=[];for(const info of this._audioFiles.values()){if(info.isMusic)continue;const formatInfo=this.GetPreferredAudioFile(info.fileName);if(!formatInfo)continue;ret.push({originalUrl:info.fileName,url:this.GetMediaFileUrl(formatInfo.fullName),type:formatInfo.type,fileSize:formatInfo.fileSize})}return ret}else return[]}GetIAssetManager(){return this._iAssetManager}GetScriptsType(){return this._scriptsType}async LoadScripts(...urls){const scriptUrls=
await Promise.all(urls.map(url=>this.GetProjectFileUrl(url)));if(this._runtime.IsInWorker())if(this._scriptsType==="classic")importScripts(...scriptUrls);else if(urls.length===1){const url=urls[0];await self.c3_import((C3.IsRelativeURL(url)?"./":"")+url)}else{const scriptStr=urls.map(url=>`import "${C3.IsRelativeURL(url)?"./":""}${url}";`).join("\n");const blobUrl=URL.createObjectURL(new Blob([scriptStr],{type:"application/javascript"}));await self.c3_import(blobUrl)}else await Promise.all(scriptUrls.map(url=>
AddScript(url,this._scriptsType)))}async CompileWebAssembly(url){if(WebAssembly.compileStreaming){const fetchUrl=await this.GetProjectFileUrl(url);return await WebAssembly.compileStreaming(fetch(fetchUrl))}else{const arrayBuffer=await C3.FetchArrayBuffer(url);return await WebAssembly.compile(arrayBuffer)}}async LoadStyleSheet(url){const fetchUrl=await this.GetProjectFileUrl(url);return await this._runtime.PostComponentMessageToDOMAsync("runtime","add-stylesheet",{"url":fetchUrl})}}};


// c3/assets/asset.js
'use strict';{const C3=self.C3;C3.Asset=class Asset extends C3.DefendedBase{constructor(assetManager,opts){super();this._assetManager=assetManager;this._runtime=assetManager.GetRuntime();this._url=opts.url;this._size=opts.size;this._loadPolicy=opts.loadPolicy;this._blob=null;this._isLoaded=false;this._loadPromise=null}Release(){this._loadPromise=null;this._assetManager=null;this._runtime=null;this._blob=null}GetURL(){return this._url}GetSize(){return this._size}Load(){if(this._loadPolicy==="local"||
this._blob){this._isLoaded=true;return Promise.resolve()}if(this._loadPromise)return this._loadPromise;this._loadPromise=this._assetManager.FetchBlob(this._url,this._loadPolicy).then(blob=>{this._isLoaded=true;this._loadPromise=null;this._blob=blob}).catch(err=>console.error("Error loading resource: ",err));return this._loadPromise}IsLoaded(){return this._isLoaded}GetBlob(){if(this._blob)return Promise.resolve(this._blob);return this._assetManager.FetchBlob(this._url,this._loadPolicy)}}};


// c3/assets/imageAsset.js
'use strict';{const C3=self.C3;const promiseThrottle=new C3.PromiseThrottle;const allImageAssets=new Set;C3.ImageAsset=class ImageAsset extends C3.Asset{constructor(assetManager,opts){super(assetManager,opts);this._texturePromise=null;this._webglTexture=null;this._refCount=0;this._imageWidth=-1;this._imageHeight=-1;allImageAssets.add(this)}Release(){this.ReleaseTexture();if(this._refCount!==0)throw new Error("released image asset which still has texture references");this._texturePromise=null;allImageAssets.delete(this);
super.Release()}static OnWebGLContextLost(){for(const imageAsset of allImageAssets){imageAsset._texturePromise=null;imageAsset._webglTexture=null;imageAsset._refCount=0}}LoadStaticTexture(renderer,opts){this._refCount++;if(this._webglTexture)return Promise.resolve(this._webglTexture);if(this._texturePromise)return this._texturePromise;this._texturePromise=this.GetBlob().then(blob=>promiseThrottle.Add(()=>renderer.CreateStaticTextureAsync(blob,opts).then(texture=>{this._texturePromise=null;if(this._refCount===
0){renderer.DeleteTexture(texture);return null}this._webglTexture=texture;this._imageWidth=texture.GetWidth();this._imageHeight=texture.GetHeight();return this._webglTexture}))).catch(err=>{console.error("Failed to load texture: ",err);throw err;});return this._texturePromise}ReleaseTexture(){if(this._refCount<=0)throw new Error("texture released too many times");this._refCount--;if(this._refCount===0&&this._webglTexture){const renderer=this._webglTexture.GetRenderer();renderer.DeleteTexture(this._webglTexture);
this._webglTexture=null}}GetTexture(){return this._webglTexture}GetWidth(){return this._imageWidth}GetHeight(){return this._imageHeight}async LoadToDrawable(){const blob=await this.GetBlob();if(C3.Supports.ImageBitmapOptions)return await createImageBitmap(blob,{"premultiplyAlpha":"none"});else if(C3.Supports.ImageBitmap)return await createImageBitmap(blob);else return await C3.BlobToImage(blob)}}};


// c3/layouts/renderCell.js
'use strict';{const C3=self.C3;const assert=self.assert;function SortByInstLastCachedZIndex(a,b){return a.GetWorldInfo()._GetLastCachedZIndex()-b.GetWorldInfo()._GetLastCachedZIndex()}C3.RenderCell=class RenderCell extends C3.DefendedBase{constructor(grid,x,y){super();this._grid=grid;this._x=x;this._y=y;this._instances=[];this._isSorted=true;this._pendingRemoval=new Set;this._isAnyPendingRemoval=false}Release(){C3.clearArray(this._instances);this._pendingRemoval.clear();this._grid=null}Reset(){C3.clearArray(this._instances);
this._isSorted=true;this._pendingRemoval.clear();this._isAnyPendingRemoval=false}SetChanged(){this._isSorted=false}IsEmpty(){if(!this._instances.length)return true;if(this._instances.length>this._pendingRemoval.size)return false;this._FlushPending();return true}Insert(inst){if(this._pendingRemoval.has(inst)){this._pendingRemoval.delete(inst);if(this._pendingRemoval.size===0)this._isAnyPendingRemoval=false;return}this._instances.push(inst);this._isSorted=this._instances.length===1}Remove(inst){this._pendingRemoval.add(inst);
this._isAnyPendingRemoval=true;if(this._pendingRemoval.size>=50)this._FlushPending()}_FlushPending(){if(!this._isAnyPendingRemoval)return;if(this._instances.length===this._pendingRemoval.size){this.Reset();return}C3.arrayRemoveAllInSet(this._instances,this._pendingRemoval);this._pendingRemoval.clear();this._isAnyPendingRemoval=false}_EnsureSorted(){if(this._isSorted)return;this._instances.sort(SortByInstLastCachedZIndex);this._isSorted=true}Dump(result){this._FlushPending();this._EnsureSorted();if(this._instances.length)result.push(this._instances)}}};


// c3/layouts/renderGrid.js
'use strict';{const C3=self.C3;C3.RenderGrid=class RenderGrid extends C3.DefendedBase{constructor(cellWidth,cellHeight){super();this._cellWidth=cellWidth;this._cellHeight=cellHeight;this._cells=C3.New(C3.PairMap)}Release(){this._cells.Release();this._cells=null}GetCell(x,y,createIfMissing){let ret=this._cells.Get(x,y);if(ret)return ret;else if(createIfMissing){ret=C3.New(C3.RenderCell,this,x,y);this._cells.Set(x,y,ret);return ret}else return null}XToCell(x){return Math.floor(x/this._cellWidth)}YToCell(y){return Math.floor(y/
this._cellHeight)}Update(inst,oldRange,newRange){if(oldRange)for(let x=oldRange.getLeft(),lenx=oldRange.getRight();x<=lenx;++x)for(let y=oldRange.getTop(),leny=oldRange.getBottom();y<=leny;++y){if(newRange&&newRange.containsPoint(x,y))continue;const cell=this.GetCell(x,y,false);if(!cell)continue;cell.Remove(inst);if(cell.IsEmpty())this._cells.Delete(x,y)}if(newRange)for(let x=newRange.getLeft(),lenx=newRange.getRight();x<=lenx;++x)for(let y=newRange.getTop(),leny=newRange.getBottom();y<=leny;++y){if(oldRange&&
oldRange.containsPoint(x,y))continue;this.GetCell(x,y,true).Insert(inst)}}QueryRange(rc,result){let x=this.XToCell(rc.getLeft());const ystart=this.YToCell(rc.getTop());const lenx=this.XToCell(rc.getRight());const leny=this.YToCell(rc.getBottom());for(;x<=lenx;++x)for(let y=ystart;y<=leny;++y){const cell=this.GetCell(x,y,false);if(!cell)continue;cell.Dump(result)}}MarkRangeChanged(rc){let x=rc.getLeft();const ystart=rc.getTop();const lenx=rc.getRight();const leny=rc.getBottom();for(;x<=lenx;++x)for(let y=
ystart;y<=leny;++y){const cell=this.GetCell(x,y,false);if(!cell)continue;cell.SetChanged()}}}};


// c3/layouts/layer.js
'use strict';{const C3=self.C3;const tmpRect=new C3.Rect;const tmpQuad=new C3.Quad;const renderCellArr=[];const tmpDestRect=new C3.Rect;const tmpSrcRect=new C3.Rect;const glMatrix=self.glMatrix;const vec3=glMatrix.vec3;const tempVec3=vec3.fromValues(0,1,0);function SortByInstLastCachedZIndex(a,b){return a.GetWorldInfo()._GetLastCachedZIndex()-b.GetWorldInfo()._GetLastCachedZIndex()}function SortByInstZElevation(a,b){return a.GetWorldInfo().GetZElevation()-b.GetWorldInfo().GetZElevation()}C3.Layer=
class Layer extends C3.DefendedBase{constructor(layout,index,data){super();this._layout=layout;this._runtime=layout.GetRuntime();this._name=data[0];this._index=index;this._sid=data[2];this._isVisible=!!data[3];this._backgroundColor=C3.New(C3.Color);this._backgroundColor.setFromJSON(data[4].map(x=>x/255));this._isTransparent=!!data[5];this._parallaxX=data[6];this._parallaxY=data[7];this._color=C3.New(C3.Color,1,1,1,data[8]);this._premultipliedColor=C3.New(C3.Color);this._isForceOwnTexture=data[9];
this._useRenderCells=data[10];this._scaleRate=data[11];this._blendMode=data[12];this._curRenderTarget=null;this._scale=1;this._zElevation=data[16];this._angle=0;this._isAngleEnabled=true;this._viewport=C3.New(C3.Rect);this._viewportZ0=C3.New(C3.Rect);this._startupInitialInstances=[];this._initialInstances=[];this._createdGlobalUids=[];this._initialUIDsToInstanceData=new Map;this._instances=[];this._zIndicesUpToDate=false;this._anyInstanceZElevated=false;this._effectList=C3.New(C3.EffectList,this,
data[15]);this._renderGrid=null;this._lastRenderList=[];this._isRenderListUpToDate=false;this._lastRenderCells=C3.New(C3.Rect,0,0,-1,-1);this._curRenderCells=C3.New(C3.Rect,0,0,-1,-1);this._iLayer=new self.ILayer(this);this._UpdatePremultipliedColor();if(this._useRenderCells)this._renderGrid=C3.New(C3.RenderGrid,this._runtime.GetOriginalViewportWidth(),this._runtime.GetOriginalViewportHeight());for(const instData of data[14]){const objectClass=this._runtime.GetObjectClassByIndex(instData[1]);this._layout._AddInitialObjectClass(objectClass);
if(!objectClass.GetDefaultInstanceData()){objectClass.SetDefaultInstanceData(instData);objectClass._SetDefaultLayerIndex(this._index)}this._initialInstances.push(instData);this._initialUIDsToInstanceData.set(instData[2],instData)}C3.shallowAssignArray(this._startupInitialInstances,this._initialInstances)}static Create(layout,index,data){return C3.New(C3.Layer,layout,index,data)}Release(){this._layout=null;this._runtime=null}GetInitialInstanceData(uid){return this._initialUIDsToInstanceData.get(uid)}CreateInitialInstances(createdInstances){const isFirstVisit=
this._layout.IsFirstVisit();let k=0;const initialInstances=this._initialInstances;for(let i=0,len=initialInstances.length;i<len;++i){const instData=initialInstances[i];const objectClass=this._runtime.GetObjectClassByIndex(instData[1]);let keep=true;if(!objectClass.HasPersistBehavior()||isFirstVisit){const inst=this._runtime.CreateInstanceFromData(instData,this,true);createdInstances.push(inst);if(objectClass.IsGlobal()){keep=false;this._createdGlobalUids.push(inst.GetUID())}}if(keep){initialInstances[k]=
initialInstances[i];++k}}C3.truncateArray(initialInstances,k);this._runtime.FlushPendingInstances();this.SetZIndicesChanged()}_AddInstance(inst,addToGrid){const wi=inst.GetWorldInfo();if(wi.GetLayer()!==this)throw new Error("instance added to wrong layer");this._instances.push(inst);if(wi.GetZElevation()!==0)this._anyInstanceZElevated=true;if(addToGrid&&this._useRenderCells)inst.GetWorldInfo().SetBboxChanged();this.SetZIndicesChanged()}_MaybeAddInstance(inst){if(this._instances.includes(inst))return;
this._instances.push(inst);if(inst.GetWorldInfo().GetZElevation()!==0)this._anyInstanceZElevated=true;this.SetZIndicesChanged()}_PrependInstance(inst,addToGrid){const wi=inst.GetWorldInfo();if(wi.GetLayer()!==this)throw new Error("instance added to wrong layer");this._instances.unshift(inst);if(wi.GetZElevation()!==0)this._anyInstanceZElevated=true;this.SetZIndicesChanged();if(addToGrid&&this._useRenderCells)inst.GetWorldInfo().SetBboxChanged()}_RemoveInstance(inst,removeFromGrid){const index=this._instances.indexOf(inst);
if(index<0)return;if(removeFromGrid&&this._useRenderCells)inst.GetWorldInfo()._RemoveFromRenderCells();this._instances.splice(index,1);this.SetZIndicesChanged();this._MaybeResetAnyInstanceZElevatedFlag()}_SetAnyInstanceZElevated(){this._anyInstanceZElevated=true}_MaybeResetAnyInstanceZElevatedFlag(){if(this._instances.length===0)this._anyInstanceZElevated=false}_SortInstancesByLastCachedZIndex(isPersistMode){if(isPersistMode){const assignedZIndices=new Set;for(const inst of this._instances){const cachedZIndex=
inst.GetWorldInfo()._GetLastCachedZIndex();if(cachedZIndex>=0)assignedZIndices.add(cachedZIndex)}let index=-1;for(const inst of this._instances){const wi=inst.GetWorldInfo();if(wi._GetLastCachedZIndex()>=0)continue;++index;while(assignedZIndices.has(index))++index;wi._SetZIndex(index)}}this._instances.sort(SortByInstLastCachedZIndex)}_Start(){}_End(){for(const inst of this._instances)if(!inst.GetObjectClass().IsGlobal())this._runtime.DestroyInstance(inst);this._runtime.FlushPendingInstances();C3.clearArray(this._instances);
this._anyInstanceZElevated=false;this.SetZIndicesChanged()}RecreateInitialObjects(objectClass,rc,offsetX,offsetY,createHierarchy){const eventSheetManager=this._runtime.GetEventSheetManager();const allObjectClasses=this._runtime.GetAllObjectClasses();const isFamily=objectClass.IsFamily();const ret=[];for(const instData of this._initialInstances){const worldData=instData[0];const x=worldData[0];const y=worldData[1];if(!rc.containsPoint(x,y))continue;const objectType=allObjectClasses[instData[1]];if(objectType!==
objectClass)if(isFamily){if(!objectClass.FamilyHasMember(objectType))continue}else continue;let createOnLayer=this;const runningLayout=this._runtime.GetCurrentLayout();if(this.GetLayout()!==runningLayout){createOnLayer=runningLayout.GetLayerByName(this.GetName());if(!createOnLayer)createOnLayer=runningLayout.GetLayerByIndex(this.GetIndex())}const inst=this._runtime.CreateInstanceFromData(instData,createOnLayer,false,undefined,undefined,false,createHierarchy);const wi=inst.GetWorldInfo();wi.OffsetXY(offsetX,
offsetY);wi.SetBboxChanged();eventSheetManager.BlockFlushingInstances(true);inst._TriggerOnCreatedOnSelfAndRelated();eventSheetManager.BlockFlushingInstances(false);ret.push(inst)}return ret}GetInstanceCount(){return this._instances.length}GetLayout(){return this._layout}GetName(){return this._name}GetIndex(){return this._index}GetSID(){return this._sid}GetRuntime(){return this._runtime}GetDevicePixelRatio(){return this._runtime.GetDevicePixelRatio()}GetEffectList(){return this._effectList}UsesRenderCells(){return this._useRenderCells}GetRenderGrid(){return this._renderGrid}SetRenderListStale(){this._isRenderListUpToDate=
false}IsVisible(){return this._isVisible}SetVisible(v){v=!!v;if(this._isVisible===v)return;this._isVisible=v;this._runtime.UpdateRender()}GetViewport(){return this._viewport}GetViewportForZ(z,outRect){const viewportZ0=this._viewportZ0;if(z===0)outRect.copy(viewportZ0);else{const scaleFactor=this.Get2DScaleFactorToZ(z);const midX=viewportZ0.midX();const midY=viewportZ0.midY();const halfW=.5*viewportZ0.width()/scaleFactor;const halfH=.5*viewportZ0.height()/scaleFactor;outRect.set(midX-halfW,midY-halfH,
midX+halfW,midY+halfH)}}GetOpacity(){return this._color.getA()}SetOpacity(o){o=C3.clamp(o,0,1);if(this._color.getA()===o)return;this._color.setA(o);this._UpdatePremultipliedColor();this._runtime.UpdateRender()}_UpdatePremultipliedColor(){this._premultipliedColor.copy(this._color);this._premultipliedColor.premultiply()}GetPremultipliedColor(){return this._premultipliedColor}HasDefaultColor(){return this._color.equalsRgba(1,1,1,1)}GetScaleRate(){return this._scaleRate}SetScaleRate(r){if(this._scaleRate===
r)return;this._scaleRate=r;this._runtime.UpdateRender()}GetParallaxX(){return this._parallaxX}GetParallaxY(){return this._parallaxY}SetParallax(px,py){if(this._parallaxX===px&&this._parallaxY===py)return;this._parallaxX=px;this._parallaxY=py;this._runtime.UpdateRender();if(this._parallaxX!==1||this._parallaxY!==1)for(const inst of this._instances)inst.GetObjectClass()._SetAnyInstanceParallaxed(true)}SetParallaxX(px){this.SetParallax(px,this.GetParallaxY())}SetParallaxY(py){this.SetParallax(this.GetParallaxX(),
py)}SetZElevation(z){z=+z;if(this._zElevation===z)return;this._zElevation=z;this._runtime.UpdateRender()}GetZElevation(){return this._zElevation}SetAngle(a){this._angle=C3.clampAngle(a)}GetAngle(){if(this._isAngleEnabled)return C3.clampAngle(this._layout.GetAngle()+this._angle);else return 0}GetOwnAngle(){return this._angle}HasInstances(){return this._instances.length>0}_GetInstances(){return this._instances}GetBackgroundColor(){return this._backgroundColor}IsTransparent(){return this._isTransparent}SetTransparent(t){this._isTransparent=
!!t}IsForceOwnTexture(){return this._isForceOwnTexture}SetForceOwnTexture(f){this._isForceOwnTexture=!!f}SetBlendMode(bm){if(this._blendMode===bm)return;this._blendMode=bm;this._runtime.UpdateRender()}GetBlendMode(){return this._blendMode}IsTransformCompatibleWith(otherLayer){return this===otherLayer||this._parallaxX===otherLayer._parallaxX&&this._parallaxY===otherLayer._parallaxY&&this._scale===otherLayer._scale&&this._scaleRate===otherLayer._scaleRate&&this._angle===otherLayer._angle}_RemoveAllInstancesInSet(s){if(s.size===
0)return;const numRemoved=C3.arrayRemoveAllInSet(this._instances,s);if(numRemoved>0){this._MaybeResetAnyInstanceZElevatedFlag();this.SetZIndicesChanged()}}SetZIndicesChanged(){this._zIndicesUpToDate=false;this._isRenderListUpToDate=false}_UpdateZIndices(){if(this._zIndicesUpToDate)return;this._instances.sort(SortByInstZElevation);if(this._useRenderCells)for(let i=0,len=this._instances.length;i<len;++i){const wi=this._instances[i].GetWorldInfo();wi._SetZIndex(i);this._renderGrid.MarkRangeChanged(wi.GetRenderCellRange())}else for(let i=
0,len=this._instances.length;i<len;++i)this._instances[i].GetWorldInfo()._SetZIndex(i);this._zIndicesUpToDate=true}MoveInstanceAdjacent(inst,other,isAfter){const instWi=inst.GetWorldInfo();const otherWi=other.GetWorldInfo();if(instWi.GetLayer()!==this||otherWi.GetLayer()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const myZ=instWi.GetZIndex();let insertZ=otherWi.GetZIndex();if(myZ===insertZ+(isAfter?1:-1))return false;C3.arrayRemove(this._instances,myZ);if(myZ<
insertZ)insertZ--;if(isAfter)insertZ++;if(insertZ===this._instances.length)this._instances.push(inst);else this._instances.splice(insertZ,0,inst);this.SetZIndicesChanged();return true}_MergeSortedZArrays(a,b){const ret=[];let i=0,j=0,lena=a.length,lenb=b.length;while(i<lena&&j<lenb){const ai=a[i];const bj=b[j];if(ai.GetWorldInfo()._GetLastCachedZIndex()<bj.GetWorldInfo()._GetLastCachedZIndex()){ret.push(ai);++i}else{ret.push(bj);++j}}for(;i<lena;++i)ret.push(a[i]);for(;j<lenb;++j)ret.push(b[j]);return ret}_MergeAllSortedZArrays_pass(arr){const ret=
[];const len=arr.length;for(let i=0;i<len-1;i+=2){const arr1=arr[i];const arr2=arr[i+1];ret.push(this._MergeSortedZArrays(arr1,arr2))}if(len%2===1)ret.push(arr[len-1]);return ret}_MergeAllSortedZArrays(arr){while(arr.length>1)arr=this._MergeAllSortedZArrays_pass(arr);return arr[0]}_GetRenderCellInstancesToDraw(){this._UpdateZIndices();C3.clearArray(renderCellArr);this._renderGrid.QueryRange(this._viewport,renderCellArr);if(!renderCellArr.length)return[];if(renderCellArr.length===1)return renderCellArr[0];
return this._MergeAllSortedZArrays(renderCellArr)}_IsOpaque(){return!this.UsesOwnTexture()&&!this.IsTransparent()}ShouldDraw(){return this.IsVisible()&&this.GetOpacity()>0&&(this.HasInstances()||!this.IsTransparent())}UsesOwnTexture(){return this.IsForceOwnTexture()||!this.HasDefaultColor()||this.GetBlendMode()!==0||this._effectList.HasAnyActiveEffect()}GetRenderTarget(){return this._curRenderTarget}_CanFastPathDrawLayer(activeEffectTypes){if(activeEffectTypes.length===0)return true;if(activeEffectTypes.length>=
2)return false;const effectType=activeEffectTypes[0];const shaderProgram=effectType.GetShaderProgram();return!shaderProgram.MustPreDraw()&&!shaderProgram.UsesDest()&&!shaderProgram.UsesCrossSampling()&&this.HasDefaultColor()}Get2DScaleFactorToZ(z){const camZ=this.GetCameraZ();return camZ/(camZ-z)}GetCameraZ(){return 100/this.GetNormalScale()}_SetTransform(renderer,offX=0,offY=0){const renderScale=this._runtime.GetRenderScale();const camX=(this._viewport.midX()+offX)*renderScale;const camY=(this._viewport.midY()+
offY)*renderScale;const camZ=this.GetCameraZ();renderer.SetCameraXYZ(camX,camY,camZ);renderer.SetLookXYZ(camX,camY,camZ-100);const a=this.GetAngle();const upVector=tempVec3;if(a===0)vec3.set(upVector,0,1,0);else vec3.set(upVector,Math.sin(a),Math.cos(a),0);renderer.ResetModelView(upVector);renderer.Scale(renderScale,renderScale);renderer.UpdateModelView()}Draw(renderer,destinationRenderTarget,isFirstDrawnLayer){const canvasManager=this._runtime.GetCanvasManager();const useOwnTexture=this.UsesOwnTexture();
let ownRenderTarget=null;let layerQuery=null;if(this._runtime.IsGPUProfiling()&&renderer.SupportsGPUProfiling()){const timingsBuffer=canvasManager.GetLayerTimingsBuffer(this);if(timingsBuffer){layerQuery=timingsBuffer.AddTimeElapsedQuery();renderer.StartQuery(layerQuery)}}if(useOwnTexture){const rtOpts={sampling:this._runtime.GetSampling()};if(canvasManager.GetCurrentFullscreenScalingQuality()==="low"){rtOpts.width=canvasManager.GetDrawWidth();rtOpts.height=canvasManager.GetDrawHeight()}ownRenderTarget=
this._runtime.GetAdditionalRenderTarget(rtOpts);renderer.SetRenderTarget(ownRenderTarget);if(this.IsTransparent())renderer.ClearRgba(0,0,0,0)}else renderer.SetRenderTarget(destinationRenderTarget);if(!this.IsTransparent())renderer.Clear(this._backgroundColor);this._curRenderTarget=ownRenderTarget||destinationRenderTarget;this._SetTransform(renderer);renderer.SetBaseZ(this.GetZElevation());if(this.GetNormalScale()>Number.EPSILON){this._UpdateZIndices();const useRenderCells=this._useRenderCells&&this.GetZElevation()===
0&&!this._anyInstanceZElevated;if(useRenderCells)this._DrawInstances_RenderCells(renderer);else this._DrawInstances(renderer,this._instances)}renderer.SetBaseZ(0);renderer.SetCurrentZ(0);renderer.SetCameraXYZ(0,0,100);renderer.SetLookXYZ(0,0,0);if(useOwnTexture)this._DrawLayerOwnTextureToRenderTarget(renderer,ownRenderTarget,destinationRenderTarget,isFirstDrawnLayer);if(layerQuery)renderer.EndQuery(layerQuery);this._curRenderTarget=null}_DrawInstances(renderer,instances){const viewport=this._viewport;
const renderTarget=this._curRenderTarget;let lastInst=null;for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];if(inst===lastInst)continue;lastInst=inst;const wi=inst.GetWorldInfo();if(wi.IsVisible()&&wi.IsInViewport(viewport))if(wi.HasAnyActiveEffect())this._DrawInstanceWithEffectsAndRestore(inst,wi,renderer,renderTarget);else this._DrawInstance(inst,wi,renderer)}}_DrawInstances_RenderCells(renderer){const renderGrid=this._renderGrid;const curRenderCells=this._curRenderCells;const lastRenderCells=
this._lastRenderCells;const viewport=this._viewport;let instancesToDraw;curRenderCells.set(renderGrid.XToCell(viewport.getLeft()),renderGrid.YToCell(viewport.getTop()),renderGrid.XToCell(viewport.getRight()),renderGrid.YToCell(viewport.getBottom()));if(!this._isRenderListUpToDate||!curRenderCells.equals(lastRenderCells)){instancesToDraw=this._GetRenderCellInstancesToDraw();this._isRenderListUpToDate=true;lastRenderCells.copy(curRenderCells)}else instancesToDraw=this._lastRenderList;this._DrawInstances(renderer,
instancesToDraw);if(instancesToDraw!==this._lastRenderList)C3.shallowAssignArray(this._lastRenderList,instancesToDraw)}_DrawInstance(inst,wi,renderer){const wiStateGroup=wi.GetRendererStateGroup();if(renderer.GetCurrentStateGroup()!==wiStateGroup)wiStateGroup.Apply();inst.Draw(renderer)}_DrawInstanceWithEffectsAndRestore(inst,wi,renderer,renderTarget){if(this._DrawInstanceWithEffects(inst,wi,renderer,renderTarget,null))this._SetTransform(renderer)}_DrawInstanceWithEffects(inst,wi,renderer,renderTarget,
opts){const activeEffectTypes=wi.GetInstanceEffectList().GetActiveEffectTypes();if(activeEffectTypes.length===1){const effectType=activeEffectTypes[0];const shaderProgram=effectType.GetShaderProgram();if(!shaderProgram.NeedsPostDrawOrExtendsBox()&&wi.HasDefaultColor()&&!inst.MustPreDraw()){this._DrawInstanceWithEffects_FastPath(inst,wi,effectType,shaderProgram,renderer);return false}}const ret=C3.RenderEffectChain(renderer,this._runtime,inst,renderTarget,activeEffectTypes,opts);renderer.SetBaseZ(this.GetZElevation());
return ret}_DrawInstanceWithEffects_FastPath(inst,wi,effectType,shaderProgram,renderer){renderer.SetProgram(shaderProgram);renderer.SetBlendMode(wi.GetBlendMode());if(shaderProgram.IsAnimated())this._runtime.UpdateRender();let pixelWidth=0,pixelHeight=0;if(shaderProgram.UsesAnySrcRectOrPixelSize()){const [sheetWidth,sheetHeight]=inst.GetCurrentSurfaceSize();pixelWidth=1/sheetWidth;pixelHeight=1/sheetHeight;const instTexRect=inst.GetCurrentTexRect();if(instTexRect)tmpSrcRect.copy(instTexRect);else tmpSrcRect.set(0,
0,0,0)}const paramArr=wi.GetInstanceEffectList().GetEffectParametersForIndex(effectType.GetIndex());renderer.SetCurrentZ(wi.GetZElevation());renderer.SetProgramParameters(null,tmpDestRect,tmpSrcRect,tmpSrcRect,wi.GetBoundingBox(),pixelWidth,pixelHeight,this.GetOwnScale(),this.GetAngle(),this._runtime.GetGameTime(),paramArr);inst.Draw(renderer)}_DrawLayerOwnTextureToRenderTarget(renderer,ownRenderTarget,destinationRenderTarget,isFirstDrawnLayer){const activeEffectTypes=this._effectList.GetActiveEffectTypes();
const runtime=this._runtime;if(this._CanFastPathDrawLayer(activeEffectTypes)){renderer.SetRenderTarget(destinationRenderTarget);if(activeEffectTypes.length===1){const effectType=activeEffectTypes[0];const shaderProgram=effectType.GetShaderProgram();renderer.SetProgram(shaderProgram);tmpSrcRect.set(0,0,1,1);const paramArr=this._effectList.GetEffectParametersForIndex(effectType.GetIndex());renderer.SetProgramParameters(null,tmpDestRect,tmpSrcRect,tmpSrcRect,this._viewport,1/runtime.GetDrawWidth(),1/
runtime.GetDrawHeight(),this.GetNormalScale(),this.GetAngle(),runtime.GetGameTime(),paramArr);if(shaderProgram.IsAnimated())runtime.UpdateRender()}else renderer.SetTextureFillMode();if(isFirstDrawnLayer&&this._blendMode===0&&this.HasDefaultColor()&&activeEffectTypes.length===0)renderer.CopyRenderTarget(ownRenderTarget);else{renderer.SetBlendMode(this._blendMode);renderer.SetColor(this._premultipliedColor);renderer.DrawRenderTarget(ownRenderTarget)}renderer.InvalidateRenderTarget(ownRenderTarget);
runtime.ReleaseAdditionalRenderTarget(ownRenderTarget)}else C3.RenderEffectChain(renderer,runtime,this,destinationRenderTarget,activeEffectTypes)}GetOwnScale(){return this._scale}SetOwnScale(s){if(this._scale===s)return;this._scale=s;this._layout.BoundScrolling();this._runtime.UpdateRender()}GetRenderScale(){return this.GetNormalScale()*this._runtime.GetRenderScale()}GetDisplayScale(){return this.GetNormalScale()*this._runtime.GetDisplayScale()}GetNormalScale(){return(this._scale*this._layout.GetScale()-
1)*this._scaleRate+1}UpdateViewport(){this._isAngleEnabled=false;let [px,py]=this.CanvasCssToLayer(0,0);this._isAngleEnabled=true;if(this._runtime.IsPixelRoundingEnabled()){px=Math.round(px);py=Math.round(py)}const invScale=1/this.GetNormalScale();const viewportZ0=this._viewportZ0;viewportZ0.set(px,py,px+this._runtime.GetViewportWidth()*invScale,py+this._runtime.GetViewportHeight()*invScale);const myAngle=this.GetAngle();if(myAngle!==0){tmpRect.copy(viewportZ0);tmpRect.offset(-viewportZ0.midX(),-viewportZ0.midY());
tmpQuad.setFromRotatedRect(tmpRect,myAngle);tmpQuad.getBoundingBox(tmpRect);tmpRect.offset(viewportZ0.midX(),viewportZ0.midY());viewportZ0.copy(tmpRect)}this.GetViewportForZ(this._zElevation,this._viewport)}CanvasCssToLayer(ptx,pty,z=0){return this._CanvasToLayer(ptx,pty,z,this.GetDisplayScale())}DrawSurfaceToLayer(ptx,pty,z=0){return this._CanvasToLayer(ptx,pty,z,this.GetRenderScale()*this.GetDevicePixelRatio())}_CanvasToLayer(canvasX,canvasY,zElevation,displayScale){const parallaxOriginX=this._runtime.GetParallaxXOrigin();
const parallaxOriginY=this._runtime.GetParallaxYOrigin();const scrollOriginX=(this._layout.GetScrollX()-parallaxOriginX)*this._parallaxX+parallaxOriginX;const scrollOriginY=(this._layout.GetScrollY()-parallaxOriginY)*this._parallaxY+parallaxOriginY;const normalScale=this.GetNormalScale();const scaledViewportWidth=this._runtime.GetViewportWidth()/normalScale;const scaledViewportHeight=this._runtime.GetViewportHeight()/normalScale;const viewportOriginX=scrollOriginX-scaledViewportWidth/2;const viewportOriginY=
scrollOriginY-scaledViewportHeight/2;let layerX=viewportOriginX+canvasX/displayScale;let layerY=viewportOriginY+canvasY/displayScale;const a=this.GetAngle();if(a!==0){layerX-=scrollOriginX;layerY-=scrollOriginY;const cosa=Math.cos(a);const sina=Math.sin(a);const x_temp=layerX*cosa-layerY*sina;layerY=layerY*cosa+layerX*sina;layerX=x_temp;layerX+=scrollOriginX;layerY+=scrollOriginY}if(zElevation!==0){const midX=this._viewportZ0.midX();const midY=this._viewportZ0.midY();const scaleFactor=this.Get2DScaleFactorToZ(zElevation);
layerX=(layerX-midX)/scaleFactor+midX;layerY=(layerY-midY)/scaleFactor+midY}return[layerX,layerY]}CanvasCssToLayer_DefaultTransform(ptx,pty){const scale=this._scale;const scaleRate=this._scaleRate;const parallaxX=this._parallaxX;const parallaxY=this._parallaxY;const angle=this._angle;this._scale=1;this._scaleRate=1;this._parallaxX=1;this._parallaxY=1;this._angle=0;const ret=this.CanvasCssToLayer(ptx,pty);this._scale=scale;this._scaleRate=scaleRate;this._parallaxX=parallaxX;this._parallaxY=parallaxY;
this._angle=angle;return ret}LayerToCanvasCss(ptx,pty,z=0){return this._LayerToCanvas(ptx,pty,z,this.GetDisplayScale())}LayerToDrawSurface(ptx,pty,z=0){return this._LayerToCanvas(ptx,pty,z,this.GetRenderScale()*this.GetDevicePixelRatio())}_LayerToCanvas(layerX,layerY,zElevation,displayScale){const runtime=this._runtime;const layout=this._layout;if(zElevation!==0){const midX=this._viewportZ0.midX();const midY=this._viewportZ0.midY();const scaleFactor=this.Get2DScaleFactorToZ(zElevation);layerX=(layerX-
midX)*scaleFactor+midX;layerY=(layerY-midY)*scaleFactor+midY}const parallaxOriginX=runtime.GetParallaxXOrigin();const parallaxOriginY=runtime.GetParallaxYOrigin();const scrollOriginX=(layout.GetScrollX()-parallaxOriginX)*this._parallaxX+parallaxOriginX;const scrollOriginY=(layout.GetScrollY()-parallaxOriginY)*this._parallaxY+parallaxOriginY;const a=this.GetAngle();if(a!==0){layerX-=scrollOriginX;layerY-=scrollOriginY;const cosa=Math.cos(-a);const sina=Math.sin(-a);const x_temp=layerX*cosa-layerY*
sina;layerY=layerY*cosa+layerX*sina;layerX=x_temp;layerX+=scrollOriginX;layerY+=scrollOriginY}const normalScale=this.GetNormalScale();const scaledViewportWidth=runtime.GetViewportWidth()/normalScale;const scaledViewportHeight=runtime.GetViewportHeight()/normalScale;const viewportOriginX=scrollOriginX-scaledViewportWidth/2;const viewportOriginY=scrollOriginY-scaledViewportHeight/2;const viewportOffX=layerX-viewportOriginX;const viewportOffY=layerY-viewportOriginY;const canvasX=viewportOffX*displayScale;
const canvasY=viewportOffY*displayScale;return[canvasX,canvasY]}_GetLayerToDrawSurfaceScale(size,zElevation){size*=this.GetRenderScale()*this.GetDevicePixelRatio();if(zElevation!==0)size*=this.Get2DScaleFactorToZ(zElevation);return size}_SaveToJson(){const o={"s":this.GetOwnScale(),"a":this.GetOwnAngle(),"vl":this._viewport.getLeft(),"vt":this._viewport.getTop(),"vr":this._viewport.getRight(),"vb":this._viewport.getBottom(),"v":this.IsVisible(),"bc":this._backgroundColor.toJSON(),"t":this.IsTransparent(),
"px":this.GetParallaxX(),"py":this.GetParallaxY(),"c":this._color.toJSON(),"sr":this.GetScaleRate(),"fx":this._effectList.SaveToJson(),"cg":this._createdGlobalUids};return o}_LoadFromJson(o){this._scale=o["s"];this._angle=o["a"];this._viewport.set(o["vl"],o["vt"],o["vr"],o["vb"]);this._isVisible=!!o["v"];this._backgroundColor.setFromJSON(o["bc"]);this._isTransparent=!!o["t"];this._parallaxX=o["px"];this._parallaxY=o["py"];this._color.setFromJSON(o["c"]);this._scaleRate=o["sr"];C3.shallowAssignArray(this._createdGlobalUids,
o["cg"]);C3.shallowAssignArray(this._initialInstances,this._startupInitialInstances);const tempSet=new Set(this._createdGlobalUids);let j=0;for(let i=0,len=this._initialInstances.length;i<len;++i)if(!tempSet.has(this._initialInstances[i][2])){this._initialInstances[j]=this._initialInstances[i];++j}C3.truncateArray(this._initialInstances,j);this._effectList.LoadFromJson(o["fx"]);this._SortInstancesByLastCachedZIndex(false);this.SetZIndicesChanged()}GetILayer(){return this._iLayer}}};


// c3/layouts/layout.js
'use strict';{const C3=self.C3;const C3Debugger=self.C3Debugger;const assert=self.assert;const tempDestRect=C3.New(C3.Rect);const tempSrcRect=C3.New(C3.Rect);const tempLayoutRect=C3.New(C3.Rect);C3.Layout=class Layout extends C3.DefendedBase{constructor(layoutManager,index,data){super();this._layoutManager=layoutManager;this._runtime=layoutManager.GetRuntime();this._name=data[0];this._originalWidth=data[1];this._originalHeight=data[2];this._width=data[1];this._height=data[2];this._isUnboundedScrolling=
!!data[3];this._eventSheetName=data[4];this._eventSheet=null;this._sid=data[5];this._index=index;this._scrollX=0;this._scrollY=0;this._scale=1;this._angle=0;this._initialObjectClasses=new Set;this._textureLoadedTypes=new Set;this._textureLoadPendingPromises=new Set;this._createdInstances=[];this._initialNonWorld=[];this._layers=[];this._layersByName=new Map;this._layersBySid=new Map;this._effectList=C3.New(C3.EffectList,this,data[8]);this._curRenderTarget=null;this._persistData={};this._isFirstVisit=
true;this._iLayout=new self.ILayout(this);this._userScriptDispatcher=C3.New(C3.Event.Dispatcher);for(const layerData of data[6]){const layer=C3.Layer.Create(this,this._layers.length,layerData);this._layers.push(layer);this._layersByName.set(layer.GetName().toLowerCase(),layer);this._layersBySid.set(layer.GetSID(),layer)}for(const instData of data[7]){const objectClass=this._runtime.GetObjectClassByIndex(instData[1]);if(!objectClass)throw new Error("missing nonworld object class");if(!objectClass.GetDefaultInstanceData())objectClass.SetDefaultInstanceData(instData);
this._initialNonWorld.push(instData);this._AddInitialObjectClass(objectClass)}}Release(){for(const l of this._layers)l.Release();C3.clearArray(this._layers);this._textureLoadPendingPromises.clear();this._eventSheet=null;this._layoutManager=null;this._runtime=null}GetRuntime(){return this._runtime}GetName(){return this._name}GetSID(){return this._sid}GetIndex(){return this._index}GetEffectList(){return this._effectList}GetMinLayerScale(){let m=this._layers[0].GetNormalScale();for(let i=1,len=this._layers.length;i<
len;++i){const layer=this._layers[i];if(layer.GetParallaxX()===0&&layer.GetParallaxY()===0)continue;m=Math.min(m,layer.GetNormalScale())}return m}SetScrollX(x){if(!this._isUnboundedScrolling){const widthBoundary=this._runtime.GetViewportWidth()*(1/this.GetMinLayerScale())/2;if(x>this._width-widthBoundary)x=this._width-widthBoundary;if(x<widthBoundary)x=widthBoundary}if(this._scrollX!==x){this._scrollX=x;this._runtime.UpdateRender()}}GetScrollX(){return this._scrollX}SetScrollY(y){if(!this._isUnboundedScrolling){const heightBoundary=
this._runtime.GetViewportHeight()*(1/this.GetMinLayerScale())/2;if(y>this._height-heightBoundary)y=this._height-heightBoundary;if(y<heightBoundary)y=heightBoundary}if(this._scrollY!==y){this._scrollY=y;this._runtime.UpdateRender()}}GetScrollY(){return this._scrollY}BoundScrolling(){this.SetScrollX(this.GetScrollX());this.SetScrollY(this.GetScrollY())}GetScale(){return this._scale}SetScale(s){s=+s;if(this._scale===s)return;this._scale=s;this.BoundScrolling()}SetAngle(a){this._angle=C3.clampAngle(a)}GetAngle(){return this._angle}GetWidth(){return this._width}SetWidth(w){if(!isFinite(w)||
w<1)return;this._width=w}GetHeight(){return this._height}SetHeight(h){if(!isFinite(h)||h<1)return;this._height=h}GetEventSheet(){return this._eventSheet}GetLayers(){return this._layers}GetLayerCount(){return this._layers.length}GetLayer(p){if(typeof p==="number")return this.GetLayerByIndex(p);else return this.GetLayerByName(p.toString())}GetLayerByIndex(i){i=C3.clamp(Math.floor(i),0,this._layers.length-1);return this._layers[i]}GetLayerByName(name){return this._layersByName.get(name.toLowerCase())||
null}GetLayerBySID(sid){return this._layersBySid.get(sid)||null}HasOpaqueBottomLayer(){for(const layer of this._layers)if(layer.ShouldDraw())return layer._IsOpaque();return false}IsFirstVisit(){return this._isFirstVisit}_GetInitialObjectClasses(){return[...this._initialObjectClasses]}_AddInitialObjectClass(objectClass){if(objectClass.IsInContainer())for(const containerType of objectClass.GetContainer().GetObjectTypes())this._initialObjectClasses.add(containerType);else this._initialObjectClasses.add(objectClass)}_GetTextureLoadedObjectTypes(){return[...this._textureLoadedTypes]}_Load(previousLayout,
renderer){if(previousLayout===this||!renderer)return Promise.resolve();if(previousLayout){C3.CopySet(this._textureLoadedTypes,previousLayout._textureLoadedTypes);previousLayout._textureLoadedTypes.clear()}const promises=[];for(const oc of this._initialObjectClasses)if(!this._textureLoadedTypes.has(oc)){promises.push(oc.LoadTextures(renderer));this._textureLoadedTypes.add(oc)}return Promise.all(promises)}async MaybeLoadTexturesFor(objectClass){if(objectClass.IsFamily())throw new Error("cannot load textures for family");
const renderer=this._runtime.GetWebGLRenderer();if(!renderer||renderer.IsContextLost()||this._textureLoadedTypes.has(objectClass))return;this._textureLoadedTypes.add(objectClass);const loadPromise=objectClass.LoadTextures(renderer);this._AddPendingTextureLoadPromise(loadPromise);await loadPromise;objectClass.OnDynamicTextureLoadComplete();this._runtime.UpdateRender()}_AddPendingTextureLoadPromise(promise){this._textureLoadPendingPromises.add(promise);promise.then(()=>this._textureLoadPendingPromises.delete(promise)).catch(()=>
this._textureLoadPendingPromises.delete(promise))}WaitForPendingTextureLoadsToComplete(){return Promise.all([...this._textureLoadPendingPromises])}MaybeUnloadTexturesFor(objectClass){if(objectClass.IsFamily()||objectClass.GetInstanceCount()>0)throw new Error("cannot unload textures");const renderer=this._runtime.GetWebGLRenderer();if(!renderer||!this._textureLoadedTypes.has(objectClass))return;this._textureLoadedTypes.delete(objectClass);objectClass.ReleaseTextures(renderer)}_Unload(nextLayout,renderer){if(nextLayout===
this||!renderer)return;for(const oc of this._textureLoadedTypes)if(!oc.IsGlobal()&&!nextLayout._initialObjectClasses.has(oc)){oc.ReleaseTextures();this._textureLoadedTypes.delete(oc)}}_OnWebGLContextLost(){this._textureLoadedTypes.clear()}async _StartRunning(isFirstLayout){const runtime=this._runtime;const layoutManager=this._layoutManager;const eventSheetManager=runtime.GetEventSheetManager();if(this._eventSheetName){this._eventSheet=eventSheetManager.GetEventSheetByName(this._eventSheetName);this._eventSheet._UpdateDeepIncludes()}layoutManager._SetMainRunningLayout(this);
this._width=this._originalWidth;this._height=this._originalHeight;this._scrollX=runtime.GetOriginalViewportWidth()/2;this._scrollY=runtime.GetOriginalViewportHeight()/2;this.BoundScrolling();this._MoveGlobalObjectsToThisLayout(isFirstLayout);this._runtime.SetUsingCreatePromises(true);this._CreateInitialInstances();if(!this._isFirstVisit)this._CreatePersistedInstances();this._CreateAndLinkContainerInstances(this._createdInstances);this._CreateInitialNonWorldInstances();layoutManager.ClearPendingChangeLayout();
runtime.FlushPendingInstances();this._runtime.SetUsingCreatePromises(false);const createPromises=this._runtime.GetCreatePromises();await Promise.all(createPromises);C3.clearArray(createPromises);if(!runtime.IsLoadingState()){for(const inst of this._createdInstances)inst.SetupInitialSceneGraphConnections();for(const inst of this._createdInstances)inst._TriggerOnCreated()}C3.clearArray(this._createdInstances);await Promise.all([...this._initialObjectClasses].map(oc=>oc.PreloadTexturesWithInstances(this._runtime.GetWebGLRenderer())));
if(isFirstLayout){runtime.Dispatcher().dispatchEvent(new C3.Event("beforefirstlayoutstart"));await runtime.DispatchUserScriptEventAsyncWait(new C3.Event("beforeprojectstart"))}await this.DispatchUserScriptEventAsyncWait(new C3.Event("beforelayoutstart"));if(!runtime.IsLoadingState())await runtime.TriggerAsync(C3.Plugins.System.Cnds.OnLayoutStart,null,null);await this.DispatchUserScriptEventAsyncWait(new C3.Event("afterlayoutstart"));if(isFirstLayout){runtime.Dispatcher().dispatchEvent(new C3.Event("afterfirstlayoutstart"));
await runtime.DispatchUserScriptEventAsyncWait(new C3.Event("afterprojectstart"))}eventSheetManager._RunQueuedTriggers(layoutManager);await this.WaitForPendingTextureLoadsToComplete();this._isFirstVisit=false}_MoveGlobalObjectsToThisLayout(isFirstLayout){for(const objectClass of this._runtime.GetAllObjectClasses()){if(objectClass.IsFamily()||!objectClass.IsWorldType())continue;for(const inst of objectClass.GetInstances()){const wi=inst.GetWorldInfo();const oldLayer=wi.GetLayer();const layerIndex=
C3.clamp(oldLayer.GetIndex(),0,this._layers.length-1);const newLayer=this._layers[layerIndex];wi._SetLayer(newLayer);newLayer._MaybeAddInstance(inst)}}if(!isFirstLayout)for(const layer of this._layers)layer._SortInstancesByLastCachedZIndex(false)}_CreateInitialInstances(){for(const layer of this._layers){layer.CreateInitialInstances(this._createdInstances);layer.UpdateViewport();layer._Start()}}_CreatePersistedInstances(){let uidsChanged=false;for(const [sidStr,typeData]of Object.entries(this._persistData)){const objectClass=
this._runtime.GetObjectClassBySID(parseInt(sidStr,10));if(!objectClass||objectClass.IsFamily()||!objectClass.HasPersistBehavior())continue;for(const instData of typeData){let layer=null;if(objectClass.IsWorldType()){layer=this.GetLayerBySID(instData["w"]["l"]);if(!layer)continue}const inst=this._runtime.CreateInstanceFromData(objectClass,layer,false,0,0,true);inst.LoadFromJson(instData);uidsChanged=true;this._createdInstances.push(inst)}C3.clearArray(typeData)}for(const layer of this._layers){layer._SortInstancesByLastCachedZIndex(true);
layer.SetZIndicesChanged()}if(uidsChanged){this._runtime.FlushPendingInstances();this._runtime._RefreshUidMap()}}_CreateAndLinkContainerInstances(createdInstances){for(const inst of createdInstances){if(!inst.IsInContainer())continue;const wi=inst.GetWorldInfo();const iid=inst.GetIID();for(const containerType of inst.GetObjectClass().GetContainer().objectTypes()){if(containerType===inst.GetObjectClass())continue;const instances=containerType.GetInstances();if(instances.length>iid)inst._AddSibling(instances[iid]);
else{let s;if(wi)s=this._runtime.CreateInstanceFromData(containerType,wi.GetLayer(),true,wi.GetX(),wi.GetY(),true);else s=this._runtime.CreateInstanceFromData(containerType,null,true,0,0,true);this._runtime.FlushPendingInstances();containerType._UpdateIIDs();inst._AddSibling(s);createdInstances.push(s)}}}}_CreateInitialNonWorldInstances(){for(const instData of this._initialNonWorld){const objectClass=this._runtime.GetObjectClassByIndex(instData[1]);if(!objectClass.IsInContainer())this._runtime.CreateInstanceFromData(instData,
null,true)}}_CreateGlobalNonWorlds(){const createdInstances=[];const initialNonWorld=this._initialNonWorld;let k=0;for(let i=0,len=initialNonWorld.length;i<len;++i){const instData=initialNonWorld[i];const objectClass=this._runtime.GetObjectClassByIndex(instData[1]);if(objectClass.IsGlobal()){if(!objectClass.IsInContainer()||!objectClass.GetContainer().HasAnyWorldType())createdInstances.push(this._runtime.CreateInstanceFromData(instData,null,true))}else{initialNonWorld[k]=instData;++k}}C3.truncateArray(initialNonWorld,
k);this._runtime.FlushPendingInstances();this._CreateAndLinkContainerInstances(createdInstances)}RecreateInitialObjects(objectClass,rc,srcLayer,offsetX,offsetY,createHierarchy){if(srcLayer)return srcLayer.RecreateInitialObjects(objectClass,rc,offsetX,offsetY,createHierarchy);else{const ret=[];for(const layer of this._layers)ret.push(layer.RecreateInitialObjects(objectClass,rc,offsetX,offsetY,createHierarchy));return ret.flat()}}async _StopRunning(){const layoutManager=this._layoutManager;if(!this._runtime.IsLoadingState())await this._runtime.TriggerAsync(C3.Plugins.System.Cnds.OnLayoutEnd,
null,null);layoutManager.SetIsEndingLayout(true);this._runtime.GetEventSheetManager().ClearAllScheduledWaits();if(!this._isFirstVisit)this._SavePersistData();for(const layer of this._layers)layer._End();for(const objectClass of this._runtime.GetAllObjectClasses()){if(objectClass.IsGlobal()||objectClass.IsWorldType()||objectClass.GetPlugin().IsSingleGlobal()||objectClass.IsFamily())continue;for(const inst of objectClass.GetInstances())this._runtime.DestroyInstance(inst);this._runtime.FlushPendingInstances()}layoutManager.SetIsEndingLayout(false);
if(layoutManager.GetMainRunningLayout()===this)layoutManager._SetMainRunningLayout(null)}_SaveInstanceToPersist(inst){const sidStr=inst.GetObjectClass().GetSID().toString();if(!this._persistData.hasOwnProperty(sidStr))this._persistData[sidStr]=[];const typePersist=this._persistData[sidStr];typePersist.push(inst.SaveToJson())}_SavePersistData(){for(const layer of this._layers){layer._UpdateZIndices();for(const inst of layer._GetInstances()){const objectClass=inst.GetObjectClass();if(!objectClass.IsGlobal()&&
objectClass.HasPersistBehavior())this._SaveInstanceToPersist(inst)}}}ResetPersistData(){this._persistData={};this._isFirstVisit=true}GetRenderTarget(){return this._curRenderTarget}UsesOwnTexture(){return this._runtime.GetCanvasManager().GetCurrentFullscreenScalingQuality()==="low"||this._runtime.UsesAnyBackgroundBlending()||this._runtime.GetCompositingMode()==="low-latency"||this._effectList.HasAnyActiveEffect()}_CanFastPathDrawLayout(activeEffectTypes){if(activeEffectTypes.length===0)return true;
if(activeEffectTypes.length>=2)return false;const effectType=activeEffectTypes[0];const shaderProgram=effectType.GetShaderProgram();return!shaderProgram.MustPreDraw()}Draw(renderer){const canvasManager=this._runtime.GetCanvasManager();const useOwnTexture=this.UsesOwnTexture();let ownRenderTarget=null;if(useOwnTexture){if(this._runtime.GetCompositingMode()!=="low-latency"){renderer.SetRenderTarget(null);renderer.ClearRgba(0,0,0,0)}const rtOpts={sampling:this._runtime.GetSampling(),readback:this._runtime.UsesAnyBackgroundBlending()||
this._effectList.HasAnyActiveEffect()};if(canvasManager.GetCurrentFullscreenScalingQuality()==="low"){rtOpts.width=canvasManager.GetDrawWidth();rtOpts.height=canvasManager.GetDrawHeight()}ownRenderTarget=this._runtime.GetAdditionalRenderTarget(rtOpts);renderer.SetRenderTarget(ownRenderTarget)}else renderer.SetRenderTarget(null);if(!this.HasOpaqueBottomLayer())renderer.ClearRgba(0,0,0,0);this._curRenderTarget=ownRenderTarget;let isFirstDrawnLayer=true;for(const layer of this._layers){layer.UpdateViewport();
if(layer.ShouldDraw()){layer.Draw(renderer,ownRenderTarget,isFirstDrawnLayer);isFirstDrawnLayer=false}}if(useOwnTexture)this._DrawLayoutOwnTextureToRenderTarget(renderer,ownRenderTarget);this._curRenderTarget=null}_DrawLayoutOwnTextureToRenderTarget(renderer,ownRenderTarget){const activeEffectTypes=this._effectList.GetActiveEffectTypes();const runtime=this._runtime;if(this._CanFastPathDrawLayout(activeEffectTypes)){renderer.SetRenderTarget(null);if(activeEffectTypes.length===1){const effectType=activeEffectTypes[0];
const shaderProgram=effectType.GetShaderProgram();renderer.SetProgram(shaderProgram);tempSrcRect.set(0,0,1,1);tempLayoutRect.set(0,0,runtime.GetViewportWidth(),runtime.GetViewportHeight());const paramArr=this._effectList.GetEffectParametersForIndex(effectType.GetIndex());renderer.SetProgramParameters(null,tempDestRect,tempSrcRect,tempSrcRect,tempLayoutRect,1/runtime.GetDrawWidth(),1/runtime.GetDrawHeight(),this.GetScale(),this.GetAngle(),runtime.GetGameTime(),paramArr);if(shaderProgram.IsAnimated())runtime.UpdateRender()}else renderer.SetTextureFillMode();
if(activeEffectTypes.length===0)renderer.CopyRenderTarget(ownRenderTarget);else{renderer.SetAlphaBlend();renderer.ResetColor();renderer.DrawRenderTarget(ownRenderTarget)}renderer.InvalidateRenderTarget(ownRenderTarget);runtime.ReleaseAdditionalRenderTarget(ownRenderTarget)}else C3.RenderEffectChain(renderer,runtime,this,null,activeEffectTypes)}_SaveToJson(){const o={"sx":this.GetScrollX(),"sy":this.GetScrollY(),"s":this.GetScale(),"a":this.GetAngle(),"w":this.GetWidth(),"h":this.GetHeight(),"fv":this._isFirstVisit,
"persist":this._persistData,"fx":this._effectList.SaveToJson(),"layers":{}};for(const layer of this._layers)o["layers"][layer.GetSID().toString()]=layer._SaveToJson();return o}_LoadFromJson(o){this._scrollX=o["sx"];this._scrollY=o["sy"];this._scale=o["s"];this._angle=o["a"];this._width=o["w"];this._height=o["h"];this._isFirstVisit=!!o["fv"];this._persistData=o["persist"];this._effectList.LoadFromJson(o["fx"]);for(const [sidStr,data]of Object.entries(o["layers"])){const sid=parseInt(sidStr,10);const layer=
this.GetLayerBySID(sid);if(!layer)continue;layer._LoadFromJson(data)}}GetILayout(){return this._iLayout}UserScriptDispatcher(){return this._userScriptDispatcher}DispatchUserScriptEvent(e){e.layout=this.GetILayout();const runtime=this._runtime;const shouldTime=runtime.IsDebug()&&!runtime.GetEventSheetManager().IsInEventEngine();if(shouldTime)C3Debugger.StartMeasuringScriptTime();this._userScriptDispatcher.dispatchEvent(e);if(shouldTime)C3Debugger.AddScriptTime()}DispatchUserScriptEventAsyncWait(e){e.layout=
this.GetILayout();return this._userScriptDispatcher.dispatchEventAndWaitAsync(e)}}};


// c3/layouts/layoutManager.js
'use strict';{const C3=self.C3;C3.LayoutManager=class LayoutManager extends C3.DefendedBase{constructor(runtime){super();this._runtime=runtime;this._allLayouts=[];this._layoutsByName=new Map;this._layoutsBySid=new Map;this._mainRunningLayout=null;this._runningSubLayouts=[];this._firstLayout=null;this._isEndingLayout=0;this._pendingChangeLayout=null}Release(){this._runtime=null;this._mainRunningLayout=null;this._firstLayout=null;this._pendingChangeLayout=null;C3.clearArray(this._allLayouts);this._layoutsByName.clear();
this._layoutsBySid.clear();C3.clearArray(this._runningSubLayouts)}Create(layoutData){const layout=C3.New(C3.Layout,this,this._allLayouts.length,layoutData);this._allLayouts.push(layout);this._layoutsByName.set(layout.GetName().toLowerCase(),layout);this._layoutsBySid.set(layout.GetSID(),layout)}GetRuntime(){return this._runtime}SetFirstLayout(layout){this._firstLayout=layout}GetFirstLayout(){if(this._firstLayout)return this._firstLayout;if(this._allLayouts.length)return this._allLayouts[0];throw new Error("no first layout");
}GetLayoutByName(name){return this._layoutsByName.get(name.toLowerCase())||null}GetLayoutBySID(sid){return this._layoutsBySid.get(sid)||null}GetLayoutByIndex(index){index=C3.clamp(Math.floor(index),0,this._allLayouts.length-1);return this._allLayouts[index]}GetLayout(p){if(typeof p==="number")return this.GetLayoutByIndex(p);else return this.GetLayoutByName(p.toString())}GetAllLayouts(){return this._allLayouts}_SetMainRunningLayout(layout){this._mainRunningLayout=layout}GetMainRunningLayout(){return this._mainRunningLayout}_AddRunningSubLayout(layout){if(this._runningSubLayouts.includes(layout))throw new Error("layout already running");
this._runningSubLayouts.push(layout)}_RemoveRunningSubLayout(layout){const i=this._runningSubLayouts.indexOf(layout);if(i===-1)throw new Error("layout not running");this._runningSubLayouts.splice(i,1)}*runningLayouts(){if(this._mainRunningLayout)yield this._mainRunningLayout;if(this._runningSubLayouts.length)yield*this._runningSubLayouts}IsLayoutRunning(layout){return this._mainRunningLayout===layout||this._runningSubLayouts.includes(layout)}SetIsEndingLayout(e){if(e)this._isEndingLayout++;else{if(this._isEndingLayout<=
0)throw new Error("already unset");this._isEndingLayout--}}IsEndingLayout(){return this._isEndingLayout>0}ChangeMainLayout(layout){this._pendingChangeLayout=layout}ClearPendingChangeLayout(){this._pendingChangeLayout=null}IsPendingChangeMainLayout(){return!!this._pendingChangeLayout}GetPendingChangeMainLayout(){return this._pendingChangeLayout}}};


// c3/layouts/renderEffectChain.js
'use strict';{const C3=self.C3;class RenderEffectChainState{constructor(){this.renderer=null;this.runtime=null;this.drawWidth=0;this.drawHeight=0;this.surfaceWidth=0;this.surfaceHeight=0;this.layoutRect=new C3.Rect;this.rcTexBounce=new C3.Rect;this.rcTexDest=new C3.Rect;this.rcTexOrigin=new C3.Rect;this.screenRect=new C3.Rect;this.clearRect=new C3.Rect;this.srcRect=new C3.Rect;this.fxTex=[null,null];this.fxIndex=0;this.otherFxIndex=1;this.boxExtendHorizontal=0;this.boxExtendVertical=0;this.layerScale=
0;this.layerAngle=0;this.layout=null;this.layer=null;this.inst=null;this.wi=null;this.renderTarget=null;this.preDraw=false;this.postDraw=false;this.didChangeTransform=false;this.opts=null}Clear(){this.renderer=null;this.runtime=null;this.layout=null;this.layer=null;this.inst=null;this.wi=null;this.renderTarget=null;this.opts=null}ShouldPreDraw(firstEffectType){const shaderProgram=firstEffectType.GetShaderProgram();if(shaderProgram.MustPreDraw())return true;if(this.inst)return shaderProgram.UsesDest()&&
(this.wi.GetAngle()!==0||this.wi.GetWidth()<0||this.wi.GetHeight()<0)||this.boxExtendHorizontal!==0||this.boxExtendVertical!==0||!this.wi.HasDefaultColor()||this.inst.MustPreDraw();else if(this.layer)return!this.layer.HasDefaultColor()}ShouldPostDraw(lastEffectType){const shaderProgram=lastEffectType.GetShaderProgram();return shaderProgram.UsesDest()||shaderProgram.UsesCrossSampling()||this.layout&&this.runtime.GetCanvasManager().GetCurrentFullscreenScalingQuality()==="low"}GetEffectRenderTarget(i){if(i!==
0&&i!==1)throw new Error("invalid effect target");const fxTex=this.fxTex;if(!fxTex[i]){const runtime=this.runtime;const canvasManager=runtime.GetCanvasManager();const opts={sampling:runtime.GetSampling()};if(canvasManager.GetCurrentFullscreenScalingQuality()==="low"){opts.width=canvasManager.GetDrawWidth();opts.height=canvasManager.GetDrawHeight()}fxTex[i]=canvasManager.GetAdditionalRenderTarget(opts)}return fxTex[i]}ReleaseEffectRenderTargets(){const fxTex=this.fxTex;const canvasManager=this.runtime.GetCanvasManager();
if(fxTex[0]){canvasManager.ReleaseAdditionalRenderTarget(fxTex[0]);fxTex[0]=null}if(fxTex[1]){canvasManager.ReleaseAdditionalRenderTarget(fxTex[1]);fxTex[1]=null}}}const ctxStack=[];let ctxPtr=0;function AllocRenderEffectChainState(){if(ctxPtr===ctxStack.length)ctxStack.push(new RenderEffectChainState);return ctxStack[ctxPtr++]}function ReleaseRenderEffectChainState(ctx){ctx.ReleaseEffectRenderTargets();ctx.Clear();ctxPtr--}const tempQuad=new C3.Quad;let isDebug=false;let isDebugFrame=false;async function DebugLogRenderTargetContents(msg,
renderer,renderTarget){const blob=await C3.Gfx.WebGLRenderTarget.DebugReadPixelsToBlob(renderer,renderTarget);const blobUrl=URL.createObjectURL(blob);console.log("[FX] "+msg+" "+(renderTarget?"":" [to display]")+": ",blobUrl)}C3.RenderEffectChain=function RenderEffectChain(renderer,runtime,effectsObject,renderTarget_,activeEffectTypes,opts_){const ctx=AllocRenderEffectChainState();ctx.renderer=renderer;ctx.runtime=runtime;if(effectsObject instanceof C3.Instance){ctx.inst=effectsObject;ctx.wi=ctx.inst.GetWorldInfo()}else if(effectsObject instanceof
C3.Layer)ctx.layer=effectsObject;else if(effectsObject instanceof C3.Layout)ctx.layout=effectsObject;else throw new Error("invalid effects object");const canvasManager=runtime.GetCanvasManager();ctx.renderTarget=renderTarget_;ctx.drawWidth=canvasManager.GetDrawWidth();ctx.drawHeight=canvasManager.GetDrawHeight();ctx.surfaceWidth=ctx.drawWidth;ctx.surfaceHeight=ctx.drawHeight;ctx.fxIndex=0;ctx.otherFxIndex=1;ctx.boxExtendHorizontal=0;ctx.boxExtendVertical=0;ctx.screenRect.set(0,0,ctx.drawWidth,ctx.drawHeight);
ctx.clearRect.set(0,0,ctx.drawWidth,ctx.drawHeight);ctx.didChangeTransform=false;ctx.opts=opts_;if(ctx.inst){const wi=ctx.wi;ctx.layerScale=wi.GetLayer().GetRenderScale();ctx.layerAngle=wi.GetLayer().GetAngle();ctx.layoutRect.copy(wi.GetBoundingBox())}else if(ctx.layer){const layer=ctx.layer;ctx.layerScale=layer.GetRenderScale();ctx.layerAngle=layer.GetAngle();ctx.layoutRect.copy(layer.GetViewport())}else{const layout=ctx.layout;ctx.layerScale=layout.GetScale();ctx.layerAngle=layout.GetAngle();ctx.layoutRect.set(0,
0,ctx.drawWidth,ctx.drawHeight)}if(ctx.inst)GetInstanceBox(ctx,activeEffectTypes);else{ctx.rcTexBounce.set(0,0,ctx.drawWidth/ctx.surfaceWidth,ctx.drawHeight/ctx.surfaceHeight);ctx.rcTexDest.copy(ctx.rcTexBounce);ctx.rcTexOrigin.copy(ctx.rcTexBounce);ctx.rcTexBounce.swapTopBottom();ctx.rcTexDest.swapTopBottom();ctx.rcTexOrigin.swapTopBottom()}renderer.SetAlphaBlend();renderer.ResetColor();renderer.SetBaseZ(0);renderer.SetCurrentZ(0);ctx.preDraw=ctx.ShouldPreDraw(activeEffectTypes[0]);if(ctx.preDraw)PreDraw(ctx);
renderer.ResetColor();const lastEffectTypeIndex=activeEffectTypes.length-1;ctx.postDraw=ctx.ShouldPostDraw(activeEffectTypes[lastEffectTypeIndex]);for(let i=0,len=activeEffectTypes.length;i<len;++i){const effectType=activeEffectTypes[i];const shaderProgram=effectType.GetShaderProgram();renderer.SetProgram(shaderProgram);if(shaderProgram.IsAnimated())runtime.UpdateRender();if(i===0&&!ctx.preDraw)RenderFirstBounce(ctx,effectType);else{renderer.SetCopyBlend();const isLast=i===lastEffectTypeIndex&&!ctx.postDraw;
RenderBounce(ctx,effectType,isLast,i)}if(ctx.fxIndex===0){ctx.fxIndex=1;ctx.otherFxIndex=0}else{ctx.fxIndex=0;ctx.otherFxIndex=1}}if(ctx.postDraw)PostDraw(ctx,activeEffectTypes);const ret=ctx.didChangeTransform;ReleaseRenderEffectChainState(ctx);isDebugFrame=false;return ret};function GetInstanceBox(ctx,activeEffectTypes){for(let i=0,len=activeEffectTypes.length;i<len;++i){const shaderProgram=activeEffectTypes[i].GetShaderProgram();ctx.boxExtendHorizontal+=shaderProgram.GetBoxExtendHorizontal();ctx.boxExtendVertical+=
shaderProgram.GetBoxExtendVertical()}const wi=ctx.wi;const layer=wi.GetLayer();const layerAngle=layer.GetAngle();const bbox=wi.GetBoundingBox();const z=wi.GetTotalZElevation();let [sl,st]=layer.LayerToDrawSurface(bbox.getLeft(),bbox.getTop(),z);let [sr,sb]=layer.LayerToDrawSurface(bbox.getRight(),bbox.getBottom(),z);if(layerAngle!==0){const [strx,stry]=layer.LayerToDrawSurface(bbox.getRight(),bbox.getTop(),z);const [sblx,sbly]=layer.LayerToDrawSurface(bbox.getLeft(),bbox.getBottom(),z);let temp=Math.min(sl,
sr,strx,sblx);sr=Math.max(sl,sr,strx,sblx);sl=temp;temp=Math.min(st,sb,stry,sbly);sb=Math.max(st,sb,stry,sbly);st=temp}const screenRect=ctx.screenRect;const rcTexOrigin=ctx.rcTexOrigin;const rcTexDest=ctx.rcTexDest;const clearRect=ctx.clearRect;const rcTexBounce=ctx.rcTexBounce;screenRect.set(sl,st,sr,sb);screenRect.shuntY(ctx.drawHeight);rcTexOrigin.copy(screenRect);rcTexOrigin.divide(ctx.surfaceWidth,ctx.surfaceHeight);rcTexOrigin.swapTopBottom();screenRect.inflate(ctx.boxExtendHorizontal,ctx.boxExtendVertical);
rcTexDest.copy(screenRect);rcTexDest.divide(ctx.surfaceWidth,ctx.surfaceHeight);rcTexDest.swapTopBottom();clearRect.copy(screenRect);clearRect.roundOuter();clearRect.inflate(ctx.boxExtendHorizontal+1,ctx.boxExtendVertical+1);screenRect.clamp(0,0,ctx.drawWidth,ctx.drawHeight);clearRect.clamp(0,0,ctx.drawWidth,ctx.drawHeight);rcTexBounce.copy(screenRect);rcTexBounce.divide(ctx.surfaceWidth,ctx.surfaceHeight);rcTexBounce.swapTopBottom()}function PreDraw(ctx){const renderer=ctx.renderer;renderer.SetTextureFillMode();
const fxTarget=ctx.GetEffectRenderTarget(ctx.fxIndex);renderer.SetRenderTarget(fxTarget);const opts=ctx.opts;if(opts&&opts.preTransform)opts.preTransform();if(isDebug)renderer.ClearRgba(1,0,0,1);renderer.ClearRect2(ctx.clearRect);if(ctx.inst){renderer.SetColor(ctx.wi.GetPremultipliedColor());renderer.SetCurrentZ(ctx.wi.GetTotalZElevation());ctx.inst.Draw(renderer);renderer.SetCurrentZ(0)}else{const renderSurface=(ctx.layer||ctx.layout).GetRenderTarget();if(ctx.layer)renderer.SetColor(ctx.layer.GetPremultipliedColor());
else renderer.ResetColor();renderer.DrawRenderTarget(renderSurface);renderer.InvalidateRenderTarget(renderSurface);ctx.runtime.GetCanvasManager().ReleaseAdditionalRenderTarget(renderSurface)}ctx.rcTexDest.clampFlipped(0,1,1,0);ctx.fxIndex=1;ctx.otherFxIndex=0;if(isDebugFrame)DebugLogRenderTargetContents("Pre-draw",renderer,fxTarget)}function RenderFirstBounce(ctx,effectType){const renderer=ctx.renderer;const runtime=ctx.runtime;const fxTarget=ctx.GetEffectRenderTarget(ctx.fxIndex);renderer.SetRenderTarget(fxTarget);
const opts=ctx.opts;if(opts&&opts.preTransform)opts.preTransform();if(isDebug)renderer.ClearRgba(1,0,0,1);renderer.ClearRect2(ctx.clearRect);if(ctx.inst){const [sheetWidth,sheetHeight]=ctx.inst.GetCurrentSurfaceSize();const instTexRect=ctx.inst.GetCurrentTexRect();if(instTexRect)ctx.srcRect.copy(instTexRect);else ctx.srcRect.set(0,0,0,0);const paramArr=ctx.wi.GetInstanceEffectList().GetEffectParametersForIndex(effectType.GetIndex());renderer.SetProgramParameters(ctx.renderTarget,ctx.rcTexDest,ctx.srcRect,
ctx.srcRect,ctx.layoutRect,1/sheetWidth,1/sheetHeight,ctx.layerScale,ctx.layerAngle,runtime.GetGameTime(),paramArr);renderer.SetCurrentZ(ctx.wi.GetTotalZElevation());ctx.inst.Draw(renderer);renderer.SetCurrentZ(0);ctx.rcTexDest.clampFlipped(0,1,1,0);ctx.screenRect.shuntY(ctx.drawHeight);if(isDebugFrame)DebugLogRenderTargetContents("First bounce",renderer,fxTarget)}else{const paramArr=(ctx.layer||ctx.layout).GetEffectList().GetEffectParametersForIndex(effectType.GetIndex());renderer.SetProgramParameters(ctx.renderTarget,
ctx.rcTexDest,ctx.rcTexBounce,ctx.rcTexOrigin,ctx.layoutRect,1/ctx.drawWidth,1/ctx.drawHeight,ctx.layerScale,ctx.layerAngle,runtime.GetGameTime(),paramArr);const renderSurface=(ctx.layer||ctx.layout).GetRenderTarget();if(isDebugFrame)DebugLogRenderTargetContents("Layer target",renderer,renderSurface);renderer.DrawRenderTarget(renderSurface);renderer.InvalidateRenderTarget(renderSurface);runtime.GetCanvasManager().ReleaseAdditionalRenderTarget(renderSurface);if(isDebugFrame)DebugLogRenderTargetContents("First bounce",
renderer,fxTarget)}}function RenderBounce(ctx,effectType,isLast,i){const renderer=ctx.renderer;const runtime=ctx.runtime;let fxTarget;let paramArr;if(i===0&&ctx.preDraw&&ctx.inst)ctx.screenRect.shuntY(ctx.drawHeight);if(isLast){if(ctx.inst)renderer.SetBlendMode(ctx.wi.GetBlendMode());else if(ctx.layer)renderer.SetBlendMode(ctx.layer.GetBlendMode());fxTarget=ctx.renderTarget;renderer.SetRenderTarget(fxTarget)}else{fxTarget=ctx.GetEffectRenderTarget(ctx.fxIndex);renderer.SetRenderTarget(fxTarget);if(isDebug)renderer.ClearRgba(1,
0,0,1);renderer.ClearRect2(ctx.clearRect)}if(ctx.inst)paramArr=ctx.wi.GetInstanceEffectList().GetEffectParametersForIndex(effectType.GetIndex());else paramArr=(ctx.layer||ctx.layout).GetEffectList().GetEffectParametersForIndex(effectType.GetIndex());renderer.SetProgramParameters(ctx.renderTarget,ctx.rcTexDest,ctx.rcTexBounce,ctx.rcTexOrigin,ctx.layoutRect,1/ctx.surfaceWidth,1/ctx.surfaceHeight,ctx.layerScale,ctx.layerAngle,runtime.GetGameTime(),paramArr);const srcTarget=ctx.GetEffectRenderTarget(ctx.otherFxIndex);
renderer.SetTexture(srcTarget.GetTexture());runtime.GetCanvasManager().SetDeviceTransform(renderer);ctx.didChangeTransform=true;tempQuad.setFromRect(ctx.screenRect);renderer.Quad3(tempQuad,ctx.rcTexBounce);if(!ctx.inst)renderer.InvalidateRenderTarget(srcTarget);if(isDebugFrame)DebugLogRenderTargetContents("Bounce "+i,renderer,fxTarget)}function PostDraw(ctx,activeEffectTypes){const renderer=ctx.renderer;if(ctx.layout){renderer.SetTextureFillMode();renderer.SetRenderTarget(ctx.renderTarget);const srcTarget=
ctx.GetEffectRenderTarget(ctx.otherFxIndex);renderer.CopyRenderTarget(srcTarget);renderer.InvalidateRenderTarget(srcTarget);return}const canvasManager=ctx.runtime.GetCanvasManager();if(canvasManager.GetCurrentFullscreenScalingQuality()==="low"){renderer.SetTextureFillMode();canvasManager.SetDeviceTransform(renderer,canvasManager.GetDrawWidth(),canvasManager.GetDrawHeight());ctx.didChangeTransform=true}else renderer.SetDeviceTransformTextureFillMode();if(ctx.inst)renderer.SetBlendMode(ctx.wi.GetBlendMode());
else if(ctx.layer)renderer.SetBlendMode(ctx.layer.GetBlendMode());renderer.SetRenderTarget(ctx.renderTarget);const srcTarget=ctx.GetEffectRenderTarget(ctx.otherFxIndex);renderer.SetTexture(srcTarget.GetTexture());tempQuad.setFromRect(ctx.screenRect);renderer.Quad3(tempQuad,ctx.rcTexBounce);if(!ctx.inst)renderer.InvalidateRenderTarget(srcTarget);if(isDebugFrame)DebugLogRenderTargetContents("Post-draw",renderer,ctx.renderTarget)}};


// c3/timelines/timelineManager.js
'use strict';{const C3=self.C3;const NAMES_REGEXP=new RegExp("<(.+?)>","g");C3.TimelineManager=class TimelineManager extends C3.DefendedBase{constructor(runtime){super();this._runtime=runtime;this._timelineDataManager=C3.New(C3.TimelineDataManager);this._pluginInstance=null;this._timelines=[];this._timelinesByName=new Map;this._objectClassToTimelineMap=new Map;this._timelinesCreatedByTemplate=new Map;this._scheduledTimelines=[];this._playingTimelines=[];this._hasRuntimeListeners=false;this._changingLayout=
false;this._isTickingTimelines=false;this._tickFunc=()=>this._OnTick();this._tick2Func=()=>this._OnTick2();this._beforeLayoutChange=()=>this._OnBeforeChangeLayout();this._layoutChange=()=>this._OnAfterChangeLayout();this._instanceDestroy=e=>this._OnInstanceDestroy(e.instance);this._afterLoad=e=>this._OnAfterLoad();this._destroyedWhileLoadingState=[]}Release(){this.RemoveRuntimeListeners();this._tickFunc=null;this._tick2Func=null;this._beforeLayoutChange=null;this._layoutChange=null;this._instanceDestroy=
null;this._afterLoad=null;for(const timeline of this._timelines){timeline.Stop();timeline.Release()}C3.clearArray(this._timelines);this._timelines=null;this._timelineDataManager.Release();this._timelineDataManager=null;C3.clearArray(this._scheduledTimelines);this._scheduledTimelines=null;C3.clearArray(this._playingTimelines);this._playingTimelines=null;this._timelinesByName.clear();this._timelinesByName=null;this._objectClassToTimelineMap.clear();this._objectClassToTimelineMap=null;this._timelinesCreatedByTemplate.clear();
this._timelinesCreatedByTemplate=null;C3.clearArray(this._destroyedWhileLoadingState);this._destroyedWhileLoadingState=null;this._runtime=null}AddRuntimeListeners(){const dispatcher=this._runtime.Dispatcher();dispatcher.addEventListener("pretick",this._tickFunc);dispatcher.addEventListener("tick2",this._tick2Func);dispatcher.addEventListener("beforelayoutchange",this._beforeLayoutChange);dispatcher.addEventListener("layoutchange",this._layoutChange);dispatcher.addEventListener("instancedestroy",this._instanceDestroy);
dispatcher.addEventListener("afterload",this._afterLoad)}RemoveRuntimeListeners(){const dispatcher=this._runtime.Dispatcher();dispatcher.removeEventListener("pretick",this._tickFunc);dispatcher.removeEventListener("tick2",this._tick2Func);dispatcher.removeEventListener("beforelayoutchange",this._beforeLayoutChange);dispatcher.removeEventListener("layoutchange",this._layoutChange);dispatcher.removeEventListener("instancedestroy",this._instanceDestroy);dispatcher.removeEventListener("afterload",this._afterLoad)}Create(timelineData){this._timelineDataManager.Add(timelineData);
const timeline=C3.TimelineState.CreateInitial(timelineData,this);this.Add(timeline);this.SetTimelineObjectClassesToMap(timeline);this._timelinesCreatedByTemplate.set(timeline.GetName(),0)}CreateFromTemplate(template){const timelineDataManager=this.GetTimelineDataManager();const templateName=template.GetTemplateName();const timelineDataItem=timelineDataManager.Get(templateName);const timeline=C3.TimelineState.CreateFromTemplate(`${templateName}:${this._timelinesCreatedByTemplate.get(templateName)}`,
timelineDataItem,this);this._IncreaseTemplateTimelinesCount(templateName);this.Add(timeline);return timeline}_IncreaseTemplateTimelinesCount(templateName){this._timelinesCreatedByTemplate.set(templateName,this._timelinesCreatedByTemplate.get(templateName)+1)}_SetCreatedTemplateTimelinesCount(){for(const timeline of this._timelines){if(timeline.IsTemplate())continue;const templateName=timeline.GetTemplateName();this._IncreaseTemplateTimelinesCount(templateName)}}_ClearCreatedTemplateTimelinesCount(){for(const templateName of this._timelinesCreatedByTemplate.keys())this._timelinesCreatedByTemplate.set(templateName,
0)}Add(timeline){this._timelines.push(timeline);this._timelinesByName.set(timeline.GetName().toLowerCase(),timeline)}Remove(timeline){if(timeline.IsTemplate())return;C3.arrayFindRemove(this._timelines,timeline);C3.arrayFindRemove(this._scheduledTimelines,timeline);C3.arrayFindRemove(this._playingTimelines,timeline);this._timelinesByName.delete(timeline.GetName().toLowerCase());this.RemoveTimelineFromObjectClassMap(timeline);if(!timeline.IsReleased())timeline.Release()}Trigger(method){this._runtime.Trigger(method,
this._pluginInstance,null)}GetRuntime(){return this._runtime}GetTimelineDataManager(){return this._timelineDataManager}SetPluginInstance(inst){this._pluginInstance=inst}GetPluginInstance(){return this._pluginInstance}*GetTimelines(){for(const timeline of this._timelines)yield timeline}SetTimelineObjectClassToMap(objectClass,timeline){if(!this._objectClassToTimelineMap.has(objectClass))this._objectClassToTimelineMap.set(objectClass,new Set);this._objectClassToTimelineMap.get(objectClass).add(timeline)}SetTimelineObjectClassesToMap(timeline){for(const objectClass of timeline.GetObjectClasses())this.SetTimelineObjectClassToMap(objectClass,
timeline)}RemoveTimelineFromObjectClassMap(timeline){for(const [objectClass,timelines]of this._objectClassToTimelineMap.entries())if(timelines.has(timeline)){timelines.delete(timeline);if(timelines.size===0)this._objectClassToTimelineMap.delete(objectClass)}}GetTimelinesForObjectClass(objectClass){if(!this._objectClassToTimelineMap.has(objectClass))return;return this._objectClassToTimelineMap.get(objectClass)}GetTimelineOfTemplateForInstances(templateTimeline,instancesObject){if(!instancesObject)return;
for(const timeline of this._timelines){const found=instancesObject.every(io=>{return timeline.HasTrackInstance(io.instance,io.trackId)});if(found)if(timeline.GetName().includes(templateTimeline.GetName()))return timeline}}GetTimelineByName(name){return this._timelinesByName.get(name.toLowerCase())||null}GetScheduledOrPlayingTimelineByName(name){for(const timeline of this._scheduledTimelines)if(timeline.GetName()===name)return timeline;for(const timeline of this._playingTimelines)if(timeline.GetName()===
name)return timeline;return null}*GetTimelinesByName(name){if(NAMES_REGEXP.test(name)){NAMES_REGEXP.lastIndex=0;let match;const uniqueNames=new Set;do{match=NAMES_REGEXP.exec(name);if(match){const names=match[1].split(",");for(const name of names)uniqueNames.add(name)}}while(match);for(const name of uniqueNames.values()){const timeline=this.GetTimelineByName(name);if(timeline)yield timeline}uniqueNames.clear()}else{const timeline=this.GetTimelineByName(name);if(timeline)yield timeline}}*GetTimelinesByTags(tags){for(const timeline of this._timelines)if(timeline.HasTags(tags))yield timeline}AddScheduledTimeline(timeline){if(!this._scheduledTimelines.includes(timeline))this._scheduledTimelines.push(timeline);
this._MaybeEnableRuntimeListeners()}RemovePlayingTimeline(timeline){C3.arrayFindRemove(this._playingTimelines,timeline);this._MaybeDisableRuntimeListeners()}ScheduleTimeline(timeline){if(this._playingTimelines.includes(timeline)){timeline.SetPlaying(true);timeline.SetScheduled(false);timeline.SetMarkedForRemoval(false)}else{timeline.SetPlaying(false);timeline.SetScheduled(true);timeline.SetMarkedForRemoval(false);if(!this._scheduledTimelines.includes(timeline))this._scheduledTimelines.push(timeline)}this._MaybeEnableRuntimeListeners()}DeScheduleTimeline(timeline){timeline.SetPlaying(false);
timeline.SetScheduled(false);timeline.ResolvePlayPromise();C3.arrayFindRemove(this._scheduledTimelines,timeline);this._MaybeDisableRuntimeListeners()}CompleteTimeline(timeline){timeline.SetPlaying(false);timeline.SetScheduled(false);timeline.SetMarkedForRemoval(true)}CompleteTimelineAndResolve(timeline){this.CompleteTimeline(timeline);timeline.ResolvePlayPromise()}_OnTick(){if(this.GetRuntime().IsLoadingState())return;if(!this._hasRuntimeListeners)return;if(this._changingLayout)return;let renderChange=
false;this._isTickingTimelines=true;while(this._scheduledTimelines.length){const timeline=this._scheduledTimelines.pop();timeline.SetInitialState();this._playingTimelines.push(timeline)}const dt=this._runtime.GetDt();const ts=this._runtime.GetTimeScale();for(const t of this._playingTimelines){if(t.IsMarkedForRemoval())continue;const change=t.Tick(dt,ts);if(!renderChange&&change)renderChange=true}this._isTickingTimelines=false;if(renderChange)this.GetRuntime().UpdateRender()}_OnTick2(){if(this.GetRuntime().IsLoadingState())return;
if(!this._hasRuntimeListeners)return;if(this._changingLayout)return;let timelinesToRemove;for(const t of this._playingTimelines){if(!t.IsMarkedForRemoval())continue;if(!timelinesToRemove)timelinesToRemove=new Set;this._MaybeExecuteTimelineFinishTriggers(t);timelinesToRemove.add(t)}if(timelinesToRemove)C3.arrayRemoveAllInSet(this._playingTimelines,timelinesToRemove);this._MaybeDisableRuntimeListeners()}_MaybeExecuteTimelineFinishTriggers(timeline){if(timeline.IsReleased())return;if(!timeline.HasValidTracks())return;
if(timeline.IsComplete()&&timeline.InitialStateSet())timeline.FinishTriggers()}_MaybeEnableRuntimeListeners(){if(this._hasRuntimeListeners)return;this._hasRuntimeListeners=true}_MaybeDisableRuntimeListeners(){if(this._playingTimelines.length)return;if(this._scheduledTimelines.length)return;if(this._isTickingTimelines)return;this._hasRuntimeListeners=false}_OnBeforeChangeLayout(){this._changingLayout=true;while(this._scheduledTimelines.length)this.DeScheduleTimeline(this._scheduledTimelines.pop());
const timelinesToRemove=new Set;for(const t of this._playingTimelines){const remove=t._OnBeforeChangeLayout();if(remove)timelinesToRemove.add(t)}C3.arrayRemoveAllInSet(this._playingTimelines,timelinesToRemove);this._MaybeDisableRuntimeListeners();for(const timeline of this._timelines)timeline.CleanCaches()}_OnAfterChangeLayout(){this._changingLayout=false}_OnInstanceDestroy(instance){const objectClass=instance.GetObjectClass();const timelines=this.GetTimelinesForObjectClass(objectClass);if(!timelines)return;
if(this._runtime.IsLoadingState())this._destroyedWhileLoadingState.push(instance);else for(const timeline of timelines){if(timeline.IsTemplate())continue;if(timeline.IsReleased()){this.Remove(timeline);continue}if(!timeline.HasValidTracks()){this._MaybeExecuteTimelineFinishTriggers(timeline);this.Remove(timeline)}}}_OnAfterLoad(){for(const destroyedInstance of this._destroyedWhileLoadingState)this._OnInstanceDestroy(destroyedInstance);C3.clearArray(this._destroyedWhileLoadingState)}_SaveToJson(){return{"timelinesJson":this._SaveTimelinesToJson(),
"scheduledTimelinesJson":this._SaveScheduledTimelinesToJson(),"playingTimelinesJson":this._SavePlayingTimelinesToJson(),"hasRuntimeListeners":this._hasRuntimeListeners,"changingLayout":this._changingLayout,"isTickingTimelines":this._isTickingTimelines}}_LoadFromJson(o){if(!o)return;this._ClearCreatedTemplateTimelinesCount();this._LoadTimelinesFromJson(o["timelinesJson"]);this._LoadScheduledTimelinesFromJson(o["scheduledTimelinesJson"]);this._LoadPlayingTimelinesFromJson(o["playingTimelinesJson"]);
this._hasRuntimeListeners=!o["hasRuntimeListeners"];this._changingLayout=!!o["changingLayout"];this._isTickingTimelines=!!o["isTickingTimelines"];this._SetCreatedTemplateTimelinesCount();this._MaybeEnableRuntimeListeners();this._MaybeDisableRuntimeListeners()}_SaveTimelinesToJson(){return this._timelines.map(timelineState=>timelineState._SaveToJson())}_LoadTimelinesFromJson(timelinesJson){for(const timelineJson of timelinesJson){let timeline=this.GetTimelineByName(timelineJson["name"]);if(timeline)timeline._LoadFromJson(timelineJson);
else{const templateName=this._GetTemplateNameFromJson(timelineJson);if(!templateName)continue;const templateTimeline=this.GetTimelineByName(templateName);timeline=this.CreateFromTemplate(templateTimeline);timeline._LoadFromJson(timelineJson)}if(!timeline.HasTracks())this.Remove(timeline)}}_GetTemplateNameFromJson(timelineJson){const name=timelineJson["name"];const nameParts=name.split(":");if(!nameParts||nameParts.length!==2)return null;return nameParts[0]}_SaveScheduledTimelinesToJson(){return this._SaveTimelines(this._scheduledTimelines)}_LoadScheduledTimelinesFromJson(scheduledTimelinesJson){this._LoadTimelines(scheduledTimelinesJson,
this._scheduledTimelines)}_SavePlayingTimelinesToJson(){return this._SaveTimelines(this._playingTimelines)}_LoadPlayingTimelinesFromJson(playingTimelinesJson){this._LoadTimelines(playingTimelinesJson,this._playingTimelines)}_IsTimelineInJson(timeline,json){for(const name of json)if(name===timeline.GetName())return true;return false}_SaveTimelines(collection){return collection.map(t=>t.GetName())}_LoadTimelines(timelinesJson,collection){const timelinesToRemove=new Set;for(const timeline of collection)if(!this._IsTimelineInJson(timeline,
timelinesJson))timelinesToRemove.add(timeline);C3.arrayRemoveAllInSet(collection,timelinesToRemove);const ff=tn=>t=>t.GetName()===tn;for(const name of timelinesJson){const timeline=this.GetTimelineByName(name);if(timeline){const t=collection.find(ff(name));if(!t)collection.push(timeline)}}}}};


// c3/timelines/state/timelineState.js
'use strict';{const C3=self.C3;const PING_PONG_BEGIN=0;const PING_PONG_END=1;C3.TimelineState=class Timeline extends C3.DefendedBase{constructor(name,timelineDataItem,timelineManager){super();this._runtime=timelineManager.GetRuntime();this._timelineManager=timelineManager;this._timelineDataItem=timelineDataItem;this._name=name;this._tracks=[];for(const trackDataItem of this._timelineDataItem.GetTrackData().trackDataItems())this._tracks.push(C3.TrackState.Create(this,trackDataItem));this._playPromise=
null;this._playResolve=null;this._playheadTime=C3.New(C3.KahanSum);this._playheadTime.Set(0);this._playbackRate=1;this._pingPongState=PING_PONG_BEGIN;this._currentRepeatCount=1;this._isPlaying=false;this._isScheduled=false;this._initialStateSet=false;this._complete=true;this._released=false;this._markedForRemoval=false;this._completedTick=-1;this._implicitPause=false;this._isTemplate=false;this._finishedTriggers=false;this._firstTick=false;this._lastDelta=NaN;this._tags=[""];this._stringTags="";this._tagsChanged=
false}static CreateInitial(timelineDataJson,timelineManager){const timelineDataManager=timelineManager.GetTimelineDataManager();const nameId=timelineDataManager.GetNameId();const timelineDataItem=timelineDataManager.Get(timelineDataJson[nameId]);const timeline=C3.New(C3.TimelineState,timelineDataJson[nameId],timelineDataItem,timelineManager);timeline.SetIsTemplate(true);return timeline}static CreateFromTemplate(name,timelineDataItem,timelineManager){return C3.New(C3.TimelineState,name,timelineDataItem,
timelineManager)}static get WORLD_INSTANCE_BOX_CHANGE(){return 1}static get LAYOUT_RENDER_CHANGE(){return C3.nextHighestPowerOfTwo(1)}Release(){if(this.IsReleased())return;this._timelineManager.DeScheduleTimeline(this);this._timelineManager.CompleteTimelineAndResolve(this);for(const track of this._tracks)track.Release();C3.clearArray(this._tracks);this._tracks=null;this._playheadTime.Release();this._playheadTime=null;this._runtime=null;this._timelineManager=null;this._timelineDataItem=null;this._released=
true;this._playPromise=null;this._playResolve=null}GetTimelineManager(){return this._timelineManager}GetRuntime(){return this._runtime}GetTracks(){return this._tracks}GetSimilarPropertyTracks(instance,sourceAdapter,propertyName){const ret=[];for(const track of this._tracks){if(instance!==track.GetInstance())continue;const propertyTrack=track.GetPropertyTrack(propertyName);if(!propertyTrack)continue;if(sourceAdapter.constructor!==propertyTrack.GetSourceAdapter().constructor)continue;ret.push(propertyTrack)}return ret}HasTracks(){return!!this._tracks.length}GetTrackById(trackId){for(const track of this._tracks)if(C3.equalsNoCase(track.GetId(),
trackId))return track;return null}SetName(name){this._name=name}GetName(){return this._name}GetTimelineDataItem(){return this._timelineDataItem}GetTemplateName(){return this._timelineDataItem.GetName()}GetTotalTime(){return this._timelineDataItem.GetTotalTime()}SetTotalTime(tt){this._timelineDataItem.SetTotalTime(tt)}GetStep(){return this._timelineDataItem.GetStep()}SetStep(s){this._timelineDataItem.SetStep(s)}GetInterpolationMode(){return this._timelineDataItem.GetInterpolationMode()}SetInterpolationMode(im){this._timelineDataItem.SetInterpolationMode(im)}GetResultMode(){return this._timelineDataItem.GetResultMode()}SetResultMode(rm){this._timelineDataItem.GetResultMode(rm)}SetEase(e){for(const track of this.GetTracks())track.SetEase(e)}GetLoop(){return this._timelineDataItem.GetLoop()}SetLoop(l){return this._timelineDataItem.SetLoop(l)}GetPingPong(){return this._timelineDataItem.GetPingPong()}SetPingPong(p){return this._timelineDataItem.SetPingPong(p)}GetRepeatCount(){return this._timelineDataItem.GetRepeatCount()}SetPlaybackRate(r){return this._playbackRate=
r}GetPlaybackRate(){return this._playbackRate}IsForwardPlayBack(){if(!this.IsPlaying())return true;return this._playbackRate>0}GetPlayPromise(){if(this._playPromise)return this._playPromise;this._playPromise=new Promise(resolve=>{this._playResolve=resolve});return this._playPromise}ResolvePlayPromise(){if(!this._playPromise)return;this._playResolve();this._playPromise=null;this._playResolve=null}SetTags(tags){this._tags=C3.TimelineState._GetTagArray(tags);this._tagsChanged=true}GetTags(){return this._tags}GetStringTags(){if(this._tagsChanged)this._stringTags=
this._tags.join(" ");this._tagsChanged=false;return this._stringTags}HasTags(tags){if(!this._tags)return false;if(!this._tags.length)return false;const t=C3.TimelineState._GetTagArray(tags);if(!t)return false;if(!t.length)return false;return t.every(C3.TimelineState._HasTag,this)}OnStarted(){C3.Plugins.Timeline.Cnds.SetTriggerTimeline(this);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimelineStarted);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimelineStartedByName);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimelineStartedByTags);
this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnAnyTimelineStarted);C3.Plugins.Timeline.Cnds.SetTriggerTimeline(null)}OnCompleted(){this._completedTick=this._runtime.GetTickCount()}FinishTriggers(){if(this._finishedTriggers)return;this._finishedTriggers=true;C3.Plugins.Timeline.Cnds.SetTriggerTimeline(this);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimelineFinished);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimelineFinishedByName);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimelineFinishedByTags);
this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnAnyTimelineFinished);C3.Plugins.Timeline.Cnds.SetTriggerTimeline(null)}SetPlaying(p){this._isPlaying=p}IsCompletedTick(){return this._completedTick===this._runtime.GetTickCount()}IsPlaying(playingOnly=false){if(this.IsCompletedTick())return true;if(this.IsScheduled()&&!playingOnly)return true;return this._isPlaying}_IsPlaying(){return this.IsPlaying(true)}IsPaused(){return this._IsPaused()}_IsPaused(){if(this.IsReleased())return false;if(this.IsScheduled())return false;
if(this._IsPlaying())return false;if(this.IsComplete())return false;return true}SetScheduled(s){this._isScheduled=s}IsScheduled(){return this._isScheduled}SetComplete(c){this._complete=c;const t=this.GetTime();if(t<=0||t>=this.GetTotalTime())this._complete=true}IsComplete(){return this._complete}IsReleased(){return this._released}SetMarkedForRemoval(mfr){this._markedForRemoval=mfr}IsMarkedForRemoval(){return this._markedForRemoval}SetImplicitPause(ip){this._implicitPause=ip}IsImplicitPause(){return this._implicitPause}SetIsTemplate(it){this._isTemplate=
!!it}IsTemplate(){return this._isTemplate}InitialStateSet(){return this._initialStateSet}GetTime(){return this._playheadTime.Get()}SetTime(time){const lastGlobalTime=this.GetTime();this._SetTime(time);this.SetComplete(false);if(!this.IsComplete())this.SetImplicitPause(true);if(!this._IsPlaying()&&!this.IsScheduled()&&this._initialStateSet);else if(!this._IsPlaying()&&!this.IsScheduled()&&!this._initialStateSet)this.SetInitialStateFromSetTime();else if(this._IsPlaying())this.Stop();else if(this.IsScheduled()){this._timelineManager.DeScheduleTimeline(this);
this.SetInitialStateFromSetTime()}const renderChange=this._Interpolate(time,false,true,true,lastGlobalTime);if(renderChange)this.GetRuntime().UpdateRender();this._OnSetTime()}_SetTime(time){if(time<0)this._playheadTime.Set(0);else if(time>=this.GetTotalTime())this._playheadTime.Set(this.GetTotalTime());else this._playheadTime.Set(time)}_OnSetTime(){if(!C3.Plugins.Timeline||this.constructor!==C3.TimelineState)return;C3.Plugins.Timeline.Cnds.SetTriggerTimeline(this);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimeSet);
this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimeSetByName);this._timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnTimeSetByTags);C3.Plugins.Timeline.Cnds.SetTriggerTimeline(null)}_CanResume(){if(this.GetLoop())return true;else if(this.GetPingPong()&&this._pingPongState===PING_PONG_END)if(this.IsForwardPlayBack()){if(this.GetTime()>=this.GetTotalTime())return false}else{if(this.GetTime()<=0)return false}else if(!this.GetLoop()&&!this.GetPingPong())if(this.IsForwardPlayBack()){if(this.GetTime()>=
this.GetTotalTime())return false}else if(this.GetTime()<=0)return false;return true}Resume(){if(this.IsReleased())return;if(this._CanResume())this.Play(true)}Play(resume=false){if(this.IsReleased())return false;if(this.IsScheduled())return false;if(this._IsPlaying()&&this.IsCompletedTick())return this._SchedulePlayingTimeline();if(this._IsPlaying())return false;if(!this.IsComplete()&&!resume&&!this.IsImplicitPause())return false;return this._ScheduleStoppedTimeline()}_SchedulePlayingTimeline(){this.SetImplicitPause(false);
this._timelineManager.RemovePlayingTimeline(this);this._timelineManager.ScheduleTimeline(this);this.GetPlayPromise();return true}_ScheduleStoppedTimeline(){this.SetImplicitPause(false);this._timelineManager.ScheduleTimeline(this);this.GetPlayPromise();return true}Stop(completed=false){if(this.IsReleased())return;this.SetComplete(completed);this._timelineManager.CompleteTimeline(this);if(this.IsComplete())this.ResolvePlayPromise()}Reset(render=true,beforeChangeLayout=false){if(this.IsReleased())return;
if(!this._IsPlaying()&&this.IsScheduled())return this._timelineManager.DeScheduleTimeline(this);if(this.IsComplete())return;this.Stop(true);if(this.IsForwardPlayBack())this._SetTime(0);else this._SetTime(this.GetTotalTime());let renderChange;const time=this.GetTime();if(beforeChangeLayout)renderChange=this._InterpolateBeforeChangeLayout(time);else renderChange=this._Interpolate(time,false,false,true);if(render)this._OnSetTime();if(renderChange&&render)this.GetRuntime().UpdateRender()}ResetBeforeChangeLayout(){this.Reset(false,
true)}_InterpolateBeforeChangeLayout(time){this._Interpolate(time,false,false,true,NaN,false,true)}_OnBeforeChangeLayout(){if(this.IsReleased())return true;if(this.HasValidGlobalTracks())return false;this._timelineManager.CompleteTimeline(this);this.ResetBeforeChangeLayout();return true}SetInitialStateFromSetTime(){this.SetInitialState(true)}SetInitialState(fromSetTime){if(this.IsMarkedForRemoval())return;if(fromSetTime){this._initialStateSet=true;this._firstTick=true;for(const track of this._tracks)track.SetInitialState()}else{this.SetPlaying(true);
this.SetScheduled(false);this.OnStarted();if(this.IsComplete()){this._completedTick=-1;this._pingPongState=PING_PONG_BEGIN;this._currentRepeatCount=1;this._complete=false;this._finishedTriggers=false;this._initialStateSet=true;this._firstTick=true;if(this.IsForwardPlayBack())this._SetTime(0);else this._SetTime(this.GetTotalTime());for(const track of this._tracks)track.SetInitialState()}else{this._firstTick=true;for(const track of this._tracks)track.SetResumeState()}}}Tick(deltaTime,timeScale){if(deltaTime===
0&&this._lastDelta===0)return;this._lastDelta=deltaTime;const lastTime=this.GetTime();const newDeltaTime=deltaTime*timeScale*this._playbackRate;this._SetTime(lastTime+newDeltaTime);let complete;if(!this.GetLoop()&&!this.GetPingPong())complete=this._SimpleCompleteCheck();else if(this.GetLoop()&&!this.GetPingPong())complete=this._LoopCompleteCheck();else if(!this.GetLoop()&&this.GetPingPong())complete=this._PingPongCompleteCheck();else if(this.GetLoop()&&this.GetPingPong())complete=this._LoopPingPongCompleteCheck();
if(complete){for(const track of this._tracks)track.SetEndState();this.Stop(true);this.OnCompleted();return true}else return this._Interpolate(this.GetTime(),true,false,false,lastTime,true)}_Interpolate(time,isTicking=false,setTime=false,ensureValue=false,lastTime=NaN,onTickCall=false,ignoreGlobals=false){let renderChange=false;for(const track of this._tracks)track.BeforeInterpolate();for(const track of this._tracks){let t=time;if(typeof lastTime==="number"){const globalTime=this.GetTime();const localTime=
globalTime-track.GetStartOffset();const lastLocalTime=lastTime-track.GetStartOffset();if(localTime<0&&lastLocalTime>0){t=track.GetStartOffset();this._SetTime(t)}}const change=track.Interpolate(t,isTicking,setTime,ensureValue,this._firstTick,ignoreGlobals);if(!renderChange&&change)renderChange=true}for(const track of this._tracks)track.AfterInterpolate();if(this._firstTick&&onTickCall)this._firstTick=false;return renderChange}_SimpleCompleteCheck(){if(this.IsForwardPlayBack()){if(this.GetTime()>=this.GetTotalTime())if(this._currentRepeatCount<
this.GetRepeatCount()){this._currentRepeatCount++;this._SetTime(0)}else{this._SetTime(this.GetTotalTime());return true}}else if(this.GetTime()<=0)if(this._currentRepeatCount<this.GetRepeatCount()){this._currentRepeatCount++;this._SetTime(this.GetTotalTime())}else{this._SetTime(0);return true}return false}_LoopCompleteCheck(){if(this.IsForwardPlayBack()){if(this.GetTime()>=this.GetTotalTime())this._SetTime(0)}else if(this.GetTime()<=0)this._SetTime(this.GetTotalTime());return false}_PingPongCompleteCheck(){if(this.IsForwardPlayBack()){if(this.GetTime()>=
this.GetTotalTime()){this._SetTime(this.GetTotalTime());this.SetPlaybackRate(this.GetPlaybackRate()*-1);if(this._pingPongState===PING_PONG_END)if(this._currentRepeatCount<this.GetRepeatCount()){this._currentRepeatCount++;this._pingPongState=PING_PONG_BEGIN}else return true;else if(this._pingPongState===PING_PONG_BEGIN)this._pingPongState=PING_PONG_END}}else if(this.GetTime()<=0){this._SetTime(0);this.SetPlaybackRate(this.GetPlaybackRate()*-1);if(this._pingPongState===PING_PONG_END)if(this._currentRepeatCount<
this.GetRepeatCount()){this._currentRepeatCount++;this._pingPongState=PING_PONG_BEGIN}else return true;else if(this._pingPongState===PING_PONG_BEGIN)this._pingPongState=PING_PONG_END}return false}_LoopPingPongCompleteCheck(){if(this.IsForwardPlayBack()){if(this.GetTime()>=this.GetTotalTime()){this._SetTime(this.GetTotalTime());this.SetPlaybackRate(this.GetPlaybackRate()*-1)}}else if(this.GetTime()<=0){this._SetTime(0);this.SetPlaybackRate(this.GetPlaybackRate()*-1)}return false}AddTrack(){const trackDataItem=
this._timelineDataItem.GetTrackData().AddEmptyTrackDataItem();const track=C3.TrackState.Create(this,trackDataItem);this._tracks.push(track);return track}CleanCaches(){for(const track of this._tracks)track.CleanCaches()}ClearTrackInstances(){for(const track of this._tracks)track.ClearInstance()}SetTrackInstance(trackId,instance){if(!instance)return;for(const track of this._tracks)if(trackId){if(track.GetId()!==trackId)continue;track.SetInstance(instance);this._timelineManager.SetTimelineObjectClassToMap(instance.GetObjectClass(),
this);break}else{if(track.HasInstance())continue;track.SetInstance(instance);this._timelineManager.SetTimelineObjectClassToMap(instance.GetObjectClass(),this);break}}HasTrackInstance(instance,trackId){for(const track of this._tracks)if(trackId){if(trackId===track.GetId()&&instance===track.GetInstance())return true}else if(instance===track.GetInstance())return true;return false}HasValidTracks(){return this._tracks.some(t=>t.CanInstanceBeValid())}HasValidGlobalTracks(){return this._tracks.some(t=>{if(!t.CanInstanceBeValid())return false;
const objectClass=t.GetObjectClass();if(!objectClass)return false;return objectClass.IsGlobal()})}GetPropertyTrack(propertyName){for(const track of this.GetTracks())for(const propertyTrack of track.GetPropertyTracks())if(propertyTrack.GetPropertyName()===propertyName)return propertyTrack}GetKeyframeWithTags(tags){let tagsArray=tags?tags.split(" "):[];const tagsSet=new Set(tagsArray.map(t=>t.toLowerCase().trim()));tagsArray=[...tagsSet.values()];for(const track of this.GetTracks())for(const keyframeDataItem of track.GetKeyframeDataItems()){const hasAllTags=
tagsArray.every(t=>keyframeDataItem.HasTag(t));if(hasAllTags)return keyframeDataItem}}GetObjectClasses(){const ret=[];for(const track of this.GetTracks())ret.push(track.GetObjectClass());return ret.filter(oc=>oc)}_SaveToJson(){return{"tracksJson":this._SaveTracksToJson(),"name":this._name,"playheadTime":this.GetTime(),"playbackRate":this._playbackRate,"pingPongState":this._pingPongState,"currentRepeatCount":this._currentRepeatCount,"isPlaying":this._isPlaying,"isScheduled":this._isScheduled,"initialStateSet":this._initialStateSet,
"finishedTriggers":this._finishedTriggers,"complete":this._complete,"released":this._released,"markedForRemoval":this._markedForRemoval,"completedTick":this._completedTick,"implicitPause":this._implicitPause,"isTemplate":this._isTemplate,"tags":this._tags.join(" "),"stringTags":this._stringTags,"tagsChanged":this._tagsChanged,"firstTick":this._firstTick}}_LoadFromJson(o){if(!o)return;this._LoadTracksFromJson(o["tracksJson"]);this._name=o["name"];this._playheadTime.Set(o["playheadTime"]);this._playbackRate=
o["playbackRate"];this._pingPongState=o["pingPongState"];this._currentRepeatCount=o["currentRepeatCount"];this._isPlaying=!!o["isPlaying"];this._isScheduled=!!o["isScheduled"];this._initialStateSet=!!o["initialStateSet"];this._finishedTriggers=o.hasOwnProperty("finishedTriggers")?!!o["finishedTriggers"]:false;this._complete=!!o["complete"];this._released=!!o["released"];this._markedForRemoval=!!o["markedForRemoval"];this._completedTick=o["completedTick"];this._implicitPause=!!o["implicitPause"];this._isTemplate=
!!o["isTemplate"];this._tags=o["tags"].split(" ");this._stringTags=o["stringTags"];this._tagsChanged=!!o["tagsChanged"];this._firstTick=!!o["firstTick"]}_SaveTracksToJson(){return this._tracks.map(trackState=>trackState._SaveToJson())}_LoadTracksFromJson(tracksJson){tracksJson.forEach((trackJson,i)=>{const track=this._tracks[i];track._LoadFromJson(trackJson)});this._tracks.filter(track=>track.CanInstanceBeValid())}static _HasTag(tag){const tags=this.GetTags();if(tag==="")return tags.length===1&&tags[0]===
"";return tags.includes(tag)}static _GetTagArray(tags){if(C3.IsArray(tags))return tags.slice(0);if(C3.IsString(tags))return tags.split(" ")}}};


// c3/timelines/state/trackState.js
'use strict';{const C3=self.C3;C3.TrackState=class Track extends C3.DefendedBase{constructor(timeline,trackDataItem){super();this._timeline=timeline;this._trackDataItem=trackDataItem;this._trackData=trackDataItem.GetTrackData();this._instanceUid=NaN;this._objectClassIndex=NaN;this._instance=null;this._worldInfo=null;this._isNested=trackDataItem.GetStartOffset()>0;this._initialStateOfNestedSet=false;this._endStateOfNestedSet=false;this._lastKeyframeDataItem=null;this._keyframeDataItems=this._trackDataItem.GetKeyframeData().GetKeyframeDataItemArray();
this._propertyTracks=[];for(const propertyTrackDataItem of this._trackDataItem.GetPropertyTrackData().propertyTrackDataItems())this._propertyTracks.push(C3.PropertyTrackState.Create(this,propertyTrackDataItem))}static Create(timeline,trackDataItem){return C3.New(C3.TrackState,timeline,trackDataItem)}Release(){this._keyframeDataItems=null;for(const propertyTrack of this._propertyTracks)propertyTrack.Release();C3.clearArray(this._propertyTracks);this._propertyTracks=null;this._timeline=null;this._instance=
null;this._worldInfo=null;this._trackDataItem=null;this._lastKeyframeDataItem=null}CleanCaches(){for(const propertyTrack of this._propertyTracks)propertyTrack.CleanCaches();this._instance=null;this._worldInfo=null}GetTimeline(){return this._timeline}GetRuntime(){return this._timeline.GetRuntime()}GetKeyframeDataItems(){if(this._keyframeDataItems)return this._keyframeDataItems;this._keyframeDataItems=this._trackDataItem.GetKeyframeData().GetKeyframeDataItemArray();return this._keyframeDataItems}GetPropertyTracks(){return this._propertyTracks}GetPropertyTrack(propertyName){for(const propertyTrack of this._propertyTracks)if(propertyTrack.GetPropertyName()===
propertyName)return propertyTrack}MaybeGetInstance(){if(!this._instance)this.GetInstance()}IsInstanceValid(){if(!this._instance)return false;return!this._instance.IsDestroyed()}CanInstanceBeValid(){const uid=this.GetInstanceUID();const instance=this.GetRuntime().GetInstanceByUID(uid);if(!instance)return false;return!instance.IsDestroyed()}GetObjectClass(){const index=this.GetObjectClassIndex();if(index===-1)return;return this.GetRuntime().GetObjectClassByIndex(index)}ClearInstance(){this._instance=
null;this._instanceUid=-1;this._worldInfo=null;this._objectClassIndex=-1}HasInstance(){return!!this._instance}GetInstance(){if(this._instance&&this.IsInstanceValid())return this._instance;const uid=this.GetInstanceUID();this._instance=this.GetRuntime().GetInstanceByUID(uid);return this._instance}SetInstance(instance){if(this._instance===instance)return;this.CleanCaches();this._instance=instance;this._objectClassIndex=instance.GetObjectClass().GetIndex();this._instanceUid=instance.GetUID();this._worldInfo=
instance.GetWorldInfo();for(const item of this.propertyTrackItems()){const propertyTrack=item.propertyTrack;const sourceAdapter=item.sourceAdapter;const id=propertyTrack.GetSourceAdapterId();switch(id){case "instance-variable":{const index=sourceAdapter.GetEditorIndex();const objectClass=instance.GetObjectClass();const i=objectClass.GetInstanceVariableIndexByName(item.name);const name=objectClass.GetInstanceVariableName(i);const type=objectClass.GetInstanceVariableType(i);if(name===item.name&&type===
item.type)sourceAdapter.UpdateInstanceVariableIndex(i);break}case "behavior":{const timelineBehaviorType=item.behaviorType;const trackObjectClass=this.GetObjectClass();const objectClass=instance.GetObjectClass();const instanceBehaviorType=sourceAdapter.GetBehaviorType(objectClass);if(timelineBehaviorType&&instanceBehaviorType){const name=timelineBehaviorType.GetName();const templateBehaviorIndex=trackObjectClass.GetBehaviorIndexByName(name);const instanceBehaviorIndex=objectClass.GetBehaviorIndexByName(name);
const propertyIndex=sourceAdapter.GetEditorIndex();sourceAdapter.UpdateBehaviorTypeSid(instanceBehaviorType.GetSID())}break}}}}*propertyTrackItems(){for(const propertyTrack of this._propertyTracks){const sourceAdapter=propertyTrack.GetSourceAdapter();const objectClass=this.GetObjectClass();const ret={propertyTrack:propertyTrack,sourceAdapter:sourceAdapter};switch(propertyTrack.GetSourceAdapterId()){case "world-instance":{ret.property=propertyTrack.GetPropertyName();break}case "instance-variable":{const index=
sourceAdapter.GetEditorIndex();ret.name=objectClass.GetInstanceVariableName(index);ret.type=objectClass.GetInstanceVariableType(index);break}case "effect":{const effectList=objectClass.GetEffectList();const effectType=sourceAdapter.GetEffectType(effectList);ret.effectType=effectType;break}case "behavior":{const behaviorType=sourceAdapter.GetBehaviorType(objectClass);ret.behaviorType=behaviorType;break}case "plugin":{ret.plugin=objectClass.GetPlugin();break}}yield ret}}GetWorldInfo(){if(this._worldInfo&&
this.IsInstanceValid())return this._worldInfo;const instance=this.GetInstance();if(instance)this._worldInfo=instance.GetWorldInfo();return this._worldInfo}GetTrackDataItem(){return this._trackDataItem}GetInstanceUID(){if(this._instanceUid)return this._instanceUid;return this._trackDataItem.GetInstanceUID()}SetInstanceUID(uid){this._trackDataItem.SetInstanceUID(uid)}GetInterpolationMode(){return this._trackDataItem.GetInterpolationMode()}SetInterpolationMode(im){this._trackDataItem.SetInterpolationMode(im)}GetResultMode(){return this._trackDataItem.GetResultMode()}GetId(){return this._trackDataItem.GetId()}GetStartOffset(){return this._trackDataItem.GetStartOffset()}GetLocalTotalTime(){return this._trackDataItem.GetLocalTotalTime()}SetResultMode(rm){this._trackDataItem.SetResultMode(rm)}SetEase(e){for(const keyframeDataItem of this.GetKeyframeDataItems())keyframeDataItem.SetEase(e);
for(const propertyTrack of this.GetPropertyTracks())propertyTrack.SetEase(e)}GetEnable(){return this._trackDataItem.GetEnable()}SetEnable(e){this._trackDataItem.SetEnable(e)}GetObjectClassIndex(){if(!isNaN(this._objectClassIndex))return this._objectClassIndex;return this._trackDataItem.GetObjectClassIndex()}SetObjectClassIndex(objectClassIndex){this._trackDataItem.SetObjectClassIndex(objectClassIndex)}SetOriginalWidth(w){this._trackDataItem.SetOriginalWidth(w)}GetOriginalWidth(){return this._trackDataItem.GetOriginalWidth()}SetOriginalHeight(h){this._trackDataItem.SetOriginalHeight(h)}GetOriginalHeight(){return this._trackDataItem.GetOriginalHeight()}SetInitialState(){this.MaybeGetInstance();
if(!this.IsInstanceValid())return;for(const propertyTrack of this._propertyTracks)propertyTrack.SetInitialState();const timeline=this.GetTimeline();const isForwardPlayBack=timeline.IsForwardPlayBack();const time=isForwardPlayBack?0:this.GetLocalTotalTime();this._lastKeyframeDataItem=this.GetLastKeyFrameBeforeTime(time);this._initialStateOfNestedSet=false;this._endStateOfNestedSet=false;this.Interpolate(time)}SetResumeState(){this.MaybeGetInstance();if(!this.IsInstanceValid())return;const playbackDirection=
this._timeline.IsForwardPlayBack();const time=this._timeline.GetTime()-this.GetStartOffset();this._lastKeyframeDataItem=this.GetLastKeyFrameBeforeTime(time);for(const propertyTrack of this._propertyTracks)propertyTrack.SetResumeState()}SetEndState(){if(this.GetTimeline().IsComplete())return;this.MaybeGetInstance();if(!this.IsInstanceValid())return;if(!this._isNested){const time=this._timeline.GetTime();const totalTime=this.GetStartOffset()+this.GetLocalTotalTime();if(time>=totalTime)this.Interpolate(this.GetLocalTotalTime(),
true,false,true);else if(time<=0)this.Interpolate(0,true,false,true)}}BeforeInterpolate(){for(const propertyTrack of this._propertyTracks)propertyTrack.BeforeInterpolate()}Interpolate(time,isTicking=false,setTime=false,ensureValue=false,firstTick=false,ignoreGlobals=false){this.MaybeGetInstance();if(!this.IsInstanceValid())return false;if(ignoreGlobals&&this.GetObjectClass().IsGlobal())return false;time=time-this.GetStartOffset();if(time<0)return false;this.MaybeSetInitialStateOfNestedTrack(time,
isTicking);this.MaybeTriggerKeyframeReachedConditions(time,isTicking,firstTick);let boxChange=false;let renderChange=false;for(const propertyTrack of this._propertyTracks){const change=propertyTrack.Interpolate(time,setTime,false,ensureValue);if(!boxChange&&(change&C3.TimelineState.WORLD_INSTANCE_BOX_CHANGE)!==0)boxChange=true;if(!renderChange&&(change&C3.TimelineState.LAYOUT_RENDER_CHANGE)!==0)renderChange=true}this.MaybeSetEndStateOfNestedTrack(time,isTicking);if(boxChange){const worldInfo=this.GetWorldInfo();
if(worldInfo)worldInfo.SetBboxChanged()}return renderChange}AfterInterpolate(){for(const propertyTrack of this._propertyTracks)propertyTrack.AfterInterpolate()}MaybeSetInitialStateOfNestedTrack(time,isTicking){if(!isTicking)return;if(!this._isNested)return;if(this._initialStateOfNestedSet)return;const timeline=this.GetTimeline();if(timeline.IsForwardPlayBack()){if(time<0)return;for(const propertyTrack of this._propertyTracks)propertyTrack.Interpolate(0,false,false,true)}else{if(time>this.GetLocalTotalTime())return;
for(const propertyTrack of this._propertyTracks)propertyTrack.Interpolate(this.GetLocalTotalTime(),false,false,true)}for(const propertyTrack of this._propertyTracks)propertyTrack.SetInitialState();this._initialStateOfNestedSet=true}MaybeSetEndStateOfNestedTrack(time,isTicking){if(!isTicking)return;if(!this._isNested)return;if(this._endStateOfNestedSet)return;const timeline=this.GetTimeline();if(timeline.IsForwardPlayBack()){if(time>=this.GetLocalTotalTime()){for(const propertyTrack of this._propertyTracks)propertyTrack.Interpolate(this.GetLocalTotalTime(),
false,false,true);this._endStateOfNestedSet=true}}else if(time<=0){for(const propertyTrack of this._propertyTracks)propertyTrack.Interpolate(0,false,false,true);this._endStateOfNestedSet=true}}MaybeTriggerKeyframeReachedConditions(time,isTicking,firstTick){if(firstTick)return;if(!isTicking)return;let keyframeDataItem=this.GetLastKeyFrameBeforeTime(time);if(keyframeDataItem!==this._lastKeyframeDataItem)this.OnKeyframeReached(keyframeDataItem);this._lastKeyframeDataItem=keyframeDataItem;return keyframeDataItem}GetLastKeyFrameBeforeTime(time){const timeline=
this.GetTimeline();let keyframeDataItem=this._trackData.GetKeyFrameDataItemAtTime(time,this._trackDataItem);if(keyframeDataItem)return keyframeDataItem;else if(timeline.IsForwardPlayBack())return this._trackData.GetFirstKeyFrameDataItemLowerOrEqualThan(time,this._trackDataItem);else return this._trackData.GetFirstKeyFrameDataItemHigherOrEqualThan(time,this._trackDataItem)}OnKeyframeReached(keyframeDataItem){if(!C3.Plugins.Timeline||this.GetTimeline().constructor!==C3.TimelineState)return;const timeline=
this.GetTimeline();C3.Plugins.Timeline.Cnds.SetTriggerTimeline(timeline);C3.Plugins.Timeline.Cnds.SetTriggerKeyframe(keyframeDataItem);const timelineManager=timeline.GetTimelineManager();timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnAnyKeyframeReached);timelineManager.Trigger(C3.Plugins.Timeline.Cnds.OnKeyframeReached);C3.Plugins.Timeline.Cnds.SetTriggerTimeline(null);C3.Plugins.Timeline.Cnds.SetTriggerKeyframe(null)}AddKeyframe(){const keyframeData=this._trackDataItem.GetKeyframeData();const keyframeDataItem=
keyframeData.AddEmptyKeyframeDataItem();return keyframeDataItem}AddPropertyTrack(){const propertyTrackData=this._trackDataItem.GetPropertyTrackData();const propertyTrackDataItem=propertyTrackData.AddEmptyPropertyTrackDataItem();const propertyTrack=C3.PropertyTrackState.Create(this,propertyTrackDataItem);this._propertyTracks.push(propertyTrack);return propertyTrack}DeleteKeyframes(match){const keyframeData=this._trackDataItem.GetKeyframeData();keyframeData.DeleteKeyframeDataItems(match)}DeletePropertyKeyframes(match){for(const propertyTrack of this._propertyTracks)propertyTrack.DeletePropertyKeyframes(match)}SaveState(){for(const propertyTrack of this._propertyTracks)propertyTrack.SaveState()}CompareInitialStateWithCurrent(){this.MaybeGetInstance();
if(!this.IsInstanceValid())return;for(const propertyTrack of this._propertyTracks)propertyTrack.CompareInitialStateWithCurrent()}CompareSaveStateWithCurrent(){this.MaybeGetInstance();if(!this.IsInstanceValid())return;let difference=false;for(const propertyTrack of this._propertyTracks){const diff=propertyTrack.CompareSaveStateWithCurrent();if(!difference&&diff)difference=true}if(difference){const keyframeDataItem=this.AddKeyframe();keyframeDataItem.SetTime(this.GetTimeline().GetTime());keyframeDataItem.SetEase("noease");
keyframeDataItem.SetEnable(true);keyframeDataItem.SetTags("")}}_SaveToJson(){const instance=this.GetInstance();const uid=instance?instance.GetUID():this.GetInstanceUID();return{"propertyTracksJson":this._SavePropertyTracksToJson(),"lastKeyframeDataItemJson":this._SaveLastKeyframeDataItemToJson(),"initialStateOfNestedSet":this._initialStateOfNestedSet,"endStateOfNestedSet":this._endStateOfNestedSet,"instanceUid":uid}}_LoadFromJson(o){if(!o)return;this._LoadPropertyTracksFromJson(o["propertyTracksJson"]);
this._LoadLastKeyframeDataItemFromJson(o["lastKeyframeDataItemJson"]);this._LoadInstanceFromJson(o["instanceUid"]);this._initialStateOfNestedSet=false;if(o.hasOwnProperty["initialStateOfNestedSet"])this._initialStateOfNestedSet=o["initialStateOfNestedSet"];this._endStateOfNestedSet=false;if(o.hasOwnProperty["endStateOfNestedSet"])this._endStateOfNestedSet=o["endStateOfNestedSet"]}_SaveLastKeyframeDataItemToJson(){const keyframeData=this._trackDataItem.GetKeyframeData();return keyframeData.GetKeyframeDataItemIndex(this._lastKeyframeDataItem)}_SavePropertyTracksToJson(){return this._propertyTracks.map(propertyTrackState=>
propertyTrackState._SaveToJson())}_LoadPropertyTracksFromJson(propertyTracksJson){propertyTracksJson.forEach((propertyTrackJson,i)=>{const propertyTrack=this._propertyTracks[i];propertyTrack._LoadFromJson(propertyTrackJson)})}_LoadInstanceFromJson(uid){if(!C3.IsFiniteNumber(uid))return;const instance=this.GetRuntime().GetInstanceByUID(uid);if(!instance)return;const timeline=this.GetTimeline();timeline.ClearTrackInstances();timeline.SetTrackInstance(this._trackDataItem.GetId(),instance)}_LoadLastKeyframeDataItemFromJson(lastKeyframeDataItemIndex){const keyframeData=
this._trackDataItem.GetKeyframeData();this._lastKeyframeDataItem=keyframeData.GetKeyframeDataItemFromIndex(lastKeyframeDataItemIndex)}}};


// c3/timelines/state/propertyTrackState.js
'use strict';{const C3=self.C3;C3.PropertyTrackState=class PropertyTrack extends C3.DefendedBase{constructor(track,propertyTrackDataItem){super();this._track=track;this._propertyTrackDataItem=propertyTrackDataItem;this._propertyTrackData=propertyTrackDataItem.GetPropertyTrackData();this._sourceAdapter=this.GetSourceAdapter();this._propertyKeyframeDataItems=this._propertyTrackDataItem.GetPropertyKeyframeData().GetPropertyKeyframeDataItemArray()}static Create(track,propertyTrackDataItem){return C3.New(C3.PropertyTrackState,
track,propertyTrackDataItem)}Release(){this._track=null;if(this._sourceAdapter){this._sourceAdapter.Release();this._sourceAdapter=null}this._propertyKeyframeDataItems=null;this._propertyTrackDataItem=null;this._propertyTrackData=null}GetTrack(){return this._track}GetPropertyTrackDataItem(){return this._propertyTrackDataItem}GetPropertyTrackData(){return this._propertyTrackData}GetTimeline(){return this._track.GetTimeline()}GetRuntime(){return this._track.GetRuntime()}GetInstance(){return this._track.GetInstance()}GetSourceAdapter(){if(this._sourceAdapter)return this._sourceAdapter;
const id=this._propertyTrackDataItem.GetSourceAdapterId();let ret;switch(id){case "behavior":ret=new C3.PropertyTrackState.BehaviorSourceAdapter(this);break;case "effect":ret=new C3.PropertyTrackState.EffectSourceAdapter(this);break;case "instance-variable":ret=new C3.PropertyTrackState.InstanceVariableSourceAdapter(this);break;case "plugin":ret=new C3.PropertyTrackState.PluginSourceAdapter(this);break;case "world-instance":ret=new C3.PropertyTrackState.WorldInstanceSourceAdapter(this);break;case "value":ret=
new C3.PropertyTrackState.ValueSourceAdapter(this);break}this._sourceAdapter=ret;return this._sourceAdapter}GetSourceAdapterId(){return this._propertyTrackDataItem.GetSourceAdapterId()}SetSourceAdapterId(said){this._propertyTrackDataItem.SetSourceAdapterId(said)}GetSourceAdapterArgs(){return this._propertyTrackDataItem.GetSourceAdapterArguments()}SetSourceAdapterArgs(sargs){this._propertyTrackDataItem.SetSourceAdapterArguments(sargs)}GetSourceAdapterValue(){return this.GetSourceAdapter().GetValue()}GetPropertyName(){return this._propertyTrackDataItem.GetProperty()}SetPropertyName(pn){this._propertyTrackDataItem.SetProperty(pn)}GetPropertyType(){return this._propertyTrackDataItem.GetType()}SetPropertyType(pt){this._propertyTrackDataItem.SetType(pt)}GetPropertyKeyframeType(){return this.GetPropertyTrackData().GetFirstPropertyKeyframeDataItem(this._propertyTrackDataItem).GetType()}GetMin(){return this._propertyTrackDataItem.GetMin()}SetMin(min){this._propertyTrackDataItem.SetMin(min)}GetMax(){return this._propertyTrackDataItem.GetMax()}SetMax(max){this._propertyTrackDataItem.SetMax(max)}GetEnable(){return this._propertyTrackDataItem.GetEnable()}SetEnable(e){this._propertyTrackDataItem.SetEnable(e)}GetInterpolationMode(){return this._propertyTrackDataItem.GetInterpolationMode()}SetInterpolationMode(im){this._propertyTrackDataItem.SetInterpolationMode(im)}GetResultMode(){return this._propertyTrackDataItem.GetResultMode()}SetResultMode(rm){this._propertyTrackDataItem.SetResultMode(rm)}SetEase(e){for(const propertyKeyframeDataItem of this.GetPropertyKeyframeDataItems())propertyKeyframeDataItem.SetEase(e)}GetPropertyKeyframeDataItems(){if(this._propertyKeyframeDataItems)return this._propertyKeyframeDataItems;
this._propertyKeyframeDataItems=this._propertyTrackDataItem.GetPropertyKeyframeData().GetPropertyKeyframeDataItemArray();return this._propertyKeyframeDataItems}*GetPropertyKeyframeValues(){for(const propertyKeyframeDataItem of this.GetPropertyKeyframeDataItems())yield propertyKeyframeDataItem.GetValueWithResultMode()}CleanCaches(){this.GetSourceAdapter().CleanCaches()}GetCurrentState(){return this.GetSourceAdapter().GetCurrentState()}SetInitialState(){this.GetSourceAdapter().SetInitialState()}SetResumeState(){this.GetSourceAdapter().SetResumeState()}BeforeInterpolate(){this.GetSourceAdapter().BeforeInterpolate()}Interpolate(time,
setTime=false,noChange=false,ensureValue=false){const propertyTrackDataItem=this._propertyTrackDataItem;let start=this._propertyTrackData.GetPropertyKeyFrameDataItemAtTime(time,propertyTrackDataItem);let end;if(start)end=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemHigherThan(time,propertyTrackDataItem);else{start=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,propertyTrackDataItem);end=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemHigherOrEqualThan(time,
propertyTrackDataItem)}return this.GetSourceAdapter().Interpolate(time,start,end,setTime,noChange,ensureValue)}AfterInterpolate(){this.GetSourceAdapter().AfterInterpolate()}static GetStartPropertyKeyframeForTime(time,propertyTrack){const propertyTrackDataItem=propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=propertyTrack._propertyTrackData;let start=propertyTrackData.GetPropertyKeyFrameDataItemAtTime(time,propertyTrackDataItem);if(!start)start=propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,
propertyTrackDataItem);return start}static GetEndPropertyKeyframeForTime(time,propertyTrack){const propertyTrackDataItem=propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=propertyTrack._propertyTrackData;let end=propertyTrackData.GetPropertyKeyFrameDataItemAtTime(time,propertyTrackDataItem);if(end)return propertyTrackData.GetFirstPropertyKeyFrameDataItemHigherThan(time,propertyTrackDataItem);else return propertyTrackData.GetFirstPropertyKeyFrameDataItemHigherOrEqualThan(time,propertyTrackDataItem)}AddPropertyKeyframe(){const propertyKeyframeData=
this._propertyTrackDataItem.GetPropertyKeyframeData();const propertyKeyframeDataItem=propertyKeyframeData.AddEmptyPropertyKeyframeDataItem();return propertyKeyframeDataItem}DeletePropertyKeyframes(match){const propertyKeyframeData=this._propertyTrackDataItem.GetPropertyKeyframeData();propertyKeyframeData.DeletePropertyKeyframeDataItems(match)}SaveState(){this.GetSourceAdapter().SaveState()}CompareInitialStateWithCurrent(){const difference=this.GetSourceAdapter().CompareInitialStateWithCurrent();if(difference){const propertyKeyframeDataItem=
this._propertyTrackData.GetFirstPropertyKeyframeDataItem(this._propertyTrackDataItem);const currentState=this.GetSourceAdapter().GetCurrentState();propertyKeyframeDataItem.SetAbsoluteValue(currentState)}}CompareSaveStateWithCurrent(){const difference=this.GetSourceAdapter().CompareSaveStateWithCurrent();if(difference)this.AddPropertyKeyframeAtCurrentTime();this.GetSourceAdapter().ClearSaveState();return difference}AddPropertyKeyframeAtCurrentTime(){const time=this.GetTimeline().GetTime();const sourceAdapter=
this.GetSourceAdapter();const startPropertyKeyframe=C3.PropertyTrackState.GetStartPropertyKeyframeForTime(time,this);const propertyKeyframeDataItem=this.AddPropertyKeyframe();propertyKeyframeDataItem.SetType(startPropertyKeyframe.GetType());propertyKeyframeDataItem.SetTime(time);propertyKeyframeDataItem.SetEase(startPropertyKeyframe.GetEase());propertyKeyframeDataItem.SetEnable(true);propertyKeyframeDataItem.SetValue(sourceAdapter.GetValueAtTime());propertyKeyframeDataItem.SetAbsoluteValue(sourceAdapter.GetCurrentState())}_SaveToJson(){return{"sourceAdapterJson":this.GetSourceAdapter()._SaveToJson()}}_LoadFromJson(o){if(!o)return;
this.GetSourceAdapter()._LoadFromJson(o["sourceAdapterJson"])}}};


// c3/timelines/state/propertySourceAdapters/propertySourceAdapter.js
'use strict';{const C3=self.C3;const NS=C3.PropertyTrackState;NS.PropertySourceAdapter=class PropertySourceAdapter{constructor(propertyTrack){this._propertyTrack=propertyTrack;this._propertyAdapter=null}Release(){if(this._propertyAdapter){this._propertyAdapter.Release();this._propertyAdapter=null}this._propertyTrack=null}GetPropertyTrack(){return this._propertyTrack}CleanCaches(){if(this._propertyAdapter)this._propertyAdapter.CleanCaches()}GetPropertyAdapter(){if(this._propertyAdapter)return this._propertyAdapter;
this._propertyAdapter=this._CreatePropertyAdapter();return this._propertyAdapter}GetEditorIndex(){}GetIndex(){return this.GetEditorIndex()}GetTarget(){}SetInitialState(){this.GetPropertyAdapter().SetInitialState()}SetResumeState(){this.GetPropertyAdapter().SetResumeState()}BeforeInterpolate(){this.GetPropertyAdapter().BeforeChangeProperty()}Interpolate(time,start,end,setTime,noChange,ensureValue){const interpolateFunc=NS.PropertySourceAdapter.GetInterpolateFunc(this._propertyTrack);const value=interpolateFunc(time,
start,end,this._propertyTrack);if(noChange)return value;return this.GetPropertyAdapter().ChangeProperty(time,value,start,end,setTime,ensureValue)}AfterInterpolate(){this.GetPropertyAdapter().AfterChangeProperty()}SaveState(){this.GetPropertyAdapter().SetSaveState()}ClearSaveState(){this.GetPropertyAdapter().ClearSaveState()}GetCurrentState(){return this.GetPropertyAdapter().GetCurrentState()}CompareInitialStateWithCurrent(){return this.GetPropertyAdapter().CompareInitialStateWithCurrent()}CompareSaveStateWithCurrent(){return this.GetPropertyAdapter().CompareSaveStateWithCurrent()}GetValueAtTime(){return NS.PropertySourceAdapter.GetValueAtTime(this._propertyTrack)}_CreatePropertyAdapter(){const propertyType=
this._propertyTrack.GetPropertyType();const keyframePropertyType=this._propertyTrack.GetPropertyKeyframeType();switch(keyframePropertyType){case "combo":case "boolean":case "text":case "string":{return new NS.PropertyInterpolationAdapter.NoInterpolationAdapter(this)}case "numeric":case "number":case "angle":{if(propertyType==="combo")return new NS.PropertyInterpolationAdapter.NoInterpolationAdapter(this);return new NS.PropertyInterpolationAdapter.NumericInterpolationAdapter(this)}case "color":case "offsetColor":{return new NS.PropertyInterpolationAdapter.ColorInterpolationAdapter(this)}}}_SaveToJson(){return{"propertyAdapterJson":this.GetPropertyAdapter()._SaveToJson()}}_LoadFromJson(o){if(!o)return;
this.GetPropertyAdapter()._LoadFromJson(o["propertyAdapterJson"])}static GetValueAtTime(propertyTrack){const track=propertyTrack.GetTrack();const time=track.GetTimeline().GetTime();const start=NS.GetStartPropertyKeyframeForTime(time,propertyTrack);const end=NS.GetEndPropertyKeyframeForTime(time,propertyTrack);const interpolateFunc=NS.PropertySourceAdapter.GetInterpolateFunc(propertyTrack);return interpolateFunc(time,start,end,propertyTrack)}static GetValue(propertyTrack,initialValue,value){let resultMode=
propertyTrack.GetResultMode();if(propertyTrack.GetPropertyType()==="combo")resultMode="absolute";switch(resultMode){case "relative":return initialValue+value;case "absolute":return value}}static GetInterpolateFunc(propertyTrack){const type=propertyTrack.GetPropertyKeyframeType();switch(type){case "numeric":return NS.NumericTypeAdapter.Interpolate;case "angle":return NS.AngleTypeAdapter.Interpolate;case "boolean":return NS.BooleanTypeAdapter.Interpolate;case "color":return NS.ColorTypeAdapter.Interpolate;
case "text":return NS.TextTypeAdapter.Interpolate}}static GetWillChangeFunc(propertyTrack){const type=propertyTrack.GetPropertyKeyframeType();switch(type){case "numeric":return NS.NumericTypeAdapter.WillChange;case "angle":return NS.AngleTypeAdapter.WillChange;case "boolean":return NS.BooleanTypeAdapter.WillChange;case "color":return NS.ColorTypeAdapter.WillChange;case "text":return NS.TextTypeAdapter.WillChange}}}};


// c3/timelines/state/propertySourceAdapters/worldInstanceSourceAdapter.js
'use strict';{const C3=self.C3;class WorldInstanceSourceAdapter extends C3.PropertyTrackState.PropertySourceAdapter{constructor(propertyTrack){super(propertyTrack)}}C3.PropertyTrackState.WorldInstanceSourceAdapter=WorldInstanceSourceAdapter};


// c3/timelines/state/propertySourceAdapters/instanceVariableSourceAdapter.js
'use strict';{const C3=self.C3;const INDEX=0;class InstanceVariableSourceAdapter extends C3.PropertyTrackState.PropertySourceAdapter{constructor(propertyTrack){super(propertyTrack);this._updatedIndex=NaN}GetEditorIndex(){return this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[INDEX]}GetIndex(){if(this._updatedIndex)return this._updatedIndex;return super.GetIndex()}GetTarget(){return this._propertyTrack.GetTrack().GetInstance()}UpdateInstanceVariableIndex(index){const i=this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[INDEX];
if(i===index)return;this._updatedIndex=index}Interpolate(time,start,end,setTime,noChange,ensureValue){if(!this.GetPropertyAdapter().CanChange(start.GetValue()))return;return super.Interpolate(time,start,end,setTime,noChange,ensureValue)}_SaveToJson(){return Object.assign(super._SaveToJson(),{"index":this._updatedIndex})}_LoadFromJson(o){if(!o)return;super._LoadFromJson(o);this._updatedIndex=o["index"]}}C3.PropertyTrackState.InstanceVariableSourceAdapter=InstanceVariableSourceAdapter};


// c3/timelines/state/propertySourceAdapters/behaviorSourceAdapter.js
'use strict';{const C3=self.C3;const SID=0;const INDEX=1;const NAME=2;class BehaviorSourceAdapter extends C3.PropertyTrackState.PropertySourceAdapter{constructor(propertyTrack){super(propertyTrack);this._sid=NaN}GetEditorIndex(){const dataItem=this._propertyTrack.GetPropertyTrackDataItem();return dataItem.GetSourceAdapterArguments()[INDEX]}GetTarget(){const dataItem=this._propertyTrack.GetPropertyTrackDataItem();const track=this._propertyTrack.GetTrack();const sid=this._sid?this._sid:dataItem.GetSourceAdapterArguments()[SID];
const instance=track.GetInstance();const index=instance.GetBehaviorIndexBySID(sid);const behaviorInstance=instance.GetBehaviorInstances()[index];return behaviorInstance.GetSdkInstance()}GetBehaviorType(objectClass){const dataItem=this._propertyTrack.GetPropertyTrackDataItem();const name=dataItem.GetSourceAdapterArguments()[NAME];return objectClass.GetBehaviorTypeByName(name)}UpdateBehaviorTypeSid(sid){const dataItem=this._propertyTrack.GetPropertyTrackDataItem();if(dataItem.GetSourceAdapterArguments()[SID]===
sid)return;this._sid=sid}Interpolate(time,start,end,setTime,noChange,ensureValue){const track=this._propertyTrack.GetTrack();const instance=track.GetInstance();if(!this.GetBehaviorType(instance.GetObjectClass()))return;return super.Interpolate(time,start,end,setTime,noChange,ensureValue)}_SaveToJson(){return Object.assign(super._SaveToJson(),{"sid":this._sid})}_LoadFromJson(o){if(!o)return;super._LoadFromJson(o);this._sid=o["sid"]}}C3.PropertyTrackState.BehaviorSourceAdapter=BehaviorSourceAdapter};


// c3/timelines/state/propertySourceAdapters/effectSourceAdapter.js
'use strict';{const C3=self.C3;const NAME=0;const INDEX=1;class EffectSourceAdapter extends C3.PropertyTrackState.PropertySourceAdapter{constructor(propertyTrack){super(propertyTrack)}GetEditorIndex(){return this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[INDEX]}GetTarget(){const pTrack=this._propertyTrack;const track=pTrack.GetTrack();const worldInfo=track.GetWorldInfo();const instanceEffectList=worldInfo.GetInstanceEffectList();const effectList=instanceEffectList.GetEffectList();
const effectType=this.GetEffectType(effectList);const effectIndex=effectType.GetIndex();if(instanceEffectList.IsEffectIndexActive(effectIndex))return instanceEffectList.GetEffectParametersForIndex(effectIndex);return null}GetEffectType(effectList){const pTrack=this._propertyTrack;const name=pTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[NAME];return effectList.GetEffectTypeByName(name)}Interpolate(time,start,end,setTime,noChange,ensureValue){if(!this._IsEffectActive())return;return super.Interpolate(time,
start,end,setTime,noChange,ensureValue)}_IsEffectActive(){const pTrack=this._propertyTrack;const track=pTrack.GetTrack();const worldInfo=track.GetWorldInfo();const instanceEffectList=worldInfo.GetInstanceEffectList();const effectList=instanceEffectList.GetEffectList();const effectType=this.GetEffectType(effectList);if(!effectType)return;const effectIndex=effectType.GetIndex();return instanceEffectList.IsEffectIndexActive(effectIndex)}}C3.PropertyTrackState.EffectSourceAdapter=EffectSourceAdapter};


// c3/timelines/state/propertySourceAdapters/pluginSourceAdapter.js
'use strict';{const C3=self.C3;const INDEX=0;class PluginSourceAdapter extends C3.PropertyTrackState.PropertySourceAdapter{constructor(propertyTrack){super(propertyTrack)}GetEditorIndex(){return this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[INDEX]}GetTarget(){return this._propertyTrack.GetTrack().GetInstance().GetSdkInstance()}Interpolate(time,start,end,setTime,noChange,ensureValue){const track=this._propertyTrack.GetTrack();const templatePlugin=track.GetObjectClass().GetPlugin();
const currentPlugin=track.GetInstance().GetObjectClass().GetPlugin();if(templatePlugin!==currentPlugin)return;return super.Interpolate(time,start,end,setTime,noChange,ensureValue)}}C3.PropertyTrackState.PluginSourceAdapter=PluginSourceAdapter};


// c3/timelines/state/propertySourceAdapters/valueSourceAdapter.js
'use strict';{const C3=self.C3;class ValueSourceAdapter extends C3.PropertyTrackState.PropertySourceAdapter{constructor(propertyTrack){super(propertyTrack);this._value=0;this._init=false}SetInitialState(){const propertyTrackData=this._propertyTrack.GetPropertyTrackData();let propertyTrackDataItem=this._propertyTrack.GetPropertyTrackDataItem();propertyTrackDataItem=propertyTrackData.GetFirstPropertyKeyframeDataItem(propertyTrackDataItem);this._value=propertyTrackDataItem.GetValueWithResultMode()}SetResumeState(){}GetValue(){if(!this._init)this._propertyTrack.Interpolate(0);
return this._value}Interpolate(time,start,end,setTime,noChange,ensureValue){const interpolateFunc=C3.PropertyTrackState.NumericTypeAdapter.Interpolate;this._value=interpolateFunc(time,start,end,this._propertyTrack);this._init=true}SaveState(){}ClearSaveState(){}GetCurrentState(){return this._value}CompareInitialStateWithCurrent(){return false}CompareSaveStateWithCurrent(){return false}_SaveToJson(){return{"value":this._value,"init":this._init}}_LoadFromJson(o){if(!o)return;this._value=o["value"];
this._init=o.hasOwnProperty("init")?o["init"]:true}}C3.PropertyTrackState.ValueSourceAdapter=ValueSourceAdapter};


// c3/timelines/state/propertyInterpolationAdapters/propertyInterpolationAdapter.js
'use strict';{const C3=self.C3;C3.PropertyTrackState.PropertyInterpolationAdapter=class PropertyInterpolationAdapter{constructor(sourceAdapter){this._sourceAdapter=sourceAdapter;this._propertyTrack=sourceAdapter.GetPropertyTrack();this._worldInfo=this._propertyTrack.GetTrack().GetWorldInfo();this._property=this._propertyTrack.GetPropertyName();this._firstAbsoluteUpdate=false;this._saveState=null;this._target=null}Release(){this._sourceAdapter=null;this._propertyTrack=null;this._worldInfo=null;this._saveState=
null;this._target=null}CleanCaches(){this._worldInfo=null;this._saveState=null;this._target=null}GetPropertyTrack(){return this._propertyTrack}GetWorldInfo(){if(this._worldInfo)return this._worldInfo;this._worldInfo=this._propertyTrack.GetTrack().GetWorldInfo();return this._worldInfo}SetFirstAbsoluteUpdate(f){this._firstAbsoluteUpdate=!!f}GetFirstAbsoluteUpdate(){return this._firstAbsoluteUpdate}SetInitialState(){}SetResumeState(){}SetSaveState(){this._saveState=this.GetCurrentState()}ClearSaveState(){this._saveState=
null}GetCurrentState(){}CompareInitialStateWithCurrent(){}CompareSaveStateWithCurrent(){}CanChange(value){const targetType=typeof this._Getter();const newType=typeof value;return targetType===newType}BeforeChangeProperty(){}ChangeProperty(time,value,start,end,setTime){}AfterChangeProperty(){}_FirstKeyframeGetter(){const propertyKeyframeDataItem=this._PickTimelinePlaybackMode(()=>{const propertyTrackDataItem=this._propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=this._propertyTrack.GetPropertyTrackData();
return propertyTrackData.GetFirstPropertyKeyframeDataItem(propertyTrackDataItem)},()=>{const propertyTrackDataItem=this._propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=this._propertyTrack.GetPropertyTrackData();return propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem)});return propertyKeyframeDataItem.GetAbsoluteValue()}_CurrentKeyframeGetter(){const timeline=this._propertyTrack.GetTimeline();const time=timeline.GetTime()-this._propertyTrack.GetTrack().GetStartOffset();
const propertyKeyframe=this._PickTimelinePlaybackMode(()=>{const propertyTrackDataItem=this._propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=this._propertyTrack.GetPropertyTrackData();return propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,propertyTrackDataItem)},()=>{const propertyTrackDataItem=this._propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=this._propertyTrack.GetPropertyTrackData();const ret=propertyTrackData.GetFirstPropertyKeyFrameDataItemHigherOrEqualThan(time,
propertyTrackDataItem);if(!ret)return propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem);return ret});return propertyKeyframe.GetAbsoluteValue()}_PickTimelinePlaybackMode(forwardFunc,backwardFunc){const timeline=this._propertyTrack.GetTimeline();return timeline.IsForwardPlayBack()?forwardFunc():backwardFunc()}_PickResultMode(relativeFunc,absoluteFunc){const resultMode=this._propertyTrack.GetResultMode();return resultMode==="relative"?relativeFunc():absoluteFunc()}_PickFirstAbsoluteUpdate(firstFunc,
otherFunc){if(this.GetFirstAbsoluteUpdate()){this.SetFirstAbsoluteUpdate(false);return firstFunc()}else return otherFunc()}_GetAbsoluteInitialValue(keyframeValue){}_GetIndex(){return this._sourceAdapter.GetIndex()}_GetTarget(){if(this._target)return this._target;this._target=this._sourceAdapter.GetTarget();return this._target}_PickSource(bFunc,eFunc,ivFunc,pFunc,wiFunc){const id=this._propertyTrack.GetSourceAdapterId();switch(id){case "behavior":return bFunc();case "effect":return eFunc();case "instance-variable":return ivFunc();
case "plugin":return pFunc();case "world-instance":return wiFunc()}}_SaveToJson(){return{"firstAbsoluteUpdate":this._firstAbsoluteUpdate,"saveState":this._saveState}}_LoadFromJson(o){if(!o)return;this._firstAbsoluteUpdate=o["firstAbsoluteUpdate"];this._saveState=o["saveState"]}_GetPropertyKeyframeStubs(propertyTracks,firstOnly=false){const ret=[];for(const propertyTrack of propertyTracks){const startOffset=propertyTrack.GetTrack().GetStartOffset();for(const propertyKeyframeDataItem of propertyTrack.GetPropertyKeyframeDataItems())if(firstOnly&&
propertyKeyframeDataItem.GetTime()===0)ret.push({time:startOffset+propertyKeyframeDataItem.GetTime(),value:propertyKeyframeDataItem.GetAbsoluteValue()});else if(!firstOnly)ret.push({time:startOffset+propertyKeyframeDataItem.GetTime(),value:propertyKeyframeDataItem.GetAbsoluteValue()})}return ret.sort((f,s)=>f.time-s.time)}_GetLastPropertyKeyframeStub(timeline,time,propertyKeyframeStubs){return this._GetPropertyKeyframeStubLowerThanPlayhead(time,propertyKeyframeStubs)}_GetPropertyKeyframeStubLowerThanPlayhead(time,
propertyKeyframeStubs){for(let i=propertyKeyframeStubs.length-1;i>=0;i--){const stubTime=propertyKeyframeStubs[i].time;if(stubTime<=time)return propertyKeyframeStubs[i]}return null}}};


// c3/timelines/state/propertyInterpolationAdapters/colorInterpolationAdapter.js
'use strict';{const C3=self.C3;const TMP_COLORS_MAP=new Map;const TMP_COLOR=[0,0,0];class ColorInterpolationAdapter extends C3.PropertyTrackState.PropertyInterpolationAdapter{constructor(sourceAdapter){super(sourceAdapter)}SetInitialState(){}SetResumeState(){}GetCurrentState(){const id=this._propertyTrack.GetSourceAdapterId();const target=this._GetTarget();const index=this._GetIndex();switch(id){case "behavior":return this._ToColorArray(target.GetPropertyValueByIndex(index));case "effect":return this._ToColorArray(target[index]);
case "plugin":return this._ToColorArray(target.GetPropertyValueByIndex(index));case "world-instance":return this._ToColorArray(this._Getter())}}CompareInitialStateWithCurrent(){const firstKeyframeColor=this._FirstKeyframeGetter();return!this._CompareColors(firstKeyframeColor,this._Getter())}CompareSaveStateWithCurrent(){if(C3.IsNullOrUndefined(this._saveState))return false;return!this._CompareColors(this._saveState,this._Getter())}_CompareColors(fColor,sColor){return fColor.equalsIgnoringAlpha(sColor)}_FirstKeyframeGetter(){const color=
super._FirstKeyframeGetter();return this._GetColorFromArray(color)}_CurrentKeyframeGetter(){const color=super._CurrentKeyframeGetter();return this._GetColorFromArray(color)}_GetAbsoluteInitialValue(value){}_ToColorArray(color){if(C3.IsInstanceOf(color,C3.Color))return color.toArray().slice(0,3);return color.slice(0,3)}_GetColorFromArray(color){if(C3.IsInstanceOf(color,C3.Color))return color;return new C3.Color(color[0],color[1],color[2],1)}CanChange(value){return true}BeforeChangeProperty(){const instance=
this._propertyTrack.GetInstance();if(!TMP_COLORS_MAP.has(instance))TMP_COLORS_MAP.set(instance,new Map);const instanceMap=TMP_COLORS_MAP.get(instance);const id=this._propertyTrack.GetSourceAdapterId();if(!instanceMap.has(id))instanceMap.set(id,new Map);const sourceMap=instanceMap.get(id);if(!sourceMap.has(this._property))sourceMap.set(this._property,{used:false,color:new C3.Color(0,0,0,1)})}_GetTmpColor(instance,sourceId,propertyName){const tmpColorObj=TMP_COLORS_MAP.get(instance).get(sourceId).get(propertyName);
tmpColorObj.used=true;return tmpColorObj.color}ChangeProperty(time,value,start,end,setTime){const timeline=this._propertyTrack.GetTimeline();const track=this._propertyTrack.GetTrack();const instance=this._propertyTrack.GetInstance();const sourceAdapter=this._propertyTrack.GetSourceAdapter();const sourceAdapterId=this._propertyTrack.GetSourceAdapterId();const property=this._property;const propertyTracks=timeline.GetSimilarPropertyTracks(instance,sourceAdapter,property);if(propertyTracks.length>1){const propertyKeyframeStubs=
this._GetPropertyKeyframeStubs(propertyTracks,true);const stub=this._GetLastPropertyKeyframeStub(timeline,timeline.GetTime(),propertyKeyframeStubs);if(stub){const startOffset=track.GetStartOffset();const t=stub.time-startOffset;if(t===0)this._GetTmpColor(instance,sourceAdapterId,this._property).addRgb(value[0],value[1],value[2]);else{if(t<0)return;const r=value[0];const g=value[1];const b=value[2];const v=this._propertyTrack.Interpolate(t,false,true);const dr=C3.Color.DiffChannel(r,v[0]);const dg=
C3.Color.DiffChannel(g,v[1]);const db=C3.Color.DiffChannel(b,v[2]);this._GetTmpColor(instance,sourceAdapterId,this._property).addRgb(dr,dg,db)}}}else this._Setter(value[0],value[1],value[2]);return C3.TimelineState.LAYOUT_RENDER_CHANGE}AfterChangeProperty(){const instance=this._propertyTrack.GetInstance();if(!TMP_COLORS_MAP.has(instance))return;const instanceMap=TMP_COLORS_MAP.get(instance);const id=this._propertyTrack.GetSourceAdapterId();if(!instanceMap.has(id))return;const sourceMap=instanceMap.get(id);
if(!sourceMap.has(this._property))return;const tmpColorObj=sourceMap.get(this._property);const used=tmpColorObj.used;const color=tmpColorObj.color;if(used)this._Setter(color.getR(),color.getG(),color.getB());if(sourceMap.size===0)instanceMap.delete(id);if(instanceMap.size===0)TMP_COLORS_MAP.delete(instance)}_Getter(){const id=this._propertyTrack.GetSourceAdapterId();const target=this._GetTarget();const index=this._GetIndex();switch(id){case "behavior":return this._GetColorFromArray(target.GetPropertyValueByIndex(index));
case "effect":return target[index].clone();case "plugin":return this._GetColorFromArray(target.GetPropertyValueByIndex(index));case "world-instance":return this.GetWorldInfo().GetUnpremultipliedColor().clone()}}_Setter(r,g,b){const id=this._propertyTrack.GetSourceAdapterId();const target=this._GetTarget();const index=this._GetIndex();switch(id){case "behavior":TMP_COLOR[0]=r;TMP_COLOR[1]=g;TMP_COLOR[2]=b;target.SetPropertyValueByIndex(index,TMP_COLOR);break;case "effect":target[index].setRgb(r,g,
b);break;case "plugin":TMP_COLOR[0]=r;TMP_COLOR[1]=g;TMP_COLOR[2]=b;target.SetPropertyValueByIndex(index,TMP_COLOR);break;case "world-instance":this.GetWorldInfo().SetUnpremultipliedColorRGB(r,g,b);break}}_SaveToJson(){}_LoadFromJson(o){}}C3.PropertyTrackState.PropertyInterpolationAdapter.ColorInterpolationAdapter=ColorInterpolationAdapter};


// c3/timelines/state/propertyInterpolationAdapters/noInterpolationAdapter.js
'use strict';{const C3=self.C3;class NoInterpolationAdapter extends C3.PropertyTrackState.PropertyInterpolationAdapter{constructor(sourceAdapter){super(sourceAdapter)}SetInitialState(){}SetResumeState(){}GetCurrentState(){return this._Getter()}CompareInitialStateWithCurrent(){const firstKeyframeValue=this._FirstKeyframeGetter();return firstKeyframeValue!==this.GetCurrentState()}CompareSaveStateWithCurrent(){if(C3.IsNullOrUndefined(this._saveState))return false;return this._saveState!==this.GetCurrentState()}ChangeProperty(time,
value,start,end,setTime){const willChangeFunc=C3.PropertyTrackState.PropertySourceAdapter.GetWillChangeFunc(this._propertyTrack);const propertyTrack=this._propertyTrack;const track=propertyTrack.GetTrack();const id=propertyTrack.GetSourceAdapterId();const timeline=propertyTrack.GetTimeline();const instance=track.GetInstance();const sourceAdapter=propertyTrack.GetSourceAdapter();const property=this._property;const propertyTracks=timeline.GetSimilarPropertyTracks(instance,sourceAdapter,property);if(propertyTracks.length>
1){const propertyKeyframeStubs=this._GetPropertyKeyframeStubs(propertyTracks);const t=time+track.GetStartOffset();const stub=this._GetLastPropertyKeyframeStub(timeline,t,propertyKeyframeStubs);if(stub)value=stub.value}const change=willChangeFunc(this._GetIndex(),this._GetTarget(),value,id);if(!change)return;this._Setter(value);switch(id){case "behavior":return;case "effect":return;case "instance-variable":return;case "plugin":return C3.TimelineState.LAYOUT_RENDER_CHANGE}}_Getter(){const id=this._propertyTrack.GetSourceAdapterId();
const target=this._GetTarget();const index=this._GetIndex();switch(id){case "behavior":return target.GetPropertyValueByIndex(index);case "effect":return target[index];case "instance-variable":return target.GetInstanceVariableValue(index);case "plugin":return target.GetPropertyValueByIndex(index)}}_Setter(value){const id=this._propertyTrack.GetSourceAdapterId();const target=this._GetTarget();const index=this._GetIndex();switch(id){case "behavior":target.SetPropertyValueByIndex(index,value);break;case "effect":target[index]=
value;break;case "instance-variable":target.SetInstanceVariableValue(index,value);break;case "plugin":target.SetPropertyValueByIndex(index,value);break}}}C3.PropertyTrackState.PropertyInterpolationAdapter.NoInterpolationAdapter=NoInterpolationAdapter};


// c3/timelines/state/propertyInterpolationAdapters/numericInterpolationAdapter.js
'use strict';{const C3=self.C3;const NS=C3.PropertyTrackState.PropertyInterpolationAdapter;const INSTANCE_FUNC_MAP=new Map;const add=(prop,setter,absolute_setter,getter,round)=>INSTANCE_FUNC_MAP.set(prop,{setter,absolute_setter,getter,round});add("offsetX",(wi,v)=>wi.OffsetX(v),(wi,v)=>wi.SetX(v),wi=>wi.GetX(),true);add("offsetY",(wi,v)=>wi.OffsetY(v),(wi,v)=>wi.SetY(v),wi=>wi.GetY(),true);add("offsetWidth",(wi,v)=>wi.OffsetWidth(v),(wi,v)=>wi.SetWidth(v),wi=>wi.GetWidth(),true);add("offsetHeight",
(wi,v)=>wi.OffsetHeight(v),(wi,v)=>wi.SetHeight(v),wi=>wi.GetHeight(),true);add("offsetAngle",(wi,v)=>wi.OffsetAngle(v),(wi,v)=>wi.SetAngle(v),wi=>wi.GetAngle(),false);add("offsetOpacity",(wi,v)=>wi.OffsetOpacity(v),(wi,v)=>wi.SetOpacity(v),wi=>wi.GetOpacity(),false);add("offsetOriginX",(wi,v)=>wi.OffsetOriginX(v),(wi,v)=>wi.SetOriginX(v),wi=>wi.GetOriginX(),false);add("offsetOriginY",(wi,v)=>wi.OffsetOriginY(v),(wi,v)=>wi.SetOriginY(v),wi=>wi.GetOriginY(),false);add("offsetZElevation",(wi,v)=>wi.OffsetZElevation(v),
(wi,v)=>wi.SetZElevation(v),wi=>wi.GetZElevation(),true);add("offsetScaleX",(wi,v,t)=>{wi.OffsetWidth(t.GetOriginalWidth()*v)},(wi,v,t)=>{wi.SetWidth(t.GetOriginalWidth()*v)},(wi,t)=>{return wi.GetWidth()/t.GetOriginalWidth()},false);add("offsetScaleY",(wi,v,t)=>{wi.OffsetHeight(t.GetOriginalHeight()*v)},(wi,v,t)=>{wi.SetHeight(t.GetOriginalHeight()*v)},(wi,t)=>{return wi.GetHeight()/t.GetOriginalHeight()},false);class NumericInterpolationAdapter extends C3.PropertyTrackState.PropertyInterpolationAdapter{constructor(sourceAdapter){super(sourceAdapter);
this._lastValue=0;this._instance_getter=null;this._instance_setter=null;this._instance_absolute_setter=null;this._round=false;if(C3.IsInstanceOf(this._propertyTrack.GetTimeline(),C3.Tween))this._typeAdapter=new C3.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapterForTween(this);else this._typeAdapter=new C3.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapterForTimeline(this);const property=this._propertyTrack.GetPropertyName();if(this._propertyTrack.GetSourceAdapterId()===
"world-instance"){const p=INSTANCE_FUNC_MAP.get(property);this._instance_getter=p.getter;this._instance_setter=p.setter;this._instance_absolute_setter=p.absolute_setter;this._round=p.round}}Release(){this._typeAdapter=null;this._instance_getter=null;this._instance_setter=null;this._instance_absolute_setter=null;super.Release()}GetLastValue(){return this._lastValue}SetLastValue(v){this._lastValue=v}SetInitialState(){const initValue=this._typeAdapter.SetInitialState();if(typeof initValue==="number")this._lastValue=
initValue}SetResumeState(){const resumeValue=this._typeAdapter.SetResumeState();if(typeof resumeValue==="number")this._lastValue=resumeValue}GetCurrentState(){return this._Getter()}CompareInitialStateWithCurrent(){const firstKeyframeValue=this._FirstKeyframeGetter();return firstKeyframeValue!==this.GetCurrentState()}CompareSaveStateWithCurrent(){if(C3.IsNullOrUndefined(this._saveState))return false;return this._saveState!==this.GetCurrentState()}BeforeChangeProperty(){this._typeAdapter.BeforeChangeProperty()}ChangeProperty(time,
value,start,end,setTime,ensureValue){return this._typeAdapter.ChangeProperty(time,value,start,end,setTime,ensureValue)}AfterChangeProperty(){this._typeAdapter.AfterChangeProperty()}_Getter(){const target=this._GetTarget();const index=this._GetIndex();const track=this._propertyTrack.GetTrack();const wi=this.GetWorldInfo();return this._PickSource(()=>target.GetPropertyValueByIndex(index),()=>target[index],()=>target.GetInstanceVariableValue(index),()=>target.GetPropertyValueByIndex(index),()=>this._instance_getter(wi,
track))}_Setter(value,start,end){const target=this._GetTarget();const index=this._GetIndex();const track=this._propertyTrack.GetTrack();const wi=this.GetWorldInfo();this._PickSource(()=>target.OffsetPropertyValueByIndex(index,value),()=>target[index]+=value,()=>target.SetInstanceVariableOffset(index,value),()=>target.OffsetPropertyValueByIndex(index,value),()=>this._instance_setter(wi,value,track))}_SetterAbsolute(value,start,end){const target=this._GetTarget();const index=this._GetIndex();const track=
this._propertyTrack.GetTrack();const wi=this.GetWorldInfo();this._PickSource(()=>target.SetPropertyValueByIndex(index,value),()=>target[index]=value,()=>target.SetInstanceVariableValue(index,value),()=>target.SetPropertyValueByIndex(index,value),()=>this._instance_absolute_setter(wi,value,track))}_MaybeEnsureValue(time,start,end,setTime,lastValue,currentValue){this._typeAdapter._MaybeEnsureValue(time,start,end,setTime,lastValue,currentValue)}_AddDelta(value,start,end){const stringValue=value.toString();
const decimalsString=stringValue.split(".")[1]||"";const decimalPlaces=decimalsString.length;const v=this._Getter();let rv;if(decimalPlaces===0)rv=this._round?Math.round(v):v;else rv=C3.toFixed(v,decimalPlaces);this._Setter(rv-v,start,end)}_SaveToJson(){return Object.assign(super._SaveToJson(),{"v":this._lastValue})}_LoadFromJson(o){if(!o)return;super._LoadFromJson(o);this._lastValue=o["v"]}}C3.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapter=NumericInterpolationAdapter};


// c3/timelines/state/propertyInterpolationAdapters/numericInterpolationAdapterForTimeline.js
'use strict';{const C3=self.C3;const TMP_ABSOLUTE_VALUES_MAP=new Map;class NumericInterpolationAdapterForTimeline{constructor(numericInterpolationAdapter){this._numericInterpolationAdapter=numericInterpolationAdapter}Release(){this._numericInterpolationAdapter=null}SetInitialState(){const adapter=this._numericInterpolationAdapter;const propertyTrack=this._numericInterpolationAdapter.GetPropertyTrack();return adapter._PickResultMode(()=>{return adapter._PickTimelinePlaybackMode(()=>0,()=>C3.PropertyTrackState.PropertySourceAdapter.GetValueAtTime(propertyTrack))},
()=>{})}SetResumeState(){}BeforeChangeProperty(){const adapter=this._numericInterpolationAdapter;const propertyTrack=this._numericInterpolationAdapter.GetPropertyTrack();const property=propertyTrack.GetPropertyName();adapter._PickResultMode(()=>{},()=>{const instance=propertyTrack.GetInstance();if(!TMP_ABSOLUTE_VALUES_MAP.has(instance))TMP_ABSOLUTE_VALUES_MAP.set(instance,new Map);const instanceMap=TMP_ABSOLUTE_VALUES_MAP.get(instance);const id=propertyTrack.GetSourceAdapterId();if(!instanceMap.has(id))instanceMap.set(id,
new Map);const sourceMap=instanceMap.get(id);if(!sourceMap.has(property))sourceMap.set(property,{used:false,value:0})})}_GetTmpAbsoluteValueObject(instance,sourceId,propertyName){const tmpAbsoluteValueObj=TMP_ABSOLUTE_VALUES_MAP.get(instance).get(sourceId).get(propertyName);tmpAbsoluteValueObj.used=true;return tmpAbsoluteValueObj}ChangeProperty(time,value,start,end,setTime,ensureValue){const adapter=this._numericInterpolationAdapter;const propertyTrack=this._numericInterpolationAdapter.GetPropertyTrack();
const property=propertyTrack.GetPropertyName();adapter._PickResultMode(()=>{const lastValue=adapter.GetLastValue();adapter._Setter(value-lastValue,start,end);if(ensureValue)this._MaybeEnsureValue(time,start,end,setTime,lastValue,value);adapter.SetLastValue(value)},()=>{const timeline=propertyTrack.GetTimeline();const track=propertyTrack.GetTrack();const instance=propertyTrack.GetInstance();const sourceAdapter=propertyTrack.GetSourceAdapter();const sourceAdapterId=propertyTrack.GetSourceAdapterId();
const propertyTracks=timeline.GetSimilarPropertyTracks(instance,sourceAdapter,property);if(propertyTracks.length>1){const propertyKeyframeStubs=adapter._GetPropertyKeyframeStubs(propertyTracks,true);const stub=adapter._GetLastPropertyKeyframeStub(timeline,timeline.GetTime(),propertyKeyframeStubs);if(stub){const startOffset=track.GetStartOffset();const t=stub.time-startOffset;if(t===0){const valueObj=this._GetTmpAbsoluteValueObject(instance,sourceAdapterId,property);valueObj.value+=value}else{if(t<
0)return;const v=propertyTrack.Interpolate(t,false,true);const valueObj=this._GetTmpAbsoluteValueObject(instance,sourceAdapterId,property);valueObj.value+=value-v}}}else adapter._SetterAbsolute(value)});return adapter._PickSource(()=>{},()=>C3.TimelineState.LAYOUT_RENDER_CHANGE,()=>{},()=>C3.TimelineState.LAYOUT_RENDER_CHANGE,()=>C3.TimelineState.LAYOUT_RENDER_CHANGE)}AfterChangeProperty(){const adapter=this._numericInterpolationAdapter;const propertyTrack=this._numericInterpolationAdapter.GetPropertyTrack();
const property=propertyTrack.GetPropertyName();adapter._PickResultMode(()=>{},()=>{const instance=propertyTrack.GetInstance();if(!TMP_ABSOLUTE_VALUES_MAP.has(instance))return;const instanceMap=TMP_ABSOLUTE_VALUES_MAP.get(instance);const id=propertyTrack.GetSourceAdapterId();if(!instanceMap.has(id))return;const sourceMap=instanceMap.get(id);if(!sourceMap.has(property))return;const tmpValueObj=sourceMap.get(property);const used=tmpValueObj.used;const value=tmpValueObj.value;if(used)adapter._SetterAbsolute(value);
sourceMap.delete(property);if(sourceMap.size===0)instanceMap.delete(id);if(instanceMap.size===0)TMP_ABSOLUTE_VALUES_MAP.delete(instance)})}_MaybeEnsureValue(time,start,end,setTime,lastValue,currentValue){const adapter=this._numericInterpolationAdapter;if(setTime)return;if(start&&time===start.GetTime())adapter._AddDelta(start.GetValueWithResultMode(),start,end);else if(end&&time===end.GetTime())adapter._AddDelta(end.GetValueWithResultMode(),start,end);else if(currentValue-lastValue===0)adapter._AddDelta(start.GetValueWithResultMode(),
start,end)}}C3.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapterForTimeline=NumericInterpolationAdapterForTimeline};


// c3/timelines/state/propertyInterpolationAdapters/numericInterpolationAdapterForTween.js
'use strict';{const C3=self.C3;const TMP_ABSOLUTE_VALUES_MAP=new Map;class NumericInterpolationAdapterForTween{constructor(numericInterpolationAdapter){this._numericInterpolationAdapter=numericInterpolationAdapter}Release(){this._numericInterpolationAdapter=null}SetInitialState(){const adapter=this._numericInterpolationAdapter;adapter.SetFirstAbsoluteUpdate(true);return this._GetAbsoluteInitialValue(adapter._FirstKeyframeGetter())}SetResumeState(){const adapter=this._numericInterpolationAdapter;if(adapter._FirstKeyframeGetter()===
adapter._CurrentKeyframeGetter())return;adapter.SetFirstAbsoluteUpdate(true);return this._GetAbsoluteInitialValue(adapter._CurrentKeyframeGetter())}BeforeChangeProperty(){}ChangeProperty(time,value,start,end,setTime,ensureValue){const adapter=this._numericInterpolationAdapter;const lastValue=adapter.GetLastValue();adapter._PickResultMode(()=>{adapter._Setter(value-lastValue,start,end);if(ensureValue)this._MaybeEnsureValue(time,start,end,setTime,lastValue,value)},()=>{adapter._PickFirstAbsoluteUpdate(()=>
{adapter._Setter(lastValue,start,end)},()=>{adapter._Setter(value-lastValue,start,end);if(ensureValue)this._MaybeEnsureValue(time,start,end,setTime,lastValue,value)})});adapter.SetLastValue(value);return adapter._PickSource(()=>{},()=>C3.TimelineState.LAYOUT_RENDER_CHANGE,()=>{},()=>C3.TimelineState.LAYOUT_RENDER_CHANGE,()=>C3.TimelineState.LAYOUT_RENDER_CHANGE)}AfterChangeProperty(){}_GetAbsoluteInitialValue(keyframeValue){const adapter=this._numericInterpolationAdapter;return keyframeValue-adapter.GetCurrentState()}_MaybeEnsureValue(time,
start,end,setTime,lastValue,currentValue){const adapter=this._numericInterpolationAdapter;if(setTime)if(start&&time===start.GetTime())adapter._AddDelta(start.GetValueWithResultMode(),start,end);else if(end&&time===end.GetTime())adapter._AddDelta(end.GetValueWithResultMode(),start,end);else{if(!end)adapter._AddDelta(start.GetValueWithResultMode(),start,end)}else if(start&&time===start.GetTime())adapter._AddDelta(start.GetValueWithResultMode(),start,end);else if(end&&time===end.GetTime())adapter._AddDelta(end.GetValueWithResultMode(),
start,end);else if(currentValue-lastValue===0)adapter._AddDelta(start.GetValueWithResultMode(),start,end)}}C3.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapterForTween=NumericInterpolationAdapterForTween};


// c3/timelines/state/propertyTypeAdapters/numericTypeAdapter.js
'use strict';{const C3=self.C3;const Ease=self.Ease;C3.PropertyTrackState.NumericTypeAdapter=class NumericTypeAdapter{constructor(){}static WillChange(index,source,newValue,type){let oldValue;switch(type){case "behavior":oldValue=source.GetPropertyValueByIndex(index);break;case "effect":oldValue=source[index];break;case "instance-variable":oldValue=source.GetInstanceVariableValue(index);break;case "plugin":oldValue=source.GetPropertyValueByIndex(index);break}if(oldValue===newValue)return false;return true}static Interpolate(time,
start,end,propertyTrack){if(!end){let propertyTrackDataItem=propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=propertyTrack.GetPropertyTrackData();propertyTrackDataItem=propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem);return propertyTrackDataItem.GetValueWithResultMode()}let mode=propertyTrack.GetInterpolationMode();if(mode==="default")mode="continuous";if(propertyTrack.GetPropertyType()==="combo")mode="discrete";if(mode==="discrete")return start.GetValueWithResultMode();
else if(mode==="continuous"||mode==="step"){if(mode==="step"){const step=propertyTrack.GetTimeline().GetStep();if(step!==0){const s=1/step;time=Math.floor(time*s)/s}}const st=start.GetTime();const et=end.GetTime();const sv=start.GetValueWithResultMode();const ev=end.GetValueWithResultMode();if(sv===ev)return sv;const n=C3.normalize(time,st,et);const e=start.GetEase();let ret;const startAddon=start.GetAddOn("cubic-bezier");const endAddon=end.GetAddOn("cubic-bezier");if(startAddon&&startAddon.GetStartEnable()&&
endAddon&&endAddon.GetEndEnable()){const dt=et-st;ret=Ease.GetRuntimeEase(e)(dt*n,0,1,dt);ret=Ease.GetRuntimeEase("cubicbezier")(ret,sv,sv+startAddon.GetStartAnchor(),ev+endAddon.GetEndAnchor(),ev)}else ret=Ease.GetRuntimeEase(e)((et-st)*n,sv,ev-sv,et-st);if(propertyTrack.GetPropertyType()==="integer")return Math.floor(ret);return ret}}}};


// c3/timelines/state/propertyTypeAdapters/angleTypeAdapter.js
'use strict';{const C3=self.C3;C3.PropertyTrackState.AngleTypeAdapter=class AngleTypeAdapter{constructor(){}static WillChange(index,source,newValue,type){let oldValue;switch(type){case "behavior":oldValue=source.GetPropertyValueByIndex(index);break;case "effect":oldValue=source[index];break;case "instance-variable":oldValue=source.GetInstanceVariableValue(index);break;case "plugin":oldValue=source.GetPropertyValueByIndex(index);break}if(oldValue===newValue)return false;return true}static Interpolate(time,
start,end,propertyTrack){if(!end){let propertyTrackDataItem=propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=propertyTrack.GetPropertyTrackData();propertyTrackDataItem=propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem);return propertyTrackDataItem.GetValueWithResultMode()}let mode=propertyTrack.GetInterpolationMode();if(mode==="default")mode="continuous";if(propertyTrack.GetPropertyType()==="combo")mode="discrete";if(mode==="discrete")return start.GetValueWithResultMode();
else if(mode==="continuous"||mode==="step"){if(mode==="step"){const step=propertyTrack.GetTimeline().GetStep();if(step!==0){const s=1/step;time=Math.floor(time*s)/s}}const st=start.GetTime();const et=end.GetTime();const sv=start.GetValueWithResultMode();const ev=end.GetValueWithResultMode();const angleAddon=start.GetAddOn("angle");if(angleAddon){const revolutions=angleAddon.GetRevolutions();if(sv===ev&&revolutions===0)return sv;const n=C3.normalize(time,st,et);const easeFunc=self.Ease.GetRuntimeEase(start.GetEase());
const easeRes=easeFunc(n,0,1,1);switch(angleAddon.GetDirection()){case "closest":return C3.angleLerp(sv,ev,easeRes,revolutions);case "clockwise":return C3.angleLerpClockwise(sv,ev,easeRes,revolutions);case "anti-clockwise":return C3.angleLerpAntiClockwise(sv,ev,easeRes,revolutions)}}else{if(sv===ev)return sv;const n=C3.normalize(time,st,et);const easeFunc=self.Ease.GetRuntimeEase(start.GetEase());return C3.angleLerp(sv,ev,easeFunc(n,0,1,1))}}}}};


// c3/timelines/state/propertyTypeAdapters/booleanTypeAdapter.js
'use strict';{const C3=self.C3;C3.PropertyTrackState.BooleanTypeAdapter=class BooleanTypeAdapter{constructor(){}static WillChange(index,source,newValue,type){let oldValue;switch(type){case "behavior":oldValue=source.GetPropertyValueByIndex(index);break;case "effect":oldValue=source[index];break;case "instance-variable":oldValue=source.GetInstanceVariableValue(index);break;case "plugin":oldValue=source.GetPropertyValueByIndex(index);break}if(!!oldValue===!!newValue)return false;return true}static Interpolate(time,
start,end,propertyTrack){if(!end){let propertyTrackDataItem=propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=propertyTrack.GetPropertyTrackData();propertyTrackDataItem=propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem);return propertyTrackDataItem.GetValueWithResultMode()?1:0}return start.GetValueWithResultMode()?1:0}}};


// c3/timelines/state/propertyTypeAdapters/colorTypeAdapter.js
'use strict';{const C3=self.C3;const TEMP_COLOR_ARRAY=[0,0,0];const TEMP_COLOR_ARRAY_2=[0,0,0];const TEMP_COLOR_ARRAY_3=[0,0,0];C3.PropertyTrackState.ColorTypeAdapter=class ColorTypeAdapter{constructor(){}static WillChange(index,source,newValue,type){let oldValue;switch(type){case "behavior":oldValue=source.GetPropertyValueByIndex(index);break;case "effect":oldValue=source[index];break;case "instance-variable":oldValue=source.GetInstanceVariableValue(index);break;case "plugin":oldValue=source.GetPropertyValueByIndex(index);
break}if(Array.isArray(newValue)){TEMP_COLOR_ARRAY[0]=newValue[0];TEMP_COLOR_ARRAY[1]=newValue[1];TEMP_COLOR_ARRAY[2]=newValue[2]}else{TEMP_COLOR_ARRAY_3.parseCommaSeparatedRgb(newValue);TEMP_COLOR_ARRAY[0]=Math.floor(TEMP_COLOR_ARRAY_3.getR()*255);TEMP_COLOR_ARRAY[1]=Math.floor(TEMP_COLOR_ARRAY_3.getG()*255);TEMP_COLOR_ARRAY[2]=Math.floor(TEMP_COLOR_ARRAY_3.getB()*255)}if(Array.isArray(oldValue)){TEMP_COLOR_ARRAY_2[0]=oldValue[0];TEMP_COLOR_ARRAY_2[1]=oldValue[1];TEMP_COLOR_ARRAY_2[2]=oldValue[2]}else{TEMP_COLOR_ARRAY_3.parseCommaSeparatedRgb(oldValue);
TEMP_COLOR_ARRAY_2[0]=Math.floor(TEMP_COLOR_ARRAY_3.getR()*255);TEMP_COLOR_ARRAY_2[1]=Math.floor(TEMP_COLOR_ARRAY_3.getG()*255);TEMP_COLOR_ARRAY_2[2]=Math.floor(TEMP_COLOR_ARRAY_3.getB()*255)}if(TEMP_COLOR_ARRAY[0]!==TEMP_COLOR_ARRAY_2[0])return true;if(TEMP_COLOR_ARRAY[1]!==TEMP_COLOR_ARRAY_2[1])return true;if(TEMP_COLOR_ARRAY[2]!==TEMP_COLOR_ARRAY_2[2])return true;return false}static Interpolate(time,start,end,propertyTrack){if(!end){let propertyTrackDataItem=propertyTrack.GetPropertyTrackDataItem();
const propertyTrackData=propertyTrack.GetPropertyTrackData();propertyTrackDataItem=propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem);const color=propertyTrackDataItem.GetValueWithResultMode();TEMP_COLOR_ARRAY[0]=color[0];TEMP_COLOR_ARRAY[1]=color[1];TEMP_COLOR_ARRAY[2]=color[2];return TEMP_COLOR_ARRAY}let mode=propertyTrack.GetInterpolationMode();if(mode==="default")mode="continuous";if(mode==="discrete"){const color=start.GetValueWithResultMode();TEMP_COLOR_ARRAY[0]=color[0];
TEMP_COLOR_ARRAY[1]=color[1];TEMP_COLOR_ARRAY[2]=color[2];return TEMP_COLOR_ARRAY}else if(mode==="continuous"||mode==="step"){if(mode==="step"){const step=propertyTrack.GetTimeline().GetStep();if(step!==0){const s=1/step;time=Math.floor(time*s)/s}}const st=start.GetTime();const et=end.GetTime();const sv=start.GetValueWithResultMode();const ev=end.GetValueWithResultMode();const n=C3.normalize(time,st,et);const e=start.GetEase();const sr=sv[0];const sg=sv[1];const sb=sv[2];const er=ev[0];const eg=ev[1];
const eb=ev[2];const easeFunc=self.Ease.GetRuntimeEase(e);const d=et-st;const dn=d*n;if(sr===er)TEMP_COLOR_ARRAY[0]=sr;else TEMP_COLOR_ARRAY[0]=easeFunc(dn,sr,er-sr,d);if(sg===eg)TEMP_COLOR_ARRAY[1]=sg;else TEMP_COLOR_ARRAY[1]=easeFunc(dn,sg,eg-sg,d);if(sb===eb)TEMP_COLOR_ARRAY[2]=sb;else TEMP_COLOR_ARRAY[2]=easeFunc(dn,sb,eb-sb,d);return TEMP_COLOR_ARRAY}}}};


// c3/timelines/state/propertyTypeAdapters/textTypeAdapter.js
'use strict';{const C3=self.C3;C3.PropertyTrackState.TextTypeAdapter=class TextTypeAdapter{constructor(){}static WillChange(index,source,newValue,type){let oldValue;switch(type){case "behavior":oldValue=source.GetPropertyValueByIndex(index);break;case "effect":oldValue=source[index];break;case "instance-variable":oldValue=source.GetInstanceVariableValue(index);break;case "plugin":oldValue=source.GetPropertyValueByIndex(index);break}if(oldValue===newValue)return false;return true}static Interpolate(time,
start,end,propertyTrack){if(!end){let propertyTrackDataItem=propertyTrack.GetPropertyTrackDataItem();const propertyTrackData=propertyTrack.GetPropertyTrackData();propertyTrackDataItem=propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem);return propertyTrackDataItem.GetValueWithResultMode()}return start.GetValueWithResultMode()}}};


// c3/timelines/data/timelineDataManager.js
'use strict';{const C3=self.C3;C3.TimelineDataManager=class TimelineDataManager{constructor(){this._timelineDataItems=new Map}Release(){for(const timelineDataItem of this._timelineDataItems.values())timelineDataItem.Release();this._timelineDataItems.clear();this._timelineDataItems=null}Add(data){const timelineDataItem=new C3.TimelineDataItem(data);const name=timelineDataItem.GetName();this._timelineDataItems.set(name,timelineDataItem)}Get(name){return this._timelineDataItems.get(name)}GetNameId(){return 0}static _CreateDataItems(items,
jsonItems,dataItemConstructor,dataContainer){if(!jsonItems)return;for(const jsonItem of jsonItems)C3.TimelineDataManager._CreateDataItem("create",jsonItem,items,dataItemConstructor,dataContainer)}static _LoadDataItemsFromJson(items,jsonItems,dataItemConstructor,dataContainer){if(items.length)jsonItems.forEach((jsonItem,index)=>{items[index]._LoadFromJson(jsonItem)});else jsonItems.forEach(jsonItem=>{C3.TimelineDataManager._CreateDataItem("load",jsonItem,items,dataItemConstructor,dataContainer)})}static _CreateDataItem(mode,
json,items,dataItemConstructor,dataContainer){let dataItem;if(typeof dataItemConstructor==="function")switch(mode){case "load":dataItem=new dataItemConstructor(null,dataContainer);break;case "create":dataItem=new dataItemConstructor(json,dataContainer);break}else if(typeof dataItemConstructor==="object"){const prop=dataItemConstructor.prop;const value=json[prop];const cnstrctr=dataItemConstructor.map.get(value);switch(mode){case "load":dataItem=new cnstrctr(null,dataContainer);break;case "create":dataItem=
new cnstrctr(json,dataContainer);break}}switch(mode){case "load":dataItem._LoadFromJson(json);items.push(dataItem);break;case "create":if(typeof dataItem.GetEnable==="function"&&!dataItem.GetEnable())return dataItem.Release();items.push(dataItem);break}}}};


// c3/timelines/data/timelineData.js
'use strict';{const C3=self.C3;const NAME=0;const TOTAL_TIME=1;const STEP=2;const INTERPOLATION_MODE=3;const RESULT_MODE=4;const TRACKS=5;const LOOP=6;const PING_PONG=7;const REPEAT_COUNT=8;C3.TimelineDataItem=class TimelineDataItem{constructor(timelineDataJson){this._name="";this._totalTime=NaN;this._step=0;this._interpolationMode="default";this._resultMode="default";this._loop=false;this._pingPong=false;this._repeatCount=1;this._trackData=null;if(!timelineDataJson)return;this._name=timelineDataJson[NAME];
this._totalTime=timelineDataJson[TOTAL_TIME];this._step=timelineDataJson[STEP];this._interpolationMode=timelineDataJson[INTERPOLATION_MODE];this._resultMode=timelineDataJson[RESULT_MODE];this._loop=!!timelineDataJson[LOOP];this._pingPong=!!timelineDataJson[PING_PONG];this._repeatCount=timelineDataJson[REPEAT_COUNT];this._trackData=new C3.TrackData(timelineDataJson[TRACKS],this)}Release(){this._trackData.Release();this._trackData=null}GetTrackData(){if(!this._trackData)this._trackData=new C3.TrackData(null,
this);return this._trackData}GetName(){return this._name}SetName(n){this._name=n}GetTotalTime(){return this._totalTime}SetTotalTime(tt){this._totalTime=tt}GetStep(){return this._step}SetStep(s){this._step=s}GetInterpolationMode(){return this._interpolationMode}SetInterpolationMode(im){this._interpolationMode=im}GetResultMode(){return this._resultMode}SetResultMode(rm){this._resultMode=rm}GetLoop(){return this._loop}SetLoop(l){this._loop=l}GetPingPong(){return this._pingPong}SetPingPong(p){this._pingPong=
p}GetRepeatCount(){return this._repeatCount}_SaveToJson(){return{"trackDataJson":this._trackData._SaveToJson(),"name":this._name,"totalTime":this._totalTime,"step":this._step,"interpolationMode":this._interpolationMode,"resultMode":this._resultMode,"loop":this._loop,"pingPong":this._pingPong,"repeatCount":this._repeatCount}}_LoadFromJson(o){if(!o)return;this.GetTrackData()._LoadFromJson(o["trackDataJson"]);this._name=o["name"];this._totalTime=o["totalTime"];this._step=o["step"];this._interpolationMode=
o["interpolationMode"];this._resultMode=o["resultMode"];this._loop=o["loop"];this._pingPong=o["pingPong"];this._repeatCount=o["repeatCount"]}}};


// c3/timelines/data/trackData.js
'use strict';{const C3=self.C3;const WI_DATA=0;const OC_INDEX=1;const WI_UID=2;const INTERPOLATION_MODE=1;const RESULT_MODE=2;const ENABLED=3;const KEYFRAMES=4;const PROPERTY_TRACKS=5;const ID=6;const NESTED_DATA=7;const START_OFFSET=0;const LOCAL_TOTAL_TIME=1;const WI_ADDITIONAL_DATA=8;const ORIGINAL_WIDTH=0;const ORIGINAL_HEIGHT=1;class TrackDataItem{constructor(trackDataJson,trackData){this._trackData=trackData;this._instanceData=null;this._additionalInstanceData=null;this._instanceUid=NaN;this._objectClassIndex=
NaN;this._interpolationMode="default";this._resultMode="default";this._enabled=false;this._keyframeData=null;this._propertyTrackData=null;this._id="";this._nestedData=null;this._startOffset=0;this._localTotalTime=this._trackData.GetTimelineDataItem().GetTotalTime();if(!trackDataJson)return;this._instanceData=trackDataJson[WI_DATA];this._instanceUid=trackDataJson[WI_DATA][WI_UID];this._objectClassIndex=trackDataJson[WI_DATA][OC_INDEX];this._interpolationMode=trackDataJson[INTERPOLATION_MODE];this._resultMode=
trackDataJson[RESULT_MODE];this._enabled=!!trackDataJson[ENABLED];if(trackDataJson[ID])this._id=trackDataJson[ID];if(trackDataJson[NESTED_DATA]){this._nestedData=trackDataJson[NESTED_DATA];this._startOffset=trackDataJson[NESTED_DATA][START_OFFSET];this._localTotalTime=trackDataJson[NESTED_DATA][LOCAL_TOTAL_TIME]}if(trackDataJson[WI_ADDITIONAL_DATA])this._additionalInstanceData=trackDataJson[WI_ADDITIONAL_DATA];this._keyframeData=new C3.KeyframeData(trackDataJson[KEYFRAMES],this);this._propertyTrackData=
new C3.PropertyTrackData(trackDataJson[PROPERTY_TRACKS],this)}Release(){this._instanceData=null;this._trackData=null;if(this._keyframeData){this._keyframeData.Release();this._keyframeData=null}if(this._propertyTrackData){this._propertyTrackData.Release();this._propertyTrackData=null}this._nestedData=null}GetTrackData(){return this._trackData}GetKeyframeData(){if(!this._keyframeData)this._keyframeData=new C3.KeyframeData(null,this);return this._keyframeData}GetPropertyTrackData(){if(!this._propertyTrackData)this._propertyTrackData=
new C3.PropertyTrackData(null,this);return this._propertyTrackData}GetInstanceData(){return this._instanceData}GetObjectClassIndex(){return this._objectClassIndex}SetObjectClassIndex(index){this._objectClassIndex=index}GetInstanceUID(){return this._instanceUid}SetInstanceUID(uid){this._instanceUid=uid}GetInterpolationMode(){return this._interpolationMode}SetInterpolationMode(im){this._interpolationMode=im}GetResultMode(){return this._resultMode}SetResultMode(rm){this._resultMode=rm}GetEnable(){return this._enabled}SetEnable(e){this._enabled=
!!e}GetId(){return this._id}GetStartOffset(){return this._startOffset}GetLocalTotalTime(){return this._localTotalTime}GetOriginalWidth(){return this._additionalInstanceData[ORIGINAL_WIDTH]}SetOriginalWidth(w){if(!this._additionalInstanceData)this._additionalInstanceData=[];this._additionalInstanceData[ORIGINAL_WIDTH]=w}GetOriginalHeight(){if(!this._additionalInstanceData)this._additionalInstanceData=[];return this._additionalInstanceData[ORIGINAL_HEIGHT]}SetOriginalHeight(h){if(!this._additionalInstanceData)this._additionalInstanceData=
[];this._additionalInstanceData[ORIGINAL_HEIGHT]=h}_SaveToJson(){return{"keyframeDataJson":this._keyframeData._SaveToJson(),"propertyTrackDataJson":this._propertyTrackData._SaveToJson(),"instanceData":this._instanceData,"additionalInstanceData":this._additionalInstanceData,"instanceUid":this._instanceUid,"objectClassIndex":this._objectClassIndex,"interpolationMode":this._interpolationMode,"resultMode":this._resultMode,"enabled":this._enabled,"id":this._id,"nestedData":this._nestedData}}_LoadFromJson(o){if(!o)return;
this._instanceData=o["instanceData"];this._instanceUid=o["instanceUid"];this._objectClassIndex=o["objectClassIndex"];this._interpolationMode=o["interpolationMode"];this._resultMode=o["resultMode"];this._enabled=o["enabled"];this._id=o["id"];this._localTotalTime=this._trackData.GetTimelineDataItem().GetTotalTime();if(o["nestedData"]){this._nestedData=o["nestedData"];this._startOffset=this._nestedData[START_OFFSET];this._localTotalTime=this._nestedData[LOCAL_TOTAL_TIME]}if(o["additionalInstanceData"])this._additionalInstanceData=
o["additionalInstanceData"];this.GetKeyframeData()._LoadFromJson(o["keyframeDataJson"]);this.GetPropertyTrackData()._LoadFromJson(o["propertyTrackDataJson"])}}C3.TrackData=class TrackData{constructor(tracksDataJson,timelineDataItem){this._timelineDataItem=timelineDataItem;this._trackDataItems=[];this._keyframeTimeMap=new Map;C3.TimelineDataManager._CreateDataItems(this._trackDataItems,tracksDataJson,TrackDataItem,this)}Release(){this._timelineDataItem=null;for(const trackDataItem of this._trackDataItems)trackDataItem.Release();
C3.clearArray(this._trackDataItems);this._trackDataItems=null;this._keyframeTimeMap.clear();this._keyframeTimeMap=null}GetTimelineDataItem(){return this._timelineDataItem}AddEmptyTrackDataItem(){const trackDataItem=new TrackDataItem(null,this);this._trackDataItems.push(trackDataItem);return trackDataItem}GetFirstKeyframeDataItem(trackDataItem){return trackDataItem.GetKeyframeData().GetKeyframeDataItemArray()[0]}GetLastKeyframeDataItem(trackDataItem){const keyframeDataItems=trackDataItem.GetKeyframeData().GetKeyframeDataItemArray();
return keyframeDataItems[keyframeDataItems.length-1]}GetKeyFrameDataItemAtTime(time,trackDataItem){const keyframeDataItemEntry=this._keyframeTimeMap.get(trackDataItem);if(!!keyframeDataItemEntry&&keyframeDataItemEntry.has(time))return keyframeDataItemEntry.get(time);for(const keyframeDataItem of trackDataItem.GetKeyframeData().keyframeDataItems())if(keyframeDataItem.GetTime()===time){if(!keyframeDataItemEntry)this._keyframeTimeMap.set(trackDataItem,new Map);this._keyframeTimeMap.get(trackDataItem).set(time,
keyframeDataItem);return keyframeDataItem}}GetFirstKeyFrameDataItemHigherThan(time,trackDataItem){for(const keyframeDataItem of trackDataItem.GetKeyframeData().keyframeDataItems())if(keyframeDataItem.GetTime()>time)return keyframeDataItem}GetFirstKeyFrameDataItemHigherOrEqualThan(time,trackDataItem){for(const keyframeDataItem of trackDataItem.GetKeyframeData().keyframeDataItems())if(keyframeDataItem.GetTime()>=time)return keyframeDataItem}GetFirstKeyFrameDataItemLowerOrEqualThan(time,trackDataItem){for(const keyframeDataItem of trackDataItem.GetKeyframeData().keyframeDataItemsReverse())if(keyframeDataItem.GetTime()<=
time)return keyframeDataItem}*trackDataItems(){for(const trackDataItem of this._trackDataItems)yield trackDataItem}_SaveToJson(){return{"trackDataItemsJson":this._trackDataItems.map(trackDataItem=>trackDataItem._SaveToJson())}}_LoadFromJson(o){if(!o)return;C3.TimelineDataManager._LoadDataItemsFromJson(this._trackDataItems,o["trackDataItemsJson"],TrackDataItem,this)}}};


// c3/timelines/data/propertyTrackData.js
'use strict';{const C3=self.C3;const SOURCE_DATA=0;const SOURCE=0;const PROPERTY=1;const TYPE=2;const MIN=3;const MAX=4;const INTERPOLATION_MODE=5;const RESULT_MODE=6;const ENABLED=7;const PROPERTY_KEYFRAMES=8;class PropertyTrackDataItem{constructor(propertyTrackDataJson,propertyTrackData){this._propertyTrackData=propertyTrackData;this._sourceAdapterId="";this._sourceAdapterArguments=null;this._property=null;this._type=null;this._min=NaN;this._max=NaN;this._interpolationMode="default";this._resultMode=
"default";this._enabled=false;this._propertyKeyframeData=null;if(!propertyTrackDataJson)return;this._sourceAdapterId=propertyTrackDataJson[SOURCE_DATA][SOURCE];this._sourceAdapterArguments=propertyTrackDataJson[SOURCE_DATA].slice(1);this._property=propertyTrackDataJson[PROPERTY];this._type=propertyTrackDataJson[TYPE];this._min=propertyTrackDataJson[MIN];this._max=propertyTrackDataJson[MAX];this._interpolationMode=propertyTrackDataJson[INTERPOLATION_MODE];this._resultMode=propertyTrackDataJson[RESULT_MODE];
this._enabled=!!propertyTrackDataJson[ENABLED];this._propertyKeyframeData=new C3.PropertyKeyframeData(propertyTrackDataJson[PROPERTY_KEYFRAMES],this)}Release(){this._propertyKeyframeData.Release();this._propertyKeyframeData=null;this._propertyTrackData=null;this._sourceAdapterArguments=null}GetPropertyTrackData(){return this._propertyTrackData}GetPropertyKeyframeData(){if(!this._propertyKeyframeData)this._propertyKeyframeData=new C3.PropertyKeyframeData(null,this);return this._propertyKeyframeData}GetSourceAdapterId(){return this._sourceAdapterId}SetSourceAdapterId(said){this._sourceAdapterId=
said}GetSourceAdapterArguments(){return this._sourceAdapterArguments}SetSourceAdapterArguments(sargs){this._sourceAdapterArguments=sargs}GetProperty(){return this._property}SetProperty(p){this._property=p}GetType(){return this._type}SetType(t){this._type=t}GetMin(){return this._min}SetMin(min){this._min=min}GetMax(){return this._max}SetMax(max){this._max=max}GetInterpolationMode(){return this._interpolationMode}SetInterpolationMode(im){this._interpolationMode=im}GetResultMode(){return this._resultMode}SetResultMode(rm){this._resultMode=
rm}GetEnable(){return this._enabled}SetEnable(e){this._enabled=!!e}_SaveToJson(){return{"propertyKeyframeDataJson":this._propertyKeyframeData._SaveToJson(),"sourceAdapterId":this._sourceAdapterId,"sourceAdapterArguments":this._sourceAdapterArguments,"property":this._property,"type":this._type,"min":this._min,"max":this._max,"interpolationMode":this._interpolationMode,"resultMode":this._resultMode,"enabled":this._enabled}}_LoadFromJson(o){if(!o)return;this._sourceAdapterId=o["sourceAdapterId"];this._sourceAdapterArguments=
o["sourceAdapterArguments"];this._property=o["property"];this._type=o["type"];this._min=o["min"];this._max=o["max"];this._interpolationMode=o["interpolationMode"];this._resultMode=o["resultMode"];this._enabled=o["enabled"];this.GetPropertyKeyframeData()._LoadFromJson(o["propertyKeyframeDataJson"])}}C3.PropertyTrackData=class PropertyTrackData{constructor(propertyTracksDataJson,trackDataItem){this._trackDataItem=trackDataItem;this._propertyTrackDataItems=[];this._propertyKeyframeTimeMap=new Map;C3.TimelineDataManager._CreateDataItems(this._propertyTrackDataItems,
propertyTracksDataJson,PropertyTrackDataItem,this)}Release(){this._trackDataItem=null;for(const propertyTrackDataItem of this._propertyTrackDataItems)propertyTrackDataItem.Release();C3.clearArray(this._propertyTrackDataItems);this._propertyTrackDataItems=null;this._propertyKeyframeTimeMap.clear();this._propertyKeyframeTimeMap=null}GetTrackDataItem(){return this._trackDataItem}AddEmptyPropertyTrackDataItem(){const propertyTrackDataItem=new PropertyTrackDataItem(null,this);this._propertyTrackDataItems.push(propertyTrackDataItem);
return propertyTrackDataItem}GetFirstPropertyKeyframeDataItem(propertyTrackDataItem){const propertyKeyframeData=propertyTrackDataItem.GetPropertyKeyframeData();return propertyKeyframeData.GetPropertyKeyframeDataItemArray()[0]}GetLastPropertyKeyframeDataItem(propertyTrackDataItem){const propertyKeyframeData=propertyTrackDataItem.GetPropertyKeyframeData();const propertyKeyframeDataItems=propertyKeyframeData.GetPropertyKeyframeDataItemArray();return propertyKeyframeDataItems[propertyKeyframeDataItems.length-
1]}GetPropertyKeyFrameDataItemAtTime(time,propertyTrackDataItem){const propertyKeyframeDataItemEntry=this._propertyKeyframeTimeMap.get(propertyTrackDataItem);if(!!propertyKeyframeDataItemEntry&&propertyKeyframeDataItemEntry.has(time))return propertyKeyframeDataItemEntry.get(time);const propertyKeyframeData=propertyTrackDataItem.GetPropertyKeyframeData();for(const propertyKeyframeDataItem of propertyKeyframeData.propertyKeyframeDataItems())if(propertyKeyframeDataItem.GetTime()===time){if(!propertyKeyframeDataItemEntry)this._propertyKeyframeTimeMap.set(propertyTrackDataItem,
new Map);this._propertyKeyframeTimeMap.get(propertyTrackDataItem).set(time,propertyKeyframeDataItem);return propertyKeyframeDataItem}}GetFirstPropertyKeyFrameDataItemHigherThan(time,propertyTrackDataItem){const propertyKeyframeData=propertyTrackDataItem.GetPropertyKeyframeData();for(const propertyKeyframeDataItem of propertyKeyframeData.propertyKeyframeDataItems())if(propertyKeyframeDataItem.GetTime()>time)return propertyKeyframeDataItem}GetFirstPropertyKeyFrameDataItemHigherOrEqualThan(time,propertyTrackDataItem){const propertyKeyframeData=
propertyTrackDataItem.GetPropertyKeyframeData();for(const propertyKeyframeDataItem of propertyKeyframeData.propertyKeyframeDataItems())if(propertyKeyframeDataItem.GetTime()>=time)return propertyKeyframeDataItem}GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(time,propertyTrackDataItem){const propertyKeyframeData=propertyTrackDataItem.GetPropertyKeyframeData();for(const propertyKeyframeDataItem of propertyKeyframeData.propertyKeyframeDataItemsReverse())if(propertyKeyframeDataItem.GetTime()<=time)return propertyKeyframeDataItem}*propertyTrackDataItems(){for(const propertyTrackDataItem of this._propertyTrackDataItems)yield propertyTrackDataItem}_SaveToJson(){return{"propertyTrackDataItemsJson":this._propertyTrackDataItems.map(propertyTrackDataItem=>
propertyTrackDataItem._SaveToJson())}}_LoadFromJson(o){if(!o)return;C3.TimelineDataManager._LoadDataItemsFromJson(this._propertyTrackDataItems,o["propertyTrackDataItemsJson"],PropertyTrackDataItem,this)}}};


// c3/timelines/data/keyframeData.js
'use strict';{const C3=self.C3;const TIME=0;const EASE=1;const ENABLE=2;const TAGS=3;class KeyframeDataItem{constructor(keyframeDataJson,keyframeData){this._keyframeData=keyframeData;this._time=-1;this._ease="noease";this._enable=false;this._tags=null;this._lowerTags=null;if(!keyframeDataJson)return;this._time=keyframeDataJson[TIME];this._ease=keyframeDataJson[EASE];this._enable=!!keyframeDataJson[ENABLE];const tagStr=keyframeDataJson[TAGS];this._tags=tagStr?tagStr.split(" "):[];this._lowerTags=new Set(this._tags.map(t=>
t.toLowerCase()))}Release(){this._keyframeData=null;C3.clearArray(this._tags);this._tags=null;this._lowerTags.clear();this._lowerTags=null}GetKeyframeData(){return this._keyframeData}GetTime(){return this._time}SetTime(t){this._time=t}GetEase(){return this._ease}SetEase(e){this._ease=e}GetEnable(){return this._enable}SetEnable(e){this._enable=!!e}GetTags(){return this._tags}SetTags(t){this._tags=t?t.split(" "):[];this._lowerTags=new Set(this._tags.map(t=>t.toLowerCase()))}GetLowerTags(){return this._lowerTags}HasTag(tag){return this._lowerTags.has(tag.toLowerCase())}_SaveToJson(){return{"time":this._time,
"ease":this._ease,"enable":this._enable,"tags":this._tags}}_LoadFromJson(o){if(!o)return;this._time=o["time"];this._ease=o["ease"];this._enable=o["enable"];this._tags=o["tags"];this._lowerTags=new Set(this._tags.map(t=>t.toLowerCase()))}}C3.KeyframeData=class KeyframeData{constructor(keyframesDataJson,trackDataItem){this._trackDataItem=trackDataItem;this._keyframeDataItems=[];C3.TimelineDataManager._CreateDataItems(this._keyframeDataItems,keyframesDataJson,KeyframeDataItem,this)}Release(){this._trackDataItem=
null;for(const keyframeDataItem of this._keyframeDataItems)keyframeDataItem.Release();C3.clearArray(this._keyframeDataItems);this._keyframeDataItems=null}GetTrackDataItem(){return this._trackDataItem}GetKeyframeDataItemCount(){return this._keyframeDataItems.length}GetKeyframeDataItemArray(){return this._keyframeDataItems}AddEmptyKeyframeDataItem(){const keyframeDataItem=new KeyframeDataItem(null,this);this._keyframeDataItems.push(keyframeDataItem);return keyframeDataItem}DeleteKeyframeDataItems(match){for(const keyframeDataItem of this._keyframeDataItems){if(!match(keyframeDataItem))continue;
const index=this._keyframeDataItems.indexOf(keyframeDataItem);if(index===-1)continue;keyframeDataItem.Release();this._keyframeDataItems.splice(index,1)}this.SortKeyframeDataItems()}SortKeyframeDataItems(){this._keyframeDataItems.sort((a,b)=>a.GetTime()-b.GetTime())}GetKeyframeDataItemIndex(keyframeDataItem){return this._keyframeDataItems.indexOf(keyframeDataItem)}GetKeyframeDataItemFromIndex(index){return this._keyframeDataItems[index]}*keyframeDataItems(){for(const keyframeDataItem of this._keyframeDataItems)yield keyframeDataItem}*keyframeDataItemsReverse(){for(let i=
this._keyframeDataItems.length-1;i>=0;i--)yield this._keyframeDataItems[i]}_SaveToJson(){return{"keyframeDataItemsJson":this._keyframeDataItems.map(keyframeDataItem=>keyframeDataItem._SaveToJson())}}_LoadFromJson(o){if(!o)return;C3.TimelineDataManager._LoadDataItemsFromJson(this._keyframeDataItems,o["keyframeDataItemsJson"],KeyframeDataItem,this)}}};


// c3/timelines/data/propertyKeyframeData.js
'use strict';{const C3=self.C3;const VALUE_DATA=0;const VALUE_DATA_VALUE=0;const VALUE_DATA_ABSOLUTE_VALUE=1;const VALUE_DATA_TYPE=2;const TIME=1;const EASE=2;const ENABLE=3;const ADDONS=4;class PropertyKeyframeDataItem{constructor(propertyKeyframeDataJson,propertyKeyframeData){this._propertyKeyframeData=propertyKeyframeData;this._value=null;this._aValue=null;this._type="";this._time=NaN;this._ease="noease";this._enable=false;this._addonData=null;if(!propertyKeyframeDataJson)return;this._value=propertyKeyframeDataJson[VALUE_DATA][VALUE_DATA_VALUE];
this._aValue=propertyKeyframeDataJson[VALUE_DATA][VALUE_DATA_ABSOLUTE_VALUE];this._type=propertyKeyframeDataJson[VALUE_DATA][VALUE_DATA_TYPE];this._time=propertyKeyframeDataJson[TIME];this._ease=propertyKeyframeDataJson[EASE];this._enable=!!propertyKeyframeDataJson[ENABLE];this._addonData=null;if(!!propertyKeyframeDataJson[ADDONS])this._addonData=new C3.AddonData(propertyKeyframeDataJson[ADDONS],this)}Release(){this._propertyKeyframeData=null;if(this._addonData){this._addonData.Release();this._addonData=
null}}GetAddonData(){return this._addonData}GetValue(){return this._value}SetValue(value){if(this._type==="color"&&C3.IsFiniteNumber(value)){this._value[0]=C3.GetRValue(value);this._value[1]=C3.GetGValue(value);this._value[2]=C3.GetBValue(value)}else this._value=value}GetAbsoluteValue(){return this._aValue}SetAbsoluteValue(aValue){if(this._type==="color"&&C3.IsFiniteNumber(aValue)){this._aValue[0]=C3.GetRValue(aValue);this._aValue[1]=C3.GetGValue(aValue);this._aValue[2]=C3.GetBValue(aValue)}else this._aValue=
aValue}GetValueWithResultMode(){const rm=this._propertyKeyframeData.GetPropertyTrackDataItem().GetResultMode();if(rm==="relative")return this.GetValue();else if(rm==="absolute")return this.GetAbsoluteValue()}GetType(){return this._type}SetType(t){this._type=t}GetTime(){return this._time}SetTime(t){this._time=t}GetEase(){return this._ease}SetEase(e){this._ease=e}GetEnable(){return this._enable}SetEnable(e){this._enable=!!e}GetAddOn(id){if(!this.GetAddonData())return;for(const addonDataItem of this.GetAddonData().addonDataItems())if(addonDataItem.GetId()===
id)return addonDataItem}_SaveToJson(){const aData=this._addonData;return{"addonDataJson":aData?aData._SaveToJson():aData,"value":this._value,"aValue":this._aValue,"type":this._type,"time":this._time,"ease":this._ease,"enable":this._enable}}_LoadFromJson(o){if(!o)return;if(o["addonDataJson"])this._addonData._SetFromJson(o["addonDataJson"]);this._value=o["value"];this._aValue=o["aValue"];this._type=o["type"];this._time=o["time"];this._ease=o["ease"];this._enable=o["enable"]}}C3.PropertyKeyframeData=
class PropertyKeyframeData{constructor(propertyKeyframesDataJson,propertyTrackDataItem){this._propertyTrackDataItem=propertyTrackDataItem;this._propertyKeyframeDataItems=[];C3.TimelineDataManager._CreateDataItems(this._propertyKeyframeDataItems,propertyKeyframesDataJson,PropertyKeyframeDataItem,this)}Release(){this._propertyTrackDataItem=null;for(const propertyKeyframeDataItem of this._propertyKeyframeDataItems)propertyKeyframeDataItem.Release();C3.clearArray(this._propertyKeyframeDataItems);this._propertyKeyframeDataItems=
null}AddEmptyPropertyKeyframeDataItem(){const propertyKeyframeDataItem=new PropertyKeyframeDataItem(null,this);this._propertyKeyframeDataItems.push(propertyKeyframeDataItem);return propertyKeyframeDataItem}DeletePropertyKeyframeDataItems(match){for(const propertyKeyframeDataItem of this._propertyKeyframeDataItems){if(!match(propertyKeyframeDataItem))continue;const index=this._propertyKeyframeDataItems.indexOf(propertyKeyframeDataItem);if(index===-1)continue;propertyKeyframeDataItem.Release();this._propertyKeyframeDataItems.splice(index,
1)}this.SortPropertyKeyFrameDataItems()}SortPropertyKeyFrameDataItems(){this._propertyKeyframeDataItems.sort((a,b)=>a.GetTime()-b.GetTime())}GetPropertyTrackDataItem(){return this._propertyTrackDataItem}GetPropertyKeyframeDataItemCount(){return this._propertyKeyframeDataItems.length}GetPropertyKeyframeDataItemArray(){return this._propertyKeyframeDataItems}*propertyKeyframeDataItems(){for(const propertyKeyframeDataItem of this._propertyKeyframeDataItems)yield propertyKeyframeDataItem}*propertyKeyframeDataItemsReverse(){for(let i=
this._propertyKeyframeDataItems.length-1;i>=0;i--)yield this._propertyKeyframeDataItems[i]}_SaveToJson(){return{"propertyKeyframeDataItemsJson":this._propertyKeyframeDataItems.map(propertyTrackDataItem=>propertyTrackDataItem._SaveToJson())}}_LoadFromJson(o){if(!o)return;C3.TimelineDataManager._LoadDataItemsFromJson(this._propertyKeyframeDataItems,o["propertyKeyframeDataItemsJson"],PropertyKeyframeDataItem,this)}}};


// c3/timelines/data/propertyKeyframeAddonData.js
'use strict';{const C3=self.C3;const ADDON_ID=0;const ADDON_DATA=1;class AddonDataItem{constructor(addonDataJson,addonData){this._addonData=addonData;this._id=addonDataJson[ADDON_ID];this._data=addonDataJson[ADDON_DATA]}Release(){this._addonData=null;this._data=null}GetAddonData(){return this._addonData}GetId(){return this._id}_SaveToJson(){return{"id":this._id,"data":this._data}}_LoadFromJson(o){if(!o)return;this._id=o["id"];this._data=o["data"]}}const START_ANCHOR=0;const START_ENABLE=1;const END_ANCHOR=
2;const END_ENABLE=3;class AddonDataCubicBezierItem extends AddonDataItem{constructor(addonDataJson,addonData){super(addonDataJson,addonData);this._startAnchor=this._data[START_ANCHOR];this._startEnable=!!this._data[START_ENABLE];this._endAnchor=this._data[END_ANCHOR];this._endEnable=!!this._data[END_ENABLE]}Release(){super.Release()}GetStartAnchor(){return this._startAnchor}GetStartEnable(){return this._startEnable}GetEndAnchor(){return this._endAnchor}GetEndEnable(){return this._endEnable}_SaveToJson(){return Object.assign(super._SaveToJson(),
{"startAnchor":this._startAnchor,"startEnable":!!this._startEnable,"endAnchor":this._endAnchor,"endEnable":!!this._endEnable})}_LoadFromJson(o){if(!o)return;super._LoadFromJson(o);this._startAnchor=o["startAnchor"];this._startEnable=!!o["startEnable"];this._endAnchor=o["endAnchor"];this._endEnable=!!o["endEnable"]}}const DIRECTION=0;const REVOLUTIONS=1;class AddonDataAngleItem extends AddonDataItem{constructor(addonDataJson,addonData){super(addonDataJson,addonData);this._direction=this._data[DIRECTION];
this._revolutions=this._data[REVOLUTIONS]}Release(){super.Release()}GetDirection(){return this._direction}GetRevolutions(){return this._revolutions}_SaveToJson(){return Object.assign(super._SaveToJson(),{"direction":this._direction,"revolutions":this._revolutions})}_LoadFromJson(o){if(!o)return;super._LoadFromJson(o);this._direction=o["direction"];this._revolutions=o["revolutions"]}}C3.AddonData=class AddonData{constructor(addonsDataJson,propertyKeyframeDataItem){this._propertyKeyframeDataItem=propertyKeyframeDataItem;
this._addonDataItems=[];C3.TimelineDataManager._CreateDataItems(this._addonDataItems,addonsDataJson,{prop:0,map:new Map([["cubic-bezier",AddonDataCubicBezierItem],["angle",AddonDataAngleItem]])},this)}Release(){this._propertyKeyframeDataItem=null;for(const addonDataItem of this._addonDataItems)addonDataItem.Release();C3.clearArray(this._addonDataItems);this._addonDataItems=null}GetPropertyKeyframeDataItem(){return this._propertyKeyframeDataItem}*addonDataItems(){for(const addonDataItem of this._addonDataItems)yield addonDataItem}_SaveToJson(){return{"addonDataItemsJson":this._addonDataItems.map(addonDataItem=>
addonDataItem._SaveToJson())}}_LoadFromJson(o){if(!o)return;C3.TimelineDataManager._LoadDataItemsFromJson(this._addonDataItems,o["addonDataItemsJson"],{prop:"id",map:new Map([["cubic-bezier",AddonDataCubicBezierItem],["angle",AddonDataAngleItem]])},this)}}};


// c3/timelines/tweens/tween.js
'use strict';{const C3=self.C3;const INITIAL_VALUE_MODE_START_VALUE="start-value";const INITIAL_VALUE_MODE_CURRENT_STATE="current-state";let createdTweens=0;C3.Tween=class Tween extends C3.TimelineState{constructor(tweenDataItem,timelineManager){super(`tween-${createdTweens++}`,tweenDataItem,timelineManager);this._id="";this._destroyInstanceOnComplete=false;this._initialValueMode=INITIAL_VALUE_MODE_START_VALUE;this._on_completed_callbacks=null;this._on_started_callbacks=null}GetInstance(){const tracks=
this.GetTracks();if(!tracks||!tracks.length)return;const track=tracks[0];if(!track)return;const instance=track.GetInstance();return track.IsInstanceValid()?instance:null}AddStartedCallback(c){if(!this._on_started_callbacks)this._on_started_callbacks=[];this._on_started_callbacks.push(c)}AddCompletedCallback(c){if(!this._on_completed_callbacks)this._on_completed_callbacks=[];this._on_completed_callbacks.push(c)}RemoveStartedCallback(c){if(!this._on_started_callbacks)return;const index=this._on_started_callbacks.indexOf(c);
if(index!==-1)this._on_started_callbacks.splice(index,1)}RemoveCompletedCallback(c){if(!this._on_completed_callbacks)return;const index=this._on_completed_callbacks.indexOf(c);if(index!==-1)this._on_completed_callbacks.splice(index,1)}SetStartValue(startValue,propertyName){for(const track of this._tracks)for(const propertyTrack of track._propertyTracks){if(propertyTrack.GetPropertyName()!==propertyName)continue;const propertyTrackData=propertyTrack.GetPropertyTrackData();const propertyTrackDataItem=
propertyTrack.GetPropertyTrackDataItem();const propertyKeyframeDataItem=propertyTrackData.GetFirstPropertyKeyframeDataItem(propertyTrackDataItem);propertyKeyframeDataItem.SetValue(startValue);propertyKeyframeDataItem.SetAbsoluteValue(startValue)}}_GetPropertyTrackState(propertyName){for(const track of this._tracks)for(const propertyTrack of track._propertyTracks)if(propertyTrack.GetPropertyName()===propertyName)return propertyTrack}BeforeSetEndValues(properties){for(const propertyName of properties){const propertyTrackState=
this._GetPropertyTrackState(propertyName);this.SetStartValue(propertyTrackState.GetCurrentState(),propertyName)}if(this.IsForwardPlayBack()){this.SetTotalTime(this.GetTotalTime()-this.GetTime());this._SetTime(0)}else{this.SetTotalTime(this.GetTime());this._SetTime(this.GetTotalTime())}this.SetInitialStateFromSetTime()}SetEndValue(endValue,propertyName){const propertyTrackState=this._GetPropertyTrackState(propertyName);const propertyTrackData=propertyTrackState.GetPropertyTrackData();const propertyTrackDataItem=
propertyTrackState.GetPropertyTrackDataItem();const propertyKeyframeDataItem=propertyTrackData.GetLastPropertyKeyframeDataItem(propertyTrackDataItem);propertyKeyframeDataItem.SetTime(this.GetTotalTime());propertyKeyframeDataItem.SetValue(endValue);propertyKeyframeDataItem.SetAbsoluteValue(endValue)}SetId(id){this._id=id}GetId(){return this._id}SetInitialValueMode(initialValueMode){this._initialValueMode=initialValueMode}GetInitialValueMode(){return this._initialValueMode}SetDestroyInstanceOnComplete(releaseOnComplete){this._destroyInstanceOnComplete=
releaseOnComplete}GetDestroyInstanceOnComplete(){return this._destroyInstanceOnComplete}OnStarted(){if(this._on_started_callbacks)for(const c of this._on_started_callbacks)c(this);if(this.IsComplete())return;for(const track of this._tracks)track.CompareSaveStateWithCurrent()}OnCompleted(){this._completedTick=this._runtime.GetTickCount()}FinishTriggers(){if(this._finishedTriggers)return;this._finishedTriggers=true;if(this._on_completed_callbacks)for(const c of this._on_completed_callbacks)c(this)}SetTime(time){this._DeleteIntermediateKeyframes();
super.SetTime(time)}SetInitialState(fromSetTime){if(!this.InitialStateSet()&&this.GetInitialValueMode()===INITIAL_VALUE_MODE_CURRENT_STATE)for(const track of this._tracks)track.CompareInitialStateWithCurrent();super.SetInitialState(fromSetTime)}Stop(completed=false){super.Stop(completed);if(this.IsComplete())return;for(const track of this._tracks)track.SaveState()}Reset(render=true,beforeChangeLayout=false){this._DeleteIntermediateKeyframes();super.Reset(render,beforeChangeLayout)}_DeleteIntermediateKeyframes(){for(const track of this._tracks){const del=
kf=>{const time=kf.GetTime();const totalTime=this.GetTotalTime();return time!==0&&time!==totalTime};track.DeleteKeyframes(del);track.DeletePropertyKeyframes(del)}}_OnBeforeChangeLayout(){if(this.IsReleased())return true;const instance=this.GetInstance();if(instance&&instance.GetObjectClass().IsGlobal())return false;this._timelineManager.CompleteTimeline(this);this.ResetBeforeChangeLayout();return true}MaybeTriggerKeyframeReachedConditions(){}Tick(deltaTime,timeScale){const instance=this.GetInstance();
const dt=this.GetRuntime().GetDt(instance);super.Tick(dt,1)}_SaveToJson(){const ret=super._SaveToJson();const tweenDataItem=this.GetTimelineDataItem();return Object.assign(ret,{"tweenDataItemJson":tweenDataItem._SaveToJson(),"id":this._id,"destroyInstanceOnComplete":this._destroyInstanceOnComplete,"initialValueMode":this._initialValueMode})}_LoadFromJson(o){if(!o)return;const tweenDataItem=this.GetTimelineDataItem();tweenDataItem._LoadFromJson(o["tweenDataItemJson"]);super._LoadFromJson(o);this._id=
o["id"];this._destroyInstanceOnComplete=o["destroyInstanceOnComplete"];this._initialValueMode=o["initialValueMode"]}static IsPlaying(tween){return tween.IsPlaying()}static IsPaused(tween){return tween.IsPaused()}static Build(config){const timelineManager=config.runtime.GetTimelineManager();const tweenDataItem=new C3.TimelineDataItem;if(config.json){tweenDataItem._LoadFromJson(config.json["tweenDataItemJson"]);const tween=new C3.Tween(tweenDataItem,timelineManager);tween._LoadFromJson(config.json);
return tween}else{const tween=new C3.Tween(tweenDataItem,timelineManager);if(!C3.IsArray(config.propertyTracksConfig))config.propertyTracksConfig=[config.propertyTracksConfig];tween.SetId(config.id);tween.SetTags(config.tags);tween.SetInitialValueMode(config.initialValueMode);tween.SetDestroyInstanceOnComplete(config.releaseOnComplete);tween.SetLoop(config.loop);tween.SetPingPong(config.pingPong);tween.SetTotalTime(config.time);tween.SetStep(0);tween.SetInterpolationMode("default");tween.SetResultMode(config.propertyTracksConfig[0].resultMode);
const track=tween.AddTrack();track.SetInstanceUID(config.instance.GetUID());track.SetInterpolationMode("default");track.SetResultMode(config.propertyTracksConfig[0].resultMode);track.SetEnable(true);track.SetObjectClassIndex(config.instance.GetObjectClass().GetIndex());track.SetOriginalWidth(config.instance.GetWorldInfo().GetWidth());track.SetOriginalHeight(config.instance.GetWorldInfo().GetHeight());const startKeyframeDataItem=track.AddKeyframe();startKeyframeDataItem.SetTime(0);startKeyframeDataItem.SetEase("noease");
startKeyframeDataItem.SetEnable(true);startKeyframeDataItem.SetTags("");const endKeyframeDataItem=track.AddKeyframe();endKeyframeDataItem.SetTime(config.time);endKeyframeDataItem.SetEase("noease");endKeyframeDataItem.SetEnable(true);endKeyframeDataItem.SetTags("");for(const propertyTrackConfig of config.propertyTracksConfig){const propertyTrack=track.AddPropertyTrack();propertyTrack.SetSourceAdapterId(propertyTrackConfig.sourceId);propertyTrack.SetSourceAdapterArgs(propertyTrackConfig.sourceArgs);
propertyTrack.SetPropertyName(propertyTrackConfig.property);propertyTrack.SetPropertyType(propertyTrackConfig.type);propertyTrack.SetMin(NaN);propertyTrack.SetMax(NaN);propertyTrack.SetInterpolationMode("default");propertyTrack.SetResultMode(propertyTrackConfig.resultMode);propertyTrack.SetEnable(true);const startPropertyKeyframeDataItem=propertyTrack.AddPropertyKeyframe();startPropertyKeyframeDataItem.SetType(propertyTrackConfig.valueType);startPropertyKeyframeDataItem.SetTime(0);startPropertyKeyframeDataItem.SetEase(propertyTrackConfig.ease);
startPropertyKeyframeDataItem.SetEnable(true);startPropertyKeyframeDataItem.SetValue(propertyTrackConfig.startValue);startPropertyKeyframeDataItem.SetAbsoluteValue(propertyTrackConfig.startValue);const endPropertyKeyframeDataItem=propertyTrack.AddPropertyKeyframe();endPropertyKeyframeDataItem.SetType(propertyTrackConfig.valueType);endPropertyKeyframeDataItem.SetTime(config.time);endPropertyKeyframeDataItem.SetEase(propertyTrackConfig.ease);endPropertyKeyframeDataItem.SetEnable(true);endPropertyKeyframeDataItem.SetValue(propertyTrackConfig.endValue);
endPropertyKeyframeDataItem.SetAbsoluteValue(propertyTrackConfig.endValue)}return tween}}}};


// c3/timelines/transitions/transition.js
'use strict';{const C3=self.C3;const Ease=self.Ease;const NAME=0;const TRANSITION_KEYFRAMES=1;C3.Transition=class Transition extends C3.DefendedBase{constructor(data){super();this._name=data[NAME];this._transitionKeyframes=[];for(const transitionKeyframeData of data[TRANSITION_KEYFRAMES]){const transitionKeyframe=C3.TransitionKeyframe.Create(this,transitionKeyframeData);this._transitionKeyframes.push(transitionKeyframe)}this._precalculatedSamples=new Map;this._transitionKeyframeCache=new Map;this._PreCalcSamples();
Ease.AddCustomEase(this._name,(t,sv,dv,tt)=>this.Interpolate(t,sv,dv,tt))}static Create(data){return C3.New(C3.Transition,data)}Release(){for(const transitionKeyframe of this._transitionKeyframes)transitionKeyframe.Release();C3.clearArray(this._transitionKeyframes);this._transitionKeyframes=null;this._precalculatedSamples.clear();this._precalculatedSamples=null;this._transitionKeyframeCache.clear();this._transitionKeyframeCache=null}GetTransitionKeyFrameAt(x){const transitionKeyframe=this._transitionKeyframeCache.get(x);
if(transitionKeyframe)return transitionKeyframe;for(const transitionKeyframe of this._transitionKeyframes)if(transitionKeyframe.GetValueX()===x){this._transitionKeyframeCache.set(x,transitionKeyframe);return transitionKeyframe}}GetFirstTransitionKeyFrameHigherThan(x){for(const transitionKeyframe of this._transitionKeyframes)if(transitionKeyframe.GetValueX()>x)return transitionKeyframe}GetFirstTransitionKeyFrameHigherOrEqualThan(x){for(const transitionKeyframe of this._transitionKeyframes)if(transitionKeyframe.GetValueX()>=
x)return transitionKeyframe}GetFirstTransitionKeyFrameLowerOrEqualThan(x){for(let i=this._transitionKeyframes.length-1;i>=0;i--){const transitionKeyframe=this._transitionKeyframes[i];if(transitionKeyframe.GetValueX()<=x)return transitionKeyframe}}Interpolate(time,startValue,deltaValue,totalTime){const n=time/totalTime;let start=this.GetTransitionKeyFrameAt(n);let end=null;if(start)end=this.GetFirstTransitionKeyFrameHigherThan(n);else{start=this.GetFirstTransitionKeyFrameLowerOrEqualThan(n);end=this.GetFirstTransitionKeyFrameHigherOrEqualThan(n)}const delta=
end.GetValueX()-start.GetValueX();const nn=C3.mapToRange(n,start.GetValueX(),end.GetValueX(),0,delta);const startX=start.GetValueX();const startY=start.GetValueY();const anchor1X=start.GetValueX()+start.GetStartAnchorX();const anchor1Y=start.GetValueY()+start.GetStartAnchorY();const anchor2X=end.GetValueX()+end.GetEndAnchorX();const anchor2Y=end.GetValueY()+end.GetEndAnchorY();const endX=end.GetValueX();const endY=end.GetValueY();let ret=Ease.GetRuntimeEase("spline")(nn,startX,startY,anchor1X,anchor1Y,
anchor2X,anchor2Y,endX,endY,this._precalculatedSamples.get(start));ret+=start.GetValueY();return(1-ret)*startValue+ret*(startValue+deltaValue)}_PreCalcSamples(){this._precalculatedSamples.clear();for(let i=0;i<this._transitionKeyframes.length-1;i++){const transitionKeyframe=this._transitionKeyframes[i];if(!transitionKeyframe.GetStartEnable())continue;const start=transitionKeyframe;const end=this._transitionKeyframes[i+1];const startValue=start.GetValueX();const anchor1Value=start.GetValueX()+start.GetStartAnchorX();
const anchor2Value=end.GetValueX()+end.GetEndAnchorX();const endValue=end.GetValueX();this._precalculatedSamples.set(start,Ease.GetBezierSamples(startValue,anchor1Value,anchor2Value,endValue))}}}};


// c3/timelines/transitions/transitionKeyframe.js
'use strict';{const C3=self.C3;const VALUE_X=0;const VALUE_Y=1;const START_ANCHOR_X=2;const START_ANCHOR_Y=3;const END_ANCHOR_X=4;const END_ANCHOR_Y=5;const START_ENABLE=6;const END_ENABLE=7;C3.TransitionKeyframe=class TransitionKeyframe extends C3.DefendedBase{constructor(transition,data){super();this._transition=transition;this._valueX=data[VALUE_X];this._valueY=data[VALUE_Y];this._startAnchorX=data[START_ANCHOR_X];this._startAnchorY=data[START_ANCHOR_Y];this._endAnchorX=data[END_ANCHOR_X];this._endAnchorY=
data[END_ANCHOR_Y];this._startEnable=data[START_ENABLE];this._endEnable=data[END_ENABLE]}Release(){this._transition=null}static Create(transition,data){return C3.New(C3.TransitionKeyframe,transition,data)}GetValueX(){return this._valueX}GetValueY(){return this._valueY}GetStartAnchorX(){return this._startAnchorX}GetStartAnchorY(){return this._startAnchorY}GetEndAnchorX(){return this._endAnchorX}GetEndAnchorY(){return this._endAnchorY}GetStartEnable(){return this._startEnable}GetEndEnable(){return this._endEnable}}};


// c3/timelines/transitions/transitionManager.js
'use strict';{const C3=self.C3;C3.TransitionManager=class TransitionManager extends C3.DefendedBase{constructor(runtime){super();this._runtime=runtime;this._transitions=[]}Release(){for(const transition of this._transitions)transition.Release();C3.clearArray(this._transitions);this._transitions=null}Create(transitionData){this._transitions.push(C3.Transition.Create(transitionData))}}};


// c3/events/stacks/solStack.js
'use strict';{const C3=self.C3;C3.SolStack=class SolStack extends C3.DefendedBase{constructor(objectClass){super();this._objectClass=objectClass;this._stack=[];this._stack.push(C3.New(C3.Sol,this));this._index=0;this._current=this._stack[0]}Release(){for(const s of this._stack)s.Release();C3.clearArray(this._stack);this._current=null;this._objectClass=null}GetObjectClass(){return this._objectClass}GetCurrentSol(){return this._current}Clear(){this.GetCurrentSol().Clear()}PushClean(){const stack=this._stack;
const index=++this._index;if(index===stack.length){const sol=C3.New(C3.Sol,this);stack.push(sol);this._current=sol}else{const sol=stack[index];sol.Reset();this._current=sol}}PushCopy(){const stack=this._stack;const index=++this._index;if(index===stack.length)stack.push(C3.New(C3.Sol,this));const sol=stack[index];sol.Copy(stack[index-1]);this._current=sol}Pop(){this._current=this._stack[--this._index]}RemoveInstances(s){const stack=this._stack;for(let i=0,len=stack.length;i<len;++i)stack[i].RemoveInstances(s)}}};


// c3/events/stacks/sol.js
'use strict';{const C3=self.C3;C3.Sol=class Sol extends C3.DefendedBase{constructor(stack){super();this._stack=stack;this._objectClass=this._stack.GetObjectClass();this._eventStack=this._objectClass.GetRuntime().GetEventStack();this._selectAll=true;this._instances=[];this._elseInstances=[]}Release(){this.ClearArrays();this._stack=null;this._objectClass=null;this._eventStack=null}ClearArrays(){C3.clearArray(this._instances);C3.clearArray(this._elseInstances)}GetObjectClass(){return this._objectClass}IsSelectAll(){return this._selectAll}HasAnyInstances(){if(this._selectAll)return!!this._objectClass.GetInstanceCount();
else return!!this._instances.length}GetInstances(){if(this._selectAll)return this._objectClass.GetInstances();else return this._instances}HasAnyElseInstances(){return!!this._elseInstances.length}GetElseInstances(){return this._elseInstances}GetExpressionInstances(){const ret=this.GetInstances();if(ret.length)return ret;else return this._elseInstances}Reset(){this._selectAll=true;C3.clearArray(this._elseInstances)}Clear(){this._selectAll=true}Copy(sol){if(sol.IsSelectAll())this.Reset();else{this._selectAll=
false;C3.shallowAssignArray(this._instances,sol._instances);C3.clearArray(this._elseInstances)}}_PushInstance(inst){this._instances.push(inst)}_PushElseInstance(inst){this._elseInstances.push(inst)}_SetSelectAll(s){this._selectAll=!!s}_GetOwnInstances(){return this._instances}_GetOwnElseInstances(){return this._elseInstances}SetSinglePicked(inst){this._selectAll=false;C3.clearArray(this._instances);this._instances.push(inst)}SetArrayPicked(arr){this._selectAll=false;C3.shallowAssignArray(this._instances,
arr)}SetSetPicked(set){this._selectAll=false;C3.clearArray(this._instances);for(const item of set)this._instances.push(item)}AddElseInstances(setOfPicked,arrayOfAllPicked){for(const inst of arrayOfAllPicked)if(!setOfPicked.has(inst))this._elseInstances.push(inst)}TransferElseInstancesToOwn(setOfPicked){for(const inst of setOfPicked)this._instances.push(inst);C3.arrayRemoveAllInSet(this._elseInstances,setOfPicked)}PickOne(inst){if(!inst)return;if(this._eventStack.GetCurrentStackFrame().GetCurrentEvent().IsOrBlock()){if(this.IsSelectAll()){C3.clearArray(this._instances);
C3.shallowAssignArray(this._elseInstances,inst.GetObjectClass().GetInstances());this._selectAll=false}const i=this._elseInstances.indexOf(inst);if(i!==-1){this._instances.push(this._elseInstances[i]);this._elseInstances.splice(i,1)}}else this.SetSinglePicked(inst)}RemoveInstances(s){C3.arrayRemoveAllInSet(this._instances,s);C3.arrayRemoveAllInSet(this._elseInstances,s)}}};


// c3/events/stacks/eventStack.js
'use strict';{const C3=self.C3;C3.EventStack=class EventStack extends C3.DefendedBase{constructor(eventSheetManager){super();this._eventSheetManager=eventSheetManager;this._runtime=this._eventSheetManager.GetRuntime();this._stack=[];this._stack.push(C3.New(C3.EventStackFrame,this,null));this._index=0;this._expFuncStack=[]}Release(){for(const e of this._stack)e.Release();C3.clearArray(this._stack);C3.clearArray(this._expFuncStack);this._eventSheetManager=null;this._runtime=null}GetEventSheetManager(){return this._eventSheetManager}GetRuntime(){return this._runtime}GetCurrentStackFrame(){return this._stack[this._index]}Push(currentEvent){const stack=
this._stack;const index=++this._index;if(index===stack.length){const ret=C3.New(C3.EventStackFrame,this,currentEvent);stack.push(ret);return ret}else{const ret=stack[index];ret.Reset(currentEvent);return ret}}Pop(){--this._index}PushExpFunc(frame){this._expFuncStack.push(frame)}PopExpFunc(){this._expFuncStack.pop()}GetCurrentExpFuncStackFrame(){const expFuncStack=this._expFuncStack;if(expFuncStack.length===0)return null;else return expFuncStack[expFuncStack.length-1]}}};


// c3/events/stacks/eventStackFrame.js
'use strict';{const C3=self.C3;C3.EventStackFrame=class EventStackFrame extends C3.DefendedBase{constructor(stack,currentEvent){super();this._stack=stack;this._runtime=this._stack.GetRuntime();this._currentEvent=currentEvent;this._cndIndex=0;this._actIndex=0;this._lastEventTrue=false;this._elseBranchRan=false;this._expressionObjectClass=null;this._functionReturnType=0;this._functionReturnValue=0}Release(){this.Reset(null);this._stack=null;this._runtime=null}Reset(currentEvent){this._currentEvent=
currentEvent;this._cndIndex=0;this._actIndex=0;this._lastEventTrue=false;this._elseBranchRan=false}_Restore(currentEvent,actIndex){this._currentEvent=currentEvent;this._cndIndex=0;this._actIndex=actIndex}ResetQuick(){this._cndIndex=0;this._actIndex=0}GetCurrentEvent(){return this._currentEvent}SetCurrentEvent(currentEvent){this._currentEvent=currentEvent}GetConditionIndex(){return this._cndIndex}SetConditionIndex(i){this._cndIndex=i}GetActionIndex(){return this._actIndex}SetActionIndex(i){this._actIndex=
i}SetLastEventTrue(t){this._lastEventTrue=!!t}GetLastEventTrue(){return this._lastEventTrue}SetElseBranchRan(r){this._elseBranchRan=!!r}GetElseBranchRan(){return this._elseBranchRan}SetExpressionObjectClass(objectClass){this._expressionObjectClass=objectClass}GetExpressionObjectClass(){return this._expressionObjectClass}InitCallFunctionExpression(returnType,defaultReturnValue){this._functionReturnType=returnType;this._functionReturnValue=defaultReturnValue}GetFunctionReturnType(){return this._functionReturnType}SetFunctionReturnValue(v){this._functionReturnValue=
v}GetFunctionReturnValue(){return this._functionReturnValue}IsSolModifierAfterCnds(){const currentEvent=this._currentEvent;if(currentEvent.IsSolWriterAfterCnds())return true;if(this._cndIndex<currentEvent.GetConditionCount()-1)return!!currentEvent.GetSolModifiers().length;return false}}};


// c3/events/stacks/localVarStack.js
'use strict';{const C3=self.C3;C3.LocalVarStack=class LocalVarStack extends C3.DefendedBase{constructor(eventSheetManager){super();this._eventSheetManager=eventSheetManager;this._runtime=this._eventSheetManager.GetRuntime();this._stack=[];this._index=-1;this._current=null;this._initialValues=[]}Release(){C3.clearArray(this._stack);this._eventSheetManager=null;this._runtime=null}_SetInitialValues(initialValues){this._initialValues=initialValues;const arr=this._initialValues.slice(0);this._stack.push(arr);
this._index=0;this._current=arr}GetEventSheetManager(){return this._eventSheetManager}GetRuntime(){return this._runtime}GetCurrent(){return this._current}Push(){const index=++this._index;const stack=this._stack;if(index===stack.length)stack.push(this._initialValues.slice(0));else C3.shallowAssignArray(stack[index],this._initialValues);this._current=stack[index]}Pop(){this._current=this._stack[--this._index]}}};


// c3/events/stacks/loopStack.js
'use strict';{const C3=self.C3;C3.LoopStack=class LoopStack extends C3.DefendedBase{constructor(eventSheetManager){super();this._eventSheetManager=eventSheetManager;this._runtime=this._eventSheetManager.GetRuntime();this._stack=[];this._index=-1}Release(){C3.clearArray(this._stack);this._eventSheetManager=null;this._runtime=null}GetEventSheetManager(){return this._eventSheetManager}GetRuntime(){return this._runtime}IsInLoop(){return this._index>=0}GetCurrent(){return this._stack[this._index]}Push(){++this._index;
if(this._index===this._stack.length){const ret=C3.New(C3.Loop,this);this._stack.push(ret);return ret}else{const ret=this._stack[this._index];ret.Reset();return ret}}Pop(){--this._index}FindByName(name){const stack=this._stack;for(let i=this._index;i>=0;--i){const loop=stack[i];if(loop.GetName()===name)return loop}return null}_GetStack(){return this._stack.slice(0,this._index+1)}}};


// c3/events/stacks/loop.js
'use strict';{const C3=self.C3;C3.Loop=class Loop extends C3.DefendedBase{constructor(loopStack){super();this._loopStack=loopStack;this._name="";this._index=0;this._isStopped=false;this._end=NaN}Reset(){this._name="";this._index=0;this._isStopped=false;this._end=NaN}SetName(name){this._name=name}GetName(){return this._name}SetIndex(i){this._index=i}GetIndex(){return this._index}Stop(){this._isStopped=true}IsStopped(){return this._isStopped}SetEnd(e){this._end=e}GetEnd(){return this._end}}};


// c3/events/stacks/arrayStack.js
'use strict';{const C3=self.C3;C3.ArrayStack=class ArrayStack extends C3.DefendedBase{constructor(){super();this._stack=[];this._index=-1}Release(){C3.clearArray(this._stack)}GetCurrent(){return this._stack[this._index]}Push(){++this._index;if(this._index===this._stack.length){const ret=[];this._stack.push(ret);return ret}else return this._stack[this._index]}Pop(){--this._index}}};


// c3/events/eventSheetManager.js
'use strict';{const C3=self.C3;const assert=self.assert;function SortSolArray(a,b){return a.GetIndex()-b.GetIndex()}function IsSolArrayIdentical(a,b){for(let i=0,len=a.length;i<len;++i)if(a[i]!==b[i])return false;return true}C3.EventSheetManager=class EventSheetManager extends C3.DefendedBase{constructor(runtime){super();this._runtime=runtime;this._allSheets=[];this._sheetsByName=new Map;this._allGroups=[];this._groupsByName=new Map;this._blocksBySid=new Map;this._cndsBySid=new Map;this._actsBySid=
new Map;this._allUniqueSolModifiers=new Map;this._eventVarsBySid=new Map;this._nextLocalVarIndex=0;this._allGlobalVars=[];this._allLocalVars=[];this._localVarInitialValues=[];this._functionBlocksByName=new Map;this._eventStack=C3.New(C3.EventStack,this);this._localVarStack=C3.New(C3.LocalVarStack,this);this._loopStack=C3.New(C3.LoopStack,this);this._triggersToPostInit=[];this._queuedTriggers=[];this._queuedDebugTriggers=[];this._runningEventsDepth=0;this._executingTriggerDepth=0;this._blockFlushingDepth=
0;this._scheduledWaits=[];this._asyncActionPromises=[];self["c3_callFunction"]=(name,params)=>this._InvokeFunctionFromJS(name,params)}Release(){this.ClearAllScheduledWaits();this._eventStack.Release();this._eventStack=null;this._localVarStack.Release();this._localVarStack=null;C3.clearArray(this._queuedTriggers);C3.clearArray(this._queuedDebugTriggers);this._runtime=null;C3.clearArray(this._allSheets);this._sheetsByName.clear()}Create(eventSheetData){const eventSheet=C3.New(C3.EventSheet,this,eventSheetData);
this._allSheets.push(eventSheet);this._sheetsByName.set(eventSheet.GetName().toLowerCase(),eventSheet)}_AddTriggerToPostInit(trig){this._triggersToPostInit.push(trig)}_PostInit(){for(const functionBlock of this._functionBlocksByName.values())functionBlock._PostInit(false);for(const sheet of this._allSheets)sheet._PostInit();for(const sheet of this._allSheets)sheet._UpdateDeepIncludes();for(const trig of this._triggersToPostInit)trig._PostInit(false);C3.clearArray(this._triggersToPostInit);this._localVarStack._SetInitialValues(this._localVarInitialValues)}GetRuntime(){return this._runtime}GetEventSheetByName(name){return this._sheetsByName.get(name.toLowerCase())||
null}_RegisterGroup(group){this._allGroups.push(group);this._groupsByName.set(group.GetGroupName(),group)}_RegisterEventBlock(eventBlock){this._blocksBySid.set(eventBlock.GetSID(),eventBlock)}_RegisterCondition(condition){this._cndsBySid.set(condition.GetSID(),condition)}_RegisterAction(action){this._actsBySid.set(action.GetSID(),action)}_RegisterFunctionBlock(functionBlock){this._functionBlocksByName.set(functionBlock.GetFunctionName().toLowerCase(),functionBlock)}_RegisterEventVariable(ev){this._eventVarsBySid.set(ev.GetSID(),
ev);if(ev.IsGlobal())this._allGlobalVars.push(ev);else this._allLocalVars.push(ev)}_DeduplicateSolModifierList(arr){if(arr.length>=2)arr.sort(SortSolArray);let candidateList=this._allUniqueSolModifiers.get(arr.length);if(!candidateList){candidateList=[];this._allUniqueSolModifiers.set(arr.length,candidateList)}for(let i=0,len=candidateList.length;i<len;++i){const candidate=candidateList[i];if(IsSolArrayIdentical(arr,candidate))return candidate}candidateList.push(arr);return arr}_GetNextLocalVarIndex(eventVar){this._localVarInitialValues.push(eventVar.GetInitialValue());
return this._nextLocalVarIndex++}GetEventStack(){return this._eventStack}GetCurrentEventStackFrame(){return this.GetEventStack().GetCurrentStackFrame()}GetCurrentEvent(){return this.GetCurrentEventStackFrame().GetCurrentEvent()}GetCurrentCondition(){const frame=this.GetCurrentEventStackFrame();const event=frame.GetCurrentEvent();return event.GetConditionAt(frame.GetConditionIndex())}GetCurrentAction(){const frame=this.GetCurrentEventStackFrame();const event=frame.GetCurrentEvent();return event.GetActionAt(frame.GetActionIndex())}GetLocalVarStack(){return this._localVarStack}GetLoopStack(){return this._loopStack}GetAllLocalVariablesInScope(fromRow){const ret=
[];fromRow=fromRow.GetScopeParent();while(fromRow){C3.appendArray(ret,fromRow._GetAllLocalVariablesInScope());fromRow=fromRow.GetScopeParent()}return ret}_GetLocalVariablesScriptInterface(fromRow){const localVarDescriptors={};for(const v of this.GetAllLocalVariablesInScope(fromRow))localVarDescriptors[v.GetJsPropName()]=v._GetScriptInterfaceDescriptor();return Object.create(Object.prototype,localVarDescriptors)}GetEventVariableBySID(sid){return this._eventVarsBySid.get(sid)||null}GetEventBlockBySID(sid){return this._blocksBySid.get(sid)||
null}GetConditionBySID(sid){return this._cndsBySid.get(sid)||null}GetActionBySID(sid){return this._actsBySid.get(sid)||null}GetFunctionBlockByName(name){return this._functionBlocksByName.get(name.toLowerCase())||null}GetAllGlobalVariables(){return this._allGlobalVars}GetAllLocalVariables(){return this._allLocalVars}ResetAllGlobalsToInitialValue(){for(const ev of this._allGlobalVars)ev.ResetToInitialValue()}GetEventGroupByName(name){return this._groupsByName.get(name.toLowerCase())||null}GetEventGroupBySID(sid){const group=
this._blocksBySid.get(sid);if(group&&group.IsGroup())return group;else return null}GetAllGroups(){return this._allGroups}ResetAllGroupsInitialActivation(){for(const group of this._allGroups)group.ResetInitialActivation()}_ResetAllHasRunFlags(){for(const sheet of this._allSheets)sheet._ResetHasRunFlag()}RunEvents(layoutManager){this._ResetAllHasRunFlags();this._runningEventsDepth++;for(const layout of layoutManager.runningLayouts()){const eventSheet=layout.GetEventSheet();if(!eventSheet)continue;this._runtime.PushCurrentLayout(layout);
eventSheet.Run();this._runtime.PopCurrentLayout()}this._runningEventsDepth--}async DebugRunEvents(layoutManager){this._ResetAllHasRunFlags();this._runningEventsDepth++;for(const breakEventObject of this._DebugRunEventsGen(layoutManager))await this._runtime.DebugBreak(breakEventObject);this._runningEventsDepth--}*_DebugRunEventsGen(layoutManager){for(const layout of layoutManager.runningLayouts()){const eventSheet=layout.GetEventSheet();if(!eventSheet)continue;this._runtime.PushCurrentLayout(layout);
yield*eventSheet.DebugRun();this._runtime.PopCurrentLayout()}}_Trigger(layoutManager,method,inst,behaviorType){let ret=false;if(!layoutManager.GetMainRunningLayout())return this.QueueTrigger(method,inst,behaviorType);this._executingTriggerDepth++;for(const layout of layoutManager.runningLayouts()){const eventSheet=layout.GetEventSheet();if(!eventSheet)continue;this._runtime.PushCurrentLayout(layout);for(const includeSheet of eventSheet.deepIncludes()){const result=includeSheet._Trigger(method,inst,
behaviorType);ret=ret||result}const result2=eventSheet._Trigger(method,inst,behaviorType);ret=ret||result2;this._runtime.PopCurrentLayout()}this._executingTriggerDepth--;return ret}*_DebugTrigger(layoutManager,method,inst,behaviorType){let ret=false;if(!layoutManager.GetMainRunningLayout())return this.QueueTrigger(method,inst,behaviorType);this._executingTriggerDepth++;for(const layout of layoutManager.runningLayouts()){const eventSheet=layout.GetEventSheet();if(!eventSheet)continue;this._runtime.PushCurrentLayout(layout);
for(const includeSheet of eventSheet.deepIncludes()){const result=yield*includeSheet._DebugTrigger(method,inst,behaviorType);ret=ret||result}const result2=yield*eventSheet._DebugTrigger(method,inst,behaviorType);ret=ret||result2;this._runtime.PopCurrentLayout()}this._executingTriggerDepth--;return ret}QueueTrigger(method,inst,behaviorType){this._queuedTriggers.push([method,inst,behaviorType]);return false}QueueDebugTrigger(method,inst,behaviorType){let resolve=null;const ret=new Promise(r=>resolve=
r);this._queuedDebugTriggers.push([method,inst,behaviorType,resolve]);return ret}*_RunQueuedDebugTriggersGen(){if(this._runtime.HitBreakpoint())throw new Error("should not be in breakpoint");const layoutManager=this._runtime.GetLayoutManager();while(this._queuedDebugTriggers.length){const [method,inst,behaviorType,resolve]=this._queuedDebugTriggers.shift();const ret=yield*this._DebugTrigger(layoutManager,method,inst,behaviorType);resolve(ret)}}async RunQueuedDebugTriggersAsync(){for(const breakEventObject of this._RunQueuedDebugTriggersGen())await this._runtime.DebugBreak(breakEventObject)}_FastTrigger(layoutManager,
method,inst,value){let ret=false;const layout=layoutManager.GetMainRunningLayout();const eventSheet=layout.GetEventSheet();if(!eventSheet)return;this._executingTriggerDepth++;this._runtime.PushCurrentLayout(layout);const deepIncludes=eventSheet.deepIncludes();for(let i=0,len=deepIncludes.length;i<len;++i){const result=deepIncludes[i]._FastTrigger(method,inst,value);ret=ret||result}const result2=eventSheet._FastTrigger(method,inst,value);ret=ret||result2;this._runtime.PopCurrentLayout();this._executingTriggerDepth--;
return ret}*_DebugFastTrigger(layoutManager,method,inst,value){let ret=false;const layout=layoutManager.GetMainRunningLayout();const eventSheet=layout.GetEventSheet();if(!eventSheet)return;this._executingTriggerDepth++;this._runtime.PushCurrentLayout(layout);const deepIncludes=eventSheet.deepIncludes();for(let i=0,len=deepIncludes.length;i<len;++i){const result=yield*deepIncludes[i]._DebugFastTrigger(method,inst,value);ret=ret||result}const result2=yield*eventSheet._DebugFastTrigger(method,inst,value);
ret=ret||result2;this._runtime.PopCurrentLayout();this._executingTriggerDepth--;return ret}GetTriggerDepth(){return this._executingTriggerDepth}IsInTrigger(){return this.GetTriggerDepth()>0}_IncTriggerDepth(){return++this._executingTriggerDepth}_DecTriggerDepth(){--this._executingTriggerDepth}IsRunningEvents(){return this._runningEventsDepth>0}IsInEventEngine(){return this.IsRunningEvents()||this.IsInTrigger()}_RunQueuedTriggers(layoutManager){for(const [method,inst,behaviorType]of this._queuedTriggers)this._Trigger(layoutManager,
method,inst,behaviorType);C3.clearArray(this._queuedTriggers)}BlockFlushingInstances(e){if(e)this._blockFlushingDepth++;else this._blockFlushingDepth--}IsFlushingBlocked(){return this._blockFlushingDepth>0}ClearSol(solModifiers){for(let i=0,len=solModifiers.length;i<len;++i)solModifiers[i].GetSolStack().Clear()}PushCleanSol(solModifiers){for(let i=0,len=solModifiers.length;i<len;++i)solModifiers[i].GetSolStack().PushClean()}PushCopySol(solModifiers){for(let i=0,len=solModifiers.length;i<len;++i)solModifiers[i].GetSolStack().PushCopy()}PopSol(solModifiers){for(let i=
0,len=solModifiers.length;i<len;++i)solModifiers[i].GetSolStack().Pop()}AddScheduledWait(){const w=C3.New(C3.ScheduledWait,this);this._scheduledWaits.push(w);return w}scheduledWaits(){return this._scheduledWaits}RunScheduledWaits(){if(!this._scheduledWaits.length)return;const frame=this.GetCurrentEventStackFrame();let didAnyRun=false;this._runningEventsDepth++;for(let i=0,len=this._scheduledWaits.length;i<len;++i){const w=this._scheduledWaits[i];if(w._ShouldRun())w._Run(frame);if(w.ShouldRelease())didAnyRun=
true}if(didAnyRun)this._FilterScheduledWaitsToRelease();this._runningEventsDepth--}async DebugRunScheduledWaits(){if(!this._scheduledWaits.length)return;const frame=this.GetCurrentEventStackFrame();let didAnyRun=false;this._runningEventsDepth++;for(let i=0,len=this._scheduledWaits.length;i<len;++i){const w=this._scheduledWaits[i];if(w._ShouldRun())await w._DebugRun(frame);if(w.ShouldRelease())didAnyRun=true}if(didAnyRun)this._FilterScheduledWaitsToRelease();this._runningEventsDepth--}_FilterScheduledWaitsToRelease(){const toRelease=
C3.arrayFilterOut(this._scheduledWaits,w=>w.ShouldRelease());for(const w of toRelease)w.Release()}ClearAllScheduledWaits(){for(const w of this._scheduledWaits)w.Release();C3.clearArray(this._scheduledWaits)}RemoveInstancesFromScheduledWaits(s){for(const w of this._scheduledWaits)w.RemoveInstances(s)}AddAsyncActionPromise(p){this._asyncActionPromises.push(p)}ClearAsyncActionPromises(){C3.clearArray(this._asyncActionPromises)}GetPromiseForAllAsyncActions(){const ret=Promise.all(this._asyncActionPromises);
this._asyncActionPromises=[];return ret}_SaveToJson(){return{"groups":this._SaveGroupsToJson(),"cnds":this._SaveCndsToJson(),"acts":this._SaveActsToJson(),"vars":this._SaveVarsToJson(),"waits":this._SaveScheduledWaitsToJson()}}_LoadFromJson(o){this._LoadGroupsFromJson(o["groups"]);this._LoadCndsFromJson(o["cnds"]);this._LoadActsFromJson(o["acts"]);this._LoadVarsFromJson(o["vars"]);this._LoadScheduledWaitsFromJson(o["waits"])}_SaveGroupsToJson(){const o={};for(const group of this.GetAllGroups())o[group.GetSID().toString()]=
group.IsGroupActive();return o}_LoadGroupsFromJson(o){for(const [sidStr,data]of Object.entries(o)){const sid=parseInt(sidStr,10);const group=this.GetEventGroupBySID(sid);if(group)group.SetGroupActive(data)}}_SaveCndsToJson(){const o={};for(const [sid,cnd]of this._cndsBySid){const data=cnd._SaveToJson();if(data)o[sid.toString()]=data}return o}_LoadCndsFromJson(o){const map=new Map;for(const [sidStr,data]of Object.entries(o))map.set(parseInt(sidStr,10),data);for(const [sid,cnd]of this._cndsBySid)cnd._LoadFromJson(map.get(sid)||
null)}_SaveActsToJson(){const o={};for(const [sid,act]of this._actsBySid){const data=act._SaveToJson();if(data)o[sid.toString()]=data}return o}_LoadActsFromJson(o){const map=new Map;for(const [sidStr,data]of Object.entries(o))map.set(parseInt(sidStr,10),data);for(const [sid,act]of this._actsBySid)act._LoadFromJson(map.get(sid)||null)}_SaveVarsToJson(){const o={};for(const [sid,eventVar]of this._eventVarsBySid)if(!eventVar.IsConstant()&&(eventVar.IsGlobal()||eventVar.IsStatic()))o[sid.toString()]=
eventVar.GetValue();return o}_LoadVarsFromJson(o){for(const [sidStr,data]of Object.entries(o)){const sid=parseInt(sidStr,10);const eventVar=this.GetEventVariableBySID(sid);if(eventVar)eventVar.SetValue(data)}}_SaveScheduledWaitsToJson(){return this._scheduledWaits.filter(w=>!w.IsPromise()).map(w=>w._SaveToJson())}_LoadScheduledWaitsFromJson(arr){this.ClearAllScheduledWaits();for(const data of arr){const sw=C3.ScheduledWait._CreateFromJson(this,data);if(sw)this._scheduledWaits.push(sw)}}_GetPerfRecords(){return[...this._runtime.GetLayoutManager().runningLayouts()].map(l=>
l.GetEventSheet()).filter(eventSheet=>eventSheet).map(e=>e._GetPerfRecord())}FindFirstFunctionBlockParent(eventRow){while(eventRow){const scopeParent=eventRow.GetScopeParent();if(scopeParent instanceof C3.FunctionBlock)return scopeParent;eventRow=eventRow.GetParent()}return null}_InvokeFunctionFromJS(name,params){if(!Array.isArray(params))params=[];const functionBlock=this.GetFunctionBlockByName(name.toLowerCase());if(!functionBlock)return null;if(!functionBlock.IsEnabled())return functionBlock.GetDefaultReturnValue();
const functionParameters=functionBlock.GetFunctionParameters();if(params.length<functionParameters.length){params=params.slice(0);do params.push(functionParameters[params.length].GetInitialValue());while(params.length<functionParameters.length)}const callEventBlock=functionBlock.GetEventBlock();return callEventBlock.RunAsExpressionFunctionCall(callEventBlock.GetSolModifiersIncludingParents(),functionBlock.GetReturnType(),functionBlock.GetDefaultReturnValue(),...params)}}};


// c3/events/eventSheet.js
'use strict';{const C3=self.C3;C3.EventSheet=class EventSheet extends C3.DefendedBase{constructor(eventSheetManager,data){super();this._eventSheetManager=eventSheetManager;this._runtime=eventSheetManager.GetRuntime();this._name=data[0];this._events=[];this._triggers=new Map;this._fastTriggers=new Map;this._eventsByDisplayNumber=new Map;this._hasRun=false;this._shallowIncludes=[];this._deepIncludes=[];this._alreadyIncludedSheets=new Set;for(const eventData of data[1])this._CreateEvent(eventData,null,
this._events);this._perfRecord=this._runtime.IsDebug()?{type:"sheet",name:this._name,totalTimeCounter:0,children:[]}:null}Release(){this._eventSheetManager=null;this._runtime=null}_CreateEvent(eventData,parent,nontriggers){switch(eventData[0]){case 0:case 3:this._CreateEventBlock(eventData,parent,nontriggers);break;case 1:this._CreateEventVariable(eventData,parent,nontriggers);break;case 2:this._CreateInclude(eventData,parent,nontriggers);break;case 4:this._CreateFunctionBlock(eventData,parent);break;
case 5:this._CreateScriptBlock(eventData,parent,nontriggers);break;default:throw new Error("invalid event type");}}_CreateEventBlock(data,parent,nontriggers){const eventBlock=C3.EventBlock.Create(this,parent,data);if(eventBlock.IsOrBlock()){nontriggers.push(eventBlock);const conditions=eventBlock.GetConditions();for(let i=0,len=conditions.length;i<len;++i)if(conditions[i].IsTrigger())this._InitTrigger(eventBlock,i)}else if(eventBlock.IsTrigger())this._InitTrigger(eventBlock,0);else nontriggers.push(eventBlock)}_CreateFunctionBlock(data,
parent){const functionBlock=C3.FunctionBlock.Create(this,parent,data);this._eventSheetManager._RegisterFunctionBlock(functionBlock)}_CreateEventVariable(data,parent,nontriggers){const v=C3.EventVariable.Create(this,parent,data);nontriggers.push(v)}_CreateInclude(data,parent,nontriggers){const include=C3.EventInclude.Create(this,parent,data);nontriggers.push(include)}_CreateScriptBlock(data,parent,nontriggers){const scriptBlock=C3.EventScript.Create(this,parent,data);nontriggers.push(scriptBlock)}_InitTrigger(eventBlock,
i){if(!eventBlock.IsOrBlock())this._eventSheetManager._AddTriggerToPostInit(eventBlock);const cnd=eventBlock.GetConditionAt(i);const func=cnd._GetFunc();const objectClass=cnd.GetObjectClass();if(cnd.IsFastTrigger()){let methodMap=this._fastTriggers.get(objectClass);if(!methodMap){methodMap=new Map;this._fastTriggers.set(objectClass,methodMap)}const value=cnd.GetFastTriggerValue().toLowerCase();let valueMap=methodMap.get(func);if(!valueMap){valueMap=new Map;methodMap.set(func,valueMap)}let triggerArr=
valueMap.get(value);if(!triggerArr){triggerArr=[];valueMap.set(value,triggerArr)}triggerArr.push([eventBlock,i])}else{let ocInfo=this._triggers.get(objectClass);if(!ocInfo){ocInfo={methodMap:new Map,behaviors:new Map};this._triggers.set(objectClass,ocInfo)}const behaviorType=cnd.GetBehaviorType();let methodMap;if(behaviorType){methodMap=ocInfo.behaviors.get(behaviorType);if(!methodMap){methodMap=new Map;ocInfo.behaviors.set(behaviorType,methodMap)}}else methodMap=ocInfo.methodMap;let triggerArr=methodMap.get(func);
if(!triggerArr){triggerArr=[];methodMap.set(func,triggerArr)}triggerArr.push([eventBlock,i])}}_PostInit(){const events=this._events;for(let i=0,len=events.length;i<len;++i){const hasElseBlock=i<len-1&&events[i+1]instanceof C3.EventBlock&&events[i+1].IsElseBlock();events[i]._PostInit(hasElseBlock)}}_AddShallowInclude(include){this._shallowIncludes.push(include)}_UpdateDeepIncludes(){C3.clearArray(this._deepIncludes);this._AddDeepIncludes(this);this._alreadyIncludedSheets.clear()}_AddDeepIncludes(rootSheet){const deepIncludes=
rootSheet._deepIncludes;const alreadyIncludedSheets=rootSheet._alreadyIncludedSheets;for(const include of this._shallowIncludes){const sheet=include.GetIncludeSheet();if(!include.IsActive()||rootSheet===sheet||alreadyIncludedSheets.has(sheet))continue;alreadyIncludedSheets.add(sheet);sheet._AddDeepIncludes(rootSheet);deepIncludes.push(sheet)}}deepIncludes(){return this._deepIncludes}GetEventSheetManager(){return this._eventSheetManager}GetRuntime(){return this._runtime}GetName(){return this._name}_RegisterEventByDisplayNumber(eventBlock,
displayNumber){this._eventsByDisplayNumber.set(displayNumber,eventBlock)}_GetEventByDisplayNumber(displayNumber){return this._eventsByDisplayNumber.get(displayNumber)||null}_ResetHasRunFlag(){this._hasRun=false}Run(){if(this._hasRun)return;const runtime=this._runtime;const profile=runtime.IsCPUProfiling();const startTime=profile?performance.now():0;this._hasRun=true;const eventSheetManager=this.GetEventSheetManager();const frame=eventSheetManager.GetCurrentEventStackFrame();for(const e of this._events){e.Run(frame);
eventSheetManager.ClearSol(e.GetSolModifiers());eventSheetManager.ClearAsyncActionPromises();runtime.FlushPendingInstances()}frame.Reset(null);if(profile)this._perfRecord.totalTimeCounter+=performance.now()-startTime}*DebugRun(){if(this._hasRun)return;this._hasRun=true;const runtime=this._runtime;const eventSheetManager=this.GetEventSheetManager();const frame=eventSheetManager.GetCurrentEventStackFrame();for(const e of this._events){yield*e.DebugRun(frame);eventSheetManager.ClearSol(e.GetSolModifiers());
eventSheetManager.ClearAsyncActionPromises();runtime.FlushPendingInstances()}frame.Reset(null)}_Trigger(method,inst,behaviorType){if(inst){const objectClass=inst.GetObjectClass();let ret=false;let r=this._TriggerForClass(method,inst,objectClass,behaviorType);ret=ret||r;for(const family of objectClass.GetFamilies()){r=this._TriggerForClass(method,inst,family,behaviorType);ret=ret||r}}else return this._TriggerForClass(method,inst,null,null)}_TriggerForClass(method,inst,objectClass,behaviorType){const ocInfo=
this._triggers.get(objectClass);if(!ocInfo)return false;const methodMap=behaviorType?ocInfo.behaviors.get(behaviorType):ocInfo.methodMap;if(!methodMap)return false;const triggerList=methodMap.get(method);if(!triggerList)return false;let ret=false;for(const [trigger,index]of triggerList){const r=this._ExecuteTrigger(inst,trigger,index);ret=ret||r}return ret}*_DebugTrigger(method,inst,behaviorType){if(inst){const objectClass=inst.GetObjectClass();let ret=false;let r=yield*this._DebugTriggerForClass(method,
inst,objectClass,behaviorType);ret=ret||r;for(const family of objectClass.GetFamilies()){r=yield*this._DebugTriggerForClass(method,inst,family,behaviorType);ret=ret||r}}else return yield*this._DebugTriggerForClass(method,inst,null,null)}*_DebugTriggerForClass(method,inst,objectClass,behaviorType){const ocInfo=this._triggers.get(objectClass);if(!ocInfo)return false;const methodMap=behaviorType?ocInfo.behaviors.get(behaviorType):ocInfo.methodMap;if(!methodMap)return false;const triggerList=methodMap.get(method);
if(!triggerList)return false;let ret=false;for(const [trigger,index]of triggerList){let r;if(trigger.DebugCanRunFast())r=this._ExecuteTrigger(inst,trigger,index);else r=yield*this._DebugExecuteTrigger(inst,trigger,index);ret=ret||r}return ret}_FastTrigger(method,inst,value){const objectClass=inst.GetObjectClass();const methodMap=this._fastTriggers.get(objectClass);if(!methodMap)return false;const valueMap=methodMap.get(method);if(!valueMap)return false;const triggerList=valueMap.get(value);if(!triggerList)return false;
let ret=false;for(let i=0,len=triggerList.length;i<len;++i){const t=triggerList[i];const r=this._ExecuteTrigger(null,t[0],t[1]);ret=ret||r}return ret}*_DebugFastTrigger(method,inst,value){const objectClass=inst.GetObjectClass();const methodMap=this._fastTriggers.get(objectClass);if(!methodMap)return false;const valueMap=methodMap.get(method);if(!valueMap)return false;const triggerList=valueMap.get(value);if(!triggerList)return false;let ret=false;for(let i=0,len=triggerList.length;i<len;++i){const t=
triggerList[i];const trigger=t[0];const index=t[1];let r;if(trigger.DebugCanRunFast())r=this._ExecuteTrigger(null,trigger,index);else r=yield*this._DebugExecuteTrigger(null,trigger,index);ret=ret||r}return ret}_ExecuteTrigger(inst,trigger,index){const runtime=this._runtime;const eventSheetManager=this._eventSheetManager;const currentEvent=eventSheetManager.GetCurrentEvent();const eventStack=eventSheetManager.GetEventStack();const triggerDepth=eventSheetManager.GetTriggerDepth();let ret=false;if(currentEvent)eventSheetManager.PushCleanSol(currentEvent.GetSolModifiersIncludingParents());
eventSheetManager.PushCleanSol(trigger.GetSolModifiersIncludingParents());const isRecursive=triggerDepth>1;if(isRecursive)eventSheetManager.GetLocalVarStack().Push();const frame=eventStack.Push(trigger);if(inst){const objectClass=trigger.GetConditions()[index].GetObjectClass();const sol=objectClass.GetCurrentSol();sol.SetSinglePicked(inst);if(inst.IsInContainer())inst.SetSiblingsSinglePicked()}let okToRun=true;if(trigger.GetParent()){const parents=trigger.GetTriggerParents();for(let i=0,len=parents.length;i<
len;++i)if(!parents[i].RunPreTrigger(frame)){okToRun=false;break}}if(okToRun){runtime.IncrementExecCount();if(trigger.IsOrBlock())trigger.RunOrBlockTrigger(frame,index);else trigger.Run(frame);ret=frame.GetLastEventTrue()}eventStack.Pop();if(isRecursive)eventSheetManager.GetLocalVarStack().Pop();eventSheetManager.PopSol(trigger.GetSolModifiersIncludingParents());if(currentEvent)eventSheetManager.PopSol(currentEvent.GetSolModifiersIncludingParents());if(!currentEvent&&triggerDepth===1&&!eventSheetManager.IsFlushingBlocked())runtime.FlushPendingInstances();
return ret}*_DebugExecuteTrigger(inst,trigger,index){const runtime=this._runtime;const eventSheetManager=this._eventSheetManager;const currentEvent=eventSheetManager.GetCurrentEvent();const eventStack=eventSheetManager.GetEventStack();const triggerDepth=eventSheetManager.GetTriggerDepth();let ret=false;if(currentEvent)eventSheetManager.PushCleanSol(currentEvent.GetSolModifiersIncludingParents());eventSheetManager.PushCleanSol(trigger.GetSolModifiersIncludingParents());const isRecursive=triggerDepth>
1;if(isRecursive)eventSheetManager.GetLocalVarStack().Push();const frame=eventStack.Push(trigger);if(inst){const objectClass=trigger.GetConditions()[index].GetObjectClass();const sol=objectClass.GetCurrentSol();sol.SetSinglePicked(inst);if(inst.IsInContainer())inst.SetSiblingsSinglePicked()}let okToRun=true;if(trigger.GetParent()){const parents=trigger.GetTriggerParents();for(let i=0,len=parents.length;i<len;++i)if(!(yield*parents[i].DebugRunPreTrigger(frame))){okToRun=false;break}}if(okToRun){runtime.IncrementExecCount();
if(trigger.IsOrBlock())yield*trigger.DebugRunOrBlockTrigger(frame,index);else yield*trigger.DebugRun(frame);ret=frame.GetLastEventTrue()}eventStack.Pop();if(isRecursive)eventSheetManager.GetLocalVarStack().Pop();eventSheetManager.PopSol(trigger.GetSolModifiersIncludingParents());if(currentEvent)eventSheetManager.PopSol(currentEvent.GetSolModifiersIncludingParents());if(!currentEvent&&triggerDepth===1&&!eventSheetManager.IsFlushingBlocked())runtime.FlushPendingInstances();return ret}_GetPerfRecord(){return this._perfRecord}}};


// c3/events/eventBlock.js
'use strict';{const C3=self.C3;const EMPTY_ARRAY=[];function NoActions(frame,index){return true}function*DebugNoActions(frame,index){return true}C3.EventBlock=class EventBlock extends C3.DefendedBase{constructor(eventSheet,parent,data){super();this._eventSheet=eventSheet;this._runtime=eventSheet.GetRuntime();this._parent=parent;this._scopeParent=null;this._eventStack=this._runtime.GetEventSheetManager().GetEventStack();this._solModifiers=[];this._solModifiersIncludingParents=[];this._hasGotSolModifiersIncludingParents=
false;this._isSolWriterAfterCnds=false;this._isTopLevelGroup=false;this._hasElseBlock=false;this._isOrBlock=!!data[2];this._isElseBlock=false;this._triggerParents=null;this._conditions=[];this._actions=[];this._subEvents=[];this._RunActions=NoActions;this._DebugRunActions=DebugNoActions;this._isGroup=false;this._isInitiallyActive=false;this._groupName="";this._isGroupActive=false;this._containedIncludes=null;this._perfRecord=null;this._sid=data[4];this._displayNumber=data[5];this._eventSheet._RegisterEventByDisplayNumber(this,
this._displayNumber);this._debugData=this._runtime.IsDebug()?{isBreakpoint:data[3][0],isBreakable:data[3][1],canRunAllConditionsFast:false,canRunAllActionsFast:false,canRunAllSubEventsFast:false,canRunSelfFast:false}:null;this.GetEventSheetManager()._RegisterEventBlock(this);if(data[0]===3)this._InitGroup(data[1]);let index=0;for(const cndData of data[6]){const condition=C3.Condition.Create(this,cndData,index++);this._conditions.push(condition);this._AddSolModifier(condition.GetObjectClass())}index=
0;for(const actData of data[7]){const action=C3.Action.Create(this,actData,index++);this._actions.push(action)}if(data.length===9){const subEventsData=data[8];for(const eventData of subEventsData)this._eventSheet._CreateEvent(eventData,this,this._subEvents)}if(this._conditions.length)this._isElseBlock=this._conditions[0].GetObjectClass()===null&&this._conditions[0]._GetFunc()===C3.Plugins.System.Cnds.Else;if(this._conditions.length===0)this._conditions=EMPTY_ARRAY;if(this._actions.length===0)this._actions=
EMPTY_ARRAY;if(this._subEvents.length===0)this._subEvents=EMPTY_ARRAY}static Create(eventSheet,parent,data){return C3.New(C3.EventBlock,eventSheet,parent,data)}_InitGroup(groupData){this._isGroup=true;this._isInitiallyActive=!!groupData[0];this._isGroupActive=this._isInitiallyActive;this._groupName=groupData[1].toLowerCase();this._containedIncludes=[];this.GetEventSheetManager()._RegisterGroup(this);if(this._runtime.IsDebug())this._perfRecord={type:"group",name:groupData[1],totalTimeCounter:0,children:[]}}_AddContainedInclude(include){this._containedIncludes.push(include)}_AddContainerSolModifierToList(objectClass,
arr){for(const containerType of objectClass.GetContainer().objectTypes())if(!arr.includes(containerType))arr.push(containerType)}_AddSolModifierToList(objectClass,arr){if(!objectClass)return;if(!arr.includes(objectClass))arr.push(objectClass);if(objectClass.IsFamily())for(const familyMember of objectClass.GetFamilyMembers()){if(familyMember.IsInContainer())this._AddContainerSolModifierToList(familyMember,arr)}else if(objectClass.IsInContainer())this._AddContainerSolModifierToList(objectClass,arr)}_AddSolModifier(objectClass){this._AddSolModifierToList(objectClass,
this._solModifiers)}_AddParentSolModifier(objectClass){this._AddSolModifierToList(objectClass,this._solModifiersIncludingParents)}SetAllSolModifiers(){this._solModifiers=this._runtime.GetAllObjectClasses()}_PostInit(hasElse){this._hasElseBlock=!!hasElse;this._IdentifyTopLevelGroup();this._IdentifyTriggerParents();for(const c of this._conditions)c._PostInit();if(this._actions.length>0){let hasAnyActionWithReturnType=false;for(const a of this._actions){a._PostInit();if(a.HasReturnType())hasAnyActionWithReturnType=
true}if(hasAnyActionWithReturnType){this._RunActions=this._RunActions_ReturnValue;this._DebugRunActions=this._DebugRunActions_ReturnValue}else{this._RunActions=this._RunActions_Fast;this._DebugRunActions=this._DebugRunActions_Fast}}const subEvents=this._subEvents;for(let i=0,len=subEvents.length;i<len;++i){const hasElseBlock=i<len-1&&subEvents[i+1]instanceof C3.EventBlock&&subEvents[i+1].IsElseBlock();subEvents[i]._PostInit(hasElseBlock)}if(this._debugData)this._UpdateCanRunFast();if(this._perfRecord)this._GetPerfRecordParent()._GetPerfRecord().children.push(this._perfRecord)}_GetPerfRecord(){return this._perfRecord}_GetPerfRecordParent(){let p=
this.GetParent();while(p){if(p.IsGroup())return p;p=p.GetParent()}return this._eventSheet}_UpdateCanRunFast(){const dd=this._debugData;dd.canRunAllConditionsFast=this._conditions.every(c=>c.DebugCanRunFast());dd.canRunAllActionsFast=this._actions.every(a=>a.DebugCanRunFast());dd.canRunAllSubEventsFast=this._subEvents.every(s=>s.DebugCanRunFast());dd.canRunSelfFast=dd.canRunAllConditionsFast&&dd.canRunAllActionsFast&&dd.canRunAllSubEventsFast}_UpdateCanRunFastRecursive(){let e=this;do{e._UpdateCanRunFast();
e=e.GetParent()}while(e)}_IdentifyTopLevelGroup(){if(!this.IsGroup())return;let p=this.GetParent();this._isTopLevelGroup=true;while(p){if(!p.IsGroup()){this._isTopLevelGroup=false;break}p=p.GetParent()}}_IdentifySolModifiersIncludingParents(){const allObjectClasses=this._runtime.GetAllObjectClasses();if(this._solModifiers===allObjectClasses)this._solModifiersIncludingParents=allObjectClasses;else{this._solModifiersIncludingParents=C3.cloneArray(this._solModifiers);let p=this.GetParent();while(p){for(const o of p._solModifiers)this._AddParentSolModifier(o);
p=p.GetParent()}const eventSheetManager=this.GetEventSheetManager();this._solModifiers=eventSheetManager._DeduplicateSolModifierList(this._solModifiers);this._solModifiersIncludingParents=eventSheetManager._DeduplicateSolModifierList(this._solModifiersIncludingParents)}}_IdentifyTriggerParents(){if(!this.HasAnyTriggeredCondition())return;this._triggerParents=[];let p=this.GetParent();while(p){this._triggerParents.push(p);p=p.GetParent()}this._triggerParents.reverse()}SetSolWriterAfterCnds(){this._isSolWriterAfterCnds=
true;if(this._parent)this._parent.SetSolWriterAfterCnds()}IsSolWriterAfterCnds(){return this._isSolWriterAfterCnds}GetSolModifiers(){return this._solModifiers}GetSolModifiersIncludingParents(){if(!this._hasGotSolModifiersIncludingParents){this._hasGotSolModifiersIncludingParents=true;this._IdentifySolModifiersIncludingParents()}return this._solModifiersIncludingParents}HasSolModifier(objectClass){return this._solModifiers.includes(objectClass)}GetTriggerParents(){return this._triggerParents}GetEventSheet(){return this._eventSheet}GetEventSheetManager(){return this._eventSheet.GetEventSheetManager()}GetRuntime(){return this._runtime}GetParent(){return this._parent}_SetScopeParent(p){this._scopeParent=
p}GetScopeParent(){return this._scopeParent||this._parent}GetDisplayNumber(){return this._displayNumber}IsDebugBreakable(){return this._debugData&&this._debugData.isBreakable}IsDebugBreakpoint(){return this.IsDebugBreakable()&&this._debugData.isBreakpoint}_SetDebugBreakpoint(b){this._debugData.isBreakpoint=!!b;this._UpdateCanRunFastRecursive()}IsGroup(){return this._isGroup}IsTopLevelGroup(){return this._isTopLevelGroup}IsElseBlock(){return this._isElseBlock}HasElseBlock(){return this._hasElseBlock}GetGroupName(){return this._groupName}IsGroupActive(){return this._isGroupActive}ResetInitialActivation(){this.SetGroupActive(this._isInitiallyActive)}SetGroupActive(a){a=
!!a;if(!this._isGroup)throw new Error("not a group");if(this._isGroupActive===a)return;this._isGroupActive=a;for(const include of this._containedIncludes)include.UpdateActive();if(this._containedIncludes.length){const currentLayout=this._runtime.GetCurrentLayout();const mainEventSheet=currentLayout.GetEventSheet();if(mainEventSheet)mainEventSheet._UpdateDeepIncludes()}}GetSID(){return this._sid}IsOrBlock(){return this._isOrBlock}IsTrigger(){return this._conditions.length&&this._conditions[0].IsTrigger()}IsForFunctionBlock(){return this._scopeParent&&
this._scopeParent instanceof C3.FunctionBlock}HasAnyTriggeredCondition(){return this.IsForFunctionBlock()||this._conditions.some(c=>c.IsTrigger())}GetConditions(){return this._conditions}GetConditionCount(){return this._conditions.length}GetConditionAt(i){i=Math.floor(i);if(i<0||i>=this._conditions.length)throw new RangeError("invalid condition index");return this._conditions[i]}GetConditionByDebugIndex(i){return this.GetConditionAt(i)}IsFirstConditionOfType(cnd){let i=cnd.GetIndex();if(i===0)return true;
--i;for(;i>=0;--i)if(this._conditions[i].GetObjectClass()===cnd.GetObjectClass())return false;return true}GetActions(){return this._actions}GetActionCount(){return this._actions.length}GetActionAt(i){i=Math.floor(i);if(i<0||i>=this._actions.length)throw new RangeError("invalid action index");return this._actions[i]}GetActionByDebugIndex(i){i=Math.floor(i);const ret=this._actions.find(a=>a.GetDebugIndex()===i);if(!ret)throw new RangeError("invalid action debug index");return ret}_HasActionIndex(i){i=
Math.floor(i);return i>=0&&i<this._actions.length}GetSubEvents(){return this._subEvents}_GetAllLocalVariablesInScope(){return this._subEvents.filter(e=>e instanceof C3.EventVariable)}RunPreTrigger(frame){frame.SetCurrentEvent(this);let isAnyTrue=false;const conditions=this._conditions;for(let i=0,len=conditions.length;i<len;++i){const c=conditions[i];frame.SetConditionIndex(i);if(c.IsLooping())throw new Error("trigger cannot be used as sub-event to a loop");if(c.Run())isAnyTrue=true;else if(!this._isOrBlock)return false}return this._isOrBlock?
isAnyTrue:true}RunOrBlockTrigger(frame,index){frame.SetCurrentEvent(this);if(this._conditions[index].Run()){if(this._RunActions(frame,0))this._RunSubEvents(frame);frame.SetLastEventTrue(true)}}*DebugRunPreTrigger(frame){frame.SetCurrentEvent(this);let isAnyTrue=false;const conditions=this._conditions;for(let i=0,len=conditions.length;i<len;++i){const c=conditions[i];frame.SetConditionIndex(i);if(c.IsLooping())throw new Error("trigger cannot be used as sub-event to a loop");let ret;if(c.DebugCanRunFast())ret=
c.Run();else ret=yield*c.DebugRun();if(ret)isAnyTrue=true;else if(!this._isOrBlock)return false}return this._isOrBlock?isAnyTrue:true}*DebugRunOrBlockTrigger(frame,index){frame.SetCurrentEvent(this);const c=this._conditions[index];let ret;if(c.DebugCanRunFast())ret=c.Run();else ret=yield*c.DebugRun();if(ret){let actRet;if(this.DebugCanRunActionsFast())actRet=this._RunActions(frame,0);else actRet=yield*this._DebugRunActions(frame,0);if(actRet)if(this.DebugCanRunSubEventsFast())this._RunSubEvents();
else yield*this._DebugRunSubEvents();frame.SetLastEventTrue(true)}}Run(frame){frame.SetCurrentEvent(this);if(!this._isElseBlock)frame.SetElseBranchRan(false);if(this._isOrBlock)this._RunOrBlock(frame);else this._RunAndBlock(frame)}*DebugRun(frame){if(this.IsDebugBreakpoint()||this._runtime.DebugBreakNext())yield this;frame.SetCurrentEvent(this);if(!this._isElseBlock)frame.SetElseBranchRan(false);if(this._isOrBlock)yield*this._DebugRunOrBlock(frame);else yield*this._DebugRunAndBlock(frame)}_RunOrBlock(frame){const conditions=
this._conditions;let isAnyTrue=conditions.length===0;for(let i=0,len=conditions.length;i<len;++i){const c=conditions[i];if(c.IsTrigger())continue;frame.SetConditionIndex(i);const result=c.Run();isAnyTrue=isAnyTrue||result}frame.SetLastEventTrue(isAnyTrue);if(isAnyTrue){if(this._RunActions(frame,0))this._RunSubEvents(frame);if(this._hasElseBlock)frame.SetElseBranchRan(true)}}*_DebugRunOrBlock(frame){const conditions=this._conditions;let isAnyTrue=conditions.length===0;for(let i=0,len=conditions.length;i<
len;++i){const c=conditions[i];if(c.IsTrigger())continue;frame.SetConditionIndex(i);let ret;if(c.DebugCanRunFast())ret=c.Run();else ret=yield*c.DebugRun();isAnyTrue=isAnyTrue||ret}frame.SetLastEventTrue(isAnyTrue);if(isAnyTrue){let actRet;if(this.DebugCanRunActionsFast())actRet=this._RunActions(frame,0);else actRet=yield*this._DebugRunActions(frame,0);if(actRet)if(this.DebugCanRunSubEventsFast())this._RunSubEvents();else yield*this._DebugRunSubEvents();if(this._hasElseBlock)frame.SetElseBranchRan(true)}}_RunAndBlock(frame){const conditions=
this._conditions;for(let i=0,len=conditions.length;i<len;++i){const c=conditions[i];frame.SetConditionIndex(i);const result=c.Run();if(!result){frame.SetLastEventTrue(false);return}}frame.SetLastEventTrue(true);if(this._RunActions(frame,0))this._RunSubEvents(frame);if(frame.GetLastEventTrue()&&this._hasElseBlock)frame.SetElseBranchRan(true)}*_DebugRunAndBlock(frame){const conditions=this._conditions;for(let i=0,len=conditions.length;i<len;++i){const c=conditions[i];frame.SetConditionIndex(i);let ret;
if(c.DebugCanRunFast())ret=c.Run();else ret=yield*c.DebugRun();if(!ret){frame.SetLastEventTrue(false);return}}frame.SetLastEventTrue(true);let actRet;if(this.DebugCanRunActionsFast())actRet=this._RunActions(frame,0);else actRet=yield*this._DebugRunActions(frame,0);if(actRet)if(this.DebugCanRunSubEventsFast())this._RunSubEvents();else yield*this._DebugRunSubEvents();if(frame.GetLastEventTrue()&&this._hasElseBlock)frame.SetElseBranchRan(true)}_RunActions_Fast(frame,startIndex){const actions=this._actions;
for(let i=startIndex,len=actions.length;i<len;++i){const a=actions[i];frame.SetActionIndex(i);a.Run()}return true}*_DebugRunActions_Fast(frame,startIndex){const actions=this._actions;for(let i=startIndex,len=actions.length;i<len;++i){const a=actions[i];frame.SetActionIndex(i);if(a.DebugCanRunFast())a.Run();else yield*a.DebugRun()}return true}_RunActions_ReturnValue(frame,startIndex){const eventSheetManager=this.GetEventSheetManager();const actions=this._actions;for(let i=startIndex,len=actions.length;i<
len;++i){const a=actions[i];frame.SetActionIndex(i);const ret=a.Run();if(a.CanBailOut()&&ret===true)return false;else if(a.IsAsync()&&ret instanceof Promise)eventSheetManager.AddAsyncActionPromise(ret)}return true}*_DebugRunActions_ReturnValue(frame,startIndex){const eventSheetManager=this.GetEventSheetManager();const actions=this._actions;for(let i=startIndex,len=actions.length;i<len;++i){const a=actions[i];frame.SetActionIndex(i);let ret;if(a.DebugCanRunFast())ret=a.Run();else ret=yield*a.DebugRun();
if(a.CanBailOut()&&ret===true)return false;else if(a.IsAsync()&&ret instanceof Promise)eventSheetManager.AddAsyncActionPromise(ret)}return true}_ResumeActionsAndSubEvents(frame){if(this._RunActions(frame,frame.GetActionIndex()))this._RunSubEvents()}*_DebugResumeActionsAndSubEvents(frame){if(yield*this._DebugRunActions(frame,frame.GetActionIndex()))yield*this._DebugRunSubEvents()}_RunSubEvents(){if(!this._subEvents.length)return;const profile=this.IsGroup()&&this._runtime.IsCPUProfiling();const startTime=
profile?performance.now():0;const eventStack=this._eventStack;const frame=eventStack.Push(this);if(this._isSolWriterAfterCnds)this._RunSubEvents_SolWriterAfterCnds(frame);else this._RunSubEvents_Fast(frame);eventStack.Pop();if(profile)this._perfRecord.totalTimeCounter+=performance.now()-startTime}_RunSubEvents_SolWriterAfterCnds(frame){const isGroup=this._isGroup;const isTopLevelGroup=this._isTopLevelGroup;const eventSheetManager=this.GetEventSheetManager();const subEvents=this._subEvents;for(let i=
0,len=subEvents.length,last=len-1;i<len;++i){const e=subEvents[i];const solModifiers=e.GetSolModifiers();const copySol=!isTopLevelGroup||!isGroup&&i<last;if(copySol)eventSheetManager.PushCopySol(solModifiers);e.Run(frame);if(copySol)eventSheetManager.PopSol(solModifiers);else eventSheetManager.ClearSol(solModifiers)}}_RunSubEvents_Fast(frame){const subEvents=this._subEvents;for(let i=0,len=subEvents.length;i<len;++i)subEvents[i].Run(frame)}*_DebugRunSubEvents(){if(!this._subEvents.length)return;const eventStack=
this._eventStack;const frame=eventStack.Push(this);if(this._isSolWriterAfterCnds)yield*this._DebugRunSubEvents_SolWriterAfterCnds(frame);else yield*this._DebugRunSubEvents_Fast(frame);eventStack.Pop()}*_DebugRunSubEvents_SolWriterAfterCnds(frame){const isGroup=this._isGroup;const isTopLevelGroup=this._isTopLevelGroup;const eventSheetManager=this.GetEventSheetManager();const subEvents=this._subEvents;for(let i=0,len=subEvents.length,last=len-1;i<len;++i){const e=subEvents[i];const solModifiers=e.GetSolModifiers();
const copySol=!isTopLevelGroup||!isGroup&&i<last;if(copySol)eventSheetManager.PushCopySol(solModifiers);yield*e.DebugRun(frame);if(copySol)eventSheetManager.PopSol(solModifiers);else eventSheetManager.ClearSol(solModifiers)}}*_DebugRunSubEvents_Fast(frame){const subEvents=this._subEvents;for(let i=0,len=subEvents.length;i<len;++i)yield*subEvents[i].DebugRun(frame)}Retrigger(oldFrame,newFrame){this._runtime.IncrementExecCount();newFrame.ResetQuick();const conditions=this._conditions;if(!this.IsOrBlock())for(let i=
oldFrame.GetConditionIndex()+1,len=conditions.length;i<len;++i){const c=conditions[i];newFrame.SetConditionIndex(i);const result=c.Run();if(!result)return false}if(this._RunActions(newFrame,0))this._RunSubEvents(newFrame);return true}*DebugRetrigger(oldFrame,newFrame){this._runtime.IncrementExecCount();newFrame.ResetQuick();const conditions=this._conditions;if(!this.IsOrBlock())for(let i=oldFrame.GetConditionIndex()+1,len=conditions.length;i<len;++i){const c=conditions[i];newFrame.SetConditionIndex(i);
let ret;if(c.DebugCanRunFast())ret=c.Run();else ret=yield*c.DebugRun();if(!ret)return false}let actRet;if(this.DebugCanRunActionsFast())actRet=this._RunActions(newFrame,0);else actRet=yield*this._DebugRunActions(newFrame,0);if(actRet)if(this.DebugCanRunSubEventsFast())this._RunSubEvents();else yield*this._DebugRunSubEvents();return true}DebugCanRunFast(){return!this.IsDebugBreakpoint()&&!this._runtime.DebugBreakNext()&&this._debugData.canRunSelfFast}DebugCanRunActionsFast(){return!this._runtime.DebugBreakNext()&&
this._debugData.canRunAllActionsFast}DebugCanRunSubEventsFast(){return!this._runtime.DebugBreakNext()&&this._debugData.canRunAllSubEventsFast}_CheckParentsOKToRun(frame){if(this.GetParent()){const parents=this.GetTriggerParents();for(let i=0,len=parents.length;i<len;++i)if(!parents[i].RunPreTrigger(frame))return false}return true}*_DebugCheckParentsOKToRun(frame){if(this.GetParent()){const parents=this.GetTriggerParents();for(let i=0,len=parents.length;i<len;++i)if(!(yield*parents[i].DebugRunPreTrigger(frame)))return false}return true}_EvaluateFunctionCallParameters(eventSheetManager,
parameters,isRecursive){if(parameters.length>0)if(isRecursive){const paramResults=parameters.map(p=>p.Get(0));eventSheetManager.GetLocalVarStack().Push();this._scopeParent.SetFunctionParameters(paramResults)}else this._scopeParent.EvaluateFunctionParameters(parameters);else if(isRecursive)eventSheetManager.GetLocalVarStack().Push()}RunAsFunctionCall(combinedSolModifiers,parameters){let ret;let asyncId;const hasAnySolModifiers=combinedSolModifiers.length>0;const runtime=this._runtime;const eventStack=
this._eventStack;const eventSheetManager=runtime.GetEventSheetManager();const triggerDepth=eventSheetManager._IncTriggerDepth();const isRecursive=triggerDepth>1;this._EvaluateFunctionCallParameters(eventSheetManager,parameters,isRecursive);if(hasAnySolModifiers)eventSheetManager.PushCleanSol(combinedSolModifiers);const frame=eventStack.Push(this);if(this._CheckParentsOKToRun(frame)){runtime.IncrementExecCount();frame.SetCurrentEvent(this);const isAsync=this._scopeParent.IsAsync();if(isAsync)[asyncId,
ret]=this._scopeParent.StartAsyncFunctionCall();this._RunAndBlock(frame);if(isAsync)this._scopeParent.MaybeFinishAsyncFunctionCall(asyncId)}eventStack.Pop();if(isRecursive)eventSheetManager.GetLocalVarStack().Pop();if(hasAnySolModifiers)eventSheetManager.PopSol(combinedSolModifiers);eventSheetManager._DecTriggerDepth();return ret}*DebugRunAsFunctionCall(combinedSolModifiers,parameters){let ret;let asyncId;if(this.IsDebugBreakpoint()||this._runtime.DebugBreakNext())yield this;const hasAnySolModifiers=
combinedSolModifiers.length>0;const runtime=this._runtime;const eventStack=this._eventStack;const eventSheetManager=runtime.GetEventSheetManager();const triggerDepth=eventSheetManager._IncTriggerDepth();const isRecursive=triggerDepth>1;this._EvaluateFunctionCallParameters(eventSheetManager,parameters,isRecursive);if(hasAnySolModifiers)eventSheetManager.PushCleanSol(combinedSolModifiers);const frame=eventStack.Push(this);if(yield*this._DebugCheckParentsOKToRun(frame)){runtime.IncrementExecCount();
frame.SetCurrentEvent(this);const isAsync=this._scopeParent.IsAsync();if(isAsync)[asyncId,ret]=this._scopeParent.StartAsyncFunctionCall();yield*this._DebugRunAndBlock(frame);if(isAsync)this._scopeParent.MaybeFinishAsyncFunctionCall(asyncId)}eventStack.Pop();if(isRecursive)eventSheetManager.GetLocalVarStack().Pop();if(hasAnySolModifiers)eventSheetManager.PopSol(combinedSolModifiers);eventSheetManager._DecTriggerDepth();return ret}RunAsMappedFunctionCall(paramResults){const solModifiers=this.GetSolModifiersIncludingParents();
const hasAnySolModifiers=solModifiers.length>0;const runtime=this._runtime;const eventStack=this._eventStack;const eventSheetManager=runtime.GetEventSheetManager();const triggerDepth=eventSheetManager._IncTriggerDepth();const isRecursive=triggerDepth>1;if(isRecursive)eventSheetManager.GetLocalVarStack().Push();this._scopeParent.SetFunctionParameters(paramResults);if(hasAnySolModifiers)eventSheetManager.PushCleanSol(solModifiers);const frame=eventStack.Push(this);if(this._CheckParentsOKToRun(frame)){runtime.IncrementExecCount();
frame.SetCurrentEvent(this);this._RunAndBlock(frame)}eventStack.Pop();if(isRecursive)eventSheetManager.GetLocalVarStack().Pop();if(hasAnySolModifiers)eventSheetManager.PopSol(solModifiers);eventSheetManager._DecTriggerDepth()}*DebugRunAsMappedFunctionCall(paramResults){if(this.IsDebugBreakpoint()||this._runtime.DebugBreakNext())yield this;const solModifiers=this.GetSolModifiersIncludingParents();const hasAnySolModifiers=solModifiers.length>0;const runtime=this._runtime;const eventStack=this._eventStack;
const eventSheetManager=runtime.GetEventSheetManager();const triggerDepth=eventSheetManager._IncTriggerDepth();const isRecursive=triggerDepth>1;if(isRecursive)eventSheetManager.GetLocalVarStack().Push();this._scopeParent.SetFunctionParameters(paramResults);if(hasAnySolModifiers)eventSheetManager.PushCleanSol(solModifiers);const frame=eventStack.Push(this);if(yield*this._DebugCheckParentsOKToRun(frame)){runtime.IncrementExecCount();frame.SetCurrentEvent(this);yield*this._DebugRunAndBlock(frame)}eventStack.Pop();
if(isRecursive)eventSheetManager.GetLocalVarStack().Pop();if(hasAnySolModifiers)eventSheetManager.PopSol(solModifiers);eventSheetManager._DecTriggerDepth()}RunAsExpressionFunctionCall(combinedSolModifiers,returnType,defaultReturnValue,...paramResults){let ret;let asyncId;const hasAnySolModifiers=combinedSolModifiers.length>0;const runtime=this._runtime;const eventStack=this._eventStack;const eventSheetManager=runtime.GetEventSheetManager();const triggerDepth=eventSheetManager._IncTriggerDepth();const isRecursive=
triggerDepth>1;if(isRecursive)eventSheetManager.GetLocalVarStack().Push();if(paramResults.length>0)this._scopeParent.SetFunctionParameters(paramResults);if(hasAnySolModifiers)eventSheetManager.PushCleanSol(combinedSolModifiers);const frame=eventStack.Push(this);frame.InitCallFunctionExpression(returnType,defaultReturnValue);eventStack.PushExpFunc(frame);runtime.SetDebuggingEnabled(false);if(this._CheckParentsOKToRun(frame)){runtime.IncrementExecCount();frame.SetCurrentEvent(this);const isAsync=this._scopeParent.IsAsync();
if(isAsync)[asyncId,ret]=this._scopeParent.StartAsyncFunctionCall();this._RunAndBlock(frame);if(isAsync)this._scopeParent.MaybeFinishAsyncFunctionCall(asyncId)}runtime.SetDebuggingEnabled(true);eventStack.Pop();eventStack.PopExpFunc();if(isRecursive)eventSheetManager.GetLocalVarStack().Pop();if(hasAnySolModifiers)eventSheetManager.PopSol(combinedSolModifiers);eventSheetManager._DecTriggerDepth();return ret||frame.GetFunctionReturnValue()}}};


// c3/events/eventScript.js
'use strict';{const C3=self.C3;const EMPTY_SOL_MODIFIERS=[];let hadUserScriptException=false;C3.EventScript=class EventScript extends C3.DefendedBase{constructor(eventSheet,parent,data){super();const runtime=eventSheet.GetRuntime();const eventSheetManager=eventSheet.GetEventSheetManager();this._eventSheet=eventSheet;this._eventSheetManager=eventSheetManager;this._runtime=eventSheet.GetRuntime();this._parent=parent;const userMethod=runtime.GetObjectReference(data[1]);this._func=userMethod;this._displayNumber=
data[2];this._eventSheet._RegisterEventByDisplayNumber(this,this._displayNumber);this._debugData=runtime.IsDebug()?{isBreakpoint:data[3][0],isBreakable:data[3][1]}:null}static Create(eventSheet,parent,data){return C3.New(C3.EventScript,eventSheet,parent,data)}_PostInit(){const userMethod=this._func;const localVars=this._runtime.GetEventSheetManager()._GetLocalVariablesScriptInterface(this);this._func=userMethod.bind(null,this._runtime.GetIRuntime(),localVars)}GetParent(){return this._parent}GetScopeParent(){return this._parent}GetEventSheet(){return this._eventSheet}GetDisplayNumber(){return this._displayNumber}IsDebugBreakable(){return this._debugData&&
this._debugData.isBreakable}IsDebugBreakpoint(){return this.IsDebugBreakable()&&this._debugData.isBreakpoint}_SetDebugBreakpoint(b){this._debugData.isBreakpoint=!!b}IsElseBlock(){return false}GetSolModifiers(){return EMPTY_SOL_MODIFIERS}GetSolModifiersIncludingParents(){if(this._parent)return this._parent.GetSolModifiersIncludingParents();else return EMPTY_SOL_MODIFIERS}Run(frame){frame.SetCurrentEvent(this);this._eventSheetManager.AddAsyncActionPromise(this._RunUserScript())}async _RunUserScript(){try{await this._func()}catch(err){console.error(`Unhandled exception running script %c${this.GetEventSheet().GetName()}, event ${this.GetDisplayNumber()}:`,
"font-size: 1.2em; font-weight: bold;",err);if(self.C3Debugger)self.C3Debugger._SetLastErrorScript(this);if(!hadUserScriptException){console.info(`%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()`,"font-weight: bold; text-decoration: underline","","font-weight: bold");hadUserScriptException=true}}}*DebugRun(frame){frame.SetCurrentEvent(this);if(this.IsDebugBreakpoint()||this._runtime.DebugBreakNext())yield this;this.Run(frame)}DebugCanRunFast(){return!this.IsDebugBreakpoint()&&
!this._runtime.DebugBreakNext()}static HadUserScriptException(){return hadUserScriptException}static SetHadUserScriptException(){hadUserScriptException=true}}};


// c3/events/functionBlock.js
'use strict';{const C3=self.C3;const assert=self.assert;C3.FunctionBlock=class FunctionBlock extends C3.DefendedBase{constructor(eventSheet,parent,data){super();this._eventSheet=eventSheet;this._runtime=eventSheet.GetRuntime();this._parent=parent;const funcData=data[1];this._functionName=funcData[0];this._returnType=funcData[1];this._functionParameters=funcData[2].map(paramData=>C3.EventVariable.Create(eventSheet,this,paramData));this._isEnabled=funcData[3];this._isAsync=funcData[4];this._nextAsyncId=
0;this._currentAsyncId=-1;this._asyncMap=new Map;this._eventBlock=C3.EventBlock.Create(eventSheet,parent,data);this._eventBlock._SetScopeParent(this)}static Create(eventSheet,parent,data){return C3.New(C3.FunctionBlock,eventSheet,parent,data)}_PostInit(){for(const fp of this._functionParameters)fp._PostInit();this._eventBlock._PostInit(false)}_GetAllLocalVariablesInScope(){return this._functionParameters}GetFunctionParameters(){return this._functionParameters}GetFunctionParameterCount(){return this._functionParameters.length}EvaluateFunctionParameters(parameters){const functionParameters=
this._functionParameters;for(let i=0,len=functionParameters.length;i<len;++i)functionParameters[i].SetValue(parameters[i].Get(0))}SetFunctionParameters(paramResults){const functionParameters=this._functionParameters;for(let i=0,len=functionParameters.length;i<len;++i)functionParameters[i].SetValue(paramResults[i])}CaptureFunctionParameters(){return this._functionParameters.map(p=>p.GetValue())}GetParent(){return this._parent}GetScopeParent(){return this._parent}GetFunctionName(){return this._functionName}GetReturnType(){return this._returnType}IsEnabled(){return this._isEnabled}GetDefaultReturnValue(){switch(this._returnType){case 0:return null;
case 2:return"";default:return 0}}GetEventBlock(){return this._eventBlock}IsAsync(){return this._isAsync}StartAsyncFunctionCall(){const asyncId=this._nextAsyncId++;this._currentAsyncId=asyncId;let resolve;const promise=new Promise(r=>resolve=r);this._asyncMap.set(asyncId,{resolve,pauseCount:0});return[asyncId,promise]}MaybeFinishAsyncFunctionCall(asyncId){const info=this._asyncMap.get(asyncId);if(info.pauseCount===0){info.resolve();this._asyncMap.delete(asyncId)}this._currentAsyncId=-1}PauseCurrentAsyncFunction(){const info=
this._asyncMap.get(this._currentAsyncId);info.pauseCount++;return this._currentAsyncId}ResumeAsyncFunction(asyncId){this._currentAsyncId=asyncId;const info=this._asyncMap.get(asyncId);info.pauseCount--}}};


// c3/events/eventVariable.js
'use strict';{const C3=self.C3;const EMPTY_SOL_MODIFIERS=[];C3.EventVariable=class EventVariable extends C3.DefendedBase{constructor(eventSheet,parent,data){super();const eventSheetManager=eventSheet.GetEventSheetManager();this._eventSheet=eventSheet;this._eventSheetManager=eventSheetManager;this._runtime=eventSheet.GetRuntime();this._parent=parent;this._localVarStack=eventSheetManager.GetLocalVarStack();this._name=data[1];this._type=data[2];this._initialValue=data[3];this._isStatic=!!data[4];this._isConstant=
!!data[5];this._isFunctionParameter=parent instanceof C3.FunctionBlock;this._sid=data[6];this._jsPropName=this._runtime.GetJsPropName(data[8]);this._scriptSetter=v=>this.SetValue(v);this._scriptGetter=()=>this.GetValue();this._hasSingleValue=!this._parent||this._isStatic||this._isConstant;this._value=this._initialValue;this._localIndex=-1;if(this.IsBoolean())this._value=this._value?1:0;if(this.IsLocal()&&!this.IsStatic()&&!this.IsConstant())this._localIndex=eventSheetManager._GetNextLocalVarIndex(this);
eventSheetManager._RegisterEventVariable(this)}static Create(eventSheet,parent,data){return C3.New(C3.EventVariable,eventSheet,parent,data)}_PostInit(){}GetName(){return this._name}GetJsPropName(){return this._jsPropName}GetParent(){return this._parent}IsGlobal(){return!this.GetParent()}IsLocal(){return!this.IsGlobal()}IsFunctionParameter(){return this._isFunctionParameter}IsStatic(){return this._isStatic}IsConstant(){return this._isConstant}IsNumber(){return this._type===0}IsString(){return this._type===
1}IsBoolean(){return this._type===2}IsElseBlock(){return false}GetSID(){return this._sid}GetInitialValue(){return this._initialValue}GetSolModifiers(){return EMPTY_SOL_MODIFIERS}Run(frame){if(this.IsLocal()&&!this.IsStatic()&&!this.IsConstant())this.SetValue(this.GetInitialValue())}DebugCanRunFast(){return true}*DebugRun(frame){this.Run(frame)}SetValue(v){if(this.IsNumber()){if(typeof v!=="number")v=parseFloat(v)}else if(this.IsString()){if(typeof v!=="string")v=v.toString()}else if(this.IsBoolean())v=
v?1:0;if(this._hasSingleValue)this._value=v;else this._localVarStack.GetCurrent()[this._localIndex]=v}GetValue(){return this._hasSingleValue?this._value:this._localVarStack.GetCurrent()[this._localIndex]}GetTypedValue(){let ret=this.GetValue();if(this.IsBoolean())ret=!!ret;return ret}ResetToInitialValue(){this._value=this._initialValue}_GetScriptInterfaceDescriptor(){return{configurable:false,enumerable:true,get:this._scriptGetter,set:this._scriptSetter}}}};


// c3/events/eventInclude.js
'use strict';{const C3=self.C3;const assert=self.assert;const EMPTY_SOL_MODIFIERS=[];C3.EventInclude=class EventInclude extends C3.DefendedBase{constructor(eventSheet,parent,data){super();const eventSheetManager=eventSheet.GetEventSheetManager();this._eventSheet=eventSheet;this._eventSheetManager=eventSheetManager;this._runtime=eventSheet.GetRuntime();this._parent=parent;this._includeSheet=null;this._includeSheetName=data[1];this._isActive=true}static Create(eventSheet,parent,data){return C3.New(C3.EventInclude,
eventSheet,parent,data)}_PostInit(){this._includeSheet=this._eventSheetManager.GetEventSheetByName(this._includeSheetName);this._eventSheet._AddShallowInclude(this);let p=this.GetParent();while(p){if(p instanceof C3.EventBlock&&p.IsGroup())p._AddContainedInclude(this);p=p.GetParent()}this.UpdateActive();if(this._runtime.IsDebug())this._eventSheet._GetPerfRecord().children.push(this._includeSheet._GetPerfRecord())}GetParent(){return this._parent}GetSolModifiers(){return EMPTY_SOL_MODIFIERS}GetIncludeSheet(){return this._includeSheet}Run(frame){const pushSol=
!!this.GetParent();const allObjectClasses=this._runtime.GetAllObjectClasses();if(pushSol)this._eventSheetManager.PushCleanSol(allObjectClasses);this._includeSheet.Run();if(pushSol)this._eventSheetManager.PopSol(allObjectClasses)}*DebugRun(frame){const pushSol=!!this.GetParent();const allObjectClasses=this._runtime.GetAllObjectClasses();if(pushSol)this._eventSheetManager.PushCleanSol(allObjectClasses);yield*this._includeSheet.DebugRun();if(pushSol)this._eventSheetManager.PopSol(allObjectClasses)}DebugCanRunFast(){return false}IsActive(){return this._isActive}UpdateActive(){let p=
this.GetParent();while(p){if(p instanceof C3.EventBlock&&p.IsGroup()&&!p.IsGroupActive()){this._isActive=false;return}p=p.GetParent()}this._isActive=true}}};


// c3/events/expNode.js
'use strict';{const C3=self.C3;const assert=self.assert;C3.ExpNode=class ExpNode extends C3.DefendedBase{constructor(owner){super();this._owner=owner;this._runtime=owner.GetRuntime()}_PostInit(){}static CreateNode(owner,data){const type=data[0];const Classes=[BehaviorExpressionNode,ObjectExpressionNode,InstVarExpressionNode,EventVarExpNode,SystemExpressionExpNode,CallFunctionExpressionExpNode];return C3.New(Classes[type],owner,data)}};class SystemExpressionExpNode extends C3.ExpNode{constructor(owner,
data){super(owner);this._systemPlugin=this._runtime.GetSystemPlugin();this._func=this._runtime.GetObjectReference(data[1]);if(this._func===C3.Plugins.System.Exps.random||this._func===C3.Plugins.System.Exps.choose)this._owner.SetVariesPerInstance()}GetBoundMethod(){return this._systemPlugin._GetBoundACEMethod(this._func,this._systemPlugin)}}class CallFunctionExpressionExpNode extends C3.ExpNode{constructor(owner,data){super(owner);this._functionBlock=null;this._functionName=data[1];this._owner.SetVariesPerInstance()}_PostInit(){const eventSheetManager=
this._runtime.GetEventSheetManager();this._functionBlock=eventSheetManager.GetFunctionBlockByName(this._functionName);this._functionName=null;const myEventBlock=this._owner.GetEventBlock();const callEventBlock=this._functionBlock.GetEventBlock();this._combinedSolModifiers=[...new Set([...myEventBlock.GetSolModifiersIncludingParents(),...callEventBlock.GetSolModifiersIncludingParents()])];this._combinedSolModifiers=eventSheetManager._DeduplicateSolModifierList(this._combinedSolModifiers)}GetBoundMethod(){const functionBlock=
this._functionBlock;if(functionBlock.IsEnabled()){const callEventBlock=functionBlock.GetEventBlock();return C3.EventBlock.prototype.RunAsExpressionFunctionCall.bind(callEventBlock,this._combinedSolModifiers,functionBlock.GetReturnType(),functionBlock.GetDefaultReturnValue())}else{const defaultReturnValue=functionBlock.GetDefaultReturnValue();return()=>defaultReturnValue}}}function WrapIndex(index,len){if(index>=len)return index%len;else if(index<0){if(index<=-len)index%=len;if(index<0)index+=len;
return index}else return index}class ObjectExpressionNode extends C3.ExpNode{constructor(owner,data){super(owner);this._objectClass=this._runtime.GetObjectClassByIndex(data[1]);this._func=this._runtime.GetObjectReference(data[2]);this._returnsString=!!data[3];this._eventStack=this._runtime.GetEventSheetManager().GetEventStack();this._owner._MaybeVaryFor(this._objectClass)}GetBoundMethod(){return this._objectClass.GetPlugin()._GetBoundACEMethod(this._func,this._objectClass.GetSingleGlobalInstance().GetSdkInstance())}ExpObject(...args){const objectClass=
this._objectClass;const instances=objectClass.GetCurrentSol().GetExpressionInstances();const len=instances.length;if(len===0)return this._returnsString?"":0;const index=WrapIndex(this._owner.GetSolIndex(),len);this._eventStack.GetCurrentStackFrame().SetExpressionObjectClass(objectClass);return this._func.apply(instances[index].GetSdkInstance(),args)}ExpObject_InstExpr(instIndex,...args){const objectClass=this._objectClass;const instances=objectClass.GetInstances();const len=instances.length;if(len===
0)return this._returnsString?"":0;const index=WrapIndex(instIndex,len);this._eventStack.GetCurrentStackFrame().SetExpressionObjectClass(objectClass);return this._func.apply(instances[index].GetSdkInstance(),args)}}class InstVarExpressionNode extends C3.ExpNode{constructor(owner,data){super(owner);this._objectClass=this._runtime.GetObjectClassByIndex(data[1]);this._varIndex=data[3];this._returnsString=!!data[2];this._owner._MaybeVaryFor(this._objectClass)}ExpInstVar(){const instances=this._objectClass.GetCurrentSol().GetExpressionInstances();
const len=instances.length;if(len===0)return this._returnsString?"":0;const index=WrapIndex(this._owner.GetSolIndex(),len);return instances[index]._GetInstanceVariableValueUnchecked(this._varIndex)}ExpInstVar_Family(){const objectClass=this._objectClass;const instances=objectClass.GetCurrentSol().GetExpressionInstances();const len=instances.length;if(len===0)return this._returnsString?"":0;const index=WrapIndex(this._owner.GetSolIndex(),len);const inst=instances[index];const offset=inst.GetObjectClass().GetFamilyInstanceVariableOffset(objectClass.GetFamilyIndex());
return inst._GetInstanceVariableValueUnchecked(this._varIndex+offset)}ExpInstVar_InstExpr(instIndex){const objectClass=this._objectClass;const instances=objectClass.GetInstances();const len=instances.length;if(len===0)return this._returnsString?"":0;const index=WrapIndex(instIndex,len);const inst=instances[index];let offset=0;if(objectClass.IsFamily())offset=inst.GetObjectClass().GetFamilyInstanceVariableOffset(objectClass.GetFamilyIndex());return inst._GetInstanceVariableValueUnchecked(this._varIndex+
offset)}}class BehaviorExpressionNode extends C3.ExpNode{constructor(owner,data){super(owner);this._objectClass=this._runtime.GetObjectClassByIndex(data[1]);this._behaviorType=this._objectClass.GetBehaviorTypeByName(data[2]);this._behaviorIndex=this._objectClass.GetBehaviorIndexByName(data[2]);this._func=this._runtime.GetObjectReference(data[3]);this._returnsString=!!data[4];this._eventStack=this._runtime.GetEventSheetManager().GetEventStack();this._owner._MaybeVaryFor(this._objectClass)}ExpBehavior(...args){const objectClass=
this._objectClass;const instances=objectClass.GetCurrentSol().GetExpressionInstances();const len=instances.length;if(len===0)return this._returnsString?"":0;const index=WrapIndex(this._owner.GetSolIndex(),len);this._eventStack.GetCurrentStackFrame().SetExpressionObjectClass(objectClass);const inst=instances[index];let offset=0;if(objectClass.IsFamily())offset=inst.GetObjectClass().GetFamilyBehaviorOffset(objectClass.GetFamilyIndex());return this._func.apply(inst.GetBehaviorInstances()[this._behaviorIndex+
offset].GetSdkInstance(),args)}ExpBehavior_InstExpr(instIndex,...args){const objectClass=this._objectClass;const instances=objectClass.GetInstances();const len=instances.length;if(len===0)return this._returnsString?"":0;const index=WrapIndex(instIndex,len);this._eventStack.GetCurrentStackFrame().SetExpressionObjectClass(objectClass);const inst=instances[index];let offset=0;if(objectClass.IsFamily())offset=inst.GetObjectClass().GetFamilyBehaviorOffset(objectClass.GetFamilyIndex());return this._func.apply(inst.GetBehaviorInstances()[this._behaviorIndex+
offset].GetSdkInstance(),args)}}class EventVarExpNode extends C3.ExpNode{constructor(owner,data){super(owner);this._eventVar=null;this._eventVarSid=data[1]}_PostInit(){this._eventVar=this._runtime.GetEventSheetManager().GetEventVariableBySID(this._eventVarSid)}GetVar(){return this._eventVar}}};


// c3/events/parameter.js
'use strict';{const C3=self.C3;const assert=self.assert;C3.Parameter=class Parameter extends C3.DefendedBase{constructor(owner,type,index){super();this._owner=owner;this._index=index;this._type=type;this.Get=null;this._variesPerInstance=false;this._isConstant=false}static Create(owner,data,index){const type=data[0];const Classes=[ExpressionParameter,StringExpressionParameter,FileParameter,ComboParameter,ObjectParameter,LayerExpressionParameter,LayoutParameter,ExpressionParameter,ComboParameter,ComboParameter,
InstVarParameter,EventVarParameter,FileParameter,VariadicParameter,StringExpressionParameter,TimelineParameter,BooleanParameter,FunctionParameter,EaseParameter];return C3.New(Classes[type],owner,type,index,data)}_PostInit(){}SetVariesPerInstance(){this._variesPerInstance=true}_MaybeVaryFor(objectClass){if(this._variesPerInstance)return;if(!objectClass)return;if(!objectClass.GetPlugin().IsSingleGlobal())this._variesPerInstance=true}VariesPerInstance(){return this._variesPerInstance}GetIndex(){return this._index}GetRuntime(){return this._owner.GetRuntime()}GetEventBlock(){return this._owner.GetEventBlock()}IsConstant(){return this._isConstant}};
function GetExpressionFunc(number){const ret=self.C3_ExpressionFuncs[number];if(!ret)throw new Error("invalid expression number");return ret}class ExpressionParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._solIndex=0;const expData=data[1];this._expressionNumber=expData[0];this._numberedNodes=[];this._expressionFunc=null;for(let i=1,len=expData.length;i<len;++i)this._numberedNodes.push(C3.ExpNode.CreateNode(this,expData[i]));if(this._numberedNodes.length)this.Get=
this.GetExpression;else{this.Get=GetExpressionFunc(this._expressionNumber);this._isConstant=true}}_GetNode(i){if(i<0||i>=this._numberedNodes.length)throw new RangeError("invalid numbered node");return this._numberedNodes[i]}_PostInit(){for(const node of this._numberedNodes)node._PostInit();const func=GetExpressionFunc(this._expressionNumber);if(this._numberedNodes.length)this._expressionFunc=func(this);else this._expressionFunc=func}GetSolIndex(){return this._solIndex}GetExpression(solIndex){this._solIndex=
solIndex;return this._expressionFunc()}}class StringExpressionParameter extends ExpressionParameter{constructor(owner,type,index,data){super(owner,type,index,data);this.Get=this.GetStringExpression;if(type===14){this.GetEventBlock().SetAllSolModifiers();if(this._owner instanceof C3.Action)this.GetEventBlock().SetSolWriterAfterCnds()}}GetStringExpression(solIndex){this._solIndex=solIndex;const ret=this._expressionFunc();if(typeof ret==="string")return ret;else return""}_GetFastTriggerValue(){return GetExpressionFunc(this._expressionNumber)()}}
class LayerExpressionParameter extends ExpressionParameter{constructor(owner,type,index,data){super(owner,type,index,data);this.Get=this.GetLayer;this._isConstant=false}GetLayer(solIndex){this._solIndex=solIndex;const ret=this._expressionFunc();const layout=this.GetRuntime().GetCurrentLayout();return layout.GetLayer(ret)}}class ComboParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._combo=data[1];this.Get=this.GetCombo;this._isConstant=true}GetCombo(){return this._combo}}
class BooleanParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._bool=data[1];this.Get=this.GetBoolean;this._isConstant=true}GetBoolean(){return this._bool}}class ObjectParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._objectClass=this.GetRuntime().GetObjectClassByIndex(data[1]);this.Get=this.GetObjectClass;const eventBlock=this.GetEventBlock();eventBlock._AddSolModifier(this._objectClass);if(this._owner instanceof
C3.Action)eventBlock.SetSolWriterAfterCnds();else if(eventBlock.GetParent())eventBlock.GetParent().SetSolWriterAfterCnds();this._isConstant=true}GetObjectClass(){return this._objectClass}}class LayoutParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._layout=this.GetRuntime().GetLayoutManager().GetLayoutByName(data[1]);this.Get=this.GetLayout;this._isConstant=true}GetLayout(){return this._layout}}class TimelineParameter extends C3.Parameter{constructor(owner,
type,index,data){super(owner,type,index);this._timeline=this.GetRuntime().GetTimelineManager().GetTimelineByName(data[1]);this.Get=this.GetTimeline;this._isConstant=true}GetTimeline(){return this._timeline}}class FileParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._fileInfo=data[1];this.Get=this.GetFile;this._isConstant=true}GetFile(){return this._fileInfo}}class InstVarParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,
index);this._instVarIndex=data[1];const ownerObjectClass=this._owner.GetObjectClass();if(ownerObjectClass&&ownerObjectClass.IsFamily()){this.Get=this.GetFamilyInstanceVariable;this.SetVariesPerInstance()}else{this.Get=this.GetInstanceVariable;this._isConstant=true}}GetInstanceVariable(){return this._instVarIndex}GetFamilyInstanceVariable(solIndex){solIndex=solIndex||0;const familyType=this._owner.GetObjectClass();const sol=familyType.GetCurrentSol();const instances=sol.GetInstances();let realType=
null;if(instances.length)realType=instances[solIndex%instances.length].GetObjectClass();else if(sol.HasAnyElseInstances()){const elseInstances=sol.GetElseInstances();realType=elseInstances[solIndex%elseInstances.length].GetObjectClass()}else if(familyType.GetInstanceCount()>0){const familyInstances=familyType.GetInstances();realType=familyInstances[solIndex%familyInstances.length].GetObjectClass()}else return 0;return this._instVarIndex+realType.GetFamilyInstanceVariableOffset(familyType.GetFamilyIndex())}}
class EventVarParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._eventVarSid=data[1];this._eventVar=null;this.Get=this.GetEventVariable;this._isConstant=true}_PostInit(){this._eventVar=this.GetRuntime().GetEventSheetManager().GetEventVariableBySID(this._eventVarSid)}GetEventVariable(){return this._eventVar}}class FunctionParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._functionBlockName=data[1];this._functionBlock=
null;this.Get=this.GetFunction;this._isConstant=true}_PostInit(){this._functionBlock=this.GetRuntime().GetEventSheetManager().GetFunctionBlockByName(this._functionBlockName);this._functionBlockName=null}GetFunction(){return this._functionBlock}}class VariadicParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._subParams=[];this._variadicRet=[];this._isConstant=true;for(let i=1,len=data.length;i<len;++i){const subParam=C3.Parameter.Create(this._owner,data[i],
0);this._subParams.push(subParam);this._variadicRet.push(0);if(!subParam.IsConstant())this._isConstant=false}this.Get=this.GetVariadic}_PostInit(){for(const subParam of this._subParams)subParam._PostInit()}GetVariadic(){const subParams=this._subParams;const variadicRet=this._variadicRet;for(let i=0,len=subParams.length;i<len;++i)variadicRet[i]=subParams[i].Get(0);return variadicRet}}class EaseParameter extends C3.Parameter{constructor(owner,type,index,data){super(owner,type,index);this._easeIndex=
data[1];this.Get=this.GetEase;this._isConstant=true}GetEase(){return this._easeIndex}}};


// c3/events/condition.js
'use strict';{const C3=self.C3;const assert=self.assert;function EvalParams(parameters,results){for(let i=0,len=parameters.length;i<len;++i)results[i]=parameters[i].Get(0)}const EMPTY_PARAMS_ARRAY=[];const noop=function(){};C3.Condition=class Condition extends C3.DefendedBase{constructor(eventBlock,data,index){super();this._eventBlock=eventBlock;this._runtime=eventBlock.GetRuntime();this._index=index;this._func=this._runtime.GetObjectReference(data[1]);this._isTrigger=data[3]>0;this._isFastTrigger=
data[3]===2;this._isLooping=!!data[4];this._isInverted=!!data[5];this._isStatic=!!data[6];this._sid=data[7];this._isInOrBlock=this._eventBlock.IsOrBlock();this._objectClass=null;this._behaviorType=null;this._behaviorIndex=-1;this._systemPlugin=null;this.Run=noop;this.DebugRun=noop;this._parameters=[];this._results=[];this._anyParamVariesPerInstance=false;this._savedData=null;this._unsavedData=null;this._debugData=this._runtime.IsDebug()?{isBreakpoint:data[8][0],canDebug:data[8][1]}:null;if(data[0]===
-1)this._systemPlugin=this._runtime.GetSystemPlugin();else{this._objectClass=this._runtime.GetObjectClassByIndex(data[0]);if(data[2]){this._behaviorType=this._objectClass.GetBehaviorTypeByName(data[2]);this._behaviorIndex=this._objectClass.GetBehaviorIndexByName(data[2])}if(this._eventBlock.GetParent())this._eventBlock.GetParent().SetSolWriterAfterCnds()}if(data.length===10){let paramData=data[9];for(let data of paramData){this._parameters.push(C3.Parameter.Create(this,data,this._parameters.length));
this._results.push(0)}}if(this._parameters.length===0){this._parameters=EMPTY_PARAMS_ARRAY;this._results=EMPTY_PARAMS_ARRAY}this._eventBlock.GetEventSheetManager()._RegisterCondition(this)}static Create(eventBlock,data,index){return C3.New(C3.Condition,eventBlock,data,index)}_PostInit(){for(const param of this._parameters){param._PostInit();if(param.VariesPerInstance())this._anyParamVariesPerInstance=true}if(this._isFastTrigger){this.Run=this._RunFastTrigger;this.DebugRun=this._DebugRunFastTrigger}else if(this._systemPlugin){this._SetSystemRunMethod();
this.DebugRun=this._DebugRunSystem}else if(this._objectClass.GetPlugin().IsSingleGlobal()){this._SetSingleGlobalRunMethod();this.DebugRun=this._DebugRunSingleGlobal}else if(this._isStatic){this.Run=this._RunStatic;this.DebugRun=this._DebugRunStatic}else{this.Run=this._RunObject;this.DebugRun=this._DebugRunObject}}_SetSystemRunMethod(){const plugin=this._systemPlugin;const bindThis=this._systemPlugin;this._SetRunMethodForBoundFunc(plugin,bindThis,this._RunSystem)}_SetSingleGlobalRunMethod(){const plugin=
this._objectClass.GetPlugin();const bindThis=this._objectClass.GetSingleGlobalInstance().GetSdkInstance();this._SetRunMethodForBoundFunc(plugin,bindThis,this._RunSingleGlobal)}_SetRunMethodForBoundFunc(plugin,bindThis,fallbackMethod){const func=this._func;const isInverted=this._isInverted;const parameters=this._parameters;if(parameters.length===0){const boundFunc=plugin._GetBoundACEMethod(func,bindThis);if(isInverted)this.Run=function RunSingleCnd_0param(){return C3.xor(boundFunc(),isInverted)};else this.Run=
boundFunc}else if(parameters.length===1){const param0=parameters[0];if(!isInverted&&param0.IsConstant())this.Run=plugin._GetBoundACEMethod_1param(func,bindThis,param0.Get(0));else{const boundFunc=plugin._GetBoundACEMethod(func,bindThis);this.Run=function RunSingleCnd_1param(){return C3.xor(boundFunc(param0.Get(0)),isInverted)}}}else if(parameters.length===2){const param0=parameters[0];const param1=parameters[1];if(!isInverted&&param0.IsConstant()&&param1.IsConstant())this.Run=plugin._GetBoundACEMethod_2params(func,
bindThis,param0.Get(0),param1.Get(0));else{const boundFunc=plugin._GetBoundACEMethod(func,bindThis);this.Run=function RunSingleCnd_2params(){return C3.xor(boundFunc(param0.Get(0),param1.Get(0)),isInverted)}}}else if(parameters.length===3){const param0=parameters[0];const param1=parameters[1];const param2=parameters[2];if(!isInverted&&param0.IsConstant()&&param1.IsConstant()&&param2.IsConstant())this.Run=plugin._GetBoundACEMethod_3params(func,bindThis,param0.Get(0),param1.Get(0),param2.Get(0));else{const boundFunc=
plugin._GetBoundACEMethod(func,bindThis);this.Run=function RunSingleCnd_3params(){return C3.xor(boundFunc(param0.Get(0),param1.Get(0),param2.Get(0)),isInverted)}}}else this.Run=fallbackMethod}GetSID(){return this._sid}_GetFunc(){return this._func}GetObjectClass(){return this._objectClass}GetBehaviorType(){return this._behaviorType}GetEventBlock(){return this._eventBlock}GetRuntime(){return this._runtime}GetIndex(){return this._index}GetDebugIndex(){return this.GetIndex()}IsTrigger(){return this._isTrigger}IsFastTrigger(){return this._isFastTrigger}IsInverted(){return this._isInverted}IsLooping(){return this._isLooping}IsBreakpoint(){return this._debugData.isBreakpoint}_SetBreakpoint(b){this._debugData.isBreakpoint=
!!b;this._eventBlock._UpdateCanRunFastRecursive()}_DebugReturnsGenerator(){return this._debugData.canDebug}DebugCanRunFast(){return!this.IsBreakpoint()&&!this._runtime.DebugBreakNext()&&!this._DebugReturnsGenerator()}GetSavedDataMap(){if(!this._savedData)this._savedData=new Map;return this._savedData}GetUnsavedDataMap(){if(!this._unsavedData)this._unsavedData=new Map;return this._unsavedData}_RunSystem(){const results=this._results;EvalParams(this._parameters,results);return C3.xor(this._func.apply(this._systemPlugin,
results),this._isInverted)}*_DebugRunSystem(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const results=this._results;EvalParams(this._parameters,results);let ret=this._func.apply(this._systemPlugin,results);if(C3.IsIterator(ret))ret=yield*ret;return C3.xor(ret,this._isInverted)}else return this.Run()}_RunSingleGlobal(){const results=this._results;EvalParams(this._parameters,results);const inst=this._objectClass.GetSingleGlobalInstance().GetSdkInstance();
return C3.xor(this._func.apply(inst,results),this._isInverted)}*_DebugRunSingleGlobal(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const results=this._results;EvalParams(this._parameters,results);const inst=this._objectClass.GetSingleGlobalInstance().GetSdkInstance();let ret=this._func.apply(inst,results);if(C3.IsIterator(ret))ret=yield*ret;return C3.xor(ret,this._isInverted)}else return this.Run()}_RunFastTrigger(){return true}*_DebugRunFastTrigger(){if(this.IsBreakpoint()||
this._runtime.DebugBreakNext())yield this;return true}_RunStatic(){const results=this._results;EvalParams(this._parameters,results);const ret=this._func.apply(this._behaviorType||this._objectClass,results);this._objectClass.ApplySolToContainer();return ret}*_DebugRunStatic(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const results=this._results;EvalParams(this._parameters,results);let ret=this._func.apply(this._behaviorType||this._objectClass,
results);if(C3.IsIterator(ret))ret=yield*ret;this._objectClass.ApplySolToContainer();return ret}else return this.Run()}_RunObject(){const parameters=this._parameters;const results=this._results;const sol=this._objectClass.GetCurrentSol();for(let i=0,len=parameters.length;i<len;++i){const p=parameters[i];if(!p.VariesPerInstance())results[i]=p.Get(0)}if(sol.IsSelectAll())return this._RunObject_FirstFilter(sol);else return this._RunObject_NextFilter(sol)}*_DebugRunObject(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;
return this._RunObject()}_EvaluateVaryingParameters(solIndex){const parameters=this._parameters;const results=this._results;for(let i=0,len=parameters.length;i<len;++i){const p=parameters[i];if(p.VariesPerInstance())results[i]=p.Get(solIndex)}}_RunObject_FirstFilter(sol){const objectClass=this._objectClass;const isFamily=objectClass.IsFamily();const familyIndex=objectClass.GetFamilyIndex();const behaviorIndex=this._behaviorIndex;const isBehavior=behaviorIndex>=0;const allInstances=objectClass.GetInstances();
const paramsVary=this._anyParamVariesPerInstance;const results=this._results;const func=this._func;const isInverted=this._isInverted;const isInOrBlock=this._isInOrBlock&&!this._isTrigger;sol.ClearArrays();for(let i=0,len=allInstances.length;i<len;++i){const inst=allInstances[i];if(paramsVary)this._EvaluateVaryingParameters(i);let ret;if(isBehavior){const offset=isFamily?inst.GetObjectClass().GetFamilyBehaviorOffset(familyIndex):0;ret=func.apply(inst.GetBehaviorInstances()[behaviorIndex+offset].GetSdkInstance(),
results)}else ret=func.apply(inst.GetSdkInstance(),results);if(C3.xor(ret,isInverted))sol._PushInstance(inst);else if(isInOrBlock)sol._PushElseInstance(inst)}objectClass.FinishCondition(true);sol._SetSelectAll(false);objectClass.ApplySolToContainer();return sol.HasAnyInstances()}_RunObject_NextFilter(sol){const objectClass=this._objectClass;const isFamily=objectClass.IsFamily();const familyIndex=objectClass.GetFamilyIndex();const isInContainer=objectClass.IsInContainer();const behaviorIndex=this._behaviorIndex;
const isBehavior=behaviorIndex>=0;const paramsVary=this._anyParamVariesPerInstance;const results=this._results;const func=this._func;const isInverted=this._isInverted;const isInOrBlock=this._isInOrBlock&&!this._isTrigger;const solInstances=sol._GetOwnInstances();const solElseInstances=sol._GetOwnElseInstances();const isUsingElseInstances=isInOrBlock&&!this._eventBlock.IsFirstConditionOfType(this);const arr=isUsingElseInstances?solElseInstances:solInstances;let k=0;let isAnyTrue=false;for(let i=0,
len=arr.length;i<len;++i){const inst=arr[i];if(paramsVary)this._EvaluateVaryingParameters(i);let ret;if(isBehavior){const offset=isFamily?inst.GetObjectClass().GetFamilyBehaviorOffset(familyIndex):0;ret=func.apply(inst.GetBehaviorInstances()[behaviorIndex+offset].GetSdkInstance(),results)}else ret=func.apply(inst.GetSdkInstance(),results);if(C3.xor(ret,isInverted)){isAnyTrue=true;if(isUsingElseInstances){solInstances.push(inst);if(isInContainer)inst._PushSiblingsToSolInstances()}else{arr[k]=inst;
if(isInContainer)inst._SetSiblingsToSolInstancesIndex(k);++k}}else if(isUsingElseInstances){arr[k]=inst;if(isInContainer)inst._SetSiblingsToSolElseInstancesIndex(k);++k}else if(isInOrBlock){solElseInstances.push(inst);if(isInContainer)inst._PushSiblingsToSolElseInstances()}}C3.truncateArray(arr,k);if(isInContainer)objectClass._TruncateContainerSols(isUsingElseInstances,k);const pickInFinish=isAnyTrue;if(isUsingElseInstances&&!isAnyTrue)isAnyTrue=this._OrBlockCheckInstances(solInstances);objectClass.FinishCondition(pickInFinish||
isInOrBlock);return isInOrBlock?isAnyTrue:sol.HasAnyInstances()}_OrBlockCheckInstances(solInstances){const objectClass=this._objectClass;const isFamily=objectClass.IsFamily();const familyIndex=objectClass.GetFamilyIndex();const paramsVary=this._anyParamVariesPerInstance;const behaviorIndex=this._behaviorIndex;const isBehavior=behaviorIndex>=0;const results=this._results;const func=this._func;const isInverted=this._isInverted;for(let i=0,len=solInstances.length;i<len;++i){const inst=solInstances[i];
if(paramsVary)this._EvaluateVaryingParameters(i);let ret;if(isBehavior){const offset=isFamily?inst.GetObjectClass().GetFamilyBehaviorOffset(familyIndex):0;ret=func.apply(inst.GetBehaviorInstances()[behaviorIndex+offset].GetSdkInstance(),results)}else ret=func.apply(inst.GetSdkInstance(),results);if(C3.xor(ret,isInverted))return true}return false}ReevaluateParameter(paramIndex,solIndex){return this._parameters[paramIndex].Get(solIndex)}GetFastTriggerValue(){const parameters=this._parameters;if(!parameters.length)throw new Error("no parameters");
return parameters[0]._GetFastTriggerValue()}_SaveToJson(){if(!this._savedData||!this._savedData.size)return null;const ex={};for(const [k,v]of this._savedData.entries()){let saveVal=v;if(k==="collmemory")saveVal=[...v.entries()].map(arr=>[arr[0].GetUID(),arr[1].GetUID(),arr[2]]);ex[k]=saveVal}return{"ex":ex}}_LoadFromJson(o){if(this._savedData){this._savedData.clear();this._savedData=null}if(!o)return;const runtime=this._runtime;const ex=o["ex"];if(ex){const map=this.GetSavedDataMap();map.clear();
for(const [k,v]of Object.entries(ex)){let loadVal=v;if(k==="collmemory")loadVal=C3.New(C3.PairMap,v.map(arr=>[runtime.GetInstanceByUID(arr[0]),runtime.GetInstanceByUID(arr[1]),arr[2]]).filter(arr=>arr[0]&&arr[1]));map.set(k,loadVal)}}}}};


// c3/events/action.js
'use strict';{const C3=self.C3;const assert=self.assert;function EvalParams(parameters,results){for(let i=0,len=parameters.length;i<len;++i)results[i]=parameters[i].Get(0)}const EMPTY_PARAMS_ARRAY=[];const noop=function(){};const noopGenerator=function*(){};C3.Action=class Action extends C3.DefendedBase{constructor(eventBlock,data,index){super();this._eventBlock=eventBlock;const runtime=eventBlock.GetRuntime();this._runtime=runtime;this._index=index;this._sid=data.length>=4?data[3]:-1;this._actionReturnType=
data.length>=5?data[4]:0;this._func=null;this._objectClass=null;this._behaviorType=null;this._behaviorIndex=-1;this._systemPlugin=null;this._callFunctionName="";this._callEventBlock=null;this._combinedSolModifiers=null;this.Run=noop;this.DebugRun=noop;this._parameters=[];this._results=[];this._anyParamVariesPerInstance=false;this._savedData=null;this._unsavedData=null;const isScript=data[0]===-3;const debugInfo=isScript?data[2]:data[5];this._debugData=runtime.IsDebug()||isScript?{isBreakpoint:debugInfo[0],
canDebug:debugInfo[1],index:debugInfo[2]}:null;if(data[0]===-1){this._systemPlugin=runtime.GetSystemPlugin();this._func=runtime.GetObjectReference(data[1])}else if(data[0]===-2)this._callFunctionName=data[1];else if(isScript){const userMethod=runtime.GetObjectReference(data[1]);this._func=userMethod;this.Run=this.RunUserScript;this.DebugRun=this.DebugRunUserScript;this._actionReturnType=1}else{this._func=runtime.GetObjectReference(data[1]);this._objectClass=runtime.GetObjectClassByIndex(data[0]);
if(data[2]){this._behaviorType=this._objectClass.GetBehaviorTypeByName(data[2]);this._behaviorIndex=this._objectClass.GetBehaviorIndexByName(data[2])}}if(data.length===7){const paramData=data[6];for(const data of paramData){this._parameters.push(C3.Parameter.Create(this,data,this._parameters.length));this._results.push(0)}}if(this._parameters.length===0){this._parameters=EMPTY_PARAMS_ARRAY;this._results=EMPTY_PARAMS_ARRAY}this._eventBlock.GetEventSheetManager()._RegisterAction(this)}static Create(eventBlock,
data,index){return C3.New(C3.Action,eventBlock,data,index)}_PostInit(){for(const param of this._parameters){param._PostInit();if(param.VariesPerInstance())this._anyParamVariesPerInstance=true}if(this._systemPlugin){this._SetSystemRunMethod();this.DebugRun=this._DebugRunSystem}else if(this._callFunctionName){this._SetCallFunctionRunMethod();this._callFunctionName=""}else if(this.Run===this.RunUserScript){const userMethod=this._func;const localVars=this._runtime.GetEventSheetManager()._GetLocalVariablesScriptInterface(this._eventBlock);
this._func=userMethod.bind(null,this._runtime.GetIRuntime(),localVars)}else if(this._behaviorType)if(this.IsAsync()){this.Run=this._RunBehavior_Async;this.DebugRun=this._DebugRunBehavior_Async}else{this.Run=this._RunBehavior;this.DebugRun=this._DebugRunBehavior}else if(this._objectClass.GetPlugin().IsSingleGlobal()){this._SetSingleGlobalRunMethod();this.DebugRun=this._DebugRunSingleGlobal}else if(this.IsAsync()){this.Run=this._RunObject_Async;this.DebugRun=this._DebugRunObject_Async}else if(!this._parameters.length){this.Run=
this._RunObject_ParamsConst;this.DebugRun=this._DebugRunObject_ParamsConst}else if(this._parameters.every(p=>p.VariesPerInstance())){this.Run=this._RunObject_AllParamsVary;this.DebugRun=this._DebugRunObject_AllParamsVary}else if(this._anyParamVariesPerInstance){this.Run=this._RunObject_SomeParamsVary;this.DebugRun=this._DebugRunObject_SomeParamsVary}else if(this._parameters.every(p=>p.IsConstant())){EvalParams(this._parameters,this._results);this.Run=this._RunObject_ParamsConst;this.DebugRun=this._DebugRunObject_ParamsConst}else{this.Run=
this._RunObject_ParamsDontVary;this.DebugRun=this._DebugRunObject_ParamsDontVary}}_SetSystemRunMethod(){const plugin=this._systemPlugin;const bindThis=this._systemPlugin;this._SetRunMethodForBoundFunc(plugin,bindThis,this._RunSystem)}_SetSingleGlobalRunMethod(){const plugin=this._objectClass.GetPlugin();const bindThis=this._objectClass.GetSingleGlobalInstance().GetSdkInstance();this._SetRunMethodForBoundFunc(plugin,bindThis,this._RunSingleGlobal)}_SetCallFunctionRunMethod(){const eventSheetManager=
this._eventBlock.GetEventSheetManager();const functionBlock=eventSheetManager.GetFunctionBlockByName(this._callFunctionName);if(functionBlock.IsEnabled()){this._callEventBlock=functionBlock.GetEventBlock();this._combinedSolModifiers=[...new Set([...this._eventBlock.GetSolModifiersIncludingParents(),...this._callEventBlock.GetSolModifiersIncludingParents()])];this._combinedSolModifiers=eventSheetManager._DeduplicateSolModifierList(this._combinedSolModifiers);this.Run=C3.EventBlock.prototype.RunAsFunctionCall.bind(this._callEventBlock,
this._combinedSolModifiers,this._parameters);this.DebugRun=this._DebugRunCallFunction}else{this.Run=noop;this.DebugRun=noopGenerator}}_SetRunMethodForBoundFunc(plugin,bindThis,fallbackMethod){const func=this._func;const parameters=this._parameters;if(parameters.length===0)this.Run=plugin._GetBoundACEMethod(func,bindThis);else if(parameters.length===1){const param0=parameters[0];if(param0.IsConstant())this.Run=plugin._GetBoundACEMethod_1param(func,bindThis,param0.Get(0));else{const boundFunc=plugin._GetBoundACEMethod(func,
bindThis);this.Run=function RunSingleAct_1param(){return boundFunc(param0.Get(0))}}}else if(parameters.length===2){const param0=parameters[0];const param1=parameters[1];if(param0.IsConstant()&&param1.IsConstant())this.Run=plugin._GetBoundACEMethod_2params(func,bindThis,param0.Get(0),param1.Get(0));else{const boundFunc=plugin._GetBoundACEMethod(func,bindThis);this.Run=function RunSingleAct_2params(){return boundFunc(param0.Get(0),param1.Get(0))}}}else if(parameters.length===3){const param0=parameters[0];
const param1=parameters[1];const param2=parameters[2];if(param0.IsConstant()&&param1.IsConstant()&&param2.IsConstant())this.Run=plugin._GetBoundACEMethod_3params(func,bindThis,param0.Get(0),param1.Get(0),param2.Get(0));else{const boundFunc=plugin._GetBoundACEMethod(func,bindThis);this.Run=function RunSingleAct_3params(){return boundFunc(param0.Get(0),param1.Get(0),param2.Get(0))}}}else this.Run=fallbackMethod}GetSID(){return this._sid}IsAsync(){return this._actionReturnType===1}CanBailOut(){return this._actionReturnType===
2}HasReturnType(){return this._actionReturnType!==0}GetObjectClass(){return this._objectClass}GetEventBlock(){return this._eventBlock}GetRuntime(){return this._runtime}GetIndex(){return this._index}GetDebugIndex(){return this._debugData.index}GetCombinedSolModifiers(){return this._combinedSolModifiers}IsBreakpoint(){return this._debugData.isBreakpoint}_SetBreakpoint(b){this._debugData.isBreakpoint=!!b;this._eventBlock._UpdateCanRunFastRecursive()}_DebugReturnsGenerator(){return this._debugData.canDebug}DebugCanRunFast(){return!this.IsBreakpoint()&&
!this._runtime.DebugBreakNext()&&!this._DebugReturnsGenerator()}GetSavedDataMap(){if(!this._savedData)this._savedData=new Map;return this._savedData}GetUnsavedDataMap(){if(!this._unsavedData)this._unsavedData=new Map;return this._unsavedData}_RunSystem(){const results=this._results;EvalParams(this._parameters,results);return this._func.apply(this._systemPlugin,results)}*_DebugRunSystem(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const results=
this._results;EvalParams(this._parameters,results);const ret=yield*this._func.apply(this._systemPlugin,results);return ret}else return this.Run()}*_DebugRunCallFunction(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;const ret=yield*this._callEventBlock.DebugRunAsFunctionCall(this._combinedSolModifiers,this._parameters);return ret}_RunSingleGlobal(){const results=this._results;EvalParams(this._parameters,results);return this._func.apply(this._objectClass.GetSingleGlobalInstance().GetSdkInstance(),
results)}*_DebugRunSingleGlobal(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const results=this._results;EvalParams(this._parameters,results);const ret=yield*this._func.apply(this._objectClass.GetSingleGlobalInstance().GetSdkInstance(),results);return ret}else return this.Run()}_RunObject_ParamsConst(){const results=this._results;const instances=this._objectClass.GetCurrentSol().GetInstances();for(let i=0,len=instances.length;i<len;++i)this._func.apply(instances[i].GetSdkInstance(),
results)}*_DebugRunObject_ParamsConst(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const results=this._results;const instances=this._objectClass.GetCurrentSol().GetInstances();for(let i=0,len=instances.length;i<len;++i)yield*this._func.apply(instances[i].GetSdkInstance(),results)}else this._RunObject_ParamsConst()}_RunObject_ParamsDontVary(){const results=this._results;EvalParams(this._parameters,results);const instances=this._objectClass.GetCurrentSol().GetInstances();
for(let i=0,len=instances.length;i<len;++i)this._func.apply(instances[i].GetSdkInstance(),results)}*_DebugRunObject_ParamsDontVary(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const results=this._results;EvalParams(this._parameters,results);const instances=this._objectClass.GetCurrentSol().GetInstances();for(let i=0,len=instances.length;i<len;++i)yield*this._func.apply(instances[i].GetSdkInstance(),results)}else this._RunObject_ParamsDontVary()}_RunObject_AllParamsVary(){const parameters=
this._parameters;const results=this._results;const func=this._func;const instances=this._objectClass.GetCurrentSol().GetInstances();for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j)results[j]=parameters[j].Get(i);func.apply(inst.GetSdkInstance(),results)}}*_DebugRunObject_AllParamsVary(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const parameters=this._parameters;const results=
this._results;const func=this._func;const instances=this._objectClass.GetCurrentSol().GetInstances();for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j)results[j]=parameters[j].Get(i);yield*func.apply(inst.GetSdkInstance(),results)}}else this._RunObject_AllParamsVary()}_RunObject_SomeParamsVary(){const parameters=this._parameters;const results=this._results;const func=this._func;const instances=this._objectClass.GetCurrentSol().GetInstances();
for(let i=0,len=parameters.length;i<len;++i){const p=parameters[i];if(!p.VariesPerInstance())results[i]=p.Get(0)}for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j){const p=parameters[j];if(p.VariesPerInstance())results[j]=p.Get(i)}func.apply(inst.GetSdkInstance(),results)}}*_DebugRunObject_SomeParamsVary(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const parameters=this._parameters;
const results=this._results;const func=this._func;const instances=this._objectClass.GetCurrentSol().GetInstances();for(let i=0,len=parameters.length;i<len;++i){const p=parameters[i];if(!p.VariesPerInstance())results[i]=p.Get(0)}for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j){const p=parameters[j];if(p.VariesPerInstance())results[j]=p.Get(i)}yield*func.apply(inst.GetSdkInstance(),results)}}else this._RunObject_SomeParamsVary()}_RunBehavior(){const objectClass=
this._objectClass;const isFamily=objectClass.IsFamily();const familyIndex=objectClass.GetFamilyIndex();const parameters=this._parameters;const paramsVary=this._anyParamVariesPerInstance;const results=this._results;const func=this._func;const behaviorIndex=this._behaviorIndex;const instances=objectClass.GetCurrentSol().GetInstances();for(let i=0,len=parameters.length;i<len;++i){const p=parameters[i];if(!p.VariesPerInstance())results[i]=p.Get(0)}for(let i=0,len=instances.length;i<len;++i){const inst=
instances[i];if(paramsVary)for(let j=0,lenj=parameters.length;j<lenj;++j){const p=parameters[j];if(p.VariesPerInstance())results[j]=p.Get(i)}const offset=isFamily?inst.GetObjectClass().GetFamilyBehaviorOffset(familyIndex):0;func.apply(inst.GetBehaviorInstances()[behaviorIndex+offset].GetSdkInstance(),results)}}*_DebugRunBehavior(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const objectClass=this._objectClass;const isFamily=objectClass.IsFamily();
const familyIndex=objectClass.GetFamilyIndex();const parameters=this._parameters;const paramsVary=this._anyParamVariesPerInstance;const results=this._results;const func=this._func;const behaviorIndex=this._behaviorIndex;const instances=objectClass.GetCurrentSol().GetInstances();for(let i=0,len=parameters.length;i<len;++i){const p=parameters[i];if(!p.VariesPerInstance())results[i]=p.Get(0)}for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];if(paramsVary)for(let j=0,lenj=parameters.length;j<
lenj;++j){const p=parameters[j];if(p.VariesPerInstance())results[j]=p.Get(i)}const offset=isFamily?inst.GetObjectClass().GetFamilyBehaviorOffset(familyIndex):0;yield*func.apply(inst.GetBehaviorInstances()[behaviorIndex+offset].GetSdkInstance(),results)}}else this._RunBehavior()}_RunObject_Async(){const parameters=this._parameters;const results=this._results;const func=this._func;const instances=this._objectClass.GetCurrentSol().GetInstances();const promises=[];for(let i=0,len=instances.length;i<len;++i){const inst=
instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j)results[j]=parameters[j].Get(i);promises.push(func.apply(inst.GetSdkInstance(),results))}return Promise.all(promises)}*_DebugRunObject_Async(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const parameters=this._parameters;const results=this._results;const func=this._func;const instances=this._objectClass.GetCurrentSol().GetInstances();const promises=[];for(let i=0,len=instances.length;i<
len;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j)results[j]=parameters[j].Get(i);promises.push(yield*func.apply(inst.GetSdkInstance(),results))}return Promise.all(promises)}else return this._RunObject_Async()}_RunBehavior_Async(){const objectClass=this._objectClass;const isFamily=objectClass.IsFamily();const familyIndex=objectClass.GetFamilyIndex();const parameters=this._parameters;const results=this._results;const func=this._func;const behaviorIndex=this._behaviorIndex;
const instances=objectClass.GetCurrentSol().GetInstances();const promises=[];for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j)results[j]=parameters[j].Get(i);const offset=isFamily?inst.GetObjectClass().GetFamilyBehaviorOffset(familyIndex):0;promises.push(func.apply(inst.GetBehaviorInstances()[behaviorIndex+offset].GetSdkInstance(),results))}return Promise.all(promises)}*_DebugRunBehavior_Async(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;
if(this._DebugReturnsGenerator()){const objectClass=this._objectClass;const isFamily=objectClass.IsFamily();const familyIndex=objectClass.GetFamilyIndex();const parameters=this._parameters;const results=this._results;const func=this._func;const behaviorIndex=this._behaviorIndex;const instances=objectClass.GetCurrentSol().GetInstances();const promises=[];for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];for(let j=0,lenj=parameters.length;j<lenj;++j)results[j]=parameters[j].Get(i);
const offset=isFamily?inst.GetObjectClass().GetFamilyBehaviorOffset(familyIndex):0;promises.push(yield*func.apply(inst.GetBehaviorInstances()[behaviorIndex+offset].GetSdkInstance(),results))}return Promise.all(promises)}else return this._RunBehavior_Async()}async RunUserScript(){try{await this._func()}catch(err){console.error(`Unhandled exception running script %c${this._eventBlock.GetEventSheet().GetName()}, event ${this._eventBlock.GetDisplayNumber()}, action ${this.GetDebugIndex()+1}:`,"font-size: 1.2em; font-weight: bold;",
err);if(self.C3Debugger)self.C3Debugger._SetLastErrorScript(this);if(!C3.EventScript.HadUserScriptException()){console.info(`%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()`,"font-weight: bold; text-decoration: underline","","font-weight: bold");C3.EventScript.SetHadUserScriptException()}}}*DebugRunUserScript(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;return this.RunUserScript()}_SaveToJson(){if(!this._savedData||!this._savedData.size)return null;
return{"ex":C3.ToSuperJSON(this._savedData)}}_LoadFromJson(o){if(this._savedData){this._savedData.clear();this._savedData=null}if(!o)return;const ex=o["ex"];if(ex)this._savedData=C3.FromSuperJSON(ex)}}};


// c3/events/commonACEs.js
'use strict';{const C3=self.C3;const tempColor=new C3.Color;function CompareX(cmp,x){return C3.compare(this.GetWorldInfo().GetX(),cmp,x)}function CompareY(cmp,y){return C3.compare(this.GetWorldInfo().GetY(),cmp,y)}function IsOnScreen(){const wi=this.GetWorldInfo();return wi.IsInViewport(wi.GetLayer().GetViewport())}function IsOutsideLayout(){const wi=this.GetWorldInfo();const layout=wi.GetLayout();const bbox=wi.GetBoundingBox();return bbox.getRight()<0||bbox.getBottom()<0||bbox.getLeft()>layout.GetWidth()||
bbox.getTop()>layout.GetHeight()}function PickDistance(which,x,y){const sol=this.GetCurrentSol();const instances=sol.GetInstances();if(!instances.length)return false;let inst=instances[0];let wi=inst.GetWorldInfo();let pickme=inst;let dist2=C3.distanceSquared(wi.GetX(),wi.GetY(),x,y);for(let i=1,len=instances.length;i<len;++i){inst=instances[i];wi=inst.GetWorldInfo();const d2=C3.distanceSquared(wi.GetX(),wi.GetY(),x,y);if(which===0&&d2<dist2||which===1&&d2>dist2){dist2=d2;pickme=inst}}sol.PickOne(pickme);
return true}function SetX(x){const wi=this.GetWorldInfo();if(wi.GetX()===x)return;wi.SetX(x);wi.SetBboxChanged()}function SetY(y){const wi=this.GetWorldInfo();if(wi.GetY()===y)return;wi.SetY(y);wi.SetBboxChanged()}function SetPos(x,y){const wi=this.GetWorldInfo();if(wi.EqualsXY(x,y))return;wi.SetXY(x,y);wi.SetBboxChanged()}function SetPosToObject(objectClass,imgPt){if(!objectClass)return;const inst=objectClass.GetPairedInstance(this._inst);if(!inst)return;const [x,y]=inst.GetImagePoint(imgPt);const wi=
this.GetWorldInfo();if(wi.GetX()===x&&wi.GetY()===y)return;wi.SetXY(x,y);wi.SetBboxChanged()}function MoveForward(dist){if(dist===0)return;const wi=this.GetWorldInfo();wi.OffsetXY(wi.GetCosAngle()*dist,wi.GetSinAngle()*dist);wi.SetBboxChanged()}function MoveAtAngle(a,dist){if(dist===0)return;const wi=this.GetWorldInfo();a=C3.toRadians(a);wi.OffsetXY(Math.cos(a)*dist,Math.sin(a)*dist);wi.SetBboxChanged()}function GetX(){return this.GetWorldInfo().GetX()}function GetY(){return this.GetWorldInfo().GetY()}
function GetDt(){return this._runtime.GetDt(this._inst)}function CompareWidth(cmp,w){return C3.compare(this.GetWorldInfo().GetWidth(),cmp,w)}function CompareHeight(cmp,h){return C3.compare(this.GetWorldInfo().GetHeight(),cmp,h)}function SetWidth(w){const wi=this.GetWorldInfo();if(wi.GetWidth()===w)return;wi.SetWidth(w);wi.SetBboxChanged()}function SetHeight(h){const wi=this.GetWorldInfo();if(wi.GetHeight()===h)return;wi.SetHeight(h);wi.SetBboxChanged()}function SetSize(w,h){const wi=this.GetWorldInfo();
if(wi.GetWidth()===w&&wi.GetHeight()===h)return;wi.SetSize(w,h);wi.SetBboxChanged()}function GetWidth(){return this.GetWorldInfo().GetWidth()}function GetHeight(){return this.GetWorldInfo().GetHeight()}function GetBboxLeft(){return this.GetWorldInfo().GetBoundingBox().getLeft()}function GetBboxTop(){return this.GetWorldInfo().GetBoundingBox().getTop()}function GetBboxRight(){return this.GetWorldInfo().GetBoundingBox().getRight()}function GetBboxBottom(){return this.GetWorldInfo().GetBoundingBox().getBottom()}
function IsAngleWithin(within,a){return C3.angleDiff(this.GetWorldInfo().GetAngle(),C3.toRadians(a))<=C3.toRadians(within)}function IsAngleClockwiseFrom(a){return C3.angleClockwise(this.GetWorldInfo().GetAngle(),C3.toRadians(a))}function IsBetweenAngles(a,b){const lower=C3.toRadians(a);const upper=C3.toRadians(b);const angle=this.GetWorldInfo().GetAngle();const obtuse=!C3.angleClockwise(upper,lower);if(obtuse)return!(!C3.angleClockwise(angle,lower)&&C3.angleClockwise(angle,upper));else return C3.angleClockwise(angle,
lower)&&!C3.angleClockwise(angle,upper)}function SetAngle(a){const wi=this.GetWorldInfo();const newAngle=C3.clampAngle(C3.toRadians(a));if(isNaN(newAngle)||wi.GetAngle()===newAngle)return;wi.SetAngle(newAngle);wi.SetBboxChanged()}function RotateClockwise(a){if(isNaN(a)||a===0)return;const wi=this.GetWorldInfo();wi.SetAngle(wi.GetAngle()+C3.toRadians(a));wi.SetBboxChanged()}function RotateCounterclockwise(a){if(isNaN(a)||a===0)return;const wi=this.GetWorldInfo();wi.SetAngle(wi.GetAngle()-C3.toRadians(a));
wi.SetBboxChanged()}function RotateTowardAngle(amt,target){const wi=this.GetWorldInfo();const a=wi.GetAngle();const newAngle=C3.angleRotate(a,C3.toRadians(target),C3.toRadians(amt));if(isNaN(newAngle)||a===newAngle)return;wi.SetAngle(newAngle);wi.SetBboxChanged()}function RotateTowardPosition(amt,x,y){const wi=this.GetWorldInfo();const a=wi.GetAngle();const dx=x-wi.GetX();const dy=y-wi.GetY();const target=Math.atan2(dy,dx);const newAngle=C3.angleRotate(a,target,C3.toRadians(amt));if(isNaN(newAngle)||
a===newAngle)return;wi.SetAngle(newAngle);wi.SetBboxChanged()}function SetTowardPosition(x,y){const wi=this.GetWorldInfo();const a=wi.GetAngle();const dx=x-wi.GetX();const dy=y-wi.GetY();const newAngle=Math.atan2(dy,dx);if(isNaN(newAngle)||a===newAngle)return;wi.SetAngle(newAngle);wi.SetBboxChanged()}function GetAngle(){return C3.toDegrees(this.GetWorldInfo().GetAngle())}function CompareOpacity(cmp,x){return C3.compare(C3.round6dp(this.GetWorldInfo().GetOpacity()*100),cmp,x)}function IsVisible(){return this.GetWorldInfo().IsVisible()}
function SetVisible(v){const wi=this.GetWorldInfo();if(v===2)v=!wi.IsVisible();else v=v!==0;if(wi.IsVisible()===v)return;wi.SetVisible(v);this._runtime.UpdateRender()}function SetOpacity(o){const newOpacity=C3.clamp(o/100,0,1);const wi=this.GetWorldInfo();if(wi.GetOpacity()===newOpacity)return;wi.SetOpacity(newOpacity);this._runtime.UpdateRender()}function SetDefaultColor(rgb){tempColor.setFromRgbValue(rgb);const wi=this.GetWorldInfo();if(wi.GetUnpremultipliedColor().equalsIgnoringAlpha(tempColor))return;
wi.SetUnpremultipliedColor(tempColor);this._runtime.UpdateRender()}function GetColor(){const c=this.GetWorldInfo().GetUnpremultipliedColor();return C3.PackRGBAEx(c.getR(),c.getG(),c.getB(),c.getA())}function GetOpacity(){return C3.round6dp(this.GetWorldInfo().GetOpacity()*100)}function IsOnLayer(layer){if(!layer)return false;return this.GetWorldInfo().GetLayer()===layer}function PickTopBottom(which){const sol=this.GetCurrentSol();const instances=sol.GetInstances();if(!instances.length)return false;
let inst=instances[0];let pickme=inst;for(let i=1,len=instances.length;i<len;++i){const inst=instances[i];const instWi=inst.GetWorldInfo();const pickmeWi=pickme.GetWorldInfo();const instLayerIndex=instWi.GetLayer().GetIndex();const pickmeLayerIndex=pickmeWi.GetLayer().GetIndex();if(which===0){if(instLayerIndex>pickmeLayerIndex||instLayerIndex===pickmeLayerIndex&&instWi.GetZIndex()>pickmeWi.GetZIndex())pickme=inst}else if(instLayerIndex<pickmeLayerIndex||instLayerIndex===pickmeLayerIndex&&instWi.GetZIndex()<
pickmeWi.GetZIndex())pickme=inst}sol.PickOne(pickme);return true}function CompareZElevation(which,cmp,value){const wi=this.GetWorldInfo();const z=which===0?wi.GetZElevation():wi.GetTotalZElevation();return C3.compare(z,cmp,value)}function MoveToTop(){this.GetWorldInfo().ZOrderMoveToTop()}function MoveToBottom(){this.GetWorldInfo().ZOrderMoveToBottom()}function MoveToLayer(layerMove){if(!layerMove)return;this.GetWorldInfo().ZOrderMoveToLayer(layerMove)}function ZMoveToObject(where,objectClass){const isAfter=
where===0;if(!objectClass)return;const otherInst=objectClass.GetFirstPicked(this.GetInstance());if(!otherInst)return;this.GetWorldInfo().ZOrderMoveAdjacentToInstance(otherInst,isAfter)}function SetZElevation(z){const wi=this.GetWorldInfo();if(wi.GetZElevation()===z)return;wi.SetZElevation(z);this._runtime.UpdateRender()}function LayerNumber(){return this.GetWorldInfo().GetLayer().GetIndex()}function LayerName(){return this.GetWorldInfo().GetLayer().GetName()}function ZIndex(){return this.GetWorldInfo().GetZIndex()}
function ZElevation(){return this.GetWorldInfo().GetZElevation()}function TotalZElevation(){return this.GetWorldInfo().GetTotalZElevation()}function SetEffectEnabled(enabled,effectName){const effectType=this.GetObjectClass().GetEffectList().GetEffectTypeByName(effectName);if(!effectType)return;const effectTypeIndex=effectType.GetIndex();const e=enabled===1;const instFxList=this.GetWorldInfo().GetInstanceEffectList();if(instFxList.IsEffectIndexActive(effectTypeIndex)===e)return;instFxList.SetEffectIndexActive(effectTypeIndex,
e);instFxList.UpdateActiveEffects();this._runtime.UpdateRender()}function SetEffectParam(effectName,paramIndex,value){const effectType=this.GetObjectClass().GetEffectList().GetEffectTypeByName(effectName);if(!effectType)return;const effectTypeIndex=effectType.GetIndex();const instFxList=this.GetWorldInfo().GetInstanceEffectList();const paramsArr=instFxList.GetEffectParametersForIndex(effectTypeIndex);paramIndex=Math.floor(paramIndex);if(paramIndex<0||paramIndex>=paramsArr.length)return;const paramType=
effectType.GetShaderProgram().GetParameterType(paramIndex);if(paramType==="color"){tempColor.setFromRgbValue(value);const curColor=paramsArr[paramIndex];if(tempColor.equalsIgnoringAlpha(curColor))return;curColor.copyRgb(tempColor)}else{if(paramType==="percent")value/=100;if(paramsArr[paramIndex]===value)return;paramsArr[paramIndex]=value}if(instFxList.IsEffectIndexActive(effectTypeIndex))this._runtime.UpdateRender()}function HasParent(){return this.GetWorldInfo().HasParent()}function HasChildren(){return this.GetWorldInfo().HasChildren()}
function PickParent(parentObjectClass,which){const mySol=this.GetCurrentSol();const myInstances=mySol.GetInstances();if(myInstances.length===0)return false;const parentSol=parentObjectClass.GetCurrentSol();const parentInstances=parentSol.GetInstances();if(parentInstances.length===0)return false;const parentInstancesSet=new Set(parentInstances);const pickParents=new Set;for(let i=0,len=myInstances.length;i<len;++i){const myInst=myInstances[i];if(which===1)for(const parentInst of myInst.parents()){if(parentInst.BelongsToObjectClass(parentObjectClass)&&
parentInstancesSet.has(parentInst))pickParents.add(parentInst)}else{let parentInst;if(which===0){parentInst=myInst.GetParent();if(parentInst===null)continue}else parentInst=myInst.GetTopParent();if(parentInst.BelongsToObjectClass(parentObjectClass)&&parentInstancesSet.has(parentInst))pickParents.add(parentInst)}}if(pickParents.size===0)return false;parentSol.SetSetPicked(pickParents);parentObjectClass.ApplySolToContainer();return true}function PickChildren(childObjectClass,which){const mySol=this.GetCurrentSol();
const myInstances=mySol.GetInstances();if(myInstances.length===0)return false;const childSol=childObjectClass.GetCurrentSol();const childInstances=childSol.GetInstances();if(childInstances.length===0)return false;const childInstancesSet=new Set(childInstances);const pickChildren=new Set;for(let i=0,len=myInstances.length;i<len;++i){const myInst=myInstances[i];if(which===2&&!myInst.HasChildren()&&myInst.BelongsToObjectClass(childObjectClass)&&childInstancesSet.has(myInst))pickChildren.add(myInst);
for(const childInst of which===0?myInst.children():myInst.allChildren()){if(which===2&&childInst.HasChildren())continue;if(childInst.BelongsToObjectClass(childObjectClass)&&childInstancesSet.has(childInst))pickChildren.add(childInst)}}if(pickChildren.size===0)return false;childSol.SetSetPicked(pickChildren);childObjectClass.ApplySolToContainer();return true}function PickNthChild(childObjectClass,index){const mySol=this.GetCurrentSol();const myInstances=mySol.GetInstances();if(myInstances.length===
0)return false;const childSol=childObjectClass.GetCurrentSol();const childInstances=childSol.GetInstances();if(childInstances.length===0)return false;const childInstancesSet=new Set(childInstances);const pickChildren=[];for(let i=0,len=myInstances.length;i<len;++i){const myInst=myInstances[i];const childInst=myInst.GetChildAt(index);if(childInst!==null&&childInst.BelongsToObjectClass(childObjectClass)&&childInstancesSet.has(childInst))pickChildren.push(childInst)}if(pickChildren.length===0)return false;
childSol.SetArrayPicked(pickChildren);childObjectClass.ApplySolToContainer();return true}function CompareChildCount(cmp,count){return C3.compare(this._inst.GetChildCount(),cmp,count)}function AddChild(childObjectClass,transformX,transformY,transformWidth,transformHeight,transformAngle,transformZElevation,destroyWithParent){const inst=this._inst;const actObjectClass=this._runtime.GetCurrentAction().GetObjectClass();for(const child of childObjectClass.allCorrespondingInstances(inst,actObjectClass)){if(!child.GetPlugin().SupportsSceneGraph())return;
inst.AddChild(child,{transformX,transformY,transformWidth,transformHeight,transformAngle,transformZElevation,destroyWithParent})}}function RemoveChild(childObjectClass){const inst=this._inst;const actObjectClass=this._runtime.GetCurrentAction().GetObjectClass();for(const child of childObjectClass.allCorrespondingInstances(inst,actObjectClass))inst.RemoveChild(child)}function RemoveFromParent(){if(!this._inst.HasParent())return;const parent=this._inst.GetParent();parent.RemoveChild(this._inst)}function ChildCount(){return this._inst.GetChildCount()}
function SetMeshSize(cols,rows){cols=Math.floor(cols);rows=Math.floor(rows);const wi=this.GetWorldInfo();if(cols<2||rows<2||!isFinite(cols)||!isFinite(rows)){wi.ReleaseMesh();wi.SetBboxChanged()}else wi.CreateMesh(cols,rows)}function SetMeshPoint(col,row,mode,posx,posy,texu,texv){const wi=this.GetWorldInfo();const didBboxChange=wi.SetMeshPoint(col,row,{mode:mode===0?"absolute":"relative",x:posx,y:posy,u:texu,v:texv});if(didBboxChange)wi.SetBboxChanged()}function MeshColumns(){const wi=this.GetWorldInfo();
return wi.HasMesh()?wi.GetSourceMesh().GetHSize():0}function MeshRows(){const wi=this.GetWorldInfo();return wi.HasMesh()?wi.GetSourceMesh().GetVSize():0}function SetElementVisible(v){const wi=this.GetWorldInfo();if(v===2)v=!wi.IsVisible();else v=v!==0;if(wi.IsVisible()===v)return;wi.SetVisible(v)}function SetElementCSSStyle(prop,val){this.SetElementCSSStyle(prop,val)}function SetElementAttribute(attribName,value){this.SetElementAttribute(attribName,""+value)}function RemoveElementAttribute(attribName){this.RemoveElementAttribute(attribName)}
function SetElementFocus(){this.FocusElement()}function SetElementBlur(){this.BlurElement()}function IsElementFocused(){return this.IsElementFocused()}function SetElementEnabled(e){this._SetEnabled(e!==0)}function IsElementEnabled(){return this._IsEnabled()}function CompareInstanceVar(iv,cmp,val){return C3.compare(this.GetInstance().GetInstanceVariableValue(iv),cmp,val)}function IsBoolInstanceVarSet(iv){return!!this.GetInstance().GetInstanceVariableValue(iv)}function PickInstVarHiLow(which,iv){const sol=
this.GetCurrentSol();const instances=sol.GetInstances();if(!instances.length)return false;let inst=instances[0];let pickme=inst;let val=inst.GetInstanceVariableValue(iv);for(let i=1,len=instances.length;i<len;++i){inst=instances[i];const v=inst.GetInstanceVariableValue(iv);if(which===0&&v<val||which===1&&v>val){val=v;pickme=inst}}sol.PickOne(pickme);return true}function PickByUID(uid){if(this._runtime.GetCurrentCondition().IsInverted())return PickByUID_Inverted(this,uid);else return PickByUID_Normal(this,
uid)}function PickByUID_Normal(objectClass,uid){const inst=objectClass.GetRuntime().GetInstanceByUID(uid);if(!inst)return false;const sol=objectClass.GetCurrentSol();if(!sol.IsSelectAll()&&!sol._GetOwnInstances().includes(inst))return false;if(objectClass.IsFamily()){if(inst.GetObjectClass().BelongsToFamily(objectClass)){sol.PickOne(inst);objectClass.ApplySolToContainer();return true}}else if(inst.GetObjectClass()===objectClass){sol.PickOne(inst);objectClass.ApplySolToContainer();return true}return false}
function PickByUID_Inverted(objectClass,uid){const sol=objectClass.GetCurrentSol();if(sol.IsSelectAll()){sol._SetSelectAll(false);sol.ClearArrays();const instances=objectClass.GetInstances();for(let i=0,len=instances.length;i<len;++i){const inst=instances[i];if(inst.GetUID()===uid)sol._PushElseInstance(inst);else sol._PushInstance(inst)}objectClass.ApplySolToContainer();return!!sol._GetOwnInstances().length}else{const instances=sol._GetOwnInstances();let j=0;for(let i=0,len=instances.length;i<len;++i){const inst=
instances[i];instances[j]=inst;if(inst.GetUID()===uid)sol._PushElseInstance(inst);else++j}C3.truncateArray(instances,j);objectClass.ApplySolToContainer();return!!instances.length}}function Destroy(){this._runtime.DestroyInstance(this._inst)}function OnCreated(){return true}function OnDestroyed(){return true}function SetInstanceVar(iv,value){this.GetInstance().SetInstanceVariableValue(iv,value)}function AddInstanceVar(iv,value){const instance=this.GetInstance();const lastValue=instance.GetInstanceVariableValue(iv);
if(typeof lastValue==="number"&&typeof value!=="number")value=parseFloat(value);else if(typeof lastValue==="string"&&typeof value!=="string")value=value.toString();instance.SetInstanceVariableValue(iv,lastValue+value)}function SubInstanceVar(iv,value){const instance=this.GetInstance();const lastValue=instance.GetInstanceVariableValue(iv);if(typeof lastValue!=="number")return;if(typeof value!=="number")value=parseFloat(value);instance.SetInstanceVariableValue(iv,lastValue-value)}function SetBoolInstanceVar(iv,
value){this.GetInstance().SetInstanceVariableValue(iv,value?1:0)}function ToggleBoolInstanceVar(iv){const instance=this.GetInstance();instance.SetInstanceVariableValue(iv,instance.GetInstanceVariableValue(iv)===0?1:0)}function LoadFromJsonString(str){let o;try{o=JSON.parse(str)}catch(err){console.error("Failed to load from JSON string: ",err);return}this.GetInstance().LoadFromJson(o,"state")}function AsJSON(){return JSON.stringify(this.GetInstance().SaveToJson("state"))}function ObjectTypeName(){return this.GetInstance().GetObjectClass().GetName()}
function Count(){const expObjectClass=this._runtime.GetCurrentEventStackFrame().GetExpressionObjectClass();let count=expObjectClass.GetInstanceCount();const instancesPendingCreate=this._runtime._GetInstancesPendingCreate();for(const inst of instancesPendingCreate)if(expObjectClass.IsFamily()){if(inst.GetObjectClass().BelongsToFamily(expObjectClass))++count}else if(inst.GetObjectClass()===expObjectClass)++count;return count}function PickedCount(){return this._runtime.GetCurrentEventStackFrame().GetExpressionObjectClass().GetCurrentSol().GetInstances().length}
function GetIID(){return this._inst.GetIID()}function GetUID(){return this._inst.GetUID()}C3.AddCommonACEs=function AddCommonACEs(pluginData,pluginCtor){const isSingleGlobal=pluginData[1];const hasPositionACEs=pluginData[3];const hasSizeACEs=pluginData[4];const hasAngleACEs=pluginData[5];const hasAppearanceACEs=pluginData[6];const hasZOrderACEs=pluginData[7];const hasEffectsACEs=pluginData[8];const hasElementACEs=pluginData[10];const hasElementFocusACEs=pluginData[11];const hasElementEnabledACEs=
pluginData[12];const hasSceneGraphACEs=pluginData[13];const hasMeshACEs=pluginData[14];const Cnds=pluginCtor.Cnds;const Acts=pluginCtor.Acts;const Exps=pluginCtor.Exps;if(hasPositionACEs){Cnds.CompareX=CompareX;Cnds.CompareY=CompareY;Cnds.IsOnScreen=IsOnScreen;Cnds.IsOutsideLayout=IsOutsideLayout;Cnds.PickDistance=PickDistance;Acts.SetX=SetX;Acts.SetY=SetY;Acts.SetPos=SetPos;Acts.SetPosToObject=SetPosToObject;Acts.MoveForward=MoveForward;Acts.MoveAtAngle=MoveAtAngle;Exps.X=GetX;Exps.Y=GetY;Exps.dt=
GetDt}if(hasSizeACEs){Cnds.CompareWidth=CompareWidth;Cnds.CompareHeight=CompareHeight;Acts.SetWidth=SetWidth;Acts.SetHeight=SetHeight;Acts.SetSize=SetSize;Exps.Width=GetWidth;Exps.Height=GetHeight;Exps.BBoxLeft=GetBboxLeft;Exps.BBoxTop=GetBboxTop;Exps.BBoxRight=GetBboxRight;Exps.BBoxBottom=GetBboxBottom}if(hasAngleACEs){Cnds.AngleWithin=IsAngleWithin;Cnds.IsClockwiseFrom=IsAngleClockwiseFrom;Cnds.IsBetweenAngles=IsBetweenAngles;Acts.SetAngle=SetAngle;Acts.RotateClockwise=RotateClockwise;Acts.RotateCounterclockwise=
RotateCounterclockwise;Acts.RotateTowardAngle=RotateTowardAngle;Acts.RotateTowardPosition=RotateTowardPosition;Acts.SetTowardPosition=SetTowardPosition;Exps.Angle=GetAngle}if(hasAppearanceACEs){Cnds.IsVisible=IsVisible;Cnds.CompareOpacity=CompareOpacity;Acts.SetVisible=SetVisible;Acts.SetOpacity=SetOpacity;Acts.SetDefaultColor=SetDefaultColor;Exps.Opacity=GetOpacity;Exps.ColorValue=GetColor}if(hasZOrderACEs){Cnds.IsOnLayer=IsOnLayer;Cnds.PickTopBottom=PickTopBottom;Cnds.CompareZElevation=CompareZElevation;
Acts.MoveToTop=MoveToTop;Acts.MoveToBottom=MoveToBottom;Acts.MoveToLayer=MoveToLayer;Acts.ZMoveToObject=ZMoveToObject;Acts.SetZElevation=SetZElevation;Exps.LayerNumber=LayerNumber;Exps.LayerName=LayerName;Exps.ZIndex=ZIndex;Exps.ZElevation=ZElevation;Exps.TotalZElevation=TotalZElevation}if(hasEffectsACEs){Acts.SetEffectEnabled=SetEffectEnabled;Acts.SetEffectParam=SetEffectParam}if(hasSceneGraphACEs){Cnds.HasParent=HasParent;Cnds.HasChildren=HasChildren;Cnds.PickParent=PickParent;Cnds.PickChildren=
PickChildren;Cnds.PickNthChild=PickNthChild;Cnds.CompareChildCount=CompareChildCount;Acts.AddChild=AddChild;Acts.RemoveChild=RemoveChild;Acts.RemoveFromParent=RemoveFromParent;Exps.ChildCount=ChildCount}if(hasMeshACEs){Acts.SetMeshSize=SetMeshSize;Acts.SetMeshPoint=SetMeshPoint;Exps.MeshColumns=MeshColumns;Exps.MeshRows=MeshRows}if(hasElementACEs){Cnds.IsVisible=IsVisible;Acts.SetVisible=SetElementVisible;Acts.SetCSSStyle=SetElementCSSStyle;Acts.SetElemAttribute=SetElementAttribute;Acts.RemoveElemAttribute=
RemoveElementAttribute}if(hasElementFocusACEs){Cnds.IsFocused=IsElementFocused;Acts.SetFocus=SetElementFocus;Acts.SetBlur=SetElementBlur}if(hasElementEnabledACEs){Cnds.IsEnabled=IsElementEnabled;Acts.SetEnabled=SetElementEnabled}if(!isSingleGlobal){Cnds.CompareInstanceVar=CompareInstanceVar;Cnds.IsBoolInstanceVarSet=IsBoolInstanceVarSet;Cnds.PickInstVarHiLow=PickInstVarHiLow;Cnds.PickByUID=PickByUID;Acts.SetInstanceVar=SetInstanceVar;Acts.AddInstanceVar=AddInstanceVar;Acts.SubInstanceVar=SubInstanceVar;
Acts.SetBoolInstanceVar=SetBoolInstanceVar;Acts.ToggleBoolInstanceVar=ToggleBoolInstanceVar;Cnds.OnCreated=OnCreated;Cnds.OnDestroyed=OnDestroyed;Acts.Destroy=Destroy;if(!Acts.LoadFromJsonString)Acts.LoadFromJsonString=LoadFromJsonString;if(!Exps.AsJSON)Exps.AsJSON=AsJSON;Exps.Count=Count;Exps.PickedCount=PickedCount;Exps.IID=GetIID;Exps.UID=GetUID;Exps.ObjectTypeName=ObjectTypeName}}};


// c3/events/scheduledWait.js
'use strict';{const C3=self.C3;C3.ScheduledWait=class ScheduledWait extends C3.DefendedBase{constructor(eventSheetManager){super();this._eventSheetManager=eventSheetManager;this._type="";this._time=-1;this._signalTag="";this._isSignalled=false;this._event=null;this._actIndex=0;this._solModifiers=[];this._sols=new Map;this._callingFunctionBlock=null;this._asyncId=-1;this._functionParameters=null;this._shouldRelease=false}Release(){this._type="";this._time=-1;this._signalTag="";this._event=null;this._callingFunctionBlock=
null;this._functionParameters=null;this._asyncId=-1;C3.clearArray(this._solModifiers);for(const s of this._sols.values())s.Release();this._sols.clear()}_Init(){const eventSheetManager=this._eventSheetManager;const allObjectClasses=eventSheetManager.GetRuntime().GetAllObjectClasses();const frame=eventSheetManager.GetCurrentEventStackFrame();this._event=frame.GetCurrentEvent();this._actIndex=frame.GetActionIndex()+1;const functionBlock=eventSheetManager.FindFirstFunctionBlockParent(this._event);if(functionBlock){this._callingFunctionBlock=
functionBlock;this._functionParameters=functionBlock.CaptureFunctionParameters();if(functionBlock.IsAsync())this._asyncId=functionBlock.PauseCurrentAsyncFunction()}for(const objectClass of allObjectClasses){const sol=objectClass.GetCurrentSol();if(sol.IsSelectAll()&&!this._event.HasSolModifier(objectClass))continue;this._solModifiers.push(objectClass);this._sols.set(objectClass,C3.New(C3.SolState,sol))}}InitTimer(seconds){this._type="timer";this._Init();this._time=this._eventSheetManager.GetRuntime().GetGameTime()+
seconds}InitSignal(tag){this._type="signal";this._Init();this._signalTag=tag.toLowerCase()}InitPromise(p){this._type="promise";this._Init();p.then(()=>this.SetSignalled()).catch(err=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",err);this.SetSignalled()})}IsTimer(){return this._type==="timer"}IsSignal(){return this._type==="signal"}IsPromise(){return this._type==="promise"}GetSignalTag(){return this._signalTag}IsSignalled(){return this._isSignalled}SetSignalled(){this._isSignalled=
true}_ShouldRun(){if(this.IsTimer())return this._time<=this._eventSheetManager.GetRuntime().GetGameTime();else return this.IsSignalled()}_RestoreState(frame){frame._Restore(this._event,this._actIndex);for(const [objectClass,solState]of this._sols.entries()){const sol=objectClass.GetCurrentSol();solState._Restore(sol)}const callingFunctionBlock=this._callingFunctionBlock;if(callingFunctionBlock){callingFunctionBlock.SetFunctionParameters(this._functionParameters);if(callingFunctionBlock.IsAsync())callingFunctionBlock.ResumeAsyncFunction(this._asyncId)}}_Run(frame){this._RestoreState(frame);
this._event._ResumeActionsAndSubEvents(frame);if(this._callingFunctionBlock&&this._callingFunctionBlock.IsAsync())this._callingFunctionBlock.MaybeFinishAsyncFunctionCall(this._asyncId);this._eventSheetManager.ClearSol(this._solModifiers);this._shouldRelease=true}async _DebugRun(frame){this._RestoreState(frame);for(const breakEventObject of this._event._DebugResumeActionsAndSubEvents(frame))await this._eventSheetManager.GetRuntime().DebugBreak(breakEventObject);if(this._callingFunctionBlock&&this._callingFunctionBlock.IsAsync())this._callingFunctionBlock.MaybeFinishAsyncFunctionCall(this._asyncId);
this._eventSheetManager.ClearSol(this._solModifiers);this._shouldRelease=true}ShouldRelease(){return this._shouldRelease}RemoveInstances(s){for(const solState of this._sols.values())solState.RemoveInstances(s)}_SaveToJson(){const sols={};const o={"t":this._time,"st":this._signalTag,"s":this._isSignalled,"ev":this._event.GetSID(),"sm":this._solModifiers.map(oc=>oc.GetSID()),"sols":sols};if(this._event._HasActionIndex(this._actIndex))o["act"]=this._event.GetActionAt(this._actIndex).GetSID();for(const [objectClass,
solState]of this._sols)sols[objectClass.GetSID().toString()]=solState._SaveToJson();return o}static _CreateFromJson(eventSheetManager,o){const runtime=eventSheetManager.GetRuntime();const event=eventSheetManager.GetEventBlockBySID(o["ev"]);if(!event)return null;let actIndex=0;if(o.hasOwnProperty("act")){const act=eventSheetManager.GetActionBySID(o["act"]);if(!act)return null;actIndex=act.GetIndex()}const sw=C3.New(C3.ScheduledWait,eventSheetManager);sw._time=o["t"];sw._type=sw._time===-1?"signal":
"timer";sw._signalTag=o["st"];sw._isSignalled=o["s"];sw._event=event;sw._actIndex=actIndex;for(const sid of o["sm"]){const objectClass=runtime.GetObjectClassBySID(sid);if(objectClass)sw._solModifiers.push(objectClass)}for(const [sidStr,solData]of Object.entries(o["sols"])){const sid=parseInt(sidStr,10);const objectClass=runtime.GetObjectClassBySID(sid);if(!objectClass)continue;const solState=C3.New(C3.SolState,null);solState._LoadFromJson(eventSheetManager,solData);sw._sols.set(objectClass,solState)}return sw}}};


// c3/events/solState.js
'use strict';{const C3=self.C3;C3.SolState=class SolState extends C3.DefendedBase{constructor(sol){super();this._objectClass=null;this._isSelectAll=true;this._instances=[];if(sol){this._objectClass=sol.GetObjectClass();this._isSelectAll=sol.IsSelectAll();C3.shallowAssignArray(this._instances,sol._GetOwnInstances())}}Release(){this._objectClass=null;C3.clearArray(this._instances)}_Restore(sol){sol._SetSelectAll(this._isSelectAll);C3.shallowAssignArray(sol._GetOwnInstances(),this._instances)}RemoveInstances(s){C3.arrayRemoveAllInSet(this._instances,
s)}_SaveToJson(){return{"sa":this._isSelectAll,"insts":this._instances.map(inst=>inst.GetUID())}}_LoadFromJson(eventSheetManager,o){const runtime=eventSheetManager.GetRuntime();this._isSelectAll=!!o["sa"];C3.clearArray(this._instances);for(const uid of o["insts"]){const inst=runtime.GetInstanceByUID(uid);if(inst)this._instances.push(inst)}}}};


// c3/sdk/sdkPluginBase.js
'use strict';{const C3=self.C3;function GetNextParamMap(paramMap,param){let nextParamMap=paramMap.get(param);if(!nextParamMap){nextParamMap=new Map;paramMap.set(param,nextParamMap)}return nextParamMap}C3.SDKPluginBase=class SDKPluginBase extends C3.DefendedBase{constructor(opts){super();this._runtime=opts.runtime;this._isSingleGlobal=!!opts.isSingleGlobal;this._isWorldType=!!opts.isWorld;this._isRotatable=!!opts.isRotatable;this._mustPredraw=!!opts.mustPredraw;this._hasEffects=!!opts.hasEffects;this._supportsSceneGraph=
!!opts.supportsSceneGraph;this._supportsMesh=!!opts.supportsMesh;this._singleGlobalObjectClass=null;this._boundACEMethodCache=new Map;this._boundACEMethodCache_1param=new Map;this._boundACEMethodCache_2params=new Map;this._boundACEMethodCache_3params=new Map}Release(){this._runtime=null}GetRuntime(){return this._runtime}OnCreate(){}IsSingleGlobal(){return this._isSingleGlobal}IsWorldType(){return this._isWorldType}IsRotatable(){return this._isRotatable}MustPreDraw(){return this._mustPredraw}HasEffects(){return this._hasEffects}SupportsSceneGraph(){return this._supportsSceneGraph}SupportsMesh(){return this._supportsMesh}_GetBoundACEMethod(func,
bindThis){if(!bindThis)throw new Error("missing 'this' binding");let ret=this._boundACEMethodCache.get(func);if(ret)return ret;ret=func.bind(bindThis);this._boundACEMethodCache.set(func,ret);return ret}_GetBoundACEMethod_1param(func,bindThis,param0){if(!bindThis)throw new Error("missing 'this' binding");const param0map=GetNextParamMap(this._boundACEMethodCache_1param,func);let ret=param0map.get(param0);if(ret)return ret;ret=func.bind(bindThis,param0);param0map.set(param0,ret);return ret}_GetBoundACEMethod_2params(func,
bindThis,param0,param1){if(!bindThis)throw new Error("missing 'this' binding");const param0map=GetNextParamMap(this._boundACEMethodCache_2params,func);const param1map=GetNextParamMap(param0map,param0);let ret=param1map.get(param1);if(ret)return ret;ret=func.bind(bindThis,param0,param1);param1map.set(param1,ret);return ret}_GetBoundACEMethod_3params(func,bindThis,param0,param1,param2){if(!bindThis)throw new Error("missing 'this' binding");const param0map=GetNextParamMap(this._boundACEMethodCache_3params,
func);const param1map=GetNextParamMap(param0map,param0);const param2map=GetNextParamMap(param1map,param1);let ret=param2map.get(param2);if(ret)return ret;ret=func.bind(bindThis,param0,param1,param2);param2map.set(param2,ret);return ret}_SetSingleGlobalObjectClass(objectClass){if(!this.IsSingleGlobal())throw new Error("must be single-global plugin");this._singleGlobalObjectClass=objectClass}GetSingleGlobalObjectClass(){if(!this.IsSingleGlobal())throw new Error("must be single-global plugin");return this._singleGlobalObjectClass}GetSingleGlobalInstance(){if(!this.IsSingleGlobal())throw new Error("must be single-global plugin");
return this._singleGlobalObjectClass.GetSingleGlobalInstance()}}};


// c3/sdk/sdkDOMPluginBase.js
'use strict';{const C3=self.C3;C3.SDKDOMPluginBase=class SDKDOMPluginBase extends C3.SDKPluginBase{constructor(opts,DOM_COMPONENT_ID){super(opts);this._domComponentId=DOM_COMPONENT_ID;this._nextElementId=0;this._instMap=new Map;this.AddElementMessageHandler("elem-focused",sdkInst=>sdkInst._OnElemFocused());this.AddElementMessageHandler("elem-blurred",sdkInst=>{if(sdkInst)sdkInst._OnElemBlurred()})}Release(){super.Release()}_AddElement(sdkInst){const elementId=this._nextElementId++;this._instMap.set(elementId,
sdkInst);return elementId}_RemoveElement(elementId){this._instMap.delete(elementId)}AddElementMessageHandler(handler,func){this._runtime.AddDOMComponentMessageHandler(this._domComponentId,handler,e=>{const sdkInst=this._instMap.get(e["elementId"]);func(sdkInst,e)})}}};


// c3/sdk/sdkTypeBase.js
'use strict';{const C3=self.C3;C3.SDKTypeBase=class SDKTypeBase extends C3.DefendedBase{constructor(objectClass){super();this._objectClass=objectClass;this._runtime=objectClass.GetRuntime();this._plugin=objectClass.GetPlugin()}Release(){this._objectClass=null;this._runtime=null;this._plugin=null}GetObjectClass(){return this._objectClass}GetRuntime(){return this._runtime}GetPlugin(){return this._plugin}GetImageInfo(){return this._objectClass.GetImageInfo()}FinishCondition(f){}LoadTextures(renderer){}ReleaseTextures(){}OnDynamicTextureLoadComplete(){}PreloadTexturesWithInstances(renderer){}LoadTilemapData(){}GetScriptInterfaceClass(){return null}}};


// c3/sdk/sdkInstanceBase.js
'use strict';{const C3=self.C3;C3.SDKInstanceBase=class SDKInstanceBase extends C3.DefendedBase{constructor(inst,domComponentId){super();this._inst=inst;this._domComponentId=domComponentId;this._runtime=inst.GetRuntime();this._objectClass=this._inst.GetObjectClass();this._sdkType=this._objectClass.GetSdkType();this._tickFunc=null;this._tick2Func=null;this._isTicking=false;this._isTicking2=false;this._disposables=null;this._wasReleased=false}Release(){this._wasReleased=true;this._StopTicking();this._StopTicking2();
this._tickFunc=null;this._tick2Func=null;if(this._disposables){this._disposables.Release();this._disposables=null}this._inst=null;this._runtime=null;this._objectClass=null;this._sdkType=null}WasReleased(){return this._wasReleased}GetInstance(){return this._inst}GetRuntime(){return this._runtime}GetObjectClass(){return this._objectClass}GetPlugin(){return this._sdkType.GetPlugin()}GetSdkType(){return this._sdkType}GetScriptInterface(){return this._inst.GetInterfaceClass()}Trigger(method){return this._runtime.Trigger(method,
this._inst,null)}DebugTrigger(method){return this._runtime.DebugTrigger(method,this._inst,null)}TriggerAsync(method){return this._runtime.TriggerAsync(method,this._inst,null)}FastTrigger(method,value){return this._runtime.FastTrigger(method,this._inst,value)}DebugFastTrigger(method,value){return this._runtime.DebugFastTrigger(method,this._inst,value)}ScheduleTriggers(f){return this._runtime.ScheduleTriggers(f)}AddDOMMessageHandler(handler,func){this._runtime.AddDOMComponentMessageHandler(this._domComponentId,
handler,func)}AddDOMMessageHandlers(list){for(const [handler,func]of list)this.AddDOMMessageHandler(handler,func)}PostToDOM(handler,data){this._runtime.PostComponentMessageToDOM(this._domComponentId,handler,data)}PostToDOMAsync(handler,data){return this._runtime.PostComponentMessageToDOMAsync(this._domComponentId,handler,data)}_PostToDOMMaybeSync(handler,data){if(this._runtime.IsInWorker())this.PostToDOM(handler,data);else return window["c3_runtimeInterface"]["_OnMessageFromRuntime"]({"type":"event",
"component":this._domComponentId,"handler":handler,"data":data,"responseId":null})}GetCurrentImageInfo(){return null}GetCurrentSurfaceSize(){const imageInfo=this.GetCurrentImageInfo();if(imageInfo){const texture=imageInfo.GetTexture();if(texture)return[texture.GetWidth(),texture.GetHeight()]}return[100,100]}GetCurrentTexRect(){const imageInfo=this.GetCurrentImageInfo();return imageInfo?imageInfo.GetTexRect():null}GetImagePoint(nameOrIndex){const wi=this._inst.GetWorldInfo();return[wi.GetX(),wi.GetY()]}Tick(){}Tick2(){}_StartTicking(){if(this._isTicking)return;
if(!this._tickFunc)this._tickFunc=()=>this.Tick();this._runtime.Dispatcher().addEventListener("tick",this._tickFunc);this._isTicking=true}_StopTicking(){if(!this._isTicking)return;this._runtime.Dispatcher().removeEventListener("tick",this._tickFunc);this._isTicking=false}IsTicking(){return this._isTicking}_StartTicking2(){if(this._isTicking2)return;if(!this._tick2Func)this._tick2Func=()=>this.Tick2();this._runtime.Dispatcher().addEventListener("tick2",this._tick2Func);this._isTicking2=true}_StopTicking2(){if(!this._isTicking2)return;
this._runtime.Dispatcher().removeEventListener("tick2",this._tick2Func);this._isTicking2=false}IsTicking2(){return this._isTicking2}GetDebuggerProperties(){return[]}SaveToJson(){return null}LoadFromJson(o){}LoadTilemapData(data,mapWidth,mapHeight){}TestPointOverlapTile(x,y){}GetPropertyValueByIndex(index){}SetPropertyValueByIndex(index,value){}OffsetPropertyValueByIndex(index,offset){if(offset===0)return;const value=this.GetPropertyValueByIndex(index);if(typeof value!=="number")throw new Error("expected number");
this.SetPropertyValueByIndex(index,value+offset)}SetPropertyColorOffsetValueByIndex(offset,r,g,b){}CallAction(actMethod,...args){actMethod.call(this,...args)}CallExpression(expMethod,...args){return expMethod.call(this,...args)}GetScriptInterfaceClass(){return null}}};


// c3/sdk/sdkWorldInstanceBase.js
'use strict';{const C3=self.C3;C3.SDKWorldInstanceBase=class SDKWorldInstanceBase extends C3.SDKInstanceBase{constructor(inst,domComponentId){super(inst,domComponentId);this._worldInfo=inst.GetWorldInfo();this._webglcontextlost_handler=null;this._webglcontextrestored_handler=null}Release(){if(this._webglcontextlost_handler){const dispatcher=this._runtime.Dispatcher();dispatcher.removeEventListener("webglcontextlost",this._webglcontextlost_handler);dispatcher.removeEventListener("webglcontextrestored",
this._webglcontextrestored_handler);this._webglcontextlost_handler=null;this._webglcontextrestored_handler=null}this._worldInfo=null;super.Release()}HandleWebGLContextLoss(){if(this._webglcontextlost_handler)return;this._webglcontextlost_handler=()=>this.OnWebGLContextLost();this._webglcontextrestored_handler=()=>this.OnWebGLContextRestored();const dispatcher=this._runtime.Dispatcher();dispatcher.addEventListener("webglcontextlost",this._webglcontextlost_handler);dispatcher.addEventListener("webglcontextrestored",
this._webglcontextrestored_handler)}OnWebGLContextLost(){}OnWebGLContextRestored(){}GetWorldInfo(){return this._worldInfo}}};


// c3/sdk/sdkDOMInstanceBase.js
'use strict';{const C3=self.C3;const tempRect=C3.New(C3.Rect);C3.SDKDOMInstanceBase=class SDKDOMInstanceBase extends C3.SDKWorldInstanceBase{constructor(inst,domComponentId){super(inst,domComponentId);this._elementId=this.GetPlugin()._AddElement(this);this._isElementShowing=true;this._elemHasFocus=false;this._autoFontSize=false;this._lastRect=C3.New(C3.Rect,0,0,-1,-1);const canvasManager=this._runtime.GetCanvasManager();this._lastWindowWidth=canvasManager.GetLastWidth();this._lastWindowHeight=canvasManager.GetLastHeight();
this._isPendingUpdateState=false;this._StartTicking()}Release(){this.GetPlugin()._RemoveElement(this._elementId);this.PostToDOMElement("destroy");this._elementId=-1;super.Release()}_GetElementInDOMMode(){if(this._runtime.IsInWorker())throw new Error("not valid in worker mode");return this._PostToDOMElementMaybeSync("get-element")}PostToDOMElement(handler,data){if(!data)data={};data["elementId"]=this._elementId;this.PostToDOM(handler,data)}_PostToDOMElementMaybeSync(handler,data){if(!data)data={};
data["elementId"]=this._elementId;return this._PostToDOMMaybeSync(handler,data)}PostToDOMElementAsync(handler,data){if(!data)data={};data["elementId"]=this._elementId;return this.PostToDOMAsync(handler,data)}CreateElement(data){if(!data)data={};const isVisible=this.GetWorldInfo().IsVisible();data["elementId"]=this._elementId;data["isVisible"]=isVisible;Object.assign(data,this.GetElementState());this._isElementShowing=!!data["isVisible"];this._PostToDOMMaybeSync("create",data);this._UpdatePosition(true)}SetElementVisible(v){v=
!!v;if(this._isElementShowing===v)return;this._isElementShowing=v;this.PostToDOMElement("set-visible",{"isVisible":v})}Tick(){this._UpdatePosition(false)}_ShouldPreserveElement(){const fullscreenMode=this._runtime.GetCanvasManager().GetFullscreenMode();return C3.Platform.OS==="Android"&&(fullscreenMode==="scale-inner"||fullscreenMode==="scale-outer"||fullscreenMode==="crop")}_UpdatePosition(first){const wi=this.GetWorldInfo();const layer=wi.GetLayer();const x=wi.GetX();const y=wi.GetY();let [cleft,
ctop]=layer.LayerToCanvasCss(x,y);let [cright,cbottom]=layer.LayerToCanvasCss(x+wi.GetWidth(),y+wi.GetHeight());const canvasManager=this._runtime.GetCanvasManager();const rightEdge=canvasManager.GetCssWidth();const bottomEdge=canvasManager.GetCssHeight();if(!wi.IsVisible()||!layer.IsVisible()){this.SetElementVisible(false);return}if(!this._ShouldPreserveElement()){if(cright<=0||cbottom<=0||cleft>=rightEdge||ctop>=bottomEdge){this.SetElementVisible(false);return}if(cleft<1)cleft=1;if(ctop<1)ctop=1;
if(cright>=rightEdge)cright=rightEdge-1;if(cbottom>=bottomEdge)cbottom=bottomEdge-1}tempRect.set(cleft,ctop,cright,cbottom);const curWinWidth=canvasManager.GetLastWidth();const curWinHeight=canvasManager.GetLastHeight();if(!first&&tempRect.equals(this._lastRect)&&this._lastWindowWidth===curWinWidth&&this._lastWindowHeight===curWinHeight){this.SetElementVisible(true);return}this._lastRect.copy(tempRect);this._lastWindowWidth=curWinWidth;this._lastWindowHeight=curWinHeight;this.SetElementVisible(true);
let fontSize=null;if(this._autoFontSize)fontSize=layer.GetDisplayScale()-.2;this.PostToDOMElement("update-position",{"left":Math.round(this._lastRect.getLeft())+canvasManager.GetCanvasClientX(),"top":Math.round(this._lastRect.getTop())+canvasManager.GetCanvasClientY(),"width":Math.round(this._lastRect.width()),"height":Math.round(this._lastRect.height()),"fontSize":fontSize})}FocusElement(){this._PostToDOMElementMaybeSync("focus",{"focus":true})}BlurElement(){this._PostToDOMElementMaybeSync("focus",
{"focus":false})}_OnElemFocused(){this._elemHasFocus=true}_OnElemBlurred(){this._elemHasFocus=false}IsElementFocused(){return this._elemHasFocus}SetElementCSSStyle(prop,val){this.PostToDOMElement("set-css-style",{"prop":C3.CSSToCamelCase(prop),"val":val})}SetElementAttribute(attribName,value){this.PostToDOMElement("set-attribute",{"name":attribName,"val":value})}RemoveElementAttribute(attribName){this.PostToDOMElement("remove-attribute",{"name":attribName})}UpdateElementState(){if(this._isPendingUpdateState)return;
this._isPendingUpdateState=true;Promise.resolve().then(()=>{this._isPendingUpdateState=false;this.PostToDOMElement("update-state",this.GetElementState())})}GetElementState(){}GetElementId(){return this._elementId}}};


// c3/sdk/sdkBehaviorBase.js
'use strict';{const C3=self.C3;const IBehavior=self.IBehavior;C3.SDKBehaviorBase=class SDKBehaviorBase extends C3.DefendedBase{constructor(opts){super();this._runtime=opts.runtime;this._myObjectClasses=C3.New(C3.ArraySet);this._myInstances=C3.New(C3.ArraySet);this._iBehavior=null;const CustomScriptClass=opts.scriptInterfaceClass;if(CustomScriptClass){this._iBehavior=new CustomScriptClass(this);if(!(this._iBehavior instanceof IBehavior))throw new TypeError("script interface class must derive from IBehavior");
}else this._iBehavior=new IBehavior(this)}Release(){this._myInstances.Release();this._myObjectClasses.Release();this._runtime=null}GetRuntime(){return this._runtime}OnCreate(){}_AddObjectClass(objectClass){this._myObjectClasses.Add(objectClass)}GetObjectClasses(){return this._myObjectClasses.GetArray()}_AddInstance(inst){this._myInstances.Add(inst)}_RemoveInstance(inst){this._myInstances.Delete(inst)}GetInstances(){return this._myInstances.GetArray()}GetIBehavior(){return this._iBehavior}}};


// c3/sdk/sdkBehaviorTypeBase.js
'use strict';{const C3=self.C3;C3.SDKBehaviorTypeBase=class SDKBehaviorTypeBase extends C3.DefendedBase{constructor(behaviorType){super();this._runtime=behaviorType.GetRuntime();this._behaviorType=behaviorType;this._objectClass=behaviorType.GetObjectClass();this._behavior=behaviorType.GetBehavior();this._behavior._AddObjectClass(this._objectClass)}Release(){this._runtime=null;this._behaviorType=null;this._objectClass=null;this._behavior=null}GetBehaviorType(){return this._behaviorType}GetObjectClass(){return this._objectClass}GetRuntime(){return this._runtime}GetBehavior(){return this._behavior}}};


// c3/sdk/sdkBehaviorInstanceBase.js
'use strict';{const C3=self.C3;C3.SDKBehaviorInstanceBase=class SDKBehaviorInstanceBase extends C3.DefendedBase{constructor(behInst,domComponentId){super();this._behInst=behInst;this._domComponentId=domComponentId;this._inst=behInst.GetObjectInstance();this._runtime=behInst.GetRuntime();this._behaviorType=behInst.GetBehaviorType();this._sdkType=this._behaviorType.GetSdkType();this._isTicking=false;this._isTicking2=false;this._isPostTicking=false;this._disposables=null}Release(){this._StopTicking();
this._StopTicking2();this._StopPostTicking();if(this._disposables){this._disposables.Release();this._disposables=null}this._behInst=null;this._inst=null;this._runtime=null;this._behaviorType=null;this._sdkType=null}GetBehavior(){return this._behaviorType.GetBehavior()}GetBehaviorInstance(){return this._behInst}GetObjectInstance(){return this._inst}GetObjectClass(){return this._inst.GetObjectClass()}GetWorldInfo(){return this._inst.GetWorldInfo()}GetRuntime(){return this._runtime}GetBehaviorType(){return this._behaviorType}GetSdkType(){return this._sdkType}GetScriptInterface(){return this._behInst.GetScriptInterface()}Trigger(method){return this._runtime.Trigger(method,
this._inst,this._behaviorType)}DebugTrigger(method){return this._runtime.DebugTrigger(method,this._inst,this._behaviorType)}TriggerAsync(method){return this._runtime.TriggerAsync(method,this._inst,this._behaviorType)}PostCreate(){}Tick(){}Tick2(){}PostTick(){}_StartTicking(){if(this._isTicking)return;this._runtime._AddBehInstToTick(this);this._isTicking=true}_StopTicking(){if(!this._isTicking)return;this._runtime._RemoveBehInstToTick(this);this._isTicking=false}IsTicking(){return this._isTicking}_StartTicking2(){if(this._isTicking2)return;
this._runtime._AddBehInstToTick2(this);this._isTicking2=true}_StopTicking2(){if(!this._isTicking2)return;this._runtime._RemoveBehInstToTick2(this);this._isTicking2=false}IsTicking2(){return this._isTicking2}_StartPostTicking(){if(this._isPostTicking)return;this._runtime._AddBehInstToPostTick(this);this._isPostTicking=true}_StopPostTicking(){if(!this._isPostTicking)return;this._runtime._RemoveBehInstToPostTick(this);this._isPostTicking=false}IsPostTicking(){return this._isPostTicking}GetDebuggerProperties(){return[]}AddDOMMessageHandler(handler,
func){this._runtime.AddDOMComponentMessageHandler(this._domComponentId,handler,func)}OnSpriteFrameChanged(prevFrame,nextFrame){}SaveToJson(){return null}LoadFromJson(o){}GetPropertyValueByIndex(index){}SetPropertyValueByIndex(index,value){}OffsetPropertyValueByIndex(index,offset){if(offset===0)return;const value=this.GetPropertyValueByIndex(index);if(typeof value!=="number")throw new Error("expected number");this.SetPropertyValueByIndex(index,value+offset)}SetPropertyColorOffsetValueByIndex(index,
offsetR,offsetG,offsetB){}CallAction(actMethod,...args){actMethod.call(this,...args)}CallExpression(expMethod,...args){return expMethod.call(this,...args)}GetScriptInterfaceClass(){return null}}};


// c3/objects/pluginManager.js
'use strict';{const C3=self.C3;C3.Plugins={};C3.Behaviors={};C3.PluginManager=class PluginManager extends C3.DefendedBase{constructor(runtime){super();this._runtime=runtime;this._allPlugins=[];this._pluginsByCtor=new Map;this._systemPlugin=null;this._allBehaviors=[];this._behaviorsByCtor=new Map;this._solidBehavior=null;this._jumpthruBehavior=null}CreatePlugin(pluginData){const Ctor=this._runtime.GetObjectReference(pluginData[0]);if(!Ctor)throw new Error("missing plugin");C3.AddCommonACEs(pluginData,
Ctor);const plugin=C3.New(Ctor,{runtime:this._runtime,isSingleGlobal:pluginData[1],isWorld:pluginData[2],isRotatable:pluginData[5],hasEffects:pluginData[8],mustPredraw:pluginData[9],supportsSceneGraph:pluginData[13],supportsMesh:pluginData[14]});plugin.OnCreate();this._allPlugins.push(plugin);this._pluginsByCtor.set(Ctor,plugin)}CreateSystemPlugin(){this._systemPlugin=C3.New(C3.Plugins.System,{runtime:this._runtime,isSingleGlobal:true});this._systemPlugin.OnCreate()}CreateBehavior(behaviorData){const Ctor=
this._runtime.GetObjectReference(behaviorData[1]);if(!Ctor)throw new Error("missing behavior");const behavior=C3.New(Ctor,{runtime:this._runtime});behavior.OnCreate();this._allBehaviors.push(behavior);this._behaviorsByCtor.set(Ctor,behavior);if(!this._solidBehavior&&C3.Behaviors.solid&&behavior instanceof C3.Behaviors.solid)this._solidBehavior=behavior;else if(!this._jumpthruBehavior&&C3.Behaviors.jumpthru&&behavior instanceof C3.Behaviors.jumpthru)this._jumpthruBehavior=behavior}GetPluginByConstructorFunction(ctor){return this._pluginsByCtor.get(ctor)||
null}HasBehaviorByConstructorFunction(ctor){return this._behaviorsByCtor.has(ctor)}GetBehaviorByConstructorFunction(ctor){return this._behaviorsByCtor.get(ctor)||null}GetSystemPlugin(){return this._systemPlugin}GetSolidBehavior(){return this._solidBehavior}GetJumpthruBehavior(){return this._jumpthruBehavior}}};


// c3/objects/imageInfo.js
'use strict';{const C3=self.C3;const allImageInfos=new Set;C3.ImageInfo=class ImageInfo extends C3.DefendedBase{constructor(){super();this._url="";this._size=0;this._pixelFormat=0;this._offsetX=0;this._offsetY=0;this._width=0;this._height=0;this._hasMetaData=false;this._imageAsset=null;this._textureState="";this._rcTex=C3.New(C3.Rect);allImageInfos.add(this)}Release(){this.ReleaseTexture();this._imageAsset=null;allImageInfos.delete(this)}static OnWebGLContextLost(){for(const imageInfo of allImageInfos){imageInfo._textureState=
"";imageInfo._rcTex.set(0,0,0,0)}}LoadData(imageData){this._url=imageData[0];this._size=imageData[1];this._pixelFormat=imageData[2];this._offsetX=imageData[3];this._offsetY=imageData[4];this._width=imageData[5];this._height=imageData[6];this._hasMetaData=true}LoadAnimationFrameData(frameData){this._url=frameData[0];this._size=frameData[1];this._offsetX=frameData[2];this._offsetY=frameData[3];this._width=frameData[4];this._height=frameData[5];this._pixelFormat=frameData[11];this._hasMetaData=true}LoadDynamicAsset(runtime,
url){if(this._imageAsset)throw new Error("already loaded asset");this._url=url;const opts={};if(C3.IsAbsoluteURL(url))opts.loadPolicy="remote";this.LoadAsset(runtime,opts);return this._imageAsset.Load()}ReplaceWith(otherImageInfo){if(otherImageInfo===this)throw new Error("cannot replace with self");this.ReleaseTexture();this._url=otherImageInfo._url;this._size=otherImageInfo._size;this._pixelFormat=otherImageInfo._pixelFormat;this._offsetX=otherImageInfo._offsetX;this._offsetY=otherImageInfo._offsetY;
this._width=otherImageInfo._width;this._height=otherImageInfo._height;this._hasMetaData=otherImageInfo._hasMetaData;this._imageAsset=otherImageInfo._imageAsset;this._textureState=otherImageInfo._textureState;this._rcTex=otherImageInfo._rcTex}GetURL(){return this._url}GetSize(){return this._size}GetPixelFormat(){return this._pixelFormat}GetOffsetX(){return this._offsetX}GetOffsetY(){return this._offsetY}GetWidth(){return this._width}GetHeight(){return this._height}GetSheetWidth(){return this._imageAsset.GetWidth()}GetSheetHeight(){return this._imageAsset.GetHeight()}LoadAsset(runtime,
opts){if(this._imageAsset)throw new Error("already got asset");opts=Object.assign({},opts,{url:this.GetURL(),size:this.GetSize()});this._imageAsset=runtime.LoadImage(opts)}IsLoaded(){return this._imageAsset&&this._imageAsset.IsLoaded()}async LoadStaticTexture(renderer,opts){if(!this._imageAsset)throw new Error("no asset");if(this._textureState)throw new Error("already loaded texture");this._textureState="loading";const texture=await this._imageAsset.LoadStaticTexture(renderer,opts);if(!texture){this._textureState=
"";return null}this._textureState="loaded";if(!this._hasMetaData){this._width=texture.GetWidth();this._height=texture.GetHeight();this._hasMetaData=true}this._rcTex.set(this._offsetX,this._offsetY,this._offsetX+this._width,this._offsetY+this._height);this._rcTex.divide(texture.GetWidth(),texture.GetHeight());return texture}ReleaseTexture(){if(!this._textureState)return;if(this._imageAsset)this._imageAsset.ReleaseTexture();this._textureState="";this._rcTex.set(0,0,0,0)}GetTexture(){return this._imageAsset?
this._imageAsset.GetTexture():null}GetTexRect(){return this._rcTex}async ExtractImageToCanvas(){const srcDrawable=await this._imageAsset.LoadToDrawable();const canvas=C3.CreateCanvas(this._width,this._height);const ctx=canvas.getContext("2d");ctx.drawImage(srcDrawable,this._offsetX,this._offsetY,this._width,this._height,0,0,this._width,this._height);return canvas}}};


// c3/objects/animationInfo.js
'use strict';{const C3=self.C3;C3.AnimationInfo=class AnimationInfo extends C3.DefendedBase{constructor(animData){super();this._name=animData[0];this._speed=animData[1];this._isLooping=!!animData[2];this._repeatCount=animData[3];this._repeatTo=animData[4];this._isPingPong=!!animData[5];this._sid=animData[6];this._frames=animData[7].map(frameData=>C3.New(C3.AnimationFrameInfo,frameData))}Release(){for(const f of this._frames)f.Release();C3.clearArray(this._frames)}LoadAllAssets(runtime){for(const f of this._frames)f.GetImageInfo().LoadAsset(runtime)}LoadAllTextures(renderer,
opts){return Promise.all(this._frames.map(f=>f.GetImageInfo().LoadStaticTexture(renderer,opts)))}ReleaseAllTextures(){for(const f of this._frames)f.GetImageInfo().ReleaseTexture()}GetName(){return this._name}GetSID(){return this._sid}GetFrameCount(){return this._frames.length}GetFrames(){return this._frames}GetFrameAt(i){i=Math.floor(i);if(i<0||i>=this._frames.length)throw new RangeError("invalid frame");return this._frames[i]}GetSpeed(){return this._speed}IsLooping(){return this._isLooping}GetRepeatCount(){return this._repeatCount}GetRepeatTo(){return this._repeatTo}IsPingPong(){return this._isPingPong}}};


// c3/objects/animationFrameInfo.js
'use strict';{const C3=self.C3;C3.AnimationFrameInfo=class AnimationFrameInfo extends C3.DefendedBase{constructor(frameData){super();this._imageInfo=C3.New(C3.ImageInfo);this._imageInfo.LoadAnimationFrameData(frameData);this._duration=frameData[6];this._origin=C3.New(C3.Vector2,frameData[7],frameData[8]);this._imagePoints=frameData[9].map(data=>C3.New(C3.ImagePoint,this,data));this._imagePointsByName=new Map;for(const ip of this._imagePoints)this._imagePointsByName.set(ip.GetName().toLowerCase(),
ip);this._collisionPoly=null;const polyPoints=frameData[10];if(polyPoints.length>=6)this._collisionPoly=C3.New(C3.CollisionPoly,polyPoints)}Release(){if(this._collisionPoly){this._collisionPoly.Release();this._collisionPoly=null}this._imageInfo.Release();this._imageInfo=null}GetImageInfo(){return this._imageInfo}GetDuration(){return this._duration}GetOriginX(){return this._origin.getX()}GetOriginY(){return this._origin.getY()}GetCollisionPoly(){return this._collisionPoly}GetImagePointByName(name){return this._imagePointsByName.get(name.toLowerCase())||
null}GetImagePointByIndex(index){index=Math.floor(index);if(index<0||index>=this._imagePoints.length)return null;return this._imagePoints[index]}GetImagePointCount(){return this._imagePoints.length}}};


// c3/objects/imagePoint.js
'use strict';{const C3=self.C3;C3.ImagePoint=class ImagePoint extends C3.DefendedBase{constructor(afi,data){super();this._afi=afi;this._name=data[0];this._pos=C3.New(C3.Vector2,data[1],data[2])}Release(){}GetName(){return this._name}GetX(){return this._pos.getX()}GetY(){return this._pos.getY()}GetVec2(){return this._pos}}};


// c3/objects/objectClass.js
'use strict';{const C3=self.C3;const C3Debugger=self.C3Debugger;const IObjectClass=self.IObjectClass;const assert=self.assert;C3.ObjectClass=class ObjectClass extends C3.DefendedBase{constructor(runtime,index,data){super();const PluginCtor=runtime.GetObjectReference(data[1]);this._runtime=runtime;this._plugin=runtime.GetPluginManager().GetPluginByConstructorFunction(PluginCtor);this._sdkType=null;this._instSdkCtor=PluginCtor.Instance;this._index=index;this._sid=data[11];this._name=data[0];this._jsPropName=
this._runtime.GetJsPropName(data[14]);this._isGlobal=!!data[9];this._isFamily=!!data[2];this._isOnLoaderLayout=!!data[10];this._instVars=data[3].map(arr=>({sid:arr[0],type:arr[1],name:arr[2],jsPropName:runtime.GetJsPropName(arr[3])}));this._behaviorsCount=data[4];this._effectsCount=data[5];this._isWorldType=this._plugin.IsWorldType();this._effectList=null;this._collisionGrid=C3.New(C3.SparseGrid,runtime.GetOriginalViewportWidth(),runtime.GetOriginalViewportHeight());this._anyCollisionCellChanged=
true;this._anyInstanceParallaxed=false;this._familyMembers=null;this._familyMembersSet=null;this._familyIndex=-1;this._families=null;this._familiesSet=null;this._familyInstVarMap=null;this._familyBehaviorMap=null;this._familyEffectMap=null;this._isInContainer=false;this._container=null;this._behaviorTypes=data[8].map(behaviorTypeData=>C3.BehaviorType.Create(this,behaviorTypeData));this._behaviorTypesIncludingInherited=[];this._behaviorsByName=new Map;this._behaviorNameToIndex=new Map;this._usedBehaviorCtors=
new Set;this._solStack=C3.New(C3.SolStack,this);this._defaultInstanceData=null;this._defaultLayerIndex=0;this._isContained=false;this._container=null;this._imageInfo=null;this._animations=null;this._animationsByName=null;this._animationsBySid=null;this._textureRefCount=0;this._savedData=new Map;this._unsavedData=new Map;this._instances=[];this._iidsStale=true;if(this._plugin.HasEffects())this._effectList=C3.New(C3.EffectList,this,data[12]);if(data[6]){this._imageInfo=C3.New(C3.ImageInfo);this._imageInfo.LoadData(data[6])}if(data[7]){this._animations=
data[7].map(animData=>C3.New(C3.AnimationInfo,animData));this._animationsByName=new Map;this._animationsBySid=new Map;for(const anim of this._animations){this._animationsByName.set(anim.GetName().toLowerCase(),anim);this._animationsBySid.set(anim.GetSID(),anim)}}if(this._isFamily){this._familyMembers=[];this._familyMembersSet=new Set;this._familyIndex=this._runtime._GetNextFamilyIndex()}else{this._families=[];this._familiesSet=new Set;this._familyInstVarMap=[];this._familyBehaviorMap=[];this._familyEffectMap=
[]}this._sdkType=C3.New(PluginCtor.Type,this,data[15]);this._iObjectClass=null;this._instanceUserScriptClass=null;this._userScriptDispatcher=C3.New(C3.Event.Dispatcher);const CustomScriptClass=this._sdkType.GetScriptInterfaceClass();if(CustomScriptClass){this._iObjectClass=new CustomScriptClass(this);if(!(this._iObjectClass instanceof IObjectClass))throw new TypeError("script interface class must derive from IObjectClass");}else this._iObjectClass=new IObjectClass(this);if(data[13]){const tilemapData=
data[13];if(tilemapData){const tilePolyData=tilemapData[0];const maxTileIndex=tilemapData[1];this._sdkType.LoadTilemapData(tilePolyData,maxTileIndex)}}if(!this._runtime.UsesLoaderLayout()||this._isFamily||this._isOnLoaderLayout||!this._isWorldType)this.OnCreate();if(this._plugin.IsSingleGlobal()){this._plugin._SetSingleGlobalObjectClass(this);this._CreateSingleGlobalInstance(data)}}static Create(runtime,index,objectClassData){return C3.New(C3.ObjectClass,runtime,index,objectClassData)}Release(){if(this._imageInfo){this._imageInfo.Release();
this._imageInfo=null}if(this._animations){for(const a of this._animations)a.Release();C3.clearArray(this._animations);this._animationsByName.clear();this._animationsBySid.clear()}this._solStack.Release();this._solStack=null;this._savedData.clear();this._unsavedData.clear();this._container=null;this._runtime=null}_LoadFamily(familyData){for(let i=1,len=familyData.length;i<len;++i){const memberType=this._runtime.GetObjectClassByIndex(familyData[i]);this._familyMembers.push(memberType);this._familyMembersSet.add(memberType);
memberType._families.push(this);memberType._familiesSet.add(this)}}_SetContainer(container){this._isInContainer=true;this._container=container}IsInContainer(){return this._isInContainer}GetContainer(){return this._container}_OnAfterCreate(){let index=0;if(!this._isFamily)for(const family of this._families)for(const familyBehType of family.GetBehaviorTypes()){const lowerName=familyBehType.GetName().toLowerCase();this._behaviorsByName.set(lowerName,familyBehType);this._behaviorNameToIndex.set(lowerName,
index);this._behaviorTypesIncludingInherited.push(familyBehType);++index}for(const behaviorType of this.GetBehaviorTypes()){const lowerName=behaviorType.GetName().toLowerCase();this._behaviorsByName.set(lowerName,behaviorType);this._behaviorNameToIndex.set(lowerName,index);this._behaviorTypesIncludingInherited.push(behaviorType);++index}for(const behaviorType of this._behaviorTypesIncludingInherited)this._usedBehaviorCtors.add(behaviorType.GetBehavior().constructor);if(!this._isFamily&&this._families.length){const familyCount=
this._runtime.GetFamilyCount();C3.extendArray(this._familyInstVarMap,familyCount,0);C3.extendArray(this._familyBehaviorMap,familyCount,0);C3.extendArray(this._familyEffectMap,familyCount,0);const allFx=[];let ivSum=0;let behSum=0;let fxSum=0;for(const family of this._families){const familyIndex=family.GetFamilyIndex();this._familyInstVarMap[familyIndex]=ivSum;ivSum+=family.GetInstanceVariablesCount();this._familyBehaviorMap[familyIndex]=behSum;behSum+=family.GetBehaviorTypesCount();this._familyEffectMap[familyIndex]=
fxSum;fxSum+=family.GetEffectTypesCount();const familyEffectList=family.GetEffectList();if(familyEffectList&&this._effectList)for(const effectType of familyEffectList.GetAllEffectTypes())allFx.push(effectType.Clone(this._effectList))}if(this._effectList)this._effectList.PrependEffectTypes(allFx)}}_CreateSingleGlobalInstance(data){const uid=this._runtime._GetNewUID();const inst=C3.New(C3.Instance,{runtime:this._runtime,objectType:this,uid:uid});inst._CreateSdkInstance(data[16],[]);this._runtime._MapInstanceByUID(uid,
inst);this._instances.push(inst)}GetSdkType(){return this._sdkType}IsOnLoaderLayout(){return this._isOnLoaderLayout}OnCreate(){if(!this._isFamily)this._sdkType.OnCreate()}HasLoadedTextures(){return this._textureRefCount>0}LoadTextures(renderer){if(this._isFamily)return Promise.resolve();this._textureRefCount++;if(this._textureRefCount===1)return this._sdkType.LoadTextures(renderer)||Promise.resolve();else return Promise.resolve()}ReleaseTextures(){if(this._isFamily)return;this._textureRefCount--;
if(this._textureRefCount<0)throw new Error("released textures too many times");if(this._textureRefCount===0)this._sdkType.ReleaseTextures()}OnDynamicTextureLoadComplete(){if(this._isFamily)throw new Error("not applicable to family");this._sdkType.OnDynamicTextureLoadComplete()}PreloadTexturesWithInstances(renderer){if(this._isFamily)return Promise.resolve();return this._sdkType.PreloadTexturesWithInstances(renderer)}GetRuntime(){return this._runtime}GetPlugin(){return this._plugin}GetInstanceSdkCtor(){return this._instSdkCtor}GetName(){return this._name}GetJsPropName(){return this._jsPropName}GetIndex(){return this._index}GetSID(){return this._sid}IsFamily(){return this._isFamily}IsGlobal(){return this._isGlobal}IsWorldType(){return this._isWorldType}GetFamilyIndex(){return this._familyIndex}GetBehaviorTypes(){return this._behaviorTypes}GetBehaviorTypesCount(){return this._behaviorsCount}UsesBehaviorByCtor(Ctor){return Ctor&&
this._usedBehaviorCtors.has(Ctor)}GetInstanceVariablesCount(){return this._instVars.length}GetInstanceVariableSIDs(){return this._instVars.map(iv=>iv.sid)}GetInstanceVariableIndexBySID(sid){return this._instVars.findIndex(iv=>iv.sid===sid)}GetInstanceVariableIndexByName(name){return this._instVars.findIndex(iv=>iv.name===name)}_GetAllInstanceVariableNames(){return this._instVars.map(iv=>iv.name)}_GetAllInstanceVariableJsPropNames(){return this._instVars.map(iv=>iv.jsPropName)}GetInstanceVariableType(i){i=
Math.floor(i);if(i<0||i>=this._instVars.length)throw new RangeError("invalid instance variable index");return this._instVars[i].type}GetInstanceVariableName(i){i=Math.floor(i);if(i<0||i>=this._instVars.length)throw new RangeError("invalid instance variable index");return this._instVars[i].name}GetEffectTypesCount(){return this._effectsCount}GetBehaviorTypesIncludingInherited(){return this._behaviorTypesIncludingInherited}GetBehaviorTypeByName(name){return this._behaviorsByName.get(name.toLowerCase())||
null}GetBehaviorIndexByName(name){const ret=this._behaviorNameToIndex.get(name.toLowerCase());if(typeof ret==="undefined")return-1;else return ret}GetEffectList(){return this._effectList}HasEffects(){return this._plugin.HasEffects()}UsesEffects(){return this._effectList&&this._effectList.HasAnyEffectType()}GetSolStack(){return this._solStack}GetCurrentSol(){return this._solStack.GetCurrentSol()}GetImageInfo(){return this._imageInfo}SetDefaultInstanceData(d){this._defaultInstanceData=d}GetDefaultInstanceData(){return this._defaultInstanceData}_SetDefaultLayerIndex(i){this._defaultLayerIndex=
i}GetDefaultLayerIndex(){return this._defaultLayerIndex}GetAnimations(){return this._animations}GetAnimationCount(){return this._animations.length}GetFamilies(){return this._families}BelongsToFamily(family){return this._familiesSet.has(family)}GetFamilyMembers(){return this._familyMembers}FamilyHasMember(objectType){return this._familyMembersSet.has(objectType)}GetFamilyBehaviorOffset(familyIndex){return this._familyBehaviorMap[familyIndex]}GetFamilyInstanceVariableOffset(familyIndex){return this._familyInstVarMap[familyIndex]}GetAnimationByName(name){if(!this._animations)throw new Error("no animations");
return this._animationsByName.get(name.toLowerCase())||null}GetAnimationBySID(sid){if(!this._animations)throw new Error("no animations");return this._animationsBySid.get(sid)||null}GetFirstAnimationFrame(){if(!this._animations)throw new Error("no animations");return this._animations[0].GetFrameAt(0)}GetDefaultInstanceSize(){if(this._animations){const firstFrameInfo=this.GetFirstAnimationFrame().GetImageInfo();return[firstFrameInfo.GetWidth(),firstFrameInfo.GetHeight()]}else if(this._imageInfo)return[this._imageInfo.GetWidth(),
this._imageInfo.GetHeight()];else return[100,100]}GetSingleGlobalInstance(){if(!this._plugin.IsSingleGlobal())throw new Error("not a single-global plugin");return this._instances[0]}GetInstances(){return this._instances}*instances(){yield*this._instances}*instancesIncludingPendingCreate(){yield*this._instances;for(const inst of this._runtime._GetInstancesPendingCreate())if(inst.GetObjectClass()===this)yield inst}GetInstanceCount(){return this._instances.length}_AddInstance(inst){this._instances.push(inst)}_SetIIDsStale(){this._iidsStale=
true}_UpdateIIDs(){if(!this._iidsStale||this._isFamily)return;const instances=this._instances;let i=0;for(let len=instances.length;i<len;++i)instances[i]._SetIID(i);const instancesPendingCreate=this._runtime._GetInstancesPendingCreate();for(const inst of instancesPendingCreate)if(inst.GetObjectClass()===this)inst._SetIID(i++);this._iidsStale=false}GetInstanceByIID(i){const instances=this._instances;if(i<instances.length)return instances[i];i-=instances.length;const instancesPendingCreate=this._runtime._GetInstancesPendingCreate();
for(const inst of instancesPendingCreate)if(inst.GetObjectClass()===this){if(i===0)return inst;--i}return null}GetFirstPicked(fromInst){if(fromInst&&fromInst.IsInContainer()&&fromInst.GetObjectClass()!==this)for(const s of fromInst.siblings())if(s.GetObjectClass()===this)return s;const instances=this.GetCurrentSol().GetInstances();if(instances.length)return instances[0];else return null}GetPairedInstance(inst){const instances=this.GetCurrentSol().GetInstances();if(instances.length)return instances[inst.GetIID()%
instances.length];else return null}*allCorrespondingInstances(inst,objectClass){const myInstances=this.GetCurrentSol().GetInstances();const myInstanceCount=myInstances.length;const otherSol=objectClass.GetCurrentSol();const otherInstances=objectClass.GetCurrentSol().GetInstances();const otherInstanceCount=otherInstances.length;let index=inst.GetIID();if(objectClass.IsFamily()||!otherSol.IsSelectAll())index=otherInstances.indexOf(inst);const divisor=Math.ceil(myInstanceCount/otherInstanceCount);const remainder=
myInstanceCount%otherInstanceCount;let startIndex=0;let correspondCount=0;if(remainder===0||index<remainder){startIndex=index*divisor;correspondCount=divisor}else{startIndex=remainder*divisor+(index-remainder)*(divisor-1);correspondCount=divisor-1}for(let i=startIndex,end=startIndex+correspondCount;i<end;++i)yield myInstances[i]}FinishCondition(f){this._sdkType.FinishCondition(f)}ApplySolToContainer(){if(!this._isInContainer||this._isFamily)return;this._UpdateIIDs();const sol1=this.GetCurrentSol();
const sol1instances=sol1._GetOwnInstances();const selectAll=sol1.IsSelectAll();const es=this._runtime.GetCurrentEventStackFrame();const isOrBlock=es&&es.GetCurrentEvent()&&es.GetCurrentEvent().IsOrBlock();for(const containerType of this._container.objectTypes()){if(containerType===this)continue;containerType._UpdateIIDs();const sol2=containerType.GetCurrentSol();sol2._SetSelectAll(selectAll);if(!selectAll){const sol2instances=sol2._GetOwnInstances();C3.clearArray(sol2instances);for(const inst of sol1instances)sol2instances.push(containerType.GetInstanceByIID(inst.GetIID()));
if(isOrBlock){const sol1elseInstances=sol1._GetOwnElseInstances();const sol2elseInstances=sol2._GetOwnElseInstances();C3.clearArray(sol2elseInstances);for(const inst of sol1elseInstances)sol2elseInstances.push(containerType.GetInstanceByIID(inst.GetIID()))}}}}_TruncateContainerSols(useElseInstances,i){for(const containerType of this.GetContainer().objectTypes()){const sol=containerType.GetCurrentSol();if(useElseInstances)C3.truncateArray(sol._GetOwnElseInstances(),i);else C3.truncateArray(sol._GetOwnInstances(),
i)}}_GetCollisionCellGrid(){return this._collisionGrid}_SetAnyCollisionCellChanged(c){this._anyCollisionCellChanged=!!c}_SetAnyInstanceParallaxed(p){this._anyInstanceParallaxed=!!p}IsAnyInstanceParallaxed(){return this._anyInstanceParallaxed}_UpdateAllCollisionCells(){if(!this._anyCollisionCellChanged||!this._isWorldType)return;for(const inst of this._instances)inst.GetWorldInfo()._UpdateCollisionCell();for(const inst of this._runtime._GetInstancesPendingCreate())if(inst.GetObjectClass()===this)inst.GetWorldInfo()._UpdateCollisionCell();
this._anyCollisionCellChanged=false}GetSavedDataMap(){if(!this._savedData)this._savedData=new Map;return this._savedData}GetUnsavedDataMap(){if(!this._unsavedData)this._unsavedData=new Map;return this._unsavedData}HasSolidBehavior(){return this.UsesBehaviorByCtor(C3.Behaviors.solid)}HasNoSaveBehavior(){return this.UsesBehaviorByCtor(C3.Behaviors.NoSave)}HasPersistBehavior(){return this.UsesBehaviorByCtor(C3.Behaviors.Persist)}_SaveToJson(){const o={"instances":this._instances.map(inst=>inst.SaveToJson())};
if(this._savedData&&this._savedData.size)o["ex"]=C3.ToSuperJSON(this._savedData);return o}_LoadFromJson(o){if(this._savedData){this._savedData.clear();this._savedData=null}const ex=o["ex"];if(ex)this._savedData=C3.FromSuperJSON(ex);const existingInstances=this._instances;const loadInstances=o["instances"];for(let i=0,len=Math.min(existingInstances.length,loadInstances.length);i<len;++i)existingInstances[i].LoadFromJson(loadInstances[i]);for(let i=loadInstances.length,len=existingInstances.length;i<
len;++i)this._runtime.DestroyInstance(existingInstances[i]);for(let i=existingInstances.length,len=loadInstances.length;i<len;++i){const data=loadInstances[i];let layer=null;if(this.IsWorldType()){layer=this._runtime.GetMainRunningLayout().GetLayerBySID(data["w"]["l"]);if(!layer)continue}const inst=this._runtime.CreateInstanceFromData(this._defaultInstanceData||this,layer,false,0,0,true);inst.LoadFromJson(data)}this._SetIIDsStale()}GetIObjectClass(){return this._iObjectClass}UserScriptDispatcher(){return this._userScriptDispatcher}_GetUserScriptInstanceClass(){return this._instanceUserScriptClass}_SetUserScriptInstanceClass(Class){this._instanceUserScriptClass=
Class}DispatchUserScriptEvent(e){const runtime=this._runtime;const shouldTime=runtime.IsDebug()&&!runtime.GetEventSheetManager().IsInEventEngine();if(shouldTime)C3Debugger.StartMeasuringScriptTime();this._userScriptDispatcher.dispatchEvent(e);if(shouldTime)C3Debugger.AddScriptTime()}}};


// c3/objects/container.js
'use strict';{const C3=self.C3;C3.Container=class Container extends C3.DefendedBase{constructor(runtime,objectTypes){super();this._runtime=runtime;this._objectTypes=objectTypes;for(const objectType of this._objectTypes)objectType._SetContainer(this)}Release(){this._runtime=null}GetRuntime(){return this._runtime}GetObjectTypes(){return this._objectTypes}objectTypes(){return this._objectTypes}HasAnyWorldType(){return this._objectTypes.some(o=>o.IsWorldType())}}};


// c3/objects/instance.js
'use strict';{const C3=self.C3;const C3Debugger=self.C3Debugger;const IInstance=self.IInstance;const EMPTY_ARRAY=[];let nextPuid=0;const savedDataMaps=new WeakMap;const unsavedDataMaps=new WeakMap;const FLAG_DESTROYED=1<<0;const FLAG_TILEMAP=1<<1;const FLAG_MUST_PREDRAW=1<<2;const FLAG_SOLID_ENABLED=1<<3;const FLAG_JUMPTHRU_ENABLED=1<<4;C3.Instance=class Instance extends C3.DefendedBase{constructor(opts){super();this._runtime=opts.runtime;this._objectType=opts.objectType;this._worldInfo=null;this._sdkInst=
null;this._iScriptInterface=null;this._iid=0;this._uid=opts.uid;this._puid=nextPuid++;this._flags=0;this._instVarValues=EMPTY_ARRAY;this._behaviorInstances=EMPTY_ARRAY;const behaviorTypes=this._objectType.GetBehaviorTypesIncludingInherited();if(behaviorTypes.length>0)this._behaviorInstances=behaviorTypes.map((behaviorType,index)=>C3.New(C3.BehaviorInstance,{runtime:this._runtime,behaviorType:behaviorType,instance:this,index}));this._siblings=this._objectType.IsInContainer()?[]:null;this._timeScale=
-1;this._dispatcher=null;const plugin=this.GetPlugin();if(plugin.MustPreDraw())this._flags|=FLAG_MUST_PREDRAW;if(plugin.IsWorldType()){this._worldInfo=C3.New(C3.WorldInfo,this,opts.layer);if(opts.worldData)this._worldInfo.Init(opts.worldData);else{this._worldInfo.InitNoData();const [width,height]=this._objectType.GetDefaultInstanceSize();this._worldInfo.SetSize(width,height);if(this.GetObjectClass().UsesEffects())this._worldInfo.GetInstanceEffectList().LoadDefaultEffectParameters()}}if(opts.instVarData)this._LoadInstanceVariableData(opts.instVarData);
else this._LoadDefaultInstanceVariables()}Release(){if(this._iScriptInterface){this._iScriptInterface._Release();this._iScriptInterface=null}if(this._behaviorInstances.length>0){for(const behInst of this._behaviorInstances)behInst.Release();C3.clearArray(this._behaviorInstances)}this._sdkInst.Release();this._sdkInst=null;const savedData=savedDataMaps.get(this);if(savedData){savedData.clear();savedDataMaps.delete(this)}const unsavedData=unsavedDataMaps.get(this);if(unsavedData){unsavedData.clear();
unsavedDataMaps.delete(this)}if(this._siblings)C3.clearArray(this._siblings);if(this._dispatcher){this._dispatcher.Release();this._dispatcher=null}this._runtime=null;this._objectType=null;if(this._instVarValues.length>0)C3.clearArray(this._instVarValues);if(this._worldInfo){this._worldInfo.Release();this._worldInfo=null}}_LoadInstanceVariableData(instVarData){if(instVarData.length>0){this._instVarValues=[];C3.shallowAssignArray(this._instVarValues,instVarData)}}_LoadDefaultInstanceVariables(){const len=
this._objectType.GetInstanceVariablesCount();if(len===0)return;this._instVarValues=[];const typeToInitValue=[0,0,""];for(let i=0;i<len;++i)this._instVarValues.push(typeToInitValue[this._objectType.GetInstanceVariableType(i)])}_CreateSdkInstance(properties,behInstProperties){if(this._sdkInst)throw new Error("already got sdk instance");for(let i=0,len=this._behaviorInstances.length;i<len;++i){const behInst=this._behaviorInstances[i];behInst._CreateSdkInstance(behInstProperties?behInstProperties[i]:
null)}this._sdkInst=C3.New(this._objectType.GetInstanceSdkCtor(),this,properties);if(!(this._sdkInst instanceof C3.SDKInstanceBase))throw new Error("sdk type must derive from SDKInstanceBase");for(let i=0,len=this._behaviorInstances.length;i<len;++i)this._behaviorInstances[i].PostCreate();if(this._objectType._GetUserScriptInstanceClass())this._InitUserScriptInterface()}GetSdkInstance(){return this._sdkInst}GetWorldInfo(){return this._worldInfo}GetRuntime(){return this._runtime}GetTimeScale(){return this._timeScale}GetActiveTimeScale(){const ts=
this._timeScale;if(ts===-1)return this.GetRuntime().GetTimeScale();else return ts}SetTimeScale(ts){ts=+ts;if(ts<0||!isFinite(ts))ts=0;this._timeScale=ts}RestoreTimeScale(){this._timeScale=-1}Dispatcher(){if(!this._dispatcher)this._dispatcher=C3.New(C3.Event.Dispatcher);return this._dispatcher}Draw(renderer){this._sdkInst.Draw(renderer)}OnCreate(properties){this._sdkInst.OnCreate(properties)}_SetHasTilemap(){this._flags|=FLAG_TILEMAP}HasTilemap(){return(this._flags&FLAG_TILEMAP)!==0}_MarkDestroyed(){this._flags|=
FLAG_DESTROYED}IsDestroyed(){return(this._flags&FLAG_DESTROYED)!==0}MustPreDraw(){return(this._flags&FLAG_MUST_PREDRAW)!==0}_IsSolidEnabled(){return(this._flags&FLAG_SOLID_ENABLED)!==0}_SetSolidEnabled(e){if(e)this._flags|=FLAG_SOLID_ENABLED;else this._flags&=~FLAG_SOLID_ENABLED}_IsJumpthruEnabled(){return(this._flags&FLAG_JUMPTHRU_ENABLED)!==0}_SetJumpthruEnabled(e){if(e)this._flags|=FLAG_JUMPTHRU_ENABLED;else this._flags&=~FLAG_JUMPTHRU_ENABLED}SetFlag(bit,enable){bit<<=16;if(enable)this._flags|=
bit;else this._flags&=~bit}GetFlag(bit){return(this._flags&bit<<16)!==0}GetCurrentImageInfo(){return this._sdkInst.GetCurrentImageInfo()}GetCurrentSurfaceSize(){return this._sdkInst.GetCurrentSurfaceSize()}GetCurrentTexRect(){return this._sdkInst.GetCurrentTexRect()}GetImagePoint(nameOrIndex){return this._sdkInst.GetImagePoint(nameOrIndex)}GetObjectClass(){return this._objectType}BelongsToObjectClass(objectClass){if(objectClass.IsFamily())return objectClass.FamilyHasMember(this.GetObjectClass());
else return this.GetObjectClass()===objectClass}VerifySupportsSceneGraph(){if(!this.GetPlugin().SupportsSceneGraph())throw new Error("object does not support scene graph");}HasParent(){return this.GetParent()!==null}GetParent(){const wi=this.GetWorldInfo();if(!wi)return null;const parentWi=wi.GetParent();return parentWi?parentWi.GetInstance():null}GetTopParent(){const wi=this.GetWorldInfo();if(!wi)return null;const parentWi=wi.GetTopParent();return parentWi?parentWi.GetInstance():null}*parents(){const wi=
this.GetWorldInfo();if(!wi)return;for(const parentWi of wi.parents())yield parentWi.GetInstance()}HasChildren(){const wi=this.GetWorldInfo();return wi?wi.HasChildren():false}GetChildren(){const wi=this.GetWorldInfo();if(!wi)return[];return wi.GetChildren().map(wi=>wi.GetInstance())}*children(){const wi=this.GetWorldInfo();if(!wi)return;for(const childWi of wi.children())yield childWi.GetInstance()}*allChildren(){const wi=this.GetWorldInfo();if(!wi)return;for(const childWi of wi.allChildren())yield childWi.GetInstance()}GetChildCount(){const wi=
this.GetWorldInfo();return wi?wi.GetChildCount():0}GetChildAt(index){const wi=this.GetWorldInfo();if(!wi)return null;const childWi=wi.GetChildAt(index);return childWi?childWi.GetInstance():null}AddChild(childInst,opts){this.VerifySupportsSceneGraph();childInst.VerifySupportsSceneGraph();this.GetWorldInfo().AddChild(childInst.GetWorldInfo(),opts||{})}RemoveChild(childInst){const wi=this.GetWorldInfo();if(!wi)return;wi.RemoveChild(childInst.GetWorldInfo())}GetDestroyWithParent(){const wi=this.GetWorldInfo();
return wi?wi.GetDestroyWithParent():false}SetupInitialSceneGraphConnections(){const wi=this.GetWorldInfo();if(!wi)return;const childrenData=wi.GetSceneGraphChildrenExportData();if(!childrenData)return;for(const childData of childrenData){const child=this._runtime.GetInstanceByUID(childData[2]);if(child){const flags=childData[3];this.AddChild(child,{transformX:!!(flags>>0&1),transformY:!!(flags>>1&1),transformWidth:!!(flags>>2&1),transformHeight:!!(flags>>3&1),transformAngle:!!(flags>>4&1),destroyWithParent:!!(flags>>
5&1),transformZElevation:!!(flags>>6&1)})}}}IsInContainer(){return this._siblings!==null}_AddSibling(inst){this._siblings.push(inst)}GetSiblings(){return this._siblings}HasSibling(objectClass){return!!this.GetSibling(objectClass)}GetSibling(objectClass){const siblings=this.siblings();if(siblings===null||siblings.length===0)return false;for(const s of siblings)if(s.GetObjectClass()===objectClass)return s;return null}siblings(){return this._siblings}SetSiblingsSinglePicked(){for(const s of this.siblings())s.GetObjectClass().GetCurrentSol().SetSinglePicked(s)}_PushSiblingsToSolInstances(){for(const s of this.siblings())s.GetObjectClass().GetCurrentSol()._PushInstance(s)}_SetSiblingsToSolInstancesIndex(i){for(const s of this.siblings())s.GetObjectClass().GetCurrentSol()._GetOwnInstances()[i]=
s}_PushSiblingsToSolElseInstances(){for(const s of this.siblings())s.GetObjectClass().GetCurrentSol()._PushElseInstance(s)}_SetSiblingsToSolElseInstancesIndex(i){for(const s of this.siblings())s.GetObjectClass().GetCurrentSol()._GetOwnElseInstances()[i]=s}GetPlugin(){return this._objectType.GetPlugin()}_SetIID(i){this._iid=i}GetIID(){this._objectType._UpdateIIDs();return this._iid}GetUID(){return this._uid}GetPUID(){return this._puid}GetBehaviorInstances(){return this._behaviorInstances}GetBehaviorInstanceFromCtor(ctor){if(!ctor)return null;
for(const behInst of this._behaviorInstances)if(behInst.GetBehavior()instanceof ctor)return behInst;return null}GetBehaviorSdkInstanceFromCtor(ctor){if(!ctor)return null;const behInst=this.GetBehaviorInstanceFromCtor(ctor);if(behInst)return behInst.GetSdkInstance();else return null}GetBehaviorIndexBySID(sid){const behaviorInstances=this._behaviorInstances;for(let i=0,len=behaviorInstances.length;i<len;++i)if(behaviorInstances[i].GetBehaviorType().GetSID()===sid)return i;return-1}GetAllInstanceVariableValues(){return this._instVarValues}_GetAllInstanceVariableNames(){return this._objectType._GetAllInstanceVariableNames()}GetInstanceVariableCount(){return this._instVarValues.length}GetInstanceVariableValue(index){index=
index|0;const instVarValues=this._instVarValues;if(index<0||index>=instVarValues.length)throw new RangeError("invalid instance variable");return instVarValues[index]}_GetInstanceVariableValueUnchecked(index){return this._instVarValues[index]}_GetInstanceVariableTypedValue(index){const ret=this._instVarValues[index];if(this._objectType.GetInstanceVariableType(index)===0)return!!ret;else return ret}SetInstanceVariableValue(index,value){index=index|0;const instVarValues=this._instVarValues;if(index<
0||index>=instVarValues.length)throw new RangeError("invalid instance variable");const type=this._objectType.GetInstanceVariableType(index);switch(type){case 0:instVarValues[index]=value?1:0;break;case 1:instVarValues[index]=typeof value==="number"?value:parseFloat(value);break;case 2:instVarValues[index]=typeof value==="string"?value:value.toString();break;default:throw new Error("unknown instance variable type");}}SetInstanceVariableOffset(index,offset){if(offset===0)return;index=index|0;const instVarValues=
this._instVarValues;if(index<0||index>=instVarValues.length)throw new RangeError("invalid instance variable");const lastValue=instVarValues[index];if(typeof lastValue==="number")if(typeof offset==="number")instVarValues[index]+=offset;else instVarValues[index]+=parseFloat(offset);else if(typeof lastValue==="boolean")throw new Error("can not set offset of boolean variable");else if(typeof lastValue==="string")throw new Error("can not set offset of string variable");else throw new Error("unknown instance variable type");
}GetSavedDataMap(){let ret=savedDataMaps.get(this);if(ret)return ret;ret=new Map;savedDataMaps.set(this,ret);return ret}GetUnsavedDataMap(){let ret=unsavedDataMaps.get(this);if(ret)return ret;ret=new Map;unsavedDataMaps.set(this,ret);return ret}_HasAnyCreateDestroyHandler(name){const objectType=this.GetObjectClass();if(objectType.UserScriptDispatcher().HasAnyHandlerFor(name))return true;for(const family of objectType.GetFamilies())if(family.UserScriptDispatcher().HasAnyHandlerFor(name))return true;
if(this._runtime.UserScriptDispatcher().HasAnyHandlerFor(name))return true;return false}_TriggerOnCreatedOnSelfAndRelated(){this._TriggerOnCreated();const wi=this.GetWorldInfo();const relatedInstances=new Set;if(wi&&wi.HasChildren())for(const c of this.allChildren()){relatedInstances.add(c);if(!c.IsInContainer())continue;for(const s of c.siblings())relatedInstances.add(s)}if(this.IsInContainer())for(const s of this.siblings())relatedInstances.add(s);for(const relatedInstance of relatedInstances.values())relatedInstance._TriggerOnCreated()}_TriggerOnCreated(){if(this._HasAnyCreateDestroyHandler("instancecreate")){const objectType=
this.GetObjectClass();const instCreateEvent=new C3.Event("instancecreate");instCreateEvent.instance=this.GetInterfaceClass();objectType.DispatchUserScriptEvent(instCreateEvent);for(const family of objectType.GetFamilies())family.DispatchUserScriptEvent(instCreateEvent);this._runtime.DispatchUserScriptEvent(instCreateEvent)}this._runtime.Trigger(this.GetPlugin().constructor.Cnds.OnCreated,this,null)}_TriggerOnDestroyed(){this._runtime.Trigger(this.GetPlugin().constructor.Cnds.OnDestroyed,this,null)}_FireDestroyedScriptEvents(isEndingLayout){if(this._iScriptInterface){const e=
new C3.Event("destroy");e.isEndingLayout=isEndingLayout;this.DispatchUserScriptEvent(e)}if(!this._HasAnyCreateDestroyHandler("instancedestroy"))return;const objectType=this.GetObjectClass();const instDestroyEvent=new C3.Event("instancedestroy");instDestroyEvent.instance=this.GetInterfaceClass();instDestroyEvent.isEndingLayout=isEndingLayout;objectType.DispatchUserScriptEvent(instDestroyEvent);for(const family of objectType.GetFamilies())family.DispatchUserScriptEvent(instDestroyEvent);this._runtime.DispatchUserScriptEvent(instDestroyEvent)}_GetDebuggerProperties(){return this._sdkInst.GetDebuggerProperties()}SaveToJson(mode=
"full"){const o={};if(mode==="full")o["uid"]=this.GetUID();else o["c3"]=true;if(mode!=="visual-state"){const savedData=savedDataMaps.get(this);if(savedData&&savedData.size)o["ex"]=C3.ToSuperJSON(savedData);if(this.GetTimeScale()!==-1)o["mts"]=this.GetTimeScale();if(this._objectType.GetInstanceVariablesCount()>0){const ivs={};const ivSids=this._objectType.GetInstanceVariableSIDs();for(let i=0,len=this._instVarValues.length;i<len;++i)ivs[ivSids[i].toString()]=this._instVarValues[i];o["ivs"]=ivs}if(this._behaviorInstances.length){const behs=
{};for(const behInst of this._behaviorInstances){const data=behInst.SaveToJson();if(data)behs[behInst.GetBehaviorType().GetSID().toString()]=data}o["behs"]=behs}}if(this._worldInfo)o["w"]=this._worldInfo._SaveToJson(mode);const ownData=this._sdkInst.SaveToJson();if(ownData)o["data"]=ownData;return o}LoadFromJson(o,mode="full"){if(mode==="full")this._uid=o["uid"];else if(!o["c3"])return;if(mode!=="visual-state"){let savedData=savedDataMaps.get(this);if(savedData){savedData.clear();savedDataMaps.delete(this)}const ex=
o["ex"];if(ex){savedData=C3.FromSuperJSON(ex);savedDataMaps.set(this,savedData)}this._timeScale=o.hasOwnProperty("mts")?o["mts"]:-1;const ivs=o["ivs"];if(ivs)for(const [sidStr,value]of Object.entries(ivs)){const sid=parseInt(sidStr,10);const index=this._objectType.GetInstanceVariableIndexBySID(sid);if(index<0||index>=this._instVarValues.length)continue;let v=value;if(v===null)v=NaN;this._instVarValues[index]=v}}if(this.GetPlugin().IsWorldType()){const worldData=o["w"];const layerSid=worldData["l"];
if(this._worldInfo.GetLayer().GetSID()!==layerSid){const oldLayer=this._worldInfo.GetLayer();const newLayer=oldLayer.GetLayout().GetLayerBySID(layerSid);if(newLayer){this._worldInfo._SetLayer(newLayer);oldLayer._RemoveInstance(this,true);newLayer._AddInstance(this,true);newLayer.SetZIndicesChanged();this._worldInfo.SetBboxChanged()}else if(mode==="full")this._runtime.DestroyInstance(this)}this._worldInfo._LoadFromJson(worldData,mode)}if(mode!=="visual-state"){const behs=o["behs"];if(behs)for(const [sidStr,
data]of Object.entries(behs)){const sid=parseInt(sidStr,10);const index=this.GetBehaviorIndexBySID(sid);if(index<0||index>=this._behaviorInstances.length)continue;this._behaviorInstances[index].LoadFromJson(data)}}const ownData=o["data"];if(ownData)this._sdkInst.LoadFromJson(ownData)}GetInterfaceClass(){return this._iScriptInterface||this._InitUserScriptInterface()}_InitUserScriptInterface(){const DefaultScriptClass=this._worldInfo?self.IWorldInstance:IInstance;const SdkScriptClass=this._sdkInst.GetScriptInterfaceClass();
const UserScriptClass=this._objectType._GetUserScriptInstanceClass();const ScriptInterfaceClass=UserScriptClass||SdkScriptClass||DefaultScriptClass;IInstance._Init(this);this._iScriptInterface=new ScriptInterfaceClass;IInstance._Init(null);if(SdkScriptClass&&!(this._iScriptInterface instanceof DefaultScriptClass))throw new TypeError(`script interface class '${SdkScriptClass.name}' does not extend the right base class '${DefaultScriptClass.name}'`);if(UserScriptClass){const ExpectedBaseClass=SdkScriptClass||
DefaultScriptClass;if(!(this._iScriptInterface instanceof ExpectedBaseClass))throw new TypeError(`setInstanceClass(): class '${UserScriptClass.name}' does not extend the right base class '${ExpectedBaseClass.name}'`);}return this._iScriptInterface}_GetInstVarsScriptDescriptor(instDescriptors){if(this._instVarValues.length===0)return;const varDescriptors={};const instVarJsPropNames=this._objectType._GetAllInstanceVariableJsPropNames();for(let i=0,len=instVarJsPropNames.length;i<len;++i)varDescriptors[instVarJsPropNames[i]]=
{configurable:false,enumerable:true,get:C3.Instance.prototype._GetInstanceVariableTypedValue.bind(this,i),set:C3.Instance.prototype.SetInstanceVariableValue.bind(this,i)};const instVarsObj=Object.create(Object.prototype,varDescriptors);instDescriptors.instVars={value:instVarsObj,writable:false}}_GetBehaviorsScriptDescriptor(instDescriptors){const behaviorInstances=this._behaviorInstances;if(behaviorInstances.length===0)return;const behDescriptors={};for(const behInst of behaviorInstances)behDescriptors[behInst.GetBehaviorType().GetJsPropName()]=
{value:behInst.GetScriptInterface(),writable:false};const behaviorsObj=Object.create(Object.prototype,behDescriptors);instDescriptors.behaviors={value:behaviorsObj,writable:false}}DispatchUserScriptEvent(e){e.instance=this.GetInterfaceClass();const runtime=this._runtime;const shouldTime=runtime.IsDebug()&&!runtime.GetEventSheetManager().IsInEventEngine();if(shouldTime)C3Debugger.StartMeasuringScriptTime();this.GetInterfaceClass().dispatchEvent(e);if(shouldTime)C3Debugger.AddScriptTime()}}};


// c3/objects/sceneGraphInfo.js
'use strict';{const C3=self.C3;C3.SceneGraphInfo=class SceneGraphInfo extends C3.DefendedBase{constructor(owner){super();this._owner=owner;this._parent=null;this._children=[];this._myStartWidth=owner.GetWidth();this._myStartHeight=owner.GetHeight();this._parentStartAngle=0}Release(){this._parent=null;C3.clearArray(this._children)}SetParent(parent){this._parent=parent;this._parentStartAngle=parent?parent.GetAngle():0}GetParent(){return this._parent}HasChildren(){return this._children.length>0}GetChildren(){return this._children}_GetStartWidth(){return this._myStartWidth}_GetStartHeight(){return this._myStartHeight}GetParentScaleX(){if(this._owner.GetTransformWithParentWidth())return this._parent.GetWidth()/
this._parent._GetSceneGraphInfo()._GetStartWidth();else return 1}GetParentScaleY(){if(this._owner.GetTransformWithParentHeight())return this._parent.GetHeight()/this._parent._GetSceneGraphInfo()._GetStartHeight();else return 1}GetParentStartAngle(){return this._parentStartAngle}_SaveToJson(){return{"sw":this._myStartWidth,"sh":this._myStartHeight,"psa":this._parentStartAngle,"c":this._children.map(c=>{let flagsStr="";if(c.GetTransformWithParentX())flagsStr+="x";if(c.GetTransformWithParentY())flagsStr+=
"y";if(c.GetTransformWithParentWidth())flagsStr+="w";if(c.GetTransformWithParentHeight())flagsStr+="h";if(c.GetTransformWithParentAngle())flagsStr+="a";if(c.GetTransformWithParentZElevation())flagsStr+="z";if(c.GetDestroyWithParent())flagsStr+="d";return{"uid":c.GetInstance().GetUID(),"f":flagsStr}})}}_LoadFromJson(o){this._myStartWidth=o["sw"];this._myStartHeight=o["sh"];this._parentStartAngle=o["psa"]}_OnAfterLoad(o){const owner=this._owner;const runtime=owner.GetRuntime();for(const childData of o["c"]){const childUid=
childData["uid"];const childInst=runtime.GetInstanceByUID(childUid);const childWi=childInst.GetWorldInfo();const flagsStr=childData["f"];const opts={};opts.transformX=flagsStr.includes("x");opts.transformY=flagsStr.includes("y");opts.transformWidth=flagsStr.includes("w");opts.transformHeight=flagsStr.includes("h");opts.transformAngle=flagsStr.includes("a");opts.transformZElevation=flagsStr.includes("z");opts.destroyWithParent=flagsStr.includes("d");owner.AddChild(childWi,opts)}}}};


// c3/objects/worldInfo.js
'use strict';{const C3=self.C3;const tempRect=C3.New(C3.Rect);const tempQuad=C3.New(C3.Quad);const bboxChangeEvent=C3.New(C3.Event,"bboxchange",false);const tempColor=C3.New(C3.Color,0,0,0,0);const tempCollisionPoly=C3.New(C3.CollisionPoly);const DEFAULT_COLOR=C3.New(C3.Color,1,1,1,1);const DEFAULT_RENDER_CELLS=C3.New(C3.Rect,0,0,-1,-1);const DEFAULT_COLLISION_CELLS=C3.New(C3.Rect,0,0,-1,-1);const VALID_SET_MESH_POINT_MODES=new Set(["absolute","relative"]);const EMPTY_ARRAY=[];let enableUpdateRendererStateGroup=
true;const FLAG_IS_VISIBLE=1<<0;const FLAG_BBOX_CHANGED=1<<1;const FLAG_ENABLE_BBOX_CHANGED_EVENT=1<<2;const FLAG_COLLISION_ENABLED=1<<3;const FLAG_COLLISION_CELL_CHANGED=1<<4;const FLAG_SOLID_FILTER_INCLUSIVE=1<<5;const FLAG_HAS_ANY_ACTIVE_EFFECT=1<<6;const FLAG_IS_ROTATABLE=1<<7;const FLAG_DESTROY_WITH_PARENT=1<<8;const FLAG_TRANSFORM_WITH_PARENT_X=1<<9;const FLAG_TRANSFORM_WITH_PARENT_Y=1<<10;const FLAG_TRANSFORM_WITH_PARENT_W=1<<11;const FLAG_TRANSFORM_WITH_PARENT_H=1<<12;const FLAG_TRANSFORM_WITH_PARENT_A=
1<<13;const FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION=1<<14;const MASK_ALL_SCENE_GRAPH_FLAGS=FLAG_DESTROY_WITH_PARENT|FLAG_TRANSFORM_WITH_PARENT_X|FLAG_TRANSFORM_WITH_PARENT_Y|FLAG_TRANSFORM_WITH_PARENT_W|FLAG_TRANSFORM_WITH_PARENT_H|FLAG_TRANSFORM_WITH_PARENT_A|FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION;const FLAG_MESH_CHANGED=1<<15;const FLAG_PHYSICS_BODY_CHANGED=1<<16;const FLAG_SIN_COS_ANGLE_CHANGED=1<<17;const FLAG_BLEND_MODE_BIT_OFFSET=26;const FLAG_BLEND_MODE_MASK=31<<FLAG_BLEND_MODE_BIT_OFFSET;C3.WorldInfo=
class WorldInfo extends C3.DefendedBase{constructor(inst,layer){super();this._inst=inst;this._objectClass=inst.GetObjectClass();this._runtime=inst.GetRuntime();this._layer=layer;this._zIndex=-1;this._flags=FLAG_IS_VISIBLE|FLAG_BBOX_CHANGED|FLAG_COLLISION_ENABLED|FLAG_COLLISION_CELL_CHANGED|FLAG_MESH_CHANGED|FLAG_PHYSICS_BODY_CHANGED;if(this._objectClass.GetPlugin().IsRotatable())this._flags|=FLAG_IS_ROTATABLE;this._x=NaN;this._y=NaN;this._zElevation=NaN;this._w=NaN;this._h=NaN;this._a=NaN;this._sinA=
NaN;this._cosA=NaN;this._ox=NaN;this._oy=NaN;this._boundingBox=C3.New(C3.Rect);this._boundingQuad=C3.New(C3.Quad);this._collisionCells=DEFAULT_COLLISION_CELLS;this._renderCells=DEFAULT_RENDER_CELLS;this._sourceCollisionPoly=null;this._transformedPolyInfo=null;this._solidFilterTags=null;this._color=DEFAULT_COLOR;this._colorPremultiplied=DEFAULT_COLOR;this._stateGroup=null;this._instanceEffectList=null;if(this._inst.GetObjectClass().UsesEffects())this._instanceEffectList=C3.New(C3.InstanceEffectList,
this._inst,this);this._sceneGraphInfo=null;this._sceneGraphFlagsExportData=NaN;this._sceneGraphChildrenExportData=null;this._meshInfo=null}Release(){if(this._stateGroup){this._runtime.GetRenderer().ReleaseStateGroup(this._stateGroup);this._stateGroup=null}this._sourceCollisionPoly=null;if(this._transformedPolyInfo){this._transformedPolyInfo.poly.Release();this._transformedPolyInfo=null}if(this._solidFilterTags){this._solidFilterTags.clear();this._solidFilterTags=null}this.ReleaseMesh();if(this.HasParent())this.GetParent().RemoveChild(this);
if(this.HasChildren()){const childrenToRelease=[...this.GetChildren()];for(const child of childrenToRelease)this.RemoveChild(child)}this._ReleaseSceneGraphInfo();this._inst=null;this._objectClass=null;this._runtime=null;this._layer=null}Init(data){enableUpdateRendererStateGroup=false;this.SetXY(data[0],data[1]);this.SetZElevation(data[2]);this.SetSize(data[3],data[4]);if(this.IsRotatable())this.SetAngle(data[6]);else this._a=0;tempColor.setFromJSON(data[7]);this._SetColor(tempColor);this.SetOriginX(data[8]);
this.SetOriginY(data[9]);this.SetBlendMode(data[10]);if(this._instanceEffectList)this._instanceEffectList._LoadEffectParameters(data[12]);if(data[14]){this._sceneGraphFlagsExportData=data[14][0];this._sceneGraphChildrenExportData=data[14][1]}if(data[15]){const meshData=data[15];this.CreateMesh(meshData[0],meshData[1]);const sourceMesh=this.GetSourceMesh();const meshRows=meshData[2];for(let y=0,lenY=meshRows.length;y<lenY;++y){const rowData=meshRows[y];for(let x=0,lenX=rowData.length;x<lenX;++x){const d=
rowData[x];const pt=sourceMesh.GetMeshPointAt(x,y);pt.SetX(d[0]);pt.SetY(d[1]);pt.SetU(d[2]);pt.SetV(d[3])}}}enableUpdateRendererStateGroup=true;this._UpdateRendererStateGroup()}InitNoData(){this._x=0;this._y=0;this._zElevation=0;this._w=0;this._h=0;this._a=0;this._sinA=0;this._cosA=1;this._ox=0;this._oy=0;this._UpdateRendererStateGroup()}GetRuntime(){return this._runtime}GetObjectClass(){return this._objectClass}GetInstance(){return this._inst}_GetParentOffsetAngle(){if(this.GetTransformWithParentAngle())return this.GetParent().GetAngle()-
this._sceneGraphInfo.GetParentStartAngle();else return 0}SetX(x){x=+x;if(this.GetTransformWithParentX()){const sgi=this._sceneGraphInfo;const dx=x-this.GetX();const da=-this._GetParentOffsetAngle();if(da===0)this._x+=dx/sgi.GetParentScaleX();else{this._x+=Math.cos(da)*dx/sgi.GetParentScaleX();if(this.GetTransformWithParentY())this._y+=Math.sin(da)*dx/sgi.GetParentScaleY()}}else this._x=x}OffsetX(x){x=+x;if(this.GetTransformWithParentX())this.SetX(this.GetX()+x);else this._x+=x}GetX(){if(this.GetTransformWithParentX()){let x=
this._x;const sgi=this._sceneGraphInfo;const parent=this.GetParent();const da=this._GetParentOffsetAngle();if(da===0)x*=sgi.GetParentScaleX();else{x=x*sgi.GetParentScaleX()*Math.cos(da);if(this.GetTransformWithParentY())x-=this._y*sgi.GetParentScaleY()*Math.sin(da)}return parent.GetX()+x}else return this._x}SetY(y){y=+y;if(this.GetTransformWithParentY()){const sgi=this._sceneGraphInfo;const dy=y-this.GetY();const da=-this._GetParentOffsetAngle();if(da===0)this._y+=dy/sgi.GetParentScaleY();else{if(this.GetTransformWithParentX())this._x-=
Math.sin(da)*dy/sgi.GetParentScaleX();this._y+=Math.cos(da)*dy/sgi.GetParentScaleY()}}else this._y=y}OffsetY(y){y=+y;if(this.GetTransformWithParentY())this.SetY(this.GetY()+y);else this._y+=y}GetY(){if(this.GetTransformWithParentY()){let y=this._y;const sgi=this._sceneGraphInfo;const parent=this.GetParent();const da=this._GetParentOffsetAngle();if(da===0)y*=sgi.GetParentScaleY();else{y=y*sgi.GetParentScaleY()*Math.cos(da);if(this.GetTransformWithParentX())y+=this._x*sgi.GetParentScaleX()*Math.sin(da)}return parent.GetY()+
y}else return this._y}SetXY(x,y){x=+x;y=+y;if(this.GetTransformWithParentXOrY()){const isTransformX=this.GetTransformWithParentX();const isTransformY=this.GetTransformWithParentY();const sgi=this._sceneGraphInfo;const dx=x-this.GetX();const dy=y-this.GetY();const da=-this._GetParentOffsetAngle();if(da===0){if(isTransformX)this._x+=dx/sgi.GetParentScaleX();else this._x=x;if(isTransformY)this._y+=dy/sgi.GetParentScaleY();else this._y=y}else{const sinDa=Math.sin(da);const cosDa=Math.cos(da);if(isTransformX)if(isTransformY)this._x+=
(cosDa*dx-sinDa*dy)/sgi.GetParentScaleX();else this._x+=cosDa*dx/sgi.GetParentScaleX();else this._x=x;if(isTransformY)if(isTransformX)this._y+=(sinDa*dx+cosDa*dy)/sgi.GetParentScaleY();else this._y+=cosDa*dy/sgi.GetParentScaleY();else this._y=y}}else{this._x=x;this._y=y}}OffsetXY(x,y){x=+x;y=+y;if(this.GetTransformWithParentXOrY())this.SetXY(this.GetX()+x,this.GetY()+y);else{this._x+=x;this._y+=y}}EqualsXY(x,y){return this.GetX()===x&&this.GetY()===y}SetZElevation(z){z=+z;if(this.GetTransformWithParentZElevation())z-=
this.GetParent().GetZElevation();if(this._zElevation===z)return;this._zElevation=z;this._UpdateZElevation();const layer=this.GetLayer();if(this._zElevation!==0)layer._SetAnyInstanceZElevated();layer.SetZIndicesChanged()}_UpdateZElevation(){this._UpdateRendererStateGroup();if(this.HasChildren()){const children=this.GetChildren();for(let i=0,len=children.length;i<len;i++){const child=children[i];if(child.GetTransformWithParentZElevation())child._UpdateZElevation()}}}OffsetZElevation(z){this.SetZElevation(this.GetZElevation()+
z)}GetZElevation(){if(this.GetTransformWithParentZElevation())return this.GetParent().GetZElevation()+this._zElevation;else return this._zElevation}GetTotalZElevation(){return this.GetLayer().GetZElevation()+this.GetZElevation()}SetWidth(w){w=+w;if(this.GetTransformWithParentWidth())this._w*=w/this.GetWidth();else this._w=w}OffsetWidth(w){w=+w;if(this.GetTransformWithParentWidth())this.SetWidth(this.GetWidth()+w);else this._w+=w}GetWidth(){if(this.GetTransformWithParentWidth())return this.GetParent().GetWidth()*
this._w;else return this._w}SetHeight(h){h=+h;if(this.GetTransformWithParentHeight())this._h*=h/this.GetHeight();else this._h=h}OffsetHeight(h){h=+h;if(this.GetTransformWithParentHeight())this.SetHeight(this.GetHeight()+h);else this._h+=h}GetHeight(){if(this.GetTransformWithParentHeight())return this.GetParent().GetHeight()*this._h;else return this._h}SetSize(w,h){w=+w;h=+h;if(this.GetTransformWithParentWidth())this._w*=w/this.GetWidth();else this._w=w;if(this.GetTransformWithParentHeight())this._h*=
h/this.GetHeight();else this._h=h}GetSceneGraphScale(){if(this.HasParent()){const sgi=this._sceneGraphInfo;return Math.min(sgi.GetParentScaleX(),sgi.GetParentScaleY())}else return 1}IsRotatable(){return(this._flags&FLAG_IS_ROTATABLE)!==0}SetAngle(a){a=+a;if(!this.IsRotatable())return;if(this.GetTransformWithParentAngle())a-=this.GetParent().GetAngle();a=C3.clampAngle(a);if(this._a===a)return;this._a=a;this._MarkSinCosAngleChanged()}OffsetAngle(a){a=+a;if(a===0||!this.IsRotatable())return;this._a=
C3.clampAngle(this._a+a);this._MarkSinCosAngleChanged()}_MarkSinCosAngleChanged(){this._flags|=FLAG_SIN_COS_ANGLE_CHANGED;if(this.HasChildren()){const children=this.GetChildren();for(let i=0,len=children.length;i<len;i++)children[i]._MarkSinCosAngleChanged()}}GetAngle(){if(this.GetTransformWithParentAngle())return C3.clampAngle(this.GetParent().GetAngle()+this._a);else return this._a}_MaybeUpdateSinCosAngle(){const flags=this._flags;if((flags&FLAG_SIN_COS_ANGLE_CHANGED)===0)return;const a=this.GetAngle();
this._sinA=Math.sin(a);this._cosA=Math.cos(a);this._flags=flags&~FLAG_SIN_COS_ANGLE_CHANGED}GetSinAngle(){this._MaybeUpdateSinCosAngle();return this._sinA}GetCosAngle(){this._MaybeUpdateSinCosAngle();return this._cosA}SetOriginX(x){this._ox=+x}OffsetOriginX(x){this._ox+=+x}GetOriginX(){return this._ox}SetOriginY(y){this._oy=+y}OffsetOriginY(y){this._oy+=+y}GetOriginY(){return this._oy}_SetColor(c){if(this._color.equals(c))return;if(this._color===DEFAULT_COLOR){this._color=C3.New(C3.Color,c);this._colorPremultiplied=
C3.New(C3.Color,c);this._colorPremultiplied.premultiply()}else if(c.equalsRgba(1,1,1,1)){this._color=DEFAULT_COLOR;this._colorPremultiplied=DEFAULT_COLOR}else{this._color.set(c);this._colorPremultiplied.set(c);this._colorPremultiplied.premultiply()}this._UpdateRendererStateGroup()}SetOpacity(o){o=C3.clamp(+o,0,1);if(this._color.a===o)return;tempColor.copyRgb(this._color);tempColor.a=o;this._SetColor(tempColor)}OffsetOpacity(o){this.SetOpacity(this.GetOpacity()+o)}GetOpacity(){return this._color.a}SetUnpremultipliedColor(c){if(this._color.equalsIgnoringAlpha(c))return;
tempColor.copyRgb(c);tempColor.a=this._color.a;this._SetColor(tempColor)}SetUnpremultipliedColorRGB(r,g,b){tempColor.setRgb(r,g,b);this.SetUnpremultipliedColor(tempColor)}OffsetUnpremultipliedColorRGB(r,g,b){if(r===0&&g===0&&b===0)return;tempColor.copyRgb(this._color);tempColor.r+=r;tempColor.g+=g;tempColor.b+=b;this.SetUnpremultipliedColor(tempColor)}GetUnpremultipliedColor(){return this._color}GetPremultipliedColor(){return this._colorPremultiplied}GetDestroyWithParent(){return(this._flags&FLAG_DESTROY_WITH_PARENT)!==
0}SetDestroyWithParent(d){this._SetFlag(FLAG_DESTROY_WITH_PARENT,d)}GetTransformWithParentX(){return(this._flags&FLAG_TRANSFORM_WITH_PARENT_X)!==0}SetTransformWithParentX(tpx){this._SetFlag(FLAG_TRANSFORM_WITH_PARENT_X,tpx)}GetTransformWithParentY(){return(this._flags&FLAG_TRANSFORM_WITH_PARENT_Y)!==0}GetTransformWithParentXOrY(){return(this._flags&(FLAG_TRANSFORM_WITH_PARENT_X|FLAG_TRANSFORM_WITH_PARENT_Y))!==0}SetTransformWithParentY(tpx){this._SetFlag(FLAG_TRANSFORM_WITH_PARENT_Y,tpx)}GetTransformWithParentWidth(){return(this._flags&
FLAG_TRANSFORM_WITH_PARENT_W)!==0}SetTransformWithParentWidth(tpw){this._SetFlag(FLAG_TRANSFORM_WITH_PARENT_W,tpw)}GetTransformWithParentHeight(){return(this._flags&FLAG_TRANSFORM_WITH_PARENT_H)!==0}SetTransformWithParentHeight(tph){this._SetFlag(FLAG_TRANSFORM_WITH_PARENT_H,tph)}GetTransformWithParentAngle(){return(this._flags&FLAG_TRANSFORM_WITH_PARENT_A)!==0}SetTransformWithParentAngle(tpa){this._SetFlag(FLAG_TRANSFORM_WITH_PARENT_A,tpa)}GetTransformWithParentZElevation(){return(this._flags&FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION)!==
0}SetTransformWithParentZElevation(tpz){this._SetFlag(FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION,tpz)}_ClearAllSceneGraphFlags(){this._flags&=~MASK_ALL_SCENE_GRAPH_FLAGS}AddChild(child,opts){if(child===this)return;if(child.HasParent())return;if(this._HasChildRecursive(child))return;if(this._HasAnyParent(child))return;const absX=child.GetX();const absY=child.GetY();const absW=child.GetWidth();const absH=child.GetHeight();const absA=child.GetAngle();const absZElevation=child.GetZElevation();child._SetParent(this);
child.SetTransformWithParentX(opts.transformX);child.SetTransformWithParentY(opts.transformY);child.SetTransformWithParentWidth(opts.transformWidth);child.SetTransformWithParentHeight(opts.transformHeight);child.SetTransformWithParentAngle(opts.transformAngle);child.SetTransformWithParentZElevation(opts.transformZElevation);child.SetDestroyWithParent(opts.destroyWithParent);if(opts.transformX)child._x=absX-this.GetX();if(opts.transformY)child._y=absY-this.GetY();if(opts.transformWidth)child._w=absW/
this.GetWidth();if(opts.transformHeight)child._h=absH/this.GetHeight();if(opts.transformAngle)child._a=absA-this.GetAngle();if(opts.transformZElevation)child._zElevation=absZElevation-this.GetZElevation();this._AddChildToSceneGraphInfo(child);this.SetBboxChanged()}RemoveChild(child){if(child.GetParent()!==this)return;const absX=child.GetX();const absY=child.GetY();const absW=child.GetWidth();const absH=child.GetHeight();const absA=child.GetAngle();const absZElevation=child.GetZElevation();child._SetParent(null);
child._ClearAllSceneGraphFlags();child.SetXY(absX,absY);child.SetSize(absW,absH);child.SetAngle(absA);child.SetZElevation(absZElevation);this._RemoveChildFromSceneGraphInfo(child);this.SetBboxChanged()}_ResetAllSceneGraphState(){for(const c of this.children())this.RemoveChild(c);const parent=this.GetParent();if(parent)parent.RemoveChild(this);this._ClearAllSceneGraphFlags()}HasParent(){return this.GetParent()!==null}GetParent(){const sgi=this._sceneGraphInfo;return sgi!==null?sgi.GetParent():null}GetTopParent(){let p=
this;while(p.HasParent())p=p.GetParent();return p}*parents(){let parent=this.GetParent();while(parent){yield parent;parent=parent.GetParent()}}HasChild(child){return this.GetChildren().includes(child)}HasChildren(){const sgi=this._sceneGraphInfo;return sgi!==null?sgi.HasChildren():false}GetChildren(){const sgi=this._sceneGraphInfo;return sgi!==null?sgi.GetChildren():EMPTY_ARRAY}children(){return this.GetChildren()}*allChildren(){for(const child of this.children()){yield child;yield*child.allChildren()}}GetChildCount(){return this.GetChildren().length}GetChildAt(index){const children=
this.GetChildren();index=Math.floor(+index);if(index<0||index>=children.length)return null;return children[index]}_CreateSceneGraphInfo(parent){if(!this._sceneGraphInfo)this._sceneGraphInfo=C3.New(C3.SceneGraphInfo,this);if(parent)this._sceneGraphInfo.SetParent(parent)}_GetSceneGraphInfo(){return this._sceneGraphInfo}_ReleaseSceneGraphInfo(){if(!this._sceneGraphInfo)return;this._sceneGraphInfo.Release();this._sceneGraphInfo=null}_SetParent(parent){if(parent){parent._CreateSceneGraphInfo(null);this._CreateSceneGraphInfo(parent)}else{if(this._sceneGraphInfo)this._sceneGraphInfo.SetParent(null);
if(!this.HasChildren())this._ReleaseSceneGraphInfo()}}_HasAnyParent(child){if(!this.HasParent())return false;const parent=this.GetParent();if(parent===child)return true;return parent._HasAnyParent(child)}_HasChildRecursive(child){if(this.HasChild(child))return true;for(const c of this.GetChildren())if(c._HasChildRecursive(child))return true;return false}_AddChildToSceneGraphInfo(child){this._sceneGraphInfo.GetChildren().push(child)}_RemoveChildFromSceneGraphInfo(child){const children=this._sceneGraphInfo.GetChildren();
const index=children.indexOf(child);if(index!==-1)children.splice(index,1);if(children.length===0&&!this.HasParent())this._ReleaseSceneGraphInfo();if(!child.HasChildren())child._ReleaseSceneGraphInfo()}GetSceneGraphChildrenExportData(){return this._sceneGraphChildrenExportData}_UpdateRendererStateGroup(){if(!enableUpdateRendererStateGroup)return;const renderer=this._runtime.GetRenderer();if(this._stateGroup)renderer.ReleaseStateGroup(this._stateGroup);this._stateGroup=renderer.AcquireStateGroup(renderer.GetTextureFillShaderProgram()||
"<default>",this.GetBlendMode(),this._colorPremultiplied,this.GetZElevation())}GetRendererStateGroup(){return this._stateGroup}HasDefaultColor(){return this._color===DEFAULT_COLOR}SetBlendMode(bm){bm=bm|0;if(bm<0||bm>31)throw new RangeError("invalid blend mode");if(this.GetBlendMode()===bm)return;this._flags=this._flags&~FLAG_BLEND_MODE_MASK|bm<<FLAG_BLEND_MODE_BIT_OFFSET;this._UpdateRendererStateGroup()}GetBlendMode(){return(this._flags&FLAG_BLEND_MODE_MASK)>>FLAG_BLEND_MODE_BIT_OFFSET}_SetLayer(layer){this._layer=
layer;if(this.GetZElevation()!==0)this._layer._SetAnyInstanceZElevated()}GetLayer(){return this._layer}GetLayout(){return this.GetLayer().GetLayout()}_SetZIndex(z){this._zIndex=z|0}GetZIndex(){this._layer._UpdateZIndices();return this._zIndex}_GetLastCachedZIndex(){return this._zIndex}_SetFlag(bit,enable){if(enable)this._flags|=bit;else this._flags&=~bit}IsVisible(){return(this._flags&FLAG_IS_VISIBLE)!==0}SetVisible(v){this._SetFlag(FLAG_IS_VISIBLE,v)}IsCollisionEnabled(){return(this._flags&FLAG_COLLISION_ENABLED)!==
0}SetCollisionEnabled(e){e=!!e;if(this.IsCollisionEnabled()===e)return;this._SetFlag(FLAG_COLLISION_ENABLED,e);if(e)this.SetBboxChanged();else this._RemoveFromCollisionCells()}SetSolidCollisionFilter(isInclusive,tags){this._SetFlag(FLAG_SOLID_FILTER_INCLUSIVE,isInclusive);if(this._solidFilterTags)this._solidFilterTags.clear();if(!tags.trim()){this._solidFilterTags=null;return}if(!this._solidFilterTags)this._solidFilterTags=new Set;for(const tag of tags.split(" "))if(tag)this._solidFilterTags.add(tag.toLowerCase())}IsSolidCollisionAllowed(solidTagSet){const isInclusive=
(this._flags&FLAG_SOLID_FILTER_INCLUSIVE)!==0;const filterTags=this._solidFilterTags;if(!solidTagSet||!filterTags)return!isInclusive;for(const tag of filterTags)if(solidTagSet.has(tag))return isInclusive;return!isInclusive}SetBboxChanged(){this._flags|=FLAG_BBOX_CHANGED|FLAG_COLLISION_CELL_CHANGED|FLAG_MESH_CHANGED;this._objectClass._SetAnyCollisionCellChanged(true);this._runtime.UpdateRender();if(this._layer.UsesRenderCells()){this.CalculateBbox(this._boundingBox,this._boundingQuad,true);this._flags&=
~FLAG_BBOX_CHANGED;this._UpdateRenderCell()}if((this._flags&FLAG_ENABLE_BBOX_CHANGED_EVENT)!==0)this._inst.Dispatcher().dispatchEvent(bboxChangeEvent);if(this._sceneGraphInfo!==null){const children=this._sceneGraphInfo.GetChildren();for(let i=0,len=children.length;i<len;++i)children[i].SetBboxChanged()}}CalculateBbox(bbox,bquad,includeMesh){const x=this.GetX();const y=this.GetY();const w=this.GetWidth();const h=this.GetHeight();const a=this.GetAngle();bbox.setWH(x-this._ox*w,y-this._oy*h,w,h);if(includeMesh&&
this.HasMesh())this._ExpandBboxForMesh(bbox);if(a===0)bquad.setFromRect(bbox);else{bbox.offset(-x,-y);bquad.setFromRotatedRectPrecalc(bbox,this.GetSinAngle(),this.GetCosAngle());bquad.offset(x,y);bquad.getBoundingBox(bbox)}bbox.normalize()}_UpdateBbox(){const flags=this._flags;if((flags&FLAG_BBOX_CHANGED)!==0){this.CalculateBbox(this._boundingBox,this._boundingQuad,true);this._flags=flags&~FLAG_BBOX_CHANGED}}GetBoundingBox(){this._UpdateBbox();return this._boundingBox}GetBoundingQuad(){this._UpdateBbox();
return this._boundingQuad}PixelRoundQuad(quad){const x=this.GetX();const y=this.GetY();const ox=Math.round(x)-x;const oy=Math.round(y)-y;if(ox===0&&oy===0)return quad;else{tempQuad.copy(quad);tempQuad.offset(ox,oy);return tempQuad}}OverwriteBoundingBox(box){this._boundingBox.copy(box);this._boundingQuad.setFromRect(this._boundingBox);this._flags&=~FLAG_BBOX_CHANGED;this._UpdateCollisionCell();this._UpdateRenderCell()}SetBboxChangeEventEnabled(e){this._SetFlag(FLAG_ENABLE_BBOX_CHANGED_EVENT,e)}IsBboxChangeEventEnabled(){return(this._flags&
FLAG_ENABLE_BBOX_CHANGED_EVENT)!==0}IsInViewport(viewport){return this.GetZElevation()===0?viewport.intersectsRect(this.GetBoundingBox()):this._IsInViewport_ZElevated()}_IsInViewport_ZElevated(){const layer=this.GetLayer();const totalZElevation=this.GetTotalZElevation();if(totalZElevation>=layer.GetCameraZ())return false;layer.GetViewportForZ(totalZElevation,tempRect);return tempRect.intersectsRect(this.GetBoundingBox())}SetSourceCollisionPoly(poly){this._sourceCollisionPoly=poly;this._DiscardTransformedCollisionPoly();
if(this.HasMesh())this._meshInfo.meshPoly=null}GetSourceCollisionPoly(){return this._sourceCollisionPoly}HasOwnCollisionPoly(){return this._sourceCollisionPoly!==null||this.HasMesh()}GetTransformedCollisionPoly(){return this._GetCustomTransformedCollisionPolyPrecalc(this.GetWidth(),this.GetHeight(),this.GetAngle(),this.GetSinAngle(),this.GetCosAngle())}GetCustomTransformedCollisionPoly(w,h,a){let sina=0;let cosa=1;if(a!==0){sina=Math.sin(a);cosa=Math.cos(a)}return this._GetCustomTransformedCollisionPolyPrecalc(w,
h,a,sina,cosa)}_GetCustomTransformedCollisionPolyPrecalc(w,h,a,sinA,cosA){let tpi=this._transformedPolyInfo;if(tpi===null){tpi={poly:C3.New(C3.CollisionPoly),width:NaN,height:NaN,angle:NaN};this._transformedPolyInfo=tpi}const transformedPoly=tpi.poly;if(tpi.width===w&&tpi.height===h&&tpi.angle===a)return transformedPoly;const sourcePoly=this._sourceCollisionPoly;if(this.HasMesh()){const ox=this.GetOriginX();const oy=this.GetOriginY();const sourceMesh=this.GetSourceMesh();let meshPoly=this._meshInfo.meshPoly;
if(!meshPoly){if(sourcePoly){tempCollisionPoly.copy(sourcePoly);tempCollisionPoly.offset(ox,oy)}else tempCollisionPoly.setDefaultPoints();meshPoly=sourceMesh.InsertPolyMeshVertices(tempCollisionPoly);this._meshInfo.meshPoly=meshPoly}sourceMesh.TransformCollisionPoly(meshPoly,transformedPoly);transformedPoly.offset(-ox,-oy);transformedPoly.transformPrecalc(w,h,sinA,cosA)}else if(sourcePoly){transformedPoly.copy(sourcePoly);transformedPoly.transformPrecalc(w,h,sinA,cosA)}else transformedPoly.setFromQuad(this.GetBoundingQuad(),
-this.GetX(),-this.GetY());tpi.width=w;tpi.height=h;tpi.angle=a;return transformedPoly}_DiscardTransformedCollisionPoly(){this.SetPhysicsBodyChanged(true);const tpi=this._transformedPolyInfo;if(tpi===null)return;tpi.width=NaN}CreateMesh(hsize,vsize){hsize=Math.floor(hsize);vsize=Math.floor(vsize);if(!this.GetInstance().GetPlugin().SupportsMesh())throw new Error("object does not support mesh");this.ReleaseMesh();this._meshInfo={sourceMesh:C3.New(C3.Gfx.Mesh,hsize,vsize),transformedMesh:C3.New(C3.Gfx.Mesh,
hsize,vsize),meshPoly:null}}HasMesh(){return this._meshInfo!==null}GetSourceMesh(){if(!this.HasMesh())throw new Error("no mesh");return this._meshInfo.sourceMesh}GetTransformedMesh(){if(!this.HasMesh())throw new Error("no mesh");return this._meshInfo.transformedMesh}SetMeshChanged(e){this._SetFlag(FLAG_MESH_CHANGED,e)}IsMeshChanged(){return(this._flags&FLAG_MESH_CHANGED)!==0}SetPhysicsBodyChanged(e){this._SetFlag(FLAG_PHYSICS_BODY_CHANGED,e)}IsPhysicsBodyChanged(){return(this._flags&FLAG_PHYSICS_BODY_CHANGED)!==
0}_ExpandBboxForMesh(bbox){const sourceMesh=this._meshInfo.sourceMesh;const minX=Math.min(sourceMesh.GetMinX(),0);const minY=Math.min(sourceMesh.GetMinY(),0);const maxX=Math.max(sourceMesh.GetMaxX(),1);const maxY=Math.max(sourceMesh.GetMaxY(),1);const w=bbox.width();const h=bbox.height();bbox.offsetLeft(minX*w);bbox.offsetTop(minY*h);bbox.offsetRight((maxX-1)*w);bbox.offsetBottom((maxY-1)*h)}ReleaseMesh(){if(!this._meshInfo)return;this._meshInfo.sourceMesh.Release();this._meshInfo.transformedMesh.Release();
this._meshInfo=null;this._DiscardTransformedCollisionPoly()}SetMeshPoint(col,row,opts){col=Math.floor(col);row=Math.floor(row);const mode=opts.mode||"absolute";if(!VALID_SET_MESH_POINT_MODES.has(mode))throw new Error("invalid mode");const isRelative=mode==="relative";let posx=opts.x;let posy=opts.y;let texu=typeof opts.u==="number"?opts.u:isRelative?0:-1;let texv=typeof opts.v==="number"?opts.v:isRelative?0:-1;if(!this.HasMesh())return false;const sourceMesh=this.GetSourceMesh();const p=sourceMesh.GetMeshPointAt(col,
row);if(p===null)return false;if(isRelative){posx+=col/(sourceMesh.GetHSize()-1);posy+=row/(sourceMesh.GetVSize()-1)}if(texu===-1&&!isRelative)texu=p.GetU();else{if(isRelative)texu+=col/(sourceMesh.GetHSize()-1);texu=C3.clamp(texu,0,1)}if(texv===-1&&!isRelative)texv=p.GetV();else{if(isRelative)texv+=row/(sourceMesh.GetVSize()-1);texv=C3.clamp(texv,0,1)}if(p.GetX()===posx&&p.GetY()===posy&&p.GetU()===texu&&p.GetV()===texv)return false;p.SetX(posx);p.SetY(posy);p.SetU(texu);p.SetV(texv);this._DiscardTransformedCollisionPoly();
return true}HasTilemap(){return this._inst.HasTilemap()}ContainsPoint(x,y){if(!this.GetBoundingBox().containsPoint(x,y))return false;if(!this.GetBoundingQuad().containsPoint(x,y))return false;if(this.HasTilemap())return this._inst.GetSdkInstance().TestPointOverlapTile(x,y);if(!this.HasOwnCollisionPoly())return true;return this.GetTransformedCollisionPoly().containsPoint(x-this.GetX(),y-this.GetY())}_IsCollisionCellChanged(){return(this._flags&FLAG_COLLISION_CELL_CHANGED)!==0}_UpdateCollisionCell(){if(!this._IsCollisionCellChanged()||
!this.IsCollisionEnabled())return;const bbox=this.GetBoundingBox();const grid=this._objectClass._GetCollisionCellGrid();const collisionCells=this._collisionCells;tempRect.set(grid.XToCell(bbox.getLeft()),grid.YToCell(bbox.getTop()),grid.XToCell(bbox.getRight()),grid.YToCell(bbox.getBottom()));if(collisionCells.equals(tempRect))return;const inst=this._inst;if(collisionCells===DEFAULT_COLLISION_CELLS){grid.Update(inst,null,tempRect);this._collisionCells=C3.New(C3.Rect,tempRect)}else{grid.Update(inst,
collisionCells,tempRect);collisionCells.copy(tempRect)}this._flags&=~FLAG_COLLISION_CELL_CHANGED}_RemoveFromCollisionCells(){const collisionCells=this._collisionCells;if(collisionCells===DEFAULT_COLLISION_CELLS)return;this._objectClass._GetCollisionCellGrid().Update(this._inst,collisionCells,null);this._collisionCells=DEFAULT_COLLISION_CELLS}_UpdateRenderCell(){const layer=this.GetLayer();if(!layer.UsesRenderCells())return;const renderGrid=layer.GetRenderGrid();const bbox=this.GetBoundingBox();const renderCells=
this._renderCells;tempRect.set(renderGrid.XToCell(bbox.getLeft()),renderGrid.YToCell(bbox.getTop()),renderGrid.XToCell(bbox.getRight()),renderGrid.YToCell(bbox.getBottom()));if(renderCells.equals(tempRect))return;const inst=this._inst;if(renderCells===DEFAULT_RENDER_CELLS){renderGrid.Update(inst,null,tempRect);this._renderCells=C3.New(C3.Rect,tempRect)}else{renderGrid.Update(inst,renderCells,tempRect);renderCells.copy(tempRect)}layer.SetRenderListStale()}_RemoveFromRenderCells(){const renderCells=
this._renderCells;if(renderCells===DEFAULT_RENDER_CELLS)return;this.GetLayer().GetRenderGrid().Update(this._inst,renderCells,null);this._renderCells=DEFAULT_RENDER_CELLS}GetRenderCellRange(){return this._renderCells}ZOrderMoveToTop(){const inst=this._inst;const layer=this._layer;const layerInstances=layer._GetInstances();if(layerInstances.length&&layerInstances[layerInstances.length-1]===inst)return;layer._RemoveInstance(inst,false);layer._AddInstance(inst,false);this._runtime.UpdateRender()}ZOrderMoveToBottom(){const inst=
this._inst;const layer=this._layer;const layerInstances=layer._GetInstances();if(layerInstances.length&&layerInstances[0]===inst)return;layer._RemoveInstance(inst,false);layer._PrependInstance(inst,false);this._runtime.UpdateRender()}ZOrderMoveToLayer(layerMove){const inst=this._inst;const curLayer=this._layer;if(curLayer.GetLayout()!==layerMove.GetLayout())throw new Error("layer from different layout");if(layerMove===curLayer)return;curLayer._RemoveInstance(inst,true);this._SetLayer(layerMove);layerMove._AddInstance(inst,
true);this._runtime.UpdateRender()}ZOrderMoveAdjacentToInstance(otherInst,isAfter){const inst=this._inst;const curLayer=this._layer;if(otherInst.GetUID()===inst.GetUID())return;const otherWi=otherInst.GetWorldInfo();if(!otherWi)throw new Error("expected world instance");const otherLayer=otherWi.GetLayer();let didChangeLayer=false;if(curLayer.GetIndex()!==otherLayer.GetIndex()){curLayer._RemoveInstance(inst,true);this._SetLayer(otherLayer);otherLayer._AddInstance(inst,true);didChangeLayer=true}const didChangeZOrder=
otherLayer.MoveInstanceAdjacent(inst,otherInst,!!isAfter);if(didChangeLayer||didChangeZOrder)this._runtime.UpdateRender()}GetInstanceEffectList(){return this._instanceEffectList}_SetHasAnyActiveEffect(e){this._SetFlag(FLAG_HAS_ANY_ACTIVE_EFFECT,e)}HasAnyActiveEffect(){return(this._flags&FLAG_HAS_ANY_ACTIVE_EFFECT)!==0}_SaveToJson(mode){const o={"x":this.GetX(),"y":this.GetY(),"w":this.GetWidth(),"h":this.GetHeight(),"l":this.GetLayer().GetSID(),"zi":this.GetZIndex()};if(this.GetZElevation()!==0)o["ze"]=
this.GetZElevation();if(this.GetAngle()!==0)o["a"]=this.GetAngle();if(!this.HasDefaultColor())o["c"]=this._color.toJSON();if(this.GetOriginX()!==.5)o["oX"]=this.GetOriginX();if(this.GetOriginY()!==.5)o["oY"]=this.GetOriginY();if(this.GetBlendMode()!==0)o["bm"]=this.GetBlendMode();if(!this.IsVisible())o["v"]=this.IsVisible();if(!this.IsCollisionEnabled())o["ce"]=this.IsCollisionEnabled();if(this.IsBboxChangeEventEnabled())o["be"]=this.IsBboxChangeEventEnabled();if(this._instanceEffectList)o["fx"]=
this._instanceEffectList._SaveToJson();const isSolidFilterInclusive=(this._flags&FLAG_SOLID_FILTER_INCLUSIVE)!==0;if(isSolidFilterInclusive)o["sfi"]=isSolidFilterInclusive;if(this._solidFilterTags)o["sft"]=[...this._solidFilterTags].join(" ");if(this._sceneGraphInfo&&mode!=="visual-state")o["sgi"]=this._sceneGraphInfo._SaveToJson();if(this.HasMesh())o["mesh"]=this.GetSourceMesh().SaveToJson();return o}_LoadFromJson(o,mode){enableUpdateRendererStateGroup=false;if(mode!=="visual-state")this._ResetAllSceneGraphState();
this.SetX(o["x"]);this.SetY(o["y"]);this.SetWidth(o["w"]);this.SetHeight(o["h"]);this._SetZIndex(o["zi"]);this.SetZElevation(o.hasOwnProperty("ze")?o["ze"]:0);this.SetAngle(o.hasOwnProperty("a")?o["a"]:0);if(o.hasOwnProperty("c"))tempColor.setFromJSON(o["c"]);else if(o.hasOwnProperty("o")){tempColor.copyRgb(this._color);tempColor.a=o["o"]}else tempColor.setRgba(1,1,1,1);this._SetColor(tempColor);this.SetOriginX(o.hasOwnProperty("oX")?o["oX"]:.5);this.SetOriginY(o.hasOwnProperty("oY")?o["oY"]:.5);
this.SetBlendMode(o.hasOwnProperty("bm")?o["bm"]:0);this.SetVisible(o.hasOwnProperty("v")?o["v"]:true);this.SetCollisionEnabled(o.hasOwnProperty("ce")?o["ce"]:true);this.SetBboxChangeEventEnabled(o.hasOwnProperty("be")?o["be"]:false);this.SetSolidCollisionFilter(o.hasOwnProperty("sfi")?o["sfi"]:false,o.hasOwnProperty("sft")?o["sft"]:"");if(this._instanceEffectList&&o.hasOwnProperty("fx"))this._instanceEffectList._LoadFromJson(o["fx"]);if(o.hasOwnProperty("sgi")&&mode!=="visual-state"){this._CreateSceneGraphInfo(null);
const sgi=this._sceneGraphInfo;const sgiData=o["sgi"];sgi._LoadFromJson(sgiData);const runtimeDispatcher=this.GetRuntime().Dispatcher();const onAfterLoad=()=>{runtimeDispatcher.removeEventListener("afterload",onAfterLoad);sgi._OnAfterLoad(sgiData)};runtimeDispatcher.addEventListener("afterload",onAfterLoad)}if(o.hasOwnProperty("mesh")){const meshData=o["mesh"];this.CreateMesh(meshData["cols"],meshData["rows"]);this.GetSourceMesh().LoadFromJson(meshData)}else this.ReleaseMesh();this.SetBboxChanged();
enableUpdateRendererStateGroup=true;this._UpdateRendererStateGroup()}}};


// c3/objects/behaviorType.js
'use strict';{const C3=self.C3;C3.BehaviorType=class BehaviorType extends C3.DefendedBase{constructor(objectClass,data){super();const runtime=objectClass.GetRuntime();const pluginManager=runtime.GetPluginManager();const BehaviorCtor=runtime.GetObjectReference(data[1]);if(!pluginManager.HasBehaviorByConstructorFunction(BehaviorCtor))pluginManager.CreateBehavior(data);this._runtime=runtime;this._objectClass=objectClass;this._behavior=pluginManager.GetBehaviorByConstructorFunction(BehaviorCtor);this._sdkType=
null;this._instSdkCtor=BehaviorCtor.Instance;this._sid=data[2];this._name=data[0];this._jsPropName=this._runtime.GetJsPropName(data[3]);this._sdkType=C3.New(BehaviorCtor.Type,this);this.OnCreate()}static Create(objectClass,behaviorTypeData){return C3.New(C3.BehaviorType,objectClass,behaviorTypeData)}Release(){this._runtime=null;this._behavior=null;this._sdkType.Release();this._sdkType=null;this._instSdkCtor=null}GetSdkType(){return this._sdkType}OnCreate(){this._sdkType.OnCreate()}GetRuntime(){return this._runtime}GetObjectClass(){return this._objectClass}GetBehavior(){return this._behavior}GetInstanceSdkCtor(){return this._instSdkCtor}GetName(){return this._name}GetSID(){return this._sid}GetJsPropName(){return this._jsPropName}}};


// c3/objects/behaviorInstance.js
'use strict';{const C3=self.C3;const IBehaviorInstance=self.IBehaviorInstance;C3.BehaviorInstance=class BehaviorInstance extends C3.DefendedBase{constructor(opts){super();this._runtime=opts.runtime;this._behaviorType=opts.behaviorType;this._behavior=this._behaviorType.GetBehavior();this._inst=opts.instance;this._index=opts.index;this._sdkInst=null;this._iScriptInterface=null;this._behavior._AddInstance(this._inst)}Release(){if(this._iScriptInterface){this._iScriptInterface._Release();this._iScriptInterface=
null}this._behavior._RemoveInstance(this._inst);this._sdkInst.Release();this._sdkInst=null;this._iScriptInterface=null;this._runtime=null;this._behaviorType=null;this._behavior=null;this._inst=null}_CreateSdkInstance(properties){if(this._sdkInst)throw new Error("already got sdk instance");this._sdkInst=C3.New(this._behaviorType.GetInstanceSdkCtor(),this,properties);this._InitScriptInterface()}GetSdkInstance(){return this._sdkInst}GetObjectInstance(){return this._inst}GetRuntime(){return this._runtime}GetBehaviorType(){return this._behaviorType}GetBehavior(){return this._behavior}_GetIndex(){return this._index}PostCreate(){this._sdkInst.PostCreate()}OnSpriteFrameChanged(prevFrame,
nextFrame){this._sdkInst.OnSpriteFrameChanged(prevFrame,nextFrame)}_GetDebuggerProperties(){return this._sdkInst.GetDebuggerProperties()}SaveToJson(){return this._sdkInst.SaveToJson()}LoadFromJson(o){return this._sdkInst.LoadFromJson(o)}static SortByTickSequence(a,b){const instA=a.GetObjectInstance();const instB=b.GetObjectInstance();const typeIndexA=instA.GetObjectClass().GetIndex();const typeIndexB=instB.GetObjectClass().GetIndex();if(typeIndexA!==typeIndexB)return typeIndexA-typeIndexB;const seqA=
instA.GetPUID();const seqB=instB.GetPUID();if(seqA!==seqB)return seqA-seqB;return a.GetBehaviorInstance()._GetIndex()-b.GetBehaviorInstance()._GetIndex()}_InitScriptInterface(){const DefaultScriptClass=IBehaviorInstance;const SdkScriptClass=this._sdkInst.GetScriptInterfaceClass();const ScriptInterfaceClass=SdkScriptClass||DefaultScriptClass;IBehaviorInstance._Init(this);this._iScriptInterface=new ScriptInterfaceClass;IBehaviorInstance._Init(null);if(SdkScriptClass&&!(this._iScriptInterface instanceof
DefaultScriptClass))throw new TypeError(`script interface class '${SdkScriptClass.name}' does not extend the right base class '${DefaultScriptClass.name}'`);}GetScriptInterface(){return this._iScriptInterface}}};


// c3/objects/effectList.js
'use strict';{const C3=self.C3;C3.EffectList=class EffectList extends C3.DefendedBase{constructor(owner,data){super();this._owner=owner;this._allEffectTypes=[];this._activeEffectTypes=[];this._effectTypesByName=new Map;this._effectParams=[];this._preservesOpaqueness=true;for(const d of data){const et=C3.New(C3.EffectType,this,d,this._allEffectTypes.length);this._allEffectTypes.push(et);this._effectTypesByName.set(et.GetName().toLowerCase(),et);if(d.length>=3)this._effectParams.push(this._LoadSingleEffectParameters(d[2]))}this.GetRuntime()._AddEffectList(this)}Release(){C3.clearArray(this._allEffectTypes);
C3.clearArray(this._activeEffectTypes);this._effectTypesByName.clear();C3.clearArray(this._effectParams);this._owner=null}PrependEffectTypes(arr){if(!arr.length)return;this._allEffectTypes=arr.concat(this._allEffectTypes);for(const et of arr)this._effectTypesByName.set(et.GetName().toLowerCase(),et);for(let i=0,len=this._allEffectTypes.length;i<len;++i)this._allEffectTypes[i]._SetIndex(i)}_LoadSingleEffectParameters(arr){const ret=arr.slice(0);for(let i=0,len=ret.length;i<len;++i){const p=ret[i];
if(Array.isArray(p)){const c=C3.New(C3.Color);c.setFromJSON(p);ret[i]=c}}return ret}GetOwner(){return this._owner}GetRuntime(){return this._owner.GetRuntime()}UpdateActiveEffects(){C3.clearArray(this._activeEffectTypes);let preservesOpaqueness=true;for(const et of this._allEffectTypes)if(et.IsActive()){this._activeEffectTypes.push(et);if(!et.GetShaderProgram().PreservesOpaqueness())preservesOpaqueness=false}this._preservesOpaqueness=preservesOpaqueness}GetAllEffectTypes(){return this._allEffectTypes}HasAnyEffectType(){return this._allEffectTypes.length>
0}GetEffectTypeByName(name){return this._effectTypesByName.get(name.toLowerCase())||null}GetEffectTypeByIndex(index){index=Math.floor(+index);if(index<0||index>=this._allEffectTypes.length)throw new RangeError("invalid effect type index");return this._allEffectTypes[index]}IsEffectIndexActive(index){return this.GetEffectTypeByIndex(index).IsActive()}SetEffectIndexActive(index,a){this.GetEffectTypeByIndex(index).SetActive(a)}GetActiveEffectTypes(){return this._activeEffectTypes}HasAnyActiveEffect(){return this._activeEffectTypes.length>
0}PreservesOpaqueness(){return this._preservesOpaqueness}GetEffectParametersForIndex(index){return this._effectParams[index]}static SaveFxParamToJson(param){if(param&&param instanceof C3.Color)return{"t":"color","v":param.toJSON()};else return param}static LoadFxParamFromJson(o){if(typeof o==="object"){const type=o["t"];if(type==="color"){const color=C3.New(C3.Color);color.setFromJSON(o["v"]);return color}else throw new Error("invalid effect parameter type");}else return o}static SaveFxParamsToJson(params){return params.map(C3.EffectList.SaveFxParamToJson)}static LoadFxParamsFromJson(arr){return arr.map(C3.EffectList.LoadFxParamFromJson)}SaveToJson(){return this._allEffectTypes.map(et=>
({"name":et.GetName(),"active":et.IsActive(),"params":C3.EffectList.SaveFxParamsToJson(this._effectParams[et.GetIndex()])}))}LoadFromJson(arr){for(const o of arr){const et=this.GetEffectTypeByName(o["name"]);if(!et)continue;et.SetActive(o["active"]);this._effectParams[et.GetIndex()]=C3.EffectList.LoadFxParamsFromJson(o["params"])}this.UpdateActiveEffects()}}};


// c3/objects/effectType.js
'use strict';{const C3=self.C3;C3.EffectType=class EffectType extends C3.DefendedBase{constructor(effectList,data,index){super();this._effectList=effectList;this._id=data[0];this._name=data[1];this._index=index;this._shaderProgram=null;this._isActive=true}Release(){this._effectList=null;this._shaderProgram=null}Clone(effectListOwner){const ret=C3.New(C3.EffectType,effectListOwner,[this._id,this._name],-1);ret._shaderProgram=this._shaderProgram;ret._isActive=this._isActive;return ret}_InitRenderer(renderer){const shaderProgram=
renderer.GetShaderProgramByName(this._id);if(!shaderProgram)throw new Error("failed to find shader program '"+this._id+"'");this._shaderProgram=shaderProgram}GetEffectList(){return this._effectList}GetName(){return this._name}_SetIndex(i){this._index=i}GetIndex(){return this._index}GetOwner(){return this._effectList.GetOwner()}GetRuntime(){return this._effectList.GetRuntime()}SetActive(a){this._isActive=!!a}IsActive(){return this._isActive}GetShaderProgram(){return this._shaderProgram}GetDefaultParameterValues(){const ret=
[];for(let i=0,len=this._shaderProgram.GetParameterCount();i<len;++i){const type=this._shaderProgram.GetParameterType(i);if(type==="float"||type==="percent")ret.push(0);else if(type==="color")ret.push(C3.New(C3.Color,1,1,1,1));else throw new TypeError("unknown effect parameter type");}return ret}}};


// c3/objects/instanceEffectList.js
'use strict';{const C3=self.C3;C3.InstanceEffectList=class InstanceEffectList extends C3.DefendedBase{constructor(inst,wi,data){super();this._inst=inst;this._wi=wi;this._effectList=inst.GetObjectClass().GetEffectList();this._activeEffectFlags=[];this._activeEffectTypes=[];this._preservesOpaqueness=true;this._effectParams=[];for(const et of this._effectList.GetAllEffectTypes())this._activeEffectFlags.push(true);this.UpdateActiveEffects()}Release(){C3.clearArray(this._activeEffectFlags);C3.clearArray(this._activeEffectTypes);
C3.clearArray(this._effectParams);this._inst=null;this._effectList=null}_LoadEffectParameters(data){for(const e of data)this._effectParams.push(this._LoadSingleEffectParameters(e))}_LoadSingleEffectParameters(arr){const ret=arr.slice(0);for(let i=0,len=ret.length;i<len;++i){const p=ret[i];if(Array.isArray(p)){const c=C3.New(C3.Color);c.setFromJSON(p);ret[i]=c}}return ret}LoadDefaultEffectParameters(){for(const effectType of this._effectList.GetAllEffectTypes())this._effectParams.push(effectType.GetDefaultParameterValues())}GetOwner(){return this._owner}GetEffectList(){return this._effectList}GetRuntime(){return this._inst.GetRuntime()}UpdateActiveEffects(){C3.clearArray(this._activeEffectTypes);
const allEffectTypes=this._effectList.GetAllEffectTypes();const activeEffectTypes=this._activeEffectTypes;const activeEffectFlags=this._activeEffectFlags;let preservesOpaqueness=true;for(let i=0,len=allEffectTypes.length;i<len;++i)if(activeEffectFlags[i]){const et=allEffectTypes[i];activeEffectTypes.push(et);if(!et.GetShaderProgram().PreservesOpaqueness())preservesOpaqueness=false}this._preservesOpaqueness=preservesOpaqueness;this._wi._SetHasAnyActiveEffect(!!activeEffectTypes.length)}GetActiveEffectTypes(){return this._activeEffectTypes}GetEffectParametersForIndex(index){return this._effectParams[index]}PreservesOpaqueness(){return this._preservesOpaqueness}HasAnyActiveBackgroundBlendingEffect(){return this._activeEffectTypes.some(et=>
et.GetShaderProgram().UsesDest())}IsEffectIndexActive(i){return this._activeEffectFlags[i]}SetEffectIndexActive(i,e){this._activeEffectFlags[i]=!!e}GetAllEffectTypes(){return this._effectList.GetAllEffectTypes()}_SaveToJson(){return this._effectList.GetAllEffectTypes().map(et=>({"name":et.GetName(),"active":this._activeEffectFlags[et.GetIndex()],"params":C3.EffectList.SaveFxParamsToJson(this._effectParams[et.GetIndex()])}))}_LoadFromJson(arr){for(const o of arr){const et=this._effectList.GetEffectTypeByName(o["name"]);
if(!et)continue;this._activeEffectFlags[et.GetIndex()]=o["active"];this._effectParams[et.GetIndex()]=C3.EffectList.LoadFxParamsFromJson(o["params"])}this.UpdateActiveEffects()}}};


// c3/collisions/collisionEngine.js
'use strict';{const C3=self.C3;const tempCandidates=[];const tileCollRectCandidates=[];const tempJumpthruRet=[];const tempPolyA=C3.New(C3.CollisionPoly);const tempPolyB=C3.New(C3.CollisionPoly);const tempQuad=C3.New(C3.Quad);const tempRect=C3.New(C3.Rect);const tempRect2=C3.New(C3.Rect);C3.CollisionEngine=class CollisionEngine extends C3.DefendedBase{constructor(runtime){super();this._runtime=runtime;this._registeredCollisions=[];this._collisionCheckCount=0;this._collisionCheckSec=0;this._polyCheckCount=
0;this._polyCheckSec=0}Release(){this._runtime=null}_Update1sStats(){this._collisionCheckSec=this._collisionCheckCount;this._collisionCheckCount=0;this._polyCheckSec=this._polyCheckCount;this._polyCheckCount=0}Get1secCollisionChecks(){return this._collisionCheckSec}Get1secPolyChecks(){return this._polyCheckSec}RegisterCollision(a,b){const aw=a.GetWorldInfo();const bw=b.GetWorldInfo();if(!aw||!bw)return;if(!aw.IsCollisionEnabled()||!bw.IsCollisionEnabled())return;this._registeredCollisions.push([a,
b])}AddRegisteredCollisionCandidates(inst,otherType,arr){for(const [a,b]of this._registeredCollisions){let otherInst=null;if(inst===a)otherInst=b;else if(inst===b)otherInst=a;else continue;if(!otherInst.BelongsToObjectClass(otherType))continue;if(!arr.includes(otherInst))arr.push(otherInst)}}CheckRegisteredCollision(a,b){if(!this._registeredCollisions.length)return false;for(const [c,d]of this._registeredCollisions)if(a===c&&b===d||a===d&&b===c)return true;return false}ClearRegisteredCollisions(){C3.clearArray(this._registeredCollisions)}TestOverlap(a,
b){if(!a||!b||a===b)return false;const aw=a.GetWorldInfo();const bw=b.GetWorldInfo();if(!aw.IsCollisionEnabled()||!bw.IsCollisionEnabled())return false;this._collisionCheckCount++;const layerA=aw.GetLayer();const layerB=bw.GetLayer();const areLayerTransformsCompatible=layerA.IsTransformCompatibleWith(layerB);if(areLayerTransformsCompatible)return this._TestOverlap_SameLayers(aw,bw);else return this._TestOverlap_DifferentLayers(aw,bw)}_TestOverlap_SameLayers(aw,bw){if(!aw.GetBoundingBox().intersectsRect(bw.GetBoundingBox()))return false;
this._polyCheckCount++;if(!aw.GetBoundingQuad().intersectsQuad(bw.GetBoundingQuad()))return false;if(aw.HasTilemap()&&bw.HasTilemap())return false;if(aw.HasTilemap())return this.TestTilemapOverlap(aw,bw);else if(bw.HasTilemap())return this.TestTilemapOverlap(bw,aw);if(!aw.HasOwnCollisionPoly()&&!bw.HasOwnCollisionPoly())return true;const polyA=aw.GetTransformedCollisionPoly();const polyB=bw.GetTransformedCollisionPoly();return polyA.intersectsPoly(polyB,bw.GetX()-aw.GetX(),bw.GetY()-aw.GetY())}_TestOverlap_DifferentLayers(aw,
bw){const layerA=aw.GetLayer();const layerB=bw.GetLayer();tempPolyA.copy(aw.GetTransformedCollisionPoly());tempPolyB.copy(bw.GetTransformedCollisionPoly());const ptsArrA=tempPolyA.pointsArr();for(let i=0,len=ptsArrA.length;i<len;i+=2){const j=i+1;const x=ptsArrA[i];const y=ptsArrA[j];const [lx,ly]=layerA.LayerToCanvasCss(x+aw.GetX(),y+aw.GetY());ptsArrA[i]=lx;ptsArrA[j]=ly}const ptsArrB=tempPolyB.pointsArr();for(let i=0,len=ptsArrB.length;i<len;i+=2){const j=i+1;const x=ptsArrB[i];const y=ptsArrB[j];
const [lx,ly]=layerB.LayerToCanvasCss(x+bw.GetX(),y+bw.GetY());ptsArrB[i]=lx;ptsArrB[j]=ly}tempPolyA.setBboxChanged();tempPolyB.setBboxChanged();this._polyCheckCount++;return tempPolyA.intersectsPoly(tempPolyB,0,0)}TestTilemapOverlap(tmWi,wi){const bbox=wi.GetBoundingBox();const tmX=tmWi.GetX();const tmY=tmWi.GetY();const tmSdkInst=tmWi.GetInstance().GetSdkInstance();const instX=wi.GetX();const instY=wi.GetY();const instHasPoly=wi.HasOwnCollisionPoly();const instQuad=wi.GetBoundingQuad();const collRects=
tileCollRectCandidates;tmSdkInst.GetCollisionRectCandidates(bbox,collRects);for(let i=0,len=collRects.length;i<len;++i){const c=collRects[i];const rc=c.GetRect();this._collisionCheckCount++;if(bbox.intersectsRectOffset(rc,tmX,tmY)){tempQuad.setFromRect(rc);tempQuad.offset(tmX,tmY);if(tempQuad.intersectsQuad(instQuad))if(instHasPoly){const instPoly=wi.GetTransformedCollisionPoly();const tilePoly=c.GetPoly();if(tilePoly){this._polyCheckCount++;if(tilePoly.intersectsPoly(instPoly,instX-(tmX+rc.getLeft()),
instY-(tmY+rc.getTop()))){C3.clearArray(collRects);return true}}else{tempPolyA.setFromQuad(tempQuad,0,0);if(tempPolyA.intersectsPoly(instPoly,instX,instY)){C3.clearArray(collRects);return true}}}else{const tilePoly=c.GetPoly();if(tilePoly){tempPolyA.setFromQuad(instQuad,0,0);if(tilePoly.intersectsPoly(tempPolyA,-(tmX+rc.getLeft()),-(tmY+rc.getTop()))){C3.clearArray(collRects);return true}}else{C3.clearArray(collRects);return true}}}}C3.clearArray(collRects);return false}TestAndSelectCanvasPointOverlap(objectClass,
ptx,pty,isInverted){const sol=objectClass.GetCurrentSol();const currentEvent=this._runtime.GetCurrentEvent();if(!currentEvent)throw new Error("cannot call outside event");const isOrBlock=currentEvent.IsOrBlock();if(sol.IsSelectAll()){if(!isInverted){sol._SetSelectAll(false);C3.clearArray(sol._GetOwnInstances())}for(const inst of objectClass.GetInstances()){const wi=inst.GetWorldInfo();const layer=wi.GetLayer();const [lx,ly]=layer.CanvasCssToLayer(ptx,pty,wi.GetTotalZElevation());if(wi.ContainsPoint(lx,
ly))if(isInverted)return false;else sol._PushInstance(inst);else if(isOrBlock)sol._PushElseInstance(inst)}}else{const arr=isOrBlock?sol._GetOwnElseInstances():sol._GetOwnInstances();let j=0;for(let i=0,len=arr.length;i<len;++i){const inst=arr[i];const wi=inst.GetWorldInfo();const layer=wi.GetLayer();const [lx,ly]=layer.CanvasCssToLayer(ptx,pty,wi.GetTotalZElevation());if(wi.ContainsPoint(lx,ly))if(isInverted)return false;else if(isOrBlock)sol._PushInstance(inst);else arr[j++]=inst;else if(isOrBlock)arr[j++]=
inst}if(!isInverted)arr.length=j}objectClass.ApplySolToContainer();if(isInverted)return true;else return sol.HasAnyInstances()}GetCollisionCandidates(layer,rtype,bbox,candidates){const isParallaxed=layer?layer.GetParallaxX()!==1||layer.GetParallaxY()!==1:false;if(rtype.IsFamily())for(const memberType of rtype.GetFamilyMembers())if(isParallaxed||memberType.IsAnyInstanceParallaxed())C3.appendArray(candidates,memberType.GetInstances());else{memberType._UpdateAllCollisionCells();memberType._GetCollisionCellGrid().QueryRange(bbox,
candidates)}else if(isParallaxed||rtype.IsAnyInstanceParallaxed())C3.appendArray(candidates,rtype.GetInstances());else{rtype._UpdateAllCollisionCells();rtype._GetCollisionCellGrid().QueryRange(bbox,candidates)}}GetObjectClassesCollisionCandidates(layer,objectClasses,bbox,candidates){for(const objectClass of objectClasses)this.GetCollisionCandidates(layer,objectClass,bbox,candidates)}GetSolidCollisionCandidates(layer,bbox,candidates){const solidBehavior=this._runtime.GetSolidBehavior();if(!solidBehavior)return;
this.GetObjectClassesCollisionCandidates(layer,solidBehavior.GetObjectClasses(),bbox,candidates)}GetJumpthruCollisionCandidates(layer,bbox,candidates){const jumpthruBehavior=this._runtime.GetJumpthruBehavior();if(!jumpthruBehavior)return;this.GetObjectClassesCollisionCandidates(layer,jumpthruBehavior.GetObjectClasses(),bbox,candidates)}IsSolidCollisionAllowed(solidInst,inst){return solidInst._IsSolidEnabled()&&(!inst||inst.GetWorldInfo().IsSolidCollisionAllowed(solidInst.GetSavedDataMap().get("solidTags")))}TestOverlapSolid(inst){const wi=
inst.GetWorldInfo();this.GetSolidCollisionCandidates(wi.GetLayer(),wi.GetBoundingBox(),tempCandidates);for(const s of tempCandidates){if(!this.IsSolidCollisionAllowed(s,inst))continue;if(this.TestOverlap(inst,s)){C3.clearArray(tempCandidates);return s}}C3.clearArray(tempCandidates);return null}TestRectOverlapSolid(rect,inst){this.GetSolidCollisionCandidates(null,rect,tempCandidates);for(const s of tempCandidates){if(!this.IsSolidCollisionAllowed(s,inst))continue;if(this.TestRectOverlap(rect,s)){C3.clearArray(tempCandidates);
return s}}C3.clearArray(tempCandidates);return null}TestOverlapJumpthru(inst,all){let ret=null;if(all){ret=tempJumpthruRet;C3.clearArray(ret)}const wi=inst.GetWorldInfo();this.GetJumpthruCollisionCandidates(wi.GetLayer(),wi.GetBoundingBox(),tempCandidates);for(const j of tempCandidates){if(!j._IsJumpthruEnabled())continue;if(this.TestOverlap(inst,j))if(all)ret.push(j);else{C3.clearArray(tempCandidates);return j}}C3.clearArray(tempCandidates);return ret}PushOut(inst,xdir,ydir,dist,otherInst){dist=
dist||50;const wi=inst.GetWorldInfo();const oldX=wi.GetX();const oldY=wi.GetY();for(let i=0;i<dist;++i){wi.SetXY(oldX+xdir*i,oldY+ydir*i);wi.SetBboxChanged();if(!this.TestOverlap(inst,otherInst))return true}wi.SetXY(oldX,oldY);wi.SetBboxChanged();return false}PushOutSolid(inst,xdir,ydir,dist,includeJumpthrus,specificJumpthru){dist=dist||50;const wi=inst.GetWorldInfo();const oldX=wi.GetX();const oldY=wi.GetY();let lastOverlapped=null;let secondLastOverlapped=null;for(let i=0;i<dist;++i){wi.SetXY(oldX+
xdir*i,oldY+ydir*i);wi.SetBboxChanged();if(!this.TestOverlap(inst,lastOverlapped)){lastOverlapped=this.TestOverlapSolid(inst);if(lastOverlapped)secondLastOverlapped=lastOverlapped;else{if(includeJumpthrus){if(specificJumpthru)lastOverlapped=this.TestOverlap(inst,specificJumpthru)?specificJumpthru:null;else lastOverlapped=this.TestOverlapJumpthru(inst);if(lastOverlapped)secondLastOverlapped=lastOverlapped}if(!lastOverlapped){if(secondLastOverlapped)this.PushInFractional(inst,xdir,ydir,secondLastOverlapped,
16,true);return true}}}}wi.SetXY(oldX,oldY);wi.SetBboxChanged();return false}PushOutSolidAxis(inst,xdir,ydir,dist){dist=dist||50;const wi=inst.GetWorldInfo();const oldX=wi.GetX();const oldY=wi.GetY();let lastOverlapped=null;let secondLastOverlapped=null;for(let i=0;i<dist;++i)for(let which=0;which<2;++which){const sign=which*2-1;wi.SetXY(oldX+xdir*i*sign,oldY+ydir*i*sign);wi.SetBboxChanged();if(!this.TestOverlap(inst,lastOverlapped)){lastOverlapped=this.TestOverlapSolid(inst);if(lastOverlapped)secondLastOverlapped=
lastOverlapped;else{if(secondLastOverlapped)this.PushInFractional(inst,xdir*sign,ydir*sign,secondLastOverlapped,16,true);return true}}}wi.SetXY(oldX,oldY);wi.SetBboxChanged();return false}PushInFractional(inst,xdir,ydir,otherInst,limit,includeAnySolid){let divisor=2;let forward=false;let overlapping=false;const wi=inst.GetWorldInfo();let bestX=wi.GetX();let bestY=wi.GetY();while(divisor<=limit){const frac=1/divisor;divisor*=2;wi.OffsetXY(xdir*frac*(forward?1:-1),ydir*frac*(forward?1:-1));wi.SetBboxChanged();
if(this.TestOverlap(inst,otherInst)||includeAnySolid&&this.TestOverlapSolid(inst)){forward=true;overlapping=true}else{forward=false;overlapping=false;bestX=wi.GetX();bestY=wi.GetY()}}if(overlapping){wi.SetXY(bestX,bestY);wi.SetBboxChanged()}}PushOutSolidNearest(inst,maxDist=100){let dist=0;const wi=inst.GetWorldInfo();const oldX=wi.GetX();const oldY=wi.GetY();let dir=0;let lastOverlapped=this.TestOverlapSolid(inst);if(!lastOverlapped)return true;while(dist<=maxDist){let dx=0;let dy=0;switch(dir){case 0:dx=
0;dy=-1;dist++;break;case 1:dx=1;dy=-1;break;case 2:dx=1;dy=0;break;case 3:dx=1;dy=1;break;case 4:dx=0;dy=1;break;case 5:dx=-1;dy=1;break;case 6:dx=-1;dy=0;break;case 7:dx=-1;dy=-1;break}dir=(dir+1)%8;wi.SetXY(Math.floor(oldX+dx*dist),Math.floor(oldY+dy*dist));wi.SetBboxChanged();if(!this.TestOverlap(inst,lastOverlapped)){lastOverlapped=this.TestOverlapSolid(inst);if(!lastOverlapped)return true}}wi.SetXY(oldX,oldY);wi.SetBboxChanged();return false}CalculateBounceAngle(inst,startX,startY,otherInst){const wi=
inst.GetWorldInfo();const oldX=wi.GetX();const oldY=wi.GetY();const radius=Math.max(10,C3.distanceTo(startX,startY,oldX,oldY));const startAngle=C3.angleTo(startX,startY,oldX,oldY);const firstInst=otherInst||this.TestOverlapSolid(inst);if(!firstInst)return C3.clampAngle(startAngle+Math.PI);let curInst=firstInst;let anticlockwiseFreeAngle=0;let clockwiseFreeAngle=0;const increment=C3.toRadians(5);let i;for(i=1;i<36;++i){const curAngle=startAngle-i*increment;wi.SetXY(startX+Math.cos(curAngle)*radius,
startY+Math.sin(curAngle)*radius);wi.SetBboxChanged();if(!this.TestOverlap(inst,curInst)){curInst=otherInst?null:this.TestOverlapSolid(inst);if(!curInst){anticlockwiseFreeAngle=curAngle;break}}}if(i===36)anticlockwiseFreeAngle=C3.clampAngle(startAngle+Math.PI);curInst=firstInst;for(i=1;i<36;++i){const curAngle=startAngle+i*increment;wi.SetXY(startX+Math.cos(curAngle)*radius,startY+Math.sin(curAngle)*radius);wi.SetBboxChanged();if(!this.TestOverlap(inst,curInst)){curInst=otherInst?null:this.TestOverlapSolid(inst);
if(!curInst){clockwiseFreeAngle=curAngle;break}}}if(i===36)clockwiseFreeAngle=C3.clampAngle(startAngle+Math.PI);wi.SetXY(oldX,oldY);wi.SetBboxChanged();if(clockwiseFreeAngle===anticlockwiseFreeAngle)return clockwiseFreeAngle;const halfDiff=C3.angleDiff(clockwiseFreeAngle,anticlockwiseFreeAngle)/2;let normal;if(C3.angleClockwise(clockwiseFreeAngle,anticlockwiseFreeAngle))normal=C3.clampAngle(anticlockwiseFreeAngle+halfDiff+Math.PI);else normal=C3.clampAngle(clockwiseFreeAngle+halfDiff);const vx=Math.cos(startAngle);
const vy=Math.sin(startAngle);const nx=Math.cos(normal);const ny=Math.sin(normal);const v_dot_n=vx*nx+vy*ny;const rx=vx-2*v_dot_n*nx;const ry=vy-2*v_dot_n*ny;return C3.angleTo(0,0,rx,ry)}TestSegmentOverlap(x1,y1,x2,y2,inst){if(!inst)return false;const wi=inst.GetWorldInfo();if(!wi.IsCollisionEnabled())return false;this._collisionCheckCount++;tempRect.set(Math.min(x1,x2),Math.min(y1,y2),Math.max(x1,x2),Math.max(y1,y2));if(!wi.GetBoundingBox().intersectsRect(tempRect))return false;if(inst.HasTilemap())return this._TestSegmentOverlapTilemap(x1,
y1,x2,y2,inst,wi);this._polyCheckCount++;if(!wi.GetBoundingQuad().intersectsSegment(x1,y1,x2,y2))return false;if(!wi.HasOwnCollisionPoly())return true;const poly=wi.GetTransformedCollisionPoly();return poly.intersectsSegment(wi.GetX(),wi.GetY(),x1,y1,x2,y2)}_TestSegmentOverlapTilemap(x1,y1,x2,y2,inst,wi){const tmX=wi.GetX();const tmY=wi.GetY();const sdkInst=inst.GetSdkInstance();const collRects=tileCollRectCandidates;tempRect2.set(x1,y1,x2,y2);tempRect2.normalize();sdkInst.GetCollisionRectCandidates(tempRect2,
collRects);for(let i=0,len=collRects.length;i<len;++i){const c=collRects[i];const tileRc=c.GetRect();this._collisionCheckCount++;if(tempRect.intersectsRectOffset(tileRc,tmX,tmY)){tempQuad.setFromRect(tileRc);tempQuad.offset(tmX,tmY);if(tempQuad.intersectsSegment(x1,y1,x2,y2)){const tilePoly=c.GetPoly();if(tilePoly){this._polyCheckCount++;if(tilePoly.intersectsSegment(tmX+tileRc.getLeft(),tmY+tileRc.getTop(),x1,y1,x2,y2)){C3.clearArray(collRects);return true}}else{C3.clearArray(collRects);return true}}}}C3.clearArray(collRects);
return false}TestRectOverlap(rect,inst){if(!inst)return false;const wi=inst.GetWorldInfo();if(!wi.IsCollisionEnabled())return false;this._collisionCheckCount++;if(!wi.GetBoundingBox().intersectsRect(rect))return false;if(inst.HasTilemap())return this._TestRectOverlapTilemap(rect,inst,wi);this._polyCheckCount++;tempQuad.setFromRect(rect);if(!wi.GetBoundingQuad().intersectsQuad(tempQuad))return false;if(!wi.HasOwnCollisionPoly())return true;const polyA=tempPolyA;polyA.setFromRect(rect,wi.GetX(),wi.GetY());
const polyB=wi.GetTransformedCollisionPoly();return polyA.intersectsPoly(polyB,0,0)}_TestRectOverlapTilemap(rect,inst,wi){const tmX=wi.GetX();const tmY=wi.GetY();const sdkInst=inst.GetSdkInstance();const collRects=tileCollRectCandidates;sdkInst.GetCollisionRectCandidates(rect,collRects);for(let i=0,len=collRects.length;i<len;++i){const c=collRects[i];const tileRc=c.GetRect();this._collisionCheckCount++;if(rect.intersectsRectOffset(tileRc,tmX,tmY)){const tilePoly=c.GetPoly();if(tilePoly){this._polyCheckCount++;
tempPolyA.setFromRect(rect,0,0);if(tilePoly.intersectsPoly(tempPolyA,-(tmX+tileRc.getLeft()),-(tmY+tileRc.getTop()))){C3.clearArray(collRects);return true}}else{C3.clearArray(collRects);return true}}}C3.clearArray(collRects);return false}TestRayIntersectsInstance(inst,ray){if(!inst)return;const wi=inst.GetWorldInfo();if(!wi.IsCollisionEnabled())return;this._collisionCheckCount++;if(!wi.GetBoundingBox().intersectsRect(ray.rect))return;if(inst.HasTilemap()){this._TestRayIntersectsTilemap(inst,wi,ray);
return}this._polyCheckCount++;if(wi.HasOwnCollisionPoly())ray.TestInstancePoly(inst,wi.GetX(),wi.GetY(),wi.GetTransformedCollisionPoly());else ray.TestInstanceQuad(inst,wi.GetBoundingQuad())}_TestRayIntersectsTilemap(inst,wi,ray){const xOffset=wi.GetX();const yOffset=wi.GetY();const collRects=tileCollRectCandidates;inst.GetSdkInstance().GetCollisionRectCandidates(ray.rect,collRects);for(let i=0,l=collRects.length;i<l;i++){const c=collRects[i];const tileRc=c.GetRect();this._collisionCheckCount++;if(ray.rect.intersectsRectOffset(tileRc,
xOffset,yOffset)){const tilePoly=c.GetPoly();this._polyCheckCount++;if(tilePoly)ray.TestInstancePoly(inst,xOffset+tileRc.getLeft(),yOffset+tileRc.getTop(),tilePoly);else ray.TestInstanceRect(inst,wi.GetX(),wi.GetY(),tileRc)}}C3.clearArray(collRects)}}};


// c3/collisions/sparseGrid.js
'use strict';{const C3=self.C3;C3.SparseGrid=class SparseGrid extends C3.DefendedBase{constructor(cellWidth,cellHeight){super();this._cellWidth=cellWidth;this._cellHeight=cellHeight;this._cells=C3.New(C3.PairMap)}Release(){this._cells.Release();this._cells=null}GetCell(x,y,createIfMissing){let ret=this._cells.Get(x,y);if(ret)return ret;else if(createIfMissing){ret=C3.New(C3.GridCell,this,x,y);this._cells.Set(x,y,ret);return ret}else return null}XToCell(x){const ret=Math.floor(x/this._cellWidth);return isFinite(ret)?
ret:0}YToCell(y){const ret=Math.floor(y/this._cellHeight);return isFinite(ret)?ret:0}Update(inst,oldRange,newRange){if(oldRange)for(let x=oldRange.getLeft(),lenx=oldRange.getRight();x<=lenx;++x)for(let y=oldRange.getTop(),leny=oldRange.getBottom();y<=leny;++y){if(newRange&&newRange.containsPoint(x,y))continue;const cell=this.GetCell(x,y,false);if(!cell)continue;cell.Remove(inst);if(cell.IsEmpty())this._cells.Delete(x,y)}if(newRange)for(let x=newRange.getLeft(),lenx=newRange.getRight();x<=lenx;++x)for(let y=
newRange.getTop(),leny=newRange.getBottom();y<=leny;++y){if(oldRange&&oldRange.containsPoint(x,y))continue;this.GetCell(x,y,true).Insert(inst)}}QueryRange(rc,result){let x=this.XToCell(rc.getLeft());const ystart=this.YToCell(rc.getTop());const lenx=this.XToCell(rc.getRight());const leny=this.YToCell(rc.getBottom());if(!isFinite(lenx)||!isFinite(leny))return;for(;x<=lenx;++x)for(let y=ystart;y<=leny;++y){const cell=this.GetCell(x,y,false);if(!cell)continue;cell.Dump(result)}}}};


// c3/collisions/gridCell.js
'use strict';{const C3=self.C3;C3.GridCell=class GridCell extends C3.DefendedBase{constructor(grid,x,y){super();this._grid=grid;this._x=x;this._y=y;this._instances=C3.New(C3.ArraySet)}Release(){this._instances.Release();this._instances=null;this._grid=null}IsEmpty(){return this._instances.IsEmpty()}Insert(inst){this._instances.Add(inst)}Remove(inst){this._instances.Delete(inst)}Dump(result){C3.appendArray(result,this._instances.GetArray())}}};


// c3/collisions/ray.js
'use strict';{const C3=self.C3;const PADDING=1E-6;const NO_HIT=2;C3.Ray=class Ray{constructor(){this.x1=0;this.y1=0;this.x2=0;this.y2=0;this.dx=0;this.dy=0;this.rect=new C3.Rect;this.hitFraction=NO_HIT;this.hitUid=null;this.hitNormal=0;this.hitNormalDx=0;this.hitNormalDy=0;this.hitX=0;this.hitY=0;this.distance=0;this.normalX=1;this.normalY=0;this.reflectionX=1;this.reflectionY=0}DidCollide(){return this.hitFraction<1+PADDING}Set(x1,y1,x2,y2){this.x1=x1;this.y1=y1;this.x2=x2;this.y2=y2;this.dx=x2-
x1;this.dy=y2-y1;this.rect.set(x1,y1,x2,y2);this.rect.normalize();this.hitFraction=NO_HIT;this.hitUid=null;this.hitNormal=0;this.hitNormalDx=0;this.hitNormalDy=0;this.hitX=0;this.hitY=0;this.distance=0;this.normalX=1;this.normalY=0;this.reflectionX=1;this.reflectionY=0;return this}Complete(){if(this.DidCollide()===false)return;const dx=this.dx*this.hitFraction;const dy=this.dy*this.hitFraction;const length=Math.sqrt(dx*dx+dy*dy);const dirx=dx/length;const diry=dy/length;this.distance=length-PADDING;
this.hitX=this.x1+dirx*this.distance;this.hitY=this.y1+diry*this.distance;this.hitNormal=Math.atan2(this.hitNormalDy,this.hitNormalDx)+Math.PI/2;this.normalX=Math.cos(this.hitNormal);this.normalY=Math.sin(this.hitNormal);const dot=dirx*this.normalX+diry*this.normalY;this.reflectionX=dirx-2*this.normalX*dot;this.reflectionY=diry-2*this.normalY*dot;if(dot>0){const PI=Math.PI;this.hitNormal=C3.clampAngle(this.hitNormal+PI);this.normalX=-this.normalX;this.normalY=-this.normalY}}TestInstanceSegment(inst,
sx1,sy1,sx2,sy2){const t=C3.rayIntersect(this.x1,this.y1,this.x2,this.y2,sx1,sy1,sx2,sy2);if(t>=0&&t<this.hitFraction){this.hitFraction=t;this.hitUid=inst.GetUID();this.hitNormalDx=sx1-sx2;this.hitNormalDy=sy1-sy2}}TestInstanceRect(inst,offX,offY,rect){const lt=offX+rect.getLeft(),rt=offX+rect.getRight(),tp=offY+rect.getTop(),bm=offY+rect.getBottom();this.TestInstanceSegment(inst,lt,tp,rt,tp);this.TestInstanceSegment(inst,rt,tp,rt,bm);this.TestInstanceSegment(inst,rt,bm,lt,bm);this.TestInstanceSegment(inst,
lt,bm,lt,tp)}TestInstanceQuad(inst,quad){const tlX=quad.getTlx(),tlY=quad.getTly(),trX=quad.getTrx(),trY=quad.getTry(),brX=quad.getBrx(),brY=quad.getBry(),blX=quad.getBlx(),blY=quad.getBly();this.TestInstanceSegment(inst,tlX,tlY,trX,trY);this.TestInstanceSegment(inst,trX,trY,brX,brY);this.TestInstanceSegment(inst,brX,brY,blX,blY);this.TestInstanceSegment(inst,blX,blY,tlX,tlY)}TestInstancePoly(inst,offX,offY,poly){const points=poly.pointsArr();for(let i=0,l=points.length;i<l;i+=2){const ii=(i+2)%l;
const x1=points[i]+offX;const y1=points[i+1]+offY;const x2=points[ii]+offX;const y2=points[ii+1]+offY;this.TestInstanceSegment(inst,x1,y1,x2,y2)}}}};


// c3/canvasManager.js
'use strict';{const C3=self.C3;const VALID_FULLSCREEN_MODES=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]);const VALID_FULLSCREEN_SCALING_QUALITIES=new Set(["high","low"]);const PERCENTTEXT_WIDTH=300;const PERCENTTEXT_HEIGHT=200;const PROGRESSBAR_WIDTH=120;const PROGRESSBAR_HEIGHT=8;const tempQuad=C3.New(C3.Quad);const tempRect=C3.New(C3.Rect);const SPLASH_MIN_DISPLAY_TIME=3E3;const SPLASH_AFTER_FADEOUT_WAIT_TIME=200;const SPLASH_FADE_DURATION=300;
C3.CanvasManager=class CanvasManager extends C3.DefendedBase{constructor(runtime){super();this._runtime=runtime;this._canvas=null;this._webglRenderer=null;this._gpuPreference="high-performance";this._windowInnerWidth=0;this._windowInnerHeight=0;this._canvasCssWidth=0;this._canvasCssHeight=0;this._canvasDeviceWidth=0;this._canvasDeviceHeight=0;this._canvasCssOffsetX=0;this._canvasCssOffsetY=0;this._enableMipmaps=true;this._drawWidth=0;this._drawHeight=0;this._fullscreenMode="letterbox-scale";this._documentFullscreenMode=
"letterbox-scale";this._deviceTransformOffX=0;this._deviceTransformOffY=0;this._wantFullscreenScalingQuality="high";this._fullscreenScalingQuality=this._wantFullscreenScalingQuality;this._isDocumentFullscreen=false;this._availableAdditionalRenderTargets=[];this._usedAdditionalRenderTargets=new Set;this._shaderData=null;this._gpuFrameTimingsBuffer=null;this._gpuTimeStartFrame=0;this._gpuTimeEndFrame=0;this._gpuCurUtilisation=NaN;this._gpuLastUtilisation=0;this._layersGpuProfile=new Map;this._snapshotFormat=
"";this._snapshotQuality=1;this._snapshotArea=C3.New(C3.Rect);this._snapshotUrl="";this._snapshotPromise=null;this._snapshotResolve=null;this._loaderStartTime=0;this._rafId=-1;this._loadingProgress=0;this._loadingprogress_handler=e=>this._loadingProgress=e.progress;this._percentText=null;this._loadingLogoAsset=null;this._splashTextures={logo:null,powered:null,website:null};this._splashFrameNumber=0;this._splashFadeInFinishTime=0;this._splashFadeOutStartTime=0;this._splashState="fade-in";this._splashDoneResolve=
null;this._splashDonePromise=new Promise(resolve=>this._splashDoneResolve=resolve)}_SetGPUPowerPreference(pref){this._gpuPreference=pref}async CreateCanvas(opts){this._canvas=opts["canvas"];this._canvas.addEventListener("webglcontextlost",e=>this._OnWebGLContextLost(e));this._canvas.addEventListener("webglcontextrestored",e=>this._OnWebGLContextRestored(e));const rendererOpts={powerPreference:this._gpuPreference,enableGpuProfiling:true};if(C3.Platform.OS==="Android"&&C3.Platform.BrowserEngine==="Chromium"&&
C3.Platform.BrowserVersionNumber<75){console.warn("[Construct 3] Disabling WebGL 2 because this device appears to be affected by crbug.com/934823. Install software updates to avoid this.");rendererOpts.maxWebGLVersion=1}if(this._runtime.GetCompositingMode()==="standard")rendererOpts.alpha=true;else{rendererOpts.alpha=false;rendererOpts.lowLatency=true}this._webglRenderer=C3.New(C3.Gfx.WebGLRenderer,this._canvas,rendererOpts);await this._webglRenderer.InitState();if(!this._webglRenderer.SupportsGPUProfiling())this._gpuLastUtilisation=
NaN;this._runtime.AddDOMComponentMessageHandler("runtime","window-resize",e=>this._OnWindowResize(e));this._runtime.AddDOMComponentMessageHandler("runtime","fullscreenchange",e=>this._OnFullscreenChange(e));this._runtime.AddDOMComponentMessageHandler("runtime","fullscreenerror",e=>this._OnFullscreenError(e));this._isDocumentFullscreen=!!opts["isFullscreen"];this.SetSize(opts["windowInnerWidth"],opts["windowInnerHeight"],true);this._shaderData=self["C3_Shaders"];await this._LoadShaderPrograms();let hasAnyBackgroundBlending=
false;for(const effectList of this._runtime._GetAllEffectLists()){for(const effectType of effectList.GetAllEffectTypes()){effectType._InitRenderer(this._webglRenderer);if(effectType.GetShaderProgram().UsesDest())hasAnyBackgroundBlending=true}effectList.UpdateActiveEffects()}this._runtime._SetUsesAnyBackgroundBlending(hasAnyBackgroundBlending);if(this._webglRenderer.SupportsGPUProfiling())this._gpuFrameTimingsBuffer=C3.New(C3.Gfx.WebGLQueryResultBuffer,this._webglRenderer);this._webglRenderer.SetMipmapsEnabled(this._enableMipmaps)}async _LoadShaderPrograms(){if(!this._shaderData)return;
const promises=[];for(const [id,data]of Object.entries(this._shaderData)){const vertexSrc=C3.Gfx.WebGLShaderProgram.GetDefaultVertexShaderSource(this._webglRenderer.Is3D());promises.push(this._webglRenderer.CreateShaderProgram(data,vertexSrc,id))}await Promise.all(promises);this._webglRenderer.ResetLastProgram();this._webglRenderer.SetTextureFillMode()}Release(){this._runtime=null;this._webglRenderer=null;this._canvas=null}_OnWindowResize(e){const dpr=e["devicePixelRatio"];if(this._runtime.IsInWorker())self.devicePixelRatio=
dpr;this._runtime._SetDevicePixelRatio(dpr);this.SetSize(e["innerWidth"],e["innerHeight"]);this._runtime.UpdateRender()}_OnFullscreenChange(e){this._isDocumentFullscreen=!!e["isFullscreen"];this.SetSize(e["innerWidth"],e["innerHeight"],true);this._runtime.UpdateRender()}_OnFullscreenError(e){this._isDocumentFullscreen=!!e["isFullscreen"];this.SetSize(e["innerWidth"],e["innerHeight"],true);this._runtime.UpdateRender()}SetSize(availableWidth,availableHeight,force=false){availableWidth=Math.floor(availableWidth);
availableHeight=Math.floor(availableHeight);if(availableWidth<=0||availableHeight<=0)throw new Error("invalid size");if(this._windowInnerWidth===availableWidth&&this._windowInnerHeight===availableHeight&&!force)return;this._windowInnerWidth=availableWidth;this._windowInnerHeight=availableHeight;const fullscreenMode=this.GetCurrentFullscreenMode();if(fullscreenMode==="letterbox-scale")this._CalculateLetterboxScale(availableWidth,availableHeight);else if(fullscreenMode==="letterbox-integer-scale")this._CalculateLetterboxIntegerScale(availableWidth,
availableHeight);else if(fullscreenMode==="off")this._CalculateFixedSizeCanvas(availableWidth,availableHeight);else this._CalculateFullsizeCanvas(availableWidth,availableHeight);this._UpdateFullscreenScalingQuality(fullscreenMode);this._canvas.width=this._canvasDeviceWidth;this._canvas.height=this._canvasDeviceHeight;this._runtime.PostComponentMessageToDOM("canvas","update-size",{"marginLeft":this._canvasCssOffsetX,"marginTop":this._canvasCssOffsetY,"styleWidth":this._canvasCssWidth,"styleHeight":this._canvasCssHeight});
this._webglRenderer.SetSize(this._canvasDeviceWidth,this._canvasDeviceHeight,true)}_CalculateLetterboxScale(availableWidth,availableHeight){const dpr=this._runtime.GetDevicePixelRatio();const originalViewportWidth=this._runtime.GetOriginalViewportWidth();const originalViewportHeight=this._runtime.GetOriginalViewportHeight();const originalAspectRatio=originalViewportWidth/originalViewportHeight;const availableAspectRatio=availableWidth/availableHeight;if(availableAspectRatio>originalAspectRatio){const letterboxedWidth=
availableHeight*originalAspectRatio;this._canvasCssWidth=Math.round(letterboxedWidth);this._canvasCssHeight=availableHeight;this._canvasCssOffsetX=Math.floor((availableWidth-this._canvasCssWidth)/2);this._canvasCssOffsetY=0}else{const letterboxedHeight=availableWidth/originalAspectRatio;this._canvasCssWidth=availableWidth;this._canvasCssHeight=Math.round(letterboxedHeight);this._canvasCssOffsetX=0;this._canvasCssOffsetY=Math.floor((availableHeight-this._canvasCssHeight)/2)}this._canvasDeviceWidth=
Math.round(this._canvasCssWidth*dpr);this._canvasDeviceHeight=Math.round(this._canvasCssHeight*dpr);this._runtime.SetViewportSize(originalViewportWidth,originalViewportHeight)}_CalculateLetterboxIntegerScale(availableWidth,availableHeight){const dpr=this._runtime.GetDevicePixelRatio();if(dpr!==1){availableWidth+=1;availableHeight+=1}const originalViewportWidth=this._runtime.GetOriginalViewportWidth();const originalViewportHeight=this._runtime.GetOriginalViewportHeight();const originalAspectRatio=
originalViewportWidth/originalViewportHeight;const availableAspectRatio=availableWidth/availableHeight;let intScale;if(availableAspectRatio>originalAspectRatio){const letterboxedWidth=availableHeight*originalAspectRatio;intScale=letterboxedWidth*dpr/originalViewportWidth}else{const letterboxedHeight=availableWidth/originalAspectRatio;intScale=letterboxedHeight*dpr/originalViewportHeight}if(intScale>1)intScale=Math.floor(intScale);else if(intScale<1)intScale=1/Math.ceil(1/intScale);this._canvasDeviceWidth=
Math.round(originalViewportWidth*intScale);this._canvasDeviceHeight=Math.round(originalViewportHeight*intScale);this._canvasCssWidth=this._canvasDeviceWidth/dpr;this._canvasCssHeight=this._canvasDeviceHeight/dpr;this._canvasCssOffsetX=Math.max(Math.floor((availableWidth-this._canvasCssWidth)/2),0);this._canvasCssOffsetY=Math.max(Math.floor((availableHeight-this._canvasCssHeight)/2),0);this._runtime.SetViewportSize(originalViewportWidth,originalViewportHeight)}_CalculateFullsizeCanvas(availableWidth,
availableHeight){const dpr=this._runtime.GetDevicePixelRatio();this._canvasCssWidth=availableWidth;this._canvasCssHeight=availableHeight;this._canvasDeviceWidth=Math.round(this._canvasCssWidth*dpr);this._canvasDeviceHeight=Math.round(this._canvasCssHeight*dpr);this._canvasCssOffsetX=0;this._canvasCssOffsetY=0;const displayScale=this.GetDisplayScale();this._runtime.SetViewportSize(this._canvasCssWidth/displayScale,this._canvasCssHeight/displayScale)}_CalculateFixedSizeCanvas(availableWidth,availableHeight){const dpr=
this._runtime.GetDevicePixelRatio();this._canvasCssWidth=this._runtime.GetViewportWidth();this._canvasCssHeight=this._runtime.GetViewportHeight();this._canvasDeviceWidth=Math.round(this._canvasCssWidth*dpr);this._canvasDeviceHeight=Math.round(this._canvasCssHeight*dpr);if(this.IsDocumentFullscreen()){this._canvasCssOffsetX=Math.floor((availableWidth-this._canvasCssWidth)/2);this._canvasCssOffsetY=Math.floor((availableHeight-this._canvasCssHeight)/2)}else{this._canvasCssOffsetX=0;this._canvasCssOffsetY=
0}this._runtime.SetViewportSize(this._runtime.GetViewportWidth(),this._runtime.GetViewportHeight())}_UpdateFullscreenScalingQuality(fullscreenMode){if(this._wantFullscreenScalingQuality==="high"){this._drawWidth=this._canvasDeviceWidth;this._drawHeight=this._canvasDeviceHeight;this._fullscreenScalingQuality="high"}else{let viewportWidth,viewportHeight;if(this.GetCurrentFullscreenMode()==="off"){viewportWidth=this._runtime.GetViewportWidth();viewportHeight=this._runtime.GetViewportHeight()}else{viewportWidth=
this._runtime.GetOriginalViewportWidth();viewportHeight=this._runtime.GetOriginalViewportHeight()}if(this._canvasDeviceWidth<viewportWidth&&this._canvasDeviceHeight<viewportHeight){this._drawWidth=this._canvasDeviceWidth;this._drawHeight=this._canvasDeviceHeight;this._fullscreenScalingQuality="high"}else{this._drawWidth=viewportWidth;this._drawHeight=viewportHeight;this._fullscreenScalingQuality="low";if(fullscreenMode==="scale-inner"){const originalAspectRatio=viewportWidth/viewportHeight;const currentAspectRatio=
this._windowInnerWidth/this._windowInnerHeight;if(currentAspectRatio<originalAspectRatio)this._drawWidth=this._drawHeight*currentAspectRatio;else if(currentAspectRatio>originalAspectRatio)this._drawHeight=this._drawWidth/currentAspectRatio}else if(fullscreenMode==="scale-outer"){const originalAspectRatio=viewportWidth/viewportHeight;const currentAspectRatio=this._windowInnerWidth/this._windowInnerHeight;if(currentAspectRatio>originalAspectRatio)this._drawWidth=this._drawHeight*currentAspectRatio;
else if(currentAspectRatio<originalAspectRatio)this._drawHeight=this._drawWidth/currentAspectRatio}}}}IsDocumentFullscreen(){return this._isDocumentFullscreen}SetFullscreenMode(m){if(!VALID_FULLSCREEN_MODES.has(m))throw new Error("invalid fullscreen mode");this._fullscreenMode=m}GetFullscreenMode(){return this._fullscreenMode}SetDocumentFullscreenMode(m){if(!VALID_FULLSCREEN_MODES.has(m))throw new Error("invalid fullscreen mode");this._documentFullscreenMode=m}GetDocumentFullscreenMode(){return this._documentFullscreenMode}GetCurrentFullscreenMode(){if(this.IsDocumentFullscreen())return this.GetDocumentFullscreenMode();
else return this.GetFullscreenMode()}SetFullscreenScalingQuality(q){if(!VALID_FULLSCREEN_SCALING_QUALITIES.has(q))throw new Error("invalid fullscreen scaling quality");this._wantFullscreenScalingQuality=q}GetSetFullscreenScalingQuality(){return this._wantFullscreenScalingQuality}GetCurrentFullscreenScalingQuality(){return this._fullscreenScalingQuality}static _FullscreenModeNumberToString(n){switch(n){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";
case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode");}}GetLastWidth(){return this._windowInnerWidth}GetLastHeight(){return this._windowInnerHeight}GetDrawWidth(){return this._drawWidth}GetDrawHeight(){return this._drawHeight}SetMipmapsEnabled(e){this._enableMipmaps=!!e}IsWebGLContextLost(){return this._webglRenderer.IsContextLost()}_OnWebGLContextLost(e){console.log("[Construct 3] WebGL context lost");e.preventDefault();this._availableAdditionalRenderTargets=[];
this._usedAdditionalRenderTargets.clear();this._webglRenderer.OnContextLost();this._runtime._OnWebGLContextLost()}async _OnWebGLContextRestored(e){await this._webglRenderer.OnContextRestored();await this._LoadShaderPrograms();for(const effectList of this._runtime._GetAllEffectLists())for(const effectType of effectList.GetAllEffectTypes())effectType._InitRenderer(this._webglRenderer);await this._runtime._OnWebGLContextRestored();console.log("[Construct 3] WebGL context restored")}GetWebGLRenderer(){return this._webglRenderer}GetRenderScale(){if(this._fullscreenScalingQuality===
"low")return 1/this._runtime.GetDevicePixelRatio();return this.GetDisplayScale()}GetDisplayScale(){const fullscreenMode=this.GetCurrentFullscreenMode();if(fullscreenMode==="off"||fullscreenMode==="crop")return 1;const originalViewportWidth=this._runtime.GetOriginalViewportWidth();const originalViewportHeight=this._runtime.GetOriginalViewportHeight();const originalAspectRatio=originalViewportWidth/originalViewportHeight;const currentAspectRatio=this._canvasDeviceWidth/this._canvasDeviceHeight;if(fullscreenMode!==
"scale-inner"&&currentAspectRatio>originalAspectRatio||fullscreenMode==="scale-inner"&&currentAspectRatio<originalAspectRatio)return this._canvasCssHeight/originalViewportHeight;else return this._canvasCssWidth/originalViewportWidth}SetDeviceTransformOffset(x,y){this._deviceTransformOffX=x;this._deviceTransformOffY=y}SetDeviceTransform(renderer,w,h){const scrollX=(w||this._drawWidth)/2+this._deviceTransformOffX;const scrollY=(h||this._drawHeight)/2+this._deviceTransformOffY;renderer.SetCameraXYZ(scrollX,
scrollY,100*this._runtime.GetDevicePixelRatio());renderer.SetLookXYZ(scrollX,scrollY,0);renderer.ResetModelView();renderer.UpdateModelView()}SetCssTransform(renderer){const scrollX=this._canvasCssWidth/2;const scrollY=this._canvasCssHeight/2;renderer.SetCameraXYZ(scrollX,scrollY,100);renderer.SetLookXYZ(scrollX,scrollY,0);renderer.ResetModelView();renderer.UpdateModelView()}GetDeviceWidth(){return this._canvasDeviceWidth}GetDeviceHeight(){return this._canvasDeviceHeight}GetCssWidth(){return this._canvasCssWidth}GetCssHeight(){return this._canvasCssHeight}GetCanvasClientX(){return this._canvasCssOffsetX}GetCanvasClientY(){return this._canvasCssOffsetY}GetAdditionalRenderTarget(opts){const arr=
this._availableAdditionalRenderTargets;const useIndex=arr.findIndex(rt=>rt.IsCompatibleWithOptions(opts));let ret;if(useIndex!==-1){ret=arr[useIndex];arr.splice(useIndex,1)}else ret=this._webglRenderer.CreateRenderTarget(opts);this._usedAdditionalRenderTargets.add(ret);return ret}ReleaseAdditionalRenderTarget(renderTarget){if(!this._usedAdditionalRenderTargets.has(renderTarget))throw new Error("render target not in use");this._usedAdditionalRenderTargets.delete(renderTarget);this._availableAdditionalRenderTargets.push(renderTarget)}*activeLayersGpuProfiles(){for(const layout of this._runtime.GetLayoutManager().runningLayouts())for(const layer of layout.GetLayers()){const p=
this._layersGpuProfile.get(layer);if(p)yield p}}GetLayerTimingsBuffer(layer){if(!this._webglRenderer.SupportsGPUProfiling())return null;let p=this._layersGpuProfile.get(layer);if(!p){p={name:layer.GetName(),timingsBuffer:C3.New(C3.Gfx.WebGLQueryResultBuffer,this._webglRenderer),curUtilisation:0,lastUtilisation:0};this._layersGpuProfile.set(layer,p)}return p.timingsBuffer}_Update1sFrameRange(){if(!this._webglRenderer.SupportsGPUProfiling())return;if(this._gpuTimeEndFrame===0){this._gpuTimeEndFrame=
this._webglRenderer.GetFrameNumber();this._gpuCurUtilisation=NaN;for(const p of this.activeLayersGpuProfiles())p.curUtilisation=NaN}}_UpdateTick(){if(!this._webglRenderer.SupportsGPUProfiling()||!isNaN(this._gpuCurUtilisation))return;this._gpuCurUtilisation=this._gpuFrameTimingsBuffer.GetFrameRangeResultSum(this._gpuTimeStartFrame,this._gpuTimeEndFrame);if(isNaN(this._gpuCurUtilisation))return;if(this._runtime.IsDebug())for(const p of this.activeLayersGpuProfiles()){p.curUtilisation=p.timingsBuffer.GetFrameRangeResultSum(this._gpuTimeStartFrame,
this._gpuTimeEndFrame);if(isNaN(p.curUtilisation))return}this._gpuFrameTimingsBuffer.DeleteAllBeforeFrameNumber(this._gpuTimeEndFrame);this._gpuLastUtilisation=Math.min(this._gpuCurUtilisation,1);if(this._runtime.IsDebug()){for(const p of this.activeLayersGpuProfiles()){p.timingsBuffer.DeleteAllBeforeFrameNumber(this._gpuTimeEndFrame);p.lastUtilisation=Math.min(p.curUtilisation,1)}self.C3Debugger.UpdateGPUProfile(this._gpuLastUtilisation,[...this.activeLayersGpuProfiles()])}this._gpuTimeStartFrame=
this._gpuTimeEndFrame;this._gpuTimeEndFrame=0}GetGPUFrameTimingsBuffer(){return this._gpuFrameTimingsBuffer}GetGPUUtilisation(){return this._gpuLastUtilisation}SnapshotCanvas(format,quality,x,y,width,height){this._snapshotFormat=format;this._snapshotQuality=quality;this._snapshotArea.setWH(x,y,width,height);if(this._snapshotPromise)return this._snapshotPromise;this._snapshotPromise=new Promise(resolve=>{this._snapshotResolve=resolve});return this._snapshotPromise}_MaybeTakeSnapshot(){if(!this._snapshotFormat)return;
let canvas=this._canvas;const snapArea=this._snapshotArea;const x=C3.clamp(Math.floor(snapArea.getLeft()),0,canvas.width);const y=C3.clamp(Math.floor(snapArea.getTop()),0,canvas.height);let w=snapArea.width();if(w===0)w=canvas.width-x;else w=C3.clamp(Math.floor(w),0,canvas.width-x);let h=snapArea.height();if(h===0)h=canvas.height-y;else h=C3.clamp(Math.floor(h),0,canvas.height-y);if((x!==0||y!==0||w!==canvas.width||h!==canvas.height)&&(w>0&&h>0)){canvas=C3.CreateCanvas(w,h);const ctx=canvas.getContext("2d");
ctx.drawImage(this._canvas,x,y,w,h,0,0,w,h)}C3.CanvasToBlob(canvas,this._snapshotFormat,this._snapshotQuality).then(blob=>{this._snapshotUrl=URL.createObjectURL(blob);this._snapshotPromise=null;this._snapshotResolve(this._snapshotUrl)});this._snapshotFormat="";this._snapshotQuality=1}GetCanvasSnapshotUrl(){return this._snapshotUrl}InitLoadingScreen(loaderStyle){if(loaderStyle===2){this._percentText=C3.New(C3.Gfx.RendererText,this._webglRenderer);this._percentText.SetIsAsync(false);this._percentText.SetFontName("Arial");
this._percentText.SetFontSize(16);this._percentText.SetHorizontalAlignment("center");this._percentText.SetVerticalAlignment("center");this._percentText.SetSize(PERCENTTEXT_WIDTH,PERCENTTEXT_HEIGHT)}else if(loaderStyle===0){const loadingLogoFilename=this._runtime.GetLoadingLogoFilename();const assetManager=this._runtime.GetAssetManager();let url;if(this._runtime.IsPreview()){if(!assetManager._HasLocalUrlBlob(loadingLogoFilename))return;url=assetManager.GetLocalUrlAsBlobUrl(loadingLogoFilename)}else url=
assetManager.GetIconsSubfolder()+loadingLogoFilename;this._loadingLogoAsset=assetManager.LoadImage({url});this._loadingLogoAsset.LoadStaticTexture(this._webglRenderer).catch(err=>console.warn(`[C3 runtime] Failed to load '${loadingLogoFilename}' for loading screen. Check the project has an icon with that name.`,err))}else if(loaderStyle===4){this._LoadSvgSplashImage("splash-images/splash-logo.svg").then(tex=>{if(this._splashState==="done")this._webglRenderer.DeleteTexture(tex);else this._splashTextures.logo=
tex}).catch(err=>console.warn("Failed to load splash image: ",err));this._LoadBitmapSplashImage("splash-images/splash-poweredby-512.png").then(tex=>{if(this._splashState==="done")this._webglRenderer.DeleteTexture(tex);else this._splashTextures.powered=tex}).catch(err=>console.warn("Failed to load splash image: ",err));this._LoadBitmapSplashImage("splash-images/splash-website-512.png").then(tex=>{if(this._splashState==="done")this._webglRenderer.DeleteTexture(tex);else this._splashTextures.website=
tex}).catch(err=>console.warn("Failed to load splash image: ",err))}}async _LoadSvgSplashImage(url){url=(new URL(url,this._runtime.GetBaseURL())).toString();const blob=await C3.FetchBlob(url);const drawable=await this._runtime.RasterSvgImage(blob,2048,2048);return await this._webglRenderer.CreateStaticTextureAsync(drawable,{mipMapQuality:"high"})}async _LoadBitmapSplashImage(url){url=(new URL(url,this._runtime.GetBaseURL())).toString();const blob=await C3.FetchBlob(url);return await this._webglRenderer.CreateStaticTextureAsync(blob,
{mipMapQuality:"high"})}HideCordovaSplashScreen(){this._runtime.PostComponentMessageToDOM("runtime","hide-cordova-splash")}StartLoadingScreen(){this._loaderStartTime=Date.now();this._runtime.Dispatcher().addEventListener("loadingprogress",this._loadingprogress_handler);this._rafId=requestAnimationFrame(()=>this._DrawLoadingScreen());const loaderStyle=this._runtime.GetLoaderStyle();if(loaderStyle!==3)this.HideCordovaSplashScreen()}async EndLoadingScreen(){this._loadingProgress=1;const loaderStyle=
this._runtime.GetLoaderStyle();if(loaderStyle===4)await this._splashDonePromise;this._splashDoneResolve=null;this._splashDonePromise=null;if(this._rafId!==-1){cancelAnimationFrame(this._rafId);this._rafId=-1}this._runtime.Dispatcher().removeEventListener("loadingprogress",this._loadingprogress_handler);this._loadingprogress_handler=null;if(this._percentText){this._percentText.Release();this._percentText=null}if(this._loadingLogoAsset){this._loadingLogoAsset.Release();this._loadingLogoAsset=null}this._webglRenderer.Start();
if(this._splashTextures.logo){this._webglRenderer.DeleteTexture(this._splashTextures.logo);this._splashTextures.logo=null}if(this._splashTextures.powered){this._webglRenderer.DeleteTexture(this._splashTextures.powered);this._splashTextures.powered=null}if(this._splashTextures.website){this._webglRenderer.DeleteTexture(this._splashTextures.website);this._splashTextures.website=null}this._webglRenderer.ClearRgba(0,0,0,0);this._webglRenderer.Finish();this._splashState="done";this._gpuTimeStartFrame=
this._webglRenderer.GetFrameNumber();if(loaderStyle===3)this.HideCordovaSplashScreen()}_DrawLoadingScreen(){if(this._rafId===-1)return;const renderer=this._webglRenderer;renderer.Start();this._rafId=-1;const hasHadError=this._runtime.GetAssetManager().HasHadErrorLoading();const loaderStyle=this._runtime.GetLoaderStyle();if(loaderStyle!==3){this.SetCssTransform(renderer);renderer.ClearRgba(0,0,0,0);renderer.ResetColor();renderer.SetTextureFillMode();renderer.SetTexture(null)}if(loaderStyle===0)this._DrawProgressBarAndLogoLoadingScreen(hasHadError);
else if(loaderStyle===1)this._DrawProgressBarLoadingScreen(hasHadError,PROGRESSBAR_WIDTH,0);else if(loaderStyle===2)this._DrawPercentTextLoadingScreen(hasHadError);else if(loaderStyle===3)C3.noop();else if(loaderStyle===4)this._DrawSplashLoadingScreen(hasHadError);else throw new Error("invalid loader style");renderer.Finish();this._rafId=requestAnimationFrame(()=>this._DrawLoadingScreen())}_DrawPercentTextLoadingScreen(hasHadError){if(hasHadError)this._percentText.SetColorRgb(1,0,0);else this._percentText.SetColorRgb(.6,
.6,.6);this._percentText.SetText(Math.round(this._loadingProgress*100)+"%");const midX=this._canvasCssWidth/2;const midY=this._canvasCssHeight/2;const hw=PERCENTTEXT_WIDTH/2;const hh=PERCENTTEXT_HEIGHT/2;tempQuad.setRect(midX-hw,midY-hh,midX+hw,midY+hh);this._webglRenderer.SetTexture(this._percentText.GetTexture());this._webglRenderer.Quad3(tempQuad,this._percentText.GetTexRect())}_DrawProgressBarLoadingScreen(hasHadError,width,yOff){const renderer=this._webglRenderer;const height=PROGRESSBAR_HEIGHT;
renderer.SetColorFillMode();if(hasHadError)renderer.SetColorRgba(1,0,0,1);else renderer.SetColorRgba(.118,.565,1,1);const midX=this._canvasCssWidth/2;const midY=this._canvasCssHeight/2;const hw=width/2;const hh=height/2;tempRect.setWH(midX-hw,midY-hh+yOff,Math.floor(width*this._loadingProgress),height);renderer.Rect(tempRect);tempRect.setWH(midX-hw,midY-hh+yOff,width,height);tempRect.offset(-.5,-.5);tempRect.inflate(.5,.5);renderer.SetColorRgba(0,0,0,1);renderer.LineRect2(tempRect);tempRect.inflate(1,
1);renderer.SetColorRgba(1,1,1,1);renderer.LineRect2(tempRect)}_DrawProgressBarAndLogoLoadingScreen(hasHadError){if(!this._loadingLogoAsset){this._DrawProgressBarLoadingScreen(hasHadError,PROGRESSBAR_WIDTH,0);return}const logoTexture=this._loadingLogoAsset.GetTexture();if(!logoTexture){this._DrawProgressBarLoadingScreen(hasHadError,PROGRESSBAR_WIDTH,0);return}const logoW=logoTexture.GetWidth();const logoH=logoTexture.GetHeight();const midX=this._canvasCssWidth/2;const midY=this._canvasCssHeight/2;
const hw=logoW/2;const hh=logoH/2;tempQuad.setRect(midX-hw,midY-hh,midX+hw,midY+hh);this._webglRenderer.SetTexture(logoTexture);this._webglRenderer.Quad(tempQuad);this._DrawProgressBarLoadingScreen(hasHadError,logoW,hh+16)}_DrawSplashLoadingScreen(hasHadError){const renderer=this._webglRenderer;const logoTex=this._splashTextures.logo;const poweredTex=this._splashTextures.powered;const websiteTex=this._splashTextures.website;const nowTime=Date.now();if(this._splashFrameNumber===0)this._loaderStartTime=
nowTime;const allowQuickSplash=this._runtime.IsPreview()||this._runtime.IsFBInstantAvailable()&&!this._runtime.IsCordova();const splashAfterFadeOutWait=allowQuickSplash?0:SPLASH_AFTER_FADEOUT_WAIT_TIME;const splashMinDisplayTime=allowQuickSplash?0:SPLASH_MIN_DISPLAY_TIME;let a=1;if(this._splashState==="fade-in")a=Math.min((nowTime-this._loaderStartTime)/SPLASH_FADE_DURATION,1);else if(this._splashState==="fade-out")a=Math.max(1-(nowTime-this._splashFadeOutStartTime)/SPLASH_FADE_DURATION,0);renderer.SetColorFillMode();
renderer.SetColorRgba(.231*a,.251*a,.271*a,a);tempRect.set(0,0,this._canvasCssWidth,this._canvasCssHeight);renderer.Rect(tempRect);const w=Math.ceil(this._canvasCssWidth);const h=Math.ceil(this._canvasCssHeight);let drawW,drawH;if(this._canvasCssHeight>256){renderer.SetColorRgba(.302*a,.334*a,.365*a,a);drawW=w;drawH=Math.max(h*.005,2);tempRect.setWH(0,h*.8-drawH/2,drawW,drawH);renderer.Rect(tempRect);if(hasHadError)renderer.SetColorRgba(a,0,0,a);else renderer.SetColorRgba(.161*a,.953*a,.816*a,a);
drawW=w*this._loadingProgress;tempRect.setWH(w*.5-drawW/2,h*.8-drawH/2,drawW,drawH);renderer.Rect(tempRect);renderer.SetColorRgba(a,a,a,a);renderer.SetTextureFillMode();if(poweredTex){drawW=C3.clamp(h*.22,105,w*.6)*1.5;drawH=drawW/8;tempRect.setWH(w*.5-drawW/2,h*.2-drawH/2,drawW,drawH);renderer.SetTexture(poweredTex);renderer.Rect(tempRect)}if(logoTex){drawW=Math.min(h*.395,w*.95);drawH=drawW;tempRect.setWH(w*.5-drawW/2,h*.485-drawH/2,drawW,drawH);renderer.SetTexture(logoTex);renderer.Rect(tempRect)}if(websiteTex){drawW=
C3.clamp(h*.22,105,w*.6)*1.5;drawH=drawW/8;tempRect.setWH(w*.5-drawW/2,h*.868-drawH/2,drawW,drawH);renderer.SetTexture(websiteTex);renderer.Rect(tempRect)}}else{renderer.SetColorRgba(.302*a,.334*a,.365*a,a);drawW=w;drawH=Math.max(h*.005,2);tempRect.setWH(0,h*.85-drawH/2,drawW,drawH);renderer.Rect(tempRect);if(hasHadError)renderer.SetColorRgba(a,0,0,a);else renderer.SetColorRgba(.161*a,.953*a,.816*a,a);drawW=w*this._loadingProgress;tempRect.setWH(w*.5-drawW/2,h*.85-drawH/2,drawW,drawH);renderer.Rect(tempRect);
renderer.SetColorRgba(a,a,a,a);renderer.SetTextureFillMode();if(logoTex){drawW=h*.55;drawH=drawW;tempRect.setWH(w*.5-drawW/2,h*.45-drawH/2,drawW,drawH);renderer.SetTexture(logoTex);renderer.Rect(tempRect)}}this._splashFrameNumber++;if(this._splashState==="fade-in"&&nowTime-this._loaderStartTime>=SPLASH_FADE_DURATION&&this._splashFrameNumber>=2){this._splashState="wait";this._splashFadeInFinishTime=nowTime}if(this._splashState==="wait"&&nowTime-this._splashFadeInFinishTime>=splashMinDisplayTime&&this._loadingProgress>=
1){this._splashState="fade-out";this._splashFadeOutStartTime=nowTime}if(this._splashState==="fade-out"&&nowTime-this._splashFadeOutStartTime>=SPLASH_FADE_DURATION+splashAfterFadeOutWait||allowQuickSplash&&this._loadingProgress>=1&&nowTime-this._loaderStartTime<500)this._splashDoneResolve()}}};


// c3/runtime.js
'use strict';{const C3=self.C3;const C3Debugger=self.C3Debugger;const assert=self.assert;const DEFAULT_RUNTIME_OPTS={"messagePort":null,"baseUrl":"","headless":false,"hasDom":true,"isInWorker":false,"useAudio":true,"projectData":"","exportType":""};let ife=true;C3.Runtime=class C3Runtime extends C3.DefendedBase{constructor(opts){opts=Object.assign({},DEFAULT_RUNTIME_OPTS,opts);super();this._messagePort=opts["messagePort"];this._baseUrl=opts["baseUrl"];this._isHeadless=!!opts["headless"];this._hasDom=
!!opts["hasDom"];this._isInWorker=!!opts["isInWorker"];ife=opts["ife"];this._useAudio=!!opts["useAudio"];this._exportType=opts["exportType"];this._isiOSCordova=!!opts["isiOSCordova"];this._isiOSWebView=!!opts["isiOSWebView"];this._isFBInstantAvailable=!!opts["isFBInstantAvailable"];this._opusWasmScriptUrl=opts["opusWasmScriptUrl"];this._opusWasmBinaryUrl=opts["opusWasmBinaryUrl"];this._isDebug=!!(this._exportType==="preview"&&opts["isDebug"]);this._breakpointsEnabled=this._isDebug;this._isDebugging=
this._isDebug;this._debuggingDisabled=0;this._additionalLoadPromises=[];this._additionalCreatePromises=[];this._isUsingCreatePromises=false;this._projectName="";this._projectVersion="";this._projectUniqueId="";this._appId="";this._originalViewportWidth=0;this._originalViewportHeight=0;this._devicePixelRatio=self.devicePixelRatio;this._parallaxXorigin=0;this._parallaxYorigin=0;this._viewportWidth=0;this._viewportHeight=0;this._loaderStyle=0;this._usesLoaderLayout=false;this._isLoading=true;this._usesAnyBackgroundBlending=
false;this._loadingLogoFilename="loading-logo.png";this._assetManager=C3.New(C3.AssetManager,this,opts);this._layoutManager=C3.New(C3.LayoutManager,this);this._eventSheetManager=C3.New(C3.EventSheetManager,this);this._pluginManager=C3.New(C3.PluginManager,this);this._collisionEngine=C3.New(C3.CollisionEngine,this);this._timelineManager=C3.New(C3.TimelineManager,this);this._transitionManager=C3.New(C3.TransitionManager,this);this._allObjectClasses=[];this._objectClassesByName=new Map;this._objectClassesBySid=
new Map;this._familyCount=0;this._allContainers=[];this._allEffectLists=[];this._currentLayoutStack=[];this._instancesPendingCreate=[];this._instancesPendingDestroy=new Map;this._hasPendingInstances=false;this._isFlushingPendingInstances=false;this._objectCount=0;this._nextUid=0;this._instancesByUid=new Map;this._instancesToReleaseAtEndOfTick=new Set;this._instancesToReleaseAffectedObjectClasses=new Set;this._objectReferenceTable=[];this._jsPropNameTable=[];this._canvasManager=null;this._framerateMode=
"vsync";this._compositingMode="standard";this._sampling="trilinear";this._isPixelRoundingEnabled=false;this._needRender=true;this._pauseOnBlur=false;this._isPausedOnBlur=false;this._tickCallbacks={normal:timestamp=>{this._rafId=-1;this._ruafId=-1;this.Tick(timestamp)},tickOnly:timestamp=>{this._ruafId=-1;this.Tick(timestamp,false,"skip-render")},renderOnly:()=>{this._rafId=-1;this.Render()}};this._rafId=-1;this._ruafId=-1;this._tickCount=0;this._tickCountNoSave=0;this._execCount=0;this._hasStarted=
false;this._isInTick=false;this._hasStartedTicking=false;this._isLayoutFirstTick=true;this._suspendCount=0;this._scheduleTriggersThrottle=new C3.PromiseThrottle(1);this._randomNumberCallback=()=>Math.random();this._startTime=0;this._lastTickTime=0;this._dt1=0;this._dt=0;this._timeScale=1;this._minimumFramerate=30;this._gameTime=C3.New(C3.KahanSum);this._wallTime=C3.New(C3.KahanSum);this._fpsFrameCount=-1;this._fpsLastTime=0;this._fps=0;this._mainThreadTimeCounter=0;this._mainThreadTime=0;this._isLoadingState=
false;this._saveToSlotName="";this._loadFromSlotName="";this._loadFromJson=null;this._lastSaveJson="";this._projectStorage=null;this._savegamesStorage=null;this._dispatcher=C3.New(C3.Event.Dispatcher);this._domEventHandlers=new Map;this._pendingResponsePromises=new Map;this._nextDomResponseId=0;this._didRequestDeviceOrientationEvent=false;this._didRequestDeviceMotionEvent=false;this._isReadyToHandleEvents=false;this._waitingToHandleEvents=[];this._eventObjects={"pretick":C3.New(C3.Event,"pretick",
false),"tick":C3.New(C3.Event,"tick",false),"tick2":C3.New(C3.Event,"tick2",false),"instancedestroy":C3.New(C3.Event,"instancedestroy",false),"beforelayoutchange":C3.New(C3.Event,"beforelayoutchange",false),"layoutchange":C3.New(C3.Event,"layoutchange",false)};this._eventObjects["instancedestroy"].instance=null;this._userScriptDispatcher=C3.New(C3.Event.Dispatcher);this._userScriptEventObjects=null;this._behInstsToTick=C3.New(C3.RedBlackSet,C3.BehaviorInstance.SortByTickSequence);this._behInstsToPostTick=
C3.New(C3.RedBlackSet,C3.BehaviorInstance.SortByTickSequence);this._behInstsToTick2=C3.New(C3.RedBlackSet,C3.BehaviorInstance.SortByTickSequence);this._jobScheduler=C3.New(C3.JobSchedulerRuntime,this,opts["jobScheduler"]);if(opts["canvas"])this._canvasManager=C3.New(C3.CanvasManager,this);this._messagePort.onmessage=e=>this["_OnMessageFromDOM"](e.data);this.AddDOMComponentMessageHandler("runtime","visibilitychange",e=>this._OnVisibilityChange(e));this.AddDOMComponentMessageHandler("runtime","opus-decode",
e=>this._WasmDecodeWebMOpus(e["arrayBuffer"]));this.AddDOMComponentMessageHandler("runtime","get-remote-preview-status-info",()=>this._GetRemotePreviewStatusInfo());this.AddDOMComponentMessageHandler("runtime","js-invoke-function",e=>this._InvokeFunctionFromJS(e));this.AddDOMComponentMessageHandler("runtime","go-to-last-error-script",self["goToLastErrorScript"]);this._dispatcher.addEventListener("window-blur",e=>this._OnWindowBlur(e));this._dispatcher.addEventListener("window-focus",()=>this._OnWindowFocus());
this._timelineManager.AddRuntimeListeners();this._iRuntime=null;this._interfaceMap=new WeakMap;this._commonScriptInterfaces={keyboard:null,mouse:null,touch:null}}static Create(opts){return C3.New(C3.Runtime,opts)}Release(){C3.clearArray(this._allObjectClasses);this._objectClassesByName.clear();this._objectClassesBySid.clear();this._layoutManager.Release();this._layoutManager=null;this._eventSheetManager.Release();this._eventSheetManager=null;this._pluginManager.Release();this._pluginManager=null;
this._assetManager.Release();this._assetManager=null;this._collisionEngine.Release();this._collisionEngine=null;this._timelineManager.Release();this._timelineManager=null;this._transitionManager.Release();this._transitionManager=null;if(this._canvasManager){this._canvasManager.Release();this._canvasManager=null}this._dispatcher.Release();this._dispatcher=null;this._tickEvent=null}["_OnMessageFromDOM"](data){const type=data["type"];if(type==="event")this._OnEventFromDOM(data);else if(type==="result")this._OnResultFromDOM(data);
else throw new Error(`unknown message '${type}'`);}_OnEventFromDOM(e){if(!this._isReadyToHandleEvents){this._waitingToHandleEvents.push(e);return}const component=e["component"];const handler=e["handler"];const data=e["data"];const dispatchOpts=e["dispatchOpts"];const dispatchRuntimeEvent=!!(dispatchOpts&&dispatchOpts["dispatchRuntimeEvent"]);const dispatchUserScriptEvent=!!(dispatchOpts&&dispatchOpts["dispatchUserScriptEvent"]);const responseId=e["responseId"];if(component==="runtime"){if(dispatchRuntimeEvent){const event=
new C3.Event(handler);event.data=data;this._dispatcher.dispatchEventAndWaitAsyncSequential(event)}if(dispatchUserScriptEvent){const event=new C3.Event(handler,true);for(const [key,value]of Object.entries(data))event[key]=value;this.DispatchUserScriptEvent(event)}}const handlerMap=this._domEventHandlers.get(component);if(!handlerMap){if(!dispatchRuntimeEvent&&!dispatchUserScriptEvent)console.warn(`[Runtime] No DOM event handlers for component '${component}'`);return}const func=handlerMap.get(handler);
if(!func){if(!dispatchRuntimeEvent&&!dispatchUserScriptEvent)console.warn(`[Runtime] No DOM handler '${handler}' for component '${component}'`);return}let ret=null;try{ret=func(data)}catch(err){console.error(`Exception in '${component}' handler '${handler}':`,err);if(responseId!==null)this._PostResultToDOM(responseId,false,""+err);return}if(responseId!==null)if(ret&&ret.then)ret.then(result=>this._PostResultToDOM(responseId,true,result)).catch(err=>{console.error(`Rejection from '${component}' handler '${handler}':`,
err);this._PostResultToDOM(responseId,false,""+err)});else this._PostResultToDOM(responseId,true,ret)}_PostResultToDOM(responseId,isOk,result){this._messagePort.postMessage({"type":"result","responseId":responseId,"isOk":isOk,"result":result})}_OnResultFromDOM(data){const responseId=data["responseId"];const isOk=data["isOk"];const result=data["result"];const pendingPromise=this._pendingResponsePromises.get(responseId);if(isOk)pendingPromise.resolve(result);else pendingPromise.reject(result);this._pendingResponsePromises.delete(responseId)}AddDOMComponentMessageHandler(component,
handler,func){let handlerMap=this._domEventHandlers.get(component);if(!handlerMap){handlerMap=new Map;this._domEventHandlers.set(component,handlerMap)}if(handlerMap.has(handler))throw new Error(`[Runtime] Component '${component}' already has handler '${handler}'`);handlerMap.set(handler,func)}PostComponentMessageToDOM(component,handler,data){this._messagePort.postMessage({"type":"event","component":component,"handler":handler,"data":data,"responseId":null})}PostComponentMessageToDOMAsync(component,
handler,data){const responseId=this._nextDomResponseId++;const ret=new Promise((resolve,reject)=>{this._pendingResponsePromises.set(responseId,{resolve,reject})});this._messagePort.postMessage({"type":"event","component":component,"handler":handler,"data":data,"responseId":responseId});return ret}PostToDebugger(data){if(!this.IsDebug())throw new Error("not in debug mode");this.PostComponentMessageToDOM("runtime","post-to-debugger",data)}async Init(opts){if(this.IsDebug())await C3Debugger.Init(this);
else if(self.C3Debugger)self.C3Debugger.InitPreview(this);const [o]=await Promise.all([this._assetManager.FetchJson("data.json"),this._MaybeLoadOpusDecoder(),this._jobScheduler.Init()]);this._LoadDataJson(o);await this._InitialiseCanvas(opts);if(!this.IsPreview())console.info("Made with Construct 3, the game and app creator :: https://www.construct.net");const webglRenderer=this.GetWebGLRenderer();console.info(`[C3 runtime] Hosted in ${this.IsInWorker()?"worker":"DOM"}, using ${this._assetManager.GetScriptsType()} scripts, rendering with WebGL ${webglRenderer.GetWebGLVersionNumber()} [${webglRenderer.GetUnmaskedRenderer()}] (${webglRenderer.IsDesynchronized()?
"desynchronized":"standard"} compositing)`);if(webglRenderer.HasMajorPerformanceCaveat())console.warn("[C3 runtime] WebGL indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance.");this._isReadyToHandleEvents=true;for(const e of this._waitingToHandleEvents)this._OnEventFromDOM(e);C3.clearArray(this._waitingToHandleEvents);if(this._canvasManager)this._canvasManager.StartLoadingScreen();for(const f of opts["runOnStartupFunctions"])this._additionalLoadPromises.push(this._RunOnStartupFunction(f));
await Promise.all([this._assetManager.WaitForAllToLoad(),...this._additionalLoadPromises]);C3.clearArray(this._additionalLoadPromises);if(this._assetManager.HasHadErrorLoading()){if(this._canvasManager)this._canvasManager.HideCordovaSplashScreen();return}if(this._canvasManager)await this._canvasManager.EndLoadingScreen();await this._dispatcher.dispatchEventAndWaitAsync(new C3.Event("beforeruntimestart"));await this.Start();this._messagePort.postMessage({"type":"runtime-ready"});return this}async _RunOnStartupFunction(f){try{await f(this._iRuntime)}catch(err){console.error("[C3 runtime] Error in runOnStartup function: ",
err)}}_LoadDataJson(o){const projectData=o["project"];this._projectName=projectData[0];this._projectVersion=projectData[16];this._projectUniqueId=projectData[31];this._appId=projectData[38];this._loadingLogoFilename=projectData[39];this._isPixelRoundingEnabled=!!projectData[9];this._originalViewportWidth=this._viewportWidth=projectData[10];this._originalViewportHeight=this._viewportHeight=projectData[11];this._parallaxXorigin=this._originalViewportWidth/2;this._parallaxYorigin=this._originalViewportHeight/
2;this._compositingMode=projectData[36];this._framerateMode=projectData[37];if(this._compositingMode==="low-latency"&&this.IsAndroidWebView()&&C3.Platform.BrowserVersionNumber<=77){console.warn("[C3 runtime] Desynchronized (low-latency) compositing is enabled, but is disabled in the Android WebView <=77 due to crbug.com/1008842. Reverting to synchronized (standard) compositing.");this._compositingMode="standard"}this._sampling=projectData[14];this._usesLoaderLayout=!!projectData[18];this._loaderStyle=
projectData[19];this._nextUid=projectData[21];this._pauseOnBlur=projectData[22];this._assetManager._SetAudioFiles(projectData[7],projectData[25]);this._assetManager._SetMediaSubfolder(projectData[8]);this._assetManager._SetFontsSubfolder(projectData[32]);this._assetManager._SetIconsSubfolder(projectData[28]);this._assetManager._SetWebFonts(projectData[29]);if(this._canvasManager){this._canvasManager.SetFullscreenMode(C3.CanvasManager._FullscreenModeNumberToString(projectData[12]));this._canvasManager.SetFullscreenScalingQuality(projectData[23]?
"high":"low");this._canvasManager.SetMipmapsEnabled(projectData[24]!==0);this._canvasManager._SetGPUPowerPreference(projectData[34])}this._pluginManager.CreateSystemPlugin();this._objectReferenceTable=self.C3_GetObjectRefTable();for(const pluginData of projectData[2])this._pluginManager.CreatePlugin(pluginData);this._objectReferenceTable=self.C3_GetObjectRefTable();this._LoadJsPropNameTable();for(const objectClassData of projectData[3]){const objectClass=C3.ObjectClass.Create(this,this._allObjectClasses.length,
objectClassData);this._allObjectClasses.push(objectClass);this._objectClassesByName.set(objectClass.GetName().toLowerCase(),objectClass);this._objectClassesBySid.set(objectClass.GetSID(),objectClass)}for(const familyData of projectData[4]){const familyType=this._allObjectClasses[familyData[0]];familyType._LoadFamily(familyData)}for(const containerData of projectData[27]){const containerTypes=containerData.map(index=>this._allObjectClasses[index]);this._allContainers.push(C3.New(C3.Container,this,
containerTypes))}for(const objectClass of this._allObjectClasses)objectClass._OnAfterCreate();for(const layoutData of projectData[5])this._layoutManager.Create(layoutData);const firstLayoutName=projectData[1];if(firstLayoutName){const firstLayout=this._layoutManager.GetLayoutByName(firstLayoutName);if(firstLayout)this._layoutManager.SetFirstLayout(firstLayout)}for(const timelineData of projectData[33])this._timelineManager.Create(timelineData);for(const transitionData of projectData[35])this._transitionManager.Create(transitionData);
this._InitScriptInterfaces();for(const eventSheetData of projectData[6])this._eventSheetManager.Create(eventSheetData);this._eventSheetManager._PostInit();this._InitGlobalVariableScriptInterface();C3.clearArray(this._objectReferenceTable);this.FlushPendingInstances();let targetOrientation="any";const orientations=projectData[20];if(orientations===1)targetOrientation="portrait";else if(orientations===2)targetOrientation="landscape";this.PostComponentMessageToDOM("runtime","set-target-orientation",
{"targetOrientation":targetOrientation})}GetLoaderStyle(){return this._loaderStyle}IsFBInstantAvailable(){return this._isFBInstantAvailable}IsLoading(){return this._isLoading}AddLoadPromise(promise){this._additionalLoadPromises.push(promise)}SetUsingCreatePromises(e){this._isUsingCreatePromises=!!e}AddCreatePromise(promise){if(!this._isUsingCreatePromises)return;this._additionalCreatePromises.push(promise)}GetCreatePromises(){return this._additionalCreatePromises}_GetNextFamilyIndex(){return this._familyCount++}GetFamilyCount(){return this._familyCount}_AddEffectList(el){this._allEffectLists.push(el)}_GetAllEffectLists(){return this._allEffectLists}async _InitialiseCanvas(opts){if(!this._canvasManager)return;
await this._canvasManager.CreateCanvas(opts);this._canvasManager.InitLoadingScreen(this._loaderStyle)}async _MaybeLoadOpusDecoder(){if(this._assetManager.IsAudioFormatSupported("audio/webm; codecs=opus"))return;let wasmBlob=null;let wasmBuffer=null;try{if(this.IsiOSCordova()&&location.protocol==="file:")wasmBuffer=await this._assetManager.CordovaFetchLocalFileAsArrayBuffer(this._opusWasmBinaryUrl);else wasmBlob=await this._assetManager.FetchBlob(this._opusWasmBinaryUrl)}catch(err){console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",
err);return}if(wasmBuffer)this.AddJobWorkerBuffer(wasmBuffer,"opus-decoder-wasm");else this.AddJobWorkerBlob(wasmBlob,"opus-decoder-wasm");await this.AddJobWorkerScripts([this._opusWasmScriptUrl])}async _WasmDecodeWebMOpus(arrayBuffer){const result=await this.AddJob("OpusDecode",{"arrayBuffer":arrayBuffer},[arrayBuffer]);return result}async Start(){this._hasStarted=true;this._startTime=Date.now();if(this._usesLoaderLayout){for(const objectClass of this._allObjectClasses)if(!objectClass.IsFamily()&&
!objectClass.IsOnLoaderLayout()&&objectClass.IsWorldType())objectClass.OnCreate();this._assetManager.WaitForAllToLoad().then(()=>{this._isLoading=false;this._OnLoadFinished()})}else this._isLoading=false;this._assetManager.SetInitialLoadFinished();if(this.IsDebug())C3Debugger.RuntimeInit(ife);for(const layout of this._layoutManager.GetAllLayouts())layout._CreateGlobalNonWorlds();const firstLayout=this._layoutManager.GetFirstLayout();await firstLayout._Load(null,this.GetWebGLRenderer());await firstLayout._StartRunning(true);
this._fpsLastTime=performance.now();if(!this._usesLoaderLayout)this._OnLoadFinished();const state=await this.PostComponentMessageToDOMAsync("runtime","before-start-ticking");if(state["isSuspended"])this._suspendCount++;else this.Tick()}_OnLoadFinished(){this.Trigger(C3.Plugins.System.Cnds.OnLoadFinished,null,null);this.PostComponentMessageToDOM("runtime","register-sw")}GetObjectReference(index){index=Math.floor(index);const objRefTable=this._objectReferenceTable;if(index<0||index>=objRefTable.length)throw new Error("invalid object reference");
return objRefTable[index]}_LoadJsPropNameTable(){for(const entry of self.C3_JsPropNameTable){const propName=C3.first(Object.keys(entry));this._jsPropNameTable.push(propName)}}GetJsPropName(index){index=Math.floor(index);const jsPropNameTable=this._jsPropNameTable;if(index<0||index>=jsPropNameTable.length)throw new Error("invalid prop reference");return jsPropNameTable[index]}HasDOM(){return this._hasDom}IsHeadless(){return this._isHeadless}IsInWorker(){return this._isInWorker}GetBaseURL(){return this._baseUrl}GetEventSheetManager(){return this._eventSheetManager}GetEventStack(){return this._eventSheetManager.GetEventStack()}GetCurrentEventStackFrame(){return this._eventSheetManager.GetCurrentEventStackFrame()}GetCurrentEvent(){return this._eventSheetManager.GetCurrentEvent()}GetCurrentCondition(){return this._eventSheetManager.GetCurrentCondition()}IsCurrentConditionFirst(){return this.GetCurrentEventStackFrame().GetConditionIndex()===
0}GetCurrentAction(){return this._eventSheetManager.GetCurrentAction()}GetPluginManager(){return this._pluginManager}GetSystemPlugin(){return this._pluginManager.GetSystemPlugin()}GetObjectClassByIndex(i){i=Math.floor(i);if(i<0||i>=this._allObjectClasses.length)throw new RangeError("invalid index");return this._allObjectClasses[i]}GetObjectClassByName(name){return this._objectClassesByName.get(name.toLowerCase())||null}GetObjectClassBySID(sid){return this._objectClassesBySid.get(sid)||null}GetSingleGlobalObjectClassByCtor(ctor){const plugin=
this._pluginManager.GetPluginByConstructorFunction(ctor);if(!plugin)return null;return plugin.GetSingleGlobalObjectClass()}GetAllObjectClasses(){return this._allObjectClasses}Dispatcher(){return this._dispatcher}UserScriptDispatcher(){return this._userScriptDispatcher}DispatchUserScriptEvent(e){e.runtime=this.GetIRuntime();const shouldTime=this.IsDebug()&&!this._eventSheetManager.IsInEventEngine();if(shouldTime)C3Debugger.StartMeasuringScriptTime();this._userScriptDispatcher.dispatchEvent(e);if(shouldTime)C3Debugger.AddScriptTime()}DispatchUserScriptEventAsyncWait(e){e.runtime=
this.GetIRuntime();return this._userScriptDispatcher.dispatchEventAndWaitAsync(e)}GetOriginalViewportWidth(){return this._originalViewportWidth}GetOriginalViewportHeight(){return this._originalViewportHeight}SetOriginalViewportSize(w,h){this._originalViewportWidth=w;this._originalViewportHeight=h}GetViewportWidth(){return this._viewportWidth}GetViewportHeight(){return this._viewportHeight}SetViewportSize(w,h){this._viewportWidth=w;this._viewportHeight=h}_SetDevicePixelRatio(r){this._devicePixelRatio=
r}GetDevicePixelRatio(){return this._devicePixelRatio}GetParallaxXOrigin(){return this._parallaxXorigin}GetParallaxYOrigin(){return this._parallaxYorigin}GetCanvasManager(){return this._canvasManager}GetDrawWidth(){if(!this._canvasManager)return this._viewportWidth;return this._canvasManager.GetDrawWidth()}GetDrawHeight(){if(!this._canvasManager)return this._viewportHeight;return this._canvasManager.GetDrawHeight()}GetRenderScale(){if(!this._canvasManager)return 1;return this._canvasManager.GetRenderScale()}GetDisplayScale(){if(!this._canvasManager)return 1;
return this._canvasManager.GetDisplayScale()}GetCanvasClientX(){if(!this._canvasManager)return 0;return this._canvasManager.GetCanvasClientX()}GetCanvasClientY(){if(!this._canvasManager)return 0;return this._canvasManager.GetCanvasClientY()}GetCanvasCssWidth(){if(!this._canvasManager)return 0;return this._canvasManager.GetCssWidth()}GetCanvasCssHeight(){if(!this._canvasManager)return 0;return this._canvasManager.GetCssHeight()}GetFullscreenMode(){if(!this._canvasManager)return"off";return this._canvasManager.GetFullscreenMode()}GetAdditionalRenderTarget(opts){if(!this._canvasManager)return null;
return this._canvasManager.GetAdditionalRenderTarget(opts)}ReleaseAdditionalRenderTarget(renderTarget){if(!this._canvasManager)return;this._canvasManager.ReleaseAdditionalRenderTarget(renderTarget)}_SetUsesAnyBackgroundBlending(u){this._usesAnyBackgroundBlending=!!u}UsesAnyBackgroundBlending(){return this._usesAnyBackgroundBlending}GetGPUUtilisation(){if(!this._canvasManager)return NaN;return this._canvasManager.GetGPUUtilisation()}IsLinearSampling(){return this.GetSampling()!=="nearest"}GetFramerateMode(){return this._framerateMode}GetCompositingMode(){return this._compositingMode}GetSampling(){return this._sampling}UsesLoaderLayout(){return this._usesLoaderLayout}GetLoadingLogoFilename(){return this._loadingLogoFilename}GetLayoutManager(){return this._layoutManager}GetMainRunningLayout(){return this._layoutManager.GetMainRunningLayout()}GetTimelineManager(){return this._timelineManager}GetTransitionManager(){return this._transitionManager}GetAssetManager(){return this._assetManager}LoadImage(opts){return this._assetManager.LoadImage(opts)}CreateInstance(objectClass,
layer,x,y,createHierarchy){return this.CreateInstanceFromData(objectClass,layer,false,x,y,false,createHierarchy)}CreateInstanceFromData(instData_or_objectClass,layer,isStartupInstance,x,y,skipSiblings,createHierarchy){let instData=null;let objectClass=null;if(instData_or_objectClass instanceof C3.ObjectClass){objectClass=instData_or_objectClass;if(objectClass.IsFamily()){const members=objectClass.GetFamilyMembers();const i=Math.floor(this.Random()*members.length);objectClass=members[i]}instData=objectClass.GetDefaultInstanceData()}else{instData=
instData_or_objectClass;objectClass=this.GetObjectClassByIndex(instData[1])}const isWorld=objectClass.GetPlugin().IsWorldType();if(this._isLoading&&isWorld&&!objectClass.IsOnLoaderLayout())return null;const originalLayer=layer;if(!isWorld)layer=null;let uid;if(isStartupInstance&&!skipSiblings&&instData&&!this._instancesByUid.has(instData[2]))uid=instData[2];else uid=this._nextUid++;const worldData=instData?instData[0]:null;const inst=C3.New(C3.Instance,{runtime:this,objectType:objectClass,layer:layer,
worldData,instVarData:instData?instData[3]:null,uid:uid});this._instancesByUid.set(uid,inst);let wi=null;if(isWorld){wi=inst.GetWorldInfo();if(typeof x!=="undefined"&&typeof y!=="undefined"){wi.SetX(x);wi.SetY(y)}objectClass._SetAnyCollisionCellChanged(true)}if(layer){layer._AddInstance(inst,true);if(layer.GetParallaxX()!==1||layer.GetParallaxY()!==1)objectClass._SetAnyInstanceParallaxed(true);layer.GetLayout().MaybeLoadTexturesFor(objectClass)}this._objectCount++;if(objectClass.IsInContainer()&&
!isStartupInstance&&!skipSiblings){for(const containerType of objectClass.GetContainer().objectTypes()){if(containerType===objectClass)continue;const siblingInst=this.CreateInstanceFromData(containerType,originalLayer,false,wi?wi.GetX():x,wi?wi.GetY():y,true,false);inst._AddSibling(siblingInst)}for(const s of inst.siblings()){s._AddSibling(inst);for(const s2 of inst.siblings())if(s!==s2)s._AddSibling(s2)}}if(isWorld&&!isStartupInstance&&!!createHierarchy)this._CreateChildInstancesFromData(inst,worldData,
wi,layer,x,y);if(objectClass.IsInContainer()&&!isStartupInstance&&!skipSiblings&&!!createHierarchy)for(const sibling of inst.siblings()){const swi=sibling.GetWorldInfo();const sWorldData=sibling.GetObjectClass().GetDefaultInstanceData()[0];this._CreateChildInstancesFromData(sibling,sWorldData,swi,layer,swi.GetX(),swi.GetY())}if(!skipSiblings&&!!createHierarchy){if(typeof x==="undefined")x=worldData[0];if(typeof y==="undefined")y=worldData[1];const pwi=wi.GetTopParent();const newX=x-wi.GetX()+pwi.GetX();
const newY=y-wi.GetY()+pwi.GetY();pwi.SetXY(newX,newY)}objectClass._SetIIDsStale();const instPropertyData=instData?C3.cloneArray(instData[5]):null;const behPropertyData=instData?instData[4].map(bp=>C3.cloneArray(bp)):null;const hasTilemap=isWorld&&worldData&&worldData[13];if(hasTilemap)inst._SetHasTilemap();inst._CreateSdkInstance(instPropertyData,behPropertyData);if(hasTilemap){const tilemapData=worldData[13];inst.GetSdkInstance().LoadTilemapData(tilemapData[2],tilemapData[0],tilemapData[1])}this._instancesPendingCreate.push(inst);
this._hasPendingInstances=true;if(this.IsDebug())C3Debugger.InstanceCreated(inst);return inst}_CreateChildInstancesFromData(parentInstance,parentWorldData,parentWorldInfo,layer,x,y){const childrenData=parentWorldInfo.GetSceneGraphChildrenExportData();if(!childrenData)return;if(typeof x==="undefined")x=parentWorldData[0];if(typeof y==="undefined")y=parentWorldData[1];const sceneGraphSiblings=new Set;const parentX=parentWorldData[0];const parentY=parentWorldData[1];for(const childData of childrenData){const childLayoutSID=
childData[0];const childLayerIndex=childData[1];const childUID=childData[2];const childFlags=childData[3];const childIsInContainer=!!childData[4];const layout=this._layoutManager.GetLayoutBySID(childLayoutSID);const l=layout.GetLayer(childLayerIndex);const childInstData=l.GetInitialInstanceData(childUID);const childObjectClass=this.GetObjectClassByIndex(childInstData[1]);const hasSibling=parentInstance.HasSibling(childObjectClass);const siblingProcessed=sceneGraphSiblings.has(childObjectClass);if(hasSibling&&
!siblingProcessed&&childIsInContainer){const childInst=parentInstance.GetSibling(childObjectClass);const childX=x+childInstData[0][0]-parentX;const childY=y+childInstData[0][1]-parentY;childInst.GetWorldInfo().SetXY(childX,childY);parentInstance.AddChild(childInst,{transformX:!!(childFlags>>0&1),transformY:!!(childFlags>>1&1),transformWidth:!!(childFlags>>2&1),transformHeight:!!(childFlags>>3&1),transformAngle:!!(childFlags>>4&1),destroyWithParent:!!(childFlags>>5&1),transformZElevation:!!(childFlags>>
6&1)});sceneGraphSiblings.add(childObjectClass)}else{const childX=x+childInstData[0][0]-parentX;const childY=y+childInstData[0][1]-parentY;const childInst=this.CreateInstanceFromData(childInstData,layer,false,childX,childY,false,true);parentInstance.AddChild(childInst,{transformX:!!(childFlags>>0&1),transformY:!!(childFlags>>1&1),transformWidth:!!(childFlags>>2&1),transformHeight:!!(childFlags>>3&1),transformAngle:!!(childFlags>>4&1),destroyWithParent:!!(childFlags>>5&1),transformZElevation:!!(childFlags>>
6&1)})}}}DestroyInstance(inst){if(this._instancesToReleaseAtEndOfTick.has(inst))return;const objectClass=inst.GetObjectClass();let s=this._instancesPendingDestroy.get(objectClass);if(s){if(s.has(inst))return;s.add(inst)}else{s=new Set;s.add(inst);this._instancesPendingDestroy.set(objectClass,s)}if(this.IsDebug())C3Debugger.InstanceDestroyed(inst);inst._MarkDestroyed();this._hasPendingInstances=true;if(inst.IsInContainer())for(const s of inst.siblings())this.DestroyInstance(s);for(const c of inst.children())if(c.GetDestroyWithParent())this.DestroyInstance(c);
if(!this._layoutManager.IsEndingLayout()&&!this._isLoadingState){const eventSheetManager=this.GetEventSheetManager();eventSheetManager.BlockFlushingInstances(true);inst._TriggerOnDestroyed();eventSheetManager.BlockFlushingInstances(false)}inst._FireDestroyedScriptEvents(this._layoutManager.IsEndingLayout())}FlushPendingInstances(){if(!this._hasPendingInstances)return;this._isFlushingPendingInstances=true;this._FlushInstancesPendingCreate();this._FlushInstancesPendingDestroy();this._isFlushingPendingInstances=
false;this._hasPendingInstances=false;this.UpdateRender()}_FlushInstancesPendingCreate(){for(const inst of this._instancesPendingCreate){const objectType=inst.GetObjectClass();objectType._AddInstance(inst);for(const family of objectType.GetFamilies()){family._AddInstance(inst);family._SetIIDsStale()}}C3.clearArray(this._instancesPendingCreate)}_FlushInstancesPendingDestroy(){this._dispatcher.SetDelayRemoveEventsEnabled(true);for(const [objectClass,s]of this._instancesPendingDestroy.entries()){this._FlushInstancesPendingDestroyForObjectClass(objectClass,
s);s.clear()}this._instancesPendingDestroy.clear();this._dispatcher.SetDelayRemoveEventsEnabled(false)}_FlushInstancesPendingDestroyForObjectClass(objectClass,s){for(const inst of s){const instanceDestroyEvent=this._eventObjects["instancedestroy"];instanceDestroyEvent.instance=inst;this._dispatcher.dispatchEvent(instanceDestroyEvent);this._instancesByUid.delete(inst.GetUID());const wi=inst.GetWorldInfo();if(wi){wi._RemoveFromCollisionCells();wi._RemoveFromRenderCells()}this._instancesToReleaseAtEndOfTick.add(inst);
this._objectCount--}C3.arrayRemoveAllInSet(objectClass.GetInstances(),s);objectClass._SetIIDsStale();this._instancesToReleaseAffectedObjectClasses.add(objectClass);if(objectClass.GetInstances().length===0)objectClass._SetAnyInstanceParallaxed(false);for(const family of objectClass.GetFamilies()){C3.arrayRemoveAllInSet(family.GetInstances(),s);family._SetIIDsStale();this._instancesToReleaseAffectedObjectClasses.add(family)}if(objectClass.GetPlugin().IsWorldType()){const layers=new Set([...s].map(i=>
i.GetWorldInfo().GetLayer()));for(const layer of layers)layer._RemoveAllInstancesInSet(s)}}_GetInstancesPendingCreate(){return this._instancesPendingCreate}_GetNewUID(){return this._nextUid++}_MapInstanceByUID(uid,inst){this._instancesByUid.set(uid,inst)}_OnWebGLContextLost(){this._dispatcher.dispatchEvent(C3.New(C3.Event,"webglcontextlost"));this.SetSuspended(true);for(const objectClass of this._allObjectClasses)if(!objectClass.IsFamily()&&objectClass.HasLoadedTextures())objectClass.ReleaseTextures();
const runningLayout=this.GetMainRunningLayout();if(runningLayout)runningLayout._OnWebGLContextLost();C3.ImageInfo.OnWebGLContextLost();C3.ImageAsset.OnWebGLContextLost()}async _OnWebGLContextRestored(){await this.GetMainRunningLayout()._Load(null,this.GetWebGLRenderer());this._dispatcher.dispatchEvent(C3.New(C3.Event,"webglcontextrestored"));this.SetSuspended(false);this.UpdateRender()}_OnVisibilityChange(e){this.SetSuspended(e["hidden"])}_OnWindowBlur(e){if(!this.IsPreview()||!this._pauseOnBlur||
C3.Platform.IsMobile)return;if(!e.data["parentHasFocus"]){this.SetSuspended(true);this._isPausedOnBlur=true}}_OnWindowFocus(){if(!this._isPausedOnBlur)return;this.SetSuspended(false);this._isPausedOnBlur=false}_RequestAnimationFrame(){const tickCallbacks=this._tickCallbacks;if(this._framerateMode==="vsync"){if(this._rafId===-1)this._rafId=C3.RequestPostAnimationFrame(tickCallbacks.normal)}else if(this._framerateMode==="unlimited-tick"){if(this._ruafId===-1)this._ruafId=C3.RequestUnlimitedAnimationFrame(tickCallbacks.tickOnly);
if(this._rafId===-1)this._rafId=C3.RequestPostAnimationFrame(tickCallbacks.renderOnly)}else if(this._ruafId===-1)this._ruafId=C3.RequestUnlimitedAnimationFrame(tickCallbacks.normal)}_CancelAnimationFrame(){if(this._rafId!==-1){C3.CancelPostAnimationFrame(this._rafId);this._rafId=-1}if(this._ruafId!==-1){C3.CancelUnlimitedAnimationFrame(this._ruafId);this._ruafId=-1}}IsSuspended(){return this._suspendCount>0}SetSuspended(s){const wasSuspended=this.IsSuspended();this._suspendCount+=s?1:-1;if(this._suspendCount<
0)this._suspendCount=0;const isSuspended=this.IsSuspended();if(!wasSuspended&&isSuspended){console.log("[Construct 3] Suspending");this._CancelAnimationFrame();this._dispatcher.dispatchEvent(C3.New(C3.Event,"suspend"));this.Trigger(C3.Plugins.System.Cnds.OnSuspend,null,null)}else if(wasSuspended&&!isSuspended){console.log("[Construct 3] Resuming");const now=performance.now();this._lastTickTime=now;this._fpsLastTime=now;this._fpsFrameCount=0;this._fps=0;this._mainThreadTime=0;this._mainThreadTimeCounter=
0;this._dispatcher.dispatchEvent(C3.New(C3.Event,"resume"));this.Trigger(C3.Plugins.System.Cnds.OnResume,null,null);if(!this.HitBreakpoint())this.Tick(now)}}_AddBehInstToTick(behSdkInst){this._behInstsToTick.Add(behSdkInst)}_AddBehInstToPostTick(behSdkInst){this._behInstsToPostTick.Add(behSdkInst)}_AddBehInstToTick2(behSdkInst){this._behInstsToTick2.Add(behSdkInst)}_RemoveBehInstToTick(behSdkInst){this._behInstsToTick.Remove(behSdkInst)}_RemoveBehInstToPostTick(behSdkInst){this._behInstsToPostTick.Remove(behSdkInst)}_RemoveBehInstToTick2(behSdkInst){this._behInstsToTick2.Remove(behSdkInst)}_BehaviorTick(){this._behInstsToTick.SetQueueingEnabled(true);
for(const bi of this._behInstsToTick)bi.Tick();this._behInstsToTick.SetQueueingEnabled(false)}_BehaviorPostTick(){this._behInstsToPostTick.SetQueueingEnabled(true);for(const bi of this._behInstsToPostTick)bi.PostTick();this._behInstsToPostTick.SetQueueingEnabled(false)}_BehaviorTick2(){this._behInstsToTick2.SetQueueingEnabled(true);for(const bi of this._behInstsToTick2)bi.Tick2();this._behInstsToTick2.SetQueueingEnabled(false)}*_DebugBehaviorTick(){this._behInstsToTick.SetQueueingEnabled(true);for(const bi of this._behInstsToTick){const ret=
bi.Tick();if(C3.IsIterator(ret))yield*ret}this._behInstsToTick.SetQueueingEnabled(false)}*_DebugBehaviorPostTick(){this._behInstsToPostTick.SetQueueingEnabled(true);for(const bi of this._behInstsToPostTick){const ret=bi.PostTick();if(C3.IsIterator(ret))yield*ret}this._behInstsToPostTick.SetQueueingEnabled(false)}*_DebugBehaviorTick2(){this._behInstsToTick2.SetQueueingEnabled(true);for(const bi of this._behInstsToTick2){const ret=bi.Tick2();if(C3.IsIterator(ret))yield*ret}this._behInstsToTick2.SetQueueingEnabled(false)}async Tick(timestamp,
isDebugStep,mode){this._hasStartedTicking=true;const isBackgroundWake=mode==="background-wake";const shouldRender=mode!=="background-wake"&&mode!=="skip-render";if(!this._hasStarted||this.IsSuspended()&&!isDebugStep&&!isBackgroundWake)return;const startTime=performance.now();this._isInTick=true;if(!timestamp)timestamp=startTime;this._MeasureDt(timestamp);const beforePreTickRet=this.Step_BeforePreTick();if(this.IsDebugging())await beforePreTickRet;const pretickRet=this._dispatcher.dispatchEventAndWait_AsyncOptional(this._eventObjects["pretick"]);
if(pretickRet instanceof Promise)await pretickRet;const afterPreTickRet=this.Step_AfterPreTick();if(this.IsDebugging())await afterPreTickRet;if(this._NeedsHandleSaveOrLoad())await this._HandleSaveOrLoad();if(this.GetLayoutManager().IsPendingChangeMainLayout())await this._MaybeChangeLayout();const runEventsRet=this.Step_RunEventsEtc();if(this.IsDebugging())await runEventsRet;if(shouldRender)this.Render();if(!this.IsSuspended()&&!isBackgroundWake)this._RequestAnimationFrame();this._tickCount++;this._tickCountNoSave++;
this._execCount++;this._isInTick=false;this._mainThreadTimeCounter+=performance.now()-startTime}async Step_BeforePreTick(){const eventSheetManager=this._eventSheetManager;const isDebug=this.IsDebug();this.FlushPendingInstances();eventSheetManager.BlockFlushingInstances(true);this.PushCurrentLayout(this.GetMainRunningLayout());if(isDebug)C3Debugger.StartMeasuringTime();if(this.IsDebugging())await eventSheetManager.DebugRunScheduledWaits();else eventSheetManager.RunScheduledWaits();if(isDebug)C3Debugger.AddEventsTime();
this.PopCurrentLayout();eventSheetManager.BlockFlushingInstances(false);this.FlushPendingInstances();eventSheetManager.BlockFlushingInstances(true)}async Step_AfterPreTick(){const isDebug=this.IsDebug();const isDebugging=this.IsDebugging();const dispatcher=this._dispatcher;const eventObjects=this._eventObjects;const userScriptEventObjects=this._userScriptEventObjects;if(isDebug)C3Debugger.StartMeasuringTime();if(isDebugging)await this.DebugIterateAndBreak(this._DebugBehaviorTick());else this._BehaviorTick();
if(isDebugging)await this.DebugIterateAndBreak(this._DebugBehaviorPostTick());else this._BehaviorPostTick();if(isDebug)C3Debugger.AddBehaviorTickTime();if(isDebug)C3Debugger.StartMeasuringTime();if(isDebugging)await this.DebugFireGeneratorEventAndBreak(eventObjects["tick"]);else dispatcher.dispatchEvent(eventObjects["tick"]);if(isDebug)C3Debugger.AddPluginTickTime();this._eventSheetManager.BlockFlushingInstances(false);this.DispatchUserScriptEvent(userScriptEventObjects["tick"])}async Step_RunEventsEtc(){const eventSheetManager=
this._eventSheetManager;const dispatcher=this._dispatcher;const eventObjects=this._eventObjects;const isDebug=this.IsDebug();const isDebugging=this.IsDebugging();if(isDebug)C3Debugger.StartMeasuringTime();if(isDebugging)await eventSheetManager.DebugRunEvents(this._layoutManager);else eventSheetManager.RunEvents(this._layoutManager);if(isDebug)C3Debugger.AddEventsTime();this._collisionEngine.ClearRegisteredCollisions();if(this._instancesToReleaseAtEndOfTick.size>0){dispatcher.SetDelayRemoveEventsEnabled(true);
for(const objectClass of this._instancesToReleaseAffectedObjectClasses)objectClass.GetSolStack().RemoveInstances(this._instancesToReleaseAtEndOfTick);this._instancesToReleaseAffectedObjectClasses.clear();this._eventSheetManager.RemoveInstancesFromScheduledWaits(this._instancesToReleaseAtEndOfTick);for(const inst of this._instancesToReleaseAtEndOfTick)inst.Release();this._instancesToReleaseAtEndOfTick.clear();dispatcher.SetDelayRemoveEventsEnabled(false)}this._isLayoutFirstTick=false;eventSheetManager.BlockFlushingInstances(true);
if(isDebug)C3Debugger.StartMeasuringTime();if(isDebugging)await this.DebugIterateAndBreak(this._DebugBehaviorTick2());else this._BehaviorTick2();if(isDebug)C3Debugger.AddBehaviorTickTime();if(isDebug)C3Debugger.StartMeasuringTime();if(isDebugging)await this.DebugFireGeneratorEventAndBreak(eventObjects["tick2"]);else dispatcher.dispatchEvent(eventObjects["tick2"]);if(isDebug)C3Debugger.AddPluginTickTime();eventSheetManager.BlockFlushingInstances(false);if(isDebugging)await eventSheetManager.RunQueuedDebugTriggersAsync()}async _MaybeChangeLayout(){const layoutManager=
this.GetLayoutManager();let i=0;while(layoutManager.IsPendingChangeMainLayout()&&i++<10)await this._DoChangeLayout(layoutManager.GetPendingChangeMainLayout())}_MeasureDt(timestamp){if(this._lastTickTime!==0){const msDiff=Math.max(timestamp-this._lastTickTime,0);this._dt1=msDiff/1E3;const maxDt1=1/this._minimumFramerate;if(this._dt1>.5)this._dt1=0;else if(this._dt1>maxDt1)this._dt1=maxDt1}this._lastTickTime=timestamp;this._dt=this._dt1*this._timeScale;this._gameTime.Add(this._dt);this._wallTime.Add(this._dt1);
if(this._canvasManager)this._canvasManager._UpdateTick();if(timestamp-this._fpsLastTime>=1E3){this._fpsLastTime+=1E3;if(timestamp-this._fpsLastTime>=1E3)this._fpsLastTime=timestamp;this._fps=this._fpsFrameCount;this._fpsFrameCount=0;this._mainThreadTime=Math.min(this._mainThreadTimeCounter/1E3,1);this._mainThreadTimeCounter=0;if(this._canvasManager)this._canvasManager._Update1sFrameRange();this._collisionEngine._Update1sStats();if(this.IsDebug())C3Debugger.Update1sPerfStats()}this._fpsFrameCount++}async _DoChangeLayout(changeToLayout){const dispatcher=
this._dispatcher;const layoutManager=this.GetLayoutManager();const prevLayout=layoutManager.GetMainRunningLayout();await prevLayout._StopRunning();prevLayout._Unload(changeToLayout,this.GetWebGLRenderer());if(prevLayout===changeToLayout)this._eventSheetManager.ClearAllScheduledWaits();this._collisionEngine.ClearRegisteredCollisions();dispatcher.dispatchEvent(this._eventObjects["beforelayoutchange"]);C3.Asyncify.SetHighThroughputMode(true);await changeToLayout._Load(prevLayout,this.GetWebGLRenderer());
C3.Asyncify.SetHighThroughputMode(false);await changeToLayout._StartRunning(false);dispatcher.dispatchEvent(this._eventObjects["layoutchange"]);this.UpdateRender();this._isLayoutFirstTick=true;this.FlushPendingInstances()}UpdateRender(){this._needRender=true}GetWebGLRenderer(){if(!this._canvasManager)return null;return this._canvasManager.GetWebGLRenderer()}GetRenderer(){return this.GetWebGLRenderer()}Render(){if(!this._canvasManager||this._canvasManager.IsWebGLContextLost())return;const renderer=
this.GetWebGLRenderer();renderer.Start();renderer.CheckForQueryResults();if(!this._needRender){renderer.IncrementFrameNumber();return}const isDebug=this.IsDebug();if(isDebug)C3Debugger.StartMeasuringTime();this._needRender=false;let frameQuery=null;if(renderer.SupportsGPUProfiling()){frameQuery=this._canvasManager.GetGPUFrameTimingsBuffer().AddTimeElapsedQuery();renderer.StartQuery(frameQuery)}renderer.SetTextureFillMode();renderer.SetAlphaBlend();renderer.SetColorRgba(1,1,1,1);renderer.SetRenderTarget(null);
renderer.SetTexture(null);const layout=this._layoutManager.GetMainRunningLayout();layout.Draw(renderer);if(frameQuery)renderer.EndQuery(frameQuery);renderer.Finish();if(isDebug){C3Debugger.AddDrawCallsTime();C3Debugger.UpdateInspectHighlight()}if(this._canvasManager)this._canvasManager._MaybeTakeSnapshot()}Trigger(method,inst,behaviorType){if(!this._hasStarted)return false;const isTopLevel=!this._isInTick&&!this._eventSheetManager.IsInTrigger();let startTime=0;if(isTopLevel)startTime=performance.now();
const isDebug=this.IsDebug();if(isDebug)this.SetDebuggingEnabled(false);const ret=this._eventSheetManager._Trigger(this._layoutManager,method,inst,behaviorType);if(isTopLevel){const triggerTime=performance.now()-startTime;this._mainThreadTimeCounter+=triggerTime;if(isDebug)C3Debugger.AddTriggersTime(triggerTime)}if(isDebug)this.SetDebuggingEnabled(true);return ret}DebugTrigger(method,inst,behaviorType){if(!this.IsDebug())return this.Trigger(method,inst,behaviorType);if(this.HitBreakpoint())throw new Error("called DebugTrigger() while stopped on breakpoint");
if(!this._isInTick&&!this._eventSheetManager.IsInTrigger())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this._eventSheetManager._DebugTrigger(this._layoutManager,method,inst,behaviorType)}async TriggerAsync(method,inst,behaviorType){if(!this.IsDebugging())return this.Trigger(method,inst,behaviorType);if(!this._hasStarted)return false;if(this.HitBreakpoint())return this._eventSheetManager.QueueDebugTrigger(method,inst,behaviorType);if(!this.GetMainRunningLayout())return this._eventSheetManager.QueueTrigger(method,
inst,behaviorType);const startTime=performance.now();const iter=this._eventSheetManager._DebugTrigger(this._layoutManager,method,inst,behaviorType);let result=iter.next();while(!result.done){await this.DebugBreak(result.value);result=iter.next()}if(!this.IsSuspended()&&!this._eventSheetManager.IsInTrigger()){await this._eventSheetManager.RunQueuedDebugTriggersAsync();if(this._hasStartedTicking&&!this._isInTick)this._RequestAnimationFrame()}this._mainThreadTimeCounter+=performance.now()-startTime;
return result.value}FastTrigger(method,inst,value){const isDebug=this.IsDebug();if(isDebug)this.SetDebuggingEnabled(false);const ret=this._eventSheetManager._FastTrigger(this._layoutManager,method,inst,value);if(isDebug)this.SetDebuggingEnabled(true);return ret}DebugFastTrigger(method,inst,value){return this._eventSheetManager._DebugFastTrigger(this._layoutManager,method,inst,value)}ScheduleTriggers(f){return this._scheduleTriggersThrottle.Add(f)}PushCurrentLayout(layout){this._currentLayoutStack.push(layout)}PopCurrentLayout(){if(!this._currentLayoutStack.length)throw new Error("layout stack empty");
this._currentLayoutStack.pop()}GetCurrentLayout(){if(!this._currentLayoutStack.length)return this.GetMainRunningLayout();return this._currentLayoutStack[this._currentLayoutStack.length-1]}GetDt(inst){if(!inst||inst.GetTimeScale()===-1)return this._dt;return this._dt1*inst.GetTimeScale()}_GetDtFast(){return this._dt}GetDt1(){return this._dt1}GetTimeScale(){return this._timeScale}SetTimeScale(ts){if(isNaN(ts)||ts<0)ts=0;this._timeScale=ts}SetMinimumFramerate(fps){this._minimumFramerate=C3.clamp(fps,
1,120)}GetMinimumFramerate(){return this._minimumFramerate}GetFPS(){return this._fps}GetMainThreadTime(){return this._mainThreadTime}GetStartTime(){return this._startTime}GetGameTime(){return this._gameTime.Get()}GetWallTime(){return this._wallTime.Get()}GetTickCount(){return this._tickCount}GetTickCountNoSave(){return this._tickCountNoSave}IncrementExecCount(){++this._execCount}GetExecCount(){return this._execCount}GetObjectCount(){return this._objectCount}GetProjectName(){return this._projectName}GetProjectVersion(){return this._projectVersion}GetProjectUniqueId(){return this._projectUniqueId}GetAppId(){return this._appId}GetInstanceByUID(uid){if(this._isLoadingState)throw new Error("cannot call while loading state - wait until afterload event");
return this._instancesByUid.get(uid)||null}_RefreshUidMap(){this._instancesByUid.clear();for(const objectClass of this._allObjectClasses){if(objectClass.IsFamily())continue;for(const inst of objectClass.GetInstances())this._instancesByUid.set(inst.GetUID(),inst)}}IsPreview(){return this._exportType==="preview"}IsDebug(){return this._isDebug}GetExportType(){return this._exportType}IsCordova(){return this._exportType==="cordova"}IsAndroidWebView(){return C3.Platform.OS==="Android"&&(this._exportType===
"cordova"||this._exportType==="playable-ad"||this._exportType==="instant-games")}IsiOSCordova(){return this._isiOSCordova}IsiOSWebView(){return this._isiOSWebView}GetCollisionEngine(){return this._collisionEngine}GetSolidBehavior(){return this._pluginManager.GetSolidBehavior()}GetJumpthruBehavior(){return this._pluginManager.GetJumpthruBehavior()}IsLayoutFirstTick(){return this._isLayoutFirstTick}SetPixelRoundingEnabled(e){e=!!e;if(this._isPixelRoundingEnabled===e)return;this._isPixelRoundingEnabled=
e;this.UpdateRender()}IsPixelRoundingEnabled(){return this._isPixelRoundingEnabled}SaveToSlot(slotName){this._saveToSlotName=slotName}LoadFromSlot(slotName){this._loadFromSlotName=slotName}LoadFromJsonString(str){this._loadFromJson=str}GetLastSaveJsonString(){return this._lastSaveJson}_NeedsHandleSaveOrLoad(){return!!(this._saveToSlotName||this._loadFromSlotName||this._loadFromJson!==null)}async _HandleSaveOrLoad(){if(this._saveToSlotName){this.FlushPendingInstances();await this._DoSaveToSlot(this._saveToSlotName);
this._ClearSaveOrLoad()}if(this._loadFromSlotName){await this._DoLoadFromSlot(this._loadFromSlotName);this._ClearSaveOrLoad();if(this.IsDebug())C3Debugger.StepIfPausedInDebugger()}if(this._loadFromJson!==null){this.FlushPendingInstances();try{await this._DoLoadFromJsonString(this._loadFromJson);this._lastSaveJson=this._loadFromJson;await this.TriggerAsync(C3.Plugins.System.Cnds.OnLoadComplete,null);this._lastSaveJson=""}catch(err){console.error("[Construct 3] Failed to load state from JSON string: ",
err);await this.TriggerAsync(C3.Plugins.System.Cnds.OnLoadFailed,null)}this._ClearSaveOrLoad()}}_ClearSaveOrLoad(){this._saveToSlotName="";this._loadFromSlotName="";this._loadFromJson=null}_GetProjectStorage(){if(!this._projectStorage)this._projectStorage=localforage.createInstance({name:"c3-localstorage-"+this.GetProjectUniqueId(),description:this.GetProjectName()});return this._projectStorage}_GetSavegamesStorage(){if(!this._savegamesStorage)this._savegamesStorage=localforage.createInstance({name:"c3-savegames-"+
this.GetProjectUniqueId(),description:this.GetProjectName()});return this._savegamesStorage}async _DoSaveToSlot(slotName){const saveJson=await this._SaveToJsonString();try{await this._GetSavegamesStorage().setItem(slotName,saveJson);console.log("[Construct 3] Saved state to storage ("+saveJson.length+" chars)");this._lastSaveJson=saveJson;await this.TriggerAsync(C3.Plugins.System.Cnds.OnSaveComplete,null);this._lastSaveJson=""}catch(err){console.error("[Construct 3] Failed to save state to storage: ",
err);await this.TriggerAsync(C3.Plugins.System.Cnds.OnSaveFailed,null)}}async _DoLoadFromSlot(slotName){try{const loadJson=await this._GetSavegamesStorage().getItem(slotName);if(!loadJson)throw new Error("empty slot");console.log("[Construct 3] Loaded state from storage ("+loadJson.length+" chars)");await this._DoLoadFromJsonString(loadJson);this._lastSaveJson=loadJson;await this.TriggerAsync(C3.Plugins.System.Cnds.OnLoadComplete,null);this._lastSaveJson=""}catch(err){console.error("[Construct 3] Failed to load state from storage: ",
err);await this.TriggerAsync(C3.Plugins.System.Cnds.OnLoadFailed,null)}}async _SaveToJsonString(){const o={"c3save":true,"version":1,"rt":{"time":this.GetGameTime(),"walltime":this.GetWallTime(),"timescale":this.GetTimeScale(),"tickcount":this.GetTickCount(),"execcount":this.GetExecCount(),"next_uid":this._nextUid,"running_layout":this.GetMainRunningLayout().GetSID(),"start_time_offset":Date.now()-this._startTime},"types":{},"layouts":{},"events":this._eventSheetManager._SaveToJson(),"timelines":this._timelineManager._SaveToJson(),
"user_script_data":null};for(const objectClass of this._allObjectClasses){if(objectClass.IsFamily()||objectClass.HasNoSaveBehavior())continue;o["types"][objectClass.GetSID().toString()]=objectClass._SaveToJson()}for(const layout of this._layoutManager.GetAllLayouts())o["layouts"][layout.GetSID().toString()]=layout._SaveToJson();const saveEvent=this._CreateUserScriptEvent("save");saveEvent.saveData=null;await this.DispatchUserScriptEventAsyncWait(saveEvent);o["user_script_data"]=saveEvent.saveData;
return JSON.stringify(o)}IsLoadingState(){return this._isLoadingState}async _DoLoadFromJsonString(jsonStr){const o=JSON.parse(jsonStr);if(o["c2save"])throw new Error("C2 saves are incompatible with C3 runtime");if(!o["c3save"])throw new Error("not valid C3 save data");if(o["version"]>1)throw new Error("C3 save data from future version");this._isLoadingState=true;const rt=o["rt"];this._gameTime.Set(rt["time"]);this._wallTime.Set(rt["walltime"]);this._timeScale=rt["timescale"];this._tickCount=rt["tickcount"];
this._execCount=rt["execcount"];this._startTime=Date.now()-rt["start_time_offset"];const layoutSid=rt["running_layout"];if(layoutSid!==this.GetMainRunningLayout().GetSID()){const changeToLayout=this._layoutManager.GetLayoutBySID(layoutSid);if(changeToLayout)await this._DoChangeLayout(changeToLayout);else return}for(const [sidStr,data]of Object.entries(o["types"])){const sid=parseInt(sidStr,10);const objectClass=this.GetObjectClassBySID(sid);if(!objectClass||objectClass.IsFamily()||objectClass.HasNoSaveBehavior())continue;
objectClass._LoadFromJson(data)}this.FlushPendingInstances();this._RefreshUidMap();this._isLoadingState=false;this._nextUid=rt["next_uid"];for(const [sidStr,data]of Object.entries(o["layouts"])){const sid=parseInt(sidStr,10);const layout=this._layoutManager.GetLayoutBySID(sid);if(!layout)continue;layout._LoadFromJson(data)}this._eventSheetManager._LoadFromJson(o["events"]);for(const objectClass of this._allObjectClasses){if(objectClass.IsFamily()||!objectClass.IsInContainer())continue;for(const inst of objectClass.GetInstances()){const iid=
inst.GetIID();for(const otherType of objectClass.GetContainer().objectTypes()){if(otherType===objectClass)continue;const otherInstances=otherType.GetInstances();if(iid<0||iid>=otherInstances.length)throw new Error("missing sibling instance");inst._AddSibling(otherInstances[iid])}}}this._timelineManager._LoadFromJson(o["timelines"]);this._dispatcher.dispatchEvent(C3.New(C3.Event,"afterload"));const loadEvent=this._CreateUserScriptEvent("load");loadEvent.saveData=o["user_script_data"];await this.DispatchUserScriptEventAsyncWait(loadEvent);
this.UpdateRender()}async AddJobWorkerScripts(scripts){const blobs=await Promise.all(scripts.map(url=>this._assetManager.FetchBlob(url)));const blobUrls=blobs.map(b=>URL.createObjectURL(b));this._jobScheduler.ImportScriptsToJobWorkers(blobUrls)}AddJobWorkerBlob(blob,id){this._jobScheduler.SendBlobToJobWorkers(blob,id)}AddJobWorkerBuffer(buffer,id){this._jobScheduler.SendBufferToJobWorkers(buffer,id)}AddJob(type,params,transferables){return this._jobScheduler.AddJob(type,params,transferables)}BroadcastJob(type,
params,transferables){return this._jobScheduler.BroadcastJob(type,params,transferables)}InvokeDownload(url,filename){this.PostComponentMessageToDOM("runtime","invoke-download",{"url":url,"filename":filename})}async RasterSvgImage(blob,imageWidth,imageHeight,surfaceWidth,surfaceHeight,imageBitmapOpts){surfaceWidth=surfaceWidth||imageWidth;surfaceHeight=surfaceHeight||imageHeight;if(this.IsInWorker()){const result=await this.PostComponentMessageToDOMAsync("runtime","raster-svg-image",{"blob":blob,"imageWidth":imageWidth,
"imageHeight":imageHeight,"surfaceWidth":surfaceWidth,"surfaceHeight":surfaceHeight,"imageBitmapOpts":imageBitmapOpts});return result["imageBitmap"]}else{const canvas=await self["C3_RasterSvgImageBlob"](blob,imageWidth,imageHeight,surfaceWidth,surfaceHeight);if(imageBitmapOpts)return await self.createImageBitmap(canvas,imageBitmapOpts);else return canvas}}async GetSvgImageSize(blob){if(this.IsInWorker())return await this.PostComponentMessageToDOMAsync("runtime","get-svg-image-size",{"blob":blob});
else return await self["C3_GetSvgImageSize"](blob)}RequestDeviceOrientationEvent(){if(this._didRequestDeviceOrientationEvent)return;this._didRequestDeviceOrientationEvent=true;this.PostComponentMessageToDOM("runtime","enable-device-orientation")}RequestDeviceMotionEvent(){if(this._didRequestDeviceMotionEvent)return;this._didRequestDeviceMotionEvent=true;this.PostComponentMessageToDOM("runtime","enable-device-motion")}Random(){return this._randomNumberCallback()}SetRandomNumberGeneratorCallback(f){this._randomNumberCallback=
f}_GetRemotePreviewStatusInfo(){return{"fps":this.GetFPS(),"cpu":this.GetMainThreadTime(),"gpu":this.GetGPUUtilisation(),"layout":this.GetMainRunningLayout()?this.GetMainRunningLayout().GetName():"","renderer":this.GetWebGLRenderer().GetUnmaskedRenderer()}}HitBreakpoint(){if(!this.IsDebug())return false;return C3Debugger.HitBreakpoint()}DebugBreak(eventObject){if(!this.IsDebugging())return Promise.resolve();return C3Debugger.DebugBreak(eventObject)}DebugBreakNext(){if(!this.IsDebugging())return false;
return C3Debugger.BreakNext()}SetDebugBreakpointsEnabled(e){this._breakpointsEnabled=!!e;this._UpdateDebuggingFlag()}AreDebugBreakpointsEnabled(){return this._breakpointsEnabled}IsDebugging(){return this._isDebugging}SetDebuggingEnabled(d){if(d)this._debuggingDisabled--;else this._debuggingDisabled++;this._UpdateDebuggingFlag()}_UpdateDebuggingFlag(){this._isDebugging=this.IsDebug()&&this._breakpointsEnabled&&this._debuggingDisabled===0}IsCPUProfiling(){return this.IsDebug()&&C3Debugger.IsCPUProfiling()}IsGPUProfiling(){return this.IsDebug()&&
this.GetWebGLRenderer().SupportsGPUProfiling()&&C3Debugger.IsGPUProfiling()}async DebugIterateAndBreak(iter){if(!iter)return;for(const breakEventObject of iter)await this.DebugBreak(breakEventObject)}DebugFireGeneratorEventAndBreak(event){return this.DebugIterateAndBreak(this._dispatcher.dispatchGeneratorEvent(event))}_InvokeFunctionFromJS(e){return this._eventSheetManager._InvokeFunctionFromJS(e["name"],e["params"])}GetIRuntime(){return this._iRuntime}_CreateUserScriptEvent(name){const e=C3.New(C3.Event,
name,false);e.runtime=this._iRuntime;return e}_InitScriptInterfaces(){const objectDescriptors={};for(const objectClass of this._allObjectClasses)objectDescriptors[objectClass.GetJsPropName()]={value:objectClass.GetIObjectClass(),enumerable:true,writable:false};const objects=Object.create(Object.prototype,objectDescriptors);this._iRuntime=new self.IRuntime(this,objects);this._userScriptEventObjects={"tick":this._CreateUserScriptEvent("tick")}}_InitGlobalVariableScriptInterface(){const globalVarDescriptors=
{};for(const globalVar of this.GetEventSheetManager().GetAllGlobalVariables())globalVarDescriptors[globalVar.GetJsPropName()]=globalVar._GetScriptInterfaceDescriptor();this._iRuntime._InitGlobalVars(globalVarDescriptors)}_GetCommonScriptInterfaces(){return this._commonScriptInterfaces}_MapScriptInterface(interface_,class_){this._interfaceMap.set(interface_,class_)}_UnwrapScriptInterface(interface_){return this._interfaceMap.get(interface_)}};self["C3_CreateRuntime"]=C3.Runtime.Create;self["C3_InitRuntime"]=
(runtime,opts)=>runtime.Init(opts)};


// c3/workers/jobSchedulerRuntime.js
'use strict';{const C3=self.C3;C3.JobSchedulerRuntime=class JobSchedulerRuntime extends C3.DefendedBase{constructor(runtime,data){super();this._runtime=runtime;this._jobPromises=new Map;this._nextJobId=0;this._inputPort=data["inputPort"];data["outputPort"].onmessage=e=>this._OnJobWorkerMessage(e);this._maxNumWorkers=data["maxNumWorkers"];this._jobWorkerCount=1;this._isCreatingWorker=false;this._hadErrorCreatingWorker=false}async Init(){}ImportScriptsToJobWorkers(scripts){this._inputPort.postMessage({"type":"_import_scripts",
"scripts":scripts})}SendBlobToJobWorkers(blob,id){this._inputPort.postMessage({"type":"_send_blob","blob":blob,"id":id})}SendBufferToJobWorkers(buffer,id){this._inputPort.postMessage({"type":"_send_buffer","buffer":buffer,"id":id},[buffer])}AddJob(type,params,transferables,progressHandler,abortDisposable){if(!transferables)transferables=[];const jobId=this._nextJobId++;const job={"type":type,"isBroadcast":false,"jobId":jobId,"params":params,"transferables":transferables};const promise=new Promise((resolve,
reject)=>{this._jobPromises.set(jobId,{resolve:resolve,progress:progressHandler,reject:reject,cancelled:false})});if(abortDisposable)abortDisposable.SetAction(()=>this._CancelJob(jobId));this._inputPort.postMessage(job,transferables);this._MaybeCreateExtraWorker();return promise}BroadcastJob(type,params,transferables){if(!transferables)transferables=[];const jobId=this._nextJobId++;const job={"type":type,"isBroadcast":true,"jobId":jobId,"params":params,"transferables":transferables};this._inputPort.postMessage(job,
transferables)}_CancelJob(jobId){const job=this._jobPromises.get(jobId);if(job){job.cancelled=true;job.resolve=null;job.progress=null;job.reject=null;this._inputPort.postMessage({"type":"_cancel","jobId":jobId})}}_OnJobWorkerMessage(e){const msg=e.data;const type=msg["type"];const id=msg["jobId"];switch(type){case "result":this._OnJobResult(id,msg["result"]);break;case "progress":this._OnJobProgress(id,msg["progress"]);break;case "error":this._OnJobError(id,msg["error"]);break;case "ready":this._OnJobWorkerReady();
break;default:throw new Error(`unknown message from worker '${type}'`);}}_OnJobResult(jobId,result){const p=this._jobPromises.get(jobId);if(!p)throw new Error("invalid job ID");if(!p.cancelled)p.resolve(result);this._jobPromises.delete(jobId)}_OnJobProgress(jobId,progress){const p=this._jobPromises.get(jobId);if(!p)throw new Error("invalid job ID");if(!p.cancelled&&p.progress)p.progress(progress)}_OnJobError(jobId,error){const p=this._jobPromises.get(jobId);if(!p)throw new Error("invalid job ID");
if(!p.cancelled)p.reject(error);this._jobPromises.delete(jobId)}_OnJobWorkerReady(){if(!this._isCreatingWorker)return;this._isCreatingWorker=false;this._jobWorkerCount++;if(this._jobWorkerCount<this._maxNumWorkers)this._MaybeCreateExtraWorker();else this._inputPort.postMessage({"type":"_no_more_workers"})}async _MaybeCreateExtraWorker(){if(this._jobWorkerCount>=this._maxNumWorkers||this._isCreatingWorker||this._hadErrorCreatingWorker||this._jobPromises.size<=this._jobWorkerCount)return;try{this._isCreatingWorker=
true;const result=await this._runtime.PostComponentMessageToDOMAsync("runtime","create-job-worker");result["outputPort"].onmessage=e=>this._OnJobWorkerMessage(e)}catch(err){this._hadErrorCreatingWorker=true;this._isCreatingWorker=false;console.error(`[Construct 3] Failed to create job worker; stopping creating any more (created ${this._jobWorkerCount} so far)`,err)}}}};


self["C3_Shaders"] = {};
self["C3_Shaders"]["sphere"] = {
	src: "#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 layoutStart;\nuniform mediump vec2 layoutEnd;\nuniform highmedp float radius;\nuniform highmedp float refractiveIndex;\nuniform highmedp float progress;\nvoid main(void)\n{\nhighmedp vec2 srcSize = srcOriginEnd - srcOriginStart;\nhighmedp vec2 tex = (vTex - srcOriginStart) / srcSize;\nhighmedp vec2 center = vec2(0.5, 0.5);\nhighmedp vec2 layoutSize = layoutEnd - layoutStart;\nhighmedp float aspectRatio = layoutSize.y / layoutSize.x;\nhighmedp vec2 otherTex = vec2(1.0 - tex.x, ((1.0 - tex.y) * aspectRatio + 0.5 - 0.5 * aspectRatio));\nhighmedp float distanceFromCenter = distance(center, otherTex);\nlowp float checkForPresenceWithinSphere = mix(1.0, step(distanceFromCenter, radius), progress);\ndistanceFromCenter = distanceFromCenter / radius;\nhighmedp float normalizedDepth = radius * sqrt(1.0 - distanceFromCenter * distanceFromCenter);\nhighmedp vec3 sphereNormal = normalize(vec3(otherTex - center, normalizedDepth));\nhighmedp vec3 refractedVector = refract(vec3(0.0, 0.0, -1.0), sphereNormal, refractiveIndex);\ntex = mix(tex, ((refractedVector.xy + 1.0) * 0.5) * checkForPresenceWithinSphere, progress);\ntex = clamp(tex, 0.0, 1.0);\ngl_FragColor = texture2D(samplerFront, mix(srcOriginStart, srcOriginEnd, tex));\n}",
	extendBoxHorizontal: 0,
	extendBoxVertical: 0,
	crossSampling: false,
	mustPreDraw: false,
	preservesOpaqueness: false,
	animated: false,
	parameters: [["radius",0,"percent"],["refractiveIndex",0,"percent"],["progress",0,"percent"]]
};
self["C3_Shaders"]["blurhorizontal"] = {
	src: "varying mediump vec2 vTex;\nuniform mediump sampler2D samplerFront;\nuniform mediump vec2 pixelSize;\nuniform mediump float intensity;\nvoid main(void)\n{\nmediump vec4 sum = vec4(0.0);\nmediump float pixelWidth = pixelSize.x;\nmediump float halfPixelWidth = pixelWidth / 2.0;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 7.0 + halfPixelWidth, 0.0)) * 0.06;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 5.0 + halfPixelWidth, 0.0)) * 0.10;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 3.0 + halfPixelWidth, 0.0)) * 0.13;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 1.0 + halfPixelWidth, 0.0)) * 0.16;\nmediump vec4 front = texture2D(samplerFront, vTex);\nsum += front * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 1.0 + halfPixelWidth, 0.0)) * 0.16;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 3.0 + halfPixelWidth, 0.0)) * 0.13;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 5.0 + halfPixelWidth, 0.0)) * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 7.0 + halfPixelWidth, 0.0)) * 0.06;\ngl_FragColor = mix(front, sum, intensity);\n}",
	extendBoxHorizontal: 8,
	extendBoxVertical: 0,
	crossSampling: false,
	mustPreDraw: false,
	preservesOpaqueness: false,
	animated: false,
	parameters: [["intensity",0,"percent"]]
};
self["C3_Shaders"]["blurvertical"] = {
	src: "varying mediump vec2 vTex;\nuniform mediump sampler2D samplerFront;\nuniform mediump vec2 pixelSize;\nuniform mediump float intensity;\nvoid main(void)\n{\nmediump vec4 sum = vec4(0.0);\nmediump float pixelHeight = pixelSize.y;\nmediump float halfPixelHeight = pixelHeight / 2.0;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 7.0 + halfPixelHeight)) * 0.06;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 5.0 + halfPixelHeight)) * 0.10;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 3.0 + halfPixelHeight)) * 0.13;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 1.0 + halfPixelHeight)) * 0.16;\nmediump vec4 front = texture2D(samplerFront, vTex);\nsum += front * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 1.0 + halfPixelHeight)) * 0.16;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 3.0 + halfPixelHeight)) * 0.13;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 5.0 + halfPixelHeight)) * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 7.0 + halfPixelHeight)) * 0.06;\ngl_FragColor = mix(front, sum, intensity);\n}",
	extendBoxHorizontal: 0,
	extendBoxVertical: 8,
	crossSampling: false,
	mustPreDraw: false,
	preservesOpaqueness: false,
	animated: false,
	parameters: [["intensity",0,"percent"]]
};
self["C3_Shaders"]["vibrance"] = {
	src: "varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp float vibrance;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float average = front.r / 3.0 + front.g / 3.0 + front.b / 3.0;\nlowp float max_ = max(front.r, max(front.g, front.b));\nlowp float amount = (max_ - average) * (vibrance * -3.0);\nfront.rgb = mix(front.rgb, vec3(max_), amount);\ngl_FragColor = front;\n}",
	extendBoxHorizontal: 0,
	extendBoxVertical: 0,
	crossSampling: false,
	mustPreDraw: false,
	preservesOpaqueness: true,
	animated: false,
	parameters: [["vibrance",0,"percent"]]
};
self["C3_Shaders"]["brightness"] = {
	src: "varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp float brightness;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float a = front.a;\nif (a != 0.0)\nfront.rgb /= front.a;\nfront.rgb += (brightness - 1.0);\nfront.rgb *= a;\ngl_FragColor = front;\n}",
	extendBoxHorizontal: 0,
	extendBoxVertical: 0,
	crossSampling: false,
	mustPreDraw: false,
	preservesOpaqueness: true,
	animated: false,
	parameters: [["brightness",0,"percent"]]
};
self["C3_Shaders"]["grayscale"] = {
	src: "varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp float intensity;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float gray = front.r * 0.299 + front.g * 0.587 + front.b * 0.114;\ngl_FragColor = mix(front, vec4(gray, gray, gray, front.a), intensity);\n}",
	extendBoxHorizontal: 0,
	extendBoxVertical: 0,
	crossSampling: false,
	mustPreDraw: false,
	preservesOpaqueness: true,
	animated: false,
	parameters: [["intensity",0,"percent"]]
};


'use strict';{const C3=self.C3;let cacheRegex=null;let lastRegex="";let lastFlags="";let regexMatches=[];let lastMatchesStr="";let lastMatchesRegex="";let lastMatchesFlags="";const forEachStack=C3.New(C3.ArrayStack);function ForEachOrdered_SortInstances(a,b){const va=a[1];const vb=b[1];if(typeof va==="number"&&typeof vb==="number")return va-vb;else{const sa=""+va;const sb=""+vb;if(sa<sb)return-1;else if(sa>sb)return 1;else return 0}}C3.Plugins.System=class SystemPlugin extends C3.SDKPluginBase{constructor(opts){super(opts);
this._loopStack=this._runtime.GetEventSheetManager().GetLoopStack();this._eventStack=this._runtime.GetEventSheetManager().GetEventStack();this._imagesLoadingTotal=0;this._imagesLoadingComplete=0;this._functionMaps=new Map}Release(){super.Release()}UpdateRender(){this._runtime.UpdateRender()}Trigger(method){this._runtime.Trigger(method,null,null)}GetRegex(regex,flags){if(!cacheRegex||regex!==lastRegex||flags!==lastFlags){cacheRegex=new RegExp(regex,flags);lastRegex=regex;lastFlags=flags}cacheRegex.lastIndex=
0;return cacheRegex}GetRegexMatches(str,regex,flags){if(str===lastMatchesStr&&regex===lastMatchesRegex&&flags===lastMatchesFlags)return regexMatches;const cacheRegex=this.GetRegex(regex,flags);regexMatches=str.match(cacheRegex);lastMatchesStr=str;lastMatchesRegex=regex;lastMatchesFlags=flags;return regexMatches}async _LoadTexturesForObjectClasses(layout,objectClasses){if(!objectClasses.length)return;this._imagesLoadingTotal+=objectClasses.length;const promises=[];for(const oc of objectClasses)promises.push(layout.MaybeLoadTexturesFor(oc));
await C3.PromiseAllWithProgress(promises,()=>{this._imagesLoadingComplete++});this._imagesLoadingComplete++;if(this._imagesLoadingComplete===this._imagesLoadingTotal){this._runtime.Trigger(C3.Plugins.System.Cnds.OnImageLoadingComplete,null,null);this._imagesLoadingComplete=0;this._imagesLoadingTotal=0}}_UnloadTexturesForObjectClasses(layout,objectClasses){for(const oc of objectClasses)if(oc.GetInstanceCount()===0)layout.MaybeUnloadTexturesFor(oc)}_GetForEachStack(){return forEachStack}_Repeat(count){const eventSheetManager=
this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();loop.SetEnd(count);if(isSolModifierAfterCnds)for(let i=0;i<count&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);
loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else for(let i=0;i<count&&!loop.IsStopped();++i){loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame)}eventStack.Pop();loopStack.Pop();return false}*_DebugRepeat(count){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();
const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();loop.SetEnd(count);if(isSolModifierAfterCnds)for(let i=0;i<count&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else for(let i=0;i<count&&!loop.IsStopped();++i){loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,
newFrame)}eventStack.Pop();loopStack.Pop();return false}_While(){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();
if(isSolModifierAfterCnds)for(let i=0;!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);loop.SetIndex(i);if(!currentEvent.Retrigger(oldFrame,newFrame))loop.Stop();eventSheetManager.PopSol(solModifiers)}else for(let i=0;!loop.IsStopped();++i){loop.SetIndex(i);if(!currentEvent.Retrigger(oldFrame,newFrame))loop.Stop()}eventStack.Pop();loopStack.Pop();return false}*_DebugWhile(){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();
const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();if(isSolModifierAfterCnds)for(let i=0;!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);loop.SetIndex(i);const ret=yield*currentEvent.DebugRetrigger(oldFrame,
newFrame);if(!ret)loop.Stop();eventSheetManager.PopSol(solModifiers)}else for(let i=0;!loop.IsStopped();++i){loop.SetIndex(i);const ret=yield*currentEvent.DebugRetrigger(oldFrame,newFrame);if(!ret)loop.Stop()}eventStack.Pop();loopStack.Pop();return false}_For(name,start,end){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=
currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();loop.SetName(name);loop.SetEnd(end);if(end<start)if(isSolModifierAfterCnds)for(let i=start;i>=end&&!loop.IsStopped();--i){eventSheetManager.PushCopySol(solModifiers);loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else for(let i=start;i>=
end&&!loop.IsStopped();--i){loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame)}else if(isSolModifierAfterCnds)for(let i=start;i<=end&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else for(let i=start;i<=end&&!loop.IsStopped();++i){loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame)}eventStack.Pop();loopStack.Pop();return false}*_DebugFor(name,start,end){const eventSheetManager=
this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();loop.SetName(name);loop.SetEnd(end);if(end<start)if(isSolModifierAfterCnds)for(let i=
start;i>=end&&!loop.IsStopped();--i){eventSheetManager.PushCopySol(solModifiers);loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else for(let i=start;i>=end&&!loop.IsStopped();--i){loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame)}else if(isSolModifierAfterCnds)for(let i=start;i<=end&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame);
eventSheetManager.PopSol(solModifiers)}else for(let i=start;i<=end&&!loop.IsStopped();++i){loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame)}eventStack.Pop();loopStack.Pop();return false}_ForEach(objectClass){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=
oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();const isInContainer=objectClass.IsInContainer();const sol=objectClass.GetCurrentSol();const instances=forEachStack.Push();C3.shallowAssignArray(instances,sol.GetInstances());loop.SetEnd(instances.length);if(isSolModifierAfterCnds)for(let i=0,len=instances.length;i<len&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);const inst=
instances[i];objectClass.GetCurrentSol().SetSinglePicked(inst);if(isInContainer)inst.SetSiblingsSinglePicked();loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else{sol._SetSelectAll(false);const solInstances=sol._GetOwnInstances();C3.clearArray(solInstances);solInstances.push(null);for(let i=0,len=instances.length;i<len&&!loop.IsStopped();++i){const inst=instances[i];solInstances[0]=inst;if(isInContainer)inst.SetSiblingsSinglePicked();loop.SetIndex(i);
currentEvent.Retrigger(oldFrame,newFrame)}}eventStack.Pop();loopStack.Pop();C3.clearArray(instances);forEachStack.Pop();return false}*_DebugForEach(objectClass){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);
const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();const isInContainer=objectClass.IsInContainer();const sol=objectClass.GetCurrentSol();const instances=forEachStack.Push();C3.shallowAssignArray(instances,sol.GetInstances());loop.SetEnd(instances.length);if(isSolModifierAfterCnds)for(let i=0,len=instances.length;i<len&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);const inst=instances[i];objectClass.GetCurrentSol().SetSinglePicked(inst);if(isInContainer)inst.SetSiblingsSinglePicked();
loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else{sol._SetSelectAll(false);const solInstances=sol._GetOwnInstances();C3.clearArray(solInstances);solInstances.push(null);for(let i=0,len=instances.length;i<len&&!loop.IsStopped();++i){const inst=instances[i];solInstances[0]=inst;if(isInContainer)inst.SetSiblingsSinglePicked();loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame)}}eventStack.Pop();loopStack.Pop();C3.clearArray(instances);
forEachStack.Pop();return false}_ForEachOrdered(objectClass,order){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const cnd=eventSheetManager.GetCurrentCondition();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();
const loop=loopStack.Push();const isInContainer=objectClass.IsInContainer();const sol=objectClass.GetCurrentSol();const instancesData=forEachStack.Push();C3.clearArray(instancesData);const iterInstances=sol.GetInstances();loop.SetEnd(iterInstances.length);for(let i=0,len=iterInstances.length;i<len;++i)instancesData.push([iterInstances[i],cnd.ReevaluateParameter(1,i)]);instancesData.sort(ForEachOrdered_SortInstances);if(order===1)instancesData.reverse();if(isSolModifierAfterCnds)for(let i=0,len=instancesData.length;i<
len&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);const inst=instancesData[i][0];objectClass.GetCurrentSol().SetSinglePicked(inst);if(isInContainer)inst.SetSiblingsSinglePicked();loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}else{sol._SetSelectAll(false);const solInstances=sol._GetOwnInstances();C3.clearArray(solInstances);solInstances.push(null);for(let i=0,len=instancesData.length;i<len&&!loop.IsStopped();++i){const inst=
instancesData[i][0];solInstances[0]=inst;if(isInContainer)inst.SetSiblingsSinglePicked();loop.SetIndex(i);currentEvent.Retrigger(oldFrame,newFrame)}}eventStack.Pop();loopStack.Pop();C3.clearArray(instancesData);forEachStack.Pop();return false}*_DebugForEachOrdered(objectClass,order){const eventSheetManager=this._runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const cnd=eventSheetManager.GetCurrentCondition();const oldFrame=eventStack.GetCurrentStackFrame();const currentEvent=
oldFrame.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiers();const isSolModifierAfterCnds=oldFrame.IsSolModifierAfterCnds();const newFrame=eventStack.Push(currentEvent);const loopStack=eventSheetManager.GetLoopStack();const loop=loopStack.Push();const isInContainer=objectClass.IsInContainer();const sol=objectClass.GetCurrentSol();const instancesData=forEachStack.Push();C3.clearArray(instancesData);const iterInstances=sol.GetInstances();loop.SetEnd(iterInstances.length);for(let i=0,
len=iterInstances.length;i<len;++i)instancesData.push([iterInstances[i],cnd.ReevaluateParameter(1,i)]);instancesData.sort(ForEachOrdered_SortInstances);if(order===1)instancesData.reverse();if(isSolModifierAfterCnds)for(let i=0,len=instancesData.length;i<len&&!loop.IsStopped();++i){eventSheetManager.PushCopySol(solModifiers);const inst=instancesData[i][0];objectClass.GetCurrentSol().SetSinglePicked(inst);if(isInContainer)inst.SetSiblingsSinglePicked();loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,
newFrame);eventSheetManager.PopSol(solModifiers)}else{sol._SetSelectAll(false);const solInstances=sol._GetOwnInstances();C3.clearArray(solInstances);solInstances.push(null);for(let i=0,len=instancesData.length;i<len&&!loop.IsStopped();++i){const inst=instancesData[i][0];solInstances[0]=inst;if(isInContainer)inst.SetSiblingsSinglePicked();loop.SetIndex(i);yield*currentEvent.DebugRetrigger(oldFrame,newFrame)}}eventStack.Pop();loopStack.Pop();C3.clearArray(instancesData);forEachStack.Pop();return false}_GetFunctionMap(name,
createIfMissing){let ret=this._functionMaps.get(name);if(ret)return ret;if(!createIfMissing)return null;ret={defaultFunc:null,strMap:new Map};this._functionMaps.set(name,ret);return ret}_DoCallMappedFunction(eventSheetManager,functionBlock,paramResults,hasAnySolModifiers,solModifiers){functionBlock.GetEventBlock().RunAsMappedFunctionCall(paramResults);if(hasAnySolModifiers)eventSheetManager.PopSol(solModifiers)}*_DebugDoCallMappedFunction(eventSheetManager,functionBlock,paramResults,hasAnySolModifiers,
solModifiers){yield*functionBlock.GetEventBlock().DebugRunAsMappedFunctionCall(paramResults);if(hasAnySolModifiers)eventSheetManager.PopSol(solModifiers)}}};


'use strict';{const C3=self.C3;C3.Plugins.System.Type=class SystemType extends C3.DefendedBase{constructor(objectClass){super();this._objectClass=objectClass;this._runtime=objectClass.GetRuntime();this._plugin=objectClass.GetPlugin()}OnCreate(){}Release(){this._objectClass=null;this._runtime=null;this._plugin=null}}};


'use strict';{const C3=self.C3;C3.Plugins.System.Instance=class SystemInstance extends C3.DefendedBase{constructor(inst,properties){super();this._inst=inst;this._objectClass=this._inst.GetObjectClass();this._sdkType=this._objectClass.GetSdkType();this._runtime=this._inst.GetRuntime()}Release(){this._inst=null;this._objectClass=null;this._sdkType=null;this._runtime=null}}};


'use strict';{const C3=self.C3;const tmpPickArray=[];C3.Plugins.System.Cnds={EveryTick(){return true},OnLayoutStart(){return true},OnLayoutEnd(){return true},OnSuspend(){return true},OnResume(){return true},IsSuspended(){return this._runtime.IsSuspended()},Else(){const frame=this._runtime.GetCurrentEventStackFrame();if(frame.GetElseBranchRan())return false;else return!frame.GetLastEventTrue()},TriggerOnce(){const cnd=this._runtime.GetCurrentCondition();const cndSavedData=cnd.GetSavedDataMap();let lastTick=
cndSavedData.get("TriggerOnce_lastTick");if(typeof lastTick==="undefined"){lastTick=-1;cndSavedData.set("TriggerOnce_lastTick",-1)}const curTick=this._runtime.GetTickCount();cndSavedData.set("TriggerOnce_lastTick",curTick);return this._runtime.IsLayoutFirstTick()||lastTick!==curTick-1},Every(seconds){const cnd=this._runtime.GetCurrentCondition();const cndSavedData=cnd.GetSavedDataMap();const lastTime=cndSavedData.get("Every_lastTime")||0;const curTime=this._runtime.GetGameTime();if(!cndSavedData.has("Every_seconds"))cndSavedData.set("Every_seconds",
seconds);const thisSeconds=cndSavedData.get("Every_seconds");if(curTime>=lastTime+thisSeconds){cndSavedData.set("Every_lastTime",lastTime+thisSeconds);if(curTime>=cndSavedData.get("Every_lastTime")+.04)cndSavedData.set("Every_lastTime",curTime);cndSavedData.set("Every_seconds",seconds);return true}else if(curTime<lastTime-.1)cndSavedData.set("Every_lastTime",curTime);return false},IsGroupActive(groupName){const eventGroup=this._runtime.GetEventSheetManager().GetEventGroupByName(groupName);return eventGroup&&
eventGroup.IsGroupActive()},IsPreview(){return this._runtime.IsPreview()},IsMobile(){return C3.Platform.IsMobile},OnLoadFinished(){return true},OnCanvasSnapshot(){return true},EffectsSupported(){return true},OnSaveComplete(){return true},OnSaveFailed(){return true},OnLoadComplete(){return true},OnLoadFailed(){return true},ObjectUIDExists(uid){return!!this._runtime.GetInstanceByUID(uid)},IsOnPlatform(p){switch(p){case 0:return C3.Platform.Context==="browser";case 1:return C3.Platform.OS==="iOS";case 2:return C3.Platform.OS===
"Android";case 8:return C3.Platform.Context==="cordova";case 9:return this._runtime.GetExportType()==="scirra-arcade";case 10:return C3.Platform.Context==="nwjs";case 13:return this._runtime.GetExportType()==="windows-uwp";default:return false}},RegexTest(str,regex,flags){const cacheRegex=this.GetRegex(regex,flags);return cacheRegex.test(str)},Compare(x,cmp,y){return C3.compare(x,cmp,y)},CompareBetween(x,a,b){return x>=a&&x<=b},CompareVar(ev,cmp,val){return C3.compare(ev.GetValue(),cmp,val)},CompareBoolVar(ev){return!!ev.GetValue()},
CompareTime(cmp,t){const gameTime=this._runtime.GetGameTime();if(cmp===0){const cnd=this._runtime.GetCurrentCondition();const cndSavedData=cnd.GetSavedDataMap();if(!cndSavedData.get("CompareTime_executed"))if(gameTime>=t){cndSavedData.set("CompareTime_executed",true);return true}return false}else return C3.compare(gameTime,cmp,t)},IsNaN(n){return isNaN(n)},AngleWithin(a1,within,a2){return C3.angleDiff(C3.toRadians(a1),C3.toRadians(a2))<=C3.toRadians(within)},IsClockwiseFrom(a1,a2){return C3.angleClockwise(C3.toRadians(a1),
C3.toRadians(a2))},IsBetweenAngles(a,la,ua){let angle=C3.toRadians(a);let lower=C3.toRadians(la);let upper=C3.toRadians(ua);let obtuse=!C3.angleClockwise(upper,lower);if(obtuse)return!(!C3.angleClockwise(angle,lower)&&C3.angleClockwise(angle,upper));else return C3.angleClockwise(angle,lower)&&!C3.angleClockwise(angle,upper)},IsValueType(v,t){if(typeof v==="number")return t===0;else return t===1},EvaluateExpression(v){return!!v},PickByComparison(objectClass,exp,cmp,val){if(!objectClass)return false;
const forEachStack=this._GetForEachStack();const tempInstances=forEachStack.Push();const sol=objectClass.GetCurrentSol();C3.shallowAssignArray(tempInstances,sol.GetInstances());if(sol.IsSelectAll())C3.clearArray(sol._GetOwnElseInstances());const cnd=this._runtime.GetCurrentCondition();let k=0;for(let i=0,len=tempInstances.length;i<len;++i){const inst=tempInstances[i];tempInstances[k]=inst;exp=cnd.ReevaluateParameter(1,i);val=cnd.ReevaluateParameter(3,i);if(C3.compare(exp,cmp,val))++k;else sol._PushElseInstance(inst)}C3.truncateArray(tempInstances,
k);sol.SetArrayPicked(tempInstances);const ret=!!tempInstances.length;C3.clearArray(tempInstances);forEachStack.Pop();objectClass.ApplySolToContainer();return ret},PickByEvaluate(objectClass,exp){if(!objectClass)return false;const forEachStack=this._GetForEachStack();const tempInstances=forEachStack.Push();const sol=objectClass.GetCurrentSol();C3.shallowAssignArray(tempInstances,sol.GetInstances());if(sol.IsSelectAll())C3.clearArray(sol._GetOwnElseInstances());const cnd=this._runtime.GetCurrentCondition();
let k=0;for(let i=0,len=tempInstances.length;i<len;++i){const inst=tempInstances[i];tempInstances[k]=inst;exp=cnd.ReevaluateParameter(1,i);if(exp)++k;else sol._PushElseInstance(inst)}C3.truncateArray(tempInstances,k);sol.SetArrayPicked(tempInstances);const ret=!!tempInstances.length;C3.clearArray(tempInstances);forEachStack.Pop();objectClass.ApplySolToContainer();return ret},PickNth(objectClass,index){if(!objectClass)return false;const sol=objectClass.GetCurrentSol();const instances=sol.GetInstances();
index=Math.floor(index);if(index>=instances.length)return false;const inst=instances[index];sol.PickOne(inst);objectClass.ApplySolToContainer();return true},PickRandom(objectClass){if(!objectClass)return false;const sol=objectClass.GetCurrentSol();const instances=sol.GetInstances();const index=Math.floor(this._runtime.Random()*instances.length);if(index>=instances.length)return false;const inst=instances[index];sol.PickOne(inst);objectClass.ApplySolToContainer();return true},PickAll(objectClass){if(!objectClass)return false;
if(!objectClass.GetInstanceCount())return false;const sol=objectClass.GetCurrentSol();sol._SetSelectAll(true);objectClass.ApplySolToContainer();return true},PickOverlappingPoint(objectClass,x,y){if(!objectClass)return false;const sol=objectClass.GetCurrentSol();const instances=sol.GetInstances();const currentEvent=this._runtime.GetCurrentEvent();const isOrBlock=currentEvent.IsOrBlock();const isInverted=this._runtime.GetCurrentCondition().IsInverted();if(sol.IsSelectAll()){C3.shallowAssignArray(tmpPickArray,
instances);sol.ClearArrays();sol._SetSelectAll(false)}else if(isOrBlock){C3.shallowAssignArray(tmpPickArray,sol._GetOwnElseInstances());C3.clearArray(sol._GetOwnElseInstances())}else{C3.shallowAssignArray(tmpPickArray,sol._GetOwnInstances());C3.clearArray(sol._GetOwnInstances())}for(let i=0,len=tmpPickArray.length;i<len;++i){const inst=tmpPickArray[i];if(C3.xor(inst.GetWorldInfo().ContainsPoint(x,y),isInverted))sol._PushInstance(inst);else sol._PushElseInstance(inst)}objectClass.ApplySolToContainer();
return C3.xor(!!sol._GetOwnInstances().length,isInverted)},PickLastCreated(objectClass){if(!objectClass)return false;const isFamily=objectClass.IsFamily();let pick=null;const instancesPendingCreate=this._runtime._GetInstancesPendingCreate();for(let i=instancesPendingCreate.length-1;i>=0;--i){const inst=instancesPendingCreate[i];if(isFamily){if(inst.GetObjectClass().BelongsToFamily(objectClass)){pick=inst;break}}else if(inst.GetObjectClass()===objectClass){pick=inst;break}}if(!pick){const instances=
objectClass.GetInstances();if(instances.length)pick=instances[instances.length-1]}if(!pick)return false;const sol=objectClass.GetCurrentSol();sol.PickOne(pick);objectClass.ApplySolToContainer();return true},Repeat(count){if(this._runtime.IsDebugging())return this._DebugRepeat(count);else return this._Repeat(count)},While(){if(this._runtime.IsDebugging())return this._DebugWhile();else return this._While()},For(name,start,end){if(this._runtime.IsDebugging())return this._DebugFor(name,start,end);else return this._For(name,
start,end)},ForEach(objectClass){if(this._runtime.IsDebugging())return this._DebugForEach(objectClass);else return this._ForEach(objectClass)},ForEachOrdered(objectClass,expression,order){if(this._runtime.IsDebugging())return this._DebugForEachOrdered(objectClass,order);else return this._ForEachOrdered(objectClass,order)},LayerVisible(layer){return layer?layer.IsVisible():false},LayerEmpty(layer){return layer?!layer.GetInstanceCount():false},LayerCmpOpacity(layer,cmp,o){if(!layer)return false;return C3.compare(layer.GetOpacity()*
100,cmp,o)},OnImageLoadingComplete(){return true},IsLoadingImages(){return this._imagesLoadingTotal>0}}};


'use strict';{const C3=self.C3;function SortZOrderList(a,b){const layerA=a[0];const layerB=b[0];const diff=layerA-layerB;if(diff!==0)return diff;const indexA=a[1];const indexB=b[1];return indexA-indexB}function SortInstancesByValue(a,b){return a[1]-b[1]}const tempZOrderList=[];const tempInstValues=[];const tempRect=C3.New(C3.Rect);const tempColor=C3.New(C3.Color);C3.Plugins.System.Acts={SetVar(ev,x){ev.SetValue(x)},AddVar(ev,x){if(ev.IsNumber()&&typeof x!=="number")x=parseFloat(x);ev.SetValue(ev.GetValue()+
x)},SubVar(ev,x){if(!ev.IsNumber())return;ev.SetValue(ev.GetValue()-x)},SetBoolVar(ev,x){ev.SetValue(!!x)},ToggleBoolVar(ev){ev.SetValue(!ev.GetValue())},ResetGlobals(){this._runtime.GetEventSheetManager().ResetAllGlobalsToInitialValue()},CreateObject(objectClass,layer,x,y,createHierarchy){if(!objectClass||!layer)return;const inst=this._runtime.CreateInstance(objectClass,layer,x,y,createHierarchy);if(!inst)return;const eventSheetManager=this._runtime.GetEventSheetManager();eventSheetManager.BlockFlushingInstances(true);
inst._TriggerOnCreatedOnSelfAndRelated();eventSheetManager.BlockFlushingInstances(false);objectClass.GetCurrentSol().SetSinglePicked(inst);if(inst.IsInContainer())inst.SetSiblingsSinglePicked()},CreateObjectByName(objectClassName,layer,x,y,createHierarchy){if(!objectClassName||!layer)return;const objectClass=this._runtime.GetObjectClassByName(objectClassName);if(!objectClass)return;C3.Plugins.System.Acts.CreateObject.call(this,objectClass,layer,x,y,createHierarchy)},RecreateInitialObjects(objectClass,
x1,y1,x2,y2,sourceLayoutName,sourceLayerParam,offsetX,offsetY,createHierarchy){if(!objectClass)return;let sourceLayout=this._runtime.GetCurrentLayout();if(sourceLayoutName){const lookupLayout=this._runtime.GetLayoutManager().GetLayoutByName(sourceLayoutName);if(lookupLayout)sourceLayout=lookupLayout;else return}let sourceLayer=null;if(typeof sourceLayerParam!=="number"||sourceLayerParam>=0){sourceLayer=sourceLayout.GetLayer(sourceLayerParam);if(!sourceLayer)return}tempRect.set(x1,y1,x2,y2);const allCreatedInstances=
sourceLayout.RecreateInitialObjects(objectClass,tempRect,sourceLayer,offsetX,offsetY,createHierarchy);objectClass.GetCurrentSol().SetArrayPicked(allCreatedInstances);objectClass.ApplySolToContainer()},StopLoop(){const loopStack=this._loopStack;if(!loopStack.IsInLoop())return;loopStack.GetCurrent().Stop()},SetGroupActive(groupName,a){const group=this._runtime.GetEventSheetManager().GetEventGroupByName(groupName);if(!group)return;if(a===0)group.SetGroupActive(false);else if(a===1)group.SetGroupActive(true);
else group.SetGroupActive(!group.IsGroupActive())},SetTimescale(ts){this._runtime.SetTimeScale(ts)},SetObjectTimescale(objectClass,ts){if(ts<0)ts=0;if(!objectClass)return;const sol=objectClass.GetCurrentSol();const instances=sol.GetInstances();for(const inst of instances)inst.SetTimeScale(ts)},RestoreObjectTimescale(objectClass){if(!objectClass)return;const sol=objectClass.GetCurrentSol();const instances=sol.GetInstances();for(const inst of instances)inst.RestoreTimeScale()},Wait(seconds){if(seconds<
0)return;this._runtime.GetEventSheetManager().AddScheduledWait().InitTimer(seconds);return true},WaitForSignal(tag){this._runtime.GetEventSheetManager().AddScheduledWait().InitSignal(tag);return true},WaitForPreviousActions(){const eventSheetManager=this._runtime.GetEventSheetManager();eventSheetManager.AddScheduledWait().InitPromise(eventSheetManager.GetPromiseForAllAsyncActions());return true},Signal(tag){const lowerTag=tag.toLowerCase();for(const w of this._runtime.GetEventSheetManager().scheduledWaits())if(w.IsSignal()&&
w.GetSignalTag()===lowerTag)w.SetSignalled()},async SnapshotCanvas(format,quality,x,y,width,height){const canvasManager=this._runtime.GetCanvasManager();if(!canvasManager)return;this.UpdateRender();await canvasManager.SnapshotCanvas(format===0?"image/png":"image/jpeg",quality/100,x,y,width,height);await this._runtime.TriggerAsync(C3.Plugins.System.Cnds.OnCanvasSnapshot,null)},SetCanvasSize(w,h){if(w<=0||h<=0)return;this._runtime.SetViewportSize(w,h);const currentLayout=this._runtime.GetCurrentLayout();
currentLayout.BoundScrolling();for(const layer of currentLayout.GetLayers())layer.UpdateViewport();const canvasManager=this._runtime.GetCanvasManager();if(!canvasManager)return;if(canvasManager.GetCurrentFullscreenMode()==="off")canvasManager.SetSize(canvasManager.GetLastWidth(),canvasManager.GetLastHeight(),true);else{this._runtime.SetOriginalViewportSize(w,h);canvasManager.SetSize(canvasManager.GetLastWidth(),canvasManager.GetLastHeight(),true)}this._runtime.UpdateRender()},SetFullscreenQuality(q){const canvasManager=
this._runtime.GetCanvasManager();if(!canvasManager)return;if(canvasManager.GetCurrentFullscreenMode()==="off")return;canvasManager.SetFullscreenScalingQuality(q!==0?"high":"low");canvasManager.SetSize(canvasManager.GetLastWidth(),canvasManager.GetLastHeight(),true)},SaveState(slot){this._runtime.SaveToSlot(slot)},LoadState(slot){this._runtime.LoadFromSlot(slot)},LoadStateJSON(jsonStr){this._runtime.LoadFromJsonString(jsonStr)},SetHalfFramerateMode(m){},ResetPersisted(){for(const layout of this._runtime.GetLayoutManager().GetAllLayouts())layout.ResetPersistData()},
SetPixelRounding(m){this._runtime.SetPixelRoundingEnabled(m!==0)},SetMinimumFramerate(fps){this._runtime.SetMinimumFramerate(fps)},SortZOrderByInstVar(objectClass,instVar){if(!objectClass)return;const sol=objectClass.GetCurrentSol();const pickedInstances=sol.GetInstances();const zOrderList=tempZOrderList;const instValues=tempInstValues;const layout=this._runtime.GetCurrentLayout();const isFamily=objectClass.IsFamily();const familyIndex=objectClass.GetFamilyIndex();for(let i=0,len=pickedInstances.length;i<
len;++i){const inst=pickedInstances[i];const wi=inst.GetWorldInfo();if(!wi)continue;let value;if(isFamily)value=inst.GetInstanceVariableValue(instVar+inst.GetObjectClass().GetFamilyInstanceVariableOffset(familyIndex));else value=inst.GetInstanceVariableValue(instVar);zOrderList.push([wi.GetLayer().GetIndex(),wi.GetZIndex()]);instValues.push([inst,value])}if(!zOrderList.length)return;zOrderList.sort(SortZOrderList);instValues.sort(SortInstancesByValue);let anyChanged=false;for(let i=0,len=zOrderList.length;i<
len;++i){const inst=instValues[i][0];const layer=layout.GetLayerByIndex(zOrderList[i][0]);const toZ=zOrderList[i][1];const layerInstances=layer._GetInstances();if(layerInstances[toZ]!==inst){layerInstances[toZ]=inst;inst.GetWorldInfo()._SetLayer(layer);layer.SetZIndicesChanged();anyChanged=true}}if(anyChanged)this._runtime.UpdateRender();C3.clearArray(tempZOrderList);C3.clearArray(tempInstValues)},GoToLayout(layout){if(this._runtime.IsLoading())return;const layoutManager=this._runtime.GetLayoutManager();
if(layoutManager.IsPendingChangeMainLayout())return;layoutManager.ChangeMainLayout(layout)},GoToLayoutByName(layoutName){if(this._runtime.IsLoading())return;const layoutManager=this._runtime.GetLayoutManager();if(layoutManager.IsPendingChangeMainLayout())return;const toLayout=layoutManager.GetLayoutByName(layoutName);if(toLayout)layoutManager.ChangeMainLayout(toLayout)},NextPrevLayout(prev){if(this._runtime.IsLoading())return;const layoutManager=this._runtime.GetLayoutManager();if(layoutManager.IsPendingChangeMainLayout())return;
const allLayouts=layoutManager.GetAllLayouts();const index=allLayouts.indexOf(layoutManager.GetMainRunningLayout());if(prev&&index===0)return;if(!prev&&index===allLayouts.length-1)return;const toLayout=allLayouts[index+(prev?-1:1)];layoutManager.ChangeMainLayout(toLayout)},RestartLayout(){if(this._runtime.IsLoading())return;const layoutManager=this._runtime.GetLayoutManager();if(layoutManager.IsPendingChangeMainLayout())return;layoutManager.ChangeMainLayout(layoutManager.GetMainRunningLayout());this._runtime.GetEventSheetManager().ResetAllGroupsInitialActivation()},
SetLayerVisible(layer,v){if(!layer)return;layer.SetVisible(v)},SetLayerOpacity(layer,o){if(!layer)return;layer.SetOpacity(o/100)},SetLayerScale(layer,s){if(!layer)return;layer.SetOwnScale(s)},SetLayerScaleRate(layer,r){if(!layer)return;layer.SetScaleRate(r)},SetLayerAngle(layer,a){if(!layer)return;a=C3.clampAngle(C3.toRadians(+a));if(layer.GetOwnAngle()===a)return;layer.SetAngle(a);this.UpdateRender()},SetLayerParallax(layer,px,py){if(!layer)return;layer.SetParallax(px/100,py/100)},SetLayerZElevation(layer,
z){if(!layer)return;layer.SetZElevation(z)},SetLayerBackground(layer,rgb){if(!layer)return;tempColor.setFromRgbValue(rgb);tempColor.clamp();const layerBgColor=layer.GetBackgroundColor();if(layerBgColor.equalsIgnoringAlpha(tempColor))return;layerBgColor.copyRgb(tempColor);this.UpdateRender()},SetLayerTransparent(layer,t){if(!layer)return;t=!!t;if(layer.IsTransparent()===t)return;layer.SetTransparent(t);this.UpdateRender()},SetLayerBlendMode(layer,bm){if(!layer)return;if(layer.GetBlendMode()===bm)return;
layer.SetBlendMode(bm);this.UpdateRender()},SetLayerEffectEnabled(layer,enabled,effectName){if(!layer)return;const effectList=layer.GetEffectList();const effectType=effectList.GetEffectTypeByName(effectName);if(!effectType)return;const e=enabled===1;if(effectType.IsActive()===e)return;effectType.SetActive(e);effectList.UpdateActiveEffects();this._runtime.UpdateRender()},SetLayerEffectParam(layer,effectName,paramIndex,value){if(!layer)return;const effectList=layer.GetEffectList();const effectType=
effectList.GetEffectTypeByName(effectName);if(!effectType)return;const effectTypeIndex=effectType.GetIndex();const paramsArr=effectList.GetEffectParametersForIndex(effectTypeIndex);paramIndex=Math.floor(paramIndex);if(paramIndex<0||paramIndex>=paramsArr.length)return;const paramType=effectType.GetShaderProgram().GetParameterType(paramIndex);if(paramType==="color"){tempColor.setFromRgbValue(value);const curColor=paramsArr[paramIndex];if(tempColor.equalsIgnoringAlpha(curColor))return;curColor.copyRgb(tempColor)}else{if(paramType===
"percent")value/=100;if(paramsArr[paramIndex]===value)return;paramsArr[paramIndex]=value}if(effectType.IsActive())this._runtime.UpdateRender()},SetLayerForceOwnTexture(layer,f){if(!layer)return;f=!!f;if(layer.IsForceOwnTexture()===f)return;layer.SetForceOwnTexture(f);this.UpdateRender()},SetLayoutScale(s){const layout=this._runtime.GetCurrentLayout();if(layout.GetScale()===s)return;layout.SetScale(s);this.UpdateRender()},SetLayoutAngle(a){a=C3.clampAngle(C3.toRadians(+a));const layout=this._runtime.GetCurrentLayout();
if(layout.GetAngle()===a)return;layout.SetAngle(a);this.UpdateRender()},SetLayoutEffectEnabled(enabled,effectName){const layout=this._runtime.GetCurrentLayout();const effectList=layout.GetEffectList();const effectType=effectList.GetEffectTypeByName(effectName);if(!effectType)return;const e=enabled===1;if(effectType.IsActive()===e)return;effectType.SetActive(e);effectList.UpdateActiveEffects();this._runtime.UpdateRender()},SetLayoutEffectParam(effectName,paramIndex,value){const layout=this._runtime.GetCurrentLayout();
const effectList=layout.GetEffectList();const effectType=effectList.GetEffectTypeByName(effectName);if(!effectType)return;const effectTypeIndex=effectType.GetIndex();const paramsArr=effectList.GetEffectParametersForIndex(effectTypeIndex);paramIndex=Math.floor(paramIndex);if(paramIndex<0||paramIndex>=paramsArr.length)return;const paramType=effectType.GetShaderProgram().GetParameterType(paramIndex);if(paramType==="color"){tempColor.setFromRgbValue(value);const curColor=paramsArr[paramIndex];if(tempColor.equalsIgnoringAlpha(curColor))return;
curColor.copyRgb(tempColor)}else{if(paramType==="percent")value/=100;if(paramsArr[paramIndex]===value)return;paramsArr[paramIndex]=value}if(effectType.IsActive())this._runtime.UpdateRender()},ScrollX(x){const layout=this._runtime.GetCurrentLayout();layout.SetScrollX(x)},ScrollY(y){const layout=this._runtime.GetCurrentLayout();layout.SetScrollY(y)},Scroll(x,y){const layout=this._runtime.GetCurrentLayout();layout.SetScrollX(x);layout.SetScrollY(y)},ScrollToObject(objectClass){if(!objectClass)return;
const inst=objectClass.GetFirstPicked();if(!inst)return;const wi=inst.GetWorldInfo();if(!wi)return;const layout=this._runtime.GetCurrentLayout();layout.SetScrollX(wi.GetX());layout.SetScrollY(wi.GetY())},async LoadObjectTextures(objectClass){const layout=this._runtime.GetMainRunningLayout();if(!layout||!objectClass||this._runtime.IsLoading())return;const objectClasses=objectClass.IsFamily()?objectClass.GetFamilyMembers():[objectClass];await this._LoadTexturesForObjectClasses(layout,objectClasses)},
async LoadObjectTexturesByName(objectClassName){await C3.Plugins.System.Acts.LoadObjectTextures.call(this,this._runtime.GetObjectClassByName(objectClassName))},UnloadObjectTextures(objectClass){const layout=this._runtime.GetMainRunningLayout();if(!layout||!objectClass)return;const objectClasses=objectClass.IsFamily()?objectClass.GetFamilyMembers():[objectClass];this._UnloadTexturesForObjectClasses(layout,objectClasses)},UnloadObjectTexturesByName(objectClassName){C3.Plugins.System.Acts.UnloadObjectTexturesByName.call(this,
this._runtime.GetObjectClassByName(objectClassName))},UnloadUnusedTextures(){const layout=this._runtime.GetMainRunningLayout();if(!layout)return;const objectClasses=layout._GetTextureLoadedObjectTypes();this._UnloadTexturesForObjectClasses(layout,objectClasses)},async LoadLayoutTextures(loadLayout){const curLayout=this._runtime.GetMainRunningLayout();if(!loadLayout||!curLayout||this._runtime.IsLoading())return;await this._LoadTexturesForObjectClasses(curLayout,loadLayout._GetInitialObjectClasses())},
async LoadLayoutTexturesByName(layoutName){const curLayout=this._runtime.GetMainRunningLayout();const loadLayout=this._runtime.GetLayoutManager().GetLayoutByName(layoutName);if(!loadLayout||!curLayout||this._runtime.IsLoading())return;await this._LoadTexturesForObjectClasses(curLayout,loadLayout._GetInitialObjectClasses())},SetFunctionReturnValue(v){const frame=this._eventStack.GetCurrentExpFuncStackFrame();if(!frame)return;switch(frame.GetFunctionReturnType()){case 1:if(typeof v==="number")frame.SetFunctionReturnValue(v);
break;case 2:if(typeof v==="string")frame.SetFunctionReturnValue(v);break;case 3:frame.SetFunctionReturnValue(v);break}},MapFunction(name,str,functionBlock){const mapEntry=this._GetFunctionMap(name.toLowerCase(),true);const strMap=mapEntry.strMap;const lowerStr=str.toLowerCase();if(strMap.has(lowerStr))console.warn(`[Construct 3] Function map '${name}' string '${str}' already in map; overwriting entry`);const firstFunctionBlock=C3.first(strMap.values())||mapEntry.defaultFunc;if(firstFunctionBlock){const firstReturnsValue=
firstFunctionBlock.GetReturnType()!==0;const curReturnsValue=functionBlock.GetReturnType()!==0;if(firstReturnsValue!==curReturnsValue){console.error(`[Construct 3] Function map '${name}' string '${str}' function return type not compatible with other functions in the map; entry ignored`);return}}strMap.set(lowerStr,functionBlock)},MapFunctionDefault(name,functionBlock){const mapEntry=this._GetFunctionMap(name.toLowerCase(),true);if(mapEntry.defaultFunc)console.warn(`[Construct 3] Function map '${name}' already has a default; overwriting entry`);
const firstFunctionBlock=C3.first(mapEntry.strMap.values())||mapEntry.defaultFunc;if(firstFunctionBlock){const firstReturnsValue=firstFunctionBlock.GetReturnType()!==0;const curReturnsValue=functionBlock.GetReturnType()!==0;if(firstReturnsValue!==curReturnsValue){console.error(`[Construct 3] Function map '${name}' default: function return type not compatible with other functions in the map; entry ignored`);return}}mapEntry.defaultFunc=functionBlock},CallMappedFunction(name,str,forwardParams){forwardParams=
Math.floor(forwardParams);const mapEntry=this._GetFunctionMap(name.toLowerCase(),false);if(!mapEntry){console.warn(`[Construct 3] Call mapped function: map name '${name}' not found; call ignored`);return}let functionBlock=mapEntry.strMap.get(str.toLowerCase());if(!functionBlock)if(mapEntry.defaultFunc){functionBlock=mapEntry.defaultFunc;forwardParams=0}else{console.warn(`[Construct 3] Call mapped function: no function associated with map '${name}' string '${str}'; call ignored (consider setting a default)`);
return}if(!functionBlock.IsEnabled())return;if(functionBlock.GetReturnType()!==0){console.warn(`[Construct 3] Call mapped function: map '${name}' string '${str}' has a return type so cannot be called`);return}const runtime=this._runtime;const eventSheetManager=runtime.GetEventSheetManager();const currentEvent=eventSheetManager.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiersIncludingParents();const hasAnySolModifiers=solModifiers.length>0;if(hasAnySolModifiers)eventSheetManager.PushCleanSol(solModifiers);
const paramResults=[];const callerFunctionBlock=eventSheetManager.FindFirstFunctionBlockParent(currentEvent);if(callerFunctionBlock){const callerParameters=callerFunctionBlock.GetFunctionParameters();for(let i=forwardParams,len=callerParameters.length;i<len;++i)paramResults.push(callerParameters[i].GetValue())}const calleeParameters=functionBlock.GetFunctionParameters();for(let i=paramResults.length,len=calleeParameters.length;i<len;++i)paramResults.push(calleeParameters[i].GetInitialValue());if(runtime.IsDebugging())return this._DebugDoCallMappedFunction(eventSheetManager,
functionBlock,paramResults,hasAnySolModifiers,solModifiers);else return this._DoCallMappedFunction(eventSheetManager,functionBlock,paramResults,hasAnySolModifiers,solModifiers)}}};


'use strict';{const C3=self.C3;C3.Plugins.System.Exps={int:function(x){if(typeof x==="string"){x=parseInt(x,10);if(isNaN(x))x=0}return Math.floor(x)},float:function(x){if(typeof x==="string"){x=parseFloat(x);if(isNaN(x))x=0}return x},str(x){return x.toString()},len(x){if(typeof x==="string")return x.length;else return 0},random(a,b){if(typeof b==="undefined")return this._runtime.Random()*a;else return this._runtime.Random()*(b-a)+a},choose(...args){const index=Math.floor(this._runtime.Random()*args.length);
return args[index]},pi(){return Math.PI},infinity(){return Infinity},sqrt(v){return Math.sqrt(v)},abs(v){return Math.abs(v)},round(v){return Math.round(v)},floor(v){return Math.floor(v)},ceil(v){return Math.ceil(v)},sign(v){return Math.sign(v)},sin(x){return Math.sin(C3.toRadians(x))},cos(x){return Math.cos(C3.toRadians(x))},tan(x){return Math.tan(C3.toRadians(x))},asin(x){return C3.toDegrees(Math.asin(x))},acos(x){return C3.toDegrees(Math.acos(x))},atan(x){return C3.toDegrees(Math.atan(x))},exp(x){return Math.exp(x)},
ln(x){return Math.log(x)},log10(x){return Math.log(x)/Math.LN10},max(...args){let ret=args[0];if(typeof ret!=="number")ret=0;for(let i=1,len=args.length;i<len;++i){let n=args[i];if(typeof n!=="number")continue;if(ret<n)ret=n}return ret},min(...args){let ret=args[0];if(typeof ret!=="number")ret=0;for(let i=1,len=args.length;i<len;++i){let n=args[i];if(typeof n!=="number")continue;if(ret>n)ret=n}return ret},clamp(x,l,u){return C3.clamp(x,l,u)},distance(x1,y1,x2,y2){return C3.distanceTo(x1,y1,x2,y2)},
angle(x1,y1,x2,y2){return C3.toDegrees(C3.angleTo(x1,y1,x2,y2))},lerp(a,b,x){return C3.lerp(a,b,x)},unlerp(a,b,y){return C3.unlerp(a,b,y)},qarp(a,b,c,x){return C3.qarp(a,b,c,x)},cubic(a,b,c,d,x){return C3.cubic(a,b,c,d,x)},cosp(a,b,x){return C3.cosp(a,b,x)},anglediff(a,b){return C3.toDegrees(C3.angleDiff(C3.toRadians(a),C3.toRadians(b)))},anglelerp(a,b,x){return C3.toDegrees(C3.angleLerp(C3.toRadians(a),C3.toRadians(b),x))},anglerotate(a,b,c){return C3.toDegrees(C3.angleRotate(C3.toRadians(a),C3.toRadians(b),
C3.toRadians(c)))},setbit(n,b,v){n=n|0;b=b|0;v=v!==0?1:0;return n&~(1<<b)|v<<b},togglebit(n,b){n=n|0;b=b|0;return n^1<<b},getbit(n,b){n=n|0;b=b|0;return n&1<<b?1:0},newline(){return"\n"},uppercase(s){return typeof s==="string"?s.toUpperCase():""},lowercase(s){return typeof s==="string"?s.toLowerCase():""},left(text,n){return typeof text==="string"?text.substr(0,n):""},mid(text,index,count){if(typeof text!=="string")return"";if(count<0)return text.substr(index);else return text.substr(index,count)},
right(text,n){return typeof text==="string"?text.substr(text.length-n):""},trim(text){return typeof text==="string"?text.trim():""},tokenat(text,index,sep){if(typeof text!=="string"||typeof sep!=="string")return"";let arr=text.split(sep);index=Math.floor(index);if(index<0||index>=arr.length)return"";return arr[index]},tokencount(text,sep){if(typeof text!=="string"||typeof sep!=="string"||!text.length)return 0;return text.split(sep).length},find(text,searchStr){if(typeof text==="string"&&typeof searchStr===
"string")return text.search(new RegExp(C3.EscapeRegex(searchStr),"i"));else return-1},findcase(text,searchStr){if(typeof text==="string"&&typeof searchStr==="string")return text.search(new RegExp(C3.EscapeRegex(searchStr),""));else return-1},replace(text,find,replace){if(typeof text==="string"&&typeof find==="string"&&typeof replace==="string")return text.replace(new RegExp(C3.EscapeRegex(find),"gi"),replace);else return typeof text==="string"?text:""},regexsearch(text,regex,flags){const cacheRegex=
this.GetRegex(regex,flags);return text?text.search(cacheRegex):-1},regexreplace(text,regex,flags,replace){const cacheRegex=this.GetRegex(regex,flags);return text?text.replace(cacheRegex,replace):""},regexmatchcount(text,regex,flags){const matches=this.GetRegexMatches(text.toString(),regex,flags);return matches?matches.length:0},regexmatchat(text,regex,flags,index){index=Math.floor(index);const matches=this.GetRegexMatches(text.toString(),regex,flags);if(!matches||index<0||index>=matches.length)return"";
else return matches[index]},zeropad(n,d){let s=n<0?"-":"";if(n<0)n=-n;const zeroes=d-n.toString().length;s+="0".repeat(Math.max(zeroes,0));return s+n.toString()},urlencode(s){return encodeURIComponent(s)},urldecode(s){return decodeURIComponent(s)},dt(){return this._runtime._GetDtFast()},timescale(){return this._runtime.GetTimeScale()},wallclocktime(){return(Date.now()-this._runtime.GetStartTime())/1E3},unixtime(){return Date.now()},time(){return this._runtime.GetGameTime()},tickcount(){return this._runtime.GetTickCount()},
objectcount(){return this._runtime.GetObjectCount()},fps(){return this._runtime.GetFPS()},cpuutilisation(){return this._runtime.GetMainThreadTime()},gpuutilisation(){return this._runtime.GetGPUUtilisation()},windowwidth(){return this._runtime.GetCanvasManager().GetDeviceWidth()},windowheight(){return this._runtime.GetCanvasManager().GetDeviceHeight()},originalwindowwidth(){return this._runtime.GetOriginalViewportWidth()},originalwindowheight(){return this._runtime.GetOriginalViewportHeight()},originalviewportwidth(){return this._runtime.GetOriginalViewportWidth()},
originalviewportheight(){return this._runtime.GetOriginalViewportHeight()},scrollx(){return this._runtime.GetCurrentLayout().GetScrollX()},scrolly(){return this._runtime.GetCurrentLayout().GetScrollY()},layoutname(){return this._runtime.GetCurrentLayout().GetName()},layoutscale(){return this._runtime.GetCurrentLayout().GetScale()},layoutangle(){return C3.toDegrees(this._runtime.GetCurrentLayout().GetAngle())},layoutwidth(){return this._runtime.GetCurrentLayout().GetWidth()},layoutheight(){return this._runtime.GetCurrentLayout().GetHeight()},
viewportleft(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetViewport().getLeft():0},viewporttop(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetViewport().getTop():0},viewportright(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetViewport().getRight():0},viewportbottom(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);
return layer?layer.GetViewport().getBottom():0},viewportwidth(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetViewport().width():0},viewportheight(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetViewport().height():0},canvastolayerx(layerParam,x,y){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.CanvasCssToLayer(x,y)[0]:0},canvastolayery(layerParam,x,y){const layer=
this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.CanvasCssToLayer(x,y)[1]:0},layertocanvasx(layerParam,x,y){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.LayerToCanvasCss(x,y)[0]:0},layertocanvasy(layerParam,x,y){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.LayerToCanvasCss(x,y)[1]:0},layerscale(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetOwnScale():
0},layerangle(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?C3.toDegrees(layer.GetOwnAngle()):0},layeropacity(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetOpacity()*100:0},layerscalerate(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetScaleRate():0},layerparallaxx(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?
layer.GetParallaxX()*100:0},layerparallaxy(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetParallaxY()*100:0},layerzelevation(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetZElevation():0},layerindex(layerParam){const layer=this._runtime.GetCurrentLayout().GetLayer(layerParam);return layer?layer.GetIndex():-1},canvassnapshot(){const canvasManager=this._runtime.GetCanvasManager();if(!canvasManager)return"";
return canvasManager.GetCanvasSnapshotUrl()},loopindex(name){const loopStack=this._loopStack;if(!loopStack.IsInLoop())return 0;if(name){const loop=loopStack.FindByName(name);return loop?loop.GetIndex():0}else return loopStack.GetCurrent().GetIndex()},savestatejson(){return this._runtime.GetLastSaveJsonString()},callmapped(name,str,...paramResults){const mapEntry=this._GetFunctionMap(name.toLowerCase(),false);if(!mapEntry){console.warn(`[Construct 3] Call mapped function: map name '${name}' not found; returning 0`);
return 0}let functionBlock=mapEntry.strMap.get(str.toLowerCase());if(!functionBlock)if(mapEntry.defaultFunc)functionBlock=mapEntry.defaultFunc;else{console.warn(`[Construct 3] Call mapped function: no function associated with map '${name}' string '${str}'; returning 0 (consider setting a default)`);return 0}const returnType=functionBlock.GetReturnType();const defaultReturnValue=functionBlock.GetDefaultReturnValue();if(returnType===0){console.warn(`[Construct 3] Call mapped function: map '${name}' string '${str}' has no return type so cannot be called from an expression; returning 0`);
return 0}if(!functionBlock.IsEnabled())return defaultReturnValue;const runtime=this._runtime;const eventSheetManager=runtime.GetEventSheetManager();const currentEvent=eventSheetManager.GetCurrentEvent();const solModifiers=currentEvent.GetSolModifiersIncludingParents();const hasAnySolModifiers=solModifiers.length>0;if(hasAnySolModifiers)eventSheetManager.PushCleanSol(solModifiers);const calleeParameters=functionBlock.GetFunctionParameters();for(let i=paramResults.length,len=calleeParameters.length;i<
len;++i)paramResults.push(calleeParameters[i].GetInitialValue());const callEventBlock=functionBlock.GetEventBlock();const returnValue=callEventBlock.RunAsExpressionFunctionCall(callEventBlock.GetSolModifiersIncludingParents(),returnType,defaultReturnValue,...paramResults);if(hasAnySolModifiers)eventSheetManager.PopSol(solModifiers);return returnValue},loadingprogress(){return this._runtime.GetAssetManager().GetLoadProgress()},imageloadingprogress(){if(this._imagesLoadingTotal===0)return 1;return this._imagesLoadingComplete/
this._imagesLoadingTotal},renderer(){return"webgl"},rendererdetail(){return this._runtime.GetWebGLRenderer().GetUnmaskedRenderer()},imagememoryusage(){let ret=this._runtime.GetWebGLRenderer().GetEstimatedTextureMemoryUsage();return Math.round(100*ret/(1024*1024))/100},rgb(r,g,b){return C3.PackRGB(r,g,b)},rgbex(r,g,b){return C3.PackRGBEx(r/100,g/100,b/100)},rgba(r,g,b,a){return C3.PackRGBAEx(r/100,g/100,b/100,a/100)},rgbex255(r,g,b){return C3.PackRGBEx(r/255,g/255,b/255)},rgba255(r,g,b,a){return C3.PackRGBAEx(r/
255,g/255,b/255,a/255)},projectname(){return this._runtime.GetProjectName()},projectversion(){return this._runtime.GetProjectVersion()},currenteventsheetname(){return this._runtime.GetCurrentEvent().GetEventSheet().GetName()},currenteventnumber(){return this._runtime.GetCurrentEvent().GetDisplayNumber()}}};


'use strict';{const C3=self.C3;C3.Plugins.Text=class TextPlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.Text.Type=class TextType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}LoadTextures(renderer){}ReleaseTextures(){}}};


'use strict';{const C3=self.C3;const TEMP_COLOR_ARRAY=[0,0,0];const TEXT=0;const ENABLE_BBCODE=1;const FONT=2;const SIZE=3;const LINE_HEIGHT=4;const BOLD=5;const ITALIC=6;const COLOR=7;const HORIZONTAL_ALIGNMENT=8;const VERTICAL_ALIGNMENT=9;const WRAPPING=10;const INITIALLY_VISIBLE=11;const ORIGIN=12;const HORIZONTAL_ALIGNMENTS=["left","center","right"];const VERTICAL_ALIGNMENTS=["top","center","bottom"];const WORD_WRAP=0;const CHARACTER_WRAP=1;const tempRect=new C3.Rect;const tempQuad=new C3.Quad;
C3.Plugins.Text.Instance=class TextInstance extends C3.SDKWorldInstanceBase{constructor(inst,properties){super(inst);this._text="";this._enableBBcode=true;this._faceName="Arial";this._ptSize=12;this._lineHeightOffset=0;this._isBold=false;this._isItalic=false;this._color=C3.New(C3.Color);this._horizontalAlign=0;this._verticalAlign=0;this._wrapByWord=true;this._typewriterStartTime=-1;this._typewriterEndTime=-1;this._typewriterLength=0;this._rendererText=C3.New(C3.Gfx.RendererText,this._runtime.GetWebGLRenderer(),
{timeout:5});this._rendererText.ontextureupdate=()=>this._runtime.UpdateRender();this._rendererText.SetIsAsync(false);if(properties){this._text=properties[TEXT];this._enableBBcode=!!properties[ENABLE_BBCODE];this._faceName=properties[FONT];this._ptSize=properties[SIZE];this._lineHeightOffset=properties[LINE_HEIGHT];this._isBold=!!properties[BOLD];this._isItalic=!!properties[ITALIC];this._horizontalAlign=properties[HORIZONTAL_ALIGNMENT];this._verticalAlign=properties[VERTICAL_ALIGNMENT];this._wrapByWord=
properties[WRAPPING]===WORD_WRAP;const v=properties[COLOR];this._color.setRgb(v[0],v[1],v[2]);this.GetWorldInfo().SetVisible(properties[INITIALLY_VISIBLE])}this._UpdateTextSettings()}Release(){this._CancelTypewriter();this._rendererText.Release();this._rendererText=null;super.Release()}_UpdateTextSettings(){const rendererText=this._rendererText;rendererText.SetText(this._text);rendererText.SetBBCodeEnabled(this._enableBBcode);rendererText.SetFontName(this._faceName);rendererText.SetLineHeight(this._lineHeightOffset);
rendererText.SetBold(this._isBold);rendererText.SetItalic(this._isItalic);rendererText.SetColor(this._color);rendererText.SetHorizontalAlignment(HORIZONTAL_ALIGNMENTS[this._horizontalAlign]);rendererText.SetVerticalAlignment(VERTICAL_ALIGNMENTS[this._verticalAlign]);rendererText.SetWordWrapMode(this._wrapByWord?"word":"character")}_UpdateTextSize(){const wi=this.GetWorldInfo();this._rendererText.SetFontSize(this._ptSize*wi.GetSceneGraphScale());const layer=wi.GetLayer();const textZoom=layer.GetRenderScale()*
layer.Get2DScaleFactorToZ(wi.GetTotalZElevation());this._rendererText.SetSize(wi.GetWidth(),wi.GetHeight(),textZoom)}Draw(renderer){const wi=this.GetWorldInfo();this._UpdateTextSize();const texture=this._rendererText.GetTexture();if(!texture)return;const layer=wi.GetLayer();if(wi.GetAngle()===0&&wi.GetLayer().GetAngle()===0&&wi.GetTotalZElevation()===0&&!wi.HasMesh()){const quad=wi.GetBoundingQuad();const [dl,dt]=layer.LayerToDrawSurface(quad.getTlx(),quad.getTly());const [dr,db]=layer.LayerToDrawSurface(quad.getBrx(),
quad.getBry());const offX=dl-Math.round(dl);const offY=dt-Math.round(dt);tempRect.set(dl,dt,dr,db);tempRect.offset(-offX,-offY);tempQuad.setFromRect(tempRect);const [rtWidth,rtHeight]=renderer.GetRenderTargetSize(renderer.GetRenderTarget());this._runtime.GetCanvasManager().SetDeviceTransform(renderer,rtWidth,rtHeight);renderer.SetTexture(texture);renderer.Quad3(tempQuad,this._rendererText.GetTexRect());layer._SetTransform(renderer)}else{renderer.SetTexture(texture);if(wi.HasMesh())this._DrawMesh(wi,
renderer);else this._DrawStandard(wi,renderer)}}_DrawStandard(wi,renderer){let quad=wi.GetBoundingQuad();if(this._runtime.IsPixelRoundingEnabled())quad=this._PixelRoundQuad(quad);renderer.Quad3(quad,this._rendererText.GetTexRect())}_DrawMesh(wi,renderer){const transformedMesh=wi.GetTransformedMesh();if(wi.IsMeshChanged()){wi.CalculateBbox(tempRect,tempQuad,false);let quad=tempQuad;if(this._runtime.IsPixelRoundingEnabled())quad=this._PixelRoundQuad(quad);transformedMesh.CalculateTransformedMesh(wi.GetSourceMesh(),
quad,this._rendererText.GetTexRect());wi.SetMeshChanged(false)}transformedMesh.Draw(renderer)}_PixelRoundQuad(quad){const offX=quad.getTlx()-Math.round(quad.getTlx());const offY=quad.getTly()-Math.round(quad.getTly());if(offX===0&&offY===0)return quad;else{tempQuad.copy(quad);tempQuad.offset(-offX,-offY);return tempQuad}}SaveToJson(){const o={"t":this._text,"c":this._color.toJSON(),"fn":this._faceName,"ps":this._ptSize};if(this._enableBBcode)o["bbc"]=this._enableBBcode;if(this._horizontalAlign!==
0)o["ha"]=this._horizontalAlign;if(this._verticalAlign!==0)o["va"]=this._verticalAlign;if(!this._wrapByWord)o["wr"]=this._wrapByWord;if(this._lineHeightOffset!==0)o["lho"]=this._lineHeightOffset;if(this._isBold)o["b"]=this._isBold;if(this._isItalic)o["i"]=this._isItalic;if(this._typewriterEndTime!==-1)o["tw"]={"st":this._typewriterStartTime,"en":this._typewriterEndTime,"l":this._typewriterLength};return o}LoadFromJson(o){this._CancelTypewriter();this._text=o["t"],this._color.setFromJSON(o["c"]);this._faceName=
o["fn"],this._ptSize=o["ps"];this._enableBBcode=o.hasOwnProperty("bbc")?o["bbc"]:false;this._horizontalAlign=o.hasOwnProperty("ha")?o["ha"]:0;this._verticalAlign=o.hasOwnProperty("va")?o["va"]:0;this._wrapByWord=o.hasOwnProperty("wr")?o["wr"]:true;this._lineHeightOffset=o.hasOwnProperty("lho")?o["lho"]:0;this._isBold=o.hasOwnProperty("b")?o["b"]:false;this._isItalic=o.hasOwnProperty("i")?o["i"]:false;if(o.hasOwnProperty("tw")){const tw=o["tw"];this._typewriterStartTime=tw["st"];this._typewriterEndTime=
tw["en"];this._typewriterLength=tw["l"]}this._UpdateTextSettings();if(this._typewriterEndTime!==-1)this._StartTicking()}GetPropertyValueByIndex(index){switch(index){case TEXT:return this._text;case ENABLE_BBCODE:return this._enableBBcode;case FONT:return this._faceName;case SIZE:return this._ptSize;case LINE_HEIGHT:return this._lineHeightOffset;case BOLD:return this._isBold;case ITALIC:return this._isItalic;case COLOR:TEMP_COLOR_ARRAY[0]=this._color.getR();TEMP_COLOR_ARRAY[1]=this._color.getG();TEMP_COLOR_ARRAY[2]=
this._color.getB();return TEMP_COLOR_ARRAY;case HORIZONTAL_ALIGNMENT:return this._horizontalAlign;case VERTICAL_ALIGNMENT:return this._verticalAlign;case WRAPPING:return this._wrapByWord?CHARACTER_WRAP:WORD_WRAP}}SetPropertyValueByIndex(index,value){switch(index){case TEXT:if(this._text===value)return;this._text=value;this._UpdateTextSettings();break;case ENABLE_BBCODE:if(this._enableBBcode===!!value)return;this._enableBBcode=!!value;this._UpdateTextSettings();break;case FONT:if(this._faceName===
value)return;this._faceName=value;this._UpdateTextSettings();break;case SIZE:if(this._ptSize===value)return;this._ptSize=value;this._UpdateTextSettings();break;case LINE_HEIGHT:if(this._lineHeightOffset===value)return;this._lineHeightOffset=value;this._UpdateTextSettings();break;case BOLD:if(this._isBold===!!value)return;this._isBold=!!value;this._UpdateTextSettings();break;case ITALIC:if(this._isItalic===!!value)return;this._isItalic=!!value;this._UpdateTextSettings();break;case COLOR:const c=this._color;
const v=value;if(c.getR()===v[0]&&c.getG()===v[1]&&c.getB()===v[2])return;this._color.setRgb(v[0],v[1],v[2]);this._UpdateTextSettings();break;case HORIZONTAL_ALIGNMENT:if(this._horizontalAlign===value)return;this._horizontalAlign=value;this._UpdateTextSettings();break;case VERTICAL_ALIGNMENT:if(this._verticalAlign===value)return;this._verticalAlign=value;this._UpdateTextSettings();break;case WRAPPING:if(this._wrapByWord===(value===WORD_WRAP))return;this._wrapByWord=value===WORD_WRAP;this._UpdateTextSettings();
break}}SetPropertyColorOffsetValueByIndex(index,r,g,b){if(r===0&&g===0&&b===0)return;switch(index){case COLOR:this._color.addRgb(r,g,b);this._UpdateTextSettings();break}}_SetText(text){if(this._text===text)return;this._text=text;this._rendererText.SetText(text);this._runtime.UpdateRender()}GetText(){return this._text}_StartTypewriter(text,duration){this._SetText(text);this._typewriterStartTime=this._runtime.GetWallTime();this._typewriterEndTime=this._typewriterStartTime+duration/this.GetInstance().GetActiveTimeScale();
this._typewriterLength=C3.BBString.StripAnyTags(text).length;this._rendererText.SetDrawMaxCharacterCount(0);this._StartTicking()}_CancelTypewriter(){this._typewriterStartTime=-1;this._typewriterEndTime=-1;this._typewriterLength=0;this._rendererText.SetDrawMaxCharacterCount(-1);this._StopTicking()}_FinishTypewriter(){if(this._typewriterEndTime===-1)return;this._CancelTypewriter();this.Trigger(C3.Plugins.Text.Cnds.OnTypewriterTextFinished);this._runtime.UpdateRender()}_SetFontFace(face){if(this._faceName===
face)return;this._faceName=face;this._rendererText.SetFontName(face);this._runtime.UpdateRender()}_GetFontFace(){return this._faceName}_SetBold(b){b=!!b;if(this._isBold===b)return;this._isBold=b;this._rendererText.SetBold(b);this._runtime.UpdateRender()}_IsBold(){return this._isBold}_SetItalic(i){i=!!i;if(this._isItalic===i)return;this._isItalic=i;this._rendererText.SetItalic(i);this._runtime.UpdateRender()}_IsItalic(){return this._isItalic}_SetFontSize(size){if(this._ptSize===size)return;this._ptSize=
size;this._runtime.UpdateRender()}_GetFontSize(){return this._ptSize}_SetLineHeight(lho){if(this._lineHeightOffset===lho)return;this._lineHeightOffset=lho;this._UpdateTextSettings();this._runtime.UpdateRender()}_GetLineHeight(){return this._lineHeightOffset}_SetHAlign(h){if(this._horizontalAlign===h)return;this._horizontalAlign=h;this._UpdateTextSettings();this._runtime.UpdateRender()}_GetHAlign(){return this._horizontalAlign}_SetVAlign(v){if(this._verticalAlign===v)return;this._verticalAlign=v;this._UpdateTextSettings();
this._runtime.UpdateRender()}_GetVAlign(){return this._verticalAlign}_SetWrapByWord(w){w=!!w;if(this._wrapByWord===w)return;this._wrapByWord=w;this._UpdateTextSettings();this._runtime.UpdateRender()}_IsWrapByWord(){return this._wrapByWord}Tick(){const wallTime=this._runtime.GetWallTime();if(wallTime>=this._typewriterEndTime){this._CancelTypewriter();this.Trigger(C3.Plugins.Text.Cnds.OnTypewriterTextFinished);this._runtime.UpdateRender()}else{let displayLength=C3.relerp(this._typewriterStartTime,this._typewriterEndTime,
wallTime,0,this._typewriterLength);displayLength=Math.floor(displayLength);if(displayLength!==this._rendererText.GetDrawMaxCharacterCount()){this._rendererText.SetDrawMaxCharacterCount(displayLength);this._runtime.UpdateRender()}}}GetDebuggerProperties(){const prefix="plugins.text";return[{title:prefix+".name",properties:[{name:prefix+".properties.text.name",value:this._text,onedit:v=>this._SetText(v)}]}]}GetScriptInterfaceClass(){return self.ITextInstance}};const map=new WeakMap;const SCRIPT_HORIZONTAL_ALIGNMENTS=
new Map([["left",0],["center",1],["right",2]]);const SCRIPT_VERTICAL_ALIGNMENTS=new Map([["top",0],["center",1],["bottom",2]]);const SCRIPT_WRAP_MODES=new Map([["word",true],["character",false]]);self.ITextInstance=class ITextInstance extends self.IWorldInstance{constructor(){super();map.set(this,self.IInstance._GetInitInst().GetSdkInstance())}get text(){return map.get(this).GetText()}set text(str){const inst=map.get(this);inst._CancelTypewriter();inst._SetText(str)}typewriterText(str,duration){const inst=
map.get(this);inst._CancelTypewriter();inst._StartTypewriter(str,duration)}typewriterFinish(){map.get(this)._FinishTypewriter()}set fontFace(str){map.get(this)._SetFontFace(str)}get fontFace(){return map.get(this)._GetFontFace()}set isBold(b){map.get(this)._SetBold(b)}get isBold(){return map.get(this)._IsBold()}set isItalic(i){map.get(this)._SetItalic(i)}get isItalic(){return map.get(this)._IsItalic()}set sizePt(pt){map.get(this)._SetFontSize(pt)}get sizePt(){return map.get(this)._GetFontSize()}set lineHeight(lho){map.get(this)._SetLineHeight(lho)}get lineHeight(){return map.get(this)._GetLineHeight()}set horizontalAlign(str){const h=
SCRIPT_HORIZONTAL_ALIGNMENTS.get(str);if(typeof h==="undefined")throw new Error("invalid mode");map.get(this)._SetHAlign(h)}get horizontalAlign(){return HORIZONTAL_ALIGNMENTS[map.get(this)._GetHAlign()]}set verticalAlign(str){const v=SCRIPT_VERTICAL_ALIGNMENTS.get(str);if(typeof v==="undefined")throw new Error("invalid mode");map.get(this)._SetVAlign(v)}get verticalAlign(){return VERTICAL_ALIGNMENTS[map.get(this)._GetVAlign()]}set wordWrapMode(str){const isWrapByWord=SCRIPT_WRAP_MODES.get(str);if(typeof isWrapByWord===
"undefined")throw new Error("invalid mode");map.get(this)._SetWrapByWord(isWrapByWord)}get wordWrapMode(){return map.get(this)._IsWrapByWord()?"word":"character"}}};


'use strict';{const C3=self.C3;C3.Plugins.Text.Cnds={CompareText(str,caseSensitive){if(caseSensitive)return this._text===str;else return C3.equalsNoCase(this._text,str)},IsRunningTypewriterText(){return this._typewriterEndTime!==-1},OnTypewriterTextFinished(){return true}}};


'use strict';{const C3=self.C3;const tempColor=C3.New(C3.Color);C3.Plugins.Text.Acts={SetText(param){this._CancelTypewriter();if(typeof param==="number"&&param<1E9)param=Math.round(param*1E10)/1E10;this._SetText(param.toString())},AppendText(param){this._CancelTypewriter();if(typeof param==="number"&&param<1E9)param=Math.round(param*1E10)/1E10;param=param.toString();if(!param)return;this._SetText(this._text+param)},TypewriterText(param,duration){this._CancelTypewriter();if(typeof param==="number"&&
param<1E9)param=Math.round(param*1E10)/1E10;this._StartTypewriter(param.toString(),duration)},SetFontFace(face,style){let bold=false;let italic=false;switch(style){case 1:bold=true;break;case 2:italic=true;break;case 3:bold=true;italic=true;break}if(face===this._faceName&&bold===this._isBold&&italic===this._isItalic)return;this._SetFontFace(face);this._SetBold(bold);this._SetItalic(italic)},SetFontSize(size){this._SetFontSize(size)},SetFontColor(rgb){tempColor.setFromRgbValue(rgb);tempColor.clamp();
if(this._color.equalsIgnoringAlpha(tempColor))return;this._color.copyRgb(tempColor);this._rendererText.SetColor(this._color);this._runtime.UpdateRender()},SetWebFont(familyName,cssUrl){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},SetEffect(effect){this.GetWorldInfo().SetBlendMode(effect);this._runtime.UpdateRender()},TypewriterFinish(){this._FinishTypewriter()},SetLineHeight(lho){this._SetLineHeight(lho)},SetHAlign(h){this._SetHAlign(h)},SetVAlign(v){this._SetVAlign(v)},
SetWrapping(w){this._SetWrapByWord(w===0)}}};


'use strict';{const C3=self.C3;C3.Plugins.Text.Exps={Text(){return this._text},PlainText(){if(this._enableBBcode)return C3.BBString.StripAnyTags(this._text);else return this._text},FaceName(){return this._faceName},FaceSize(){return this._ptSize},TextWidth(){this._UpdateTextSize();return this._rendererText.GetTextWidth()},TextHeight(){this._UpdateTextSize();return this._rendererText.GetTextHeight()},LineHeight(){return this._lineHeightOffset}}};


'use strict';{const C3=self.C3;C3.Plugins.NinePatch=class NinePatchPlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.NinePatch.Type=class NinePatchType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass);this._textureSet=null;this._drawable=null}Release(){this.ReleaseTextures();super.Release()}OnCreate(){this.GetImageInfo().LoadAsset(this._runtime)}async LoadTextures(renderer){const imageInfo=this.GetImageInfo();this._drawable=await imageInfo.ExtractImageToCanvas()}CreatePatch(lm,rm,tm,bm){if(this._textureSet||!this._drawable)return;this._textureSet=new self.NinePatchTextureSet(this);
this._textureSet.CreateTextures(this._drawable,lm,rm,tm,bm)}ReleaseTextures(){if(this._textureSet){this._textureSet.Release();this._textureSet=null}}GetTextureSet(){return this._textureSet}}};


'use strict';{const C3=self.C3;const LEFT_MARGIN=0;const RIGHT_MARGIN=1;const TOP_MARGIN=2;const BOTTOM_MARGIN=3;const EDGES=4;const FILL=5;const INITIALLY_VISIBLE=6;const ORIGIN=7;const SEAMS=8;const tempRect=C3.New(C3.Rect);const tempQuad=C3.New(C3.Quad);C3.Plugins.NinePatch.Instance=class NinePatchInstance extends C3.SDKWorldInstanceBase{constructor(inst,properties){super(inst);this._leftMargin=16;this._rightMargin=16;this._topMargin=16;this._bottomMargin=16;this._edges=1;this._fill=1;this._isSeamless=
true;if(properties){this._leftMargin=properties[LEFT_MARGIN];this._rightMargin=properties[RIGHT_MARGIN];this._topMargin=properties[TOP_MARGIN];this._bottomMargin=properties[BOTTOM_MARGIN];this._edges=properties[EDGES];this._fill=properties[FILL];this._isSeamless=!!properties[SEAMS];this.GetWorldInfo().SetVisible(!!properties[INITIALLY_VISIBLE])}this._sdkType.CreatePatch(this._leftMargin,this._rightMargin,this._topMargin,this._bottomMargin)}Release(){super.Release()}Draw(renderer){let textureSet=this._sdkType.GetTextureSet();
if(!textureSet){this._sdkType.CreatePatch(this._leftMargin,this._rightMargin,this._topMargin,this._bottomMargin);textureSet=this._sdkType.GetTextureSet();if(!textureSet)return}const wi=this.GetWorldInfo();const lm=this._leftMargin;const rm=this._rightMargin;const tm=this._topMargin;const bm=this._bottomMargin;const iw=textureSet.GetImageWidth();const ih=textureSet.GetImageHeight();const re=iw-rm;const be=ih-bm;const bquad=wi.GetBoundingQuad();const myx=bquad.getTlx();const myy=bquad.getTly();const myw=
wi.GetWidth();const myh=wi.GetHeight();const s=this._isSeamless?1:0;const edges=this._edges;const fill=this._fill;if(lm>0&&tm>0)this._DrawPatch(renderer,textureSet.GetTexture(),0,0,lm+s,tm+s,myx,myy,lm+s,tm+s);if(rm>0&&tm>0)this._DrawPatch(renderer,textureSet.GetTexture(),re-s,0,rm+s,tm+s,myx+myw-rm-s,myy,rm+s,tm+s);if(rm>0&&bm>0)this._DrawPatch(renderer,textureSet.GetTexture(),re-s,be-s,rm+s,bm+s,myx+myw-rm-s,myy+myh-bm-s,rm+s,bm+s);if(lm>0&&bm>0)this._DrawPatch(renderer,textureSet.GetTexture(),
0,be-s,lm+s,bm+s,myx,myy+myh-bm-s,lm+s,bm+s);if(edges===0){const off=fill===2?0:s;if(lm>0&&be>tm)this._TilePatch(renderer,textureSet.GetLeftTexture(),myx,myy+tm,lm+off,myh-tm-bm,0,0);if(rm>0&&be>tm)this._TilePatch(renderer,textureSet.GetRightTexture(),myx+myw-rm-off,myy+tm,rm+off,myh-tm-bm,off,0);if(tm>0&&re>lm)this._TilePatch(renderer,textureSet.GetTopTexture(),myx+lm,myy,myw-lm-rm,tm+off,0,0);if(bm>0&&re>lm)this._TilePatch(renderer,textureSet.GetBottomTexture(),myx+lm,myy+myh-bm-off,myw-lm-rm,bm+
off,0,off)}else if(edges===1){if(lm>0&&be>tm)this._DrawPatch(renderer,textureSet.GetTexture(),0,tm,lm,be-tm,myx,myy+tm,lm,myh-tm-bm);if(rm>0&&be>tm)this._DrawPatch(renderer,textureSet.GetTexture(),re,tm,rm,be-tm,myx+myw-rm,myy+tm,rm,myh-tm-bm);if(tm>0&&re>lm)this._DrawPatch(renderer,textureSet.GetTexture(),lm,0,re-lm,tm,myx+lm,myy,myw-lm-rm,tm);if(bm>0&&re>lm)this._DrawPatch(renderer,textureSet.GetTexture(),lm,be,re-lm,bm,myx+lm,myy+myh-bm,myw-lm-rm,bm)}if(be>tm&&re>lm)if(fill===0)this._TilePatch(renderer,
textureSet.GetFillTexture(),myx+lm,myy+tm,myw-lm-rm,myh-tm-bm,0,0);else if(fill===1)this._DrawPatch(renderer,textureSet.GetTexture(),lm,tm,re-lm,be-tm,myx+lm,myy+tm,myw-lm-rm,myh-tm-bm)}_DrawPatch(renderer,tex,sx,sy,sw,sh,dx,dy,dw,dh){const texW=tex.GetWidth();const texH=tex.GetHeight();renderer.SetTexture(tex);const wi=this.GetWorldInfo();const bquad=wi.GetBoundingQuad();const offX=bquad.getTlx();const offY=bquad.getTly();tempRect.set(dx,dy,dx+dw,dy+dh);tempRect.offset(-offX,-offY);tempQuad.setFromRotatedRect(tempRect,
wi.GetAngle());tempQuad.offset(offX,offY);tempRect.set(sx/texW,sy/texH,(sx+sw)/texW,(sy+sh)/texH);renderer.Quad3(tempQuad,tempRect)}_TilePatch(renderer,tex,dx,dy,dw,dh,ox,oy){const texW=tex.GetWidth();const texH=tex.GetHeight();renderer.SetTexture(tex);const wi=this.GetWorldInfo();const bquad=wi.GetBoundingQuad();const offX=bquad.getTlx();const offY=bquad.getTly();tempRect.set(dx,dy,dx+dw,dy+dh);tempRect.offset(-offX,-offY);tempQuad.setFromRotatedRect(tempRect,wi.GetAngle());tempQuad.offset(offX,
offY);tempRect.set(-ox/texW,-oy/texH,(dw-ox)/texW,(dh-oy)/texH);renderer.Quad3(tempQuad,tempRect)}GetCurrentImageInfo(){this._objectClass.GetImageInfo()}GetPropertyValueByIndex(index){}SetPropertyValueByIndex(index,value){}}};


'use strict';{const C3=self.C3;C3.Plugins.NinePatch.Cnds={}};


'use strict';{const C3=self.C3;C3.Plugins.NinePatch.Acts={SetEffect(effect){this.GetWorldInfo().SetBlendMode(effect);this._runtime.UpdateRender()}}};


'use strict';{const C3=self.C3;C3.Plugins.NinePatch.Exps={}};


'use strict';{const C3=self.C3;function CloneDrawable(drawable){const canvas=C3.CreateCanvas(drawable.width,drawable.height);const ctx=canvas.getContext("2d");ctx.drawImage(drawable,0,0);return canvas}self.NinePatchTextureSet=class NinePatchTextureSet{constructor(sdkType){this._sdkType=sdkType;this._runtime=this._sdkType.GetRuntime();this._texture=null;this._fillTexture=null;this._leftTexture=null;this._rightTexture=null;this._topTexture=null;this._bottomTexture=null;this._imageWidth=0;this._imageHeight=
0;this._renderer=this._runtime.GetWebGLRenderer();this._isLoading=false;this._wasReleased=false}Release(){if(!this._renderer.IsContextLost()){this._renderer.DeleteTexture(this._texture);this._renderer.DeleteTexture(this._fillTexture);this._renderer.DeleteTexture(this._leftTexture);this._renderer.DeleteTexture(this._rightTexture);this._renderer.DeleteTexture(this._topTexture);this._renderer.DeleteTexture(this._bottomTexture)}this._texture=null;this._fillTexture=null;this._leftTexture=null;this._rightTexture=
null;this._topTexture=null;this._bottomTexture=null;this._sdkType=null;this._renderer=null;this._wasReleased=true}WasReleased(){return this._wasReleased}CreateTextures(drawable,lm,rm,tm,bm){this._SliceImage(drawable,lm,rm,tm,bm)}HasCreatedTextures(){return!!this._texture}_SliceImage(drawable,lm,rm,tm,bm){if(this._wasReleased)return;const iw=drawable.width;const ih=drawable.height;this._imageWidth=iw;this._imageHeight=ih;const re=iw-rm;const be=ih-bm;const sampling=this._runtime.GetSampling();this._texture=
this._renderer.CreateStaticTexture(CloneDrawable(drawable),{sampling});if(re>lm&&be>tm)this._fillTexture=this._renderer.CreateStaticTexture(this._SliceSubImage(CloneDrawable(drawable),lm,tm,re,be),{wrapX:"repeat",wrapY:"repeat",sampling});if(lm>0&&be>tm)this._leftTexture=this._renderer.CreateStaticTexture(this._SliceSubImage(CloneDrawable(drawable),0,tm,lm,be),{wrapY:"repeat",sampling});if(rm>0&&be>tm)this._rightTexture=this._renderer.CreateStaticTexture(this._SliceSubImage(CloneDrawable(drawable),
re,tm,iw,be),{wrapY:"repeat",sampling});if(tm>0&&re>lm)this._topTexture=this._renderer.CreateStaticTexture(this._SliceSubImage(CloneDrawable(drawable),lm,0,re,tm),{wrapX:"repeat",sampling});if(bm>0&&re>lm)this._bottomTexture=this._renderer.CreateStaticTexture(this._SliceSubImage(CloneDrawable(drawable),lm,be,re,ih),{wrapX:"repeat",sampling})}_SliceSubImage(drawable,x1,y1,x2,y2){const w=x2-x1;const h=y2-y1;const tmpCanvas=C3.CreateCanvas(w,h);const tmpCtx=tmpCanvas.getContext("2d");tmpCtx.drawImage(drawable,
x1,y1,w,h,0,0,w,h);return tmpCanvas}GetImageWidth(){return this._imageWidth}GetImageHeight(){return this._imageHeight}GetTexture(){return this._texture}GetFillTexture(){return this._fillTexture}GetLeftTexture(){return this._leftTexture}GetRightTexture(){return this._rightTexture}GetTopTexture(){return this._topTexture}GetBottomTexture(){return this._bottomTexture}}};


'use strict';{const C3=self.C3;C3.Plugins.Sprite=class SpritePlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.Sprite.Type=class SpriteType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass);this._animations=objectClass.GetAnimations()}Release(){C3.clearArray(this._animations);super.Release()}OnCreate(){for(const a of this._animations)a.LoadAllAssets(this._runtime)}LoadTextures(renderer){const opts={sampling:this._runtime.GetSampling()};return Promise.all(this._animations.map(a=>a.LoadAllTextures(renderer,opts)))}ReleaseTextures(){for(const a of this._animations)a.ReleaseAllTextures()}OnDynamicTextureLoadComplete(){this._UpdateAllCurrentTexture()}_UpdateAllCurrentTexture(){for(const inst of this._objectClass.instancesIncludingPendingCreate())inst.GetSdkInstance()._UpdateCurrentTexture()}FinishCondition(doPick){C3.Plugins.Sprite._FinishCondition(this,
doPick)}}};


'use strict';{const C3=self.C3;const INITIALLY_VISIBLE=0;const INITIAL_ANIMATION=1;const INITIAL_FRAME=2;const ENABLE_COLLISIONS=3;const tempRect=C3.New(C3.Rect);const tempQuad=C3.New(C3.Quad);const tempVec2=C3.New(C3.Vector2);const FLAG_PLAYING_FORWARDS=1<<0;const FLAG_ANIMATION_PLAYING=1<<1;const FLAG_ANIMATION_TRIGGER=1<<2;C3.Plugins.Sprite.Instance=class SpriteInstance extends C3.SDKWorldInstanceBase{constructor(inst,properties){super(inst);let initiallyVisible=true;let initialAnimation="";let initialFrame=
0;let collisionEnabled=true;if(properties){initiallyVisible=!!properties[INITIALLY_VISIBLE];initialAnimation=properties[INITIAL_ANIMATION];initialFrame=properties[INITIAL_FRAME];collisionEnabled=properties[ENABLE_COLLISIONS]}this._currentAnimation=this._objectClass.GetAnimationByName(initialAnimation)||this._objectClass.GetAnimations()[0];this._currentFrameIndex=C3.clamp(initialFrame,0,this._currentAnimation.GetFrameCount()-1);this._currentAnimationFrame=this._currentAnimation.GetFrameAt(this._currentFrameIndex);
const initialImageInfo=this._currentAnimationFrame.GetImageInfo();this._currentTexture=initialImageInfo.GetTexture();this._currentRcTex=initialImageInfo.GetTexRect();this.HandleWebGLContextLoss();inst.SetFlag(FLAG_ANIMATION_PLAYING,true);inst.SetFlag(FLAG_PLAYING_FORWARDS,this._currentAnimation.GetSpeed()>=0);this._currentAnimationSpeed=Math.abs(this._currentAnimation.GetSpeed());this._currentAnimationRepeatTo=this._currentAnimation.GetRepeatTo();this._animationTimer=C3.New(C3.KahanSum);this._frameStartTime=
0;this._animationRepeats=0;this._animTriggerName="";this._changeAnimFrameIndex=-1;this._changeAnimationName="";this._changeAnimationFrom=0;const wi=this.GetWorldInfo();this._bquadRef=wi.GetBoundingQuad();wi.SetVisible(initiallyVisible);wi.SetCollisionEnabled(collisionEnabled);wi.SetOriginX(this._currentAnimationFrame.GetOriginX());wi.SetOriginY(this._currentAnimationFrame.GetOriginY());wi.SetSourceCollisionPoly(this._currentAnimationFrame.GetCollisionPoly());wi.SetBboxChanged();if((this._objectClass.GetAnimationCount()!==
1||this._objectClass.GetAnimations()[0].GetFrameCount()!==1)&&this._currentAnimationSpeed!==0)this._StartTicking()}Release(){this._currentAnimation=null;this._currentAnimationFrame=null;this._currentTexture=null;this._animationTimer=null;super.Release()}GetCurrentImageInfo(){return this._currentAnimationFrame.GetImageInfo()}OnWebGLContextLost(){this._currentTexture=null}OnWebGLContextRestored(){this._UpdateCurrentTexture()}Draw(renderer){const texture=this._currentTexture;if(texture===null)return;
renderer.SetTexture(texture);const wi=this.GetWorldInfo();if(wi.HasMesh())this._DrawMesh(wi,renderer);else this._DrawStandard(wi,renderer)}_DrawStandard(wi,renderer){let quad=this._bquadRef;if(this._runtime.IsPixelRoundingEnabled())quad=wi.PixelRoundQuad(quad);renderer.Quad3(quad,this._currentRcTex)}_DrawMesh(wi,renderer){const transformedMesh=wi.GetTransformedMesh();if(wi.IsMeshChanged()){wi.CalculateBbox(tempRect,tempQuad,false);let quad=tempQuad;if(this._runtime.IsPixelRoundingEnabled())quad=wi.PixelRoundQuad(quad);
transformedMesh.CalculateTransformedMesh(wi.GetSourceMesh(),quad,this._currentRcTex);wi.SetMeshChanged(false)}transformedMesh.Draw(renderer)}GetAnimationTime(){return this._animationTimer.Get()}IsAnimationPlaying(){return this._inst.GetFlag(FLAG_ANIMATION_PLAYING)}SetAnimationPlaying(e){this._inst.SetFlag(FLAG_ANIMATION_PLAYING,e)}IsPlayingForwards(){return this._inst.GetFlag(FLAG_PLAYING_FORWARDS)}SetPlayingForwards(e){this._inst.SetFlag(FLAG_PLAYING_FORWARDS,e)}IsInAnimationTrigger(){return this._inst.GetFlag(FLAG_ANIMATION_TRIGGER)}SetInAnimationTrigger(e){this._inst.SetFlag(FLAG_ANIMATION_TRIGGER,
e)}Tick(){if(this._changeAnimationName)this._DoChangeAnimation();if(this._changeAnimFrameIndex>=0)this._DoChangeAnimFrame();const currentAnimationSpeed=this._currentAnimationSpeed;if(!this.IsAnimationPlaying()||currentAnimationSpeed===0){this._StopTicking();return}const dt=this._runtime.GetDt(this._inst);this._animationTimer.Add(dt);const now=this.GetAnimationTime();const prevFrame=this._currentAnimationFrame;const currentFrameTime=prevFrame.GetDuration()/currentAnimationSpeed;if(now<this._frameStartTime+
currentFrameTime)return;const currentAnimation=this._currentAnimation;const repeatTo=this._currentAnimationRepeatTo;const frameCount=currentAnimation.GetFrameCount();const repeatCount=currentAnimation.GetRepeatCount();const isLooping=currentAnimation.IsLooping();const isPingPong=currentAnimation.IsPingPong();if(this.IsPlayingForwards())this._currentFrameIndex++;else this._currentFrameIndex--;this._frameStartTime+=currentFrameTime;if(this._currentFrameIndex>=frameCount)if(isPingPong){this.SetPlayingForwards(false);
this._currentFrameIndex=frameCount-2}else if(isLooping)this._currentFrameIndex=repeatTo;else{this._animationRepeats++;if(this._animationRepeats>=repeatCount)this._FinishAnimation(false);else this._currentFrameIndex=repeatTo}if(this._currentFrameIndex<0)if(isPingPong){this._currentFrameIndex=1;this.SetPlayingForwards(true);if(!isLooping){this._animationRepeats++;if(this._animationRepeats>=repeatCount)this._FinishAnimation(true)}}else if(isLooping)this._currentFrameIndex=repeatTo;else{this._animationRepeats++;
if(this._animationRepeats>=repeatCount)this._FinishAnimation(true);else this._currentFrameIndex=repeatTo}this._currentFrameIndex=C3.clamp(this._currentFrameIndex,0,frameCount-1);const nextFrame=currentAnimation.GetFrameAt(this._currentFrameIndex);if(now>this._frameStartTime+nextFrame.GetDuration()/currentAnimationSpeed)this._frameStartTime=now;this._OnFrameChanged(prevFrame,nextFrame)}_FinishAnimation(reverse){this._currentFrameIndex=reverse?0:this._currentAnimation.GetFrameCount()-1;this.SetAnimationPlaying(false);
this._animTriggerName=this._currentAnimation.GetName();this.SetInAnimationTrigger(true);this.Trigger(C3.Plugins.Sprite.Cnds.OnAnyAnimFinished);this.Trigger(C3.Plugins.Sprite.Cnds.OnAnimFinished);this.SetInAnimationTrigger(false);this._animationRepeats=0}_OnFrameChanged(prevFrame,nextFrame){if(prevFrame===nextFrame)return;const wi=this.GetWorldInfo();const prevImage=prevFrame.GetImageInfo();const nextImage=nextFrame.GetImageInfo();const oldW=prevImage.GetWidth();const oldH=prevImage.GetHeight();const newW=
nextImage.GetWidth();const newH=nextImage.GetHeight();if(oldW!==newW)wi.SetWidth(wi.GetWidth()*(newW/oldW));if(oldH!==newH)wi.SetHeight(wi.GetHeight()*(newH/oldH));wi.SetOriginX(nextFrame.GetOriginX());wi.SetOriginY(nextFrame.GetOriginY());wi.SetSourceCollisionPoly(nextFrame.GetCollisionPoly());wi.SetBboxChanged();this._currentAnimationFrame=nextFrame;this._currentTexture=nextImage.GetTexture();this._currentRcTex=nextImage.GetTexRect();const behaviorInstances=this.GetInstance().GetBehaviorInstances();
for(let i=0,len=behaviorInstances.length;i<len;++i)behaviorInstances[i].OnSpriteFrameChanged(prevFrame,nextFrame);this.Trigger(C3.Plugins.Sprite.Cnds.OnFrameChanged);this._runtime.UpdateRender()}_StartAnim(from){this.SetAnimationPlaying(true);this._frameStartTime=this.GetAnimationTime();if(from===1&&this._currentFrameIndex!==0){this._changeAnimFrameIndex=0;if(!this.IsInAnimationTrigger())this._DoChangeAnimFrame()}this._StartTicking()}_SetAnim(animName,from){this._changeAnimationName=animName;this._changeAnimationFrom=
from;this._StartTicking();if(!this.IsInAnimationTrigger())this._DoChangeAnimation()}_GetCurrentAnimationName(){if(this._changeAnimationName)return this._changeAnimationName;else return this._currentAnimation.GetName()}_SetAnimFrame(frameNum){if(!isFinite(frameNum))return;this._changeAnimFrameIndex=frameNum;if(!this.IsInAnimationTrigger())this._DoChangeAnimFrame()}_GetAnimFrame(){return this._currentFrameIndex}_SetAnimSpeed(s){this._currentAnimationSpeed=Math.abs(s);this.SetPlayingForwards(s>=0);if(this._currentAnimationSpeed>
0)this._StartTicking()}_GetAnimSpeed(){return this.IsPlayingForwards()?this._currentAnimationSpeed:-this._currentAnimationSpeed}_SetAnimRepeatToFrame(f){f=C3.clamp(Math.floor(f),0,this._currentAnimation.GetFrameCount()-1);this._currentAnimationRepeatTo=f}_GetAnimRepeatToFrame(){return this._currentAnimationRepeatTo}_DoChangeAnimation(){const prevFrame=this._currentAnimationFrame;const animation=this._objectClass.GetAnimationByName(this._changeAnimationName);this._changeAnimationName="";if(!animation)return;
if(animation===this._currentAnimation&&this.IsAnimationPlaying())return;this._currentAnimation=animation;this.SetPlayingForwards(animation.GetSpeed()>=0);this._currentAnimationSpeed=Math.abs(animation.GetSpeed());this._currentAnimationRepeatTo=animation.GetRepeatTo();this._currentFrameIndex=C3.clamp(this._currentFrameIndex,0,this._currentAnimation.GetFrameCount()-1);if(this._changeAnimationFrom===1)this._currentFrameIndex=0;this.SetAnimationPlaying(true);this._frameStartTime=this.GetAnimationTime();
const nextFrame=this._currentAnimation.GetFrameAt(this._currentFrameIndex);this._OnFrameChanged(prevFrame,nextFrame)}_DoChangeAnimFrame(){const prevFrame=this._currentAnimationFrame;const prevFrameIndex=this._currentFrameIndex;this._currentFrameIndex=C3.clamp(Math.floor(this._changeAnimFrameIndex),0,this._currentAnimation.GetFrameCount()-1);this._changeAnimFrameIndex=-1;if(prevFrameIndex===this._currentFrameIndex)return;const nextFrame=this._currentAnimation.GetFrameAt(this._currentFrameIndex);this._OnFrameChanged(prevFrame,
nextFrame);this._frameStartTime=this.GetAnimationTime()}_UpdateCurrentTexture(){const curImageInfo=this._currentAnimationFrame.GetImageInfo();this._currentTexture=curImageInfo.GetTexture();this._currentRcTex=curImageInfo.GetTexRect();this.GetWorldInfo().SetMeshChanged(true)}GetImagePointCount(){return this._currentAnimationFrame.GetImagePointCount()}GetImagePoint(nameOrIndex){const frame=this._currentAnimationFrame;const wi=this.GetWorldInfo();let ip=null;if(typeof nameOrIndex==="string")ip=frame.GetImagePointByName(nameOrIndex);
else if(typeof nameOrIndex==="number")ip=frame.GetImagePointByIndex(nameOrIndex-1);else throw new TypeError("expected string or number");if(!ip)return[wi.GetX(),wi.GetY()];tempVec2.copy(ip.GetVec2());if(wi.HasMesh()){const [tx,ty]=wi.GetSourceMesh().TransformPoint(tempVec2.getX(),tempVec2.getY());tempVec2.set(tx,ty)}tempVec2.offset(-frame.GetOriginX(),-frame.GetOriginY());tempVec2.scale(wi.GetWidth(),wi.GetHeight());tempVec2.rotate(wi.GetAngle());tempVec2.offset(wi.GetX(),wi.GetY());return[tempVec2.getX(),
tempVec2.getY()]}GetCollisionPolyPointCount(){return this.GetWorldInfo().GetTransformedCollisionPoly().pointCount()}GetCollisionPolyPoint(index){index=Math.floor(index);const wi=this.GetWorldInfo();const poly=wi.GetTransformedCollisionPoly();const pointCount=poly.pointCount();if(index===pointCount)index=0;if(index<0||index>=pointCount)return[0,0];const pointsArr=poly.pointsArr();return[pointsArr[index*2+0]+wi.GetX(),pointsArr[index*2+1]+wi.GetY()]}GetDebuggerProperties(){const Acts=C3.Plugins.Sprite.Acts;
const prefix="plugins.sprite.debugger.animation-properties";return[{title:prefix+".title",properties:[{name:prefix+".current-animation",value:this._currentAnimation.GetName(),onedit:v=>this.CallAction(Acts.SetAnim,v,0)},{name:prefix+".current-frame",value:this._currentFrameIndex,onedit:v=>this.CallAction(Acts.SetAnimFrame,v)},{name:prefix+".is-playing",value:this.IsAnimationPlaying(),onedit:v=>v?this.CallAction(Acts.StartAnim,0):this.CallAction(Acts.StopAnim)},{name:prefix+".speed",value:this._currentAnimationSpeed,
onedit:v=>this.CallAction(Acts.SetAnimSpeed,v)},{name:prefix+".repeats",value:this._animationRepeats,onedit:v=>this._animationRepeats=v}]}]}SaveToJson(){const o={"a":this._currentAnimation.GetSID()};if(this._frameStartTime!==0)o["fs"]=this._frameStartTime;const animTime=this.GetAnimationTime();if(animTime!==0)o["at"]=animTime;if(this._currentFrameIndex!==0)o["f"]=this._currentFrameIndex;if(this._currentAnimationSpeed!==0)o["cas"]=this._currentAnimationSpeed;if(this._animationRepeats!==1)o["ar"]=this._animationRepeats;
if(this._currentAnimationRepeatTo!==0)o["rt"]=this._currentAnimationRepeatTo;if(!this.IsAnimationPlaying())o["ap"]=this.IsAnimationPlaying();if(!this.IsPlayingForwards())o["af"]=this.IsPlayingForwards();const wi=this.GetWorldInfo();if(wi.IsCollisionEnabled())o["ce"]=wi.IsCollisionEnabled();return o}LoadFromJson(o){const anim=this.GetObjectClass().GetAnimationBySID(o["a"]);if(anim)this._currentAnimation=anim;this._frameStartTime=o.hasOwnProperty("fs")?o["fs"]:0;this._animationTimer.Set(o.hasOwnProperty("at")?
o["at"]:0);const frameIndex=o.hasOwnProperty("f")?o["f"]:0;this._currentFrameIndex=C3.clamp(frameIndex,0,this._currentAnimation.GetFrameCount()-1);this._currentAnimationSpeed=o.hasOwnProperty("cas")?o["cas"]:0;this._animationRepeats=o.hasOwnProperty("ar")?o["ar"]:1;const repeatToIndex=o.hasOwnProperty("rt")?o["rt"]:0;this._currentAnimationRepeatTo=C3.clamp(repeatToIndex,0,this._currentAnimation.GetFrameCount()-1);this.SetAnimationPlaying(o.hasOwnProperty("ap")?!!o["ap"]:true);this.SetPlayingForwards(o.hasOwnProperty("af")?
!!o["af"]:true);const nextFrame=this._currentAnimation.GetFrameAt(this._currentFrameIndex);this._currentAnimationFrame=nextFrame;this._UpdateCurrentTexture();const wi=this.GetWorldInfo();wi.SetOriginX(nextFrame.GetOriginX());wi.SetOriginY(nextFrame.GetOriginY());wi.SetSourceCollisionPoly(nextFrame.GetCollisionPoly());wi.SetCollisionEnabled(!!o["ce"])}GetPropertyValueByIndex(index){const wi=this.GetWorldInfo();switch(index){case ENABLE_COLLISIONS:return wi.IsCollisionEnabled();case INITIAL_FRAME:return C3.clamp(this._currentFrameIndex,
0,this._currentAnimation.GetFrameCount()-1)}}SetPropertyValueByIndex(index,value){const wi=this.GetWorldInfo();switch(index){case ENABLE_COLLISIONS:wi.SetCollisionEnabled(!!value);break;case INITIAL_FRAME:this.SetAnimationPlaying(false);const totalFrames=this._currentAnimation.GetFrameCount()-1;const nextIndex=value=C3.clamp(value,0,totalFrames);const prevFrame=this._currentAnimation.GetFrameAt(this._currentFrameIndex);const nextFrame=this._currentAnimation.GetFrameAt(nextIndex);this._OnFrameChanged(prevFrame,
nextFrame);this._currentFrameIndex=C3.clamp(nextIndex,0,totalFrames);break}}GetScriptInterfaceClass(){return self.ISpriteInstance}};const map=new WeakMap;const ANIM_FROM_MODES=new Map([["current-frame",0],["beginning",1]]);self.ISpriteInstance=class ISpriteInstance extends self.IWorldInstance{constructor(){super();map.set(this,self.IInstance._GetInitInst().GetSdkInstance())}getImagePointCount(){return map.get(this).GetImagePointCount()}getImagePointX(nameOrIndex){if(typeof nameOrIndex!=="string"&&
typeof nameOrIndex!=="number")throw new TypeError("expected string or number");return map.get(this).GetImagePoint(nameOrIndex)[0]}getImagePointY(nameOrIndex){if(typeof nameOrIndex!=="string"&&typeof nameOrIndex!=="number")throw new TypeError("expected string or number");return map.get(this).GetImagePoint(nameOrIndex)[1]}getImagePoint(nameOrIndex){if(typeof nameOrIndex!=="string"&&typeof nameOrIndex!=="number")throw new TypeError("expected string or number");return map.get(this).GetImagePoint(nameOrIndex)}getPolyPointCount(){return map.get(this).GetCollisionPolyPointCount()}getPolyPointX(index){return map.get(this).GetCollisionPolyPoint(index)[0]}getPolyPointY(index){return map.get(this).GetCollisionPolyPoint(index)[1]}getPolyPoint(index){return map.get(this).GetCollisionPolyPoint(index)}stopAnimation(){map.get(this).SetAnimationPlaying(false)}startAnimation(from=
"current-frame"){const f=ANIM_FROM_MODES.get(from);if(typeof f==="undefined")throw new Error("invalid mode");map.get(this)._StartAnim(f)}setAnimation(name,from="beginning"){const f=ANIM_FROM_MODES.get(from);if(typeof f==="undefined")throw new Error("invalid mode");map.get(this)._SetAnim(name,f)}get animationName(){return map.get(this)._GetCurrentAnimationName()}set animationFrame(frameIndex){map.get(this)._SetAnimFrame(frameIndex)}get animationFrame(){return map.get(this)._GetAnimFrame()}set animationSpeed(s){map.get(this)._SetAnimSpeed(s)}get animationSpeed(){return map.get(this)._GetAnimSpeed()}set animationRepeatToFrame(f){map.get(this)._SetAnimRepeatToFrame(f)}get animationRepeatToFrame(){return map.get(this)._GetAnimRepeatToFrame()}get imageWidth(){return map.get(this).GetCurrentImageInfo().GetWidth()}get imageHeight(){return map.get(this).GetCurrentImageInfo().GetHeight()}}};


'use strict';{const C3=self.C3;const tempRect=C3.New(C3.Rect);const tempCandidates1=[];const tempCandidates2=[];let needsCollisionFinish=false;let rPickType=null;let rPickFromElseInstances=false;const rToPick=new Set;function CollMemory_Add(collMemory,a,b,tickCount){const a_uid=a.GetUID();const b_uid=b.GetUID();if(a_uid<b_uid)collMemory.Set(a,b,tickCount);else collMemory.Set(b,a,tickCount)}function CollMemory_Remove(collMemory,a,b){const a_uid=a.GetUID();const b_uid=b.GetUID();if(a_uid<b_uid)collMemory.Delete(a,
b);else collMemory.Delete(b,a)}function CollMemory_RemoveInstance(collMemory,inst){collMemory.DeleteEither(inst)}function CollMemory_Get(collMemory,a,b){const a_uid=a.GetUID();const b_uid=b.GetUID();if(a_uid<b_uid)return collMemory.Get(a,b);else return collMemory.Get(b,a)}function DoOverlapCondition(sdkInst,rtype,offX,offY){if(!rtype)return false;const inst=sdkInst.GetInstance();const hasOffset=offX!==0||offY!==0;const wi=inst.GetWorldInfo();const runtime=inst.GetRuntime();const collisionEngine=runtime.GetCollisionEngine();
const cnd=runtime.GetCurrentCondition();const isOrBlock=cnd.GetEventBlock().IsOrBlock();const ltype=cnd.GetObjectClass();const isInverted=cnd.IsInverted();const rsol=rtype.GetCurrentSol();const isDifferentTypes=ltype!==rtype;rPickType=rtype;needsCollisionFinish=isDifferentTypes&&!isInverted;rPickFromElseInstances=false;let rinstances;let oldX=0;let oldY=0;let ret=false;if(rsol.IsSelectAll()){tempRect.copy(wi.GetBoundingBox());tempRect.offset(offX,offY);collisionEngine.GetCollisionCandidates(wi.GetLayer(),
rtype,tempRect,tempCandidates2);rinstances=tempCandidates2}else if(isOrBlock)if(runtime.IsCurrentConditionFirst()&&!rsol._GetOwnElseInstances().length&&rsol._GetOwnInstances().length)rinstances=rsol._GetOwnInstances();else{rinstances=rsol._GetOwnElseInstances();rPickFromElseInstances=true}else rinstances=rsol._GetOwnInstances();if(hasOffset){oldX=wi.GetX();oldY=wi.GetY();wi.OffsetXY(offX,offY);wi.SetBboxChanged()}for(const rinst of rinstances)if(collisionEngine.TestOverlap(inst,rinst)){ret=true;if(isInverted)break;
if(isDifferentTypes)rToPick.add(rinst)}if(hasOffset){wi.SetXY(oldX,oldY);wi.SetBboxChanged()}C3.clearArray(tempCandidates2);return ret}function FinishCollisionConditionPicking(type){const isOrBlock=type.GetRuntime().GetCurrentEvent().IsOrBlock();const sol=rPickType.GetCurrentSol();const solInstances=sol._GetOwnInstances();const solElseInstances=sol._GetOwnElseInstances();if(sol.IsSelectAll()){sol.SetSetPicked(rToPick);if(isOrBlock){C3.clearArray(solElseInstances);sol.AddElseInstances(rToPick,rPickType.GetInstances())}}else if(isOrBlock)if(rPickFromElseInstances)sol.TransferElseInstancesToOwn(rToPick);
else{sol.AddElseInstances(rToPick,solInstances);sol.SetSetPicked(rToPick)}else sol.SetSetPicked(rToPick);rPickType.ApplySolToContainer()}C3.Plugins.Sprite._FinishCondition=function(type,doPick){if(!needsCollisionFinish)return;if(doPick)FinishCollisionConditionPicking(type);rToPick.clear();rPickType=null;needsCollisionFinish=false};C3.Plugins.Sprite.Cnds={OnCollision(rtype){if(this._runtime.IsDebugging())return C3.Plugins.Sprite.Cnds.DebugOnCollision.call(this,rtype);if(!rtype)return false;const runtime=
this._runtime;const collisionEngine=runtime.GetCollisionEngine();const eventSheetManager=runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const cnd=eventSheetManager.GetCurrentCondition();const ltype=cnd.GetObjectClass();const savedData=cnd.GetSavedDataMap();const unsavedData=cnd.GetUnsavedDataMap();const oldFrame=eventStack.GetCurrentStackFrame();const tickCount=runtime.GetTickCount();const lastTickCount=tickCount-1;const currentEvent=oldFrame.GetCurrentEvent();const newFrame=
eventStack.Push(currentEvent);let collMemory=savedData.get("collmemory");if(!collMemory){collMemory=C3.New(C3.PairMap);savedData.set("collmemory",collMemory)}if(!unsavedData.get("spriteCreatedDestroyCallback")){unsavedData.set("spriteCreatedDestroyCallback",true);runtime.Dispatcher().addEventListener("instancedestroy",e=>CollMemory_RemoveInstance(collMemory,e.instance))}const lsol=ltype.GetCurrentSol();const rsol=rtype.GetCurrentSol();const linstances=lsol.GetInstances();let rinstances=null;for(let l=
0;l<linstances.length;++l){const linst=linstances[l];if(rsol.IsSelectAll()){collisionEngine.GetCollisionCandidates(linst.GetWorldInfo().GetLayer(),rtype,linst.GetWorldInfo().GetBoundingBox(),tempCandidates1);rinstances=tempCandidates1;collisionEngine.AddRegisteredCollisionCandidates(linst,rtype,rinstances)}else rinstances=rsol.GetInstances();for(let r=0;r<rinstances.length;++r){const rinst=rinstances[r];if(collisionEngine.TestOverlap(linst,rinst)||collisionEngine.CheckRegisteredCollision(linst,rinst)){const entry=
CollMemory_Get(collMemory,linst,rinst);let entryExists=false;let lastCollTickCount=-2;if(typeof entry==="number"){entryExists=true;lastCollTickCount=entry}const shouldRun=!entryExists||lastCollTickCount<lastTickCount;CollMemory_Add(collMemory,linst,rinst,tickCount);if(shouldRun){const solModifiers=currentEvent.GetSolModifiers();eventSheetManager.PushCopySol(solModifiers);const curlsol=ltype.GetCurrentSol();const currsol=rtype.GetCurrentSol();curlsol._SetSelectAll(false);currsol._SetSelectAll(false);
if(ltype===rtype){const solInstances=curlsol._GetOwnInstances();C3.clearArray(solInstances);solInstances.push(linst);solInstances.push(rinst);ltype.ApplySolToContainer()}else{const lsolInstances=curlsol._GetOwnInstances();const rsolInstances=currsol._GetOwnInstances();C3.clearArray(lsolInstances);C3.clearArray(rsolInstances);lsolInstances.push(linst);rsolInstances.push(rinst);ltype.ApplySolToContainer();rtype.ApplySolToContainer()}currentEvent.Retrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}}else CollMemory_Remove(collMemory,
linst,rinst)}C3.clearArray(tempCandidates1)}eventStack.Pop();return false},*DebugOnCollision(rtype){if(!rtype)return false;const runtime=this._runtime;const collisionEngine=runtime.GetCollisionEngine();const eventSheetManager=runtime.GetEventSheetManager();const eventStack=eventSheetManager.GetEventStack();const oldFrame=eventStack.GetCurrentStackFrame();const tickCount=runtime.GetTickCount();const lastTickCount=tickCount-1;const currentEvent=oldFrame.GetCurrentEvent();const newFrame=eventStack.Push(currentEvent);
const cnd=eventSheetManager.GetCurrentCondition();const ltype=cnd.GetObjectClass();const savedData=cnd.GetSavedDataMap();const unsavedData=cnd.GetUnsavedDataMap();let collMemory=savedData.get("collmemory");if(!collMemory){collMemory=C3.New(C3.PairMap);savedData.set("collmemory",collMemory)}if(!unsavedData.get("spriteCreatedDestroyCallback")){unsavedData.set("spriteCreatedDestroyCallback",true);runtime.Dispatcher().addEventListener("instancedestroy",e=>CollMemory_RemoveInstance(collMemory,e.instance))}const lsol=
ltype.GetCurrentSol();const rsol=rtype.GetCurrentSol();const linstances=lsol.GetInstances();let rinstances=null;for(let l=0;l<linstances.length;++l){const linst=linstances[l];if(rsol.IsSelectAll()){collisionEngine.GetCollisionCandidates(linst.GetWorldInfo().GetLayer(),rtype,linst.GetWorldInfo().GetBoundingBox(),tempCandidates1);rinstances=tempCandidates1;collisionEngine.AddRegisteredCollisionCandidates(linst,rtype,rinstances)}else rinstances=rsol.GetInstances();for(let r=0;r<rinstances.length;++r){const rinst=
rinstances[r];if(collisionEngine.TestOverlap(linst,rinst)||collisionEngine.CheckRegisteredCollision(linst,rinst)){const entry=CollMemory_Get(collMemory,linst,rinst);let entryExists=false;let lastCollTickCount=-2;if(typeof entry==="number"){entryExists=true;lastCollTickCount=entry}const shouldRun=!entryExists||lastCollTickCount<lastTickCount;CollMemory_Add(collMemory,linst,rinst,tickCount);if(shouldRun){const solModifiers=currentEvent.GetSolModifiers();eventSheetManager.PushCopySol(solModifiers);const curlsol=
ltype.GetCurrentSol();const currsol=rtype.GetCurrentSol();curlsol._SetSelectAll(false);currsol._SetSelectAll(false);if(ltype===rtype){const solInstances=curlsol._GetOwnInstances();C3.clearArray(solInstances);solInstances.push(linst);solInstances.push(rinst);ltype.ApplySolToContainer()}else{const lsolInstances=curlsol._GetOwnInstances();const rsolInstances=currsol._GetOwnInstances();C3.clearArray(lsolInstances);C3.clearArray(rsolInstances);lsolInstances.push(linst);rsolInstances.push(rinst);ltype.ApplySolToContainer();
rtype.ApplySolToContainer()}yield*currentEvent.DebugRetrigger(oldFrame,newFrame);eventSheetManager.PopSol(solModifiers)}}else CollMemory_Remove(collMemory,linst,rinst)}C3.clearArray(tempCandidates1)}eventStack.Pop();return false},IsOverlapping(rtype){return DoOverlapCondition(this,rtype,0,0)},IsOverlappingOffset(rtype,offX,offY){return DoOverlapCondition(this,rtype,offX,offY)},IsAnimPlaying(animName){return C3.equalsNoCase(this._GetCurrentAnimationName(),animName)},CompareFrame(cmp,frameNum){return C3.compare(this._currentFrameIndex,
cmp,frameNum)},CompareAnimSpeed(cmp,x){return C3.compare(this._GetAnimSpeed(),cmp,x)},OnAnimFinished(animName){return C3.equalsNoCase(this._animTriggerName,animName)},OnAnyAnimFinished(){return true},OnFrameChanged(){return true},IsMirrored(){return this.GetWorldInfo().GetWidth()<0},IsFlipped(){return this.GetWorldInfo().GetHeight()<0},OnURLLoaded(){return true},OnURLFailed(){return true},IsCollisionEnabled(){return this.GetWorldInfo().IsCollisionEnabled()}}};


'use strict';{const C3=self.C3;C3.Plugins.Sprite.Acts={Spawn(objectClass,layer,imgPt,createHierarchy){if(!objectClass||!layer)return;const [imgPtX,imgPtY]=this.GetImagePoint(imgPt);const inst=this._runtime.CreateInstance(objectClass,layer,imgPtX,imgPtY,createHierarchy);if(!inst)return;if(objectClass.GetPlugin().IsRotatable()){const instWi=inst.GetWorldInfo();instWi.SetAngle(this.GetWorldInfo().GetAngle());instWi.SetBboxChanged()}const eventSheetManager=this._runtime.GetEventSheetManager();eventSheetManager.BlockFlushingInstances(true);
inst._TriggerOnCreatedOnSelfAndRelated();eventSheetManager.BlockFlushingInstances(false);const act=this._runtime.GetCurrentAction();const actData=act.GetSavedDataMap();let resetSol=false;if(!actData.has("Spawn_LastExec")||actData.get("Spawn_LastExec")<this._runtime.GetExecCount()){resetSol=true;actData.set("Spawn_LastExec",this._runtime.GetExecCount())}if(objectClass!==this.GetObjectClass()){const sol=objectClass.GetCurrentSol();sol._SetSelectAll(false);const solInstances=sol._GetOwnInstances();if(resetSol){C3.clearArray(solInstances);
solInstances.push(inst)}else solInstances.push(inst);if(inst.IsInContainer())for(const s of inst.siblings()){const sol2=s.GetObjectClass().GetCurrentSol();if(resetSol)sol2.SetSinglePicked(s);else{sol2._SetSelectAll(false);sol2._PushInstance(s)}}}},StopAnim(){this.SetAnimationPlaying(false)},StartAnim(from){this._StartAnim(from)},SetAnim(animName,from){this._SetAnim(animName,from)},SetAnimFrame(frameNum){this._SetAnimFrame(frameNum)},SetAnimSpeed(s){this._SetAnimSpeed(s)},SetAnimRepeatToFrame(f){this._SetAnimRepeatToFrame(f)},
SetMirrored(m){const wi=this.GetWorldInfo();const oldW=wi.GetWidth();const newW=Math.abs(oldW)*(m===0?-1:1);if(oldW===newW)return;wi.SetWidth(newW);wi.SetBboxChanged()},SetFlipped(f){const wi=this.GetWorldInfo();const oldH=wi.GetHeight();const newH=Math.abs(oldH)*(f===0?-1:1);if(oldH===newH)return;wi.SetHeight(newH);wi.SetBboxChanged()},SetScale(s){const frame=this._currentAnimationFrame;const imageInfo=frame.GetImageInfo();const wi=this.GetWorldInfo();const mirrorFactor=wi.GetWidth()<0?-1:1;const flipFactor=
wi.GetHeight()<0?-1:1;const newWidth=imageInfo.GetWidth()*s*mirrorFactor;const newHeight=imageInfo.GetHeight()*s*flipFactor;if(wi.GetWidth()!==newWidth||wi.GetHeight()!==newHeight){wi.SetSize(newWidth,newHeight);wi.SetBboxChanged()}},async LoadURL(url,resize,crossOrigin){const curAnimFrame=this._currentAnimationFrame;const curImageInfo=curAnimFrame.GetImageInfo();const wi=this.GetWorldInfo();const runtime=this._runtime;if(curImageInfo.GetURL()===url){if(resize===0){wi.SetSize(curImageInfo.GetWidth(),
curImageInfo.GetHeight());wi.SetBboxChanged()}this.Trigger(C3.Plugins.Sprite.Cnds.OnURLLoaded);return}const imageInfo=C3.New(C3.ImageInfo);await imageInfo.LoadDynamicAsset(runtime,url);if(!imageInfo.IsLoaded()){this.Trigger(C3.Plugins.Sprite.Cnds.OnURLFailed);return}await imageInfo.LoadStaticTexture(runtime.GetWebGLRenderer(),{sampling:this._runtime.GetSampling()});curImageInfo.ReplaceWith(imageInfo);this._sdkType._UpdateAllCurrentTexture();if(!this.WasReleased()&&resize===0){wi.SetSize(curImageInfo.GetWidth(),
curImageInfo.GetHeight());wi.SetBboxChanged()}runtime.UpdateRender();if(!this.WasReleased())await this.TriggerAsync(C3.Plugins.Sprite.Cnds.OnURLLoaded)},SetCollisions(e){this.GetWorldInfo().SetCollisionEnabled(e)},SetSolidCollisionFilter(mode,tags){this.GetWorldInfo().SetSolidCollisionFilter(mode===0,tags)},SetEffect(effect){this.GetWorldInfo().SetBlendMode(effect);this._runtime.UpdateRender()}}};


'use strict';{const C3=self.C3;C3.Plugins.Sprite.Exps={AnimationFrame(){return this._currentFrameIndex},AnimationFrameCount(){return this._currentAnimation.GetFrameCount()},AnimationName(){return this._currentAnimation.GetName()},AnimationSpeed(){return this._GetAnimSpeed()},OriginalAnimationSpeed(){return this._currentAnimation.GetSpeed()},ImagePointX(imgpt){return this.GetImagePoint(imgpt)[0]},ImagePointY(imgpt){return this.GetImagePoint(imgpt)[1]},ImagePointCount(){return this.GetImagePointCount()},
ImageWidth(){return this.GetCurrentImageInfo().GetWidth()},ImageHeight(){return this.GetCurrentImageInfo().GetHeight()},PolyPointXAt(i){return this.GetCollisionPolyPoint(i)[0]},PolyPointYAt(i){return this.GetCollisionPolyPoint(i)[1]},PolyPointCount(){return this.GetCollisionPolyPointCount()}}};


'use strict';{const C3=self.C3;C3.Plugins.TiledBg=class TiledBgPlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;function WrapModeToStr(wrapMode){switch(wrapMode){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"}C3.Plugins.TiledBg.Type=class TiledBgType extends C3.SDKTypeBase{constructor(objectClass,exportData){super(objectClass);this._wrapX="repeat";this._wrapY="repeat";if(exportData){this._wrapX=WrapModeToStr(exportData[0]);this._wrapY=WrapModeToStr(exportData[1])}}Release(){super.Release()}OnCreate(){this.GetImageInfo().LoadAsset(this._runtime)}LoadTextures(renderer){return this.GetImageInfo().LoadStaticTexture(renderer,
{sampling:this._runtime.GetSampling(),wrapX:this._wrapX,wrapY:this._wrapY})}ReleaseTextures(){this.GetImageInfo().ReleaseTexture()}}};


'use strict';{const C3=self.C3;const INITIALLY_VISIBLE=0;const ORIGIN=1;const IMAGE_OFFSET_X=4;const IMAGE_OFFSET_Y=5;const IMAGE_SCALE_X=6;const IMAGE_SCALE_Y=7;const IMAGE_ANGLE=8;const tempRect=C3.New(C3.Rect);const tempQuad=C3.New(C3.Quad);const rcTex=C3.New(C3.Rect);const qTex=C3.New(C3.Quad);C3.Plugins.TiledBg.Instance=class TiledBgInstance extends C3.SDKWorldInstanceBase{constructor(inst,properties){super(inst);this._imageOffsetX=0;this._imageOffsetY=0;this._imageScaleX=1;this._imageScaleY=
1;this._imageAngle=0;this._ownImageInfo=null;if(properties){this.GetWorldInfo().SetVisible(!!properties[INITIALLY_VISIBLE]);this._imageOffsetX=properties[IMAGE_OFFSET_X];this._imageOffsetY=properties[IMAGE_OFFSET_Y];this._imageScaleX=properties[IMAGE_SCALE_X];this._imageScaleY=properties[IMAGE_SCALE_Y];this._imageAngle=C3.toRadians(properties[IMAGE_ANGLE])}}Release(){this._ReleaseOwnImage();super.Release()}_ReleaseOwnImage(){if(this._ownImageInfo){this._ownImageInfo.Release();this._ownImageInfo=null}}Draw(renderer){const imageInfo=
this.GetCurrentImageInfo();const texture=imageInfo.GetTexture();if(texture===null)return;renderer.SetTexture(texture);const imageWidth=imageInfo.GetWidth();const imageHeight=imageInfo.GetHeight();const imageOffsetX=this._imageOffsetX/imageWidth;const imageOffsetY=this._imageOffsetY/imageHeight;const wi=this.GetWorldInfo();rcTex.set(0,0,wi.GetWidth()/(imageWidth*this._imageScaleX),wi.GetHeight()/(imageHeight*this._imageScaleY));rcTex.offset(-imageOffsetX,-imageOffsetY);if(wi.HasMesh())this._DrawMesh(wi,
renderer);else this._DrawStandard(wi,renderer)}_DrawStandard(wi,renderer){let quad=wi.GetBoundingQuad();if(this._runtime.IsPixelRoundingEnabled())quad=wi.PixelRoundQuad(quad);if(this._imageAngle===0)renderer.Quad3(quad,rcTex);else{qTex.setFromRotatedRect(rcTex,-this._imageAngle);renderer.Quad4(quad,qTex)}}_DrawMesh(wi,renderer){const transformedMesh=wi.GetTransformedMesh();if(wi.IsMeshChanged()){wi.CalculateBbox(tempRect,tempQuad,false);let quad=tempQuad;if(this._runtime.IsPixelRoundingEnabled())quad=
wi.PixelRoundQuad(quad);let texCoords=rcTex;if(this._imageAngle!==0){qTex.setFromRotatedRect(rcTex,-this._imageAngle);texCoords=qTex}transformedMesh.CalculateTransformedMesh(wi.GetSourceMesh(),quad,texCoords);wi.SetMeshChanged(false)}transformedMesh.Draw(renderer)}GetCurrentImageInfo(){return this._ownImageInfo||this._objectClass.GetImageInfo()}_SetMeshChanged(){this.GetWorldInfo().SetMeshChanged(true)}_SetImageOffsetX(x){if(this._imageOffsetX===x)return;this._imageOffsetX=x;this._runtime.UpdateRender();
this._SetMeshChanged()}_GetImageOffsetX(){return this._imageOffsetX}_SetImageOffsetY(y){if(this._imageOffsetY===y)return;this._imageOffsetY=y;this._runtime.UpdateRender();this._SetMeshChanged()}_GetImageOffsetY(){return this._imageOffsetY}_SetImageScaleX(x){if(this._imageScaleX===x)return;this._imageScaleX=x;this._runtime.UpdateRender();this._SetMeshChanged()}_GetImageScaleX(){return this._imageScaleX}_SetImageScaleY(y){if(this._imageScaleY===y)return;this._imageScaleY=y;this._runtime.UpdateRender();
this._SetMeshChanged()}_GetImageScaleY(){return this._imageScaleY}_SetImageAngle(a){if(this._imageAngle===a)return;this._imageAngle=a;this._runtime.UpdateRender();this._SetMeshChanged()}_GetImageAngle(){return this._imageAngle}GetPropertyValueByIndex(index){switch(index){case IMAGE_OFFSET_X:return this._GetImageOffsetX();case IMAGE_OFFSET_Y:return this._GetImageOffsetY();case IMAGE_SCALE_X:return this._GetImageScaleX();case IMAGE_SCALE_Y:return this._GetImageScaleY();case IMAGE_ANGLE:return this._GetImageAngle()}}SetPropertyValueByIndex(index,
value){switch(index){case IMAGE_OFFSET_X:this._SetImageOffsetX(value);break;case IMAGE_OFFSET_Y:this._SetImageOffsetY(value);break;case IMAGE_SCALE_X:this._SetImageScaleX(value);break;case IMAGE_SCALE_Y:this._SetImageScaleY(value);break;case IMAGE_ANGLE:this._SetImageAngle(value);break}}GetScriptInterfaceClass(){return self.ITiledBackgroundInstance}};const map=new WeakMap;self.ITiledBackgroundInstance=class ITiledBackgroundInstance extends self.IWorldInstance{constructor(){super();map.set(this,self.IInstance._GetInitInst().GetSdkInstance())}set imageOffsetX(x){map.get(this)._SetImageOffsetX(x)}get imageOffsetX(){return map.get(this)._GetImageOffsetX()}set imageOffsetY(y){map.get(this)._SetImageOffsetY(y)}get imageOffsetY(){return map.get(this)._GetImageOffsetY()}set imageScaleX(x){map.get(this)._SetImageScaleX(x)}get imageScaleX(){return map.get(this)._GetImageScaleX()}set imageScaleY(y){map.get(this)._SetImageScaleY(y)}get imageScaleY(){return map.get(this)._GetImageScaleY()}set imageAngle(a){map.get(this)._SetImageAngle(a)}get imageAngle(){return map.get(this)._GetImageAngle()}set imageAngleDegrees(a){map.get(this)._SetImageAngle(C3.toRadians(a))}get imageAngleDegrees(){return C3.toDegrees(map.get(this)._GetImageAngle())}}};


'use strict';{const C3=self.C3;C3.Plugins.TiledBg.Cnds={OnURLLoaded(){return true},OnURLFailed(){return true}}};


'use strict';{const C3=self.C3;C3.Plugins.TiledBg.Acts={SetImageOffsetX(x){this._SetImageOffsetX(x)},SetImageOffsetY(y){this._SetImageOffsetY(y)},SetImageScaleX(x){this._SetImageScaleX(x/100)},SetImageScaleY(y){this._SetImageScaleY(y/100)},SetImageAngle(a){this._SetImageAngle(C3.toRadians(a))},SetEffect(effect){this.GetWorldInfo().SetBlendMode(effect);this._runtime.UpdateRender()},async LoadURL(url,crossOrigin){if(this._ownImageInfo&&this._ownImageInfo.GetURL()===url)return;const runtime=this._runtime;
const imageInfo=C3.New(C3.ImageInfo);await imageInfo.LoadDynamicAsset(runtime,url);if(!imageInfo.IsLoaded()){this.Trigger(C3.Plugins.TiledBg.Cnds.OnURLFailed);return}if(this.WasReleased()){imageInfo.Release();return null}const texture=await imageInfo.LoadStaticTexture(runtime.GetWebGLRenderer(),{sampling:this._runtime.GetSampling(),wrapX:"repeat",wrapY:"repeat"});if(!texture)return;if(this.WasReleased()){imageInfo.Release();return}this._ReleaseOwnImage();this._ownImageInfo=imageInfo;runtime.UpdateRender();
await this.TriggerAsync(C3.Plugins.TiledBg.Cnds.OnURLLoaded)}}};


'use strict';{const C3=self.C3;C3.Plugins.TiledBg.Exps={ImageWidth(){return this.GetCurrentImageInfo().GetWidth()},ImageHeight(){return this.GetCurrentImageInfo().GetHeight()},ImageOffsetX(){return this._imageOffsetX},ImageOffsetY(){return this._imageOffsetY},ImageScaleX(){return this._imageScaleX*100},ImageScaleY(){return this._imageScaleY*100},ImageAngle(){return C3.toDegrees(this._imageAngle)}}};


'use strict';{const C3=self.C3;C3.Plugins.SVGPicture=class SVGPicturePlugin extends C3.SDKPluginBase{constructor(opts){super(opts);this._rasterManager=null}Release(){super.Release()}_GetRasterManager(){if(!this._rasterManager){this._rasterManager=C3.New(C3.SVGRasterManager);this._rasterManager.SetGetBaseSizeCallback(filename=>this._GetSvgBaseSize(filename));this._rasterManager.SetRasterAtSizeCallback((sf,r,sw,sh,iw,ih)=>this._RasterSvgAtSize(sf,r,sw,sh,iw,ih));this._rasterManager.SetReleaseResultCallback(texture=>
this._ReleaseRasterResult(texture));this._rasterManager.SetRedrawCallback(()=>this._Redraw());this._rasterManager.SetNpotSurfaceAllowed(this.GetRuntime().GetWebGLRenderer().SupportsNPOTTextures())}return this._rasterManager}async _GetSvgBaseSize(filename){const runtime=this.GetRuntime();const blob=await runtime.GetAssetManager().FetchBlob(filename);return await runtime.GetSvgImageSize(blob)}async _RasterSvgAtSize(filename,renderer,surfaceWidth,surfaceHeight,imageWidth,imageHeight){const runtime=this.GetRuntime();
const blob=await runtime.GetAssetManager().FetchBlob(filename);const textureOpts={mipMap:true,mipMapQuality:"high"};let imageBitmapOpts=null;if(C3.Supports.ImageBitmapOptions){imageBitmapOpts={"premultiplyAlpha":"premultiply"};textureOpts.premultiplyAlpha=false}const drawable=await runtime.RasterSvgImage(blob,imageWidth,imageHeight,surfaceWidth,surfaceHeight,imageBitmapOpts);let texture=null;if(C3.Supports.ImageBitmapOptions)texture=renderer.CreateStaticTexture(drawable,textureOpts);else texture=
await renderer.CreateStaticTextureAsync(drawable,textureOpts);return texture}_ReleaseRasterResult(texture){texture.GetRenderer().DeleteTexture(texture)}_Redraw(){this.GetRuntime().UpdateRender()}}};


'use strict';{const C3=self.C3;C3.Plugins.SVGPicture.Type=class SVGPictureType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}LoadTextures(renderer){}ReleaseTextures(){}PreloadTexturesWithInstances(renderer){const rasterImages=new Set;for(const inst of this.GetObjectClass().GetInstances()){const sdkInst=inst.GetSdkInstance();sdkInst._UpdateRasterImage();const rasterImage=sdkInst._GetRasterImage();if(rasterImage)rasterImages.add(rasterImage)}return Promise.all([...rasterImages].map(ri=>
this._PreloadRasterImage(renderer,ri)))}async _PreloadRasterImage(renderer,rasterImage){await rasterImage.WhenBaseSizeReady();const baseWidth=rasterImage.GetBaseWidth();const baseHeight=rasterImage.GetBaseHeight();const preloadSize=256;const preloadAspectRatio=1;const svgAspectRatio=baseWidth/baseHeight;let rasterImageWidth=0;let rasterImageHeight=0;if(preloadAspectRatio>svgAspectRatio){rasterImageWidth=preloadSize*svgAspectRatio;rasterImageHeight=preloadSize}else{rasterImageWidth=preloadSize;rasterImageHeight=
preloadSize/svgAspectRatio}await rasterImage.StartRasterForSize(renderer,rasterImageWidth,rasterImageHeight)}}};


'use strict';{const C3=self.C3;const SVG_FILENAME=0;const INITIALLY_VISIBLE=1;const ORIGIN=2;const tempRect=C3.New(C3.Rect);const tempQuad=C3.New(C3.Quad);C3.Plugins.SVGPicture.Instance=class SVGPictureInstance extends C3.SDKWorldInstanceBase{constructor(inst,properties){super(inst);this._svgFilename="";this._rasterImage=null;this._collisionPoly=C3.New(C3.CollisionPoly);this.GetWorldInfo().SetSourceCollisionPoly(this._collisionPoly);if(properties){this._svgFilename=properties[SVG_FILENAME];this.GetWorldInfo().SetVisible(!!properties[INITIALLY_VISIBLE])}this._UpdateRasterImage();
this.HandleWebGLContextLoss()}Release(){this._ReleaseRasterImage();super.Release()}_GetRasterManager(){return this.GetPlugin()._GetRasterManager()}_ReleaseRasterImage(){if(this._rasterImage){this._rasterImage.Release();this._rasterImage=null}}_UpdateRasterImage(){if(!this._svgFilename){this._ReleaseRasterImage();this._UpdateCollisionPolygon();return}if(this._rasterImage&&this._rasterImage.GetDataSource()===this._svgFilename)return;this._ReleaseRasterImage();this._rasterImage=this._GetRasterManager().AddImage(this._svgFilename);
this._rasterImage.WhenBaseSizeReady().then(()=>this._UpdateCollisionPolygon())}_UpdateCollisionPolygon(){const wi=this.GetWorldInfo();const objectWidth=Math.abs(wi.GetWidth());const objectHeight=Math.abs(wi.GetHeight());let objectContentWidth=objectWidth;let objectContentHeight=objectHeight;if(this._rasterImage){const baseWidth=this._rasterImage.GetBaseWidth();const baseHeight=this._rasterImage.GetBaseHeight();if(baseWidth!==0&&baseHeight!==0){const svgAspectRatio=baseWidth/baseHeight;const objectAspectRatio=
objectWidth/objectHeight;if(objectAspectRatio>svgAspectRatio){objectContentWidth=objectHeight*svgAspectRatio;objectContentHeight=objectHeight}else{objectContentWidth=objectWidth;objectContentHeight=objectWidth/svgAspectRatio}}}const w=objectContentWidth/objectWidth;const h=objectContentHeight/objectHeight;const ox=wi.GetOriginX();const oy=wi.GetOriginY();tempRect.setWH(ox-ox*w,oy-oy*h,w,h);this._collisionPoly.setFromRect(tempRect,ox,oy);wi.SetSourceCollisionPoly(this._collisionPoly)}_GetRasterImage(){return this._rasterImage}OnWebGLContextLost(){this._ReleaseRasterImage()}OnWebGLContextRestored(){this._UpdateRasterImage()}Draw(renderer){const wi=
this.GetWorldInfo();const layer=wi.GetLayer();if(!this._rasterImage)return;const baseWidth=this._rasterImage.GetBaseWidth();const baseHeight=this._rasterImage.GetBaseHeight();if(baseWidth===0||baseHeight===0)return;const objectWidth=Math.abs(wi.GetWidth());const objectHeight=Math.abs(wi.GetHeight());const z=wi.GetZElevation();const deviceWidth=layer._GetLayerToDrawSurfaceScale(objectWidth,z);const deviceHeight=layer._GetLayerToDrawSurfaceScale(objectHeight,z);const svgAspectRatio=baseWidth/baseHeight;
const objectAspectRatio=objectWidth/objectHeight;let objectContentWidth=0;let objectContentHeight=0;let rasterImageWidth=0;let rasterImageHeight=0;if(objectAspectRatio>svgAspectRatio){rasterImageWidth=deviceHeight*svgAspectRatio;rasterImageHeight=deviceHeight;objectContentWidth=objectHeight*svgAspectRatio;objectContentHeight=objectHeight}else{rasterImageWidth=deviceWidth;rasterImageHeight=deviceWidth/svgAspectRatio;objectContentWidth=objectWidth;objectContentHeight=objectWidth/svgAspectRatio}this._rasterImage.StartRasterForSize(renderer,
rasterImageWidth,rasterImageHeight);const texture=this._rasterImage.GetRasterizedResult();if(!texture)return;renderer.SetTexture(texture);const x=wi.GetX();const y=wi.GetY();const w=objectContentWidth*Math.sign(wi.GetWidth());const h=objectContentHeight*Math.sign(wi.GetHeight());tempRect.setWH(x-wi.GetOriginX()*w,y-wi.GetOriginY()*h,w,h);const a=wi.GetAngle();if(a===0)tempQuad.setFromRect(tempRect);else{tempRect.offset(-x,-y);tempQuad.setFromRotatedRectPrecalc(tempRect,wi.GetSinAngle(),wi.GetCosAngle());
tempQuad.offset(x,y)}tempRect.set(0,0,this._rasterImage.GetRasterWidth()/texture.GetWidth(),this._rasterImage.GetRasterHeight()/texture.GetHeight());renderer.Quad3(tempQuad,tempRect)}GetPropertyValueByIndex(index){}SetPropertyValueByIndex(index,value){}_SetImage(url){this._svgFilename=url;this._UpdateRasterImage()}GetCurrentSurfaceSize(){if(this._rasterImage){const texture=this._rasterImage.GetRasterizedResult();if(texture)return[texture.GetWidth(),texture.GetHeight()]}return[100,100]}GetCurrentTexRect(){if(this._rasterImage){const texture=
this._rasterImage.GetRasterizedResult();if(texture){tempRect.set(0,0,this._rasterImage.GetRasterWidth()/texture.GetWidth(),this._rasterImage.GetRasterHeight()/texture.GetHeight());return tempRect}}return null}}};


'use strict';{const C3=self.C3;C3.Plugins.SVGPicture.Cnds={}};


'use strict';{const C3=self.C3;C3.Plugins.SVGPicture.Acts={SetImage(file){this._SetImage(file)},SetImageByName(file){this._SetImage(file)},SetEffect(effect){this.GetWorldInfo().SetBlendMode(effect);this._runtime.UpdateRender()}}};


'use strict';{const C3=self.C3;C3.Plugins.SVGPicture.Exps={}};


'use strict';{const C3=self.C3;const DOM_COMPONENT_ID="sliderbar";C3.Plugins.sliderbar=class SliderBarPlugin extends C3.SDKDOMPluginBase{constructor(opts){super(opts,DOM_COMPONENT_ID);this.AddElementMessageHandler("click",(sdkInst,e)=>sdkInst._OnClick(e));this.AddElementMessageHandler("change",(sdkInst,e)=>sdkInst._OnChange(e));this.AddElementMessageHandler("input",(sdkInst,e)=>sdkInst._OnInput(e))}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.sliderbar.Type=class SliderBarType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;const VALUE=0;const MINIMUM=1;const MAXIMUM=2;const STEP=3;const TOOLTIP=4;const INITIALLY_VISIBLE=5;const ENABLE=6;const ID=7;const DOM_COMPONENT_ID="sliderbar";C3.Plugins.sliderbar.Instance=class SliderBarInstance extends C3.SDKDOMInstanceBase{constructor(inst,properties){super(inst,DOM_COMPONENT_ID);this._value=0;this._min=0;this._max=100;this._step=1;this._title="";this._isEnabled=true;this._id="";if(properties){this._value=properties[VALUE];this._min=properties[MINIMUM];
this._max=properties[MAXIMUM];this._step=properties[STEP];this._title=properties[TOOLTIP];this.GetWorldInfo().SetVisible(properties[INITIALLY_VISIBLE]);this._isEnabled=properties[ENABLE];this._id=properties[ID]}this.CreateElement({"id":this._id})}Release(){super.Release()}GetElementState(){return{"value":this._value,"min":this._min,"max":this._max,"step":this._step,"title":this._title,"isEnabled":this._isEnabled}}async _OnClick(e){this.GetScriptInterface().dispatchEvent(C3.New(C3.Event,"click",true));
await this.TriggerAsync(C3.Plugins.sliderbar.Cnds.OnClicked)}async _OnChange(e){this._value=e["value"];this.GetScriptInterface().dispatchEvent(C3.New(C3.Event,"change",true));await this.TriggerAsync(C3.Plugins.sliderbar.Cnds.OnChanged)}_OnInput(e){this._value=e["value"]}Draw(renderer){}_SetValue(x){if(this._value===x)return;this._value=x;this.UpdateElementState()}_GetValue(){return this._value}_SetMaximum(x){if(this._max===x)return;this._max=x;this.UpdateElementState()}_GetMaximum(){return this._max}_SetMinimum(x){if(this._min===
x)return;this._min=x;this.UpdateElementState()}_GetMinimum(){return this._min}_SetTooltip(title){if(this._title===title)return;this._title=title;this.UpdateElementState()}_GetTooltip(){return this._title}_SetStep(x){if(this._step===x)return;this._step=x;this.UpdateElementState()}_GetStep(){return this._step}_SetEnabled(e){e=!!e;if(this._isEnabled===e)return;this._isEnabled=e;this.UpdateElementState()}_IsEnabled(){return this._isEnabled}SaveToJson(){return{"v":this._value,"min":this._min,"max":this._max,
"s":this._step,"t":this._title,"e":this._isEnabled,"id":this._id}}LoadFromJson(o){this._value=o["v"];this._min=o["min"];this._max=o["max"];this._step=o["s"];this._title=o["t"];this._isEnabled=o["e"];this._id=o["id"];this.UpdateElementState()}GetPropertyValueByIndex(index){switch(index){case VALUE:return this._GetValue();case MINIMUM:return this._GetMinimum();case MAXIMUM:return this._GetMaximum();case STEP:return this._GetStep();case TOOLTIP:return this._GetTooltip();case ENABLE:return this._IsEnbled();
case ID:return this._id}}SetPropertyValueByIndex(index,value){switch(index){case VALUE:this._SetValue(value);break;case MINIMUM:this._SetMinimum(value);break;case MAXIMUM:this._SetMaximum(value);break;case STEP:this._SetStep(value);break;case TOOLTIP:this._SetTooltip(value);break;case ENABLE:this._SetEnabled(value);break;case ID:if(this._id===value)return;this._id=value;this.UpdateElementState();break}}GetDebuggerProperties(){const Acts=C3.Plugins.sliderbar.Acts;const prefix="plugins.sliderbar";return[{title:prefix+
".name",properties:[{name:prefix+".properties.value.name",value:this._GetValue(),onedit:v=>this._SetValue(v)},{name:prefix+".properties.minimum.name",value:this._GetMinimum(),onedit:v=>this._SetMinimum(v)},{name:prefix+".properties.maximum.name",value:this._GetMaximum(),onedit:v=>this._SetMaximum(v)},{name:prefix+".properties.step.name",value:this._GetStep(),onedit:v=>this._SetStep(v)}]}]}GetScriptInterfaceClass(){return self.ISliderBarInstance}};const map=new WeakMap;self.ISliderBarInstance=class ITextInputInstance extends self.IDOMInstance{constructor(){super();
map.set(this,self.IInstance._GetInitInst().GetSdkInstance())}set value(v){map.get(this)._SetValue(v)}get value(){return map.get(this)._GetValue()}set maximum(v){map.get(this)._SetMaximum(v)}get maximum(){return map.get(this)._GetMaximum()}set minimum(v){map.get(this)._SetMinimum(v)}get minimum(){return map.get(this)._GetMinimum()}set step(v){map.get(this)._SetStep(v)}get step(){return map.get(this)._GetStep()}set tooltip(str){map.get(this)._SetTooltip(str)}get tooltip(){return map.get(this)._GetTooltip()}set isEnabled(e){map.get(this)._SetEnabled(e)}get isEnabled(){return map.get(this)._IsEnabled()}}};


'use strict';{const C3=self.C3;C3.Plugins.sliderbar.Cnds={OnClicked(){return true},OnChanged(){return true},CompareValue(cmp,x){return C3.compare(this._GetValue(),cmp,x)}}};


'use strict';{const C3=self.C3;C3.Plugins.sliderbar.Acts={SetTooltip(title){this._SetTooltip(title)},SetValue(x){this._SetValue(x)},SetMaximum(x){this._SetMaximum(x)},SetMinimum(x){this._SetMinimum(x)},SetStep(x){this._SetStep(x)}}};


'use strict';{const C3=self.C3;C3.Plugins.sliderbar.Exps={Value(){return this._GetValue()},Maximum(){return this._GetMaximum()},Minimum(){return this._GetMinimum()},Step(){return this._GetStep()}}};


'use strict';{const C3=self.C3;const DOM_COMPONENT_ID="file-chooser";C3.Plugins.filechooser=class FileChooserPlugin extends C3.SDKDOMPluginBase{constructor(opts){super(opts,DOM_COMPONENT_ID);this.AddElementMessageHandler("change",(sdkInst,e)=>sdkInst._OnChange(e))}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.filechooser.Type=class FileChooserType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;const ACCEPT=0;const SELECT=1;const INITIALLY_VISIBLE=2;const ID=3;const SINGLE=0;const MULTIPLE=1;const DOM_COMPONENT_ID="file-chooser";C3.Plugins.filechooser.Instance=class FileChooserInstance extends C3.SDKDOMInstanceBase{constructor(inst,properties){super(inst,DOM_COMPONENT_ID);this._accept="";this._isMultiSelect=false;this._id="";this._files=[];if(properties){this._accept=properties[ACCEPT];this._isMultiSelect=properties[SELECT]!==SINGLE;this.GetWorldInfo().SetVisible(properties[INITIALLY_VISIBLE]);
this._id=properties[ID]}this.CreateElement({"id":this._id})}Release(){super.Release()}GetElementState(){return{"accept":this._accept,"isMultiSelect":this._isMultiSelect}}_GetFileAt(index){index=Math.floor(index);if(index<0||index>=this._files.length)return null;return this._files[index]}async _OnChange(e){this._files=e["files"];await this.TriggerAsync(C3.Plugins.filechooser.Cnds.OnChanged)}Draw(renderer){}GetPropertyValueByIndex(index){switch(index){case ACCEPT:return this._accept;case SELECT:return this._isMultiSelect?
MULTIPLE:SINGLE;case ID:return this._id}}SetPropertyValueByIndex(index,value){switch(index,value){case ACCEPT:if(this._accept===value)return;this._accept=value;this.UpdateElementState();break;case SELECT:if(this._isMultiSelect===(value!==SINGLE))return;this._isMultiSelect=value!==SINGLE;this.UpdateElementState();break;case ID:if(this._id===value)return;this._id=value;this.UpdateElementState();break}}}};


'use strict';{const C3=self.C3;C3.Plugins.filechooser.Cnds={OnChanged(){return true}}};


'use strict';{const C3=self.C3;C3.Plugins.filechooser.Acts={ReleaseFile(f){URL.revokeObjectURL(f)},Click(){this._PostToDOMElementMaybeSync("click")}}};


'use strict';{const C3=self.C3;const urlCache=new WeakMap;C3.Plugins.filechooser.Exps={FileCount(){return this._files.length},FileNameAt(i){const file=this._GetFileAt(i);return file?file["name"]||"":""},FileSizeAt(i){const file=this._GetFileAt(i);return file?file["size"]||0:0},FileTypeAt(i){const file=this._GetFileAt(i);return file?file["type"]||"":""},FileURLAt(i){const file=this._GetFileAt(i);if(!file)return"";let url=urlCache.get(file);if(url)return url;url=URL.createObjectURL(file);urlCache.set(file,
url);return url}}};


'use strict';{const C3=self.C3;const DOM_COMPONENT_ID="list";C3.Plugins.List=class ListPlugin extends C3.SDKDOMPluginBase{constructor(opts){super(opts,DOM_COMPONENT_ID);this.AddElementMessageHandler("click",(sdkInst,e)=>sdkInst._OnClick(e));this.AddElementMessageHandler("dblclick",(sdkInst,e)=>sdkInst._OnDoubleClick(e));this.AddElementMessageHandler("change",(sdkInst,e)=>sdkInst._OnChange(e))}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.List.Type=class ListType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;const ITEMS=0;const TOOLTIP=1;const INITIALLY_VISIBLE=2;const ENABLE=3;const TYPE=4;const MULTI_SELECT=5;const AUTO_FONT_SIZE=6;const ID=7;const LIST_BOX=0;const DROPDOWN_LIST=1;const DOM_COMPONENT_ID="list";C3.Plugins.List.Instance=class ListInstance extends C3.SDKDOMInstanceBase{constructor(inst,properties){super(inst,DOM_COMPONENT_ID);this._items=[];this._stringItems="";this._title="";this._isEnabled=true;this._isDropdown=true;this._isMultiSelect=false;this._autoFontSize=
true;this._id="";this._selectedIndex=-1;this._selectedIndices=[];if(properties){const itemsStr=properties[ITEMS];this._items=itemsStr?itemsStr.split("\n"):[];this._stringItems=properties[ITEMS];this._title=properties[TOOLTIP];this.GetWorldInfo().SetVisible(!!properties[INITIALLY_VISIBLE]);this._isEnabled=!!properties[ENABLE];this._isDropdown=properties[TYPE]===DROPDOWN_LIST;this._isMultiSelect=!!properties[MULTI_SELECT];this._autoFontSize=!!properties[AUTO_FONT_SIZE];this._id=properties[ID];if(this._isDropdown)this._selectedIndex=
0}this.CreateElement({"id":this._id,"isDropdown":this._isDropdown,"isMultiSelect":this._isMultiSelect,"items":this._items})}Release(){C3.clearArray(this._items);this._items=null;C3.clearArray(this._selectedIndices);this._selectedIndices=null;super.Release()}GetElementState(){return{"title":this._title,"isEnabled":this._isEnabled,"isMultiSelect":this._isMultiSelect}}_UpdateSelectedIndex(){this.PostToDOMElement("set-selected-index",{"selectedIndex":this._selectedIndex})}_ReadSelectionState(e){this._selectedIndex=
e["selectedIndex"];this._selectedIndices=e["selectedIndices"]}async _OnClick(e){this._ReadSelectionState(e);await this.TriggerAsync(C3.Plugins.List.Cnds.OnClicked)}async _OnDoubleClick(e){this._ReadSelectionState(e);await this.TriggerAsync(C3.Plugins.List.Cnds.OnDoubleClicked)}async _OnChange(e){this._ReadSelectionState(e);await this.TriggerAsync(C3.Plugins.List.Cnds.OnSelectionChanged)}Draw(renderer){}SaveToJson(){return{"title":this._title,"isEnabled":this._isEnabled,"id":this._id,"items":C3.cloneArray(this._items),
"selectedIndex":this._selectedIndex,"selectedIndices":this._selectedIndices}}LoadFromJson(o){this._title=o["title"];this._isEnabled=o["isEnabled"];this._id=o["id"];this._items=C3.cloneArray(o["items"]);this._stringItems=this._items.join("/n");this._selectedIndex=o["selectedIndex"];this._selectedIndices=o["selectedIndices"];this.UpdateElementState();this.PostToDOMElement("load-state",{"items":this._items,"selectedIndex":this._selectedIndex,"selectedIndices":this._selectedIndices})}_SetEnabled(e){e=
!!e;if(this._isEnabled===e)return;this._isEnabled=e;this.UpdateElementState()}_IsEnabled(){return this._isEnabled}GetPropertyValueByIndex(index){switch(index){case ITEMS:return this._stringItems;case TOOLTIP:return this._title;case ENABLE:return this._isEnabled;case MULTI_SELECT:return this._isMultiSelect;case AUTO_FONT_SIZE:return this._autoFontSize;case ID:return this._id}}SetPropertyValueByIndex(index,value){switch(index){case ITEMS:if(this._stringItems===value)return;this._items=value.split("\n");
this._stringItems=value;this._selectedIndex=C3.clamp(this._selectedIndex,0,this._items.length-1);this.UpdateElementState();this.PostToDOMElement("load-state",{"items":this._items,"selectedIndex":this._selectedIndex,"selectedIndices":this._selectedIndices});break;case TOOLTIP:if(this._title===value)return;this._title=value;this.UpdateElementState();break;case ENABLE:if(this._isEnabled===!!value)return;this._isEnabled=!!value;this.UpdateElementState();break;case MULTI_SELECT:if(this._isMultiSelect===
!!value)return;this._isMultiSelect=!!value;this.UpdateElementState();break;case AUTO_FONT_SIZE:if(this._autoFontSize===!!value)return;this._autoFontSize=!!value;this.UpdateElementState();break;case ID:if(this._id===value)return;this._id=value;this.UpdateElementState();break}}GetDebuggerProperties(){const Acts=C3.Plugins.List.Acts;const prefix="plugins.list";return[{title:prefix+".name",properties:[{name:prefix+".debugger.item-count",value:this._items.length},{name:prefix+".properties.enabled.name",
value:this._isEnabled,onedit:v=>this.CallAction(Acts.SetEnabled,v)},{name:prefix+".debugger.selected-index",value:this._selectedIndex}]},{title:prefix+".properties.items.name",properties:this._items.map((item,index)=>({name:"$"+index,value:item,onedit:v=>this.CallAction(Acts.SetItemText,index,v)}))}]}}};


'use strict';{const C3=self.C3;C3.Plugins.List.Cnds={CompareSelection(cmp,x){return C3.compare(this._selectedIndex,cmp,x)},OnSelectionChanged(){return true},OnClicked(){return true},OnDoubleClicked(){return true},CompareSelectedText(text,case_){const i=this._selectedIndex;if(i<0||i>=this._items.length)return false;const selectedText=this._items[i];if(case_)return selectedText===text;else return C3.equalsNoCase(selectedText,text)},CompareTextAt(i,text,case_){i=Math.floor(i);if(i<0||i>=this._items.length)return false;
const itemText=this._items[i];if(case_)return itemText===text;else return C3.equalsNoCase(itemText,text)}}};


'use strict';{const C3=self.C3;C3.Plugins.List.Acts={Select(index){index=Math.floor(index);if(index<0)index=-1;if(index>=this._items.length)return;if(this._selectedIndex===index)return;this._selectedIndex=index;this._selectedIndices=[index];this._UpdateSelectedIndex()},SetTooltip(title){if(this._title===title)return;this._title=title;this.UpdateElementState()},SetVisible(v){const wi=this.GetWorldInfo();v=v!==0;if(wi.IsVisible()===v)return;wi.SetVisible(v)},AddItem(text){this._items.push(text);this.PostToDOMElement("add-item",
{"text":text,"index":-1})},AddItemAt(index,text){index=Math.max(Math.floor(index),0);if(index>=this._items.length){this._items.push(text);index=-1}else{this._items.splice(index,0,text);if(this._selectedIndex>=index)this._selectedIndex++;for(let i=0,len=this._selectedIndices.length;i<len;++i)if(this._selectedIndices[i]>=index)this._selectedIndices[i]++}this.PostToDOMElement("add-item",{"index":index,"text":text})},Remove(index){index=Math.floor(index);if(index<0||index>=this._items.length)return;this._items.splice(index,
1);if(this._selectedIndex>=index)this._selectedIndex--;let i=this._selectedIndices.indexOf(index);if(i!==-1)this._selectedIndices.splice(i,1);i=0;for(let len=this._selectedIndices.length;i<len;++i)if(this._selectedIndices[i]>=index)this._selectedIndices[i]--;this.PostToDOMElement("remove-item",{"index":index})},SetItemText(index,text){index=Math.floor(index);if(index<0||index>=this._items.length)return;this._items[index]=text;this.PostToDOMElement("set-item",{"index":index,"text":text})},Clear(){C3.clearArray(this._items);
this._selectedIndex=-1;C3.clearArray(this._selectedIndices);this.PostToDOMElement("clear")}}};


'use strict';{const C3=self.C3;C3.Plugins.List.Exps={ItemCount(){return this._items.length},ItemTextAt(i){i=Math.floor(i);if(i<0||i>=this._items.length)return"";return this._items[i]},SelectedIndex(){return this._selectedIndex},SelectedText(){const i=this._selectedIndex;if(i<0||i>=this._items.length)return"";return this._items[i]},SelectedCount(){return this._selectedIndices.length},SelectedIndexAt(i){i=Math.floor(i);if(i<0||i>=this._selectedIndices.length)return 0;return this._selectedIndices[i]},
SelectedTextAt(i){i=Math.floor(i);if(i<0||i>=this._selectedIndices.length)return"";i=this._selectedIndices[i];if(i<0||i>=this._items.length)return"";return this._items[i]}}};


'use strict';{const C3=self.C3;const DOM_COMPONENT_ID="text-input";C3.Plugins.TextBox=class TextInputPlugin extends C3.SDKDOMPluginBase{constructor(opts){super(opts,DOM_COMPONENT_ID);this.AddElementMessageHandler("click",(sdkInst,e)=>sdkInst._OnClick(e));this.AddElementMessageHandler("dblclick",(sdkInst,e)=>sdkInst._OnDoubleClick(e));this.AddElementMessageHandler("change",(sdkInst,e)=>sdkInst._OnChange(e))}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.TextBox.Type=class TextInputType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;const TEXT=0;const PLACEHOLDER=1;const TOOLTIP=2;const INITIALLY_VISIBLE=3;const ENABLE=4;const READ_ONLY=5;const SPELL_CHECK=6;const TYPE=7;const AUTO_FONT_SIZE=8;const ID=9;const DOM_COMPONENT_ID="text-input";const elemTypes=["text","password","email","number","tel","url","textarea","search"];C3.Plugins.TextBox.Instance=class TextInputInstance extends C3.SDKDOMInstanceBase{constructor(inst,properties){super(inst,DOM_COMPONENT_ID);this._text="";this._placeholder="";
this._title="";this._isEnabled=true;this._isReadOnly=false;this._spellCheck=false;this._type="text";this._autoFontSize=true;this._maxLength=-1;this._id="";if(properties){this._text=properties[TEXT];this._placeholder=properties[PLACEHOLDER];this._title=properties[TOOLTIP];this.GetWorldInfo().SetVisible(properties[INITIALLY_VISIBLE]);this._isEnabled=properties[ENABLE];this._isReadOnly=properties[READ_ONLY];this._spellCheck=properties[SPELL_CHECK];this._type=elemTypes[properties[TYPE]];this._autoFontSize=
properties[AUTO_FONT_SIZE];this._id=properties[ID]}this.CreateElement({"type":this._type,"id":this._id})}Release(){super.Release()}GetElementState(){return{"text":this._text,"placeholder":this._placeholder,"title":this._title,"isEnabled":this._isEnabled,"isReadOnly":this._isReadOnly,"spellCheck":this._spellCheck,"maxLength":this._maxLength}}async _OnClick(e){this.GetScriptInterface().dispatchEvent(C3.New(C3.Event,"click",true));await this.TriggerAsync(C3.Plugins.TextBox.Cnds.OnClicked)}async _OnDoubleClick(e){this.GetScriptInterface().dispatchEvent(C3.New(C3.Event,
"dblclick",true));await this.TriggerAsync(C3.Plugins.TextBox.Cnds.OnDoubleClicked)}async _OnChange(e){this._text=e["text"];this.GetScriptInterface().dispatchEvent(C3.New(C3.Event,"change",true));await this.TriggerAsync(C3.Plugins.TextBox.Cnds.OnTextChanged)}_SetText(text){if(this._text===text)return;this._text=text;this.UpdateElementState()}_GetText(){return this._text}_SetPlaceholder(placeholder){if(this._placeholder===placeholder)return;this._placeholder=placeholder;this.UpdateElementState()}_GetPlaceholder(){return this._placeholder}_SetTooltip(title){if(this._title===
title)return;this._title=title;this.UpdateElementState()}_GetTooltip(){return this._title}_SetEnabled(e){e=!!e;if(this._isEnabled===e)return;this._isEnabled=e;this.UpdateElementState()}_IsEnabled(){return this._isEnabled}_SetReadOnly(r){r=!!r;if(this._isReadOnly===r)return;this._isReadOnly=r;this.UpdateElementState()}_IsReadOnly(){return this._isReadOnly}_SetMaxLength(l){l=Math.max(+l,-1);if(this._maxLength===l)return;this._maxLength=l;this.UpdateElementState()}_GetMaxLength(){return this._maxLength}_ScrollToBottom(){this.PostToDOMElement("scroll-to-bottom")}Draw(renderer){}SaveToJson(){return{"t":this._text,
"p":this._placeholder,"ti":this._title,"e":this._isEnabled,"r":this._isReadOnly,"sp":this._spellCheck,"ml":this._maxLength,"type":this._type,"id":this._id}}LoadFromJson(o){this._text=o["t"];this._placeholder=o["p"];this._title=o["ti"];this._isEnabled=o["e"];this._isReadOnly=o["r"];this._spellCheck=o["sp"];this._maxLength=o.hasOwnProperty("ml")?o["ml"]:-1;this._type=o["type"];this._id=o["id"];this.UpdateElementState()}GetPropertyValueByIndex(index){switch(index){case TEXT:return this._text;case PLACEHOLDER:return this._placeholder;
case TOOLTIP:return this._title;case ENABLE:return this._isEnabled;case READ_ONLY:return this._isReadOnly;case SPELL_CHECK:return this._spellCheck;case AUTO_FONT_SIZE:return this._autoFontSize;case ID:return this._id}}SetPropertyValueByIndex(index,value){switch(index){case TEXT:if(this._text===value)return;this._text=value;this.UpdateElementState();break;case PLACEHOLDER:if(this._placeholder===value)return;this._placeholder=value;this.UpdateElementState();break;case TOOLTIP:if(this._title===value)return;
this._title=value;this.UpdateElementState();break;case ENABLE:if(this._isEnabled===!!value)return;this._isEnabled=!!value;this.UpdateElementState();break;case READ_ONLY:if(this._isReadOnly===!!value)return;this._isReadOnly=!!value;this.UpdateElementState();break;case SPELL_CHECK:if(this._spellCheck===!!value)return;this._spellCheck=!!value;this.UpdateElementState();break;case AUTO_FONT_SIZE:this._autoFontSize=!!value;break;case ID:if(this._id===value)return;this._id=value;this.UpdateElementState();
break}}GetDebuggerProperties(){const Acts=C3.Plugins.TextBox.Acts;const prefix="plugins.textbox";return[{title:prefix+".name",properties:[{name:prefix+".properties.text.name",value:this._text,onedit:v=>this.CallAction(Acts.SetText,v)},{name:prefix+".properties.enabled.name",value:this._isEnabled,onedit:v=>this.CallAction(Acts.SetEnabled,v)},{name:prefix+".properties.read-only.name",value:this._isReadOnly,onedit:v=>this.CallAction(Acts.SetReadOnly,v)}]}]}GetScriptInterfaceClass(){return self.ITextInputInstance}};
const map=new WeakMap;self.ITextInputInstance=class ITextInputInstance extends self.IDOMInstance{constructor(){super();map.set(this,self.IInstance._GetInitInst().GetSdkInstance())}set text(str){map.get(this)._SetText(str)}get text(){return map.get(this)._GetText()}set placeholder(str){map.get(this)._SetPlaceholder(str)}get placeholder(){return map.get(this)._GetPlaceholder()}set tooltip(str){map.get(this)._SetTooltip(str)}get tooltip(){return map.get(this)._GetTooltip()}set isEnabled(e){map.get(this)._SetEnabled(e)}get isEnabled(){return map.get(this)._IsEnabled()}set isReadOnly(r){map.get(this)._SetReadOnly(r)}get isReadOnly(){return map.get(this)._IsReadOnly()}set maxLength(l){map.get(this)._SetMaxLength(l)}get maxLength(){return map.get(this)._GetMaxLength()}scrollToBottom(){map.get(this)._ScrollToBottom()}}};


'use strict';{const C3=self.C3;C3.Plugins.TextBox.Cnds={CompareText(text,case_){if(case_===0)return C3.equalsNoCase(this._text,text);else return this._text===text},OnTextChanged(){return true},OnClicked(){return true},OnDoubleClicked(){return true}}};


'use strict';{const C3=self.C3;C3.Plugins.TextBox.Acts={SetText(param){this._SetText(param.toString())},AppendText(param){if(param==="")return;this._SetText(this._GetText()+param)},SetPlaceholder(placeholder){this._SetPlaceholder(placeholder)},SetTooltip(title){this._SetTooltip(title)},SetReadOnly(r){this._SetReadOnly(r===0)},ScrollToBottom(){this._ScrollToBottom()},SetMaxLength(l){this._SetMaxLength(l)}}};


'use strict';{const C3=self.C3;C3.Plugins.TextBox.Exps={Text(){return this._GetText()},MaxLength(){return this._GetMaxLength()}}};


"use strict";
var CMath = {};
	// Lerp function
	CMath.lerp = function(a, b, x)
	{
		return a + (b - a) * x;
	};
	
	// Cubic function
	CMath.cubic = function(a, b, c, d, x)
	{
		return this.lerp(this.lerp(this.lerp(a, b, x), this.lerp(b, c, x), x), this.lerp(this.lerp(b, c, x), this.lerp(c, d, x), x), x);
	}
	
	// Clamp function
	CMath.clamp = function(x, min, max)
	{
		if (x < min)
		{
			return min;
		}
		else if (x > max)
		{
			return max;
		}
		
		return x;
	};
	
	// Transition class
	function Transition(Type, Duration, Param1, Param2, Param3, Param4)
	{
		// Standard properties
		this.type = Type;
		this.duration = Duration;
		this.param1 = Param1;
		this.param2 = Param2;
		this.param3 = Param3;
		this.param4 = Param4;
		
		// Working values
		this.progress = 0;
	}
	
	// Camera class or something
	function Camera(Name, X, Y, Scale, Global)
	{
		// Standard properties
		this.global = Global;
		this.name = Name;
		this.x = X;
		this.y = Y;
		this.scale = Scale;
		
		// Following
		this.following = false;
		this.followedObjects = [];
		this.followedObjectUIDs = [];
		this.objectWeights = [];
		this.followedObjectIPs = [];
		this.followLag = 1;
		
		// Zoom to contain
		this.zoomToContain = false;
		this.zoomMarginH = 0;
		this.zoomMarginV = 0;
		this.zoomBoundU = -1;
		this.zoomBoundL = -1;
		// Camera transitions
		this.transitions = [];
		this.moveTransFinished = false;
		this.zoomTransFinished = false;

		// Camera shake
		this.isShaking = false;
		this.shakeX = 0;
		this.shakeY = 0;
		this.shakeZoom = 0;
		this.shakeTimer = 0;
		this.shakeStrength = 0;
		this.shakeMaxDeviation = 0;
		this.shakeMaxZoomDeviation = 0;
		this.shakeLength = 0;
		this.shakeBuildTime = 0;
		this.shakeDropTime = 0;
	}
	
	Camera.prototype.GetName = function()
	{
		return this.name;
	};

	Camera.prototype.GetX = function()
	{
		
		return this.x;
	};
	
	Camera.prototype.SetX = function(value)
	{
		this.x = value;
	};
	
	Camera.prototype.GetY = function()
	{
		return this.y;
	};
	
	Camera.prototype.SetY = function(value)
	{
		this.y = value;
	};

	Camera.prototype.GetShakeX = function()
	{
		return this.shakeX;
	};
	
	Camera.prototype.GetShakeY = function()
	{
		return this.shakeY;
	};
	
	Camera.prototype.SetFollowedObject = function(fObject)
	{
		this.followedObject = fObject;
	};

	Camera.prototype.ShakeCamera = function(dt)
	{
		// Check if the camera should be shaking
		if (this.isShaking)
		{
			this.shakeTimer += dt;

			if (this.shakeTimer < this.shakeLength)
			{
				var shakeStrength = 0;

				if (this.shakeTimer < this.shakeBuildTime)
				{
					shakeStrength = CMath.lerp(0, this.shakeStrength, this.shakeTimer / this.shakeBuildTime);
				}
				else
				{
					shakeStrength = this.shakeStrength;
				}

				if (this.shakeTimer > this.shakeDropTime)
				{
					shakeStrength = CMath.lerp(this.shakeStrength, 0, (this.shakeTimer - this.shakeDropTime) / (this.shakeLength - this.shakeDropTime));
				}

				var shakeAngle = Math.floor(Math.random() * 361) / 57.2958;
				var shakeX = CMath.lerp(0, Math.cos(shakeAngle) * this.shakeMaxDeviation, shakeStrength);
				var shakeY = CMath.lerp(0, Math.sin(shakeAngle) * this.shakeMaxDeviation, shakeStrength);
				var shakeZoom = CMath.lerp(0, (Math.floor(Math.random() * 201 - 100) / 100) * this.shakeMaxZoomDeviation, shakeStrength);

				this.shakeX = CMath.lerp(this.shakeX, shakeX, shakeStrength);
				this.shakeY = CMath.lerp(this.shakeY, shakeY, shakeStrength);
				this.shakeZoom = CMath.lerp(this.shakeZoom, shakeZoom, shakeStrength);
			}
			else
			{
				this.isShaking = false;
				this.shakeX = 0;
				this.shakeY = 0;
				this.shakeZoom = 0;
			}
		}
	}
	
	Camera.prototype.ProcessTransitions = function(dt)
	{
		// Reset the transition finished values
		this.moveTransFinished = false;
		this.zoomTransFinished = false;
		
		// Temporary value
		var transition;
		
		// Camera transitions
		for (var i = 0; i < this.transitions.length; )
		{
			transition = this.transitions[i];
			
			transition.progress = CMath.clamp(transition.progress + (1.0 / transition.duration * dt), 0.0, 1.0);
			
			if (transition.type == "MOVE")
			{
				this.x = CMath.cubic(transition.param3, transition.param3, transition.param1, transition.param1, transition.progress);
				this.y = CMath.cubic(transition.param4, transition.param4, transition.param2, transition.param2, transition.progress);
			}
			else if (transition.type == "SCALE")
			{
				this.scale = CMath.cubic(transition.param2, transition.param2, transition.param1, transition.param1, transition.progress);
			}
			
			if (transition.progress == 1)
			{
				// Check the transition type and mark it as finished
				if (transition.type == "MOVE")
				{
					this.moveTransFinished = true;
				}
				else if (transition.type == "SCALE")
				{
					this.zoomTransFinished = true;
				}
				
				this.transitions.splice(i, 1);
			}
			else
			{
				i++;
			}
		}
	};

	Camera.prototype.UpdateCameraTarget = function(dt, targetCamera)
	{
		// Update the transition stuff
		for (var i = 0; i < this.transitions.length; i++)
		{
			var transition = this.transitions[i];
			if (transition.type == "MOVE")
			{
				transition.param1 = targetCamera.GetX();
				transition.param2 = targetCamera.GetY();
			}
			else if (transition.type == "SCALE")
			{
				transition.param1 = targetCamera.scale;
			}
		}
	};
	
	Camera.prototype.ProcessFollowing = function(dt, screenWidth, screenHeight, layout)
	{
			// Followed objects
		var followed = this.followedObjects;
		var followedObjectIPs = this.followedObjectIPs;
		
		// Object following
		if (this.following && followed.length > 0)
		{
			// Temporary position
			var tempX = 0, tempY = 0, tempScale = 0;
			
			// Perform a weighted follow if the camera is not set to zoom to contain
			if (!this.zoomToContain)
			{
				var sumX = 0, sumY = 0, sumW = 0;
				for (var i = 0; i < followed.length; i++)
				{

					sumX += followed[i].GetImagePoint(followedObjectIPs[i],true)[0] * this.objectWeights[i];
					sumY += followed[i].GetImagePoint(followedObjectIPs[i],false)[1] * this.objectWeights[i];
					sumW += this.objectWeights[i];
				}
				
				// Set the temporary position
				tempX = sumX / sumW;
				tempY = sumY / sumW;

			}
			else
			{
				var minX = 0, maxX = 0, minY = 0, maxY = 0;
				var minXChanged = false, maxXChanged = false, minYChanged = false, maxYChanged = false;
				
				for (var i = 0; i < followed.length; i++)
				{
					var fObject = followed[i];
					fObject.GetWorldInfo()._UpdateBbox();
					if (minXChanged)
					{
						minX = Math.min(minX, fObject.GetWorldInfo().GetBoundingBox().getLeft());
					}
					else
					{
						minX = fObject.GetWorldInfo().GetBoundingBox().getRight();
						minXChanged = true;
					}
					if (maxXChanged)
					{
						maxX = Math.max(maxX, fObject.GetWorldInfo().GetBoundingBox().getRight());
					}
					else
					{
						maxX = fObject.GetWorldInfo().GetBoundingBox().getRight();
						maxXChanged = true;
					}
					if (minYChanged)
					{
						minY = Math.min(minY, fObject.GetWorldInfo().GetBoundingBox().getTop());
					}
					else
					{
						minY = fObject.GetWorldInfo().GetBoundingBox().getTop();
						minYChanged = true;
					}
					if (maxYChanged)
					{
						maxY = Math.max(maxY, fObject.GetWorldInfo().GetBoundingBox().getBottom());
					}
					else
					{
						maxY = fObject.GetWorldInfo().GetBoundingBox().getBottom();
						maxYChanged = true;
					}
				}
				
				// Zoom
				var tempXScale = (screenWidth - this.zoomMarginH * 2) / (maxX - minX);
				var tempYScale = (screenHeight - this.zoomMarginV * 2) / (maxY - minY);
				
				// Scroll to the middle
				tempX = CMath.lerp(minX, maxX, 0.5);
				tempY = CMath.lerp(minY, maxY, 0.5);
				
				// Check if the view is going over the layout bound
				if (this.x < ((screenWidth / 2) / tempXScale))
				{
					tempXScale = (screenWidth - this.zoomMarginH) / maxX;
					tempX = (screenWidth / tempXScale) / 2;
				}
				
				if (this.x > (layout.GetWidth() - (screenWidth / 2) / tempXScale))
				{
					tempXScale = (screenWidth - this.zoomMarginH) / (layout.GetWidth() - minX);
					tempX = layout.GetWidth() - (screenWidth / tempXScale) / 2;
				}
				
				// Check if the view is going over the layout bound
				if (this.y < ((screenHeight / 2) / tempYScale))
				{
					tempYScale = (screenHeight - this.zoomMarginV) / maxY;
					tempY = (screenHeight / tempYScale) / 2;
				}
				
				if (this.y > (layout.GetHeight() - (screenHeight / 2) / tempYScale))
				{
					tempYScale = (screenHeight - this.zoomMarginV) / (layout.GetHeight() - minY);
					tempY = layout.GetHeight() - (screenHeight / tempYScale) / 2;
				}
				
				// Set the calculated temp scale
				tempScale = Math.min(tempXScale, tempYScale);

				// Ensure that tempScale is bounded properly
				if (this.zoomBoundL != -1)
				{
					if (tempScale < this.zoomBoundL)
					{
						tempScale = this.zoomBoundL;
					}
				}
				if (this.zoomBoundU != -1)
				{
					if (tempScale > this.zoomBoundU)
					{
						tempScale = this.zoomBoundU;
					}
				}
			}
			
			// Scroll
			if (this.followLag == 1)
			{
				this.x = tempX;
				this.y = tempY;
				
				// Scale if zoom to contain is enabled
				if (this.zoomToContain)
				{
					this.scale = tempScale;
				}
			}
			else
			{
				var lag = (this.followLag * 4.0 * dt) * Math.sqrt(1.0 / dt);
				this.x = CMath.lerp(this.x, tempX, lag);
				this.y = CMath.lerp(this.y, tempY, lag);
				
				// Scale if zoom to contain is enabled
				if (this.zoomToContain)
				{
					this.scale = CMath.lerp(this.scale, tempScale, lag);
				}
			}
		}
	};
{
	C3.Plugins.MagiCam = class MagiCamPlugin extends C3.SDKPluginBase
	{
		constructor(opts)
		{
			super(opts);
		}
		
		Release()
		{
			super.Release();
		}

	};
}

"use strict";

{
	C3.Plugins.MagiCam.Type = class MagiCamType extends C3.SDKTypeBase
	{
		constructor(objectClass)
		{
			super(objectClass);
		}
		
		Release()
		{
			super.Release();
		}
		
		OnCreate()
		{	
		}
	};
}

"use strict";
{
	C3.Plugins.MagiCam.Instance = class MagiCamInstance extends C3.SDKWorldInstanceBase //SDKInstanceBase
	{
		constructor(inst, properties)
		{
			super(inst);
			const b = this._runtime.Dispatcher();
			this._disposables = new C3.CompositeDisposable(C3.Disposable.From(b, "layoutchange", () => this._OnLayoutChange()), C3.Disposable.From(b, "afterload", () => this._OnAfterLoad()))
			// Initialise object properties
			// Local cameras
			this.localCameras = [];
			this.localCameraCount = 0;
			this.localCameraCountOld = 0;

			// Transition cameras
			this.transCamera = null;
			this.transTarget = null;
			this.isSwitchingCameras = false;
			
			// Global cameras
			this.globalCameras = [];
			
			// Active camera
			this.activeCamera = null;
			//this._runtime.tickMe(this);
			if (properties)		// note properties may be null in some cases
			{
				
			}
			this._inst.GetTimeScale();
			this._StartTicking();
		}

		Release()
		{
			super.Release();
		}
		
		SaveToJson()
		{
			// Throw the trans camera on top of local cameras list
			if (null != this.transCamera)
			{
				this.localCameras.push(this.transCamera);
			}

			var o = {
				"lcc": this.localCameraCount,
				"olcc": this.localCameraCountOld,
				"alcc": this.localCameras.length,
				"agcc": this.globalCameras.length,
				"tcnn": (this.transCamera == null ? false : true)
			};

			for (var i = 0; i < this.localCameras.length; i++)
			{
				o["lc" + i + "g"] = this.localCameras[i].global;
				o["lc" + i + "n"] = this.localCameras[i].name;
				o["lc" + i + "x"] = this.localCameras[i].x;
				o["lc" + i + "y"] = this.localCameras[i].y;
				o["lc" + i + "s"] = this.localCameras[i].scale;
				o["lc" + i + "f"] = this.localCameras[i].following;
				o["lc" + i + "foc"] = this.localCameras[i].followedObjects.length;
				for (var f = 0; f < this.localCameras[i].followedObjects.length; f++)
				{
					o["lc" + i + "fo" + f] = this.localCameras[i].followedObjects[f].GetUID();
				}
				for (var w = 0; w < this.localCameras[i].objectWeights.length; w++)
				{
					o["lc" + i + "fow" + w] = this.localCameras[i].objectWeights[w];
				}
				for (var ip = 0; ip < this.localCameras[i].followedObjectIPs.length; ip++)
				{
					o["lc" + i + "foip" + ip] = this.localCameras[i].followedObjectIPs[ip];
				}
				o["lc" + i + "fl"] = this.localCameras[i].followLag;
				o["lc" + i + "ztc"] = this.localCameras[i].zoomToContain;
				o["lc" + i + "zmh"] = this.localCameras[i].zoomMarginH;
				o["lc" + i + "zmv"] = this.localCameras[i].zoomMarginV;
				o["lc" + i + "zbu"] = this.localCameras[i].zoomBoundU;
				o["lc" + i + "zbl"] = this.localCameras[i].zoomBoundL;
				o["lc" + i + "tc"] = this.localCameras[i].transitions.length;
				for (var t = 0; t < this.localCameras[i].transitions.length; t++)
				{
					o["lc" + i + "t" + t + "tp"] = this.localCameras[i].transitions[t].type;
					o["lc" + i + "t" + t + "d"] = this.localCameras[i].transitions[t].duration;
					o["lc" + i + "t" + t + "p1"] = this.localCameras[i].transitions[t].param1;
					o["lc" + i + "t" + t + "p2"] = this.localCameras[i].transitions[t].param2;
					o["lc" + i + "t" + t + "p3"] = this.localCameras[i].transitions[t].param3;
					o["lc" + i + "t" + t + "p4"] = this.localCameras[i].transitions[t].param4;
					o["lc" + i + "t" + t + "pr"] = this.localCameras[i].transitions[t].progress;
				}
				o["lc" + i + "mtf"] = this.localCameras[i].moveTransFinished;
				o["lc" + i + "ztf"] = this.localCameras[i].zoomTransFinished;
				o["lc" + i + "csis"] = this.localCameras[i].isShaking;
				o["lc" + i + "cssx"] = this.localCameras[i].shakeX;
				o["lc" + i + "cssy"] = this.localCameras[i].shakeY;
				o["lc" + i + "cssz"] = this.localCameras[i].shakeZoom;
				o["lc" + i + "csst"] = this.localCameras[i].shakeTimer;
				o["lc" + i + "csss"] = this.localCameras[i].shakeStrength;
				o["lc" + i + "cssmd"] = this.localCameras[i].shakeMaxDeviation;
				o["lc" + i + "cssmzd"] = this.localCameras[i].shakeMaxZoomDeviation;
				o["lc" + i + "cssl"] = this.localCameras[i].shakeLength;
				o["lc" + i + "cssbt"] = this.localCameras[i].shakeBuildTime;
				o["lc" + i + "cssdt"] = this.localCameras[i].shakeDropTime;
			}

			for (var i = 0; i < this.globalCameras.length; i++)
			{
				o["gc" + i + "g"] = this.globalCameras[i].global;
				o["gc" + i + "n"] = this.globalCameras[i].name;
				o["gc" + i + "x"] = this.globalCameras[i].x;
				o["gc" + i + "y"] = this.globalCameras[i].y;
				o["gc" + i + "s"] = this.globalCameras[i].scale;
				o["gc" + i + "f"] = this.globalCameras[i].following;
				o["gc" + i + "foc"] = this.globalCameras[i].followedObjects.length;
				for (var f = 0; f < this.globalCameras[i].followedObjects.length; f++)
				{
					o["gc" + i + "fo" + f] = this.globalCameras[i].followedObjects[f].GetUID();
				}
				for (var w = 0; w < this.globalCameras[i].objectWeights.length; w++)
				{
					o["gc" + i + "fow" + w] = this.globalCameras[i].objectWeights[w];
				}
				for (var ip = 0; ip < this.globalCameras[i].followedObjectIPs.length; ip++)
				{
					o["gc" + i + "foip" + ip] = this.globalCameras[i].followedObjectIPs[ip];
				}
				o["gc" + i + "fl"] = this.globalCameras[i].followLag;
				o["gc" + i + "ztc"] = this.globalCameras[i].zoomToContain;
				o["gc" + i + "zmh"] = this.globalCameras[i].zoomMarginH;
				o["gc" + i + "zmv"] = this.globalCameras[i].zoomMarginV;
				o["gc" + i + "zbu"] = this.globalCameras[i].zoomBoundU;
				o["gc" + i + "zbl"] = this.globalCameras[i].zoomBoundL;
				o["gc" + i + "tc"] = this.globalCameras[i].transitions.length;
				for (var t = 0; t < this.globalCameras[i].transitions.length; t++)
				{
					o["gc" + i + "t" + t + "tp"] = this.globalCameras[i].transitions[t].type;
					o["gc" + i + "t" + t + "d"] = this.globalCameras[i].transitions[t].duration;
					o["gc" + i + "t" + t + "p1"] = this.globalCameras[i].transitions[t].param1;
					o["gc" + i + "t" + t + "p2"] = this.globalCameras[i].transitions[t].param2;
					o["gc" + i + "t" + t + "p3"] = this.globalCameras[i].transitions[t].param3;
					o["gc" + i + "t" + t + "p4"] = this.globalCameras[i].transitions[t].param4;
				}
				o["gc" + i + "mtf"] = this.globalCameras[i].moveTransFinished;
				o["gc" + i + "ztf"] = this.globalCameras[i].zoomTransFinished;
				o["gc" + i + "csis"] = this.globalCameras[i].isShaking;
				o["gc" + i + "cssx"] = this.globalCameras[i].shakeX;
				o["gc" + i + "cssy"] = this.globalCameras[i].shakeY;
				o["gc" + i + "cssz"] = this.globalCameras[i].shakeZoom;
				o["gc" + i + "csst"] = this.globalCameras[i].shakeTimer;
				o["gc" + i + "csss"] = this.globalCameras[i].shakeStrength;
				o["gc" + i + "cssmd"] = this.globalCameras[i].shakeMaxDeviation;
				o["gc" + i + "cssmzd"] = this.globalCameras[i].shakeMaxZoomDeviation;
				o["gc" + i + "cssl"] = this.globalCameras[i].shakeLength;
				o["gc" + i + "cssbt"] = this.globalCameras[i].shakeBuildTime;
				o["gc" + i + "cssdt"] = this.globalCameras[i].shakeDropTime;
			}

			if (null != this.activeCamera)
			{
				o["ac"] = this.activeCamera.name;
			}
			else
			{
				o["ac"] = "null";
			}

			if (null != this.transTarget)
			{
				o["tt"] = this.transTarget.name;
			}

			return o;
		}

		LoadFromJson(o)
		{
			this.localCameras = [];
			this.globalCameras = [];
			this.localCameraCount = o["lcc"];
			this.localCameraCountOld = o["olcc"];

			var localCamCount = o["alcc"];
			for (var i = 0; i < localCamCount; i++)
			{
				var tempCam = new Camera("", 0, 0, 0, false);

				tempCam.global = o["lc" + i + "g"];
				tempCam.name = o["lc" + i + "n"];
				tempCam.x = o["lc" + i + "x"];
				tempCam.y = o["lc" + i + "y"];
				tempCam.scale = o["lc" + i + "s"];
				tempCam.following = o["lc" + i + "f"];

				var foCount = o["lc" + i + "foc"];
				for (var f = 0; f < foCount; f++)
				{
					tempCam.followedObjectUIDs.push(o["lc" + i + "fo" + f]);
				}
				for (var w = 0; w < foCount; w++)
				{
					tempCam.objectWeights.push(o["lc" + i + "fow" + w]);
				}
				for (var ip = 0; ip < foCount; ip++)
				{
					tempCam.followedObjectIPs.push(o["lc" + i + "foip" + ip]);
				}

				tempCam.followLag = o["lc" + i + "fl"];
				tempCam.zoomToContain = o["lc" + i + "ztc"];
				tempCam.zoomMarginH = o["lc" + i + "zmh"];
				tempCam.zoomMarginV = o["lc" + i + "zmv"];
				tempCam.zoomBoundU = o["lc" + i + "zbu"];
				tempCam.zoomBoundL = o["lc" + i + "zbl"];
				var transCount = o["lc" + i + "tc"];
				for (var t = 0; t < transCount; t++)
				{
					var tempTrans = new Transition("", 0, 0, 0, 0);
					tempTrans.type = o["lc" + i + "t" + t + "tp"];
					tempTrans.duration = o["lc" + i + "t" + t + "d"];
					tempTrans.param1 = o["lc" + i + "t" + t + "p1"];
					tempTrans.param2 = o["lc" + i + "t" + t + "p2"];
					tempTrans.param3 = o["lc" + i + "t" + t + "p3"];
					tempTrans.param4 = o["lc" + i + "t" + t + "p4"];
					tempTrans.progress = o["lc" + i + "t" + t + "pr"];
					tempCam.transitions.push(tempTrans);
				}
				tempCam.moveTransFinished = o["lc" + i + "mtf"];
				tempCam.zoomTransFinished = o["lc" + i + "ztf"];
				tempCam.isShaking = o["lc" + i + "csis"];
				tempCam.shakeX = o["lc" + i + "cssx"];
				tempCam.shakeY = o["lc" + i + "cssy"];
				tempCam.shakeZoom = o["lc" + i + "cssz"];
				tempCam.shakeTimer = o["lc" + i + "csst"];
				tempCam.shakeStrength = o["lc" + i + "csss"];
				tempCam.shakeMaxDeviation = o["lc" + i + "cssmd"];
				tempCam.shakeMaxZoomDeviation = o["lc" + i + "cssmzd"];
				tempCam.shakeLength = o["lc" + i + "cssl"];
				tempCam.shakeBuildTime = o["lc" + i + "cssbt"];
				tempCam.shakeDropTime = o["lc" + i + "cssdt"];

				this.localCameras.push(tempCam);
				
				var activeCam = o["ac"];
				if (activeCam == "null")
				{
					this.activeCamera = null;
				}
				else
				{
					this.activeCamera = this.GetCamera(activeCam);
				}

				var hasTransCam = o["tcnn"];

				if (hasTransCam)
				{
					this.transCamera = this.localCameras.pop();
					this.transTarget = this.GetCamera(o["tt"]);
				}
			}
		}
        _OnLayoutChange() {
        			// Get rid of the old local cameras
			for (var i = 0; i < this.localCameraCountOld; i++)
			{
				this.localCameras.shift();
			}
			
			this.localCameraCount -= this.localCameraCountOld;
        }
        _OnAfterLoad() {
			for (var i = 0; i < this.localCameras.length; i++)
			{
				for (var o = 0; o < this.localCameras[i].followedObjectUIDs.length; o++)
				{
					this.localCameras[i].followedObjects.push(this._runtime.GetInstanceByUID(this.localCameras[i].followedObjectUIDs[o]));
				}
			}

			for (var i = 0; i < this.globalCameras.length; i++)
			{
				for (var o = 0; o < this.globalCameras[i].followedObjectUIDs.length; o++)
				{
					this.globalCameras[i].followedObjects.push(this._runtime.GetInstanceByUID(this.globalCameras[i].followedObjectUIDs[o]));
				}
			}
    	}
		GetCamera(Name)
		{
			// Return the active camera if Name is blank
			if (Name == "")
			{
				return this.activeCamera;
			}
			
			// Search through the global cameras first
			for (var i = (this.globalCameras.length - 1) ; i >= 0; i--)
			{
				if (this.globalCameras[i].GetName() == Name)
				{
					return this.globalCameras[i];
				}
			}
			
			// Search through the local cameras second
			for (var i = (this.localCameras.length - 1); i >= 0; i--)
			{
				if (this.localCameras[i].GetName() == Name)
				{
					return this.localCameras[i];
				}
			}
			
			return null;
		}

		Tick()
		{
			// Update the old camera count
			this.localCameraCountOld = this.localCameraCount;
			//var dt = this.runtime.getDt(this);
			var dt = this._runtime.GetDt(this._inst);
			if (dt == 0)
			{
				dt = 0.1;
			}
			
			// Update all of the global cameras
			for (var i = 0; i < this.globalCameras.length; i++)
			{
				this.globalCameras[i].ProcessTransitions(dt);
				this.globalCameras[i].ProcessFollowing(dt, this._runtime.GetOriginalViewportWidth(), this._runtime.GetOriginalViewportHeight(), this._runtime.GetMainRunningLayout());
				this.globalCameras[i].ShakeCamera(dt);
			}
			
			// Update all of the local cameras
			for (var i = 0; i < this.localCameras.length; i++)
			{
				this.localCameras[i].ProcessTransitions(dt);
				this.localCameras[i].ProcessFollowing(dt, this._runtime.GetOriginalViewportWidth(), this._runtime.GetOriginalViewportHeight(), this._runtime.GetMainRunningLayout());
				this.localCameras[i].ShakeCamera(dt);
			}

			// Update the transition camera
			if (null != this.transCamera)
			{
				this.transCamera.UpdateCameraTarget(dt, this.transTarget);
				this.transCamera.ProcessTransitions(dt);

				if (this.transCamera.moveTransFinished)
				{
					this.activeCamera = this.transTarget;
					this.transCamera = null;
				}
			}
			// If there is an active camera, set the scroll and scale values of the layout to match
			if (this.activeCamera != null)
			{
				// Scroll
				this._runtime.GetMainRunningLayout().SetScrollX(this.activeCamera.GetX() + this.activeCamera.GetShakeX());
				this._runtime.GetMainRunningLayout().SetScrollY(this.activeCamera.GetY() + this.activeCamera.GetShakeY());
				// Set the scale
				this._runtime.GetMainRunningLayout().SetScale(this.activeCamera.scale + this.activeCamera.shakeZoom);
				
				// Have the layout redrawn
				this.GetRuntime().UpdateRender();
			}
		}
	};
}

"use strict";

{
	C3.Plugins.MagiCam.Cnds =
	{
		TransitionFinished(CameraName, Transition)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Check the type of transition specified
				if (Transition == 0)
				{
					return camera.moveTransFinished;
				}
				else if (Transition == 1)
				{
					return camera.zoomTransFinished;
				}
			}
			
			// Return false by default
			return false;
		},
		TransitionIsInProgress(CameraName, Transition)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Check if there is a transition of the type specified in progress
				for (var i = 0; i < camera.transitions.length; i++)
				{
					if (camera.transitions[i].type == "MOVE" && Transition == 0)
					{
						return true;
					}
					else if (camera.transitions[i].type == "SCALE" && Transition == 1)
					{
						return true;
					}
				}
			}
			
			// Return false by default
			return false;
		}
	};
}

"use strict";

{
	C3.Plugins.MagiCam.Acts =
	{
		FollowObject(CameraName, FollowedObject, ObjectWeight, ImagePoint)
		{
			// Make sure an object was picked
			if (!FollowedObject)
			{
				return;
			}
			
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Get the first picked instance of the specified object type
				var followedObject = FollowedObject.GetFirstPicked();
				// Check to ensure that if the camera is global and the object isn't that the object isn't followed
				if (camera.global && !FollowedObject.global) // todo fix it
				{
					alert("MagiCam:\n\nObject not global - global cameras must follow global objects.");
					return;
				}
				
				// Follow the specified object
				camera.followedObjects.push(followedObject);
				camera.objectWeights.push(ObjectWeight);
				camera.followedObjectIPs.push(ImagePoint);
			}
		},
		
		SetFollowLag(CameraName, FollowLag)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Set the follow lag for this object
				camera.followLag = 1 - FollowLag / 100;
			}
		},
		
		ZoomToContain(CameraName, Zoom, ZoomMarginH, ZoomMarginV, ZoomBoundU, ZoomBoundL)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Set the zoom value of the camera
				if (Zoom == 0)
				{
					camera.zoomToContain = true;
					camera.zoomMarginH = ZoomMarginH;
					camera.zoomMarginV = ZoomMarginV;
					camera.zoomBoundU = ZoomBoundU;
					camera.zoomBoundL = ZoomBoundL;
				}
				else
				{
					camera.zoomToContain = false;
					
				}
			}
		},
		
		EnableFollowing(CameraName, Following)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Set the following state
				if (Following == 0)
				{
					camera.following = true;
				}
				else
				{
					camera.following = false;
					
				}
			}
		},

		// FollowObject
		UnfollowObject(CameraName, FollowedObject)
		{
			// Make sure an object was picked
			if (!FollowedObject)
			{
				return;
			}
			
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Get the first picked instance of the specified object type
				var followedObject = FollowedObject.GetFirstPicked();
				
				// Check if this object is being followed
				for (var i = 0; i < camera.followedObjects.length; i++)
				{
					if (camera.followedObjects[i] == followedObject)
					{
						// Un-follow
						camera.followedObjects.splice(i, 1);
						break;
					}
				}
			}
		},
		
		// CreateLocalCamera
		CreateLocalCamera(cameraName, cameraX, cameraY, cameraScale, Active)
		{
			// Make sure that the name isn't blank
			if (cameraName == "")
			{
				alert("Camera name must not be blank.");
				return;
			}
			
			// Add a new camera to the list
			this.localCameras.push(new Camera(cameraName, cameraX, cameraY, cameraScale, false));
			this.localCameraCount++;
			
			// Check if the camera should be made active
			if (Active == 1)
			{
				this.activeCamera = this.localCameras[this.localCameras.length - 1];
				this._runtime.GetMainRunningLayout().SetScale(this.activeCamera.scale);
			}
			else{
				var x  = this.localCameras[this.localCameras.length - 1];
			}
		},
		
		// CreateGlobalCamera
		CreateGlobalCamera(cameraName, cameraX, cameraY, cameraScale, Active)
		{
			// Make sure that the name isn't blank
			if (cameraName == "")
			{
				alert("Camera name must not be blank.");
				return;
			}
			else if (this.GetCamera(cameraName) != null)
			{
				return;
			}
			
			// Add a new camera to the list
			this.globalCameras.push(new Camera(cameraName, cameraX, cameraY, cameraScale, true));
			
			// Check if the camera should be made active
			if (Active == 1)
			{
				this.activeCamera = this.globalCameras[this.globalCameras.length - 1];
				this._runtime.GetMainRunningLayout().SetScrollX(this.activeCamera.GetX());
				this._runtime.GetMainRunningLayout().SetScrollY(this.activeCamera.GetY());
				this._runtime.GetMainRunningLayout().SetScale(this.activeCamera.scale);
			}
		},
		
		// SetActiveCamera
		SetActiveCamera(CameraName)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Set the new active camera
				this.activeCamera = camera;
				
				// Setup the layout to match
				this._runtime.GetMainRunningLayout().SetScrollX(camera.GetX());
				this._runtime.GetMainRunningLayout().SetScrollY(camera.GetY());
				this._runtime.GetMainRunningLayout().SetScale(camera.scale);
			}
		},
		
		// SetXPosition
		SetScrollSmoothing(CameraName)
		{
		},
		
		// SetXPosition
		SetXPosition(CameraName, X)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Set the camera position
				camera.SetX(X);
			}
		},
		
		// SetYPosition
		SetYPosition(CameraName, Y)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Set the camera position
				camera.SetY(Y);
			}
		},
		
		// SetPosition
		SetPosition(CameraName, X, Y)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Set the camera position
				camera.SetX(X);
				camera.SetY(Y);
			}
		},
		
		// SetZoom
		SetZoom(CameraName, Zoom)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Set the camera position
				camera.scale = Zoom;
			}
		},
		
		// TransitionToPoint
		TransitionToPoint(CameraName, X, Y, Duration)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Check if there is already a movement transition in progress
				for (var i = 0; i < camera.transitions.length; i++)
				{
					if (camera.transitions[i].type == "MOVE")
					{
						camera.transitions.splice(i, 1);
						break;
					}
				}
				
				// Add the new transition
				camera.transitions.push(new Transition("MOVE", Duration, X, Y, camera.GetX(), camera.GetY()));
				
				// Disable following and zoom to contain
				camera.following = false;
				camera.zoomToContain = false;
			}
		},
		
		// TransitionToZoom
		TransitionToZoom(CameraName, Zoom, Duration)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Check if there is already a scale transition in progress
				for (var i = 0; i < camera.transitions.length; i++)
				{
					if (camera.transitions[i].type == "SCALE")
					{
						camera.transitions.splice(i, 1);
						break;
					}
				}
				
				// Add the new transition
				camera.transitions.push(new Transition("SCALE", Duration, Zoom, camera.scale, null, null));
				
				// Disable zoom to contain
				camera.zoomToContain = false;
			}
		},

		// TransitionToCamera
		TransitionToCamera(CameraName, Duration)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Setup the transition
				this.transTarget = camera;
				this.transCamera = new Camera("transCamera", this.activeCamera.GetX(), this.activeCamera.GetY(), this.activeCamera.scale, false);
				this.transCamera.transitions.push(new Transition("MOVE", Duration, this.transTarget.GetX(), this.transTarget.GetY(), this.transCamera.GetX(), this.transCamera.GetY()));
				this.transCamera.transitions.push(new Transition("SCALE", Duration, this.transTarget.scale, this.transCamera.scale, null, null));

				// Switch the active camera to the transition camera
				this.activeCamera = this.transCamera;
				this.isSwitchingCameras = true;
			}
		},

		// ShakeCamera
		ShakeCamera(CameraName, Strength, MaxDeviation, MaxZoomDeviation, BuildLength, DropTime, Duration)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);
			
			// Check that a camera was found
			if (camera != null)
			{
				// Setup the shake
				camera.isShaking = true;
				camera.shakeStrength = Strength / 100;
				camera.shakeMaxDeviation = MaxDeviation;
				camera.shakeMaxZoomDeviation = MaxZoomDeviation;
				camera.shakeBuildTime = BuildLength;
				camera.shakeDropTime = DropTime;
				camera.shakeLength = Duration;
				camera.shakeTimer = 0;
			}
		}
	
	};
}

"use strict";

{
	C3.Plugins.MagiCam.Exps =
	{
		MovementTransitionProgress(CameraName)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);

			// Check that a camera was found
			if (null != camera)
			{
				// Check if there is already a movement transition in progress
				for (var i = 0; i < camera.transitions.length; i++)
				{
					if (camera.transitions[i].type == "MOVE")
					{
						return camera.transitions[i].progress;
					}
				}
			}

			// Return 0 by default
			return 0;
		},

		// ZoomTransitionProgress
		ZoomTransitionProgress(CameraName)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);

			// Check that a camera was found
			if (null != camera)
			{
				// Check if there is already a movement transition in progress
				for (var i = 0; i < camera.transitions.length; i++)
				{
					if (camera.transitions[i].type == "SCALE")
					{
						return camera.transitions[i].progress;
						
					}
				}
			}

			// Return 0 by default
			return 0;
		},

		// GetX
		GetX(CameraName)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);

			// Check that a camera was found
			if (null != camera)
			{
				return camera.x;
				
			}

			// Return 0 by default
			return 0;
		},

		// GetY
		GetY(CameraName)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);

			// Check that a camera was found
			if (null != camera)
			{
				return camera.y;
				
			}

			// Return 0 by default
			return 0;
		},

		// GetZoom
		GetZoom(CameraName)
		{
			// Retrieve the specified camera
			var camera = this.GetCamera(CameraName);

			// Check that a camera was found
			if (null != camera)
			{
				return camera.scale;
				
			}

			// Return 0 by default
			return 0;
		},

		// GetActiveCamera
		GetActiveCamera(ret)
		{
			// Check that a camera was found
			if (null != this.activeCamera)
			{
				return this.activeCamera.name;
				
			}

			// Return 0 by default
			return "null";
		}
	
	};
}

'use strict';{const C3=self.C3;C3.Plugins.Mouse=class MousePlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.Mouse.Type=class MouseType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}GetScriptInterfaceClass(){return self.IMouseObjectType}};let mouseObjectType=null;function GetMouseSdkInstance(){return mouseObjectType.GetSingleGlobalInstance().GetSdkInstance()}self.IMouseObjectType=class IMouseObjectType extends self.IObjectClass{constructor(objectType){super(objectType);mouseObjectType=objectType;objectType.GetRuntime()._GetCommonScriptInterfaces().mouse=
this}getMouseX(layerNameOrNumber){return GetMouseSdkInstance().GetMousePositionForLayer(layerNameOrNumber)[0]}getMouseY(layerNameOrNumber){return GetMouseSdkInstance().GetMousePositionForLayer(layerNameOrNumber)[1]}getMousePosition(layerNameOrNumber){return GetMouseSdkInstance().GetMousePositionForLayer(layerNameOrNumber)}isMouseButtonDown(button){return GetMouseSdkInstance().IsMouseButtonDown(button)}}};


'use strict';{const C3=self.C3;const DOM_COMPONENT_ID="mouse";C3.Plugins.Mouse.Instance=class MouseInstance extends C3.SDKInstanceBase{constructor(inst,properties){super(inst,DOM_COMPONENT_ID);this._buttonMap=[false,false,false];this._mouseXcanvas=0;this._mouseYcanvas=0;this._triggerButton=0;this._triggerType=0;this._triggerDir=0;const rt=this.GetRuntime().Dispatcher();this._disposables=new C3.CompositeDisposable(C3.Disposable.From(rt,"pointermove",e=>this._OnPointerMove(e.data)),C3.Disposable.From(rt,
"pointerdown",e=>this._OnPointerDown(e.data)),C3.Disposable.From(rt,"pointerup",e=>this._OnPointerUp(e.data)),C3.Disposable.From(rt,"dblclick",e=>this._OnDoubleClick(e.data)),C3.Disposable.From(rt,"wheel",e=>this._OnMouseWheel(e.data)),C3.Disposable.From(rt,"window-blur",()=>this._OnWindowBlur()))}Release(){super.Release()}_OnPointerDown(e){if(e["pointerType"]!=="mouse")return;this._mouseXcanvas=e["pageX"]-this._runtime.GetCanvasClientX();this._mouseYcanvas=e["pageY"]-this._runtime.GetCanvasClientY();
this._CheckButtonChanges(e["lastButtons"],e["buttons"])}_OnPointerMove(e){if(e["pointerType"]!=="mouse")return;this._mouseXcanvas=e["pageX"]-this._runtime.GetCanvasClientX();this._mouseYcanvas=e["pageY"]-this._runtime.GetCanvasClientY();this._CheckButtonChanges(e["lastButtons"],e["buttons"])}_OnPointerUp(e){if(e["pointerType"]!=="mouse")return;this._CheckButtonChanges(e["lastButtons"],e["buttons"])}_CheckButtonChanges(lastButtons,buttons){this._CheckButtonChange(lastButtons,buttons,1,0);this._CheckButtonChange(lastButtons,
buttons,4,1);this._CheckButtonChange(lastButtons,buttons,2,2)}_CheckButtonChange(lastButtons,buttons,checkButtonFlag,resultButton){if(!(lastButtons&checkButtonFlag)&&buttons&checkButtonFlag)this._OnMouseDown(resultButton);else if(lastButtons&checkButtonFlag&&!(buttons&checkButtonFlag))this._OnMouseUp(resultButton)}_OnMouseDown(button){this._buttonMap[button]=true;this.Trigger(C3.Plugins.Mouse.Cnds.OnAnyClick);this._triggerButton=button;this._triggerType=0;this.Trigger(C3.Plugins.Mouse.Cnds.OnClick);
this.Trigger(C3.Plugins.Mouse.Cnds.OnObjectClicked)}_OnMouseUp(button){if(!this._buttonMap[button])return;this._buttonMap[button]=false;this._triggerButton=button;this.Trigger(C3.Plugins.Mouse.Cnds.OnRelease)}_OnDoubleClick(e){this._triggerButton=e["button"];this._triggerType=1;this.Trigger(C3.Plugins.Mouse.Cnds.OnClick);this.Trigger(C3.Plugins.Mouse.Cnds.OnObjectClicked)}_OnMouseWheel(e){this._triggerDir=e["deltaY"]<0?1:0;this.Trigger(C3.Plugins.Mouse.Cnds.OnWheel)}_OnWindowBlur(){for(let i=0,len=
this._buttonMap.length;i<len;++i){if(!this._buttonMap[i])return;this._buttonMap[i]=false;this._triggerButton=i;this.Trigger(C3.Plugins.Mouse.Cnds.OnRelease)}}GetMousePositionForLayer(layerNameOrNumber){const layout=this._runtime.GetMainRunningLayout();const x=this._mouseXcanvas;const y=this._mouseYcanvas;if(typeof layerNameOrNumber==="undefined"){const layer=layout.GetLayerByIndex(0);return layer.CanvasCssToLayer_DefaultTransform(x,y)}else{const layer=layout.GetLayer(layerNameOrNumber);if(layer)return layer.CanvasCssToLayer(x,
y);else return[0,0]}}IsMouseButtonDown(button){button=Math.floor(button);return!!this._buttonMap[button]}_IsMouseOverCanvas(){return this._mouseXcanvas>=0&&this._mouseYcanvas>=0&&this._mouseXcanvas<this._runtime.GetCanvasCssWidth()&&this._mouseYcanvas<this._runtime.GetCanvasCssHeight()}GetDebuggerProperties(){const prefix="plugins.mouse";return[{title:prefix+".name",properties:[{name:prefix+".debugger.absolute-position",value:this._mouseXcanvas+","+this._mouseYcanvas},{name:prefix+".debugger.left-button",
value:this._buttonMap[0]},{name:prefix+".debugger.middle-button",value:this._buttonMap[1]},{name:prefix+".debugger.right-button",value:this._buttonMap[2]}]},{title:prefix+".debugger.position-on-each-layer",properties:this._runtime.GetMainRunningLayout().GetLayers().map(layer=>({name:"$"+layer.GetName(),value:layer.CanvasCssToLayer(this._mouseXcanvas,this._mouseYcanvas).join(", ")}))}]}}};


'use strict';{const C3=self.C3;C3.Plugins.Mouse.Cnds={OnClick(button,type){return this._triggerButton===button&&this._triggerType===type},OnAnyClick(){return true},IsButtonDown(button){return this._buttonMap[button]},OnRelease(button){return this._triggerButton===button},IsOverObject(objectClass){if(!this._IsMouseOverCanvas())return false;const cnd=this._runtime.GetCurrentCondition();const isInverted=cnd.IsInverted();const mx=this._mouseXcanvas;const my=this._mouseYcanvas;return C3.xor(this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(objectClass,
mx,my,isInverted),isInverted)},OnObjectClicked(button,type,objectClass){if(button!==this._triggerButton||type!==this._triggerType)return false;if(!this._IsMouseOverCanvas())return false;const mx=this._mouseXcanvas;const my=this._mouseYcanvas;return this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(objectClass,mx,my,false)},OnWheel(dir){return this._triggerDir===dir}}};


'use strict';{const C3=self.C3;let lastSetCursor=null;const CURSOR_STYLES=["auto","pointer","text","crosshair","move","help","wait","none"];C3.Plugins.Mouse.Acts={SetCursor(c){const cursorStyle=CURSOR_STYLES[c];if(lastSetCursor===cursorStyle)return;lastSetCursor=cursorStyle;this.PostToDOM("cursor",cursorStyle)},SetCursorSprite(objectClass){if(C3.Platform.IsMobile||!objectClass)return;const inst=objectClass.GetFirstPicked();if(!inst)return;const wi=inst.GetWorldInfo();const imageInfo=inst.GetCurrentImageInfo();
if(!wi||!imageInfo)return;if(lastSetCursor===imageInfo)return;lastSetCursor=imageInfo;imageInfo.ExtractImageToCanvas().then(canvas=>C3.CanvasToBlob(canvas)).then(blob=>{const url=URL.createObjectURL(blob);const cursorStyle=`url(${url}) ${Math.round(wi.GetOriginX()*imageInfo.GetWidth())} ${Math.round(wi.GetOriginY()*imageInfo.GetHeight())}, auto`;this.PostToDOM("cursor","");this.PostToDOM("cursor",cursorStyle)})}}};


'use strict';{const C3=self.C3;C3.Plugins.Mouse.Exps={X(layerParam){return this.GetMousePositionForLayer(layerParam)[0]},Y(layerParam){return this.GetMousePositionForLayer(layerParam)[1]},AbsoluteX(){return this._mouseXcanvas},AbsoluteY(){return this._mouseYcanvas}}};


'use strict';{const C3=self.C3;C3.Plugins.PlatformInfo=class PlatformInfoPlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.PlatformInfo.Type=class PlatformInfoType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;const DOM_COMPONENT_ID="platform-info";C3.Plugins.PlatformInfo.Instance=class PlatformInfoInstance extends C3.SDKInstanceBase{constructor(inst,properties){super(inst,DOM_COMPONENT_ID);this._screenWidth=0;this._screenHeight=0;this._windowOuterWidth=0;this._windowOuterHeight=0;this._safeAreaInset=[0,0,0,0];this._supportsWakeLock=false;this._isWakeLockActive=false;this.AddDOMMessageHandlers([["window-resize",e=>this._OnWindowResize(e)],["wake-lock-acquired",e=>this._OnWakeLockAcquired(e)],
["wake-lock-error",e=>this._OnWakeLockError(e)],["wake-lock-released",e=>this._OnWakeLockReleased(e)]]);if(navigator.connection)navigator.connection.addEventListener("change",()=>this._OnNetworkChange());this._runtime.AddLoadPromise(this.PostToDOMAsync("get-initial-state").then(data=>{this._screenWidth=data["screenWidth"];this._screenHeight=data["screenHeight"];this._windowOuterWidth=data["windowOuterWidth"];this._windowOuterHeight=data["windowOuterHeight"];this._safeAreaInset=data["safeAreaInset"];
this._supportsWakeLock=data["supportsWakeLock"]}))}Release(){super.Release()}_OnWindowResize(e){this._windowOuterWidth=e["windowOuterWidth"];this._windowOuterHeight=e["windowOuterHeight"];this._safeAreaInset=e["safeAreaInset"]}async _OnNetworkChange(){await this.TriggerAsync(C3.Plugins.PlatformInfo.Cnds.OnNetworkChange)}async _OnWakeLockAcquired(){this._isWakeLockActive=true;await this.TriggerAsync(C3.Plugins.PlatformInfo.Cnds.OnWakeLockAcquired)}async _OnWakeLockError(){this._isWakeLockActive=false;
await this.TriggerAsync(C3.Plugins.PlatformInfo.Cnds.OnWakeLockError)}async _OnWakeLockReleased(){this._isWakeLockActive=false;await this.TriggerAsync(C3.Plugins.PlatformInfo.Cnds.OnWakeLockReleased)}}};


'use strict';{const C3=self.C3;C3.Plugins.PlatformInfo.Cnds={IsOnMobile(){return C3.Platform.IsMobile},IsOnWindows(){return C3.Platform.OS==="Windows"},IsOnMacOS(){return C3.Platform.OS==="Mac OS X"},IsOnLinux(){return C3.Platform.OS==="Linux"},IsOnChromeOS(){return C3.Platform.OS==="Chrome OS"},IsOnAndroid(){return C3.Platform.OS==="Android"},IsOniOS(){return C3.Platform.OS==="iOS"},IsWebExport(){const exportType=this._runtime.GetExportType();return exportType==="html5"||exportType==="scirra-arcade"||
exportType==="preview"||exportType==="instant-games"},IsCordovaExport(){return this._runtime.IsCordova()},IsNWjsExport(){return this._runtime.GetExportType()==="nwjs"},IsWindowsUWPExport(){return this._runtime.GetExportType()==="windows-uwp"},OnNetworkChange(){return true},OnWakeLockAcquired(){return true},OnWakeLockError(){return true},OnWakeLockReleased(){return true},IsWakeLockActive(){return this._isWakeLockActive},IsWakeLockSupported(){return this._supportsWakeLock}}};


'use strict';{const C3=self.C3;C3.Plugins.PlatformInfo.Acts={RequestWakeLock(){if(!this._supportsWakeLock)return;this._PostToDOMMaybeSync("request-wake-lock")},ReleaseWakeLock(){if(!this._supportsWakeLock)return;this._isWakeLockActive=false;this.PostToDOM("release-wake-lock")}}};


'use strict';{const C3=self.C3;C3.Plugins.PlatformInfo.Exps={Renderer(){const renderer=this._runtime.GetWebGLRenderer();let ret="webgl"+renderer.GetWebGLVersionNumber();if(renderer.HasMajorPerformanceCaveat())ret+="-software";return ret},RendererDetail(){return this._runtime.GetWebGLRenderer().GetUnmaskedRenderer()},DevicePixelRatio(){return self.devicePixelRatio},ScreenWidth(){return this._screenWidth},ScreenHeight(){return this._screenHeight},WindowInnerWidth(){return this._runtime.GetCanvasManager().GetLastWidth()},
WindowInnerHeight(){return this._runtime.GetCanvasManager().GetLastHeight()},WindowOuterWidth(){return this._windowOuterWidth},WindowOuterHeight(){return this._windowOuterHeight},CanvasCssWidth(){return this._runtime.GetCanvasManager().GetCssWidth()},CanvasCssHeight(){return this._runtime.GetCanvasManager().GetCssHeight()},CanvasDeviceWidth(){return this._runtime.GetCanvasManager().GetDeviceWidth()},CanvasDeviceHeight(){return this._runtime.GetCanvasManager().GetDeviceHeight()},Downlink(){if(navigator.connection)return navigator.connection["downlink"]||
0;else return 0},DownlinkMax(){if(navigator.connection)return navigator.connection["downlinkMax"]||0;else return 0},ConnectionType(){if(navigator.connection)return navigator.connection["type"]||"unknown";else return"unknown"},ConnectionEffectiveType(){if(navigator.connection)return navigator.connection["effectiveType"]||"unknown";else return"unknown"},ConnectionRTT(){if(navigator.connection)return navigator.connection["rtt"]||0;else return 0},HardwareConcurrency(){return navigator.hardwareConcurrency||
0},DeviceMemory(){return navigator.deviceMemory||0},SafeAreaInsetTop(){return this._safeAreaInset[0]},SafeAreaInsetRight(){return this._safeAreaInset[1]},SafeAreaInsetBottom(){return this._safeAreaInset[2]},SafeAreaInsetLeft(){return this._safeAreaInset[3]}}};


'use strict';{const C3=self.C3;C3.Plugins.AJAX=class AJAXPlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.AJAX.Type=class AJAXType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;C3.Plugins.AJAX.Instance=class AJAXInstance extends C3.SDKInstanceBase{constructor(inst,properties){super(inst);this._lastData="";this._curTag="";this._progress=0;this._timeout=-1;this._nextRequestHeaders=new Map;this._nextReponseBinaryData=null;this._nextRequestOverrideMimeType="";this._nwjsFs=null;this._nwjsPath=null;this._nwjsAppFolder=null;this._isNWjs=this._runtime.GetExportType()==="nwjs";if(this._isNWjs){this._nwjsFs=require("fs");this._nwjsPath=require("path");
const process=self["process"]||nw["process"];this._nwjsAppFolder=this._nwjsPath["dirname"](process["execPath"])+"\\"}}Release(){super.Release()}async _TriggerError(tag,url,err){console.error(`[Construct 3] AJAX request to '${url}' (tag '${tag}') failed: `,err);this._curTag=tag;await this.TriggerAsync(C3.Plugins.AJAX.Cnds.OnAnyError);await this.TriggerAsync(C3.Plugins.AJAX.Cnds.OnError)}async _TriggerComplete(tag){this._curTag=tag;await this.TriggerAsync(C3.Plugins.AJAX.Cnds.OnAnyComplete);await this.TriggerAsync(C3.Plugins.AJAX.Cnds.OnComplete)}async _OnProgress(tag,
e){if(!e["lengthComputable"])return;this._progress=e["loaded"]/e["total"];this._curTag=tag;await this.TriggerAsync(C3.Plugins.AJAX.Cnds.OnProgress)}_OnError(tag,url,err){if(!this._isNWjs){this._TriggerError(tag,url,err);return}const fs=this._nwjsFs;const filePath=this._nwjsAppFolder+url;if(fs["existsSync"](filePath))fs["readFile"](filePath,{"encoding":"utf8"},(err2,data)=>{if(err2)this._TriggerError(tag,url,err2);else{this._lastData=data.replace(/\r\n/g,"\n");this._TriggerComplete(tag)}});else this._TriggerError(tag,
url,err)}async _DoCordovaRequest(tag,file){const assetManager=this._runtime.GetAssetManager();const binaryData=this._nextReponseBinaryData;this._nextReponseBinaryData=null;try{if(binaryData){const buffer=await assetManager.CordovaFetchLocalFileAsArrayBuffer(file);binaryData.SetArrayBufferTransfer(buffer);this._lastData="";this._TriggerComplete(tag)}else{const data=await assetManager.CordovaFetchLocalFileAsText(file);this._lastData=data.replace(/\r\n/g,"\n");this._TriggerComplete(tag)}}catch(err){this._TriggerError(tag,
file,err)}}_DoRequest(tag,url,method,data){return new Promise(resolve=>{const errorFunc=err=>{this._OnError(tag,url,err);resolve()};const binaryData=this._nextReponseBinaryData;this._nextReponseBinaryData=null;try{const request=new XMLHttpRequest;request.onreadystatechange=()=>{if(request.readyState===4){if(binaryData)this._lastData="";else this._lastData=(request.responseText||"").replace(/\r\n/g,"\n");if(request.status>=400)this._TriggerError(tag,url,request.status+request.statusText);else{const hasData=
this._lastData.length||binaryData&&request.response instanceof ArrayBuffer;if((!this._isNWjs||hasData)&&!(!this._isNWjs&&request.status===0&&!hasData)){if(binaryData)binaryData.SetArrayBufferTransfer(request.response);this._TriggerComplete(tag)}}resolve()}};request.onerror=errorFunc;request.ontimeout=errorFunc;request.onabort=errorFunc;request["onprogress"]=e=>this._OnProgress(tag,e);request.open(method,url);if(this._timeout>=0&&typeof request["timeout"]!=="undefined")request["timeout"]=this._timeout;
request.responseType=binaryData?"arraybuffer":"text";if(data&&!this._nextRequestHeaders.has("Content-Type"))if(typeof data!=="string")request["setRequestHeader"]("Content-Type","application/octet-stream");else request["setRequestHeader"]("Content-Type","application/x-www-form-urlencoded");for(const [header,value]of this._nextRequestHeaders)try{request["setRequestHeader"](header,value)}catch(err){console.error(`[Construct 3] AJAX: Failed to set header '${header}: ${value}': `,err)}this._nextRequestHeaders.clear();
if(this._nextRequestOverrideMimeType){try{request["overrideMimeType"](this._nextRequestOverrideMimeType)}catch(err){console.error(`[Construct 3] AJAX: failed to override MIME type: `,err)}this._nextRequestOverrideMimeType=""}if(data)request.send(data);else request.send()}catch(err){errorFunc(err)}})}GetDebuggerProperties(){const prefix="plugins.ajax.debugger";return[{title:prefix+".title",properties:[{name:prefix+".last-data",value:this._lastData}]}]}SaveToJson(){return{"lastData":this._lastData}}LoadFromJson(o){this._lastData=
o["lastData"];this._curTag="";this._progress=0}}};


'use strict';{const C3=self.C3;C3.Plugins.AJAX.Cnds={OnComplete(tag){return C3.equalsNoCase(this._curTag,tag)},OnAnyComplete(){return true},OnError(tag){return C3.equalsNoCase(this._curTag,tag)},OnAnyError(){return true},OnProgress(tag){return C3.equalsNoCase(this._curTag,tag)}}};


'use strict';{const C3=self.C3;C3.Plugins.AJAX.Acts={async Request(tag,url){if(this._runtime.IsCordova()&&C3.IsRelativeURL(url)&&location.protocol==="file:")await this._DoCordovaRequest(tag,url);else if(this._runtime.IsPreview()&&C3.IsRelativeURL(url)){const localurl=this._runtime.GetAssetManager().GetLocalUrlAsBlobUrl(url.toLowerCase());await this._DoRequest(tag,localurl,"GET",null)}else await this._DoRequest(tag,url,"GET",null)},async RequestFile(tag,file){if(this._runtime.IsCordova()&&location.protocol===
"file:")await this._DoCordovaRequest(tag,file);else await this._DoRequest(tag,this._runtime.GetAssetManager().GetLocalUrlAsBlobUrl(file),"GET",null)},async Post(tag,url,data,method){await this._DoRequest(tag,url,method,data)},async PostBinary(tag,url,objectClass,method){if(!objectClass)return;const target=objectClass.GetFirstPicked(this._inst);if(!target)return;const sdkInst=target.GetSdkInstance();const buffer=sdkInst.GetArrayBufferReadOnly();await this._DoRequest(tag,url,method,buffer)},SetTimeout(t){this._timeout=
t*1E3},SetHeader(n,v){this._nextRequestHeaders.set(n,v)},SetResponseBinary(objectClass){if(!objectClass)return;const inst=objectClass.GetFirstPicked(this._inst);if(!inst)return;this._nextReponseBinaryData=inst.GetSdkInstance()},OverrideMIMEType(m){this._nextRequestOverrideMimeType=m}}};


'use strict';{const C3=self.C3;C3.Plugins.AJAX.Exps={LastData(){return this._lastData},Progress(){return this._progress},Tag(){return this._curTag}}};


'use strict';{const C3=self.C3;C3.Plugins.Audio=class AudioPlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.Audio.Type=class AudioType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}GetScriptInterfaceClass(){return self.IAudioObjectType}};function GetAudioDOMInterface(){if(self["C3Audio_DOMInterface"])return self["C3Audio_DOMInterface"];else throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode");}self.IAudioObjectType=class IAudioObjectType extends self.IObjectClass{constructor(objectType){super(objectType)}get audioContext(){return GetAudioDOMInterface().GetAudioContext()}get destinationNode(){return GetAudioDOMInterface().GetDestinationNode()}}};


'use strict';{const C3=self.C3;const DOM_COMPONENT_ID="audio";const LATENCY_HINTS=["interactive","balanced","playback"];C3.Plugins.Audio.Instance=class AudioInstance extends C3.SDKInstanceBase{constructor(inst,properties){super(inst,DOM_COMPONENT_ID);this._nextPlayTime=0;this._triggerTag="";this._timeScaleMode=0;this._saveLoadMode=0;this._playInBackground=false;this._panningModel=1;this._distanceModel=1;this._listenerX=this._runtime.GetViewportWidth()/2;this._listenerY=this._runtime.GetViewportHeight()/
2;this._listenerZ=-600;this._referenceDistance=600;this._maxDistance=1E4;this._rolloffFactor=1;this._listenerInst=null;this._loadListenerUid=-1;this._masterVolume=1;this._isSilent=false;this._sampleRate=0;this._effectCount=new Map;this._preloadTotal=0;this._preloadCount=0;this._remoteUrls=new Map;let latencyHint="interactive";if(properties){this._timeScaleMode=properties[0];this._saveLoadMode=properties[1];this._playInBackground=properties[2];latencyHint=LATENCY_HINTS[properties[3]];this._panningModel=
properties[4];this._distanceModel=properties[5];this._listenerZ=-properties[6];this._referenceDistance=properties[7];this._maxDistance=properties[8];this._rolloffFactor=properties[9]}this._lastAIState=[];this._lastFxState=[];this._lastAnalysersData=[];this.AddDOMMessageHandlers([["state",e=>this._OnUpdateState(e)],["fxstate",e=>this._OnUpdateFxState(e)],["trigger",e=>this._OnTrigger(e)]]);const rt=this.GetRuntime().Dispatcher();this._disposables=new C3.CompositeDisposable(C3.Disposable.From(rt,"instancedestroy",
e=>this._OnInstanceDestroyed(e.instance)),C3.Disposable.From(rt,"afterload",()=>this._OnAfterLoad()),C3.Disposable.From(rt,"suspend",()=>this._OnSuspend()),C3.Disposable.From(rt,"resume",()=>this._OnResume()));this._runtime.AddLoadPromise(this.PostToDOMAsync("create-audio-context",{"preloadList":this._runtime.GetAssetManager().GetAudioToPreload().map(o=>({"originalUrl":o.originalUrl,"url":o.url,"type":o.type,"fileSize":o.fileSize})),"isiOSCordova":this._runtime.IsiOSCordova(),"timeScaleMode":this._timeScaleMode,
"latencyHint":latencyHint,"panningModel":this._panningModel,"distanceModel":this._distanceModel,"refDistance":this._referenceDistance,"maxDistance":this._maxDistance,"rolloffFactor":this._rolloffFactor,"listenerPos":[this._listenerX,this._listenerY,this._listenerZ]}).then(info=>{this._sampleRate=info["sampleRate"]}));this._StartTicking()}Release(){this._listenerInst=null;super.Release()}_OnInstanceDestroyed(inst){if(this._listenerInst===inst)this._listenerInst=null}DbToLinearNoCap(x){return Math.pow(10,
x/20)}DbToLinear(x){const v=this.DbToLinearNoCap(x);if(!isFinite(v))return 0;return Math.max(Math.min(v,1),0)}LinearToDbNoCap(x){return Math.log(x)/Math.log(10)*20}LinearToDb(x){return this.LinearToDbNoCap(Math.max(Math.min(x,1),0))}_OnSuspend(){if(this._playInBackground)return;this.PostToDOM("set-suspended",{"isSuspended":true})}_OnResume(){if(this._playInBackground)return;this.PostToDOM("set-suspended",{"isSuspended":false})}_OnUpdateState(e){const tickCount=e["tickCount"];const preservePlaceholders=
this._lastAIState.filter(ai=>ai.hasOwnProperty("placeholder")&&(ai["placeholder"]>tickCount||ai["placeholder"]===-1));this._lastAIState=e["audioInstances"];this._lastAnalysersData=e["analysers"];if(preservePlaceholders.length>0)C3.appendArray(this._lastAIState,preservePlaceholders)}_OnUpdateFxState(e){this._lastFxState=e["fxstate"]}_GetFirstAudioStateByTag(tag){for(const a of this._lastAIState)if(C3.equalsNoCase(a["tag"],tag))return a;return null}_IsTagPlaying(tag){return this._lastAIState.some(ai=>
C3.equalsNoCase(tag,ai["tag"])&&ai["isPlaying"])}_MaybeMarkAsPlaying(tag,isMusic,isLooping,vol){if(this._IsTagPlaying(tag))return null;const state={"tag":tag,"duration":0,"volume":vol,"isPlaying":true,"playbackTime":0,"playbackRate":1,"uid":-1,"bufferOriginalUrl":"","bufferUrl":"","bufferType":"","isMusic":isMusic,"isLooping":isLooping,"isMuted":false,"resumePosition":0,"pan":null,"placeholder":-1};this._lastAIState.push(state);return state}async _OnTrigger(e){const type=e["type"];this._triggerTag=
e["tag"];const aiId=e["aiid"];if(type==="ended"){for(const aiState of this._lastAIState)if(aiState["aiid"]===aiId){aiState["isPlaying"]=false;break}await this.TriggerAsync(C3.Plugins.Audio.Cnds.OnEnded)}else if(type==="fade-ended")await this.TriggerAsync(C3.Plugins.Audio.Cnds.OnFadeEnded)}Tick(){const o={"timeScale":this._runtime.GetTimeScale(),"gameTime":this._runtime.GetGameTime(),"instPans":this.GetInstancePans(),"tickCount":this._runtime.GetTickCountNoSave()};if(this._listenerInst){const wi=this._listenerInst.GetWorldInfo();
this._listenerX=wi.GetX();this._listenerY=wi.GetY();o["listenerPos"]=[this._listenerX,this._listenerY,this._listenerZ]}this.PostToDOM("tick",o)}rotatePtAround(px,py,a,ox,oy){if(a===0)return[px,py];const sin_a=Math.sin(a);const cos_a=Math.cos(a);px-=ox;py-=oy;const left_sin_a=px*sin_a;const top_sin_a=py*sin_a;const left_cos_a=px*cos_a;const top_cos_a=py*cos_a;px=left_cos_a-top_sin_a;py=top_cos_a+left_sin_a;px+=ox;py+=oy;return[px,py]}GetInstancePans(){return this._lastAIState.filter(ai=>ai["uid"]!==
-1).map(ai=>this._runtime.GetInstanceByUID(ai["uid"])).filter(inst=>inst).map(inst=>{const wi=inst.GetWorldInfo();const layerAngle=wi.GetLayer().GetAngle();const [x,y]=this.rotatePtAround(wi.GetX(),wi.GetY(),-layerAngle,this._listenerX,this._listenerY);return{"uid":inst.GetUID(),"x":x,"y":y,"angle":wi.GetAngle()-layerAngle}})}GetAnalyserData(tag,index){for(const o of this._lastAnalysersData)if(o.index===index&&C3.equalsNoCase(o.tag,tag))return o;return null}_IncrementEffectCount(tag){this._effectCount.set(tag,
(this._effectCount.get(tag)||0)+1)}_ShouldSave(ai){if(ai.hasOwnProperty("placeholder"))return false;if(this._saveLoadMode===3)return false;else if(ai["isMusic"]&&this._saveLoadMode===1)return false;else if(!ai["isMusic"]&&this._saveLoadMode===2)return false;else return true}SaveToJson(){return{"isSilent":this._isSilent,"masterVolume":this._masterVolume,"listenerZ":this._listenerZ,"listenerUid":this._listenerInst?this._listenerInst.GetUID():-1,"remoteUrls":[...this._remoteUrls.entries()],"playing":this._lastAIState.filter(ai=>
this._ShouldSave(ai)),"effects":this._lastFxState,"analysers":this._lastAnalysersData}}LoadFromJson(o){this._isSilent=o["isSilent"];this._masterVolume=o["masterVolume"];this._listenerZ=o["listenerZ"];this._listenerInst=null;this._loadListenerUid=o["listenerUid"];this._remoteUrls.clear();if(o["remoteUrls"])for(const [k,v]of o["remoteUrls"])this._remoteUrls.set(k,v);this._lastAIState=o["playing"];this._lastFxState=o["effects"];this._lastAnalysersData=o["analysers"]}_OnAfterLoad(){if(this._loadListenerUid!==
-1){this._listenerInst=this._runtime.GetInstanceByUID(this._loadListenerUid);this._loadListenerUid=-1;if(this._listenerInst){const wi=this._listenerInst.GetWorldInfo();this._listenerX=wi.GetX();this._listenerY=wi.GetY()}}for(const ai of this._lastAIState){const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(ai["bufferOriginalUrl"]);if(info){ai["bufferUrl"]=info.url;ai["bufferType"]=info.type}else ai["bufferUrl"]=null}for(const fxChainData of Object.values(this._lastFxState))for(const fxData of fxChainData)if(fxData.hasOwnProperty("bufferOriginalUrl")){const info=
this._runtime.GetAssetManager().GetProjectAudioFileUrl(fxData["bufferOriginalUrl"]);if(info){fxData["bufferUrl"]=info.url;fxData["bufferType"]=info.type}}this.PostToDOM("load-state",{"saveLoadMode":this._saveLoadMode,"timeScale":this._runtime.GetTimeScale(),"gameTime":this._runtime.GetGameTime(),"listenerPos":[this._listenerX,this._listenerY,this._listenerZ],"isSilent":this._isSilent,"masterVolume":this._masterVolume,"playing":this._lastAIState.filter(ai=>ai["bufferUrl"]!==null),"effects":this._lastFxState})}GetDebuggerProperties(){const fxProps=
[];for(const [tag,fxChainData]of Object.entries(this._lastFxState))fxProps.push({name:"$"+tag,value:fxChainData.map(d=>d["type"]).join(", ")});const prefix="plugins.audio.debugger";return[{title:prefix+".tag-effects",properties:fxProps},{title:prefix+".currently-playing",properties:[{name:prefix+".currently-playing-count",value:this._lastAIState.length},...this._lastAIState.map((s,index)=>({name:"$#"+index,value:`${s["bufferOriginalUrl"]} ("${s["tag"]}") ${Math.round(s["playbackTime"]*10)/10} / ${Math.round(s["duration"]*
10)/10}`}))]}]}}};


'use strict';{const C3=self.C3;C3.Plugins.Audio.Cnds={OnEnded(tag){return C3.equalsNoCase(this._triggerTag,tag)},OnFadeEnded(tag){return C3.equalsNoCase(this._triggerTag,tag)},PreloadsComplete(){return this._preloadCount===this._preloadTotal},AdvancedAudioSupported(){return true},IsSilent(){return this._isSilent},IsAnyPlaying(){for(const ai of this._lastAIState)if(ai["isPlaying"])return true;return false},IsTagPlaying(tag){return this._IsTagPlaying(tag)}}};


'use strict';{const C3=self.C3;const FILTER_TYPES=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];C3.Plugins.Audio.Acts={async Play(file,looping,vol,tag){if(this._isSilent)return;const isMusic=file[1];const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(file[0]);if(!info)return;const nextPlayTime=this._nextPlayTime;this._nextPlayTime=0;const state=this._MaybeMarkAsPlaying(tag.toLowerCase(),isMusic,looping!==0,this.DbToLinear(vol));try{await this.PostToDOMAsync("play",
{"originalUrl":file[0],"url":info.url,"type":info.type,"isMusic":isMusic,"tag":tag.toLowerCase(),"isLooping":looping!==0,"vol":this.DbToLinear(vol),"pos":0,"off":nextPlayTime,"trueClock":!!self["C3_GetAudioContextCurrentTime"]})}finally{if(state)state["placeholder"]=this._runtime.GetTickCountNoSave()}},async PlayAtPosition(file,looping,vol,x,y,angle,innerAngle,outerAngle,outerGain,tag){if(this._isSilent)return;const isMusic=file[1];const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(file[0]);
if(!info)return;const nextPlayTime=this._nextPlayTime;this._nextPlayTime=0;const state=this._MaybeMarkAsPlaying(tag.toLowerCase(),isMusic,looping!==0,this.DbToLinear(vol));try{await this.PostToDOMAsync("play",{"originalUrl":file[0],"url":info.url,"type":info.type,"isMusic":isMusic,"tag":tag.toLowerCase(),"isLooping":looping!==0,"vol":this.DbToLinear(vol),"pos":0,"off":nextPlayTime,"trueClock":!!self["C3_GetAudioContextCurrentTime"],"panning":{"x":x,"y":y,"angle":C3.toRadians(angle),"innerAngle":C3.toRadians(innerAngle),
"outerAngle":C3.toRadians(outerAngle),"outerGain":this.DbToLinear(outerGain)}})}finally{if(state)state["placeholder"]=this._runtime.GetTickCountNoSave()}},async PlayAtObject(file,looping,vol,objectClass,innerAngle,outerAngle,outerGain,tag){if(this._isSilent)return;if(!objectClass)return;const inst=objectClass.GetFirstPicked();if(!inst||!inst.GetWorldInfo())return;const wi=inst.GetWorldInfo();const layerAngle=wi.GetLayer().GetAngle();const [x,y]=this.rotatePtAround(wi.GetX(),wi.GetY(),-layerAngle,
this._listenerX,this._listenerY);const isMusic=file[1];const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(file[0]);if(!info)return;const nextPlayTime=this._nextPlayTime;this._nextPlayTime=0;const state=this._MaybeMarkAsPlaying(tag.toLowerCase(),isMusic,looping!==0,this.DbToLinear(vol));try{await this.PostToDOMAsync("play",{"originalUrl":file[0],"url":info.url,"type":info.type,"isMusic":isMusic,"tag":tag.toLowerCase(),"isLooping":looping!==0,"vol":this.DbToLinear(vol),"pos":0,"off":nextPlayTime,
"trueClock":!!self["C3_GetAudioContextCurrentTime"],"panning":{"x":x,"y":y,"angle":wi.GetAngle()-layerAngle,"innerAngle":C3.toRadians(innerAngle),"outerAngle":C3.toRadians(outerAngle),"outerGain":this.DbToLinear(outerGain),"uid":inst.GetUID()}})}finally{if(state)state["placeholder"]=this._runtime.GetTickCountNoSave()}},async PlayByName(folder,filename,looping,vol,tag){if(this._isSilent)return;const isMusic=folder===1;const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(filename)||this._remoteUrls.get(filename.toLowerCase());
if(!info)return;const nextPlayTime=this._nextPlayTime;this._nextPlayTime=0;const state=this._MaybeMarkAsPlaying(tag.toLowerCase(),isMusic,looping!==0,this.DbToLinear(vol));try{await this.PostToDOMAsync("play",{"originalUrl":filename,"url":info.url,"type":info.type,"isMusic":isMusic,"tag":tag.toLowerCase(),"isLooping":looping!==0,"vol":this.DbToLinear(vol),"pos":0,"off":nextPlayTime,"trueClock":!!self["C3_GetAudioContextCurrentTime"]})}finally{if(state)state["placeholder"]=this._runtime.GetTickCountNoSave()}},
async PlayAtPositionByName(folder,filename,looping,vol,x,y,angle,innerAngle,outerAngle,outerGain,tag){if(this._isSilent)return;const isMusic=folder===1;const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(filename)||this._remoteUrls.get(filename.toLowerCase());if(!info)return;const nextPlayTime=this._nextPlayTime;this._nextPlayTime=0;const state=this._MaybeMarkAsPlaying(tag.toLowerCase(),isMusic,looping!==0,this.DbToLinear(vol));try{await this.PostToDOMAsync("play",{"originalUrl":filename,
"url":info.url,"type":info.type,"isMusic":isMusic,"tag":tag.toLowerCase(),"isLooping":looping!==0,"vol":this.DbToLinear(vol),"pos":0,"off":nextPlayTime,"trueClock":!!self["C3_GetAudioContextCurrentTime"],"panning":{"x":x,"y":y,"angle":C3.toRadians(angle),"innerAngle":C3.toRadians(innerAngle),"outerAngle":C3.toRadians(outerAngle),"outerGain":this.DbToLinear(outerGain)}})}finally{if(state)state["placeholder"]=this._runtime.GetTickCountNoSave()}},async PlayAtObjectByName(folder,filename,looping,vol,
objectClass,innerAngle,outerAngle,outerGain,tag){if(this._isSilent)return;if(this._isSilent)return;if(!objectClass)return;const inst=objectClass.GetFirstPicked();if(!inst||!inst.GetWorldInfo())return;const wi=inst.GetWorldInfo();const layerAngle=wi.GetLayer().GetAngle();const [x,y]=this.rotatePtAround(wi.GetX(),wi.GetY(),-layerAngle,this._listenerX,this._listenerY);const isMusic=folder===1;const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(filename)||this._remoteUrls.get(filename.toLowerCase());
if(!info)return;const nextPlayTime=this._nextPlayTime;this._nextPlayTime=0;const state=this._MaybeMarkAsPlaying(tag.toLowerCase(),isMusic,looping!==0,this.DbToLinear(vol));try{await this.PostToDOMAsync("play",{"originalUrl":filename,"url":info.url,"type":info.type,"isMusic":isMusic,"tag":tag.toLowerCase(),"isLooping":looping!==0,"vol":this.DbToLinear(vol),"pos":0,"off":nextPlayTime,"trueClock":!!self["C3_GetAudioContextCurrentTime"],"panning":{"x":x,"y":y,"angle":wi.GetAngle()-layerAngle,"innerAngle":C3.toRadians(innerAngle),
"outerAngle":C3.toRadians(outerAngle),"outerGain":this.DbToLinear(outerGain),"uid":inst.GetUID()}})}finally{if(state)state["placeholder"]=this._runtime.GetTickCountNoSave()}},SetLooping(tag,looping){this.PostToDOM("set-looping",{"tag":tag.toLowerCase(),"isLooping":looping===0})},SetMuted(tag,muted){this.PostToDOM("set-muted",{"tag":tag.toLowerCase(),"isMuted":muted===0})},SetVolume(tag,vol){this.PostToDOM("set-volume",{"tag":tag.toLowerCase(),"vol":this.DbToLinear(vol)})},FadeVolume(tag,vol,duration,
ending){this.PostToDOM("fade-volume",{"tag":tag.toLowerCase(),"vol":this.DbToLinear(vol),"duration":duration,"stopOnEnd":ending===0})},async Preload(file){const isMusic=file[1];const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(file[0]);if(!info)return;this._preloadTotal++;await this.PostToDOMAsync("preload",{"originalUrl":file[0],"url":info.url,"type":info.type,"isMusic":isMusic});this._preloadCount++},async PreloadByName(folder,filename){const isMusic=folder===1;const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(filename)||
this._remoteUrls.get(filename.toLowerCase());if(!info)return;this._preloadTotal++;await this.PostToDOMAsync("preload",{"originalUrl":filename,"url":info.url,"type":info.type,"isMusic":isMusic});this._preloadCount++},SetPlaybackRate(tag,rate){this.PostToDOM("set-playback-rate",{"tag":tag.toLowerCase(),"rate":Math.max(rate,0)})},Stop(tag){this.PostToDOM("stop",{"tag":tag.toLowerCase()})},StopAll(){this.PostToDOM("stop-all")},SetPaused(tag,state){this.PostToDOM("set-paused",{"tag":tag.toLowerCase(),
"paused":state===0})},Seek(tag,pos){this.PostToDOM("seek",{"tag":tag.toLowerCase(),"pos":pos})},SetSilent(s){if(s===2)s=this._isSilent?1:0;s=s===0;if(this._isSilent===s)return;this._isSilent=s;this.PostToDOM("set-silent",{"isSilent":s})},SetMasterVolume(vol){const mv=this.DbToLinear(vol);if(this._masterVolume===mv)return;this._masterVolume=mv;this.PostToDOM("set-master-volume",{"vol":mv})},AddFilterEffect(tag,type,freq,detune,q,gain,mix){tag=tag.toLowerCase();const typeStr=FILTER_TYPES[type];this._IncrementEffectCount(tag);
this.PostToDOM("add-effect",{"type":"filter","tag":tag,"params":[typeStr,freq,detune,q,gain,C3.clamp(mix/100,0,1)]})},AddDelayEffect(tag,delay,gain,mix){tag=tag.toLowerCase();this._IncrementEffectCount(tag);this.PostToDOM("add-effect",{"type":"delay","tag":tag,"params":[delay,this.DbToLinear(gain),C3.clamp(mix/100,0,1)]})},AddFlangerEffect(tag,delay,modulation,freq,feedback,mix){tag=tag.toLowerCase();this._IncrementEffectCount(tag);this.PostToDOM("add-effect",{"type":"flanger","tag":tag,"params":[delay/
1E3,modulation/1E3,freq,feedback/100,C3.clamp(mix/100,0,1)]})},AddPhaserEffect(tag,freq,detune,q,mod,modfreq,mix){tag=tag.toLowerCase();this._IncrementEffectCount(tag);this.PostToDOM("add-effect",{"type":"phaser","tag":tag,"params":[freq,detune,q,mod,modfreq,C3.clamp(mix/100,0,1)]})},AddConvolutionEffect(tag,file,norm,mix){tag=tag.toLowerCase();const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(file[0]);if(!info)return;this._IncrementEffectCount(tag);this.PostToDOM("add-effect",{"type":"convolution",
"tag":tag,"bufferOriginalUrl":file[0],"bufferUrl":info.url,"bufferType":info.type,"params":[norm===0,C3.clamp(mix/100,0,1)]})},AddGainEffect(tag,g){tag=tag.toLowerCase();this._IncrementEffectCount(tag);this.PostToDOM("add-effect",{"type":"gain","tag":tag,"params":[this.DbToLinear(g)]})},AddMuteEffect(tag){tag=tag.toLowerCase();this._IncrementEffectCount(tag);this.PostToDOM("add-effect",{"type":"gain","tag":tag,"params":[0]})},AddTremoloEffect(tag,freq,mix){tag=tag.toLowerCase();this._IncrementEffectCount(tag);
this.PostToDOM("add-effect",{"type":"tremolo","tag":tag,"params":[freq,C3.clamp(mix/100,0,1)]})},AddRingModEffect(tag,freq,mix){tag=tag.toLowerCase();this._IncrementEffectCount(tag);this.PostToDOM("add-effect",{"type":"ringmod","tag":tag,"params":[freq,C3.clamp(mix/100,0,1)]})},AddDistortionEffect(tag,threshold,headroom,drive,makeupgain,mix){tag=tag.toLowerCase();this._IncrementEffectCount(tag);this.PostToDOM("add-effect",{"type":"distortion","tag":tag,"params":[this.DbToLinearNoCap(threshold),this.DbToLinearNoCap(headroom),
drive,this.DbToLinearNoCap(makeupgain),C3.clamp(mix/100,0,1)]})},AddCompressorEffect(tag,threshold,knee,ratio,attack,release){tag=tag.toLowerCase();this._IncrementEffectCount(tag);this.PostToDOM("add-effect",{"type":"compressor","tag":tag,"params":[threshold,knee,ratio,attack/1E3,release/1E3]})},AddAnalyserEffect(tag,fftSize,smoothing){tag=tag.toLowerCase();this._IncrementEffectCount(tag);this.PostToDOM("add-effect",{"type":"analyser","tag":tag,"params":[fftSize,smoothing]})},RemoveEffects(tag){tag=
tag.toLowerCase();this._effectCount.set(tag,0);this.PostToDOM("remove-effects",{"tag":tag});this._lastFxState={}},SetEffectParameter(tag,index,param,value,ramp,time){this.PostToDOM("set-effect-param",{"tag":tag.toLowerCase(),"index":Math.floor(index),"param":param,"value":value,"ramp":ramp,"time":time})},SetListenerObject(objectClass){if(!objectClass)return;const inst=objectClass.GetFirstPicked();if(!inst||!inst.GetWorldInfo())return;this._listenerInst=inst},SetListenerZ(z){this._listenerZ=z},ScheduleNextPlay(t){this._nextPlayTime=
Math.max(t,0)},UnloadAudio(file){const isMusic=file[1];const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(file[0]);if(!info)return;this.PostToDOM("unload",{"url":info.url,"type":info.type,"isMusic":isMusic})},UnloadAudioByName(folder,filename){const isMusic=folder===1;const info=this._runtime.GetAssetManager().GetProjectAudioFileUrl(filename)||this._remoteUrls.get(filename.toLowerCase());if(!info)return;this.PostToDOM("unload",{"url":info.url,"type":info.type,"isMusic":isMusic})},UnloadAll(){this.PostToDOM("unload-all")},
AddRemoteURL(url,type,name){this._remoteUrls.set(name.toLowerCase(),{url,type})}}};


'use strict';{const C3=self.C3;C3.Plugins.Audio.Exps={Duration(tag){const a=this._GetFirstAudioStateByTag(tag);return a?a["duration"]:0},PlaybackTime(tag){const a=this._GetFirstAudioStateByTag(tag);return a?a["playbackTime"]:0},PlaybackRate(tag){const a=this._GetFirstAudioStateByTag(tag);return a?a["playbackRate"]:0},Volume(tag){const a=this._GetFirstAudioStateByTag(tag);return a?this.LinearToDb(a["volume"]):0},MasterVolume(){return this.LinearToDb(this._masterVolume)},EffectCount(tag){return this._effectCount.get(tag.toLowerCase())||
0},AnalyserFreqBinCount(tag,index){const o=this.GetAnalyserData(tag,Math.floor(index));return o?o["binCount"]:0},AnalyserFreqBinAt(tag,index,bin){const o=this.GetAnalyserData(tag,Math.floor(index));if(!o)return 0;bin=Math.floor(bin);if(bin<0||bin>=o["binCount"])return 0;return o["freqBins"][bin]},AnalyserPeakLevel(tag,index){const o=this.GetAnalyserData(tag,Math.floor(index));return o?o["peak"]:0},AnalyserRMSLevel(tag,index){const o=this.GetAnalyserData(tag,Math.floor(index));return o?o["rms"]:0},
SampleRate(){return this._sampleRate},CurrentTime(){if(self["C3_GetAudioContextCurrentTime"])return self["C3_GetAudioContextCurrentTime"]();else return performance.now()/1E3}}};


'use strict';{const C3=self.C3;C3.Plugins.Browser=class BrowserPlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.Browser.Type=class BrowserType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;const DOM_COMPONENT_ID="browser";C3.Plugins.Browser.Instance=class BrowserInstance extends C3.SDKInstanceBase{constructor(inst,properties){super(inst,DOM_COMPONENT_ID);this._initLocationStr="";this._isOnline=false;this._referrer="";this._docTitle="";this._isCookieEnabled=false;this._screenWidth=0;this._screenHeight=0;this._windowOuterWidth=0;this._windowOuterHeight=0;this._isScirraArcade=false;this.AddDOMMessageHandlers([["online-state",e=>this._OnOnlineStateChanged(e)],
["backbutton",()=>this._OnBackButton()],["sw-message",e=>this._OnSWMessage(e)],["hashchange",e=>this._OnHashChange(e)]]);const rt=this.GetRuntime().Dispatcher();this._disposables=new C3.CompositeDisposable(C3.Disposable.From(rt,"afterfirstlayoutstart",()=>this._OnAfterFirstLayoutStart()),C3.Disposable.From(rt,"window-resize",()=>this._OnWindowResize()),C3.Disposable.From(rt,"suspend",()=>this._OnSuspend()),C3.Disposable.From(rt,"resume",()=>this._OnResume()));this._runtime.AddLoadPromise(this.PostToDOMAsync("get-initial-state",
{"exportType":this._runtime.GetExportType()}).then(data=>{this._initLocationStr=data["location"];this._isOnline=data["isOnline"];this._referrer=data["referrer"];this._docTitle=data["title"];this._isCookieEnabled=data["isCookieEnabled"];this._screenWidth=data["screenWidth"];this._screenHeight=data["screenHeight"];this._windowOuterWidth=data["windowOuterWidth"];this._windowOuterHeight=data["windowOuterHeight"];this._isScirraArcade=data["isScirraArcade"]}))}Release(){super.Release()}_OnAfterFirstLayoutStart(){this.PostToDOM("ready-for-sw-messages")}async _OnOnlineStateChanged(e){const isOnline=
!!e["isOnline"];if(this._isOnline===isOnline)return;this._isOnline=isOnline;if(this._isOnline)await this.TriggerAsync(C3.Plugins.Browser.Cnds.OnOnline);else await this.TriggerAsync(C3.Plugins.Browser.Cnds.OnOffline)}async _OnWindowResize(){await this.TriggerAsync(C3.Plugins.Browser.Cnds.OnResize)}_OnSuspend(){this.Trigger(C3.Plugins.Browser.Cnds.OnPageHidden)}_OnResume(){this.Trigger(C3.Plugins.Browser.Cnds.OnPageVisible)}async _OnBackButton(){await this.TriggerAsync(C3.Plugins.Browser.Cnds.OnBackButton)}_OnSWMessage(e){const messageType=
e["type"];if(messageType==="downloading-update")this.Trigger(C3.Plugins.Browser.Cnds.OnUpdateFound);else if(messageType==="update-ready"||messageType==="update-pending")this.Trigger(C3.Plugins.Browser.Cnds.OnUpdateReady);else if(messageType==="offline-ready")this.Trigger(C3.Plugins.Browser.Cnds.OnOfflineReady)}_OnHashChange(e){this._initLocationStr=e["location"];this.Trigger(C3.Plugins.Browser.Cnds.OnHashChange)}GetDebuggerProperties(){const prefix="plugins.browser.debugger";return[{title:"plugins.browser.name",
properties:[{name:prefix+".user-agent",value:navigator.userAgent},{name:prefix+".is-online",value:this._isOnline},{name:prefix+".is-fullscreen",value:this._runtime.GetCanvasManager().IsDocumentFullscreen()}]}]}}};


'use strict';{const C3=self.C3;C3.Plugins.Browser.Cnds={IsOnline(){return this._isOnline},OnOnline(){return true},OnOffline(){return true},OnResize(){return true},CookiesEnabled(){return this._isCookieEnabled},IsFullscreen(){return this._runtime.GetCanvasManager().IsDocumentFullscreen()},OnBackButton(){return true},IsPortraitLandscape(p){const lastInnerWidth=this._runtime.GetCanvasManager().GetLastWidth();const lastInnerHeight=this._runtime.GetCanvasManager().GetLastHeight();const current=lastInnerWidth<=
lastInnerHeight?0:1;return current===p},OnUpdateFound(){return true},OnUpdateReady(){return true},OnOfflineReady(){return true},OnHashChange(){return true},PageVisible(){return!this._runtime.IsSuspended()},OnPageHidden(){return true},OnPageVisible(){return true},HasJava(){return false},IsDownloadingUpdate(){return false},OnMenuButton(){return false},OnSearchButton(){return false},IsMetered(){return false},IsCharging(){return true},SupportsFullscreen(){return true}}};


'use strict';{const C3=self.C3;const ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.Plugins.Browser.Acts={Alert(message){this.PostToDOM("alert",{"message":message.toString()})},Close(){if(this._isScirraArcade)return;if(this._runtime.IsDebug())self.C3Debugger.CloseWindow();else this.PostToDOM("close")},Focus(){this.PostToDOM("set-focus",{"isFocus":true})},Blur(){this.PostToDOM("set-focus",{"isFocus":false})},GoBack(){if(this._isScirraArcade)return;
this.PostToDOM("navigate",{"type":"back"})},GoForward(){if(this._isScirraArcade)return;this.PostToDOM("navigate",{"type":"forward"})},GoHome(){if(this._isScirraArcade)return;this.PostToDOM("navigate",{"type":"home"})},Reload(){if(this._isScirraArcade)return;if(this._runtime.IsDebug())this._runtime.PostToDebugger({"type":"reload"});else this.PostToDOM("navigate",{"type":"reload"})},GoToURL(url,target){this._PostToDOMMaybeSync("navigate",{"type":"url","url":url,"target":target,"exportType":this._runtime.GetExportType()})},
GoToURLWindow(url,tag){this._PostToDOMMaybeSync("navigate",{"type":"new-window","url":url,"tag":tag,"exportType":this._runtime.GetExportType()})},RequestFullScreen(mode,navUi){if(mode>=2)mode+=1;if(mode===6)mode=2;if(mode===1)mode=0;const modeStr=C3.CanvasManager._FullscreenModeNumberToString(mode);this._runtime.GetCanvasManager().SetDocumentFullscreenMode(modeStr);this._PostToDOMMaybeSync("request-fullscreen",{"navUI":navUi})},CancelFullScreen(){this._PostToDOMMaybeSync("exit-fullscreen")},Vibrate(pattern){const arr=
pattern.split(",");for(let i=0,len=arr.length;i<len;++i)arr[i]=parseInt(arr[i],10);this._PostToDOMMaybeSync("vibrate",{"pattern":arr})},async InvokeDownload(url,filename){if(!filename)return;const urlToDownload=await this._runtime.GetAssetManager().GetProjectFileUrl(url);this._runtime.InvokeDownload(urlToDownload,filename)},InvokeDownloadString(str,mimeType,filename){if(!filename)return;const dataUri=`data:${mimeType},${encodeURIComponent(str)}`;this._runtime.InvokeDownload(dataUri,filename)},ConsoleLog(type,
msg){msg=msg.toString();if(type===0)console.log(msg);else if(type===1)console.warn(msg);else if(type===2)console.error(msg)},ConsoleGroup(name){console.group(name)},ConsoleGroupEnd(){console.groupEnd()},ExecJs(jsStr){try{eval(jsStr)}catch(err){console.error("Error executing JavaScript: ",err)}},LockOrientation(o){o=Math.floor(o);if(o<0||o>=ORIENTATIONS.length)return;const orientation=ORIENTATIONS[o];this._PostToDOMMaybeSync("lock-orientation",{"orientation":orientation})},UnlockOrientation(){this._PostToDOMMaybeSync("unlock-orientation")},
LoadStyleSheet(url){this._runtime.GetAssetManager().LoadStyleSheet(url)},SetHash(h){this.PostToDOM("set-hash",{"hash":h})}}};


'use strict';{const C3=self.C3;C3.Plugins.Browser.Exps={URL(){if(this._runtime.IsInWorker())return this._initLocationStr;else return location.toString()},Protocol(){if(this._runtime.IsInWorker())return(new URL(this._initLocationStr)).protocol;else return location.protocol},Domain(){if(this._runtime.IsInWorker())return(new URL(this._initLocationStr)).hostname;else return location.hostname},Port(){if(this._runtime.IsInWorker())return(new URL(this._initLocationStr)).port;else return location.port},PathName(){if(this._runtime.IsInWorker())return(new URL(this._initLocationStr)).pathname;
else return location.pathname},Hash(){if(this._runtime.IsInWorker())return(new URL(this._initLocationStr)).hash;else return location.hash},QueryString(){if(this._runtime.IsInWorker())return(new URL(this._initLocationStr)).search;else return location.search},QueryParam(param){const search=this._runtime.IsInWorker()?(new URL(this._initLocationStr)).search:location.search;const match=RegExp("[?&]"+param+"=([^&]*)").exec(search);if(match)return decodeURIComponent(match[1].replace(/\+/g," "));else return""},
Referrer(){return this._referrer},Title(){return this._docTitle},Language(){return navigator.language},Platform(){return navigator.platform},UserAgent(){return navigator.userAgent},ExecJS(jsStr){let result=0;try{result=eval(jsStr)}catch(err){console.error("Error executing JavaScript: ",err)}if(typeof result==="number"||typeof result==="string")return result;if(typeof result==="boolean")return result?1:0;else return 0},Name(){return navigator.appName},Version(){return navigator.appVersion},Product(){return navigator.product},
Vendor(){return navigator.vendor},BatteryLevel(){return 1},BatteryTimeLeft(){return Infinity},Bandwidth(){const connection=navigator["connection"];if(connection)return connection["downlink"]||connection["downlinkMax"]||connection["bandwidth"]||Infinity;else return Infinity},ConnectionType(){const connection=navigator["connection"];if(connection)return connection["type"]||"unknown";else return"unknown"},DevicePixelRatio(){return self.devicePixelRatio},ScreenWidth(){return this._screenWidth},ScreenHeight(){return this._screenHeight},
WindowInnerWidth(){return this._runtime.GetCanvasManager().GetLastWidth()},WindowInnerHeight(){return this._runtime.GetCanvasManager().GetLastHeight()},WindowOuterWidth(){return this._windowOuterWidth},WindowOuterHeight(){return this._windowOuterWidth}}};


'use strict';{const C3=self.C3;C3.Plugins.Keyboard=class KeyboardPlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.Keyboard.Type=class KeyboardType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}GetScriptInterfaceClass(){return self.IKeyboardObjectType}};let keyboardObjectType=null;function GetKeyboardSdkInstance(){return keyboardObjectType.GetSingleGlobalInstance().GetSdkInstance()}self.IKeyboardObjectType=class IKeyboardObjectType extends self.IObjectClass{constructor(objectType){super(objectType);keyboardObjectType=
objectType;objectType.GetRuntime()._GetCommonScriptInterfaces().keyboard=this}isKeyDown(keyOrCode){const keyboardInst=GetKeyboardSdkInstance();if(typeof keyOrCode==="string")return keyboardInst.IsKeyDown(keyOrCode);else if(typeof keyOrCode==="number")return keyboardInst.IsKeyCodeDown(keyOrCode);else throw new TypeError("expected string or number");}}};


'use strict';{const C3=self.C3;C3.Plugins.Keyboard.Instance=class KeyboardInstance extends C3.SDKInstanceBase{constructor(inst,properties){super(inst);this._keysDownByString=new Set;this._keysDownByWhich=new Set;this._triggerWhich=0;this._triggerString="";this._triggerTypedKey="";const rt=this.GetRuntime().Dispatcher();this._disposables=new C3.CompositeDisposable(C3.Disposable.From(rt,"keydown",e=>this._OnKeyDown(e.data)),C3.Disposable.From(rt,"keyup",e=>this._OnKeyUp(e.data)),C3.Disposable.From(rt,
"window-blur",()=>this._OnWindowBlur()))}Release(){super.Release()}_OnKeyDown(e){const which=e["which"];const keyString=e["code"]||which.toString();const typedKey=e["key"];if(this._keysDownByString.has(keyString))return;this._keysDownByString.add(keyString);this._keysDownByWhich.add(which);this._triggerString=keyString;this._triggerWhich=which;this._triggerTypedKey=typedKey;this.Trigger(C3.Plugins.Keyboard.Cnds.OnAnyKey);this.Trigger(C3.Plugins.Keyboard.Cnds.OnKey);this.Trigger(C3.Plugins.Keyboard.Cnds.OnLeftRightKeyPressed);
this.Trigger(C3.Plugins.Keyboard.Cnds.OnKeyCode)}_OnKeyUp(e){const which=e["which"];const keyString=e["code"]||which.toString();const typedKey=e["key"];this._keysDownByString.delete(keyString);this._keysDownByWhich.delete(which);this._triggerString=keyString;this._triggerWhich=which;this._triggerTypedKey=typedKey;this.Trigger(C3.Plugins.Keyboard.Cnds.OnAnyKeyReleased);this.Trigger(C3.Plugins.Keyboard.Cnds.OnKeyReleased);this.Trigger(C3.Plugins.Keyboard.Cnds.OnLeftRightKeyReleased);this.Trigger(C3.Plugins.Keyboard.Cnds.OnKeyCodeReleased)}_OnWindowBlur(){for(const which of this._keysDownByWhich){this._keysDownByWhich.delete(which);
this._triggerWhich=which;this.Trigger(C3.Plugins.Keyboard.Cnds.OnAnyKeyReleased);this.Trigger(C3.Plugins.Keyboard.Cnds.OnKeyReleased);this.Trigger(C3.Plugins.Keyboard.Cnds.OnKeyCodeReleased)}this._keysDownByString.clear()}IsKeyDown(str){return this._keysDownByString.has(str)}IsKeyCodeDown(which){return this._keysDownByWhich.has(which)}SaveToJson(){return{"tk":this._triggerWhich,"tkk":this._triggerTypedKey}}LoadFromJson(o){this._triggerWhich=o["tk"];if(o.hasOwnProperty("tkk"))this._triggerTypedKey=
o["tkk"]}GetDebuggerProperties(){const prefix="plugins.keyboard";return[{title:prefix+".name",properties:[{name:prefix+".debugger.last-key-code",value:this._triggerWhich},{name:prefix+".debugger.last-key-string",value:C3.Plugins.Keyboard.Exps.StringFromKeyCode(this._triggerWhich)},{name:prefix+".debugger.last-typed-key",value:this._triggerTypedKey}]}]}}};


'use strict';{const C3=self.C3;const LEFTRIGHT_KEY_STRINGS=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];C3.Plugins.Keyboard.Cnds={IsKeyDown(which){return this._keysDownByWhich.has(which)},OnKey(which){return this._triggerWhich===which},OnAnyKey(){return true},OnAnyKeyReleased(){return true},OnKeyReleased(which){return this._triggerWhich===which},IsKeyCodeDown(which){which=Math.floor(which);return this._keysDownByWhich.has(which)},OnKeyCode(which){return this._triggerWhich===
which},OnKeyCodeReleased(which){return this._triggerWhich===which},OnLeftRightKeyPressed(index){const keyString=LEFTRIGHT_KEY_STRINGS[index];return this._triggerString===keyString},OnLeftRightKeyReleased(index){const keyString=LEFTRIGHT_KEY_STRINGS[index];return this._triggerString===keyString},IsLeftRightKeyDown(index){const keyString=LEFTRIGHT_KEY_STRINGS[index];return this._keysDownByString.has(keyString)}}};


'use strict';{const C3=self.C3;C3.Plugins.Keyboard.Acts={}};


'use strict';{const C3=self.C3;function StringFromCharCode(kc){kc=Math.floor(kc);switch(kc){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"\u2190";case 38:return"\u2191";case 39:return"\u2192";case 40:return"\u2193";case 45:return"insert";case 46:return"del";
case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";
case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(kc)}}
C3.Plugins.Keyboard.Exps={LastKeyCode(){return this._triggerWhich},StringFromKeyCode(kc){return StringFromCharCode(kc)},TypedKey(){return this._triggerTypedKey}}};


'use strict';{const C3=self.C3;C3.Plugins.Timeline=class TimelinePlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.Timeline.Type=class TimelineType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;C3.Plugins.Timeline.Instance=class TimelineInstance extends C3.SDKInstanceBase{constructor(inst,properties){super(inst);this.GetRuntime().GetTimelineManager().SetPluginInstance(inst)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;let triggerTimeline=null;let triggerKeyframe=null;C3.Plugins.Timeline.Cnds={SetTriggerTimeline(timeline){triggerTimeline=timeline},GetTriggerTimeline(){return triggerTimeline},SetTriggerKeyframe(keyframe){triggerKeyframe=keyframe},GetTriggerKeyframe(){return triggerKeyframe},OnTimelineStarted(timeline){return triggerTimeline===timeline},OnTimelineStartedByName(name){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByName(name))if(C3.equalsNoCase(triggerTimeline.GetName(),
timeline.GetName()))return true;return false},OnTimelineStartedByTags(tags){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByTags(tags))if(timeline.HasTags(triggerTimeline.GetTags()))return true;return false},OnAnyTimelineStarted(){return true},OnTimelineFinished(timeline){return triggerTimeline===timeline},OnTimelineFinishedByName(name){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByName(name))if(C3.equalsNoCase(triggerTimeline.GetName(),
timeline.GetName()))return true;return false},OnTimelineFinishedByTags(tags){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByTags(tags))if(timeline.HasTags(triggerTimeline.GetTags()))return true;return false},OnAnyTimelineFinished(){return true},IsPlaying(timeline){return timeline.IsPlaying()},IsPlayingByName(name){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByName(name))if(timeline.IsPlaying())return true;
return false},IsPlayingByTags(tags){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByTags(tags))if(timeline.IsPlaying())return true;return false},IsAnyPlaying(){const timelines=[...this._runtime.GetTimelineManager().GetTimelines()];if(!timelines)return;return timelines.some(t=>t.IsPlaying())},IsPaused(timeline){return timeline.IsPaused()},IsPausedByName(name){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByName(name))if(timeline.IsPaused())return true;
return false},IsPausedByTags(tags){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByTags(tags))if(timeline.IsPaused())return true;return false},IsAnyPaused(){const timelines=[...this._runtime.GetTimelineManager().GetTimelines()];if(!timelines)return;return timelines.some(t=>t.IsPaused())},OnTimeSet(timeline){return triggerTimeline===timeline},OnTimeSetByName(name){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByName(name))if(triggerTimeline===
timeline)return true;return false},OnTimeSetByTags(tags){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByTags(tags))if(triggerTimeline===timeline)return true;return false},OnAnyKeyframeReached(){return!!triggerKeyframe},OnKeyframeReached(tagsStr,match){if(!triggerKeyframe)return false;if(triggerKeyframe.GetTags().length===0||!tagsStr)return false;const tags=tagsStr?tagsStr.split(" "):[];if(match===0){for(const tag of tags)if(triggerKeyframe.HasTag(tag))return true;
return false}else{for(const tag of tags)if(!triggerKeyframe.HasTag(tag))return false;return true}}}};


'use strict';{const C3=self.C3;const nextTimelineObjectClasses=new Map;const set_timeline_instance_objects=(instanceObjects,timeline)=>{for(const instanceObject of instanceObjects)timeline.SetTrackInstance(instanceObject.trackId,instanceObject.instance)};const get_timeline_instance_objects=()=>{const ret=[];for(const [objectClass,obj]of nextTimelineObjectClasses.entries()){const instances=objectClass.GetCurrentSol().GetInstances();const count=obj.trackIds.length;for(let i=0;i<count;i++)if(instances[obj.startIndex+
i])ret.push({trackId:obj.trackIds[i],instance:instances[obj.startIndex+i]});obj.startIndex+=count}return ret};C3.Plugins.Timeline.Acts={async PlayTimeline(timeline,tags,keepNextTimelineClasses){if(!timeline){if(!keepNextTimelineClasses)nextTimelineObjectClasses.clear();return}const timelineManager=this._runtime.GetTimelineManager();let tl;const playPromises=[];if(nextTimelineObjectClasses.size){let instances=get_timeline_instance_objects();do if(instances.length){tl=timelineManager.GetTimelineOfTemplateForInstances(timeline,
instances);if(!tl){tl=timelineManager.CreateFromTemplate(timeline);tl.ClearTrackInstances();set_timeline_instance_objects(instances,tl)}tl.SetTags(tags);if(tl.Play())playPromises.push(tl.GetPlayPromise());instances=get_timeline_instance_objects()}while(instances.length)}else{timeline.SetTags(tags);if(timeline.Play())playPromises.push(timeline.GetPlayPromise())}if(!keepNextTimelineClasses)nextTimelineObjectClasses.clear();await Promise.all(playPromises)},async PlayTimelineByName(name,tags){const timelineManager=
this._runtime.GetTimelineManager();const playPromises=[];for(const timeline of timelineManager.GetTimelinesByName(name))playPromises.push(C3.Plugins.Timeline.Acts.PlayTimeline.call(this,timeline,tags,true));nextTimelineObjectClasses.clear();await Promise.all(playPromises)},async PlayAllTimelines(){const timelineManager=this._runtime.GetTimelineManager();const playPromises=[];for(const tl of timelineManager.GetTimelines())if(tl.Play())playPromises.push(tl.GetPlayPromise());nextTimelineObjectClasses.clear();
await Promise.all(playPromises)},PauseTimeline(timeline){if(!timeline)return;timeline.Stop()},PauseTimelineByName(name){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByName(name))C3.Plugins.Timeline.Acts.PauseTimeline.call(this,timeline)},PauseTimelineByTags(tags){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByTags(tags))C3.Plugins.Timeline.Acts.PauseTimeline.call(this,timeline)},
PauseAllTimelines(){const timelineManager=this._runtime.GetTimelineManager();for(const tl of timelineManager.GetTimelines())tl.Stop()},ResumeTimeline(timeline){if(!timeline)return;timeline.Resume()},ResumeTimelineByName(name){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByName(name))C3.Plugins.Timeline.Acts.ResumeTimeline.call(this,timeline)},ResumeTimelineByTags(tags){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByTags(tags))C3.Plugins.Timeline.Acts.ResumeTimeline.call(this,
timeline)},ResumeAllTimelines(){const timelineManager=this._runtime.GetTimelineManager();for(const tl of timelineManager.GetTimelines())tl.Resume()},StopTimeline(timeline){if(!timeline)return;timeline.Reset()},StopTimelineByName(name){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByName(name))C3.Plugins.Timeline.Acts.StopTimeline.call(this,timeline)},StopTimelineByTags(tags){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByTags(tags))C3.Plugins.Timeline.Acts.StopTimeline.call(this,
timeline)},StopAllTimelines(){const timelineManager=this._runtime.GetTimelineManager();for(const tl of timelineManager.GetTimelines())tl.Reset()},SetTimelineTime(timeline,timeOrTags){if(!timeline)return;if(C3.IsFiniteNumber(timeOrTags))timeline.SetTime(timeOrTags);else if(C3.IsString(timeOrTags)){const keyframe=timeline.GetKeyframeWithTags(timeOrTags);if(keyframe)timeline.SetTime(keyframe.GetTime());else C3.Plugins.Timeline.Acts.SetTimelineTime.call(this,timeline,Number(timeOrTags))}},SetTimelineTimeByName(name,
timeOrTags){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByName(name))C3.Plugins.Timeline.Acts.SetTimelineTime.call(this,timeline,timeOrTags)},SetTimelineTimeByTags(tags,timeOrTags){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByTags(tags))C3.Plugins.Timeline.Acts.SetTimelineTime.call(this,timeline,timeOrTags)},SetTimelinePlaybackRate(timeline,rate){if(!timeline)return;timeline.SetPlaybackRate(rate)},
SetTimelinePlaybackRateByName(name,rate){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByName(name))C3.Plugins.Timeline.Acts.SetTimelinePlaybackRate.call(this,timeline,rate)},SetTimelinePlaybackRateByTags(tags,rate){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByTags(tags))C3.Plugins.Timeline.Acts.SetTimelinePlaybackRate.call(this,timeline,rate)},SetInstance(objectClass,trackId){if(!nextTimelineObjectClasses.has(objectClass))nextTimelineObjectClasses.set(objectClass,
{startIndex:0,trackIds:[]});nextTimelineObjectClasses.get(objectClass).trackIds.push(trackId)}}};


'use strict';{const C3=self.C3;C3.Plugins.Timeline.Exps={Time(nameOrTags){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByName(nameOrTags))return timeline.GetTime();for(const timeline of timelineManager.GetTimelinesByTags(nameOrTags))return timeline.GetTime();return 0},TotalTime(nameOrTags){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByName(nameOrTags))return timeline.GetTotalTime();
for(const timeline of timelineManager.GetTimelinesByTags(nameOrTags))return timeline.GetTotalTime();return 0},Progress(nameOrTags){const timelineManager=this._runtime.GetTimelineManager();for(const timeline of timelineManager.GetTimelinesByName(nameOrTags))return timeline.GetTime()/timeline.GetTotalTime();for(const timeline of timelineManager.GetTimelinesByTags(nameOrTags))return timeline.GetTime()/timeline.GetTotalTime();return 0},KeyframeTags(){const triggerKeyframe=C3.Plugins.Timeline.Cnds.GetTriggerKeyframe();
if(!triggerKeyframe)return"";return triggerKeyframe.GetTags().join(" ")},TimelineName(){const timeline=C3.Plugins.Timeline.Cnds.GetTriggerTimeline();return timeline?timeline.GetName():""},TimelineTags(){const timeline=C3.Plugins.Timeline.Cnds.GetTriggerTimeline();return timeline?timeline.GetStringTags():""}}};


'use strict';{const C3=self.C3;C3.Plugins.Touch=class TouchPlugin extends C3.SDKPluginBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.Touch.Type=class TouchType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}GetScriptInterfaceClass(){return self.ITouchObjectType}};let touchObjectType=null;function GetTouchSdkInstance(){return touchObjectType.GetSingleGlobalInstance().GetSdkInstance()}self.ITouchObjectType=class ITouchObjectType extends self.IObjectClass{constructor(objectType){super(objectType);touchObjectType=objectType;objectType.GetRuntime()._GetCommonScriptInterfaces().touch=
this}requestPermission(type){const touchInst=GetTouchSdkInstance();if(type==="orientation")return touchInst._RequestPermission(0);else if(type==="motion")return touchInst._RequestPermission(1);else throw new Error("invalid type");}}};


'use strict';{const C3=self.C3;const DOM_COMPONENT_ID="touch";C3.Plugins.Touch.Instance=class TouchInstance extends C3.SDKInstanceBase{constructor(inst,properties){super(inst,DOM_COMPONENT_ID);this._touches=new Map;this._useMouseInput=false;this._isMouseDown=false;this._orientCompassHeading=0;this._orientAlpha=0;this._orientBeta=0;this._orientGamma=0;this._accX=0;this._accY=0;this._accZ=0;this._accWithGX=0;this._accWithGY=0;this._accWithGZ=0;this._triggerIndex=0;this._triggerId=0;this._triggerPermission=
0;this._curTouchX=0;this._curTouchY=0;this._getTouchIndex=0;this._permissionPromises=[];if(properties)this._useMouseInput=properties[0];this.AddDOMMessageHandler("permission-result",e=>this._OnPermissionResult(e));const rt=this.GetRuntime().Dispatcher();this._disposables=new C3.CompositeDisposable(C3.Disposable.From(rt,"pointerdown",e=>this._OnPointerDown(e.data)),C3.Disposable.From(rt,"pointermove",e=>this._OnPointerMove(e.data)),C3.Disposable.From(rt,"pointerup",e=>this._OnPointerUp(e.data,false)),
C3.Disposable.From(rt,"pointercancel",e=>this._OnPointerUp(e.data,true)),C3.Disposable.From(rt,"deviceorientation",e=>this._OnDeviceOrientation(e.data)),C3.Disposable.From(rt,"deviceorientationabsolute",e=>this._OnDeviceOrientationAbsolute(e.data)),C3.Disposable.From(rt,"devicemotion",e=>this._OnDeviceMotion(e.data)),C3.Disposable.From(rt,"tick2",e=>this._OnTick2()))}Release(){this._touches.clear();super.Release()}_OnPointerDown(e){if(e["pointerType"]==="mouse")if(this._useMouseInput)this._isMouseDown=
true;else return;const pointerId=e["pointerId"];if(this._touches.has(pointerId))return;const x=e["pageX"]-this._runtime.GetCanvasClientX();const y=e["pageY"]-this._runtime.GetCanvasClientY();const nowTime=e["timeStamp"];const index=this._touches.size;this._triggerIndex=index;this._triggerId=pointerId;const touchInfo=C3.New(C3.Plugins.Touch.TouchInfo);touchInfo.Init(nowTime,x,y,pointerId,index);this._touches.set(pointerId,touchInfo);this.Trigger(C3.Plugins.Touch.Cnds.OnNthTouchStart);this.Trigger(C3.Plugins.Touch.Cnds.OnTouchStart);
this._curTouchX=x;this._curTouchY=y;this.Trigger(C3.Plugins.Touch.Cnds.OnTouchObject)}_OnPointerMove(e){if(e["pointerType"]==="mouse"&&!this._isMouseDown)return;const touchInfo=this._touches.get(e["pointerId"]);if(!touchInfo)return;const nowTime=e["timeStamp"];if(nowTime-touchInfo.GetTime()<2)return;const x=e["pageX"]-this._runtime.GetCanvasClientX();const y=e["pageY"]-this._runtime.GetCanvasClientY();touchInfo.Update(nowTime,x,y,e["width"],e["height"],e["pressure"])}_OnPointerUp(e,isCancel){if(e["pointerType"]===
"mouse")if(this._isMouseDown)this._isMouseDown=false;else return;const nowTime=e["timeStamp"];const pointerId=e["pointerId"];const touchInfo=this._touches.get(pointerId);if(!touchInfo)return;this._triggerIndex=touchInfo.GetStartIndex();this._triggerId=touchInfo.GetId();this.Trigger(C3.Plugins.Touch.Cnds.OnNthTouchEnd);this.Trigger(C3.Plugins.Touch.Cnds.OnTouchEnd);if(!isCancel){const tap=touchInfo.ShouldTriggerTap(nowTime);if(tap==="single-tap"){this.Trigger(C3.Plugins.Touch.Cnds.OnTapGesture);this._curTouchX=
touchInfo.GetX();this._curTouchY=touchInfo.GetY();this.Trigger(C3.Plugins.Touch.Cnds.OnTapGestureObject)}else if(tap==="double-tap"){this.Trigger(C3.Plugins.Touch.Cnds.OnDoubleTapGesture);this._curTouchX=touchInfo.GetX();this._curTouchY=touchInfo.GetY();this.Trigger(C3.Plugins.Touch.Cnds.OnDoubleTapGestureObject)}}touchInfo.Release();this._touches.delete(pointerId)}_RequestPermission(type){this._PostToDOMMaybeSync("request-permission",{"type":type});return new Promise((resolve,reject)=>{this._permissionPromises.push({type,
resolve,reject})})}_OnPermissionResult(e){const isGranted=e["result"];const type=e["type"];this._triggerPermission=type;const toResolve=this._permissionPromises.filter(o=>o.type===type);for(const o of toResolve)o.resolve(isGranted?"granted":"denied");this._permissionPromises=this._permissionPromises.filter(o=>o.type!==type);if(isGranted){this.Trigger(C3.Plugins.Touch.Cnds.OnPermissionGranted);if(type===0)this._runtime.RequestDeviceOrientationEvent();else this._runtime.RequestDeviceMotionEvent()}else this.Trigger(C3.Plugins.Touch.Cnds.OnPermissionDenied)}_OnDeviceOrientation(e){if(typeof e["webkitCompassHeading"]===
"number")this._orientCompassHeading=e["webkitCompassHeading"];else if(e["absolute"])this._orientCompassHeading=e["alpha"];this._orientAlpha=e["alpha"];this._orientBeta=e["beta"];this._orientGamma=e["gamma"]}_OnDeviceOrientationAbsolute(e){this._orientCompassHeading=e["alpha"]}_OnDeviceMotion(e){const acc=e["acceleration"];if(acc){this._accX=acc["x"];this._accY=acc["y"];this._accZ=acc["z"]}const withG=e["accelerationIncludingGravity"];if(withG){this._accWithGX=withG["x"];this._accWithGY=withG["y"];
this._accWithGZ=withG["z"]}}_OnTick2(){const nowTime=performance.now();let index=0;for(const touchInfo of this._touches.values()){if(touchInfo.GetTime()<=nowTime-50)touchInfo._SetLastTime(nowTime);if(touchInfo.ShouldTriggerHold(nowTime)){this._triggerIndex=touchInfo.GetStartIndex();this._triggerId=touchInfo.GetId();this._getTouchIndex=index;this.Trigger(C3.Plugins.Touch.Cnds.OnHoldGesture);this._curTouchX=touchInfo.GetX();this._curTouchY=touchInfo.GetY();this.Trigger(C3.Plugins.Touch.Cnds.OnHoldGestureObject);
this._getTouchIndex=0}++index}}_GetTouchByIndex(index){index=Math.floor(index);for(const touchInfo of this._touches.values()){if(index===0)return touchInfo;--index}return null}_IsClientPosOnCanvas(touchX,touchY){return touchX>=0&&touchY>=0&&touchX<this._runtime.GetCanvasCssWidth()&&touchY<this._runtime.GetCanvasCssHeight()}GetDebuggerProperties(){const prefix="plugins.touch.debugger";return[{title:prefix+".touches",properties:[...this._touches.values()].map(ti=>({name:"$"+ti.GetId(),value:ti.GetX()+
", "+ti.GetY()}))}]}}};


'use strict';{const C3=self.C3;const tempArr=[];C3.Plugins.Touch.Cnds={OnTouchStart(){return true},OnTouchEnd(){return true},IsInTouch(){return this._touches.size>0},OnTouchObject(objectClass){if(!objectClass)return false;if(!this._IsClientPosOnCanvas(this._curTouchX,this._curTouchY))return false;return this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(objectClass,this._curTouchX,this._curTouchY,false)},IsTouchingObject(objectClass){if(!objectClass)return false;const sol=objectClass.GetCurrentSol();
const instances=sol.GetInstances();for(const inst of instances){const wi=inst.GetWorldInfo();const layer=wi.GetLayer();for(const touchInfo of this._touches.values()){if(!this._IsClientPosOnCanvas(touchInfo.GetX(),touchInfo.GetY()))continue;const [px,py]=layer.CanvasCssToLayer(touchInfo.GetX(),touchInfo.GetY(),wi.GetTotalZElevation());if(wi.ContainsPoint(px,py)){tempArr.push(inst);break}}}if(tempArr.length){sol.SetArrayPicked(tempArr);objectClass.ApplySolToContainer();C3.clearArray(tempArr);return true}else return false},
CompareTouchSpeed(index,cmp,s){const touchInfo=this._GetTouchByIndex(index);if(!touchInfo)return false;return C3.compare(touchInfo.GetSpeed(),cmp,s)},OrientationSupported(){return true},MotionSupported(){return true},CompareOrientation(orientation,cmp,a){this._runtime.RequestDeviceOrientationEvent();let v=0;if(orientation===0)v=this._orientAlpha;else if(orientation===1)v=this._orientBeta;else v=this._orientGamma;return C3.compare(v,cmp,a)},CompareAcceleration(a,cmp,x){this._runtime.RequestDeviceMotionEvent();
let v=0;if(a===0)v=this._accWithGX;else if(a===1)v=this._accWithGY;else if(a===2)v=this._accWithGZ;else if(a===3)v=this._accX;else if(a===4)v=this._accY;else v=this._accZ;return C3.compare(v,cmp,x)},OnNthTouchStart(index){index=Math.floor(index);return index===this._triggerIndex},OnNthTouchEnd(index){index=Math.floor(index);return index===this._triggerIndex},HasNthTouch(index){index=Math.floor(index);return this._touches.size>=index+1},OnHoldGesture(){return true},OnTapGesture(){return true},OnDoubleTapGesture(){return true},
OnHoldGestureObject(objectClass){if(!objectClass)return false;if(!this._IsClientPosOnCanvas(this._curTouchX,this._curTouchY))return false;return this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(objectClass,this._curTouchX,this._curTouchY,false)},OnTapGestureObject(objectClass){if(!objectClass)return false;if(!this._IsClientPosOnCanvas(this._curTouchX,this._curTouchY))return false;return this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(objectClass,this._curTouchX,
this._curTouchY,false)},OnDoubleTapGestureObject(objectClass){if(!objectClass)return false;if(!this._IsClientPosOnCanvas(this._curTouchX,this._curTouchY))return false;return this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(objectClass,this._curTouchX,this._curTouchY,false)},OnPermissionGranted(type){return this._triggerPermission===type},OnPermissionDenied(type){return this._triggerPermission===type}}};


'use strict';{const C3=self.C3;C3.Plugins.Touch.Acts={RequestPermission(type){this._RequestPermission(type)}}};


'use strict';{const C3=self.C3;C3.Plugins.Touch.Exps={TouchCount(){return this._touches.size},X(layerParam){const touchInfo=this._GetTouchByIndex(this._getTouchIndex);if(!touchInfo)return 0;return touchInfo.GetPositionForLayer(this._runtime.GetCurrentLayout(),layerParam,true)},Y(layerParam){const touchInfo=this._GetTouchByIndex(this._getTouchIndex);if(!touchInfo)return 0;return touchInfo.GetPositionForLayer(this._runtime.GetCurrentLayout(),layerParam,false)},XAt(index,layerParam){const touchInfo=
this._GetTouchByIndex(index);if(!touchInfo)return 0;return touchInfo.GetPositionForLayer(this._runtime.GetCurrentLayout(),layerParam,true)},YAt(index,layerParam){const touchInfo=this._GetTouchByIndex(index);if(!touchInfo)return 0;return touchInfo.GetPositionForLayer(this._runtime.GetCurrentLayout(),layerParam,false)},XForID(id,layerParam){const touchInfo=this._touches.get(id);if(!touchInfo)return 0;return touchInfo.GetPositionForLayer(this._runtime.GetCurrentLayout(),layerParam,true)},YForID(id,layerParam){const touchInfo=
this._touches.get(id);if(!touchInfo)return 0;return touchInfo.GetPositionForLayer(this._runtime.GetCurrentLayout(),layerParam,false)},AbsoluteX(){const touchInfo=this._GetTouchByIndex(0);if(touchInfo)return touchInfo.GetX();else return 0},AbsoluteY(){const touchInfo=this._GetTouchByIndex(0);if(touchInfo)return touchInfo.GetY();else return 0},AbsoluteXAt(index){const touchInfo=this._GetTouchByIndex(index);if(touchInfo)return touchInfo.GetX();else return 0},AbsoluteYAt(index){const touchInfo=this._GetTouchByIndex(index);
if(touchInfo)return touchInfo.GetY();else return 0},AbsoluteXForID(id){const touchInfo=this._touches.get(id);if(touchInfo)return touchInfo.GetX();else return 0},AbsoluteYForID(id){const touchInfo=this._touches.get(id);if(touchInfo)return touchInfo.GetY();else return 0},SpeedAt(index){const touchInfo=this._GetTouchByIndex(index);if(touchInfo)return touchInfo.GetSpeed();else return 0},SpeedForID(id){const touchInfo=this._touches.get(id);if(touchInfo)return touchInfo.GetSpeed();else return 0},AngleAt(index){const touchInfo=
this._GetTouchByIndex(index);if(touchInfo)return C3.toDegrees(touchInfo.GetAngle());else return 0},AngleForID(id){const touchInfo=this._touches.get(id);if(touchInfo)return C3.toDegrees(touchInfo.GetAngle());else return 0},CompassHeading(){this._runtime.RequestDeviceOrientationEvent();return this._orientCompassHeading},Alpha(){this._runtime.RequestDeviceOrientationEvent();return this._orientAlpha},Beta(){this._runtime.RequestDeviceOrientationEvent();return this._orientBeta},Gamma(){this._runtime.RequestDeviceOrientationEvent();
return this._orientGamma},AccelerationXWithG(){this._runtime.RequestDeviceMotionEvent();return this._accWithGX},AccelerationYWithG(){this._runtime.RequestDeviceMotionEvent();return this._accWithGY},AccelerationZWithG(){this._runtime.RequestDeviceMotionEvent();return this._accWithGZ},AccelerationX(){this._runtime.RequestDeviceMotionEvent();return this._accX},AccelerationY(){this._runtime.RequestDeviceMotionEvent();return this._accY},AccelerationZ(){this._runtime.RequestDeviceMotionEvent();return this._accZ},
TouchIndex(){return this._triggerIndex},TouchID(){return this._triggerId},WidthForID(id){const touchInfo=this._touches.get(id);if(touchInfo)return touchInfo.GetWidth();else return 0},HeightForID(id){const touchInfo=this._touches.get(id);if(touchInfo)return touchInfo.GetHeight();else return 0},PressureForID(id){const touchInfo=this._touches.get(id);if(touchInfo)return touchInfo.GetPressure();else return 0}}};


'use strict';{const C3=self.C3;const GESTURE_HOLD_THRESHOLD=15;const GESTURE_HOLD_TIMEOUT=500;const GESTURE_TAP_TIMEOUT=333;const GESTURE_DOUBLETAP_THRESHOLD=25;let lastTapX=-1E3;let lastTapY=-1E3;let lastTapTime=-1E4;C3.Plugins.Touch.TouchInfo=class TouchInfo extends C3.DefendedBase{constructor(){super();this._pointerId=0;this._startIndex=0;this._startTime=0;this._time=0;this._lastTime=0;this._startX=0;this._startY=0;this._x=0;this._y=0;this._lastX=0;this._lastY=0;this._width=0;this._height=0;this._pressure=
0;this._hasTriggeredHold=false;this._isTooFarForHold=false}Release(){}Init(nowTime,x,y,id,index){this._pointerId=id;this._startIndex=index;this._time=nowTime;this._lastTime=nowTime;this._startTime=nowTime;this._startX=x;this._startY=y;this._x=x;this._y=y;this._lastX=x;this._lastY=y}Update(nowTime,x,y,width,height,pressure){this._lastTime=this._time;this._time=nowTime;this._lastX=this._x;this._lastY=this._y;this._x=x;this._y=y;this._width=width;this._height=height;this._pressure=pressure;if(!this._isTooFarForHold&&
C3.distanceTo(this._startX,this._startY,this._x,this._y)>=GESTURE_HOLD_THRESHOLD)this._isTooFarForHold=true}GetId(){return this._pointerId}GetStartIndex(){return this._startIndex}GetTime(){return this._time}_SetLastTime(t){this._lastTime=t}GetX(){return this._x}GetY(){return this._y}GetSpeed(){const dist=C3.distanceTo(this._x,this._y,this._lastX,this._lastY);const dt=(this._time-this._lastTime)/1E3;if(dt>0)return dist/dt;else return 0}GetAngle(){return C3.angleTo(this._lastX,this._lastY,this._x,this._y)}GetWidth(){return this._width}GetHeight(){return this._height}GetPressure(){return this._pressure}ShouldTriggerHold(nowTime){if(this._hasTriggeredHold)return false;
if(nowTime-this._startTime>=GESTURE_HOLD_TIMEOUT&&!this._isTooFarForHold&&C3.distanceTo(this._startX,this._startY,this._x,this._y)<GESTURE_HOLD_THRESHOLD){this._hasTriggeredHold=true;return true}return false}ShouldTriggerTap(nowTime){if(this._hasTriggeredHold)return"";if(nowTime-this._startTime<=GESTURE_TAP_TIMEOUT&&!this._isTooFarForHold&&C3.distanceTo(this._startX,this._startY,this._x,this._y)<GESTURE_HOLD_THRESHOLD)if(nowTime-lastTapTime<=GESTURE_TAP_TIMEOUT*2&&C3.distanceTo(lastTapX,lastTapY,
this._x,this._y)<GESTURE_DOUBLETAP_THRESHOLD){lastTapX=-1E3;lastTapY=-1E3;lastTapTime=-1E4;return"double-tap"}else{lastTapX=this._x;lastTapY=this._y;lastTapTime=nowTime;return"single-tap"}return""}GetPositionForLayer(layout,layerNameOrNumber,getx){if(typeof layerNameOrNumber==="undefined"){const layer=layout.GetLayerByIndex(0);return layer.CanvasCssToLayer_DefaultTransform(this._x,this._y)[getx?0:1]}else{const layer=layout.GetLayer(layerNameOrNumber);if(layer)return layer.CanvasCssToLayer(this._x,
this._y)[getx?0:1];else return 0}}}};


'use strict';{const C3=self.C3;const DOM_COMPONENT_ID="button";C3.Plugins.Button=class ButtonPlugin extends C3.SDKDOMPluginBase{constructor(opts){super(opts,DOM_COMPONENT_ID);this.AddElementMessageHandler("click",(sdkInst,e)=>sdkInst._OnClick(e))}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Plugins.Button.Type=class ButtonType extends C3.SDKTypeBase{constructor(objectClass){super(objectClass)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;const TYPE=0;const TEXT=1;const TOOLTIP=2;const INITIALLY_VISIBLE=3;const ENABLE=4;const AUTO_FONT_SIZE=5;const CHECKED=6;const ID=7;const DOM_COMPONENT_ID="button";C3.Plugins.Button.Instance=class ButtonInstance extends C3.SDKDOMInstanceBase{constructor(inst,properties){super(inst,DOM_COMPONENT_ID);this._text="OK";this._isCheckbox=false;this._isChecked=false;this._title="";this._id="";this._isEnabled=true;this._autoFontSize=true;if(properties){this._isCheckbox=properties[TYPE]===
1;this._text=properties[TEXT];this._title=properties[TOOLTIP];this.GetWorldInfo().SetVisible(properties[INITIALLY_VISIBLE]);this._isEnabled=properties[ENABLE];this._autoFontSize=properties[AUTO_FONT_SIZE];this._isChecked=properties[CHECKED];this._id=properties[ID]}this.CreateElement({"id":this._id})}Release(){super.Release()}GetElementState(){return{"text":this._text,"isCheckbox":this._isCheckbox,"isChecked":this._isChecked,"title":this._title,"isVisible":this.GetWorldInfo().IsVisible(),"isEnabled":this._isEnabled}}async _OnClick(e){this._isChecked=
e["isChecked"];this.GetScriptInterface().dispatchEvent(C3.New(C3.Event,"click",true));await this.TriggerAsync(C3.Plugins.Button.Cnds.OnClicked)}_SetText(text){if(this._text===text)return;this._text=text;this.UpdateElementState()}_GetText(){return this._text}_SetTooltip(title){if(this._title===title)return;this._title=title;this.UpdateElementState()}_GetTooltip(){return this._title}_SetEnabled(e){e=!!e;if(this._isEnabled===e)return;this._isEnabled=e;this.UpdateElementState()}_IsEnabled(){return this._isEnabled}_SetChecked(c){if(!this._isCheckbox)return;
c=!!c;if(this._isChecked===c)return;this._isChecked=c;this.UpdateElementState()}_IsChecked(){return this._isChecked}Draw(renderer){}SaveToJson(){return{"text":this._text,"checked":this._isChecked,"title":this._title,"enabled":this._isEnabled}}LoadFromJson(o){this._text=o["text"];this._isChecked=o["checked"];this._title=o["title"];this._isEnabled=o["enabled"];this.UpdateElementState()}GetPropertyValueByIndex(index){switch(index){case TEXT:return this._text;case TOOLTIP:return this._title;case ENABLE:return this._isEnabled;
case AUTO_FONT_SIZE:return this._autoFontSize;case CHECKED:return this._isChecked;case ID:return this._id}}SetPropertyValueByIndex(index,value){switch(index){case TEXT:if(this._text===value)return;this._text=value;this.UpdateElementState();break;case TOOLTIP:if(this._title===value)return;this._title=value;this.UpdateElementState();break;case ENABLE:if(this._isEnabled===!!value)return;this._isEnabled=!!value;this.UpdateElementState();break;case AUTO_FONT_SIZE:this._autoFontSize=!!value;break;case CHECKED:if(this._isChecked===
!!value)return;this._isChecked=!!value;this.UpdateElementState();break;case ID:if(this._id===!!value)return;this._id=value;this.UpdateElementState();break}}GetDebuggerProperties(){const Acts=C3.Plugins.Button.Acts;const prefix="plugins.button";return[{title:prefix+".name",properties:[{name:prefix+".properties.text.name",value:this._text,onedit:v=>this.CallAction(Acts.SetText,v)},{name:prefix+".properties.enabled.name",value:this._isEnabled,onedit:v=>this.CallAction(Acts.SetEnabled,v)},{name:prefix+
".properties.checked.name",value:this._isChecked,onedit:v=>this.CallAction(Acts.SetChecked,v)}]}]}GetScriptInterfaceClass(){return self.IButtonInstance}};const map=new WeakMap;self.IButtonInstance=class IButtonInstance extends self.IDOMInstance{constructor(){super();map.set(this,self.IInstance._GetInitInst().GetSdkInstance())}set text(str){map.get(this)._SetText(str)}get text(){return map.get(this)._GetText()}set tooltip(str){map.get(this)._SetTooltip(str)}get tooltip(){return map.get(this)._GetTooltip()}set isEnabled(e){map.get(this)._SetEnabled(e)}get isEnabled(){return map.get(this)._IsEnabled()}set isChecked(c){map.get(this)._SetChecked(c)}get isChecked(){return map.get(this)._IsChecked()}}};


'use strict';{const C3=self.C3;C3.Plugins.Button.Cnds={OnClicked(){return true},IsChecked(){return this._isChecked},CompareText(str,caseSensitive){if(caseSensitive)return this._text===str;else return C3.equalsNoCase(this._text,str)}}};


'use strict';{const C3=self.C3;C3.Plugins.Button.Acts={SetText(text){this._SetText(text)},SetTooltip(title){this._SetTooltip(title)},SetChecked(c){this._SetChecked(c!==0)},ToggleChecked(){if(!this._isCheckbox)return;this._isChecked=!this._isChecked;this.UpdateElementState()}}};


'use strict';{const C3=self.C3;C3.Plugins.Button.Exps={Text(){return this._text}}};


'use strict';{const C3=self.C3;C3.Behaviors.custom=class CustomBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Behaviors.custom.Type=class CustomType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;const STEP_MODE=0;const PX_PER_STEP=1;const ENABLED=2;C3.Behaviors.custom.Instance=class CustomInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this._dx=0;this._dy=0;this._cancelStep=0;this._stepMode=0;this._pxPerStep=5;this._isEnabled=true;if(properties){this._stepMode=properties[STEP_MODE];this._pxPerStep=properties[PX_PER_STEP];this._isEnabled=properties[ENABLED]}if(this._isEnabled)this._StartTicking()}Release(){super.Release()}SaveToJson(){return{"dx":this._dx,
"dy":this._dy,"cs":this._cancelStep,"sm":this._stepMode,"px":this._pxPerStep,"e":this._isEnabled}}LoadFromJson(o){this._dx=o["dx"];this._dy=o["dy"];this._cancelStep=o["cs"];this._stepMode=o["sm"];this._pxPerStep=o["px"];this._SetEnabled(o["e"])}GetSpeed(){return Math.sqrt(this._dx*this._dx+this._dy*this._dy)}GetAngle(){return Math.atan2(this._dy,this._dx)}_Step(x,y,triggerMethod){if(x===0&&y===0)return;const wi=this.GetWorldInfo();const startX=wi.GetX();const startY=wi.GetY();let steps=Math.round(Math.sqrt(x*
x+y*y)/this._pxPerStep);if(steps===0)steps=1;for(let i=1;i<=steps;++i){let prog=i/steps;wi.SetXY(startX+x*prog,startY+y*prog);wi.SetBboxChanged();this.Trigger(triggerMethod);if(this._cancelStep===1){i--;prog=i/steps;wi.SetXY(startX+x*prog,startY+y*prog);wi.SetBboxChanged();return}else if(this._cancelStep===2)return}}Tick(){if(!this._isEnabled||this._dx===0&&this._dy===0)return;const wi=this._inst.GetWorldInfo();const dt=this._runtime.GetDt(this._inst);const mx=this._dx*dt;const my=this._dy*dt;this._cancelStep=
0;if(this._stepMode===0){wi.OffsetXY(mx,my);wi.SetBboxChanged()}else if(this._stepMode===1)this._Step(mx,my,C3.Behaviors.custom.Cnds.OnCMStep);else if(this._stepMode===2){this._Step(mx,0,C3.Behaviors.custom.Cnds.OnCMHorizStep);this._cancelStep=0;this._Step(0,my,C3.Behaviors.custom.Cnds.OnCMVertStep)}else if(this._stepMode===3){this._Step(0,my,C3.Behaviors.custom.Cnds.OnCMVertStep);this._cancelStep=0;this._Step(mx,0,C3.Behaviors.custom.Cnds.OnCMHorizStep)}}GetPropertyValueByIndex(index){switch(index){case STEP_MODE:return this._stepMode;
case PX_PER_STEP:return this._pxPerStep;case ENABLED:return this._isEnabled}}SetPropertyValueByIndex(index,value){switch(index){case STEP_MODE:this._stepMode=value;break;case PX_PER_STEP:this._pxPerStep=value;break;case ENABLED:this._SetEnabled(value);break}}_SetEnabled(e){this._isEnabled=!!e;if(this._isEnabled)this._StartTicking();else this._StopTicking()}GetDebuggerProperties(){const prefix="behaviors.custom";return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:prefix+".debugger.vector-x",
value:this._dx,onedit:v=>this._dx=v},{name:prefix+".debugger.vector-y",value:this._dy,onedit:v=>this._dy=v},{name:prefix+".properties.pixels-per-step.name",value:this._pxPerStep,onedit:v=>this._pxPerStep=v},{name:prefix+".properties.enabled.name",value:this._isEnabled,onedit:v=>this._SetEnabled(v)}]}]}}};


'use strict';{const C3=self.C3;C3.Behaviors.custom.Cnds={IsMoving(){return this._dx!==0||this._dy!==0},CompareSpeed(axis,cmp,s){let speed=0;switch(axis){case 0:speed=this.GetSpeed();break;case 1:speed=this._dx;break;case 2:speed=this._dy;break}return C3.compare(speed,cmp,s)},OnCMStep(){return true},OnCMHorizStep(){return true},OnCMVertStep(){return true},IsEnabled(){return this._isEnabled}}};


'use strict';{const C3=self.C3;C3.Behaviors.custom.Acts={Stop(){this._dx=0;this._dy=0},Reverse(axis){switch(axis){case 0:this._dx*=-1;this._dy*=-1;break;case 1:this._dx*=-1;break;case 2:this._dy*=-1;break}},SetSpeed(axis,s){let a=0;switch(axis){case 0:a=this.GetAngle();this._dx=Math.cos(a)*s;this._dy=Math.sin(a)*s;break;case 1:this._dx=s;break;case 2:this._dy=s;break}},Accelerate(axis,acc){const dt=this._runtime.GetDt(this._inst);const ds=acc*dt;let a;switch(axis){case 0:a=this.GetAngle();this._dx+=
Math.cos(a)*ds;this._dy+=Math.sin(a)*ds;break;case 1:this._dx+=ds;break;case 2:this._dy+=ds;break}},AccelerateAngle(acc,a){a=C3.toRadians(a);const dt=this._runtime.GetDt(this._inst);const ds=acc*dt;this._dx+=Math.cos(a)*ds;this._dy+=Math.sin(a)*ds},AcceleratePos(acc,x,y){const wi=this.GetWorldInfo();const dt=this._runtime.GetDt(this._inst);const ds=acc*dt;const a=Math.atan2(y-wi.GetY(),x-wi.GetX());this._dx+=Math.cos(a)*ds;this._dy+=Math.sin(a)*ds},SetAngleOfMotion(a){a=C3.toRadians(a);const s=this.GetSpeed();
this._dx=Math.cos(a)*s;this._dy=Math.sin(a)*s},RotateAngleOfMotionClockwise(a){a=this.GetAngle()+C3.toRadians(a);const s=this.GetSpeed();this._dx=Math.cos(a)*s;this._dy=Math.sin(a)*s},RotateAngleOfMotionCounterClockwise(a){a=this.GetAngle()-C3.toRadians(a);const s=this.GetSpeed();this._dx=Math.cos(a)*s;this._dy=Math.sin(a)*s},StopStepping(mode){this._cancelStep=mode+1},PushOutSolid(mode){let a,ux,uy;const inst=this._inst;const collisionEngine=this.GetRuntime().GetCollisionEngine();switch(mode){case 0:a=
this.GetAngle();ux=Math.cos(a);uy=Math.sin(a);collisionEngine.PushOutSolid(inst,-ux,-uy,Math.max(this.GetSpeed()*3,100));break;case 1:collisionEngine.PushOutSolidNearest(inst);break;case 2:collisionEngine.PushOutSolid(inst,0,-1,Math.max(Math.abs(this._dy)*3,100));break;case 3:collisionEngine.PushOutSolid(inst,0,1,Math.max(Math.abs(this._dy)*3,100));break;case 4:collisionEngine.PushOutSolid(inst,-1,0,Math.max(Math.abs(this._dx)*3,100));break;case 5:collisionEngine.PushOutSolid(inst,1,0,Math.max(Math.abs(this._dx)*
3,100));break}},PushOutSolidAngle(a){a=C3.toRadians(a);const ux=Math.cos(a);const uy=Math.sin(a);this.GetRuntime().GetCollisionEngine().PushOutSolid(this._inst,ux,uy,Math.max(this.GetSpeed()*3,100))},SetEnabled(e){this._SetEnabled(e)}}};


'use strict';{const C3=self.C3;C3.Behaviors.custom.Exps={Speed(){return this.GetSpeed()},MovingAngle(){return C3.toDegrees(this.GetAngle())},dx(){return this._dx},dy(){return this._dy}}};


'use strict';{const C3=self.C3;C3.Behaviors.Fade=class FadeBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Behaviors.Fade.Type=class FadeType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;const FADE_IN_TIME=0;const WAIT_TIME=1;const FADE_OUT_TIME=2;const DESTROY=3;const ACTIVE_AT_START=4;C3.Behaviors.Fade.Instance=class FadeInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this._fadeInTime=0;this._waitTime=0;this._fadeOutTime=0;this._destroy=true;this._activeAtStart=true;this._setMaxOpacity=false;this._stage=0;this._stageTime=C3.New(C3.KahanSum);this._maxOpacity=this._inst.GetWorldInfo().GetOpacity()||1;if(properties){this._fadeInTime=
properties[FADE_IN_TIME];this._waitTime=properties[WAIT_TIME];this._fadeOutTime=properties[FADE_OUT_TIME];this._destroy=!!properties[DESTROY];this._activeAtStart=!!properties[ACTIVE_AT_START];this._stage=this._activeAtStart?0:3}if(this._activeAtStart)if(this._fadeInTime===0){this._stage=1;if(this._waitTime===0)this._stage=2}else{this._inst.GetWorldInfo().SetOpacity(0);this._runtime.UpdateRender()}this._StartTicking()}Release(){super.Release()}SaveToJson(){return{"fit":this._fadeInTime,"wt":this._waitTime,
"fot":this._fadeOutTime,"d":this._destroy,"s":this._stage,"st":this._stageTime.Get(),"mo":this._maxOpacity}}LoadFromJson(o){this._fadeInTime=o["fit"];this._waitTime=o["wt"];this._fadeOutTime=o["fot"];this._destroy=o["d"];this._stage=o["s"];this._stageTime.Set(o["st"]);this._maxOpacity=o["mo"]}Tick(){const dt=this._runtime.GetDt(this._inst);this._stageTime.Add(dt);const wi=this._inst.GetWorldInfo();if(this._stage===0){wi.SetOpacity(this._stageTime.Get()/this._fadeInTime*this._maxOpacity);this._runtime.UpdateRender();
if(wi.GetOpacity()>=this._maxOpacity){wi.SetOpacity(this._maxOpacity);this._stage=1;this._stageTime.Reset();this.Trigger(C3.Behaviors.Fade.Cnds.OnFadeInEnd)}}if(this._stage===1)if(this._stageTime.Get()>=this._waitTime){this._stage=2;this._stageTime.Reset();this.Trigger(C3.Behaviors.Fade.Cnds.OnWaitEnd)}if(this._stage===2)if(this._fadeOutTime!==0){wi.SetOpacity(this._maxOpacity-this._stageTime.Get()/this._fadeOutTime*this._maxOpacity);this._runtime.UpdateRender();if(wi.GetOpacity()<=0){this._stage=
3;this._stageTime.Reset();this.Trigger(C3.Behaviors.Fade.Cnds.OnFadeOutEnd);if(this._destroy)this._runtime.DestroyInstance(this._inst)}}}Start(){this._stage=0;this._stageTime.Reset();if(this._fadeInTime===0){this._stage=1;if(this._waitTime===0)this._stage=2}else{this._inst.GetWorldInfo().SetOpacity(0);this._runtime.UpdateRender()}}GetPropertyValueByIndex(index){switch(index){case FADE_IN_TIME:return this._fadeInTime;case WAIT_TIME:return this._waitTime;case FADE_OUT_TIME:return this._fadeOutTime;
case DESTROY:return this._destroy}}SetPropertyValueByIndex(index,value){switch(index){case FADE_IN_TIME:this._fadeInTime=value;break;case WAIT_TIME:this._waitTime=value;break;case FADE_OUT_TIME:this._fadeOutTime=value;break;case DESTROY:this._destroy=!!value;break}}GetDebuggerProperties(){const prefix="behaviors.fade";return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:prefix+".properties.fade-in-time.name",value:this._fadeInTime,onedit:v=>this._fadeInTime=v},{name:prefix+".properties.wait-time.name",
value:this._waitTime,onedit:v=>this._waitTime=v},{name:prefix+".properties.fade-out-time.name",value:this._fadeOutTime,onedit:v=>this._fadeOutTime=v},{name:prefix+".debugger.stage",value:[prefix+".debugger."+["fade-in","wait","fade-out","done"][this._stage]]}]}]}}};


'use strict';{const C3=self.C3;C3.Behaviors.Fade.Cnds={OnFadeOutEnd(){return true},OnFadeInEnd(){return true},OnWaitEnd(){return true}}};


'use strict';{const C3=self.C3;C3.Behaviors.Fade.Acts={StartFade(){if(!this._activeAtStart&&!this._setMaxOpacity){this._maxOpacity=this._inst.GetWorldInfo().GetOpacity()||1;this._setMaxOpacity=true}if(this._stage===3)this.Start()},RestartFade(){this.Start()},SetFadeInTime(t){if(t<0)t=0;this._fadeInTime=t},SetWaitTime(t){if(t<0)t=0;this._waitTime=t},SetFadeOutTime(t){if(t<0)t=0;this._fadeOutTime=t}}};


'use strict';{const C3=self.C3;C3.Behaviors.Fade.Exps={FadeInTime(){return this._fadeInTime},WaitTime(){return this._waitTime},FadeOutTime(){return this._fadeOutTime}}};


'use strict';{const C3=self.C3;C3.Behaviors.Timer=class TimerBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Behaviors.Timer.Type=class TimerType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;C3.Behaviors.Timer.SingleTimer=class SingleTimer{constructor(current,total,duration,isRegular){this._current=C3.New(C3.KahanSum);this._current.Set(current||0);this._total=C3.New(C3.KahanSum);this._total.Set(total||0);this._duration=duration||0;this._isRegular=!!isRegular;this._isPaused=false}GetCurrentTime(){return this._current.Get()}GetTotalTime(){return this._total.Get()}GetDuration(){return this._duration}SetPaused(p){this._isPaused=!!p}IsPaused(){return this._isPaused}Add(t){this._current.Add(t);
this._total.Add(t)}HasFinished(){return this._current.Get()>=this._duration}Update(){if(this.HasFinished())if(this._isRegular)this._current.Subtract(this._duration);else return true;return false}SaveToJson(){return{"c":this._current.Get(),"t":this._total.Get(),"d":this._duration,"r":this._isRegular,"p":this._isPaused}}LoadFromJson(o){this._current.Set(o["c"]);this._total.Set(o["t"]);this._duration=o["d"];this._isRegular=!!o["r"];this._isPaused=!!o["p"]}};C3.Behaviors.Timer.Instance=class TimerInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,
properties){super(behInst);this._timers=new Map}Release(){this._timers.clear();super.Release()}_UpdateTickState(){if(this._timers.size>0){this._StartTicking();this._StartTicking2()}else{this._StopTicking();this._StopTicking2()}}SaveToJson(){const ret={};for(const [name,timer]of this._timers.entries())ret[name]=timer.SaveToJson();return ret}LoadFromJson(o){this._timers.clear();for(const [name,data]of Object.entries(o)){const timer=new C3.Behaviors.Timer.SingleTimer;timer.LoadFromJson(data);this._timers.set(name,
timer)}this._UpdateTickState()}Tick(){const dt=this._runtime.GetDt(this._inst);for(const timer of this._timers.values())if(!timer.IsPaused())timer.Add(dt)}Tick2(){for(const [name,timer]of this._timers.entries()){const shouldDelete=timer.Update();if(shouldDelete)this._timers.delete(name)}}GetDebuggerProperties(){return[{title:"behaviors.timer.debugger.timers",properties:[...this._timers.entries()].map(entry=>({name:"$"+entry[0],value:`${Math.round(entry[1].GetCurrentTime()*10)/10} / ${Math.round(entry[1].GetDuration()*
10)/10}`}))}]}}};


'use strict';{const C3=self.C3;C3.Behaviors.Timer.Cnds={OnTimer(name){const timer=this._timers.get(name.toLowerCase());if(!timer)return false;return timer.HasFinished()},IsTimerRunning(name){return this._timers.has(name.toLowerCase())},IsTimerPaused(name){const timer=this._timers.get(name.toLowerCase());return timer&&timer.IsPaused()}}};


'use strict';{const C3=self.C3;C3.Behaviors.Timer.Acts={StartTimer(duration,type,name){const timer=new C3.Behaviors.Timer.SingleTimer(0,0,duration,type===1);this._timers.set(name.toLowerCase(),timer);this._UpdateTickState()},StopTimer(name){this._timers.delete(name.toLowerCase());this._UpdateTickState()},PauseResumeTimer(name,state){const timer=this._timers.get(name.toLowerCase());if(timer)timer.SetPaused(state===0)}}};


'use strict';{const C3=self.C3;C3.Behaviors.Timer.Exps={CurrentTime(name){const timer=this._timers.get(name.toLowerCase());if(!timer)return 0;return timer.GetCurrentTime()},TotalTime(name){const timer=this._timers.get(name.toLowerCase());if(!timer)return 0;return timer.GetTotalTime()},Duration(name){const timer=this._timers.get(name.toLowerCase());if(!timer)return 0;return timer.GetDuration()}}};


'use strict';{const C3=self.C3;C3.Behaviors.solid=class SolidBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Behaviors.solid.Type=class SolidType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;const ENABLE=0;const TAGS=1;const EMPTY_SET=new Set;C3.Behaviors.solid.Instance=class SolidInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this.SetEnabled(true);if(properties){this.SetEnabled(properties[ENABLE]);this.SetTags(properties[TAGS])}}Release(){super.Release()}SetEnabled(e){this._inst._SetSolidEnabled(!!e)}IsEnabled(){return this._inst._IsSolidEnabled()}SetTags(tagList){const savedDataMap=this._inst.GetSavedDataMap();
if(!tagList.trim()){savedDataMap.delete("solidTags");return}let solidTags=savedDataMap.get("solidTags");if(!solidTags){solidTags=new Set;savedDataMap.set("solidTags",solidTags)}solidTags.clear();for(const tag of tagList.split(" "))if(tag)solidTags.add(tag.toLowerCase())}GetTags(){return this._inst.GetSavedDataMap().get("solidTags")||EMPTY_SET}SaveToJson(){return{"e":this.IsEnabled()}}LoadFromJson(o){this.SetEnabled(o["e"])}GetPropertyValueByIndex(index){switch(index){case ENABLE:return this.IsEnabled()}}SetPropertyValueByIndex(index,
value){switch(index){case ENABLE:this.SetEnabled(value);break}}GetDebuggerProperties(){return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.IsEnabled(),onedit:v=>this.SetEnabled(v)}]}]}}};


'use strict';{const C3=self.C3;C3.Behaviors.solid.Cnds={IsEnabled(){return this.IsEnabled()}}};


'use strict';{const C3=self.C3;C3.Behaviors.solid.Acts={SetEnabled(e){this.SetEnabled(e)},SetTags(tagList){this.SetTags(tagList)}}};


'use strict';{const C3=self.C3;C3.Behaviors.solid.Exps={}};


'use strict';{const C3=self.C3;C3.Behaviors.Pin=class PinBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Behaviors.Pin.Type=class PinType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;C3.Behaviors.Pin.Instance=class PinInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this._pinInst=null;this._pinUid=-1;this._mode="";this._propSet=new Set;this._pinDist=0;this._pinAngle=0;this._pinImagePoint=0;this._dx=0;this._dy=0;this._dWidth=0;this._dHeight=0;this._dAngle=0;this._dz=0;this._lastKnownAngle=0;this._destroy=false;if(properties)this._destroy=properties[0];const rt=this._runtime.Dispatcher();this._disposables=
new C3.CompositeDisposable(C3.Disposable.From(rt,"instancedestroy",e=>this._OnInstanceDestroyed(e.instance)),C3.Disposable.From(rt,"afterload",e=>this._OnAfterLoad()))}Release(){this._pinInst=null;super.Release()}_SetPinInst(inst){if(inst){this._pinInst=inst;this._StartTicking2()}else{this._pinInst=null;this._StopTicking2()}}_Pin(objectClass,mode,propList){if(!objectClass)return;const otherInst=objectClass.GetFirstPicked(this._inst);if(!otherInst)return;this._mode=mode;this._SetPinInst(otherInst);
const myWi=this._inst.GetWorldInfo();const otherWi=otherInst.GetWorldInfo();if(this._mode==="properties"){const propSet=this._propSet;propSet.clear();for(const p of propList)propSet.add(p);this._dx=myWi.GetX()-otherWi.GetX();this._dy=myWi.GetY()-otherWi.GetY();this._dAngle=myWi.GetAngle()-otherWi.GetAngle();this._lastKnownAngle=myWi.GetAngle();this._dz=myWi.GetZElevation()-otherWi.GetZElevation();if(propSet.has("x")&&propSet.has("y")){this._pinAngle=C3.angleTo(otherWi.GetX(),otherWi.GetY(),myWi.GetX(),
myWi.GetY())-otherWi.GetAngle();this._pinDist=C3.distanceTo(otherWi.GetX(),otherWi.GetY(),myWi.GetX(),myWi.GetY())}if(propSet.has("width-abs"))this._dWidth=myWi.GetWidth()-otherWi.GetWidth();else if(propSet.has("width-scale"))this._dWidth=myWi.GetWidth()/otherWi.GetWidth();if(propSet.has("height-abs"))this._dHeight=myWi.GetHeight()-otherWi.GetHeight();else if(propSet.has("height-scale"))this._dHeight=myWi.GetHeight()/otherWi.GetHeight()}else this._pinDist=C3.distanceTo(otherWi.GetX(),otherWi.GetY(),
myWi.GetX(),myWi.GetY())}SaveToJson(){const propSet=this._propSet;const mode=this._mode;const ret={"uid":this._pinInst?this._pinInst.GetUID():-1,"m":mode};if(mode==="rope"||mode==="bar")ret["pd"]=this._pinDist;else if(mode==="properties"){ret["ps"]=[...this._propSet];if(propSet.has("imagepoint"))ret["ip"]=this._pinImagePoint;else if(propSet.has("x")&&propSet.has("y")){ret["pa"]=this._pinAngle;ret["pd"]=this._pinDist}else{if(propSet.has("x"))ret["dx"]=this._dx;if(propSet.has("y"))ret["dy"]=this._dy}if(propSet.has("angle")){ret["da"]=
this._dAngle;ret["lka"]=this._lastKnownAngle}if(propSet.has("width-abs")||propSet.has("width-scale"))ret["dw"]=this._dWidth;if(propSet.has("height-abs")||propSet.has("height-scale"))ret["dh"]=this._dHeight;if(propSet.has("z"))ret["dz"]=this._dz}return ret}LoadFromJson(o){const mode=o["m"];const propSet=this._propSet;propSet.clear();this._pinUid=o["uid"];if(typeof mode==="number"){this._LoadFromJson_Legacy(o);return}this._mode=mode;if(mode==="rope"||mode==="bar")this._pinDist=o["pd"];else if(mode===
"properties"){for(const p of o["ps"])propSet.add(p);if(propSet.has("imagepoint"))this._pinImagePoint=o["ip"];else if(propSet.has("x")&&propSet.has("y")){this._pinAngle=o["pa"];this._pinDist=o["pd"]}else{if(propSet.has("x"))this._dx=o["dx"];if(propSet.has("y"))this._dy=o["dy"]}if(propSet.has("angle")){this._dAngle=o["da"];this._lastKnownAngle=o["lka"]||0}if(propSet.has("width-abs")||propSet.has("width-scale"))this._dWidth=o["dw"];if(propSet.has("height-abs")||propSet.has("height-scale"))this._dHeight=
o["dh"];if(propSet.has("z"))this._dz=o["dz"]}}_LoadFromJson_Legacy(o){const propSet=this._propSet;const myStartAngle=o["msa"];const theirStartAngle=o["tsa"];const pinAngle=o["pa"];const pinDist=o["pd"];const mode=o["m"];switch(mode){case 0:this._mode="properties";propSet.add("x").add("y").add("angle");this._pinAngle=pinAngle;this._pinDist=pinDist;this._dAngle=myStartAngle-theirStartAngle;this._lastKnownAngle=o["lka"];break;case 1:this._mode="properties";propSet.add("x").add("y");this._pinAngle=pinAngle;
this._pinDist=pinDist;break;case 2:this._mode="properties";propSet.add("angle");this._dAngle=myStartAngle-theirStartAngle;this._lastKnownAngle=o["lka"];break;case 3:this._mode="rope";this._pinDist=o["pd"];break;case 4:this._mode="bar";this._pinDist=o["pd"];break}}_OnAfterLoad(){if(this._pinUid===-1)this._SetPinInst(null);else{this._SetPinInst(this._runtime.GetInstanceByUID(this._pinUid));this._pinUid=-1}}_OnInstanceDestroyed(inst){if(this._pinInst===inst){this._SetPinInst(null);if(this._destroy)this._runtime.DestroyInstance(this._inst)}}Tick2(){const pinInst=
this._pinInst;if(!pinInst)return;const pinWi=pinInst.GetWorldInfo();const myInst=this._inst;const myWi=myInst.GetWorldInfo();const mode=this._mode;let bboxChanged=false;if(mode==="rope"||mode==="bar"){const dist=C3.distanceTo(myWi.GetX(),myWi.GetY(),pinWi.GetX(),pinWi.GetY());if(dist>this._pinDist||mode==="bar"&&dist<this._pinDist){const a=C3.angleTo(pinWi.GetX(),pinWi.GetY(),myWi.GetX(),myWi.GetY());myWi.SetXY(pinWi.GetX()+Math.cos(a)*this._pinDist,pinWi.GetY()+Math.sin(a)*this._pinDist);bboxChanged=
true}}else{const propSet=this._propSet;let v=0;if(propSet.has("imagepoint")){const [newX,newY]=pinInst.GetImagePoint(this._pinImagePoint);if(!myWi.EqualsXY(newX,newY)){myWi.SetXY(newX,newY);bboxChanged=true}}else if(propSet.has("x")&&propSet.has("y")){const newX=pinWi.GetX()+Math.cos(pinWi.GetAngle()+this._pinAngle)*this._pinDist;const newY=pinWi.GetY()+Math.sin(pinWi.GetAngle()+this._pinAngle)*this._pinDist;if(!myWi.EqualsXY(newX,newY)){myWi.SetXY(newX,newY);bboxChanged=true}}else{v=pinWi.GetX()+
this._dx;if(propSet.has("x")&&v!==myWi.GetX()){myWi.SetX(v);bboxChanged=true}v=pinWi.GetY()+this._dy;if(propSet.has("y")&&v!==myWi.GetY()){myWi.SetY(v);bboxChanged=true}}if(propSet.has("angle")){if(this._lastKnownAngle!==myWi.GetAngle())this._dAngle=C3.clampAngle(this._dAngle+(myWi.GetAngle()-this._lastKnownAngle));v=C3.clampAngle(pinWi.GetAngle()+this._dAngle);if(v!==myWi.GetAngle()){myWi.SetAngle(v);bboxChanged=true}this._lastKnownAngle=myWi.GetAngle()}if(propSet.has("width-abs")){v=pinWi.GetWidth()+
this._dWidth;if(v!==myWi.GetWidth()){myWi.SetWidth(v);bboxChanged=true}}if(propSet.has("width-scale")){v=pinWi.GetWidth()*this._dWidth;if(v!==myWi.GetWidth()){myWi.SetWidth(v);bboxChanged=true}}if(propSet.has("height-abs")){v=pinWi.GetHeight()+this._dHeight;if(v!==myWi.GetHeight()){myWi.SetHeight(v);bboxChanged=true}}if(propSet.has("height-scale")){v=pinWi.GetHeight()*this._dHeight;if(v!==myWi.GetHeight()){myWi.SetHeight(v);bboxChanged=true}}if(propSet.has("z")){v=pinWi.GetZElevation()+this._dz;if(v!==
myWi.GetZElevation()){myWi.SetZElevation(v);this._runtime.UpdateRender()}}}if(bboxChanged)myWi.SetBboxChanged()}GetDebuggerProperties(){const prefix="behaviors.pin.debugger";return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:prefix+".is-pinned",value:!!this._pinInst},{name:prefix+".pinned-uid",value:this._pinInst?this._pinInst.GetUID():0}]}]}}};


'use strict';{const C3=self.C3;C3.Behaviors.Pin.Cnds={IsPinned(){return!!this._pinInst},WillDestroy(){return this._destroy}}};


'use strict';{const C3=self.C3;C3.Behaviors.Pin.Acts={PinByDistance(objectClass,mode){this._Pin(objectClass,mode===0?"rope":"bar")},PinByProperties(objectClass,ex,ey,ea,ew,eh,ez){const propList=[];if(ex)propList.push("x");if(ey)propList.push("y");if(ea)propList.push("angle");if(ez)propList.push("z");if(ew===1)propList.push("width-abs");else if(ew===2)propList.push("width-scale");if(eh===1)propList.push("height-abs");else if(eh===2)propList.push("height-scale");if(propList.length===0)return;this._Pin(objectClass,
"properties",propList)},PinByImagePoint(objectClass,imgPt,ea,ew,eh,ez){const propList=["imagepoint"];if(ea)propList.push("angle");if(ez)propList.push("z");if(ew===1)propList.push("width-abs");else if(ew===2)propList.push("width-scale");if(eh===1)propList.push("height-abs");else if(eh===2)propList.push("height-scale");this._pinImagePoint=imgPt;this._Pin(objectClass,"properties",propList)},SetPinDistance(d){if(this._mode==="rope"||this._mode==="bar")this._pinDist=Math.max(d,0)},SetDestroy(d){this._destroy=
d},Unpin(){this._SetPinInst(null);this._mode="";this._propSet.clear();this._pinImagePoint=""},Pin(objectClass,mode){switch(mode){case 0:this._Pin(objectClass,"properties",["x","y","angle"]);break;case 1:this._Pin(objectClass,"properties",["x","y"]);break;case 2:this._Pin(objectClass,"properties",["angle"]);break;case 3:this._Pin(objectClass,"rope");break;case 4:this._Pin(objectClass,"bar");break}}}};


'use strict';{const C3=self.C3;C3.Behaviors.Pin.Exps={PinnedUID(){return this._pinInst?this._pinInst.GetUID():-1}}};


'use strict';{const C3=self.C3;C3.Behaviors.DragnDrop=class DragnDropBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts);const rt=this._runtime.Dispatcher();this._disposables=new C3.CompositeDisposable(C3.Disposable.From(rt,"pointerdown",e=>this._OnPointerDown(e.data)),C3.Disposable.From(rt,"pointermove",e=>this._OnPointerMove(e.data)),C3.Disposable.From(rt,"pointerup",e=>this._OnPointerUp(e.data,false)),C3.Disposable.From(rt,"pointercancel",e=>this._OnPointerUp(e.data,true)))}Release(){this._disposables.Release();
this._disposables=null;super.Release()}_OnPointerDown(e){if(e["pointerType"]==="mouse"&&e["button"]!==0)return;this._OnInputDown(e["pointerId"].toString(),e["pageX"]-this._runtime.GetCanvasClientX(),e["pageY"]-this._runtime.GetCanvasClientY())}_OnPointerMove(e){if((e["lastButtons"]&1)!==0&&(e["buttons"]&1)===0)this._OnInputUp(e["pointerId"].toString());else this._OnInputMove(e["pointerId"].toString(),e["pageX"]-this._runtime.GetCanvasClientX(),e["pageY"]-this._runtime.GetCanvasClientY())}_OnPointerUp(e,
isCancel){if(e["pointerType"]==="mouse"&&e["button"]!==0)return;this._OnInputUp(e["pointerId"].toString())}async _OnInputDown(src,clientX,clientY){const myInstances=this.GetInstances();let topMost=null;let topBehInst=null;let topX=0;let topY=0;for(const inst of myInstances){const behInst=inst.GetBehaviorSdkInstanceFromCtor(C3.Behaviors.DragnDrop);if(!behInst.IsEnabled()||behInst.IsDragging())continue;const wi=inst.GetWorldInfo();const layer=wi.GetLayer();const [lx,ly]=layer.CanvasCssToLayer(clientX,
clientY,wi.GetTotalZElevation());if(!wi.ContainsPoint(lx,ly))continue;if(!topMost){topMost=inst;topBehInst=behInst;topX=lx;topY=ly;continue}const topWi=topMost.GetWorldInfo();if(layer.GetIndex()>topWi.GetLayer().GetIndex()||layer.GetIndex()===topWi.GetLayer().GetIndex()&&wi.GetZIndex()>topWi.GetZIndex()){topMost=inst;topBehInst=behInst;topX=lx;topY=ly}}if(topMost)await topBehInst._OnDown(src,topX,topY)}_OnInputMove(src,clientX,clientY){const myInstances=this.GetInstances();for(const inst of myInstances){const behInst=
inst.GetBehaviorSdkInstanceFromCtor(C3.Behaviors.DragnDrop);if(!behInst.IsEnabled()||!behInst.IsDragging()||behInst.IsDragging()&&behInst.GetDragSource()!==src)continue;const wi=inst.GetWorldInfo();const layer=wi.GetLayer();const [lx,ly]=layer.CanvasCssToLayer(clientX,clientY,wi.GetTotalZElevation());behInst._OnMove(lx,ly)}}async _OnInputUp(src){const myInstances=this.GetInstances();for(const inst of myInstances){const behInst=inst.GetBehaviorSdkInstanceFromCtor(C3.Behaviors.DragnDrop);if(behInst.IsDragging()&&
behInst.GetDragSource()===src)await behInst._OnUp()}}}};


'use strict';{const C3=self.C3;C3.Behaviors.DragnDrop.Type=class DragnDropType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;const AXES=0;const ENABLE=1;C3.Behaviors.DragnDrop.Instance=class DragnDropInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this._isDragging=false;this._dx=0;this._dy=0;this._dragSource="<none>";this._axes=0;this._isEnabled=true;if(properties){this._axes=properties[AXES];this._isEnabled=properties[ENABLE]}}Release(){super.Release()}SaveToJson(){return{"a":this._axes,"e":this._isEnabled}}LoadFromJson(o){this._axes=o["a"];this._isEnabled=
o["e"];this._isDragging=false}IsEnabled(){return this._isEnabled}IsDragging(){return this._isDragging}GetDragSource(){return this._dragSource}async _OnDown(src,x,y){const wi=this.GetWorldInfo();this._dx=x-wi.GetX();this._dy=y-wi.GetY();this._isDragging=true;this._dragSource=src;await this.TriggerAsync(C3.Behaviors.DragnDrop.Cnds.OnDragStart)}_OnMove(x,y){const wi=this.GetWorldInfo();const newX=x-this._dx;const newY=y-this._dy;if(this._axes===0){if(wi.GetX()!==newX||wi.GetY()!==newY){wi.SetXY(newX,
newY);wi.SetBboxChanged()}}else if(this._axes===1){if(wi.GetX()!==newX){wi.SetX(newX);wi.SetBboxChanged()}}else if(this._axes===2)if(wi.GetY()!==newY){wi.SetY(newY);wi.SetBboxChanged()}}async _OnUp(){this._isDragging=false;await this.TriggerAsync(C3.Behaviors.DragnDrop.Cnds.OnDrop)}GetPropertyValueByIndex(index){switch(index){case AXES:return this._axes;case ENABLE:return this._isEnabled}}SetPropertyValueByIndex(index,value){switch(index){case AXES:this._axes=value;break;case ENABLE:this._isEnabled=
!!value;break}}GetDebuggerProperties(){const prefix="behaviors.dragndrop";return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:prefix+".debugger.is-dragging",value:this._isDragging},{name:prefix+".properties.enabled.name",value:this._isEnabled,onedit:v=>this._isEnabled=v}]}]}}};


'use strict';{const C3=self.C3;C3.Behaviors.DragnDrop.Cnds={IsDragging(){return this._isDragging},OnDragStart(){return true},OnDrop(){return true},IsEnabled(){return this._isEnabled}}};


'use strict';{const C3=self.C3;C3.Behaviors.DragnDrop.Acts={SetEnabled(e){this._isEnabled=!!e;if(!this._isEnabled)this._isDragging=false},SetAxes(a){this._axes=a},Drop(){if(this._isDragging)this._OnUp()}}};


'use strict';{const C3=self.C3;C3.Behaviors.DragnDrop.Exps={}};


'use strict';{const C3=self.C3;C3.Behaviors.Bullet=class BulletBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Behaviors.Bullet.Type=class BulletType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;const IBehaviorInstance=self.IBehaviorInstance;const SPEED=0;const ACCELERATION=1;const GRAVITY=2;const BOUNCE_OFF_SOLIDS=3;const SET_ANGLE=4;const STEPPING=5;const ENABLE=6;C3.Behaviors.Bullet.Instance=class BulletInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);const wi=this.GetWorldInfo();this._speed=0;this._acc=0;this._g=0;this._bounceOffSolid=false;this._setAngle=false;this._isStepping=false;this._isEnabled=true;this._dx=
0;this._dy=0;this._lastX=wi.GetX();this._lastY=wi.GetY();this._lastKnownAngle=wi.GetAngle();this._travelled=0;this._stepSize=Math.min(Math.abs(wi.GetWidth()),Math.abs(wi.GetHeight())/2);this._stopStepping=false;if(properties){this._speed=properties[SPEED];this._acc=properties[ACCELERATION];this._g=properties[GRAVITY];this._bounceOffSolid=!!properties[BOUNCE_OFF_SOLIDS];this._setAngle=!!properties[SET_ANGLE];this._isStepping=!!properties[STEPPING];this._isEnabled=!!properties[ENABLE]}const a=wi.GetAngle();
this._dx=Math.cos(a)*this._speed;this._dy=Math.sin(a)*this._speed;if(this._isEnabled){this._StartTicking();if(this._bounceOffSolid)this._StartPostTicking()}}Release(){super.Release()}SaveToJson(){const o={"dx":this._dx,"dy":this._dy,"lx":this._lastX,"ly":this._lastY,"lka":this._lastKnownAngle,"t":this._travelled};if(this._acc!==0)o["acc"]=this._acc;if(this._g!==0)o["g"]=this._g;if(this._isStepping)o["st"]=this._isStepping;if(!this._isEnabled)o["e"]=this._isEnabled;if(this._bounceOffSolid)o["bos"]=
this._bounceOffSolid;if(this._setAngle)o["sa"]=this._setAngle;return o}LoadFromJson(o){this._dx=o["dx"];this._dy=o["dy"];this._lastX=o["lx"];this._lastY=o["ly"];this._lastKnownAngle=o["lka"];this._travelled=o["t"];this._acc=o.hasOwnProperty("acc")?o["acc"]:0;this._g=o.hasOwnProperty("g")?o["g"]:0;this._isStepping=o.hasOwnProperty("st")?o["st"]:false;this._bounceOffSolid=o.hasOwnProperty("bos")?o["bos"]:false;this._setAngle=o.hasOwnProperty("sa")?o["sa"]:false;this._SetEnabled(o.hasOwnProperty("e")?
o["e"]:true)}Tick(){if(!this._isEnabled)return;const dt=this._runtime.GetDt(this._inst);const wi=this._inst.GetWorldInfo();if(wi.GetAngle()!==this._lastKnownAngle){const angle=wi.GetAngle();if(this._setAngle){const s=C3.distanceTo(0,0,this._dx,this._dy);this._dx=Math.cos(angle)*s;this._dy=Math.sin(angle)*s}this._lastKnownAngle=angle}let xacc=0;let yacc=0;if(this._acc!==0){let s=C3.distanceTo(0,0,this._dx,this._dy);let a=0;if(this._dx===0&&this._dy===0)a=wi.GetAngle();else a=C3.angleTo(0,0,this._dx,
this._dy);s+=this._acc*dt;xacc=Math.cos(a)*this._acc;yacc=Math.sin(a)*this._acc;if(s<0){s=0;xacc=0;yacc=0}this._dx=Math.cos(a)*s;this._dy=Math.sin(a)*s}if(this._g!==0){this._dy+=this._g*dt;yacc+=this._g}this._lastX=wi.GetX();this._lastY=wi.GetY();if(this._dx!==0||this._dy!==0){const mx=this._dx*dt+.5*xacc*dt*dt;const my=this._dy*dt+.5*yacc*dt*dt;const stepDist=C3.distanceTo(0,0,mx,my);this._MoveBy(mx,my,stepDist);this._travelled+=stepDist;if(this._setAngle&&(mx!==0||my!==0)){const a=C3.angleTo(0,
0,mx,my);wi.SetAngle(a);this._lastKnownAngle=wi.GetAngle()}wi.SetBboxChanged()}}_MoveBy(mx,my,stepDist){const wi=this.GetWorldInfo();if(!this._isStepping||stepDist<=this._stepSize){wi.OffsetXY(mx,my);wi.SetBboxChanged();if(this._isStepping)this.Trigger(C3.Behaviors.Bullet.Cnds.OnStep);return}this._stopStepping=false;const startX=wi.GetX();const startY=wi.GetY();const endX=startX+mx;const endY=startY+my;const a=C3.angleTo(0,0,mx,my);const stepX=Math.cos(a)*this._stepSize;const stepY=Math.sin(a)*this._stepSize;
const stepCount=Math.floor(stepDist/this._stepSize);for(let i=1;i<=stepCount;++i){wi.SetXY(startX+stepX*i,startY+stepY*i);wi.SetBboxChanged();this.Trigger(C3.Behaviors.Bullet.Cnds.OnStep);if(this._inst.IsDestroyed()||this._stopStepping)return}wi.SetXY(endX,endY);wi.SetBboxChanged();this.Trigger(C3.Behaviors.Bullet.Cnds.OnStep)}PostTick(){if(!this._isEnabled||!this._bounceOffSolid||this._dx===0&&this._dy===0)return;const dt=this._runtime.GetDt(this._inst);const wi=this._inst.GetWorldInfo();const collisionEngine=
this._runtime.GetCollisionEngine();const bounceSolid=collisionEngine.TestOverlapSolid(this._inst);if(bounceSolid){collisionEngine.RegisterCollision(this._inst,bounceSolid);const s=C3.distanceTo(0,0,this._dx,this._dy);const bounceAngle=collisionEngine.CalculateBounceAngle(this._inst,this._lastX,this._lastY);this._dx=Math.cos(bounceAngle)*s;this._dy=Math.sin(bounceAngle)*s;wi.OffsetXY(this._dx*dt,this._dy*dt);wi.SetBboxChanged();if(this._setAngle){wi.SetAngle(bounceAngle);this._lastKnownAngle=wi.GetAngle();
wi.SetBboxChanged()}if(!collisionEngine.PushOutSolid(this._inst,this._dx/s,this._dy/s,Math.max(s*2.5*dt,30)))collisionEngine.PushOutSolidNearest(this._inst,100)}}GetPropertyValueByIndex(index){switch(index){case SPEED:return this._GetSpeed();case ACCELERATION:return this._GetAcceleration();case GRAVITY:return this._GetGravity();case SET_ANGLE:return this._setAngle;case STEPPING:return this._isStepping;case ENABLE:return this._IsEnabled()}}SetPropertyValueByIndex(index,value){switch(index){case SPEED:this._SetSpeed(value);
break;case ACCELERATION:this._acc=value;break;case GRAVITY:this._g=value;break;case SET_ANGLE:this._setAngle=!!value;break;case STEPPING:this._isStepping=!!value;break;case ENABLE:this._SetEnabled(!!value);break}}_SetSpeed(s){const a=C3.angleTo(0,0,this._dx,this._dy);this._dx=Math.cos(a)*s;this._dy=Math.sin(a)*s}_GetSpeed(){return C3.round6dp(C3.distanceTo(0,0,this._dx,this._dy))}_SetAcceleration(a){this._acc=a}_GetAcceleration(){return this._acc}_SetGravity(g){this._g=g}_GetGravity(){return this._g}_SetAngleOfMotion(a){const s=
C3.distanceTo(0,0,this._dx,this._dy);this._dx=Math.cos(a)*s;this._dy=Math.sin(a)*s}_GetAngleOfMotion(){return C3.angleTo(0,0,this._dx,this._dy)}_SetBounceOffSolids(b){b=!!b;if(this._bounceOffSolid===b)return;this._bounceOffSolid=b;if(this._isEnabled)if(this._bounceOffSolid)this._StartPostTicking();else this._StopPostTicking()}_IsBounceOffSolids(){return this._bounceOffSolid}_SetDistanceTravelled(d){this._travelled=d}_GetDistanceTravelled(){return this._travelled}_SetEnabled(e){this._isEnabled=!!e;
if(this._isEnabled){this._StartTicking();if(this._bounceOffSolid)this._StartPostTicking()}else{this._StopTicking();this._StopPostTicking()}}_IsEnabled(){return this._isEnabled}GetDebuggerProperties(){const prefix="behaviors.bullet";return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:prefix+".debugger.vector-x",value:this._dx,onedit:v=>this._dx=v},{name:prefix+".debugger.vector-y",value:this._dy,onedit:v=>this._dy=v},{name:prefix+".properties.speed.name",value:this._GetSpeed(),onedit:v=>
this._SetSpeed(v)},{name:prefix+".debugger.angle-of-motion",value:C3.toDegrees(this._GetAngleOfMotion())},{name:prefix+".properties.gravity.name",value:this._GetGravity(),onedit:v=>this._SetGravity(v)},{name:prefix+".properties.acceleration.name",value:this._GetAcceleration(),onedit:v=>this._SetAcceleration(v)},{name:prefix+".debugger.distance-travelled",value:this._GetDistanceTravelled()},{name:prefix+".properties.enabled.name",value:this._IsEnabled(),onedit:v=>this._SetEnabled(v)}]}]}GetScriptInterfaceClass(){return self.IBulletBehaviorInstance}};
const map=new WeakMap;self.IBulletBehaviorInstance=class IBulletBehaviorInstance extends IBehaviorInstance{constructor(){super();map.set(this,IBehaviorInstance._GetInitInst().GetSdkInstance())}get speed(){return map.get(this)._GetSpeed()}set speed(s){map.get(this)._SetSpeed(s)}get acceleration(){return map.get(this)._GetAcceleration()}set acceleration(a){map.get(this)._SetAcceleration(a)}get gravity(){return map.get(this)._GetGravity()}set gravity(g){map.get(this)._SetGravity(g)}get angleOfMotion(){return map.get(this)._GetAngleOfMotion()}set angleOfMotion(a){map.get(this)._SetAngleOfMotion(a)}get bounceOffSolids(){return map.get(this)._IsBounceOffSolids()}set bounceOffSolids(b){map.get(this)._SetBounceOffSolids(!!b)}get distanceTravelled(){return map.get(this)._GetDistanceTravelled()}set distanceTravelled(d){map.get(this)._SetDistanceTravelled(d)}get isEnabled(){return map.get(this)._IsEnabled()}set isEnabled(e){map.get(this)._SetEnabled(e)}}};


'use strict';{const C3=self.C3;C3.Behaviors.Bullet.Cnds={CompareSpeed(cmp,s){const speed=Math.sqrt(this._dx*this._dx+this._dy*this._dy);return C3.compare(speed,cmp,s)},CompareTravelled(cmp,d){return C3.compare(this._GetDistanceTravelled(),cmp,d)},OnStep(){return true},IsEnabled(){return this._IsEnabled()}}};


'use strict';{const C3=self.C3;C3.Behaviors.Bullet.Acts={SetSpeed(s){this._SetSpeed(s)},SetAcceleration(a){this._SetAcceleration(a)},SetGravity(g){this._SetGravity(g)},SetAngleOfMotion(a){this._SetAngleOfMotion(C3.toRadians(a))},Bounce(objectClass){if(!objectClass)return;const otherInst=objectClass.GetFirstPicked(this._inst);if(!otherInst)return;const wi=this._inst.GetWorldInfo();const collisionEngine=this._runtime.GetCollisionEngine();const dt=this._runtime.GetDt(this._inst);const s=C3.distanceTo(0,
0,this._dx,this._dy);const bounceAngle=collisionEngine.CalculateBounceAngle(this._inst,this._lastX,this._lastY,otherInst);this._dx=Math.cos(bounceAngle)*s;this._dy=Math.sin(bounceAngle)*s;wi.OffsetXY(this._dx*dt,this._dy*dt);wi.SetBboxChanged();if(this._setAngle){wi.SetAngle(bounceAngle);this._lastKnownAngle=wi.GetAngle();wi.SetBboxChanged()}if(s!==0)if(this._bounceOffSolid){if(!collisionEngine.PushOutSolid(this._inst,this._dx/s,this._dy/s,Math.max(s*2.5*dt,30)))collisionEngine.PushOutSolidNearest(this._inst,
100)}else collisionEngine.PushOut(this._inst,this._dx/s,this._dy/s,Math.max(s*2.5*dt,30),otherInst)},SetBounceOffSolids(b){this._SetBounceOffSolids(b)},SetDistanceTravelled(d){this._SetDistanceTravelled(d)},SetEnabled(e){this._SetEnabled(e)},StopStepping(){this._stopStepping=true}}};


'use strict';{const C3=self.C3;C3.Behaviors.Bullet.Exps={Speed(){return this._GetSpeed()},Acceleration(){return this._GetAcceleration()},AngleOfMotion(){return C3.toDegrees(this._GetAngleOfMotion())},DistanceTravelled(){return this._GetDistanceTravelled()},Gravity(){return this._GetGravity()}}};


'use strict';{const C3=self.C3;C3.Behaviors.MoveTo=class MoveToBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Behaviors.MoveTo.Type=class MoveToType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType)}Release(){super.Release()}OnCreate(){}}};


'use strict';{const C3=self.C3;const IBehaviorInstance=self.IBehaviorInstance;const PROP_MAX_SPEED=0;const PROP_ACCELERATION=1;const PROP_DECELERATION=2;const PROP_ROTATE_SPEED=3;const PROP_SET_ANGLE=4;const PROP_STOP_ON_SOLIDS=5;const PROP_ENABLED=6;C3.Behaviors.MoveTo.Instance=class MoveToInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this._maxSpeed=200;this._acc=600;this._dec=600;this._rotateSpeed=0;this._setAngle=true;this._stopOnSolids=false;this._isEnabled=
true;this._speed=0;this._movingAngle=this.GetWorldInfo().GetAngle();this._waypoints=[];if(properties){this._maxSpeed=properties[PROP_MAX_SPEED];this._acc=properties[PROP_ACCELERATION];this._dec=properties[PROP_DECELERATION];this._rotateSpeed=C3.toRadians(properties[PROP_ROTATE_SPEED]);this._setAngle=properties[PROP_SET_ANGLE];this._stopOnSolids=properties[PROP_STOP_ON_SOLIDS];this._isEnabled=properties[PROP_ENABLED]}}Release(){super.Release()}SaveToJson(){return{"ms":this._maxSpeed,"acc":this._acc,
"dec":this._dec,"rs":this._rotateSpeed,"sa":this._setAngle,"sos":this._stopOnSolids,"s":this._speed,"ma":this._movingAngle,"wp":this._waypoints.map(p=>({"x":p.x,"y":p.y})),"e":this._isEnabled}}LoadFromJson(o){this._maxSpeed=o["ms"];this._acc=o["acc"];this._dec=o["dec"];this._rotateSpeed=o["rs"];this._setAngle=o["sa"];this._stopOnSolids=o["sos"];this._speed=o["s"];this._movingAngle=o["ma"];this._waypoints=o["wp"].map(p=>({x:p["x"],y:p["y"]}));this._SetEnabled(o["e"]);if(this._isEnabled&&this._waypoints.length>
0)this._StartTicking()}_AddWaypoint(x,y,isDirect){if(isDirect)C3.clearArray(this._waypoints);this._waypoints.push({x,y});if(this._isEnabled)this._StartTicking()}_GetWaypointCount(){return this._waypoints.length}_GetWaypointXAt(i){i=Math.floor(i);if(i<0||i>=this._waypoints.length)return 0;return this._waypoints[i].x}_GetWaypointYAt(i){i=Math.floor(i);if(i<0||i>=this._waypoints.length)return 0;return this._waypoints[i].y}_IsMoving(){return this._waypoints.length>0}_Stop(){C3.clearArray(this._waypoints);
this._speed=0;this._StopTicking()}_GetTargetX(){if(this._waypoints.length>0)return this._waypoints[0].x;else return 0}_GetTargetY(){if(this._waypoints.length>0)return this._waypoints[0].y;else return 0}_SetSpeed(s){if(!this._IsMoving())return;this._speed=Math.min(s,this._maxSpeed)}_GetSpeed(){return this._speed}_SetMaxSpeed(ms){this._maxSpeed=Math.max(ms,0);this._SetSpeed(this._speed)}_GetMaxSpeed(){return this._maxSpeed}_IsRotationEnabled(){return this._rotateSpeed!==0}Tick(){if(!this._isEnabled||
!this._IsMoving())return;const dt=this._runtime.GetDt(this._inst);const wi=this._inst.GetWorldInfo();const startX=wi.GetX();const startY=wi.GetY();const startAngle=wi.GetAngle();let curSpeed=this._speed;let maxSpeed=this._maxSpeed;const acc=this._acc;const dec=this._dec;const targetX=this._GetTargetX();const targetY=this._GetTargetY();const angleToTarget=C3.angleTo(startX,startY,targetX,targetY);let isWithinStoppingDistance=false;if(dec>0&&this._waypoints.length===1){const stoppingDist=.5*curSpeed*
curSpeed/dec*1.0001;isWithinStoppingDistance=C3.distanceSquared(startX,startY,targetX,targetY)<=stoppingDist*stoppingDist;if(isWithinStoppingDistance){const remainingDist=C3.distanceTo(startX,startY,targetX,targetY);curSpeed=Math.sqrt(2*dec*remainingDist);maxSpeed=curSpeed;this._speed=curSpeed}}if(this._IsRotationEnabled()){const da=C3.angleDiff(this._movingAngle,angleToTarget);if(da>Number.EPSILON){const t=da/this._rotateSpeed;const dist=C3.distanceTo(wi.GetX(),wi.GetY(),targetX,targetY);const r=
dist/(2*Math.sin(da));const curveDist=r*da;maxSpeed=Math.min(maxSpeed,C3.clamp(curveDist/t,0,this._maxSpeed))}}let curAcc=isWithinStoppingDistance?-dec:acc;const stepDist=Math.min(curSpeed*dt+.5*curAcc*dt*dt,maxSpeed*dt);if(isWithinStoppingDistance){if(dec>0){this._speed=Math.max(this._speed-dec*dt,0);if(this._speed===0){this._OnArrived(wi,targetX,targetY);return}}}else if(acc===0)this._speed=maxSpeed;else this._speed=Math.min(this._speed+acc*dt,maxSpeed);if(C3.distanceSquared(wi.GetX(),wi.GetY(),
targetX,targetY)<=stepDist*stepDist){this._OnArrived(wi,targetX,targetY);return}if(this._IsRotationEnabled())this._movingAngle=C3.angleRotate(this._movingAngle,angleToTarget,this._rotateSpeed*dt);else this._movingAngle=angleToTarget;wi.OffsetXY(Math.cos(this._movingAngle)*stepDist,Math.sin(this._movingAngle)*stepDist);if(this._setAngle)wi.SetAngle(this._movingAngle);wi.SetBboxChanged();this._CheckSolidCollision(startX,startY,startAngle)}_OnArrived(wi,targetX,targetY){wi.SetXY(targetX,targetY);wi.SetBboxChanged();
this._waypoints.shift();if(this._waypoints.length===0){this._speed=0;this._StopTicking()}this.GetScriptInterface().dispatchEvent(C3.New(C3.Event,"arrived"));this.Trigger(C3.Behaviors.MoveTo.Cnds.OnArrived)}_CheckSolidCollision(startX,startY,startAngle){const collisionEngine=this._runtime.GetCollisionEngine();if(this._stopOnSolids&&collisionEngine.TestOverlapSolid(this._inst)){this._Stop();const wi=this._inst.GetWorldInfo();const x=wi.GetX();const y=wi.GetY();const a=C3.angleTo(x,y,startX,startY);
const dist=C3.distanceTo(x,y,startX,startY);if(!collisionEngine.PushOutSolid(this._inst,Math.cos(a),Math.sin(a),Math.max(dist,1))){wi.SetXY(startX,startY);wi.SetAngle(startAngle);wi.SetBboxChanged()}this.GetScriptInterface().dispatchEvent(C3.New(C3.Event,"hitsolid"));this.Trigger(C3.Behaviors.MoveTo.Cnds.OnHitSolid)}}_IsSetAngle(){return this._setAngle}_SetSetAngle(a){this._setAngle=!!a}_SetAngleOfMotion(a){this._movingAngle=a;if(this._isEnabled&&this._setAngle&&!this._IsMoving()){const wi=this.GetWorldInfo();
wi.SetAngle(this._movingAngle);wi.SetBboxChanged()}}_GetAngleOfMotion(){return this._movingAngle}_SetAcceleration(a){this._acc=Math.max(a,0)}_GetAcceleration(){return this._acc}_SetDeceleration(d){this._dec=Math.max(d,0)}_GetDeceleration(){return this._dec}_SetRotateSpeed(r){this._rotateSpeed=Math.max(r,0)}_GetRotateSpeed(){return this._rotateSpeed}_SetStopOnSolids(e){this._stopOnSolids=!!e}_IsStopOnSolids(){return this._stopOnSolids}_SetEnabled(e){e=!!e;if(this._isEnabled===e)return;this._isEnabled=
e;if(this._isEnabled&&this._IsMoving())this._StartTicking();else this._StopTicking()}_IsEnabled(){return this._isEnabled}GetPropertyValueByIndex(index){switch(index){case PROP_MAX_SPEED:return this._GetMaxSpeed();case PROP_ACCELERATION:return this._GetAcceleration();case PROP_DECELERATION:return this._GetDeceleration();case PROP_ROTATE_SPEED:return C3.toDegrees(this._GetRotateSpeed());case PROP_SET_ANGLE:return this._IsSetAngle();case PROP_STOP_ON_SOLIDS:return this._IsStopOnSolids();case PROP_ENABLED:return this._IsEnabled()}}SetPropertyValueByIndex(index,
value){switch(index){case PROP_MAX_SPEED:this._SetMaxSpeed(value);break;case PROP_ACCELERATION:this._SetAcceleration(value);break;case PROP_DECELERATION:this._SetDeceleration(value);break;case PROP_ROTATE_SPEED:this._SetRotateSpeed(C3.toRadians(value));break;case PROP_SET_ANGLE:this._SetSetAngle(value);break;case PROP_STOP_ON_SOLIDS:this._SetStopOnSolids(value);break;case PROP_ENABLED:this._SetEnabled(value);break}}GetDebuggerProperties(){const prefix="behaviors.moveto";return[{title:"$"+this.GetBehaviorType().GetName(),
properties:[{name:prefix+".debugger.speed",value:this._GetSpeed(),onedit:v=>this._SetSpeed(v)},{name:prefix+".debugger.angle-of-motion",value:C3.toDegrees(this._GetAngleOfMotion()),onedit:v=>this._movingAngle=C3.toRadians(v)},{name:prefix+".debugger.target-x",value:this._GetTargetX()},{name:prefix+".debugger.target-y",value:this._GetTargetY()},{name:prefix+".debugger.waypoint-count",value:this._GetWaypointCount()},{name:prefix+".properties.max-speed.name",value:this._GetMaxSpeed(),onedit:v=>this._SetMaxSpeed(v)},
{name:prefix+".properties.acceleration.name",value:this._GetAcceleration(),onedit:v=>this._SetAcceleration(v)},{name:prefix+".properties.deceleration.name",value:this._GetDeceleration(),onedit:v=>this._SetDeceleration(v)},{name:prefix+".properties.rotate-speed.name",value:C3.toDegrees(this._GetRotateSpeed()),onedit:v=>this._SetRotateSpeed(C3.toRadians(v))},{name:prefix+".properties.enabled.name",value:this._IsEnabled(),onedit:v=>this._SetEnabled(v)}]}]}GetScriptInterfaceClass(){return self.IMoveToBehaviorInstance}};
const map=new WeakMap;self.IMoveToBehaviorInstance=class IMoveToBehaviorInstance extends IBehaviorInstance{constructor(){super();map.set(this,IBehaviorInstance._GetInitInst().GetSdkInstance())}moveToPosition(x,y,isDirect=true){map.get(this)._AddWaypoint(x,y,!!isDirect)}getTargetX(){return map.get(this)._GetTargetX()}getTargetY(){return map.get(this)._GetTargetY()}getTargetPosition(){const b=map.get(this);return[b._GetTargetX(),b._GetTargetY()]}getWaypointCount(){return map.get(this)._GetWaypointCount()}getWaypointX(i){return map.get(this)._GetWaypointXAt(+i)}getWaypointY(i){return map.get(this)._GetWaypointYAt(+i)}getWaypoint(i){i=
+i;const b=map.get(this);return[b._GetWaypointXAt(i),b._GetWaypointYAt(i)]}stop(){map.get(this)._Stop()}get isMoving(){return map.get(this)._IsMoving()}get speed(){return map.get(this)._GetSpeed()}set speed(s){map.get(this)._SetSpeed(s)}get maxSpeed(){return map.get(this)._GetMaxSpeed()}set maxSpeed(ms){map.get(this)._SetMaxSpeed(ms)}get acceleration(){return map.get(this)._GetAcceleration()}set acceleration(a){map.get(this)._SetAcceleration(a)}get deceleration(){return map.get(this)._GetDeceleration()}set deceleration(d){map.get(this)._SetDeceleration(d)}get angleOfMotion(){return map.get(this)._GetAngleOfMotion()}set angleOfMotion(a){map.get(this)._SetAngleOfMotion(a)}get rotateSpeed(){return map.get(this)._GetRotateSpeed()}set rotateSpeed(r){map.get(this)._SetRotateSpeed(r)}get isStopOnSolids(){return map.get(this)._IsStopOnSolids()}set isStopOnSolids(e){map.get(this)._SetStopOnSolids(e)}get isEnabled(){return map.get(this)._IsEnabled()}set isEnabled(e){map.get(this)._SetEnabled(e)}}};


'use strict';{const C3=self.C3;C3.Behaviors.MoveTo.Cnds={IsMoving(){return this._IsMoving()},CompareSpeed(cmp,s){return C3.compare(this._GetSpeed(),cmp,s)},IsEnabled(){return this._IsEnabled()},OnArrived(){return true},OnHitSolid(){return true}}};


'use strict';{const C3=self.C3;C3.Behaviors.MoveTo.Acts={MoveToPosition(x,y,mode){this._AddWaypoint(x,y,mode===0)},MoveToObject(objectClass,imgPt,mode){if(!objectClass)return;const inst=objectClass.GetPairedInstance(this._inst);if(!inst||!inst.GetWorldInfo())return;const [x,y]=inst.GetImagePoint(imgPt);this._AddWaypoint(x,y,mode===0)},MoveAlongPathfindingPath(mode){const behInst=this._inst.GetBehaviorSdkInstanceFromCtor(C3.Behaviors.Pathfinding);if(!behInst)return;const path=behInst._GetPath();if(path.length===
0)return;for(let i=0,len=path.length;i<len;++i){const n=path[i];this._AddWaypoint(n.x,n.y,i===0&&mode===0)}},MoveAlongTimeline(timeline,trackId,mode){let trackState=null;if(trackId)trackState=timeline.GetTrackById(trackId);else trackState=C3.first(timeline.GetTracks());if(!trackState)return;const xTrack=trackState.GetPropertyTrack("offsetX");const yTrack=trackState.GetPropertyTrack("offsetY");if(!xTrack||!yTrack)return;const xPositions=[...xTrack.GetPropertyKeyframeValues()];const yPositions=[...yTrack.GetPropertyKeyframeValues()];
if(xPositions.length===0||yPositions.length===0)return;let xOrigin=0;let yOrigin=0;const wi=this._inst.GetWorldInfo();if(xTrack.GetResultMode()==="relative")xOrigin=wi.GetX();if(yTrack.GetResultMode()==="relative")yOrigin=wi.GetY();for(let i=0,len=Math.min(xPositions.length,yPositions.length);i<len;++i){const x=xPositions[i]+xOrigin;const y=yPositions[i]+yOrigin;this._AddWaypoint(x,y,i===0&&mode===0)}},MoveAlongTimelineByName(timelineName,trackId,mode){const timeline=this._runtime.GetTimelineManager().GetTimelineByName(timelineName);
if(!timeline)return;C3.Behaviors.MoveTo.Acts.MoveAlongTimeline.call(this,timeline,trackId,mode)},Stop(){this._Stop()},SetMovingAngle(a){this._SetAngleOfMotion(C3.toRadians(a))},SetSpeed(s){this._SetSpeed(s)},SetMaxSpeed(ms){this._SetMaxSpeed(ms)},SetAcceleration(a){this._SetAcceleration(a)},SetDeceleration(d){this._SetDeceleration(d)},SetRotateSpeed(r){this._SetRotateSpeed(C3.toRadians(r))},SetStopOnSolids(e){this._SetStopOnSolids(e)},SetEnabled(e){this._SetEnabled(e)}}};


'use strict';{const C3=self.C3;C3.Behaviors.MoveTo.Exps={Speed(){return this._GetSpeed()},MaxSpeed(){return this._GetMaxSpeed()},Acceleration(){return this._GetAcceleration()},Deceleration(){return this._GetDeceleration()},MovingAngle(){return C3.toDegrees(this._GetAngleOfMotion())},RotateSpeed(){return C3.toDegrees(this._GetRotateSpeed())},TargetX(){return this._GetTargetX()},TargetY(){return this._GetTargetY()},WaypointCount(){return this._GetWaypointCount()},WaypointXAt(i){return this._GetWaypointXAt(i)},
WaypointYAt(i){return this._GetWaypointYAt(i)}}};


'use strict';{const C3=self.C3;C3.Behaviors.Turret=class TurretBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Behaviors.Turret.Type=class TurretType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType);this._targetTypes=[]}Release(){C3.clearArray(this._targetTypes);super.Release()}OnCreate(){}GetTargetTypes(){return this._targetTypes}}};


'use strict';{const C3=self.C3;const RANGE=0;const RATE_OF_FIRE=1;const ROTATE=2;const ROTATE_SPEED=3;const TARGET_MODE=4;const PREDICTIVE_AIM=5;const PROJECTILE_SPEED=6;const USE_COLLISION_CELLS=7;const ENABLED=8;const tmpRect=C3.New(C3.Rect);const candidates=[];C3.Behaviors.Turret.Instance=class TurretInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this._range=300;this._rateOfFire=1;this._isRotateEnabled=true;this._rotateSpeed=C3.toRadians(180);this._targetMode=
0;this._predictiveAim=false;this._projectileSpeed=500;this._useCollisionCells=true;this._isEnabled=true;this._lastCheckTime=0;this._fireTimeCount=0;this._currentTarget=null;this._loadTargetUid=-1;this._oldTargetX=0;this._oldTargetY=0;this._lastSpeeds=[0,0,0,0];this._speedsCount=0;this._firstTickWithTarget=true;if(properties){this._range=properties[RANGE];this._rateOfFire=properties[RATE_OF_FIRE];this._isRotateEnabled=!!properties[ROTATE];this._rotateSpeed=C3.toRadians(properties[ROTATE_SPEED]);this._targetMode=
properties[TARGET_MODE];this._predictiveAim=!!properties[PREDICTIVE_AIM];this._projectileSpeed=properties[PROJECTILE_SPEED];this._useCollisionCells=!!properties[USE_COLLISION_CELLS];this._isEnabled=!!properties[ENABLED]}this._fireTimeCount=this._rateOfFire;const rt=this._runtime.Dispatcher();this._disposables=new C3.CompositeDisposable(C3.Disposable.From(rt,"instancedestroy",e=>this._OnInstanceDestroyed(e.instance)),C3.Disposable.From(rt,"afterload",e=>this._OnAfterLoad()));if(this._isEnabled)this._StartTicking()}Release(){this._currentTarget=
null;super.Release()}_OnAfterLoad(){if(this._loadTargetUid===-1)this._currentTarget=null;else this._currentTarget=this._runtime.GetInstanceByUID(this._loadTargetUid)}_OnInstanceDestroyed(inst){if(this._currentTarget===inst)this._currentTarget=null}SaveToJson(){return{"r":this._range,"rof":this._rateOfFire,"re":this._isRotateEnabled,"rs":this._rotateSpeed,"tm":this._targetMode,"pa":this._predictiveAim,"ps":this._projectileSpeed,"ucc":this._useCollisionCells,"e":this._isEnabled,"lct":this._lastCheckTime,
"ftc":this._fireTimeCount,"t":this._currentTarget?this._currentTarget.GetUID():-1,"ox":this._oldTargetX,"oy":this._oldTargetY,"ls":this._lastSpeeds,"sc":this._speedsCount,"targs":this.GetSdkType().GetTargetTypes().map(t=>t.GetSID())}}LoadFromJson(o){this._range=o["r"];this._rateOfFire=o["rof"];this._isRotateEnabled=o["re"];this._rotateSpeed=o["rs"];this._targetMode=o["tm"];this._predictiveAim=o["pa"];this._projectileSpeed=o["ps"];this._useCollisionCells=o["ucc"];this._SetEnabled(o["e"]);this._lastCheckTime=
o["lct"];this._fireTimeCount=o["ftc"];this._loadTargetUid=o["t"];this._oldTargetX=o["ox"];this._oldTargetY=o["oy"];this._lastSpeeds=o["ls"];this._speedsCount=o["sc"];const targetTypes=this.GetSdkType().GetTargetTypes();C3.clearArray(targetTypes);for(const sid of o["targs"]){const objectClass=this._runtime.GetObjectClassBySID(sid);if(objectClass)targetTypes.push(objectClass)}}AddSpeed(s){if(this._speedsCount<4){this._lastSpeeds[this._speedsCount]=s;this._speedsCount++}else{this._lastSpeeds.shift();
this._lastSpeeds.push(s)}}GetSpeed(){let ret=0;for(let i=0;i<this._speedsCount;++i)ret+=this._lastSpeeds[i];return ret/this._speedsCount}IsInRange(inst){const myWi=this.GetWorldInfo();const otherWi=inst.GetWorldInfo();const dx=otherWi.GetX()-myWi.GetX();const dy=otherWi.GetY()-myWi.GetY();return dx*dx+dy*dy<=this._range*this._range}LookForFirstTarget(){const wi=this.GetWorldInfo();const targetTypes=this.GetSdkType().GetTargetTypes();const collisionEngine=this._runtime.GetCollisionEngine();if(this._useCollisionCells){tmpRect.set(wi.GetX()-
this._range,wi.GetY()-this._range,wi.GetX()+this._range,wi.GetY()+this._range);collisionEngine.GetObjectClassesCollisionCandidates(null,targetTypes,tmpRect,candidates)}else for(const objectClass of targetTypes)C3.appendArray(candidates,objectClass.GetInstances());for(const rinst of candidates)if(this.IsInRange(rinst)){this._currentTarget=rinst;C3.clearArray(candidates);return}C3.clearArray(candidates)}LookForNearestTarget(){const wi=this.GetWorldInfo();const targetTypes=this.GetSdkType().GetTargetTypes();
const collisionEngine=this._runtime.GetCollisionEngine();const myX=wi.GetX();const myY=wi.GetY();let closest=this._range*this._range;this._currentTarget=null;if(this._useCollisionCells){tmpRect.set(myX-this._range,myY-this._range,myX+this._range,myY+this._range);collisionEngine.GetObjectClassesCollisionCandidates(null,targetTypes,tmpRect,candidates)}else for(const objectClass of targetTypes)C3.appendArray(candidates,objectClass.GetInstances());for(const rinst of candidates){const otherWi=rinst.GetWorldInfo();
const dx=myX-otherWi.GetX();const dy=myY-otherWi.GetY();const dist=dx*dx+dy*dy;if(dist<closest){this._currentTarget=rinst;closest=dist}}C3.clearArray(candidates)}_OnTargetAcquired(){this._speedsCount=0;this._firstTickWithTarget=true;const targetWi=this._currentTarget.GetWorldInfo();this._oldTargetX=targetWi.GetX();this._oldTargetY=targetWi.GetY();this.Trigger(C3.Behaviors.Turret.Cnds.OnTargetAcquired)}Tick(){if(!this._isEnabled)return;const dt=this._runtime.GetDt(this._inst);const nowTime=this._runtime.GetGameTime();
const wi=this.GetWorldInfo();if(this._currentTarget&&!this.IsInRange(this._currentTarget)){this._currentTarget=null;this._speedsCount=0;this._firstTickWithTarget=true}if(nowTime>=this._lastCheckTime+.1){this._lastCheckTime=nowTime;if(this._targetMode===0&&!this._currentTarget){this.LookForFirstTarget();if(this._currentTarget)this._OnTargetAcquired()}else if(this._targetMode===1){const oldTarget=this._currentTarget;this.LookForNearestTarget();if(this._currentTarget&&this._currentTarget!==oldTarget)this._OnTargetAcquired()}}this._fireTimeCount+=
dt;if(this._currentTarget){let targetWi=this._currentTarget.GetWorldInfo();let targetAngle=C3.angleTo(wi.GetX(),wi.GetY(),targetWi.GetX(),targetWi.GetY());if(this._predictiveAim){const Gx=wi.GetX();const Gy=wi.GetY();const Px=targetWi.GetX();const Py=targetWi.GetY();const h=C3.angleTo(Px,Py,this._oldTargetX,this._oldTargetY);if(!this._firstTickWithTarget)this.AddSpeed(C3.distanceTo(Px,Py,this._oldTargetX,this._oldTargetY)/dt);const s=this.GetSpeed();const q=Py-Gy;const r=Px-Gx;const w=(s*Math.sin(h)*
(Gx-Px)-s*Math.cos(h)*(Gy-Py))/this._projectileSpeed;const a=Math.asin(w/Math.sqrt(q*q+r*r))-Math.atan2(q,-r)+Math.PI;if(!isNaN(a))targetAngle=a}if(this._isRotateEnabled){wi.SetAngle(C3.angleRotate(wi.GetAngle(),targetAngle,this._rotateSpeed*dt));wi.SetBboxChanged()}if(this._fireTimeCount>=this._rateOfFire&&(!this._isRotateEnabled||C3.toDegrees(C3.angleDiff(wi.GetAngle(),targetAngle))<=.1)&&(!this._predictiveAim||this._speedsCount>=4)){this._fireTimeCount-=this._rateOfFire;if(this._fireTimeCount>=
this._rateOfFire)this._fireTimeCount=0;this.Trigger(C3.Behaviors.Turret.Cnds.OnShoot)}if(this._currentTarget){targetWi=this._currentTarget.GetWorldInfo();this._oldTargetX=targetWi.GetX();this._oldTargetY=targetWi.GetY()}this._firstTickWithTarget=false}if(this._fireTimeCount>this._rateOfFire)this._fireTimeCount=this._rateOfFire}GetPropertyValueByIndex(index){switch(index){case RANGE:return this._range;case RATE_OF_FIRE:return this._rateOfFire;case ROTATE:return this._isRotateEnabled;case ROTATE_SPEED:return C3.toDegrees(this._rotateSpeed);
case TARGET_MODE:return this._targetMode;case PREDICTIVE_AIM:return this._predictiveAim;case PROJECTILE_SPEED:return this._projectileSpeed;case USE_COLLISION_CELLS:return this._useCollisionCells;case ENABLED:return this._isEnabled}}SetPropertyValueByIndex(index,value){switch(index){case RANGE:this._range=value;break;case RATE_OF_FIRE:this._rateOfFire=value;break;case ROTATE:this._isRotateEnabled=!!value;break;case ROTATE_SPEED:if(!this._isRotateEnabled)return;this._rotateSpeed=C3.toRadians(value);
break;case TARGET_MODE:this._targetMode=value;break;case PREDICTIVE_AIM:this._predictiveAim=!!value;break;case PROJECTILE_SPEED:if(!this._predictiveAim)return;this._projectileSpeed=value;break;case USE_COLLISION_CELLS:this._useCollisionCells=!!value;break;case ENABLED:this._SetEnabled(value);break}}_SetEnabled(e){this._isEnabled=!!e;if(this._isEnabled)this._StartTicking();else this._StopTicking()}GetDebuggerProperties(){const prefix="behaviors.turret";return[{title:"$"+this.GetBehaviorType().GetName(),
properties:[{name:prefix+".properties.range.name",value:this._range,onedit:v=>this._range=v},{name:prefix+".properties.rate-of-fire.name",value:this._rateOfFire,onedit:v=>this._rateOfFire=v},{name:prefix+".properties.rotate-speed.name",value:C3.toDegrees(this._rotateSpeed),onedit:v=>this._rotateSpeed=C3.toRadians(v)},{name:prefix+".properties.predictive-aim.name",value:this._predictiveAim,onedit:v=>this._predictiveAim=v},{name:prefix+".properties.projectile-speed.name",value:this._projectileSpeed,
onedit:v=>this._projectileSpeed=v},{name:prefix+".debugger.has-target",value:!!this._currentTarget},{name:prefix+".debugger.target-uid",value:this._currentTarget?this._currentTarget.GetUID():0},{name:prefix+".properties.enabled.name",value:this._isEnabled,onedit:v=>this._SetEnabled(v)}]}]}}};


'use strict';{const C3=self.C3;C3.Behaviors.Turret.Cnds={HasTarget(){return!!this._currentTarget},OnShoot(){return true},OnTargetAcquired(){return true},IsEnabled(){return this._isEnabled}}};


'use strict';{const C3=self.C3;C3.Behaviors.Turret.Acts={AcquireTarget(objectClass){if(!objectClass)return;const instances=objectClass.GetCurrentSol().GetInstances();for(const inst of instances)if(this._currentTarget!==inst&&this.IsInRange(inst)){this._currentTarget=inst;this._OnTargetAcquired();break}},AddTarget(objectClass){const targetTypes=this.GetSdkType().GetTargetTypes();if(targetTypes.includes(objectClass))return;for(const t of targetTypes)if(t.IsFamily()&&t.FamilyHasMember(objectClass))return;
targetTypes.push(objectClass)},ClearTargets(){C3.clearArray(this.GetSdkType().GetTargetTypes())},UnacquireTarget(){this._currentTarget=null;this._speedsCount=0;this._firstTickWithTarget=true},SetEnabled(e){this._SetEnabled(e!==0)},SetRange(r){this._range=r},SetRateOfFire(r){this._rateOfFire=r},SetRotate(r){this._isRotateEnabled=r!==0},SetRotateSpeed(r){this._rotateSpeed=C3.toRadians(r)},SetTargetMode(m){this._targetMode=m},SetPredictiveAim(p){this._predictiveAim=p!==0},SetProjectileSpeed(s){this._projectileSpeed=
s}}};


'use strict';{const C3=self.C3;C3.Behaviors.Turret.Exps={TargetUID(){return this._currentTarget?this._currentTarget.GetUID():0},Range(){return this._range},RateOfFire(){return this._rateOfFire},RotateSpeed(){return C3.toDegrees(this._rotateSpeed)}}};


'use strict';{const C3=self.C3;C3.Behaviors.LOS=class LOSBehavior extends C3.SDKBehaviorBase{constructor(opts){super(opts)}Release(){super.Release()}}};


'use strict';{const C3=self.C3;C3.Behaviors.LOS.Type=class LOSType extends C3.SDKBehaviorTypeBase{constructor(behaviorType){super(behaviorType);this._obstacleTypes=[]}Release(){C3.clearArray(this._obstacleTypes);super.Release()}OnCreate(){}GetObstacleTypes(){return this._obstacleTypes}FindLOSBehavior(inst){const myType=this.GetBehaviorType();for(const behInst of inst.GetBehaviorInstances())if(behInst.GetBehaviorType()===myType)return behInst.GetSdkInstance();return null}}};


'use strict';{const C3=self.C3;const OBSTACLE_MODE=0;const RANGE=1;const CONE=2;const USE_COLLISION_CELLS=3;const MODE_SOLID=0;const collisionCandidates=[];C3.Behaviors.LOS.Instance=class LOSInstance extends C3.SDKBehaviorInstanceBase{constructor(behInst,properties){super(behInst);this._obstacleMode=0;this._range=1E4;this._cone=C3.toRadians(360);this._useCollisionCells=true;this._ray=new C3.Ray;if(properties){this._obstacleMode=properties[OBSTACLE_MODE];this._range=properties[RANGE];this._cone=C3.toRadians(properties[CONE]);
this._useCollisionCells=properties[USE_COLLISION_CELLS]}}Release(){super.Release()}SaveToJson(){return{"r":this._range,"c":this._cone,"om":this._obstacleMode,"ucc":this._useCollisionCells,"t":this.GetSdkType().GetObstacleTypes().map(t=>t.GetSID())}}LoadFromJson(o){this._range=o["r"];this._cone=o["c"];this._obstacleMode=o["om"]||0;this._useCollisionCells=!!o["ucc"];const obstacleTypes=this.GetSdkType().GetObstacleTypes();C3.clearArray(obstacleTypes);for(const sid of o["t"]){const objectClass=this._runtime.GetObjectClassBySID(sid);
if(objectClass)obstacleTypes.push(objectClass)}}HasLOSToInstance(inst,imgPt){const uid=inst.GetUID();const [x,y]=inst.GetImagePoint(imgPt);const hasLOS=this.HasLOSTo(x,y);return hasLOS||this._ray.hitUid===uid}HasLOSTo(x,y){const wi=this.GetWorldInfo();let angle=wi.GetAngle();if(wi.GetWidth()<0)angle+=Math.PI;return this.HasLOSBetweenPositions(wi.GetX(),wi.GetY(),angle,x,y)}HasLOSBetweenPositions(fromX,fromY,angle,toX,toY){const range=this._range;if(C3.distanceSquared(fromX,fromY,toX,toY)>range*range)return false;
const a=C3.angleTo(fromX,fromY,toX,toY);if(C3.angleDiff(angle,a)>this._cone/2)return false;const ray=this.CastRay(fromX,fromY,toX,toY,this._useCollisionCells);return!ray.DidCollide()}_GetCollisionCandidates(ray,useCollisionCells){if(useCollisionCells){const layer=this.GetWorldInfo().GetLayer();const collisionEngine=this._runtime.GetCollisionEngine();if(this._obstacleMode===MODE_SOLID)collisionEngine.GetSolidCollisionCandidates(layer,ray.rect,collisionCandidates);else collisionEngine.GetObjectClassesCollisionCandidates(layer,
this._GetObstacleTypes(),ray.rect,collisionCandidates);return collisionCandidates}else if(this._obstacleMode===MODE_SOLID){const solidBehavior=this._runtime.GetSolidBehavior();if(solidBehavior)return solidBehavior.GetInstances();else return collisionCandidates}else{for(const objectClass of this._GetObstacleTypes())C3.appendArray(collisionCandidates,objectClass.GetInstances());return collisionCandidates}}_GetObstacleTypes(){return this.GetSdkType().GetObstacleTypes()}CastRay(fromX,fromY,toX,toY,useCollisionCells){const ray=
this._ray.Set(fromX,fromY,toX,toY);const candidates=this._GetCollisionCandidates(ray,useCollisionCells);const collisionEngine=this._runtime.GetCollisionEngine();const isSolidMode=this._obstacleMode===MODE_SOLID;const selfInstance=this._inst;for(let i=0,len=candidates.length;i<len;++i){const rinst=candidates[i];if(rinst===selfInstance)continue;if(!isSolidMode||collisionEngine.IsSolidCollisionAllowed(rinst,selfInstance))collisionEngine.TestRayIntersectsInstance(rinst,ray)}ray.Complete();C3.clearArray(collisionCandidates);
return ray}GetPropertyValueByIndex(index){switch(index){case OBSTACLE_MODE:return this._obstacleMode;case RANGE:return this._range;case CONE:return C3.toDegrees(this._cone);case USE_COLLISION_CELLS:return this._useCollisionCells}}SetPropertyValueByIndex(index,value){switch(index){case OBSTACLE_MODE:this._obstacleMode=value;break;case RANGE:this._range=value;break;case CONE:this._cone=C3.toRadians(value);break;case USE_COLLISION_CELLS:this._useCollisionCells=!!value;break}}GetDebuggerProperties(){const prefix=
"behaviors.los.properties";return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:prefix+".range.name",value:this._range,onedit:v=>this._range=v},{name:prefix+".cone-of-view.name",value:C3.toDegrees(this._cone),onedit:v=>this._cone=C3.toRadians(v)}]}]}}};


'use strict';{const C3=self.C3;const lToPick=new Set;const rToPick=new Set;C3.Behaviors.LOS.Cnds={HasLOSToPosition(x,y){return this.HasLOSTo(x,y)},RayIntersected(){return this._ray.DidCollide()},HasLOSBetweenPositions(fromX,fromY,fromAngle,toX,toY){return this.HasLOSBetweenPositions(fromX,fromY,C3.toRadians(fromAngle),toX,toY)},HasLOSToObject(objectClass,imgPt){if(!objectClass)return false;const currentCondition=this._runtime.GetCurrentCondition();const isOrBlock=currentCondition.GetEventBlock().IsOrBlock();
const runtime=currentCondition.GetRuntime();const lsol=currentCondition.GetObjectClass().GetCurrentSol();const rsol=objectClass.GetCurrentSol();let linstances=lsol.GetInstances();let rinstances=rsol.GetInstances();if(lsol.IsSelectAll())C3.clearArray(lsol._GetOwnElseInstances());else if(isOrBlock)if(runtime.IsCurrentConditionFirst()&&!lsol._GetOwnElseInstances().length&&lsol._GetOwnInstances().length)linstances=lsol._GetOwnInstances();else linstances=lsol._GetOwnElseInstances();if(rsol.IsSelectAll())C3.clearArray(rsol._GetOwnElseInstances());
else if(isOrBlock)if(runtime.IsCurrentConditionFirst()&&!rsol._GetOwnElseInstances().length&&rsol._GetOwnInstances().length)rinstances=rsol._GetOwnInstances();else rinstances=rsol._GetOwnElseInstances();const isInverted=currentCondition.IsInverted();const sdkType=this.GetSdkType();for(const linst of linstances){let pick=false;const losBeh=sdkType.FindLOSBehavior(linst);if(rinstances.length===0){if(isInverted)pick=true}else for(const rinst of rinstances)if(linst!==rinst&&C3.xor(losBeh.HasLOSToInstance(rinst,
imgPt),isInverted)){pick=true;rToPick.add(rinst)}if(pick)lToPick.add(linst)}if(isOrBlock){if(linstances===lsol._GetOwnElseInstances())lsol.TransferElseInstancesToOwn(lToPick);else{lsol.AddElseInstances(lToPick,linstances);lsol.SetSetPicked(lToPick)}if(rinstances===rsol._GetOwnElseInstances())rsol.TransferElseInstancesToOwn(rToPick);else{rsol.AddElseInstances(rToPick,rinstances);rsol.SetSetPicked(rToPick)}}else{lsol.SetSetPicked(lToPick);rsol.SetSetPicked(rToPick)}lToPick.clear();rToPick.clear();return lsol.HasAnyInstances()}}};


'use strict';{const C3=self.C3;C3.Behaviors.LOS.Acts={SetRange(r){this._range=r},SetCone(c){this._cone=C3.toRadians(c)},CastRay(fromX,fromY,toX,toY,useCollisionCells){this.CastRay(fromX,fromY,toX,toY,useCollisionCells)},AddObstacle(objectClass){const obstacleTypes=this.GetSdkType().GetObstacleTypes();if(obstacleTypes.includes(objectClass))return;for(const t of obstacleTypes)if(t.IsFamily()&&t.FamilyHasMember(objectClass))return;obstacleTypes.push(objectClass)},ClearObstacles(){C3.clearArray(this.GetSdkType().GetObstacleTypes())}}};


'use strict';{const C3=self.C3;C3.Behaviors.LOS.Exps={Range(){return this._range},ConeOfView(){return C3.toDegrees(this._cone)},HitX(){const ray=this._ray;return ray.DidCollide()?ray.hitX:0},HitY(){const ray=this._ray;return ray.DidCollide()?ray.hitY:0},HitDistance(){const ray=this._ray;return ray.DidCollide()?ray.distance:0},HitUID(){const ray=this._ray;return ray.DidCollide()?ray.hitUid:-1},NormalX(length){const ray=this._ray;return ray.DidCollide()?ray.hitX+length*ray.normalX:0},NormalY(length){const ray=
this._ray;return ray.DidCollide()?ray.hitY+length*ray.normalY:0},NormalAngle(){const ray=this._ray;return ray.DidCollide()?C3.toDegrees(ray.hitNormal):0},ReflectionX(length){const ray=this._ray;return ray.DidCollide()?ray.hitX+length*ray.reflectionX:0},ReflectionY(length){const ray=this._ray;return ray.DidCollide()?ray.hitY+length*ray.reflectionY:0},ReflectionAngle(){const ray=this._ray;return ray.DidCollide()?C3.toDegrees(Math.atan2(ray.reflectionY,ray.reflectionX)):0}}};


"use strict";
{
	const C3 = self.C3;
	self.C3_GetObjectRefTable = function () {
		return [
		C3.Plugins.Text,
		C3.Plugins.NinePatch,
		C3.Plugins.Sprite,
		C3.Plugins.TiledBg,
		C3.Plugins.SVGPicture,
		C3.Behaviors.custom,
		C3.Behaviors.Fade,
		C3.Plugins.sliderbar,
		C3.Plugins.filechooser,
		C3.Plugins.List,
		C3.Plugins.TextBox,
		C3.Behaviors.Timer,
		C3.Behaviors.solid,
		C3.Plugins.MagiCam,
		C3.Plugins.Mouse,
		C3.Plugins.PlatformInfo,
		C3.Plugins.AJAX,
		C3.Plugins.Audio,
		C3.Plugins.Browser,
		C3.Plugins.Keyboard,
		C3.Plugins.Timeline,
		C3.Plugins.Touch,
		C3.Plugins.Button,
		C3.Behaviors.Pin,
		C3.Behaviors.DragnDrop,
		C3.Behaviors.Bullet,
		C3.Behaviors.MoveTo,
		C3.Behaviors.Turret,
		C3.Behaviors.LOS,
		C3.Plugins.NinePatch.Cnds.PickByUID,
		C3.ScriptsInEvents.Button_Event3_Act1,
		C3.Plugins.System.Cnds.LayerVisible,
		C3.Plugins.NinePatch.Exps.LayerName,
		C3.Plugins.NinePatch.Cnds.IsVisible,
		C3.Plugins.NinePatch.Cnds.CompareInstanceVar,
		C3.Plugins.System.Cnds.CompareVar,
		C3.Plugins.System.Acts.SetFunctionReturnValue,
		C3.Plugins.System.Cnds.Else,
		C3.Plugins.NinePatch.Acts.SetEffectParam,
		C3.Plugins.NinePatch.Cnds.IsBoolInstanceVarSet,
		C3.ScriptsInEvents.Data_Event2_Act1,
		C3.ScriptsInEvents.Data_Event4_Act1,
		C3.Plugins.System.Acts.RestartLayout,
		C3.ScriptsInEvents.Input_Event2_Act3,
		C3.Plugins.System.Cnds.OnLayoutStart,
		C3.Plugins.PlatformInfo.Cnds.IsOnMobile,
		C3.Plugins.System.Acts.SetGroupActive,
		C3.Plugins.System.Acts.AddVar,
		C3.Plugins.System.Cnds.ForEach,
		C3.Plugins.System.Cnds.CompareBoolVar,
		C3.Plugins.Mouse.Cnds.IsOverObject,
		C3.Plugins.Sprite.Cnds.CompareInstanceVar,
		C3.Plugins.Sprite.Cnds.PickChildren,
		C3.Plugins.TiledBg.Acts.SetVisible,
		C3.Plugins.Sprite.Acts.SetVisible,
		C3.Plugins.System.Cnds.Compare,
		C3.Plugins.System.Acts.SetBoolVar,
		C3.Plugins.Sprite.Cnds.IsAnimPlaying,
		C3.Plugins.Sprite.Acts.SetAnimFrame,
		C3.Plugins.Mouse.Cnds.IsButtonDown,
		C3.Plugins.Sprite.Exps.UID,
		C3.Plugins.System.Cnds.IsGroupActive,
		C3.Plugins.Mouse.Cnds.OnObjectClicked,
		C3.Plugins.System.Cnds.PickByComparison,
		C3.Plugins.NinePatch.Cnds.PickTopBottom,
		C3.Plugins.NinePatch.Exps.UID,
		C3.ScriptsInEvents.Input_Event49_Act1,
		C3.Plugins.Timeline.Acts.SetInstance,
		C3.Plugins.Timeline.Acts.PlayTimeline,
		C3.Plugins.Text.Cnds.PickDistance,
		C3.Plugins.NinePatch.Exps.X,
		C3.Plugins.NinePatch.Exps.Y,
		C3.Plugins.Sprite.Cnds.PickDistance,
		C3.ScriptsInEvents.Input_Event61_Act1,
		C3.Behaviors.DragnDrop.Cnds.IsDragging,
		C3.Behaviors.DragnDrop.Cnds.OnDrop,
		C3.Plugins.System.Acts.SetVar,
		C3.ScriptsInEvents.Input_Event64_Act2,
		C3.Plugins.Mouse.Cnds.OnWheel,
		C3.Plugins.NinePatch.Cnds.PickDistance,
		C3.Plugins.MagiCam.Exps.GetX,
		C3.Plugins.MagiCam.Exps.GetY,
		C3.ScriptsInEvents.Input_Event67_Act2,
		C3.Plugins.NinePatch.Acts.SetY,
		C3.ScriptsInEvents.Input_Event69_Act3,
		C3.ScriptsInEvents.Input_Event72_Act2,
		C3.ScriptsInEvents.Input_Event74_Act3,
		C3.ScriptsInEvents.Input_Event76_Act1,
		C3.Plugins.Sprite.Cnds.PickByUID,
		C3.ScriptsInEvents.Input_Event79_Act1,
		C3.Behaviors.Timer.Acts.StartTimer,
		C3.Plugins.System.Acts.CreateObject,
		C3.Plugins.Mouse.Exps.X,
		C3.Plugins.Mouse.Exps.Y,
		C3.Plugins.Sprite.Acts.MoveToBottom,
		C3.Plugins.Sprite.Acts.SetDefaultColor,
		C3.Plugins.System.Exps.rgbex255,
		C3.Plugins.Sprite.Acts.SetAnim,
		C3.ScriptsInEvents.Input_Event79_Act10,
		C3.Plugins.Audio.Acts.Play,
		C3.Plugins.sliderbar.Cnds.OnChanged,
		C3.Plugins.sliderbar.Exps.Value,
		C3.ScriptsInEvents.Input_Event83_Act3,
		C3.Plugins.sliderbar.Acts.SetMinimum,
		C3.Plugins.sliderbar.Acts.SetMaximum,
		C3.Plugins.sliderbar.Acts.SetValue,
		C3.Plugins.Audio.Acts.SetVolume,
		C3.Plugins.Audio.Acts.SetMuted,
		C3.ScriptsInEvents.Input_Event100_Act1,
		C3.Plugins.Keyboard.Cnds.OnKey,
		C3.Plugins.Browser.Cnds.IsFullscreen,
		C3.Plugins.Browser.Acts.CancelFullScreen,
		C3.Plugins.Browser.Acts.RequestFullScreen,
		C3.Plugins.NinePatch.Cnds.OnCreated,
		C3.Plugins.NinePatch.Acts.SetInstanceVar,
		C3.Plugins.Text.Exps.Text,
		C3.Plugins.Text.Acts.SetText,
		C3.ScriptsInEvents.Selector_Event15_Act1,
		C3.Plugins.Text.Acts.SetOpacity,
		C3.Plugins.Sprite.Acts.SetOpacity,
		C3.Plugins.Sprite.Acts.SetEffectParam,
		C3.Plugins.NinePatch.Acts.SetDefaultColor,
		C3.ScriptsInEvents.Utils_Event2_Act1,
		C3.Plugins.Sprite.Acts.LoadURL,
		C3.ScriptsInEvents.Utils_Event12_Act1,
		C3.Plugins.Text.Acts.SetFontSize,
		C3.Plugins.System.Acts.SetLayerVisible,
		C3.Plugins.MagiCam.Acts.SetPosition,
		C3.Plugins.Sprite.Acts.AddChild,
		C3.Plugins.Text.Cnds.PickByUID,
		C3.ScriptsInEvents.Building_Event16_Act1,
		C3.Plugins.Sprite.Acts.SetPos,
		C3.Plugins.Sprite.Acts.SetAngle,
		C3.Plugins.Text.Acts.SetHeight,
		C3.Plugins.NinePatch.Acts.SetHeight,
		C3.Plugins.Sprite.Acts.SetInstanceVar,
		C3.Plugins.Sprite.Exps.Angle,
		C3.ScriptsInEvents.Building_Event39_Act1,
		C3.ScriptsInEvents.Building_Event42_Act1,
		C3.Plugins.Sprite.Exps.X,
		C3.Plugins.Sprite.Exps.Y,
		C3.Plugins.Sprite.Acts.Destroy,
		C3.ScriptsInEvents.Building_Event60_Act1,
		C3.Plugins.Sprite.Cnds.IsOverlapping,
		C3.Plugins.Sprite.Exps.ImagePointX,
		C3.Plugins.Sprite.Exps.ImagePointY,
		C3.ScriptsInEvents.Building_Event79_Act1,
		C3.ScriptsInEvents.Building_Event93_Act1,
		C3.Plugins.filechooser.Cnds.OnChanged,
		C3.Plugins.filechooser.Exps.FileCount,
		C3.ScriptsInEvents.SettingsView_Event3_Act1,
		C3.ScriptsInEvents.SettingsView_Event5_Act1,
		C3.Plugins.AJAX.Acts.Request,
		C3.Plugins.filechooser.Exps.FileURLAt,
		C3.Plugins.TextBox.Exps.Text,
		C3.ScriptsInEvents.SettingsView_Event9_Act2,
		C3.Plugins.AJAX.Cnds.OnComplete,
		C3.Plugins.AJAX.Exps.LastData,
		C3.ScriptsInEvents.SettingsView_Event11_Act2,
		C3.ScriptsInEvents.SettingsView_Event13_Act1,
		C3.Plugins.Browser.Acts.InvokeDownloadString,
		C3.Plugins.TextBox.Cnds.OnTextChanged,
		C3.Plugins.System.Exps.len,
		C3.ScriptsInEvents.SettingsView_Event16_Act1,
		C3.ScriptsInEvents.SettingsView_Event18_Act1,
		C3.Plugins.System.Cnds.For,
		C3.Plugins.System.Exps.tokencount,
		C3.Plugins.List.Acts.AddItem,
		C3.Plugins.System.Exps.tokenat,
		C3.Plugins.System.Exps.loopindex,
		C3.Plugins.List.Acts.Select,
		C3.Plugins.NinePatch.Acts.SetSize,
		C3.Plugins.NinePatch.Acts.SetOpacity,
		C3.Plugins.NinePatch.Acts.SetPos,
		C3.Plugins.NinePatch.Acts.SetBoolInstanceVar,
		C3.Plugins.Sprite.Acts.SetSize,
		C3.Plugins.Text.Acts.SetSize,
		C3.Plugins.Text.Acts.SetPos,
		C3.Plugins.Text.Acts.SetFontColor,
		C3.Plugins.Text.Acts.SetHAlign,
		C3.Plugins.Text.Acts.SetVAlign,
		C3.Plugins.Text.Acts.SetFontFace,
		C3.Plugins.Text.Acts.SetInstanceVar,
		C3.Plugins.Text.Exps.Width,
		C3.Plugins.Text.Exps.Height,
		C3.Plugins.TiledBg.Acts.SetSize,
		C3.Plugins.TiledBg.Acts.SetDefaultColor,
		C3.Plugins.TiledBg.Acts.SetOpacity,
		C3.Plugins.TiledBg.Acts.SetInstanceVar,
		C3.Plugins.NinePatch.Exps.Height,
		C3.Plugins.Keyboard.Cnds.OnAnyKeyReleased,
		C3.Plugins.System.Cnds.IsPreview,
		C3.Plugins.Keyboard.Exps.LastKeyCode,
		C3.Plugins.Keyboard.Cnds.IsKeyDown,
		C3.Plugins.Browser.Acts.ConsoleLog,
		C3.Plugins.System.Acts.SetTimescale,
		C3.Plugins.System.Cnds.EveryTick,
		C3.Plugins.Mouse.Cnds.OnAnyClick,
		C3.Plugins.Sprite.Cnds.CompareFrame,
		C3.Plugins.Sprite.Cnds.OnAnimFinished,
		C3.Behaviors.Timer.Exps.CurrentTime,
		C3.Behaviors.Timer.Exps.Duration,
		C3.Plugins.Sprite.Exps.AnimationFrameCount,
		C3.Plugins.Sprite.Cnds.OnAnyAnimFinished,
		C3.Plugins.Mouse.Acts.SetCursor,
		C3.Plugins.Browser.Acts.GoToURLWindow,
		C3.Plugins.Sprite.Cnds.IsBoolInstanceVarSet,
		C3.Plugins.Sprite.Acts.SetBoolInstanceVar,
		C3.ScriptsInEvents.Checkbox_Event7_Act1,
		C3.ScriptsInEvents.Checkbox_Event20_Act1,
		C3.Behaviors.Turret.Acts.AddTarget,
		C3.Plugins.TiledBg.Acts.Destroy,
		C3.Plugins.Sprite.Cnds.OnCreated,
		C3.ScriptsInEvents.Turrets_Event9_Act6,
		C3.Behaviors.Turret.Cnds.HasTarget,
		C3.Plugins.Sprite.Exps.Count,
		C3.Plugins.System.Cnds.AngleWithin,
		C3.Plugins.Sprite.Acts.RotateTowardAngle,
		C3.Behaviors.Turret.Exps.RotateSpeed,
		C3.Plugins.System.Exps.dt,
		C3.Behaviors.LOS.Cnds.HasLOSToObject,
		C3.Plugins.Sprite.Acts.RotateTowardPosition,
		C3.Behaviors.Turret.Exps.TargetUID,
		C3.Plugins.System.Cnds.Every,
		C3.Plugins.Sprite.Acts.MoveToTop,
		C3.Behaviors.Turret.Exps.Range,
		C3.Plugins.TiledBg.Acts.SetAngle,
		C3.Plugins.TiledBg.Acts.MoveAtAngle,
		C3.Plugins.TiledBg.Exps.Angle,
		C3.Behaviors.Turret.Cnds.OnShoot,
		C3.Plugins.System.Cnds.Repeat,
		C3.ScriptsInEvents.Turrets_Event50_Act4,
		C3.Behaviors.Bullet.Acts.SetAngleOfMotion,
		C3.Behaviors.Bullet.Acts.SetSpeed,
		C3.ScriptsInEvents.Turrets_Event59_Act4,
		C3.ScriptsInEvents.Turrets_Event60_Act1,
		C3.Plugins.Sprite.Acts.SetWidth,
		C3.Plugins.Sprite.Cnds.OnCollision,
		C3.Plugins.Sprite.Exps.Width,
		C3.Plugins.System.Exps.max,
		C3.Behaviors.Turret.Acts.SetEnabled,
		C3.Behaviors.Turret.Acts.SetRotateSpeed,
		C3.Behaviors.LOS.Acts.AddObstacle,
		C3.Behaviors.LOS.Acts.SetRange,
		C3.ScriptsInEvents.Turrets_Event86_Act1,
		C3.ScriptsInEvents.Turrets_Event87_Act1,
		C3.Behaviors.Turret.Acts.SetRateOfFire,
		C3.Behaviors.Turret.Acts.SetRange,
		C3.Plugins.TiledBg.Acts.SetWidth,
		C3.ScriptsInEvents.Turrets_Event99_Act1,
		C3.ScriptsInEvents.Turrets_Event103_Act1,
		C3.Behaviors.Bullet.Exps.Speed,
		C3.Behaviors.Timer.Cnds.OnTimer,
		C3.Plugins.Sprite.Cnds.OnDestroyed,
		C3.ScriptsInEvents.Turrets_Event111_Act6,
		C3.Plugins.Sprite.Cnds.IsOnScreen,
		C3.Plugins.TiledBg.Cnds.OnCreated,
		C3.Plugins.TiledBg.Exps.Width,
		C3.Plugins.TiledBg.Exps.Height,
		C3.Behaviors.MoveTo.Acts.Stop,
		C3.Plugins.TiledBg.Cnds.OnDestroyed,
		C3.Plugins.System.Exps.random,
		C3.Plugins.Audio.Acts.SetPlaybackRate,
		C3.Behaviors.Fade.Acts.StartFade,
		C3.ScriptsInEvents.Monsters_Event25_Act1,
		C3.ScriptsInEvents.Monsters_Event28_Act1,
		C3.Plugins.Sprite.Acts.SetEffectEnabled,
		C3.Behaviors.custom.Acts.SetSpeed,
		C3.Plugins.System.Acts.Wait,
		C3.Behaviors.MoveTo.Acts.SetMaxSpeed,
		C3.ScriptsInEvents.Monsters_Event44_Act1,
		C3.ScriptsInEvents.Monsters_Event47_Act1,
		C3.ScriptsInEvents.Monsters_Event52_Act1,
		C3.ScriptsInEvents.Monsters_Event54_Act2,
		C3.ScriptsInEvents.Monsters_Event63_Act1,
		C3.ScriptsInEvents.Monsters_Event65_Act1,
		C3.Plugins.System.Cnds.PickAll,
		C3.Behaviors.MoveTo.Acts.MoveToPosition,
		C3.ScriptsInEvents.Monsters_Event93_Act1,
		C3.ScriptsInEvents.Monsters_Event94_Act1,
		C3.ScriptsInEvents.Monsters_Event95_Act1,
		C3.ScriptsInEvents.Monsters_Event112_Act4,
		C3.ScriptsInEvents.Spikes_Event6_Act2,
		C3.ScriptsInEvents.Spikes_Event10_Act1,
		C3.Behaviors.MoveTo.Exps.MaxSpeed,
		C3.ScriptsInEvents.Spikes_Event13_Act4,
		C3.Plugins.NinePatch.Exps.Width,
		C3.Plugins.Audio.Acts.SetSilent,
		C3.Plugins.System.Exps.viewportwidth,
		C3.Plugins.System.Exps.viewportheight,
		C3.Plugins.MagiCam.Acts.CreateLocalCamera,
		C3.Plugins.Browser.Acts.LoadStyleSheet,
		C3.ScriptsInEvents.Init_Event15_Act1,
		C3.ScriptsInEvents.Init_Event17_Act1,
		C3.ScriptsInEvents.Init_Event21_Act1,
		C3.ScriptsInEvents.Init_Event23_Act1,
		C3.ScriptsInEvents.Init_Event27_Act1,
		C3.Plugins.List.Cnds.OnSelectionChanged,
		C3.Plugins.List.Exps.SelectedText,
		C3.ScriptsInEvents.Init_Event31_Act2,
		C3.Plugins.Audio.Cnds.IsTagPlaying,
		C3.Plugins.System.Exps.fps,
		C3.Plugins.Sprite.Cnds.IsVisible,
		C3.Plugins.Sprite.Exps.LayerName,
		C3.Plugins.System.Exps.loadingprogress,
		C3.Plugins.Audio.Cnds.OnEnded,
		C3.Behaviors.Fade.Cnds.OnFadeOutEnd,
		C3.Plugins.System.Acts.SetLayerOpacity,
		C3.Plugins.System.Acts.GoToLayout,
		C3.Plugins.Keyboard.Cnds.OnAnyKey
		];
	};
	self.C3_JsPropNameTable = [
		{name: 0},
		{type: 0},
		{theme: 0},
		{tLabel: 0},
		{NotBuggedLabel: 0},
		{id_npe: 0},
		{npBarFrameCircled: 0},
		{npBarFrameCircledRC: 0},
		{npBarFrameCircledWRC: 0},
		{npBarFrameCircleDLandR: 0},
		{npBarFrameCircledRC2: 0},
		{npBarFrame: 0},
		{npBarFrameCircleDLandR2: 0},
		{npBarFrameCircleDLandR3: 0},
		{sMarkupDecor: 0},
		{id: 0},
		{tbMarkup: 0},
		{npMarkupCircled: 0},
		{npMarkupCircled_v2: 0},
		{npMarkupCircled_v1: 0},
		{npMarkupCircled_v3: 0},
		{enabled: 0},
		{IndicatorBack: 0},
		{npBarBack: 0},
		{fullWidth: 0},
		{npBarBase: 0},
		{npBarBaseCircled: 0},
		{section: 0},
		{selected: 0},
		{baseColor: 0},
		{selectedColor: 0},
		{HasIcon: 0},
		{HasText: 0},
		{CustomColors: 0},
		{BaseText: 0},
		{SelectedText: 0},
		{UseSelectedText: 0},
		{sSelector: 0},
		{sSelectorNoBorders: 0},
		{sIcon: 0},
		{SVGPicture: 0},
		{tbSystemMarkup: 0},
		{Custom: 0},
		{Fade: 0},
		{MovingObject: 0},
		{has_icon: 0},
		{has_text: 0},
		{GrayColored: 0},
		{IsAnimated: 0},
		{sButton: 0},
		{NotBuggedButton: 0},
		{Name: 0},
		{InvisibleTrigger: 0},
		{ID: 0},
		{npScrollbarSlider: 0},
		{BuildCursor: 0},
		{BuildDirection: 0},
		{Cursor: 0},
		{CursorEffects: 0},
		{SliderBar: 0},
		{FileChooser: 0},
		{NotationList: 0},
		{TextInput: 0},
		{nerdError_loadingScreen: 0},
		{Logo_CrazyGames: 0},
		{CameraCursor: 0},
		{Timer: 0},
		{Timers: 0},
		{LoadingAnim: 0},
		{OldDirt: 0},
		{BlueCrystal: 0},
		{UserFrame: 0},
		{sUserIcon: 0},
		{BackgroundGrass: 0},
		{OldPlayer: 0},
		{Health: 0},
		{HealthMax: 0},
		{Damage: 0},
		{MovingSpeedPx: 0},
		{AttackInterval: 0},
		{IsFriendly: 0},
		{EnemyUID: 0},
		{IsCanAttack: 0},
		{EnemyMelee: 0},
		{FriendlyMelee: 0},
		{SpawnPoint: 0},
		{Weapon: 0},
		{BaseWidth: 0},
		{BaseHeight: 0},
		{BasicMonsterHealth: 0},
		{BasicMonsterBack: 0},
		{ArmoredMonsterHealth: 0},
		{baseWidth: 0},
		{baseHeight: 0},
		{ArmoredMonsterBack: 0},
		{FastMonsterHealth: 0},
		{FastMonsterBack: 0},
		{MonsterAnimations: 0},
		{Shield: 0},
		{Type: 0},
		{ShieldMax: 0},
		{Reward: 0},
		{RPValue: 0},
		{RPChance: 0},
		{Direction: 0},
		{NextMovePointN: 0},
		{NextMovePointX: 0},
		{NextMovePointY: 0},
		{ColorHex: 0},
		{LastDamageDealer: 0},
		{BaseSpeed: 0},
		{DamageReductionMP: 0},
		{DodgeChance: 0},
		{MonsterBase: 0},
		{MonsterFace: 0},
		{TurretUID: 0},
		{TurretRadiusCircle: 0},
		{TurretRadiusLine: 0},
		{TurretBase: 0},
		{BaseAngle: 0},
		{BulletSpeed: 0},
		{BulletCount: 0},
		{CriticalMP: 0},
		{CriticalChance: 0},
		{HealthDamage: 0},
		{ShieldDamage: 0},
		{HitsPerShot: 0},
		{FirstMonsterDamageMP: 0},
		{BasicTurret: 0},
		{LaserTurret: 0},
		{RailTurret: 0},
		{Solid: 0},
		{PlayFieldMarkup: 0},
		{GameFieldGrid: 0},
		{FieldWall: 0},
		{FieldWallSpecial: 0},
		{OrderN: 0},
		{MonsterMovePoint: 0},
		{InvisibleTimeMS: 0},
		{OwnerID: 0},
		{BasicTurretBullet: 0},
		{LaserTurretBullet: 0},
		{RailTurretBullet: 0},
		{ReloadTimeSec: 0},
		{StunChance: 0},
		{StunMP: 0},
		{StunDurationMS: 0},
		{HealthBasedDamagePercent: 0},
		{Spikes: 0},
		{hitmarker: 0},
		{GameLoadingProgress: 0},
		{MagiCam: 0},
		{Mouse: 0},
		{PlatformInfo: 0},
		{AJAX: 0},
		{Audio: 0},
		{Browser: 0},
		{Keyboard: 0},
		{Timeline: 0},
		{Touch: 0},
		{URL: 0},
		{URLTrigger: 0},
		{Button2: 0},
		{Enabled: 0},
		{BaseCheckbox: 0},
		{Bar: 0},
		{NPElements: 0},
		{Button: 0},
		{Pin: 0},
		{Icon: 0},
		{Markup: 0},
		{Selector: 0},
		{Text: 0},
		{DragDrop: 0},
		{ScrollbarSlider: 0},
		{Checkbox: 0},
		{Bullet: 0},
		{MoveTo: 0},
		{Monster: 0},
		{Turret: 0},
		{LineOfSight: 0},
		{MonsterHealthBar: 0},
		{Building: 0},
		{Entity: 0},
		{UserIcon: 0},
		{isCanAccessButton: 0},
		{buttonUID: 0},
		{targetUID: 0},
		{damage: 0},
		{entityUID: 0},
		{x: 0},
		{y: 0},
		{isFriendly: 0},
		{IsSoundMuted: 0},
		{IsMusicMuted: 0},
		{IsMouseOverGamepaly: 0},
		{scrollbarID: 0},
		{isScrollbarActive: 0},
		{okay: 0},
		{damagePercent: 0},
		{reloadMs: 0},
		{actualDamage: 0},
		{monsterUID: 0},
		{sbName: 0},
		{sbValue: 0},
		{value: 0},
		{minValue: 0},
		{maxValue: 0},
		{IsMouseOverUI: 0},
		{isMouseOver: 0},
		{selectedID: 0},
		{isCanAccessSelector: 0},
		{selectorUID: 0},
		{r: 0},
		{g: 0},
		{b: 0},
		{hex: 0},
		{url: 0},
		{fixer: 0},
		{output: 0},
		{size: 0},
		{SYSTEM_VIEWPORT_WIDTH: 0},
		{SYSTEM_VIEWPORT_HEIGHT: 0},
		{viewRealX: 0},
		{viewRealY: 0},
		{viewID: 0},
		{viewX: 0},
		{viewY: 0},
		{IsInBuildMode: 0},
		{CurrentBuilding: 0},
		{BuildingAngle: 0},
		{cursorFieldX: 0},
		{cursorFieldY: 0},
		{isCanBuild: 0},
		{cellSize: 0},
		{BuildName: 0},
		{BuildType: 0},
		{PositionType: 0},
		{buildingUID: 0},
		{isCountFine: 0},
		{t_BuildType: 0},
		{t_positionType: 0},
		{MusicVolume: 0},
		{SoundsVolume: 0},
		{data: 0},
		{filename: 0},
		{list: 0},
		{selectedIndex: 0},
		{tweaksCount: 0},
		{upgradeID: 0},
		{colorHex: 0},
		{iconN: 0},
		{title: 0},
		{titleSize: 0},
		{valueNames: 0},
		{isLocked: 0},
		{keyCode: 0},
		{speed: 0},
		{CustomCursorEnabled: 0},
		{checkboxID: 0},
		{turretAngle: 0},
		{turretUID: 0},
		{healthDamage: 0},
		{shieldDamage: 0},
		{isDodged: 0},
		{multiplier: 0},
		{reloadTimeMS: 0},
		{rotateSpeed: 0},
		{bulletSpeed: 0},
		{range: 0},
		{bulletCount: 0},
		{criticalMP: 0},
		{criticalChance: 0},
		{hitsPerShot: 0},
		{firstMonsterDamageMP: 0},
		{CanDoClickDamage: 0},
		{LastMonsterMovePointID: 0},
		{coins: 0},
		{rp: 0},
		{showPopup: 0},
		{icon: 0},
		{text: 0},
		{createdMonsterUID: 0},
		{health: 0},
		{reward: 0},
		{rpValue: 0},
		{rpChance: 0},
		{shield: 0},
		{damageReductionMP: 0},
		{dodgeChance: 0},
		{damageDealerID: 0},
		{isContentLoaded: 0},
		{damageDealer: 0},
		{direction: 0},
		{stunChance: 0},
		{stunMP: 0},
		{stunDurationMS: 0},
		{healthPasedDamagePercent: 0},
		{uid: 0},
		{isStun: 0},
		{IsGameLoading: 0},
		{AutoSaveEnabled: 0},
		{AutoLoadEnabled: 0},
		{GameFPS: 0},
		{val: 0},
		{GUIUpdates: 0},
		{SmartUIUpdates: 0},
		{LoadingProgress100: 0},
		{IsLoaded: 0},
		{Host: 0},
		{IsShowingHosting: 0},
		{HostingOpacity: 0},
		{IsFadingHosting: 0},
		{IsHostingShown: 0},
		{IsLogoShown: 0},
		{SHOW_HOSTING_LOGO: 0}
	];
}

"use strict";

{
	const C3 = self.C3;
	
	function unaryminus(n)
	{
		return (typeof n === "number" ? -n : n);
	}

	function bothNumbers(a, b)
	{
		return typeof a === "number" && typeof b === "number";
	}

	function add(l, r)
	{
		if (bothNumbers(l, r))
			return l + r;
		else
			return l;
	}

	function subtract(l, r)
	{
		if (bothNumbers(l, r))
			return l - r;
		else
			return l;
	}

	function multiply(l, r)
	{
		if (bothNumbers(l, r))
			return l * r;
		else
			return l;
	}

	function divide(l, r)
	{
		if (bothNumbers(l, r))
			return l / r;
		else
			return l;
	}

	function mod(l, r)
	{
		if (bothNumbers(l, r))
			return l % r;
		else
			return l;
	}

	function pow(l, r)
	{
		if (bothNumbers(l, r))
			return Math.pow(l, r);
		else
			return l;
	}

	function and(l, r)
	{
		if (typeof l === "string" || typeof r === "string")
		{
			// & with either side string does string concatenation
			let lstr, rstr;

			if (typeof l === "number")
				lstr = (Math.round(l * 1e10) / 1e10).toString();
			else
				lstr = l;
			
			if (typeof r === "number")
				rstr = (Math.round(r * 1e10) / 1e10).toString();
			else
				rstr = r;
			
			return lstr + rstr;
		}
		else
		{
			// & with neither side a string does logical AND
			return (l && r ? 1 : 0);
		}
	}

	function or(l, r)
	{
		if (bothNumbers(l, r))
			return (l || r ? 1 : 0);
		else
			return l;
	}

	self.C3_ExpressionFuncs = [
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => v0.GetValue();
		},
		p => {
			const n0 = p._GetNode(0);
			return () => n0.ExpObject();
		},
		() => 1,
		() => 0,
		() => "Brightness",
		() => 110,
		() => 100,
		() => "Grayscale",
		() => 95,
		() => 80,
		() => "Touch Controls",
		() => "Mouse Controls",
		() => "RailTurret",
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0();
		},
		() => "Idle",
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			const n1 = p._GetNode(1);
			return () => f0(n1.ExpObject());
		},
		() => "",
		() => "buy",
		p => {
			const n0 = p._GetNode(0);
			return () => n0.ExpInstVar_Family();
		},
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0("");
		},
		p => {
			const n0 = p._GetNode(0);
			return () => (n0.ExpObject() - 100);
		},
		p => {
			const n0 = p._GetNode(0);
			return () => (n0.ExpObject() + 100);
		},
		p => {
			const n0 = p._GetNode(0);
			const v1 = p._GetNode(1).GetVar();
			const n2 = p._GetNode(2);
			const v3 = p._GetNode(3).GetVar();
			return () => ((n0.ExpInstVar_Family() * (v1.GetValue() / 100)) + (n2.ExpInstVar_Family() * (v3.GetValue() / 100)));
		},
		() => "Click",
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() / 1000);
		},
		() => "ClickDamageReload",
		() => "Cursor",
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0(255, 0, 0);
		},
		() => "Reload",
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() - 10);
		},
		() => "hitmarker",
		p => {
			const n0 = p._GetNode(0);
			return () => n0.ExpInstVar();
		},
		() => "Music",
		() => "music",
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => Math.floor(v0.GetValue());
		},
		() => -10000,
		() => "Sound",
		p => {
			const n0 = p._GetNode(0);
			return () => ((n0.ExpInstVar_Family()) === ("selector") ? 1 : 0);
		},
		() => 85,
		() => 50,
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			const n1 = p._GetNode(1);
			return () => f0(n1.ExpInstVar_Family());
		},
		() => 65,
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			const v1 = p._GetNode(1).GetVar();
			const v2 = p._GetNode(2).GetVar();
			const v3 = p._GetNode(3).GetVar();
			return () => f0(v1.GetValue(), v2.GetValue(), v3.GetValue());
		},
		() => "User Icons",
		p => {
			const v0 = p._GetNode(0).GetVar();
			const v1 = p._GetNode(1).GetVar();
			const v2 = p._GetNode(2).GetVar();
			return () => (Math.round((v0.GetValue() * v1.GetValue())) / v2.GetValue());
		},
		() => "LoadingScreen",
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			const v1 = p._GetNode(1).GetVar();
			return () => f0(v1.GetValue());
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			const v1 = p._GetNode(1).GetVar();
			const v2 = p._GetNode(2).GetVar();
			return () => ((v0.GetValue() * v1.GetValue()) + (v2.GetValue() / 2));
		},
		() => 1512,
		() => 1513,
		() => "none",
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			const v1 = p._GetNode(1).GetVar();
			const v2 = p._GetNode(2).GetVar();
			return () => ((Math.floor((f0() / v1.GetValue())) * v2.GetValue()) + 20);
		},
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			const v1 = p._GetNode(1).GetVar();
			const v2 = p._GetNode(2).GetVar();
			return () => (Math.floor((f0() / v1.GetValue())) * v2.GetValue());
		},
		() => "Building",
		() => "Turret",
		() => 160,
		() => "[color=#36e05b][font=KumbhSans-Bold]LMB[/font][/color] - Build\n[color=#4eb8e5][font=KumbhSans-Bold]R[/font][/color] - Rotate",
		() => "[color=#36e05b][font=KumbhSans-Bold]LMB[/font][/color] - Build",
		() => 180,
		() => 120,
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			const v1 = p._GetNode(1).GetVar();
			const v2 = p._GetNode(2).GetVar();
			const v3 = p._GetNode(3).GetVar();
			return () => f0(v1.GetValue(), v2.GetValue(), v3.GetValue(), 0);
		},
		() => "buildingCreated",
		() => 2,
		() => "[color=#e0db36][font=KumbhSans-Bold]RMB[/font][/color] - Remove",
		p => {
			const n0 = p._GetNode(0);
			const n1 = p._GetNode(1);
			const v2 = p._GetNode(2).GetVar();
			const v3 = p._GetNode(3).GetVar();
			const v4 = p._GetNode(4).GetVar();
			return () => ((C3.distanceTo(n0.ExpObject(), n1.ExpObject(), v2.GetValue(), v3.GetValue())) < ((v4.GetValue() / 2)) ? 1 : 0);
		},
		() => -2,
		() => "[color=#e03655]Limit reached[/font]",
		() => "[color=#e03655]Wrong place[/font]",
		p => {
			const v0 = p._GetNode(0).GetVar();
			const v1 = p._GetNode(1).GetVar();
			return () => ((((v0.GetValue()) === (270) ? 1 : 0)) ? (0) : ((v1.GetValue() + 90)));
		},
		p => {
			const n0 = p._GetNode(0);
			const f1 = p._GetNode(1).GetBoundMethod();
			const v2 = p._GetNode(2).GetVar();
			return () => (n0.ExpObject("Center") - (f1("") - (v2.GetValue() / 2)));
		},
		() => "OnWall",
		() => "OnGrass",
		() => "LoadGameFromFile",
		p => {
			const n0 = p._GetNode(0);
			return () => n0.ExpObject(0);
		},
		() => "application/text",
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			const v1 = p._GetNode(1).GetVar();
			return () => (f0(v1.GetValue(), ", ") - 1);
		},
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			const v1 = p._GetNode(1).GetVar();
			const f2 = p._GetNode(2).GetBoundMethod();
			return () => f0(v1.GetValue(), f2(), ", ");
		},
		() => "ErrorScreen",
		() => "ManualGameLoadError",
		() => "AutoGameLoadError",
		() => "Dark",
		() => "Overlay Message",
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			const v1 = p._GetNode(1).GetVar();
			return () => f0(v1.GetValue(), ", ");
		},
		() => "Markup",
		() => 880,
		p => {
			const v0 = p._GetNode(0).GetVar();
			const v1 = p._GetNode(1).GetVar();
			return () => (420 + ((((v0.GetValue()) > (1) ? 1 : 0)) ? (((v1.GetValue() - 1) * 140)) : (0)));
		},
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0(84, 84, 84);
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => ("Upgrade::" + v0.GetValue());
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() + 640);
		},
		() => 240,
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0(0, 0, 0);
		},
		() => 10,
		() => "Frames",
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0(41, 41, 41);
		},
		() => "Buttons",
		() => 480,
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() + 620);
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			const v1 = p._GetNode(1).GetVar();
			const v2 = p._GetNode(2).GetVar();
			return () => ((v0.GetValue() + 320) + ((((v1.GetValue()) > (1) ? 1 : 0)) ? (((v2.GetValue() - 1) * 140)) : (0)));
		},
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0(181, 181, 181);
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => ("buyUpgrade::" + v0.GetValue());
		},
		() => "Icons",
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() + 440);
		},
		() => "Wallets",
		() => "Texts",
		() => 320,
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() + 660);
		},
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0(255, 255, 255);
		},
		() => "KumbhSans-Regular",
		() => 48,
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (("upgradePrice::" + v0.GetValue()) + "::1");
		},
		() => "button",
		() => "@Price",
		() => 600,
		p => {
			const v0 = p._GetNode(0).GetVar();
			const n1 = p._GetNode(1);
			return () => ((v0.GetValue() + 340) - (n1.ExpObject() / 2));
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			const n1 = p._GetNode(1);
			return () => ((v0.GetValue() + 50) - (n1.ExpObject() / 2));
		},
		() => "KumbhSans-Bold",
		() => "text",
		p => {
			const v0 = p._GetNode(0).GetVar();
			const n1 = p._GetNode(1);
			return () => ((v0.GetValue() + 760) - (n1.ExpObject() / 2));
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			const n1 = p._GetNode(1);
			return () => ((v0.GetValue() + 45) - (n1.ExpObject() / 2));
		},
		() => 45,
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => ("upgradeLevel::" + v0.GetValue());
		},
		() => "@LVL",
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() - 1);
		},
		() => 280,
		p => {
			const v0 = p._GetNode(0).GetVar();
			const n1 = p._GetNode(1);
			return () => ((v0.GetValue() + 200) - (n1.ExpObject() / 2));
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			const n1 = p._GetNode(1);
			const f2 = p._GetNode(2).GetBoundMethod();
			const f3 = p._GetNode(3).GetBoundMethod();
			return () => (((v0.GetValue() + 175) - (n1.ExpObject() / 2)) + (((((f2() + 1)) > (1) ? 1 : 0)) ? ((f3() * 140)) : (0)));
		},
		() => 440,
		p => {
			const v0 = p._GetNode(0).GetVar();
			const n1 = p._GetNode(1);
			return () => ((v0.GetValue() + 600) - (n1.ExpObject() / 2));
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			const n1 = p._GetNode(1);
			const f2 = p._GetNode(2).GetBoundMethod();
			const f3 = p._GetNode(3).GetBoundMethod();
			return () => (((v0.GetValue() + 180) - (n1.ExpObject() / 2)) + (((((f2() + 1)) > (1) ? 1 : 0)) ? ((f3() * 140)) : (0)));
		},
		() => 40,
		p => {
			const v0 = p._GetNode(0).GetVar();
			const f1 = p._GetNode(1).GetBoundMethod();
			return () => and((("upgradeValue::" + v0.GetValue()) + "::"), (f1() + 1));
		},
		() => "@VALUE1",
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() + 20);
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			const f1 = p._GetNode(1).GetBoundMethod();
			const f2 = p._GetNode(2).GetBoundMethod();
			return () => ((v0.GetValue() + 120) + (((((f1() + 1)) > (1) ? 1 : 0)) ? ((f2() * 140)) : (0)));
		},
		() => 840,
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0(110, 110, 110);
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() + 340);
		},
		() => 20,
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0(48, 48, 48);
		},
		() => "Locked Overlay",
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => ("!Upgrade::" + v0.GetValue());
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			const n1 = p._GetNode(1);
			return () => (v0.GetValue() + (n1.ExpObject() / 2));
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			const v1 = p._GetNode(1).GetVar();
			return () => and(((v0.GetValue()) >= (49) ? 1 : 0), ((v1.GetValue()) <= (57) ? 1 : 0));
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() - 48);
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() * 10);
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => and("Speed: x", v0.GetValue());
		},
		() => 11,
		p => {
			const n0 = p._GetNode(0);
			const n1 = p._GetNode(1);
			const n2 = p._GetNode(2);
			return () => Math.floor(((n0.ExpBehavior("ClickDamageReload") / n1.ExpBehavior("ClickDamageReload")) * n2.ExpObject()));
		},
		() => "Discord",
		() => "https://discord.gg/aU2gPUf4K8",
		() => "nerdError's Discord",
		() => "Patreon",
		() => "https://www.patreon.com/nerdError",
		() => "nerdError's Patreon",
		() => "Kongregate",
		() => "https://www.kongregate.com/accounts/nerderror",
		() => "nerdError's Kongregate",
		() => "https://whitebataudio.com/downloads/end-credits/",
		() => "WBA - End Credits",
		() => "Crazygames",
		() => "https://www.crazygames.com/",
		() => "CrazyGames",
		() => "General",
		p => {
			const n0 = p._GetNode(0);
			const f1 = p._GetNode(1).GetBoundMethod();
			return () => (n0.ExpBehavior() * f1());
		},
		p => {
			const n0 = p._GetNode(0);
			return () => n0.ExpBehavior();
		},
		() => "OnShoot",
		p => {
			const n0 = p._GetNode(0);
			const n1 = p._GetNode(1);
			const n2 = p._GetNode(2);
			return () => C3.clamp(n0.ExpObject(), (n1.ExpInstVar() - 0.1), (n2.ExpInstVar() + 0.1));
		},
		() => "OnCreated",
		() => "Game",
		() => "BasicTurret",
		() => "GameOverlayUI",
		p => {
			const n0 = p._GetNode(0);
			return () => (n0.ExpBehavior() * 2);
		},
		() => "LaserTurret",
		() => 60,
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() - 8);
		},
		() => "basicTurret",
		p => {
			const n0 = p._GetNode(0);
			return () => n0.ExpObject("Bullet");
		},
		p => {
			const n0 = p._GetNode(0);
			const n1 = p._GetNode(1);
			const n2 = p._GetNode(2);
			const n3 = p._GetNode(3);
			return () => C3.distanceTo(n0.ExpObject(), n1.ExpObject(), n2.ExpObject(), n3.ExpObject());
		},
		p => {
			const n0 = p._GetNode(0);
			return () => ((n0.ExpBehavior() * 2) - 60);
		},
		p => {
			const n0 = p._GetNode(0);
			const n1 = p._GetNode(1);
			const n2 = p._GetNode(2);
			const n3 = p._GetNode(3);
			const n4 = p._GetNode(4);
			return () => (1 - (C3.distanceTo(n0.ExpObject(), n1.ExpObject(), n2.ExpObject(), n3.ExpObject()) / n4.ExpObject()));
		},
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			const v1 = p._GetNode(1).GetVar();
			const n2 = p._GetNode(2);
			return () => f0((v1.GetValue() * n2.ExpInstVar()), 0);
		},
		() => "Turret Functions",
		() => 15,
		() => "Bullet",
		p => {
			const n0 = p._GetNode(0);
			return () => (25 / n0.ExpBehavior());
		},
		() => "show",
		() => "BottomGame",
		p => {
			const n0 = p._GetNode(0);
			return () => (n0.ExpInstVar() + ".Destroy");
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			const f1 = p._GetNode(1).GetBoundMethod();
			const v2 = p._GetNode(2).GetVar();
			const v3 = p._GetNode(3).GetVar();
			return () => (v0.GetValue() + f1((v2.GetValue() * (-0.1)), ((-v3.GetValue()) * 0.1)));
		},
		() => "armoredMonster",
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0(0.8, 1.2);
		},
		() => "basicMonster",
		() => "fastMonster",
		() => "Monster Awards",
		() => "GlobalOverlayUI",
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() - 60);
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() - 120);
		},
		p => {
			const n0 = p._GetNode(0);
			return () => (n0.ExpObject() + 60);
		},
		p => {
			const n0 = p._GetNode(0);
			return () => (n0.ExpObject() + 40);
		},
		p => {
			const n0 = p._GetNode(0);
			return () => (n0.ExpObject() - 65);
		},
		() => 360,
		() => 90,
		() => -40,
		() => "Monster Effects",
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0(100, 0, 0);
		},
		() => 0.2,
		() => "Create & Damage Functions",
		() => "BasicMonster",
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => (v0.GetValue() + 45);
		},
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			const n1 = p._GetNode(1);
			return () => Math.floor(f0(1, n1.ExpObject()));
		},
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0(0, 240, 92);
		},
		() => "#00f05c",
		() => "Forward",
		() => "ArmoredMonster",
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0(222, 222, 222);
		},
		() => "#dedede",
		() => "FastMonster",
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0(68, 191, 243);
		},
		() => "#44bff3",
		() => "Back",
		p => {
			const n0 = p._GetNode(0);
			const n1 = p._GetNode(1);
			const n2 = p._GetNode(2);
			return () => ((n0.ExpInstVar_Family() / n1.ExpInstVar_Family()) * n2.ExpInstVar_Family());
		},
		() => 0.05,
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			const v1 = p._GetNode(1).GetVar();
			return () => ("+" + f0(v1.GetValue()));
		},
		() => "Monster Movement",
		() => 0.1,
		p => {
			const n0 = p._GetNode(0);
			return () => (n0.ExpInstVar() + 1);
		},
		p => {
			const n0 = p._GetNode(0);
			return () => (n0.ExpInstVar() - 1);
		},
		() => "Spikes",
		() => "reload",
		p => {
			const n0 = p._GetNode(0);
			const n1 = p._GetNode(1);
			return () => (n0.ExpBehavior() * n1.ExpInstVar());
		},
		p => {
			const n0 = p._GetNode(0);
			return () => (n0.ExpInstVar() / 1000);
		},
		() => "stun",
		() => "spikes",
		() => "GUI Init",
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => f0(0);
		},
		() => "main",
		() => "styles.css",
		p => {
			const f0 = p._GetNode(0).GetBoundMethod();
			return () => (f0() * 100);
		},
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => and(Math.floor(v0.GetValue()), "%");
		},
		() => -5,
		() => "intro",
		() => 99,
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => C3.lerp(v0.GetValue(), 100, 0.05);
		},
		() => 5,
		p => {
			const v0 = p._GetNode(0).GetVar();
			return () => C3.lerp(v0.GetValue(), 0, 0.05);
		}
	];
}


"use strict";



{
	const scriptsInEvents = {

		async Button_Event3_Act1(runtime, localVars)
		{
			const button = Game.Construct3.objects.Button.getFirstPickedInstance();
			
			localVars.isCanAccessButton = Game.Input.IsCanAccessUIObject(button) ? 1 : 0;
			
		},

		async Data_Event2_Act1(runtime, localVars)
		{
			Game.Input.OnButtonClicked("action::Save");
		},

		async Data_Event4_Act1(runtime, localVars)
		{
			Game.Input.OnButtonClicked("action::Load");
		},

		async Input_Event2_Act3(runtime, localVars)
		{
			console.log("Layout restarted")
		},

		async Input_Event49_Act1(runtime, localVars)
		{
			await Game.Input.OnButtonClicked(Game.Construct3.objects.Button.getFirstPickedInstance().instVars.name);
		},

		async Input_Event61_Act1(runtime, localVars)
		{
			const obj = Game.Construct3.objects.Selector.getFirstPickedInstance();
			Game.Input.OnSelectorClicked(obj.instVars.section, obj.instVars.id);
		},

		async Input_Event64_Act2(runtime, localVars)
		{
			Game.Input.OnScrollbarMoving(localVars.id)
		},

		async Input_Event67_Act2(runtime, localVars)
		{
			localVars.isScrollbarActive = Game.Input.IsScrollBarActive(localVars.scrollbarID) ? 1 : 0
		},

		async Input_Event69_Act3(runtime, localVars)
		{
			Game.Input.OnScrollbarMoving(localVars.id)
		},

		async Input_Event72_Act2(runtime, localVars)
		{
			localVars.isScrollbarActive = Game.Input.IsScrollBarActive(localVars.scrollbarID) ? 1 : 0
		},

		async Input_Event74_Act3(runtime, localVars)
		{
			Game.Input.OnScrollbarMoving(localVars.id)
		},

		async Input_Event76_Act1(runtime, localVars)
		{
			localVars.okay = Game.Input.IsCanAccessInput() ? 1 : 0;
		},

		async Input_Event79_Act1(runtime, localVars)
		{
			const monster = runtime.objects.Monster.getFirstPickedInstance();
			const stats = Game.ContentStorage.GetItemOfClass("Monster", monster.instVars.Type);
			
			localVars.damagePercent = stats.ClickDamagePercent.Value.AsNumber;
			localVars.reloadMs = stats.ClickDamageReloadMS.Value.AsNumber
		},

		async Input_Event79_Act10(runtime, localVars)
		{
			Game.Content.Statistics.Gameplay.TotalClicks.Value++;
			Game.Content.Statistics.Gameplay.TotalClickDamage.Value = Game.Float.Plus(Game.Content.Statistics.Gameplay.TotalClickDamage.Value, localVars.actualDamage);
		},

		async Input_Event83_Act3(runtime, localVars)
		{
			Game.Input.OnSliderValueChanged(localVars.sbName, localVars.sbValue);
		},

		async Input_Event100_Act1(runtime, localVars)
		{
			console.log(`UpdateAudioVolume options is not handled`);
		},

		async Selector_Event15_Act1(runtime, localVars)
		{
			const selector = Game.Construct3.objects.Selector.getFirstPickedInstance();
			
			localVars.isCanAccessSelector = Game.Input.IsCanAccessUIObject(selector) ? 1 : 0;
			
		},

		async Utils_Event2_Act1(runtime, localVars)
		{
			let rgb = Game.UtilsMath.HexToRGB255(localVars.hex);
			localVars.r = rgb.r255;
			localVars.g = rgb.g255;
			localVars.b = rgb.b255;
			//console.log(`rgb: ${rgb.r}, ${rgb.g}, ${rgb.b}`)
		},

		async Utils_Event12_Act1(runtime, localVars)
		{
			localVars.output = Game.UtilsText.GetNumberText(localVars.value);
		},

		async Building_Event16_Act1(runtime, localVars)
		{
			const build = Game.Managers.Build.CurrentBuilding;
			runtime.globalVars.BuildName = build.Name;
			runtime.globalVars.BuildType = build.Type;
			runtime.globalVars.PositionType = build.PositionType;
		},

		async Building_Event39_Act1(runtime, localVars)
		{
			Game.Managers.Fight.CreateBuilding(runtime.globalVars.BuildName, {
				X: runtime.globalVars.cursorFieldX, 
				Y: runtime.globalVars.cursorFieldY,
			}, );
		},

		async Building_Event42_Act1(runtime, localVars)
		{
			Game.Managers.Fight.UpdateBuildModeInfo()
		},

		async Building_Event60_Act1(runtime, localVars)
		{
			Game.Managers.Fight.UpdateBuildModeInfo()
		},

		async Building_Event79_Act1(runtime, localVars)
		{
			const build = Game.Managers.Build.CurrentBuilding;
			const name = build.Name;
			const type = build.Type;
			localVars.t_BuildType = type;
			
			localVars.isCountFine = build.CanBuild.Check() ? 1 : 0;
		},

		async Building_Event93_Act1(runtime, localVars)
		{
			console.error(`PositionType '${localVars.t_positionType}' is not handled`);
		},

		async SettingsView_Event3_Act1(runtime, localVars)
		{
			Game.GUI.SetButtonEnabled('action::LoadGameFromFile', true);
		},

		async SettingsView_Event5_Act1(runtime, localVars)
		{
			Game.GUI.SetButtonEnabled('action::LoadGameFromFile', false);
		},

		async SettingsView_Event9_Act2(runtime, localVars)
		{
			Game.LoadGameFromString(Game.LoadType.Manual, localVars.data, true);
		},

		async SettingsView_Event11_Act2(runtime, localVars)
		{
			Game.LoadGameFromString(Game.LoadType.Manual, localVars.data, true);
		},

		async SettingsView_Event13_Act1(runtime, localVars)
		{
			console.log('Filename: ' + localVars.filename)
		},

		async SettingsView_Event16_Act1(runtime, localVars)
		{
			Game.GUI.SetButtonEnabled('action::LoadGameFromString', true);
		},

		async SettingsView_Event18_Act1(runtime, localVars)
		{
			Game.GUI.SetButtonEnabled('action::LoadGameFromString', false);
		},

		async Checkbox_Event7_Act1(runtime, localVars)
		{
			Game.Input.OnCheckboxClicked(localVars.checkboxID, localVars.enabled);
		},

		async Checkbox_Event20_Act1(runtime, localVars)
		{
			Game.Input.OnCheckboxClicked(localVars.id, localVars.enabled);
		},

		async Turrets_Event9_Act6(runtime, localVars)
		{
			let turretType = localVars.type;
			let uid = localVars.turretUID;
			let id = `${turretType}::${uid}`
			let x = localVars.x;
			let y = localVars.y;
			let angle = localVars.turretAngle;
			
			if (Game.SystemData.IsContentLoaded || Game.SaveManager.IsLoading()) {
				Game.ContentStorage.GetItem(turretType).Instances.AddItem(
				   new Game.TurretInstance(id, turretType, uid,
										   { X: x, Y: y}, angle))
			
				await Game.Managers.Fight.OnTurretCreated(turretType);
			}
		},

		async Turrets_Event50_Act4(runtime, localVars)
		{
			let turret 
			 = runtime.objects.BasicTurret.getFirstPickedInstance();
			
			let criticalChance = turret.instVars.CriticalChance;
			let criticalMP = turret.instVars.CriticalMP;
			 
			let isCritical = Game.RNG.bool(criticalChance / 100);
			
			if (isCritical) {
				localVars.damage *= criticalMP;
			}
		},

		async Turrets_Event59_Act4(runtime, localVars)
		{
			let turret 
			 = runtime.objects.LaserTurret.getFirstPickedInstance();
			
			let criticalChance = turret.instVars.CriticalChance;
			let criticalMP = turret.instVars.CriticalMP;
			 
			let isCritical = Game.RNG.bool(criticalChance / 100);
			
			if (isCritical) {
				localVars.damage *= criticalMP;
			}
		},

		async Turrets_Event60_Act1(runtime, localVars)
		{
			let monster = runtime.objects.Monster.getFirstPickedInstance();
			let dodgeChance = monster.instVars.DodgeChance;
			localVars.isDodged = Game.RNG.bool(dodgeChance / 100) ? 1 : 0;
		},

		async Turrets_Event86_Act1(runtime, localVars)
		{
			throw new Error(`Turret type ${localVars.name} is not handled`)
		},

		async Turrets_Event87_Act1(runtime, localVars)
		{
			Game.SmartUIUpdate();
		},

		async Turrets_Event99_Act1(runtime, localVars)
		{
			let monster = runtime.objects.Monster.getFirstPickedInstance();
			let dodgeChance = monster.instVars.DodgeChance;
			localVars.isDodged = Game.RNG.bool(dodgeChance / 100) ? 1 : 0;
		},

		async Turrets_Event103_Act1(runtime, localVars)
		{
			console.log('Dodged!');
		},

		async Turrets_Event111_Act6(runtime, localVars)
		{
			let turretType = localVars.type;
			let uid = localVars.turretUID;
			
			if (Game.SystemData.IsContentLoaded) {
				Game.ContentStorage.GetItem(turretType).RemoveTurretInstance(uid)
			}
		},

		async Monsters_Event25_Act1(runtime, localVars)
		{
			const monster = runtime.objects.Monster.getFirstPickedInstance();
			const coins = monster.instVars.Reward;
			const rp = monster.instVars.RPValue;
			const rpChance = monster.instVars.RPChance;
			
			localVars.coins = coins;
			
			if (Game.SystemData.IsContentLoaded && Game.RNG.bool(rpChance / 100)) {
				localVars.rp = rp;
			}
		},

		async Monsters_Event28_Act1(runtime, localVars)
		{
			localVars.showPopup = Game.SystemData.Settings.ShowMonsterAward ? 1 : 0;
		},

		async Monsters_Event44_Act1(runtime, localVars)
		{
			alert(`Unknown monster type: ${localVars.type}`)
		},

		async Monsters_Event47_Act1(runtime, localVars)
		{
			const monster = runtime.objects.Monster.getFirstPickedInstance();
			Game.Managers.Fight.OnMonsterSpawned(localVars.type, { X: monster.x, Y: monster.y})
		},

		async Monsters_Event52_Act1(runtime, localVars)
		{
			const monster = runtime.objects.Monster.getFirstPickedInstance();
			const type = monster.instVars.Type;
			
			let hp = monster.instVars.Health;
			let hpMax = monster.instVars.HealthMax;
			let damageReductionMP = monster.instVars.DamageReductionMP;
			let dmrMP = damageReductionMP;
			
			let damage = Math.max(localVars.damage, 0) * dmrMP;
			let baseHealthDamage = Math.max(localVars.healthDamage, 0) * dmrMP;
			let baseShieldDamage = Math.max(localVars.shieldDamage, 0) * dmrMP;
			
			let damageDealer = localVars.damageDealerID; 
			
			let healthDamage = 0;
			let shieldDamage = 0;
			
			let totalDamage = baseHealthDamage + baseShieldDamage;
			
			let __health = monster.instVars.Health;
			let __shield = monster.instVars.Shield;
			
			monster.instVars.Shield 
			  = Math.max(0, monster.instVars.Shield - baseShieldDamage);
			
			let shield = monster.instVars.Shield;
			let shieldMax = monster.instVars.ShieldMax;
			
			if (shield > 0) {
				if (shield >= damage) {
					shieldDamage = damage;
				}
				else {
					shieldDamage = shield;
					healthDamage = damage - shield;
				}
			}
			else {
				healthDamage = damage;
				monster.instVars.Shield = 0;
			}
			
			monster.instVars.Shield -= shieldDamage;
			monster.instVars.Health -= healthDamage + baseHealthDamage;
			
			monster.instVars.Health = Math.max(0, monster.instVars.Health);
			
			totalDamage += shieldDamage + healthDamage;
			
			monster.instVars.LastDamageDealer = damageDealer
			Game.Managers.Fight.OnMonsterDamaged(type, totalDamage, damageDealer)
			
			// console.log(`${__shield} -> ${monster.instVars.Shield}`);
			// console.log(`${__health} -> ${monster.instVars.Health}`);
			
			// console.log(`Health after damage: ${hp} / ${hpMax}`);
			// console.log(`Damage: ${localVars.damage}\nHealth before damage: ${hp} / ${hpMax}`);
		},

		async Monsters_Event54_Act2(runtime, localVars)
		{
			const monster = runtime.objects.Monster.getFirstPickedInstance();
			const hp = monster.instVars.Health;
			const hpMax = monster.instVars.HealthMax;
			const healthProgress = monster.instVars.Health / monster.instVars.HealthMax * 100;
			const monsterHealthBar = runtime.objects.MonsterHealthBar.getFirstPickedInstance();
			
			let colorRGB;
			if (healthProgress >= 50) {
				colorRGB = Game.ColorUtils.InterpolateColors("#e6c13d", monster.instVars.ColorHex, 
									(hp - (hpMax / 2)) / (hpMax / 2) * 100);
			}
			else {
				colorRGB = Game.ColorUtils.InterpolateColors("#de2323", "#e6c13d",
									hp / (hpMax / 2) * 100);
			}
			
			
			monsterHealthBar.colorRgb = Game.ColorUtils.RGB255ToC3Color(colorRGB);
			
		},

		async Monsters_Event63_Act1(runtime, localVars)
		{
			localVars.isContentLoaded = Game.SystemData.IsContentLoaded ? 1 : 0
		},

		async Monsters_Event65_Act1(runtime, localVars)
		{
			const monster = runtime.objects.Monster.getFirstPickedInstance();
			const type = monster.instVars.Type;
			
			if (Game.SystemData.IsContentLoaded) {
				Game.Managers.Fight.OnMonsterDied(type, {
					Coins: localVars.coins,
					RP: localVars.rp,
				}, { 
					X: monster.x,
					Y: monster.y,
				}, localVars.damageDealer);
			}
		},

		async Monsters_Event93_Act1(runtime, localVars)
		{
			console.log('0');
		},

		async Monsters_Event94_Act1(runtime, localVars)
		{
			console.log('1');
		},

		async Monsters_Event95_Act1(runtime, localVars)
		{
			console.log('2');
		},

		async Monsters_Event112_Act4(runtime, localVars)
		{
			console.log('3');
		},

		async Spikes_Event6_Act2(runtime, localVars)
		{
			let uid = localVars.uid;
			
			Game.OnBuildingDestroyed("Spikes", uid);
			
		},

		async Spikes_Event10_Act1(runtime, localVars)
		{
			let spikes = runtime.objects.Spikes.getFirstPickedInstance();
			
			localVars.isStun = Game.RNG.bool(spikes.instVars.StunChance / 100) ? 1 : 0;
		},

		async Spikes_Event13_Act4(runtime, localVars)
		{
			let spikes = runtime.objects.Spikes.getFirstPickedInstance();
			let monster = runtime.objects.Monster.getFirstPickedInstance();
			
			let healthBasedDMG = spikes.instVars.HealthBasedDamagePercent;
			let health = monster.instVars.Health;
			
			let damageBonus = Math.max(0, 
			 	Game.Percent.GetValuePercent(health, healthBasedDMG).AsNumber);
			// console.log(`Damage: ${localVars.damage}\nBonus: ${damageBonus}`);
			localVars.healthDamage += damageBonus;
			
		},

		async Init_Event15_Act1(runtime, localVars)
		{
			Game.OnPreview();
		},

		async Init_Event17_Act1(runtime, localVars)
		{
			Game.OnRelease();
		},

		async Init_Event21_Act1(runtime, localVars)
		{
			// console.log("GAME IS LOADING");
			await Game.Init();
		},

		async Init_Event23_Act1(runtime, localVars)
		{
			// console.log("GAME IS NOT LOADING");
			await Game.Init();
		},

		async Init_Event27_Act1(runtime, localVars)
		{
			Game.SystemData.IsAutoSaveEnabledC3 = true
		},

		async Init_Event31_Act2(runtime, localVars)
		{
			//console.log(localVars.val);
			Game.Input.SetOption({
				ID: "Notation",
				Value: localVars.val
			});
			
		}

	};
	
	self.C3.ScriptsInEvents = scriptsInEvents;
}


// User script game.js
this["Game"] =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./javascript/construct3/c3ObjectUtils/c3themeUtils.ts":
/*!*************************************************************!*\
  !*** ./javascript/construct3/c3ObjectUtils/c3themeUtils.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FindNPElementsByTheme = exports.FindSelectorByTheme = exports.FindMarkupByTheme = exports.FindTextsByTheme = exports.FindIconsByTheme = exports.FindButtonsByTheme = exports.FindAllByDynamicTheme = exports.SetDynamicThemeInRect = exports.ToggleTheme = exports.SetupThemeManager = exports.FindAllByTheme = void 0;\r\nvar main_1 = __webpack_require__(/*! ../main */ \"./javascript/construct3/main.js\");\r\nvar game_1 = __webpack_require__(/*! ../../../src/game */ \"./src/game.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../../src/content/content */ \"./src/content/content.ts\");\r\nvar utilsGUI_1 = __webpack_require__(/*! ./utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nfunction FindAllByTheme(theme) {\r\n    var selectors = FindSelectorByTheme(theme);\r\n    var buttons = FindButtonsByTheme(theme);\r\n    var texts = FindTextsByTheme(theme);\r\n    var markups = FindMarkupByTheme(theme);\r\n    var npElements = FindNPElementsByTheme(theme);\r\n    var icons = FindIconsByTheme(theme);\r\n    return __spreadArrays(texts, buttons, markups, npElements, icons, selectors);\r\n}\r\nexports.FindAllByTheme = FindAllByTheme;\r\n//todo !!!!!!!!!!!!!!!!!!!!!! ПОИСК ВСЕХ ТЕМ МОЖНО СДЕЛАТЬ 1 РАЗ В САМОМ НАЧАЛЕ, АЛО\r\nfunction SetupThemeManager(manager) {\r\n    var all = utilsGUI_1.GetAll();\r\n    var itemsAdded = 0;\r\n    var IsHasTheme = function (item) {\r\n        if (\"instVars\" in item) {\r\n            return \"theme\" in item.instVars;\r\n        }\r\n        else\r\n            return false;\r\n    };\r\n    var _loop_1 = function (_item) {\r\n        if (IsHasTheme(_item)) {\r\n            var item = _item;\r\n            var theme_1 = item.instVars.theme;\r\n            if (theme_1.length < 2)\r\n                return \"continue\";\r\n            itemsAdded++;\r\n            var isAnti = false;\r\n            if (theme_1[0] == \"!\") {\r\n                theme_1 = theme_1.slice(1);\r\n                isAnti = true;\r\n            }\r\n            var themeInfo = manager.List.find(function (themeInfo) { return themeInfo.Name == theme_1; });\r\n            if (!themeInfo) {\r\n                //console.log(`Theme added`)\r\n                themeInfo = {\r\n                    Name: theme_1,\r\n                    Objects: [],\r\n                    AntiObjects: [],\r\n                    Upgrades: [],\r\n                    Enabled: null,\r\n                };\r\n                manager.List.push(themeInfo);\r\n            }\r\n            if (!isAnti) {\r\n                themeInfo.Objects.push(item);\r\n            }\r\n            else\r\n                themeInfo.AntiObjects.push(item);\r\n        }\r\n        else {\r\n            //console.log('Skipped');\r\n        }\r\n    };\r\n    for (var _i = 0, all_1 = all; _i < all_1.length; _i++) {\r\n        var _item = all_1[_i];\r\n        _loop_1(_item);\r\n    }\r\n    console.log(\"Items added to themes manager: \" + itemsAdded);\r\n}\r\nexports.SetupThemeManager = SetupThemeManager;\r\nfunction ToggleTheme(theme, enabled) {\r\n    content_1.SystemData.PerformanceStats.ToggleThemeCalls++;\r\n    var themeInfo = game_1.Themes.List.find(function (themeInfo) { return themeInfo.Name == theme; });\r\n    if (themeInfo) {\r\n        if (themeInfo.Enabled == null || themeInfo.Enabled != enabled) {\r\n            for (var _i = 0, _a = themeInfo.Objects; _i < _a.length; _i++) {\r\n                var item = _a[_i];\r\n                item.isVisible = enabled;\r\n            }\r\n            for (var _b = 0, _c = themeInfo.AntiObjects; _b < _c.length; _b++) {\r\n                var antiItem = _c[_b];\r\n                antiItem.isVisible = !enabled;\r\n            }\r\n            for (var _d = 0, _e = themeInfo.Upgrades; _d < _e.length; _d++) {\r\n                var upgrade = _e[_d];\r\n                upgrade.IsThemeUnlocked = enabled;\r\n            }\r\n            themeInfo.Enabled = enabled;\r\n        }\r\n    }\r\n    game_1.SmartUIUpdate();\r\n}\r\nexports.ToggleTheme = ToggleTheme;\r\n//todo check if it works\r\nfunction SetDynamicThemeInRect(theme, rect, skipAntiThemes) {\r\n    if (skipAntiThemes === void 0) { skipAntiThemes = false; }\r\n    var items = utilsGUI_1.FindAllInRect(rect);\r\n    for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\r\n        var anyItem = items_1[_i];\r\n        if (skipAntiThemes) {\r\n            var item = anyItem;\r\n            if (\"instVars\" in item && \"theme\" in item[\"instVars\"]) {\r\n                if (item.instVars.theme[0] != \"!\") {\r\n                    anyItem.c_theme = theme;\r\n                }\r\n            }\r\n            else {\r\n                anyItem.c_theme = theme;\r\n            }\r\n        }\r\n        else {\r\n            anyItem.c_theme = theme;\r\n        }\r\n    }\r\n}\r\nexports.SetDynamicThemeInRect = SetDynamicThemeInRect;\r\nfunction FindAllByDynamicTheme(theme) {\r\n    var items = utilsGUI_1.GetAll();\r\n    var output = [];\r\n    for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {\r\n        var item = items_2[_i];\r\n        if (item.c_theme == theme) {\r\n            output.push(item);\r\n        }\r\n    }\r\n    return output;\r\n}\r\nexports.FindAllByDynamicTheme = FindAllByDynamicTheme;\r\n/**\r\n * @param {string} theme\r\n * @return {C3Button[]}\r\n * @function\r\n */\r\nfunction FindButtonsByTheme(theme) {\r\n    var buttons = main_1.Construct3.objects.Button.getAllInstances();\r\n    var result = [];\r\n    for (var _i = 0, buttons_1 = buttons; _i < buttons_1.length; _i++) {\r\n        var b = buttons_1[_i];\r\n        if (b.instVars.theme === theme) {\r\n            result.push(b);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.FindButtonsByTheme = FindButtonsByTheme;\r\nfunction FindIconsByTheme(theme) {\r\n    var icons = main_1.Construct3.objects.Icon.getAllInstances();\r\n    var result = [];\r\n    for (var _i = 0, icons_1 = icons; _i < icons_1.length; _i++) {\r\n        var b = icons_1[_i];\r\n        if (b.instVars.theme === theme) {\r\n            result.push(b);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.FindIconsByTheme = FindIconsByTheme;\r\nfunction FindTextsByTheme(theme) {\r\n    var buttons = main_1.Construct3.objects.Text.getAllInstances();\r\n    var result = [];\r\n    for (var _i = 0, buttons_2 = buttons; _i < buttons_2.length; _i++) {\r\n        var b = buttons_2[_i];\r\n        if (b.instVars.theme === theme) {\r\n            result.push(b);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.FindTextsByTheme = FindTextsByTheme;\r\nfunction FindMarkupByTheme(theme) {\r\n    var buttons = main_1.Construct3.objects.Markup.getAllInstances();\r\n    var result = [];\r\n    for (var _i = 0, buttons_3 = buttons; _i < buttons_3.length; _i++) {\r\n        var b = buttons_3[_i];\r\n        if (b.instVars.theme === theme) {\r\n            result.push(b);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.FindMarkupByTheme = FindMarkupByTheme;\r\nfunction FindSelectorByTheme(theme) {\r\n    var selectors = main_1.Construct3.objects.Selector.getAllInstances();\r\n    var result = [];\r\n    for (var _i = 0, selectors_1 = selectors; _i < selectors_1.length; _i++) {\r\n        var b = selectors_1[_i];\r\n        if (b.instVars.theme === theme) {\r\n            result.push(b);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.FindSelectorByTheme = FindSelectorByTheme;\r\nfunction FindNPElementsByTheme(theme) {\r\n    var buttons = main_1.Construct3.objects.NPElements.getAllInstances();\r\n    var result = [];\r\n    for (var _i = 0, buttons_4 = buttons; _i < buttons_4.length; _i++) {\r\n        var b = buttons_4[_i];\r\n        if (b.instVars.theme === theme) {\r\n            result.push(b);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.FindNPElementsByTheme = FindNPElementsByTheme;\r\n\n\n//# sourceURL=webpack://Game/./javascript/construct3/c3ObjectUtils/c3themeUtils.ts?");

/***/ }),

/***/ "./javascript/construct3/c3ObjectUtils/gameUI/GUIElement.ts":
/*!******************************************************************!*\
  !*** ./javascript/construct3/c3ObjectUtils/gameUI/GUIElement.ts ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GUIElement = exports.GameUIElementType = void 0;\r\nvar GameUIElementType;\r\n(function (GameUIElementType) {\r\n    GameUIElementType[\"Scrollbar\"] = \"Scrollbar\";\r\n    GameUIElementType[\"Overlay\"] = \"Overlay\";\r\n    GameUIElementType[\"View\"] = \"View\";\r\n})(GameUIElementType = exports.GameUIElementType || (exports.GameUIElementType = {}));\r\nvar GUIElement = /** @class */ (function () {\r\n    function GUIElement(storage, classID, id) {\r\n        this.ClassID = classID;\r\n        this.ID = id;\r\n        if (storage) {\r\n            storage.AddItem(this);\r\n        }\r\n    }\r\n    return GUIElement;\r\n}());\r\nexports.GUIElement = GUIElement;\r\n\n\n//# sourceURL=webpack://Game/./javascript/construct3/c3ObjectUtils/gameUI/GUIElement.ts?");

/***/ }),

/***/ "./javascript/construct3/c3ObjectUtils/gameUI/overlay.ts":
/*!***************************************************************!*\
  !*** ./javascript/construct3/c3ObjectUtils/gameUI/overlay.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Overlay = void 0;\r\nvar utilsGUI_1 = __webpack_require__(/*! ../utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar vector2_1 = __webpack_require__(/*! ../../../../src/data/vector2 */ \"./src/data/vector2.ts\");\r\nvar GUIElement_1 = __webpack_require__(/*! ./GUIElement */ \"./javascript/construct3/c3ObjectUtils/gameUI/GUIElement.ts\");\r\nvar Overlay = /** @class */ (function (_super) {\r\n    __extends(Overlay, _super);\r\n    function Overlay(storage, id, overlaySize, overlayView, connectedViews) {\r\n        var _this = _super.call(this, storage, GUIElement_1.GameUIElementType.Overlay, id) || this;\r\n        _this.OverlaySize = overlaySize;\r\n        _this.OverlayView = overlayView;\r\n        _this.CurrentView = overlayView;\r\n        _this.ConnectedViews = connectedViews;\r\n        _this.IsElementsSetup = false;\r\n        _this.Elements = _this.FindAllElements();\r\n        return _this;\r\n    }\r\n    Overlay.prototype.IsViewConnected = function (view) {\r\n        for (var _i = 0, _a = this.ConnectedViews; _i < _a.length; _i++) {\r\n            var connectedView = _a[_i];\r\n            if (view.ID == connectedView.ID) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Object.defineProperty(Overlay.prototype, \"WorldPosition\", {\r\n        get: function () {\r\n            return this.OverlayView.WorldPosition;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Overlay.prototype.GetRelativePosition = function (elem) {\r\n        var x = elem.x - this.WorldPosition.X;\r\n        var y = elem.y - this.WorldPosition.Y;\r\n        return new vector2_1.Vector2(x, y);\r\n    };\r\n    Overlay.prototype.UpdateElementRelativePosition = function (elem) {\r\n        var relativePos = this.GetRelativePosition(elem);\r\n        elem.c_overlayRelativeX = relativePos.X;\r\n        elem.c_overlayRelativeY = relativePos.Y;\r\n    };\r\n    Overlay.prototype.UpdateElementPosition = function (view, elem) {\r\n        elem.x = view.WorldPosition.X + elem.c_overlayRelativeX;\r\n        elem.y = view.WorldPosition.Y + elem.c_overlayRelativeY;\r\n    };\r\n    Overlay.prototype.GetViewportRect = function () {\r\n        var x = this.OverlayView.WorldPosition.X - (this.OverlaySize.X / 2);\r\n        var y = this.OverlayView.WorldPosition.Y - (this.OverlaySize.Y / 2);\r\n        return new DOMRect(x, y, this.OverlaySize.X, this.OverlaySize.Y);\r\n    };\r\n    Overlay.prototype.FindAllElements = function () {\r\n        return utilsGUI_1.FindAllInRect(this.GetViewportRect());\r\n    };\r\n    Overlay.prototype.SetupElements = function () {\r\n        if (this.Elements.length == 0) {\r\n            this.Elements = this.FindAllElements();\r\n        }\r\n        for (var _i = 0, _a = this.Elements; _i < _a.length; _i++) {\r\n            var elem = _a[_i];\r\n            this.UpdateElementRelativePosition(elem);\r\n        }\r\n        this.IsElementsSetup = true;\r\n    };\r\n    Overlay.prototype.MoveToView = function (view) {\r\n        if (this.IsElementsSetup) {\r\n            for (var _i = 0, _a = this.Elements; _i < _a.length; _i++) {\r\n                var elem = _a[_i];\r\n                this.UpdateElementPosition(view, elem);\r\n            }\r\n            this.CurrentView = view;\r\n        }\r\n        else {\r\n            throw new Error(\"Elements was not setup for Overlay '\" + this.ID + \"', elements: \" + this.Elements.length);\r\n        }\r\n    };\r\n    return Overlay;\r\n}(GUIElement_1.GUIElement));\r\nexports.Overlay = Overlay;\r\n\n\n//# sourceURL=webpack://Game/./javascript/construct3/c3ObjectUtils/gameUI/overlay.ts?");

/***/ }),

/***/ "./javascript/construct3/c3ObjectUtils/gameUI/scrollbar.ts":
/*!*****************************************************************!*\
  !*** ./javascript/construct3/c3ObjectUtils/gameUI/scrollbar.ts ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Scrollbar = void 0;\r\nvar main_1 = __webpack_require__(/*! ../../main */ \"./javascript/construct3/main.js\");\r\nvar utilsMath_1 = __webpack_require__(/*! ../../../../src/utils/utilsMath */ \"./src/utils/utilsMath.ts\");\r\nvar utilsGUI_1 = __webpack_require__(/*! ../utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar vector2_1 = __webpack_require__(/*! ../../../../src/data/vector2 */ \"./src/data/vector2.ts\");\r\nvar GUIElement_1 = __webpack_require__(/*! ./GUIElement */ \"./javascript/construct3/c3ObjectUtils/gameUI/GUIElement.ts\");\r\nvar Scrollbar = /** @class */ (function (_super) {\r\n    __extends(Scrollbar, _super);\r\n    function Scrollbar(storage, id, rect, viewportSize) {\r\n        var _this = _super.call(this, storage, GUIElement_1.GameUIElementType.Scrollbar, id) || this;\r\n        _this.Data = {\r\n            ShowScrollbar: false,\r\n            AllElementsTop: 0,\r\n            AllElementsBottom: 0,\r\n            VisibleElementsTop: 0,\r\n            VisibleElementsBottom: 0,\r\n        };\r\n        _this.Rect = rect;\r\n        _this.ViewportSize = viewportSize;\r\n        _this.AllElements = [];\r\n        _this.VisibleElements = [];\r\n        var slider = main_1.Construct3.objects.ScrollbarSlider.getAllInstances()\r\n            .find(function (obj) { return obj.instVars.ID == _this.ID; });\r\n        if (slider) {\r\n            _this.Slider = slider;\r\n        }\r\n        else\r\n            throw new Error(\"Slider with id '\" + _this.ID + \"' was not found\");\r\n        var back = main_1.Construct3.objects.NPElements.getAllInstances()\r\n            .find(function (obj) { return obj.instVars.id_npe == _this.ID; });\r\n        if (back) {\r\n            _this.Back = back;\r\n        }\r\n        else\r\n            throw new Error(\"Slider with id '\" + _this.ID + \"' was not found\");\r\n        _this.UpdateAllElementsData();\r\n        return _this;\r\n    }\r\n    Scrollbar.prototype.UpdateAllElementsData = function () {\r\n        // this.AllElements = this.FindAllElements();\r\n        // this.AllElements.forEach((item) => item.c_isConnectedToScrollBar = true);\r\n        //\r\n        // if (this.AllElements.length > 0) {\r\n        //     this.Data.AllElementsTop = (this.AllElements\r\n        //         .sort((a, b) => a.c_baseY - b.c_baseY)[0].c_baseY);\r\n        //\r\n        //     this.Data.AllElementsBottom = (this.AllElements\r\n        //         .sort((a, b) => (a.c_baseY - b.c_baseY) * -1)[0].c_baseY);\r\n        // }\r\n        this.AllElements = this.FindAllElements();\r\n        this.AllElements.forEach(function (item) { return item.c_isConnectedToScrollBar = true; });\r\n        if (this.AllElements.length > 0) {\r\n            this.Data.AllElementsTop = (this.AllElements\r\n                .sort(function (a, b) { return a.c_baseY - b.c_baseY; })[0].c_baseY);\r\n            this.Data.AllElementsBottom = (this.AllElements\r\n                .sort(function (a, b) { return (a.c_baseY - b.c_baseY) * -1; })[0].c_baseY);\r\n        }\r\n    };\r\n    Scrollbar.prototype.FindAllElements = function () {\r\n        return utilsGUI_1.FindAllInRect(this.Rect, false);\r\n    };\r\n    Scrollbar.prototype.GetVisibleElements = function () {\r\n        return this.AllElements;\r\n        // let elements = [];\r\n        // for (const elem of this.AllElements) {\r\n        //     if (elem.isVisible) {\r\n        //         elements.push(elem);\r\n        //     }\r\n        // }\r\n        //\r\n        // return elements;\r\n    };\r\n    //todo мб сохранять позицию скроллбара??? так как мне приходится её ресетать\r\n    Scrollbar.prototype.UpdateVisibleElementsData = function () {\r\n        this.VisibleElements = this.GetVisibleElements();\r\n        if (this.VisibleElements.length > 0) {\r\n            this.Data.VisibleElementsTop = (this.VisibleElements\r\n                .sort(function (a, b) {\r\n                return a.c_baseRect.top - b.c_baseRect.top;\r\n            })[0].c_baseRect.top);\r\n            this.Data.VisibleElementsBottom = (this.VisibleElements\r\n                .sort(function (a, b) {\r\n                return (a.c_baseRect.bottom - b.c_baseRect.bottom) * -1;\r\n            })[0].c_baseRect.bottom);\r\n            var viewport = new DOMRect(this.Rect.x, this.Rect.y, this.ViewportSize.Width, this.ViewportSize.Height);\r\n            for (var _i = 0, _a = this.VisibleElements; _i < _a.length; _i++) {\r\n                var item = _a[_i];\r\n                if (!utilsGUI_1.IsPosInRect(new vector2_1.Vector2(item.x, item.c_baseRect.bottom), viewport)) {\r\n                    this.Data.ShowScrollbar = true;\r\n                    return;\r\n                }\r\n            }\r\n            this.Data.ShowScrollbar = false;\r\n        }\r\n    };\r\n    Object.defineProperty(Scrollbar.prototype, \"SliderHeight\", {\r\n        get: function () {\r\n            return this.Slider.getBoundingBox().height;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Scrollbar.prototype, \"BackTop\", {\r\n        get: function () {\r\n            return this.Back.getBoundingBox().top;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Scrollbar.prototype, \"BackBottom\", {\r\n        get: function () {\r\n            return this.Back.getBoundingBox().bottom;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Scrollbar.prototype, \"BottomSliderY\", {\r\n        get: function () {\r\n            return this.BackBottom - (this.SliderHeight / 2);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Scrollbar.prototype, \"TopSliderY\", {\r\n        get: function () {\r\n            return this.BackTop + (this.SliderHeight / 2);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Scrollbar.prototype, \"AllElementsTop\", {\r\n        get: function () {\r\n            return this.Data.AllElementsTop;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Scrollbar.prototype, \"AllElementsBottom\", {\r\n        get: function () {\r\n            return this.Data.AllElementsBottom;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Scrollbar.prototype, \"VisibleElementsTop\", {\r\n        get: function () {\r\n            return this.Data.VisibleElementsTop;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Scrollbar.prototype, \"VisibleElementsBottom\", {\r\n        get: function () {\r\n            return this.Data.VisibleElementsBottom;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Scrollbar.prototype, \"Progress\", {\r\n        get: function () {\r\n            return (this.Slider.y - this.TopSliderY) / (this.BottomSliderY - this.TopSliderY) * 100;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Scrollbar.prototype, \"OffsetY\", {\r\n        get: function () {\r\n            return (this.VisibleElementsBottom - this.VisibleElementsTop - (this.ViewportSize.Height - 120)) * this.Progress / 100;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Scrollbar.prototype.Update = function () {\r\n        if (!this.Data.ShowScrollbar) {\r\n            //this.Back.isVisible = false;\r\n            this.Slider.isVisible = false;\r\n            for (var _i = 0, _a = this.VisibleElements; _i < _a.length; _i++) {\r\n                var elem = _a[_i];\r\n                elem.y = elem.c_baseY;\r\n            }\r\n        }\r\n        else {\r\n            this.Slider.y = utilsMath_1.Clamp(this.Slider.y, new vector2_1.Interval(this.TopSliderY, this.BottomSliderY, 1, false));\r\n            //this.Back.isVisible = true;\r\n            this.Slider.isVisible = true;\r\n            for (var _b = 0, _c = this.VisibleElements; _b < _c.length; _b++) {\r\n                var elem = _c[_b];\r\n                elem.y = elem.c_baseY - this.OffsetY;\r\n            }\r\n        }\r\n    };\r\n    Scrollbar.prototype.Reset = function () {\r\n        this.Slider.y = this.TopSliderY;\r\n        this.Update();\r\n    };\r\n    return Scrollbar;\r\n}(GUIElement_1.GUIElement));\r\nexports.Scrollbar = Scrollbar;\r\n\n\n//# sourceURL=webpack://Game/./javascript/construct3/c3ObjectUtils/gameUI/scrollbar.ts?");

/***/ }),

/***/ "./javascript/construct3/c3ObjectUtils/gameUI/view.ts":
/*!************************************************************!*\
  !*** ./javascript/construct3/c3ObjectUtils/gameUI/view.ts ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.View = void 0;\r\nvar vector2_1 = __webpack_require__(/*! ../../../../src/data/vector2 */ \"./src/data/vector2.ts\");\r\nvar main_1 = __webpack_require__(/*! ../../main */ \"./javascript/construct3/main.js\");\r\nvar GUIElement_1 = __webpack_require__(/*! ./GUIElement */ \"./javascript/construct3/c3ObjectUtils/gameUI/GUIElement.ts\");\r\nvar View = /** @class */ (function (_super) {\r\n    __extends(View, _super);\r\n    function View(storage, id, position) {\r\n        var _this = _super.call(this, storage, GUIElement_1.GameUIElementType.View, id) || this;\r\n        _this.Position = position;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(View.prototype, \"WorldPosition\", {\r\n        get: function () {\r\n            var viewPos = this.Position;\r\n            var x = main_1.Construct3.globalVars.SYSTEM_VIEWPORT_WIDTH * viewPos.X + (main_1.Construct3.globalVars.SYSTEM_VIEWPORT_WIDTH / 2);\r\n            var y = main_1.Construct3.globalVars.SYSTEM_VIEWPORT_HEIGHT * viewPos.Y + (main_1.Construct3.globalVars.SYSTEM_VIEWPORT_HEIGHT / 2);\r\n            return new vector2_1.Vector2(x, y);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return View;\r\n}(GUIElement_1.GUIElement));\r\nexports.View = View;\r\n\n\n//# sourceURL=webpack://Game/./javascript/construct3/c3ObjectUtils/gameUI/view.ts?");

/***/ }),

/***/ "./javascript/construct3/c3ObjectUtils/uiBuilder.ts":
/*!**********************************************************!*\
  !*** ./javascript/construct3/c3ObjectUtils/uiBuilder.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GetWalletIcon = exports.CreateUpgradeUI = void 0;\r\nvar main_1 = __webpack_require__(/*! ../main */ \"./javascript/construct3/main.js\");\r\nvar fontSizeCalc_1 = __webpack_require__(/*! ../../../src/ui/fontSizeCalc */ \"./src/ui/fontSizeCalc.ts\");\r\nfunction CreateUpgradeUI(pos, upgrade, colorHex, title, valueNames, isLocked) {\r\n    main_1.Construct3.callFunction(\"CreateUpgrade\", pos.X, pos.Y, upgrade.ID, colorHex, GetWalletIcon(upgrade.Prices[0].Wallet), title, fontSizeCalc_1.GetFontSize(title, fontSizeCalc_1.UpgradeTitleFontSizeCalc), valueNames.join(', '), isLocked !== null && isLocked !== void 0 ? isLocked : !upgrade.IsThemeUnlocked);\r\n}\r\nexports.CreateUpgradeUI = CreateUpgradeUI;\r\nfunction GetWalletIcon(wallet) {\r\n    switch (wallet.ID) {\r\n        case \"Coins\": {\r\n            return 0;\r\n        }\r\n        case \"RebirthPoints\": {\r\n            return 1;\r\n        }\r\n        default: {\r\n            throw new Error(\"Wallet with ID: '\" + wallet.ID + \"' is not handled\");\r\n        }\r\n    }\r\n}\r\nexports.GetWalletIcon = GetWalletIcon;\r\n\n\n//# sourceURL=webpack://Game/./javascript/construct3/c3ObjectUtils/uiBuilder.ts?");

/***/ }),

/***/ "./javascript/construct3/c3ObjectUtils/utilsGUI.ts":
/*!*********************************************************!*\
  !*** ./javascript/construct3/c3ObjectUtils/utilsGUI.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FindAllInRect = exports.GetAll = exports.IsPosInRect = exports.SetProgressBarColor = exports.SetProgressBar = exports.FindProgressBar = exports.SetTextVisible = exports.SetText = exports.FindText = exports.SetSelectorEnabled = exports.SetIconVisible = exports.SetIconFrame = exports.FindIcon = exports.ToggleSelector = exports.FindSelector = exports.SetButtonColor = exports.FindButton = exports.SetButtonEnabled = exports.GetNumBoolean = exports.GetObjPos = exports.IsPositionInViewport = void 0;\r\nvar main_1 = __webpack_require__(/*! ../main */ \"./javascript/construct3/main.js\");\r\nvar utilsColor_1 = __webpack_require__(/*! ../../../src/utils/utilsColor */ \"./src/utils/utilsColor.ts\");\r\nvar vector2_1 = __webpack_require__(/*! ../../../src/data/vector2 */ \"./src/data/vector2.ts\");\r\nvar inputHandlers_1 = __webpack_require__(/*! ../../../src/input/inputHandlers */ \"./src/input/inputHandlers.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../../src/content/content */ \"./src/content/content.ts\");\r\nfunction IsPositionInViewport(position) {\r\n    if (content_1.Managers.Views.CurrentScrollbar) {\r\n        return IsPosInRect(position, content_1.Managers.Views.CurrentViewport);\r\n    }\r\n    else {\r\n        return true;\r\n    }\r\n}\r\nexports.IsPositionInViewport = IsPositionInViewport;\r\nfunction GetObjPos(obj) {\r\n    return new vector2_1.Vector2(obj.x, obj.y);\r\n}\r\nexports.GetObjPos = GetObjPos;\r\nfunction GetNumBoolean(bool) {\r\n    return bool ? 1 : 0;\r\n}\r\nexports.GetNumBoolean = GetNumBoolean;\r\nfunction SetButtonEnabled(name, enabled) {\r\n    var buttons = FindButton(name);\r\n    if (buttons.length == 0) {\r\n        throw new Error(\"UI: Button '\" + name + \"' was not found!\");\r\n    }\r\n    if (buttons) {\r\n        for (var _i = 0, buttons_1 = buttons; _i < buttons_1.length; _i++) {\r\n            var button = buttons_1[_i];\r\n            button.instVars.enabled = enabled ? 1 : 0;\r\n        }\r\n    }\r\n}\r\nexports.SetButtonEnabled = SetButtonEnabled;\r\nfunction FindButton(name) {\r\n    var buttons = main_1.Construct3.objects.Button.getAllInstances();\r\n    var selectedButtons = [];\r\n    for (var i = 0; i < buttons.length; i++) {\r\n        var button = buttons[i];\r\n        if (button.instVars.name === name) {\r\n            selectedButtons.push(button);\r\n        }\r\n    }\r\n    return selectedButtons;\r\n}\r\nexports.FindButton = FindButton;\r\nfunction SetButtonColor(name, color) {\r\n    var buttons = FindButton(name);\r\n    for (var _i = 0, buttons_2 = buttons; _i < buttons_2.length; _i++) {\r\n        var button = buttons_2[_i];\r\n        button.colorRgb = utilsColor_1.RGB255ToC3Color(color);\r\n    }\r\n}\r\nexports.SetButtonColor = SetButtonColor;\r\n//todo i guess i can do a more generic way to work with it, just using OBJECT.GetAll..\r\nfunction FindSelector(section, id) {\r\n    var items = main_1.Construct3.objects.Selector.getAllInstances();\r\n    var selectedItems = [];\r\n    for (var i = 0; i < items.length; i++) {\r\n        var item = items[i];\r\n        if (item.instVars.section == section && item.instVars.id === id) {\r\n            selectedItems.push(item);\r\n        }\r\n    }\r\n    return selectedItems;\r\n}\r\nexports.FindSelector = FindSelector;\r\nfunction ToggleSelector(section, id) {\r\n    inputHandlers_1.OnSelectorClicked(section, id);\r\n    main_1.Construct3.callFunction('UpdateSelectors', id, section);\r\n}\r\nexports.ToggleSelector = ToggleSelector;\r\nfunction FindIcon(id) {\r\n    var icons = main_1.Construct3.objects.Icon.getAllInstances();\r\n    var selectedIcons = [];\r\n    for (var i = 0; i < icons.length; i++) {\r\n        var icon = icons[i];\r\n        if (icon.instVars.id === id) {\r\n            selectedIcons.push(icon);\r\n        }\r\n    }\r\n    return selectedIcons;\r\n}\r\nexports.FindIcon = FindIcon;\r\nfunction SetIconFrame(name, frame, animation) {\r\n    var icons = FindIcon(name);\r\n    if (icons.length == 0) {\r\n        throw new Error(\"UI: Icon '\" + name + \"' was not found!\");\r\n    }\r\n    for (var _i = 0, icons_1 = icons; _i < icons_1.length; _i++) {\r\n        var icon = icons_1[_i];\r\n        if (animation) {\r\n            icon.setAnimation(animation);\r\n        }\r\n        icon.animationFrame = frame;\r\n    }\r\n}\r\nexports.SetIconFrame = SetIconFrame;\r\nfunction SetIconVisible(name, visible) {\r\n    var icons = FindIcon(name);\r\n    if (icons.length == 0) {\r\n        throw new Error(\"UI: Icon '\" + name + \"' was not found!\");\r\n    }\r\n    for (var _i = 0, icons_2 = icons; _i < icons_2.length; _i++) {\r\n        var icon = icons_2[_i];\r\n        icon.isVisible = visible;\r\n    }\r\n}\r\nexports.SetIconVisible = SetIconVisible;\r\nfunction SetSelectorEnabled(section, id, enabled) {\r\n    var items = FindSelector(section, id);\r\n    if (items.length == 0) {\r\n        throw new Error(\"UI: Selector '\" + name + \"' was not found!\");\r\n    }\r\n    if (items) {\r\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\r\n            var item = items_1[_i];\r\n            item.instVars.enabled = enabled ? 1 : 0;\r\n        }\r\n    }\r\n}\r\nexports.SetSelectorEnabled = SetSelectorEnabled;\r\nfunction FindText(name) {\r\n    var texts = main_1.Construct3.objects.Text.getAllInstances();\r\n    var selectedTexts = [];\r\n    for (var i = 0; i < texts.length; i++) {\r\n        var text = texts[i];\r\n        if (text.instVars.name === name) {\r\n            selectedTexts.push(text);\r\n        }\r\n    }\r\n    return selectedTexts;\r\n}\r\nexports.FindText = FindText;\r\nfunction SetText(name, text) {\r\n    var texts = FindText(name);\r\n    if (texts.length == 0) {\r\n        throw new Error(\"UI: Text '\" + name + \"' was not found!\");\r\n    }\r\n    for (var _i = 0, texts_1 = texts; _i < texts_1.length; _i++) {\r\n        var textObject = texts_1[_i];\r\n        textObject.text = text instanceof String ? text : text.toString();\r\n    }\r\n}\r\nexports.SetText = SetText;\r\nfunction SetTextVisible(name, visible) {\r\n    var texts = FindText(name);\r\n    if (texts.length == 0) {\r\n        throw new Error(\"UI: Text '\" + name + \"' was not found!\");\r\n    }\r\n    for (var _i = 0, texts_2 = texts; _i < texts_2.length; _i++) {\r\n        var text = texts_2[_i];\r\n        text.isVisible = visible;\r\n    }\r\n}\r\nexports.SetTextVisible = SetTextVisible;\r\nfunction FindProgressBar(name) {\r\n    var bars = main_1.Construct3.objects.Bar.getAllInstances();\r\n    var selectedBars = [];\r\n    for (var i = 0; i < bars.length; i++) {\r\n        var bar = bars[i];\r\n        if (bar.instVars.name === name) {\r\n            selectedBars.push(bar);\r\n        }\r\n    }\r\n    return selectedBars;\r\n}\r\nexports.FindProgressBar = FindProgressBar;\r\nfunction SetProgressBar(name, value, color, minSize) {\r\n    var bars = FindProgressBar(name);\r\n    if (bars.length == 0) {\r\n        throw new Error(\"UI: Bar '\" + name + \"' was not found!\");\r\n    }\r\n    for (var i = 0; i < bars.length; i++) {\r\n        var bar = bars[i];\r\n        bar.width = value * (bar.instVars.fullWidth / 100);\r\n        if (minSize) {\r\n            bar.width = Math.max(minSize, bar.width);\r\n        }\r\n        bar.isVisible = bar.width >= 4;\r\n        if (color) {\r\n            bar.colorRgb = utilsColor_1.RGB255ToC3Color(color);\r\n        }\r\n    }\r\n}\r\nexports.SetProgressBar = SetProgressBar;\r\nfunction SetProgressBarColor(name, color) {\r\n    var bars = FindProgressBar(name);\r\n    for (var _i = 0, bars_1 = bars; _i < bars_1.length; _i++) {\r\n        var bar = bars_1[_i];\r\n        bar.colorRgb = utilsColor_1.RGB255ToC3Color(color);\r\n    }\r\n}\r\nexports.SetProgressBarColor = SetProgressBarColor;\r\n//todo split to multiple files\r\nfunction IsPosInRect(pos, rect, offsetCheck) {\r\n    if (offsetCheck === void 0) { offsetCheck = 1; }\r\n    return (pos.X + offsetCheck >= rect.left\r\n        && pos.X - offsetCheck <= rect.right\r\n        && pos.Y + offsetCheck >= rect.top\r\n        && pos.Y - offsetCheck <= rect.bottom);\r\n}\r\nexports.IsPosInRect = IsPosInRect;\r\nfunction GetAll() {\r\n    var selectors = main_1.Construct3.objects.Selector.getAllInstances();\r\n    var buttons = main_1.Construct3.objects.Button.getAllInstances();\r\n    var texts = main_1.Construct3.objects.Text.getAllInstances();\r\n    var markups = main_1.Construct3.objects.Markup.getAllInstances();\r\n    var npElements = main_1.Construct3.objects.NPElements.getAllInstances();\r\n    var icons = main_1.Construct3.objects.Icon.getAllInstances();\r\n    var system = __spreadArrays(main_1.Construct3.objects.NotationList.getAllInstances(), main_1.Construct3.objects.FileChooser.getAllInstances(), main_1.Construct3.objects.TextInput.getAllInstances(), main_1.Construct3.objects.SliderBar.getAllInstances(), main_1.Construct3.objects.Checkbox.getAllInstances());\r\n    return __spreadArrays(texts, buttons, markups, npElements, icons, selectors, system);\r\n}\r\nexports.GetAll = GetAll;\r\nfunction FindAllInRect(rect, checkForVisible) {\r\n    if (checkForVisible === void 0) { checkForVisible = false; }\r\n    var all = GetAll();\r\n    var selected = [];\r\n    //todo проверять, находится ли объект на слое SystemMarkup\r\n    for (var _i = 0, all_1 = all; _i < all_1.length; _i++) {\r\n        var item = all_1[_i];\r\n        if (IsPosInRect(new vector2_1.Vector2(item.c_baseX, item.c_baseY), rect) && (checkForVisible ? item.isVisible : true)) {\r\n            selected.push(item);\r\n        }\r\n    }\r\n    return selected;\r\n}\r\nexports.FindAllInRect = FindAllInRect;\r\n\n\n//# sourceURL=webpack://Game/./javascript/construct3/c3ObjectUtils/utilsGUI.ts?");

/***/ }),

/***/ "./javascript/construct3/engine.ts":
/*!*****************************************!*\
  !*** ./javascript/construct3/engine.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Engine = void 0;\r\nvar main_1 = __webpack_require__(/*! ./main */ \"./javascript/construct3/main.js\");\r\nvar engineUIManager_1 = __webpack_require__(/*! ./engineManagers/engineUIManager */ \"./javascript/construct3/engineManagers/engineUIManager.ts\");\r\nvar engineStorage_1 = __webpack_require__(/*! ./engineManagers/engineStorage */ \"./javascript/construct3/engineManagers/engineStorage.ts\");\r\nvar Engine = /** @class */ (function () {\r\n    function Engine() {\r\n    }\r\n    Object.defineProperty(Engine, \"Storage\", {\r\n        get: function () {\r\n            return engineStorage_1.EngineStorage;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Engine, \"UIManager\", {\r\n        get: function () {\r\n            return engineUIManager_1.EngineUIManager;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Engine.ToggleFullscreen = function () {\r\n        main_1.Construct3.callFunction('ToggleFullscreen');\r\n    };\r\n    return Engine;\r\n}());\r\nexports.Engine = Engine;\r\n\n\n//# sourceURL=webpack://Game/./javascript/construct3/engine.ts?");

/***/ }),

/***/ "./javascript/construct3/engineManagers/engineStorage.ts":
/*!***************************************************************!*\
  !*** ./javascript/construct3/engineManagers/engineStorage.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EngineStorage = void 0;\r\nvar main_1 = __webpack_require__(/*! ../main */ \"./javascript/construct3/main.js\");\r\nvar EngineStorage = /** @class */ (function () {\r\n    function EngineStorage() {\r\n    }\r\n    EngineStorage.Get = function () {\r\n        return main_1.Construct3.storage;\r\n    };\r\n    EngineStorage.SetItem = function (name, data) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.Get().setItem(name, data)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    EngineStorage.GetItem = function (name) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.Get().getItem(name)];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return EngineStorage;\r\n}());\r\nexports.EngineStorage = EngineStorage;\r\n\n\n//# sourceURL=webpack://Game/./javascript/construct3/engineManagers/engineStorage.ts?");

/***/ }),

/***/ "./javascript/construct3/engineManagers/engineUIManager.ts":
/*!*****************************************************************!*\
  !*** ./javascript/construct3/engineManagers/engineUIManager.ts ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EngineUIManager = void 0;\r\nvar main_1 = __webpack_require__(/*! ../main */ \"./javascript/construct3/main.js\");\r\nvar EngineUIManager = /** @class */ (function () {\r\n    function EngineUIManager() {\r\n    }\r\n    //todo make enum for all c3 functions!!!\r\n    //todo maybe make actually functions for c3 functions\r\n    EngineUIManager.SetTextSize = function (name, size) {\r\n        main_1.Construct3.callFunction('SetTextSize', name, size);\r\n    };\r\n    EngineUIManager.UpdateSelectors = function (id, value) {\r\n        main_1.Construct3.callFunction('UpdateSelectors', value, id);\r\n    };\r\n    //todo why i need x and y there?\r\n    EngineUIManager.SetView = function (viewID, viewX, viewY) {\r\n        main_1.Construct3.callFunction('SetView', viewID, viewX, viewY);\r\n    };\r\n    return EngineUIManager;\r\n}());\r\nexports.EngineUIManager = EngineUIManager;\r\n\n\n//# sourceURL=webpack://Game/./javascript/construct3/engineManagers/engineUIManager.ts?");

/***/ }),

/***/ "./javascript/construct3/main.js":
/*!***************************************!*\
  !*** ./javascript/construct3/main.js ***!
  \***************************************/
/*! exports provided: Construct3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Construct3\", function() { return Construct3; });\n/* harmony import */ var reflect_metadata__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! reflect-metadata */ \"./node_modules/reflect-metadata/Reflect.js\");\n/* harmony import */ var reflect_metadata__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(reflect_metadata__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _src_data_time__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../src/data/time */ \"./src/data/time.ts\");\n/* harmony import */ var _src_data_time__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_src_data_time__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./main */ \"./javascript/construct3/main.js\");\n/* harmony import */ var _src_content_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../src/content/content */ \"./src/content/content.ts\");\n/* harmony import */ var _src_content_content__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_src_content_content__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _src_game__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../src/game */ \"./src/game.ts\");\n/* harmony import */ var _src_game__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_src_game__WEBPACK_IMPORTED_MODULE_4__);\n //must be here for global scope access\n\n\n\n\n\n// import Worker from \"worker-loader!./test.worker\";\n// let myWorker = new Worker();\n\n// Prevent mouse scrolling page\nwindow.addEventListener(\"wheel\", function(e) {\n\t\te.preventDefault();\n\t}, {\n\t\tpassive: false\n\t});\n\n/**\n * @type{C3Runtime}\n */\nlet Construct3;\n\n// @ts-ignore\nrunOnStartup(\n\t/** @param {C3Runtime} runtime */\n\tasync (runtime) => {\n\t\tConstruct3 = runtime;\n\t\tconsole.log('Project started!');\n\n\t\t//todo TEMP SOLUTION\n\t\truntime.addEventListener(\"beforeprojectstart\", () => InitC3Events(runtime));\n\n\t\tsetTimeout(() => {\n\n\t\t}, 2000)\n\t}\n);\n\n/**\n * @param {C3Runtime} runtime\n * @function\n */\nfunction InitC3Events(runtime) {\n\truntime.addEventListener(\"tick\", () => EngineTick(runtime));\n\n\truntime.objects.Turret.addEventListener(\"instancecreate\",\n\t\tasync () => {\n\t\t\tif (_src_content_content__WEBPACK_IMPORTED_MODULE_3__[\"SystemData\"].IsContentLoaded) {\n\t\t\t\tawait Construct3.callFunction(\"DoTick\");\n\t\t\t\t_src_content_content__WEBPACK_IMPORTED_MODULE_3__[\"Managers\"].Fight.UpdateTurrets();\n\t\t\t}\n\t})\n}\n\n/**\n * @param {C3Runtime} runtime\n * @function\n */\nfunction EngineTick(runtime) {\n\tConstruct3 = runtime;\n\tObject(_src_game__WEBPACK_IMPORTED_MODULE_4__[\"Update\"])(new _src_data_time__WEBPACK_IMPORTED_MODULE_1__[\"Time\"](0, 0, 0, Construct3.dt * 1000));\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://Game/./javascript/construct3/main.js?");

/***/ }),

/***/ "./javascript/kongregate/kongregate.ts":
/*!*********************************************!*\
  !*** ./javascript/kongregate/kongregate.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.KongregateData = exports.KongregateManager = void 0;\r\nexports.KongregateData = {\r\n    ApiLoaded: false,\r\n    UserName: \"Guest\",\r\n};\r\ntry {\r\n    // @ts-ignore\r\n    kongregateAPI.loadAPI(function () {\r\n        // @ts-ignore\r\n        exports.KongregateManager = kongregateAPI.getAPI();\r\n        exports.KongregateData.UserName = exports.KongregateManager.services.getUsername();\r\n        console.log(\"Username updated: \" + exports.KongregateData.UserName);\r\n        exports.KongregateData.ApiLoaded = true;\r\n        exports.KongregateManager.services.addEventListener('login', function () {\r\n            exports.KongregateData.UserName = exports.KongregateManager.services.getUsername();\r\n            console.log(\"Username updated: \" + exports.KongregateData.UserName);\r\n        });\r\n    });\r\n}\r\ncatch (e) {\r\n    console.log(\"Error loading KongregateAPI\");\r\n    exports.KongregateData.ApiLoaded = false;\r\n}\r\n\n\n//# sourceURL=webpack://Game/./javascript/kongregate/kongregate.ts?");

/***/ }),

/***/ "./node_modules/asn1.js/lib/asn1.js":
/*!******************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst asn1 = exports;\n\nasn1.bignum = __webpack_require__(/*! bn.js */ \"./node_modules/asn1.js/node_modules/bn.js/lib/bn.js\");\n\nasn1.define = __webpack_require__(/*! ./asn1/api */ \"./node_modules/asn1.js/lib/asn1/api.js\").define;\nasn1.base = __webpack_require__(/*! ./asn1/base */ \"./node_modules/asn1.js/lib/asn1/base/index.js\");\nasn1.constants = __webpack_require__(/*! ./asn1/constants */ \"./node_modules/asn1.js/lib/asn1/constants/index.js\");\nasn1.decoders = __webpack_require__(/*! ./asn1/decoders */ \"./node_modules/asn1.js/lib/asn1/decoders/index.js\");\nasn1.encoders = __webpack_require__(/*! ./asn1/encoders */ \"./node_modules/asn1.js/lib/asn1/encoders/index.js\");\n\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/lib/asn1.js?");

/***/ }),

/***/ "./node_modules/asn1.js/lib/asn1/api.js":
/*!**********************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/api.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst encoders = __webpack_require__(/*! ./encoders */ \"./node_modules/asn1.js/lib/asn1/encoders/index.js\");\nconst decoders = __webpack_require__(/*! ./decoders */ \"./node_modules/asn1.js/lib/asn1/decoders/index.js\");\nconst inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n\nconst api = exports;\n\napi.define = function define(name, body) {\n  return new Entity(name, body);\n};\n\nfunction Entity(name, body) {\n  this.name = name;\n  this.body = body;\n\n  this.decoders = {};\n  this.encoders = {};\n}\n\nEntity.prototype._createNamed = function createNamed(Base) {\n  const name = this.name;\n\n  function Generated(entity) {\n    this._initNamed(entity, name);\n  }\n  inherits(Generated, Base);\n  Generated.prototype._initNamed = function _initNamed(entity, name) {\n    Base.call(this, entity, name);\n  };\n\n  return new Generated(this);\n};\n\nEntity.prototype._getDecoder = function _getDecoder(enc) {\n  enc = enc || 'der';\n  // Lazily create decoder\n  if (!this.decoders.hasOwnProperty(enc))\n    this.decoders[enc] = this._createNamed(decoders[enc]);\n  return this.decoders[enc];\n};\n\nEntity.prototype.decode = function decode(data, enc, options) {\n  return this._getDecoder(enc).decode(data, options);\n};\n\nEntity.prototype._getEncoder = function _getEncoder(enc) {\n  enc = enc || 'der';\n  // Lazily create encoder\n  if (!this.encoders.hasOwnProperty(enc))\n    this.encoders[enc] = this._createNamed(encoders[enc]);\n  return this.encoders[enc];\n};\n\nEntity.prototype.encode = function encode(data, enc, /* internal */ reporter) {\n  return this._getEncoder(enc).encode(data, reporter);\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/lib/asn1/api.js?");

/***/ }),

/***/ "./node_modules/asn1.js/lib/asn1/base/buffer.js":
/*!******************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/base/buffer.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\nconst Reporter = __webpack_require__(/*! ../base/reporter */ \"./node_modules/asn1.js/lib/asn1/base/reporter.js\").Reporter;\nconst Buffer = __webpack_require__(/*! safer-buffer */ \"./node_modules/safer-buffer/safer.js\").Buffer;\n\nfunction DecoderBuffer(base, options) {\n  Reporter.call(this, options);\n  if (!Buffer.isBuffer(base)) {\n    this.error('Input not Buffer');\n    return;\n  }\n\n  this.base = base;\n  this.offset = 0;\n  this.length = base.length;\n}\ninherits(DecoderBuffer, Reporter);\nexports.DecoderBuffer = DecoderBuffer;\n\nDecoderBuffer.isDecoderBuffer = function isDecoderBuffer(data) {\n  if (data instanceof DecoderBuffer) {\n    return true;\n  }\n\n  // Or accept compatible API\n  const isCompatible = typeof data === 'object' &&\n    Buffer.isBuffer(data.base) &&\n    data.constructor.name === 'DecoderBuffer' &&\n    typeof data.offset === 'number' &&\n    typeof data.length === 'number' &&\n    typeof data.save === 'function' &&\n    typeof data.restore === 'function' &&\n    typeof data.isEmpty === 'function' &&\n    typeof data.readUInt8 === 'function' &&\n    typeof data.skip === 'function' &&\n    typeof data.raw === 'function';\n\n  return isCompatible;\n};\n\nDecoderBuffer.prototype.save = function save() {\n  return { offset: this.offset, reporter: Reporter.prototype.save.call(this) };\n};\n\nDecoderBuffer.prototype.restore = function restore(save) {\n  // Return skipped data\n  const res = new DecoderBuffer(this.base);\n  res.offset = save.offset;\n  res.length = this.offset;\n\n  this.offset = save.offset;\n  Reporter.prototype.restore.call(this, save.reporter);\n\n  return res;\n};\n\nDecoderBuffer.prototype.isEmpty = function isEmpty() {\n  return this.offset === this.length;\n};\n\nDecoderBuffer.prototype.readUInt8 = function readUInt8(fail) {\n  if (this.offset + 1 <= this.length)\n    return this.base.readUInt8(this.offset++, true);\n  else\n    return this.error(fail || 'DecoderBuffer overrun');\n};\n\nDecoderBuffer.prototype.skip = function skip(bytes, fail) {\n  if (!(this.offset + bytes <= this.length))\n    return this.error(fail || 'DecoderBuffer overrun');\n\n  const res = new DecoderBuffer(this.base);\n\n  // Share reporter state\n  res._reporterState = this._reporterState;\n\n  res.offset = this.offset;\n  res.length = this.offset + bytes;\n  this.offset += bytes;\n  return res;\n};\n\nDecoderBuffer.prototype.raw = function raw(save) {\n  return this.base.slice(save ? save.offset : this.offset, this.length);\n};\n\nfunction EncoderBuffer(value, reporter) {\n  if (Array.isArray(value)) {\n    this.length = 0;\n    this.value = value.map(function(item) {\n      if (!EncoderBuffer.isEncoderBuffer(item))\n        item = new EncoderBuffer(item, reporter);\n      this.length += item.length;\n      return item;\n    }, this);\n  } else if (typeof value === 'number') {\n    if (!(0 <= value && value <= 0xff))\n      return reporter.error('non-byte EncoderBuffer value');\n    this.value = value;\n    this.length = 1;\n  } else if (typeof value === 'string') {\n    this.value = value;\n    this.length = Buffer.byteLength(value);\n  } else if (Buffer.isBuffer(value)) {\n    this.value = value;\n    this.length = value.length;\n  } else {\n    return reporter.error('Unsupported type: ' + typeof value);\n  }\n}\nexports.EncoderBuffer = EncoderBuffer;\n\nEncoderBuffer.isEncoderBuffer = function isEncoderBuffer(data) {\n  if (data instanceof EncoderBuffer) {\n    return true;\n  }\n\n  // Or accept compatible API\n  const isCompatible = typeof data === 'object' &&\n    data.constructor.name === 'EncoderBuffer' &&\n    typeof data.length === 'number' &&\n    typeof data.join === 'function';\n\n  return isCompatible;\n};\n\nEncoderBuffer.prototype.join = function join(out, offset) {\n  if (!out)\n    out = Buffer.alloc(this.length);\n  if (!offset)\n    offset = 0;\n\n  if (this.length === 0)\n    return out;\n\n  if (Array.isArray(this.value)) {\n    this.value.forEach(function(item) {\n      item.join(out, offset);\n      offset += item.length;\n    });\n  } else {\n    if (typeof this.value === 'number')\n      out[offset] = this.value;\n    else if (typeof this.value === 'string')\n      out.write(this.value, offset);\n    else if (Buffer.isBuffer(this.value))\n      this.value.copy(out, offset);\n    offset += this.length;\n  }\n\n  return out;\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/lib/asn1/base/buffer.js?");

/***/ }),

/***/ "./node_modules/asn1.js/lib/asn1/base/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/base/index.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst base = exports;\n\nbase.Reporter = __webpack_require__(/*! ./reporter */ \"./node_modules/asn1.js/lib/asn1/base/reporter.js\").Reporter;\nbase.DecoderBuffer = __webpack_require__(/*! ./buffer */ \"./node_modules/asn1.js/lib/asn1/base/buffer.js\").DecoderBuffer;\nbase.EncoderBuffer = __webpack_require__(/*! ./buffer */ \"./node_modules/asn1.js/lib/asn1/base/buffer.js\").EncoderBuffer;\nbase.Node = __webpack_require__(/*! ./node */ \"./node_modules/asn1.js/lib/asn1/base/node.js\");\n\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/lib/asn1/base/index.js?");

/***/ }),

/***/ "./node_modules/asn1.js/lib/asn1/base/node.js":
/*!****************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/base/node.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst Reporter = __webpack_require__(/*! ../base/reporter */ \"./node_modules/asn1.js/lib/asn1/base/reporter.js\").Reporter;\nconst EncoderBuffer = __webpack_require__(/*! ../base/buffer */ \"./node_modules/asn1.js/lib/asn1/base/buffer.js\").EncoderBuffer;\nconst DecoderBuffer = __webpack_require__(/*! ../base/buffer */ \"./node_modules/asn1.js/lib/asn1/base/buffer.js\").DecoderBuffer;\nconst assert = __webpack_require__(/*! minimalistic-assert */ \"./node_modules/minimalistic-assert/index.js\");\n\n// Supported tags\nconst tags = [\n  'seq', 'seqof', 'set', 'setof', 'objid', 'bool',\n  'gentime', 'utctime', 'null_', 'enum', 'int', 'objDesc',\n  'bitstr', 'bmpstr', 'charstr', 'genstr', 'graphstr', 'ia5str', 'iso646str',\n  'numstr', 'octstr', 'printstr', 't61str', 'unistr', 'utf8str', 'videostr'\n];\n\n// Public methods list\nconst methods = [\n  'key', 'obj', 'use', 'optional', 'explicit', 'implicit', 'def', 'choice',\n  'any', 'contains'\n].concat(tags);\n\n// Overrided methods list\nconst overrided = [\n  '_peekTag', '_decodeTag', '_use',\n  '_decodeStr', '_decodeObjid', '_decodeTime',\n  '_decodeNull', '_decodeInt', '_decodeBool', '_decodeList',\n\n  '_encodeComposite', '_encodeStr', '_encodeObjid', '_encodeTime',\n  '_encodeNull', '_encodeInt', '_encodeBool'\n];\n\nfunction Node(enc, parent, name) {\n  const state = {};\n  this._baseState = state;\n\n  state.name = name;\n  state.enc = enc;\n\n  state.parent = parent || null;\n  state.children = null;\n\n  // State\n  state.tag = null;\n  state.args = null;\n  state.reverseArgs = null;\n  state.choice = null;\n  state.optional = false;\n  state.any = false;\n  state.obj = false;\n  state.use = null;\n  state.useDecoder = null;\n  state.key = null;\n  state['default'] = null;\n  state.explicit = null;\n  state.implicit = null;\n  state.contains = null;\n\n  // Should create new instance on each method\n  if (!state.parent) {\n    state.children = [];\n    this._wrap();\n  }\n}\nmodule.exports = Node;\n\nconst stateProps = [\n  'enc', 'parent', 'children', 'tag', 'args', 'reverseArgs', 'choice',\n  'optional', 'any', 'obj', 'use', 'alteredUse', 'key', 'default', 'explicit',\n  'implicit', 'contains'\n];\n\nNode.prototype.clone = function clone() {\n  const state = this._baseState;\n  const cstate = {};\n  stateProps.forEach(function(prop) {\n    cstate[prop] = state[prop];\n  });\n  const res = new this.constructor(cstate.parent);\n  res._baseState = cstate;\n  return res;\n};\n\nNode.prototype._wrap = function wrap() {\n  const state = this._baseState;\n  methods.forEach(function(method) {\n    this[method] = function _wrappedMethod() {\n      const clone = new this.constructor(this);\n      state.children.push(clone);\n      return clone[method].apply(clone, arguments);\n    };\n  }, this);\n};\n\nNode.prototype._init = function init(body) {\n  const state = this._baseState;\n\n  assert(state.parent === null);\n  body.call(this);\n\n  // Filter children\n  state.children = state.children.filter(function(child) {\n    return child._baseState.parent === this;\n  }, this);\n  assert.equal(state.children.length, 1, 'Root node can have only one child');\n};\n\nNode.prototype._useArgs = function useArgs(args) {\n  const state = this._baseState;\n\n  // Filter children and args\n  const children = args.filter(function(arg) {\n    return arg instanceof this.constructor;\n  }, this);\n  args = args.filter(function(arg) {\n    return !(arg instanceof this.constructor);\n  }, this);\n\n  if (children.length !== 0) {\n    assert(state.children === null);\n    state.children = children;\n\n    // Replace parent to maintain backward link\n    children.forEach(function(child) {\n      child._baseState.parent = this;\n    }, this);\n  }\n  if (args.length !== 0) {\n    assert(state.args === null);\n    state.args = args;\n    state.reverseArgs = args.map(function(arg) {\n      if (typeof arg !== 'object' || arg.constructor !== Object)\n        return arg;\n\n      const res = {};\n      Object.keys(arg).forEach(function(key) {\n        if (key == (key | 0))\n          key |= 0;\n        const value = arg[key];\n        res[value] = key;\n      });\n      return res;\n    });\n  }\n};\n\n//\n// Overrided methods\n//\n\noverrided.forEach(function(method) {\n  Node.prototype[method] = function _overrided() {\n    const state = this._baseState;\n    throw new Error(method + ' not implemented for encoding: ' + state.enc);\n  };\n});\n\n//\n// Public methods\n//\n\ntags.forEach(function(tag) {\n  Node.prototype[tag] = function _tagMethod() {\n    const state = this._baseState;\n    const args = Array.prototype.slice.call(arguments);\n\n    assert(state.tag === null);\n    state.tag = tag;\n\n    this._useArgs(args);\n\n    return this;\n  };\n});\n\nNode.prototype.use = function use(item) {\n  assert(item);\n  const state = this._baseState;\n\n  assert(state.use === null);\n  state.use = item;\n\n  return this;\n};\n\nNode.prototype.optional = function optional() {\n  const state = this._baseState;\n\n  state.optional = true;\n\n  return this;\n};\n\nNode.prototype.def = function def(val) {\n  const state = this._baseState;\n\n  assert(state['default'] === null);\n  state['default'] = val;\n  state.optional = true;\n\n  return this;\n};\n\nNode.prototype.explicit = function explicit(num) {\n  const state = this._baseState;\n\n  assert(state.explicit === null && state.implicit === null);\n  state.explicit = num;\n\n  return this;\n};\n\nNode.prototype.implicit = function implicit(num) {\n  const state = this._baseState;\n\n  assert(state.explicit === null && state.implicit === null);\n  state.implicit = num;\n\n  return this;\n};\n\nNode.prototype.obj = function obj() {\n  const state = this._baseState;\n  const args = Array.prototype.slice.call(arguments);\n\n  state.obj = true;\n\n  if (args.length !== 0)\n    this._useArgs(args);\n\n  return this;\n};\n\nNode.prototype.key = function key(newKey) {\n  const state = this._baseState;\n\n  assert(state.key === null);\n  state.key = newKey;\n\n  return this;\n};\n\nNode.prototype.any = function any() {\n  const state = this._baseState;\n\n  state.any = true;\n\n  return this;\n};\n\nNode.prototype.choice = function choice(obj) {\n  const state = this._baseState;\n\n  assert(state.choice === null);\n  state.choice = obj;\n  this._useArgs(Object.keys(obj).map(function(key) {\n    return obj[key];\n  }));\n\n  return this;\n};\n\nNode.prototype.contains = function contains(item) {\n  const state = this._baseState;\n\n  assert(state.use === null);\n  state.contains = item;\n\n  return this;\n};\n\n//\n// Decoding\n//\n\nNode.prototype._decode = function decode(input, options) {\n  const state = this._baseState;\n\n  // Decode root node\n  if (state.parent === null)\n    return input.wrapResult(state.children[0]._decode(input, options));\n\n  let result = state['default'];\n  let present = true;\n\n  let prevKey = null;\n  if (state.key !== null)\n    prevKey = input.enterKey(state.key);\n\n  // Check if tag is there\n  if (state.optional) {\n    let tag = null;\n    if (state.explicit !== null)\n      tag = state.explicit;\n    else if (state.implicit !== null)\n      tag = state.implicit;\n    else if (state.tag !== null)\n      tag = state.tag;\n\n    if (tag === null && !state.any) {\n      // Trial and Error\n      const save = input.save();\n      try {\n        if (state.choice === null)\n          this._decodeGeneric(state.tag, input, options);\n        else\n          this._decodeChoice(input, options);\n        present = true;\n      } catch (e) {\n        present = false;\n      }\n      input.restore(save);\n    } else {\n      present = this._peekTag(input, tag, state.any);\n\n      if (input.isError(present))\n        return present;\n    }\n  }\n\n  // Push object on stack\n  let prevObj;\n  if (state.obj && present)\n    prevObj = input.enterObject();\n\n  if (present) {\n    // Unwrap explicit values\n    if (state.explicit !== null) {\n      const explicit = this._decodeTag(input, state.explicit);\n      if (input.isError(explicit))\n        return explicit;\n      input = explicit;\n    }\n\n    const start = input.offset;\n\n    // Unwrap implicit and normal values\n    if (state.use === null && state.choice === null) {\n      let save;\n      if (state.any)\n        save = input.save();\n      const body = this._decodeTag(\n        input,\n        state.implicit !== null ? state.implicit : state.tag,\n        state.any\n      );\n      if (input.isError(body))\n        return body;\n\n      if (state.any)\n        result = input.raw(save);\n      else\n        input = body;\n    }\n\n    if (options && options.track && state.tag !== null)\n      options.track(input.path(), start, input.length, 'tagged');\n\n    if (options && options.track && state.tag !== null)\n      options.track(input.path(), input.offset, input.length, 'content');\n\n    // Select proper method for tag\n    if (state.any) {\n      // no-op\n    } else if (state.choice === null) {\n      result = this._decodeGeneric(state.tag, input, options);\n    } else {\n      result = this._decodeChoice(input, options);\n    }\n\n    if (input.isError(result))\n      return result;\n\n    // Decode children\n    if (!state.any && state.choice === null && state.children !== null) {\n      state.children.forEach(function decodeChildren(child) {\n        // NOTE: We are ignoring errors here, to let parser continue with other\n        // parts of encoded data\n        child._decode(input, options);\n      });\n    }\n\n    // Decode contained/encoded by schema, only in bit or octet strings\n    if (state.contains && (state.tag === 'octstr' || state.tag === 'bitstr')) {\n      const data = new DecoderBuffer(result);\n      result = this._getUse(state.contains, input._reporterState.obj)\n        ._decode(data, options);\n    }\n  }\n\n  // Pop object\n  if (state.obj && present)\n    result = input.leaveObject(prevObj);\n\n  // Set key\n  if (state.key !== null && (result !== null || present === true))\n    input.leaveKey(prevKey, state.key, result);\n  else if (prevKey !== null)\n    input.exitKey(prevKey);\n\n  return result;\n};\n\nNode.prototype._decodeGeneric = function decodeGeneric(tag, input, options) {\n  const state = this._baseState;\n\n  if (tag === 'seq' || tag === 'set')\n    return null;\n  if (tag === 'seqof' || tag === 'setof')\n    return this._decodeList(input, tag, state.args[0], options);\n  else if (/str$/.test(tag))\n    return this._decodeStr(input, tag, options);\n  else if (tag === 'objid' && state.args)\n    return this._decodeObjid(input, state.args[0], state.args[1], options);\n  else if (tag === 'objid')\n    return this._decodeObjid(input, null, null, options);\n  else if (tag === 'gentime' || tag === 'utctime')\n    return this._decodeTime(input, tag, options);\n  else if (tag === 'null_')\n    return this._decodeNull(input, options);\n  else if (tag === 'bool')\n    return this._decodeBool(input, options);\n  else if (tag === 'objDesc')\n    return this._decodeStr(input, tag, options);\n  else if (tag === 'int' || tag === 'enum')\n    return this._decodeInt(input, state.args && state.args[0], options);\n\n  if (state.use !== null) {\n    return this._getUse(state.use, input._reporterState.obj)\n      ._decode(input, options);\n  } else {\n    return input.error('unknown tag: ' + tag);\n  }\n};\n\nNode.prototype._getUse = function _getUse(entity, obj) {\n\n  const state = this._baseState;\n  // Create altered use decoder if implicit is set\n  state.useDecoder = this._use(entity, obj);\n  assert(state.useDecoder._baseState.parent === null);\n  state.useDecoder = state.useDecoder._baseState.children[0];\n  if (state.implicit !== state.useDecoder._baseState.implicit) {\n    state.useDecoder = state.useDecoder.clone();\n    state.useDecoder._baseState.implicit = state.implicit;\n  }\n  return state.useDecoder;\n};\n\nNode.prototype._decodeChoice = function decodeChoice(input, options) {\n  const state = this._baseState;\n  let result = null;\n  let match = false;\n\n  Object.keys(state.choice).some(function(key) {\n    const save = input.save();\n    const node = state.choice[key];\n    try {\n      const value = node._decode(input, options);\n      if (input.isError(value))\n        return false;\n\n      result = { type: key, value: value };\n      match = true;\n    } catch (e) {\n      input.restore(save);\n      return false;\n    }\n    return true;\n  }, this);\n\n  if (!match)\n    return input.error('Choice not matched');\n\n  return result;\n};\n\n//\n// Encoding\n//\n\nNode.prototype._createEncoderBuffer = function createEncoderBuffer(data) {\n  return new EncoderBuffer(data, this.reporter);\n};\n\nNode.prototype._encode = function encode(data, reporter, parent) {\n  const state = this._baseState;\n  if (state['default'] !== null && state['default'] === data)\n    return;\n\n  const result = this._encodeValue(data, reporter, parent);\n  if (result === undefined)\n    return;\n\n  if (this._skipDefault(result, reporter, parent))\n    return;\n\n  return result;\n};\n\nNode.prototype._encodeValue = function encode(data, reporter, parent) {\n  const state = this._baseState;\n\n  // Decode root node\n  if (state.parent === null)\n    return state.children[0]._encode(data, reporter || new Reporter());\n\n  let result = null;\n\n  // Set reporter to share it with a child class\n  this.reporter = reporter;\n\n  // Check if data is there\n  if (state.optional && data === undefined) {\n    if (state['default'] !== null)\n      data = state['default'];\n    else\n      return;\n  }\n\n  // Encode children first\n  let content = null;\n  let primitive = false;\n  if (state.any) {\n    // Anything that was given is translated to buffer\n    result = this._createEncoderBuffer(data);\n  } else if (state.choice) {\n    result = this._encodeChoice(data, reporter);\n  } else if (state.contains) {\n    content = this._getUse(state.contains, parent)._encode(data, reporter);\n    primitive = true;\n  } else if (state.children) {\n    content = state.children.map(function(child) {\n      if (child._baseState.tag === 'null_')\n        return child._encode(null, reporter, data);\n\n      if (child._baseState.key === null)\n        return reporter.error('Child should have a key');\n      const prevKey = reporter.enterKey(child._baseState.key);\n\n      if (typeof data !== 'object')\n        return reporter.error('Child expected, but input is not object');\n\n      const res = child._encode(data[child._baseState.key], reporter, data);\n      reporter.leaveKey(prevKey);\n\n      return res;\n    }, this).filter(function(child) {\n      return child;\n    });\n    content = this._createEncoderBuffer(content);\n  } else {\n    if (state.tag === 'seqof' || state.tag === 'setof') {\n      // TODO(indutny): this should be thrown on DSL level\n      if (!(state.args && state.args.length === 1))\n        return reporter.error('Too many args for : ' + state.tag);\n\n      if (!Array.isArray(data))\n        return reporter.error('seqof/setof, but data is not Array');\n\n      const child = this.clone();\n      child._baseState.implicit = null;\n      content = this._createEncoderBuffer(data.map(function(item) {\n        const state = this._baseState;\n\n        return this._getUse(state.args[0], data)._encode(item, reporter);\n      }, child));\n    } else if (state.use !== null) {\n      result = this._getUse(state.use, parent)._encode(data, reporter);\n    } else {\n      content = this._encodePrimitive(state.tag, data);\n      primitive = true;\n    }\n  }\n\n  // Encode data itself\n  if (!state.any && state.choice === null) {\n    const tag = state.implicit !== null ? state.implicit : state.tag;\n    const cls = state.implicit === null ? 'universal' : 'context';\n\n    if (tag === null) {\n      if (state.use === null)\n        reporter.error('Tag could be omitted only for .use()');\n    } else {\n      if (state.use === null)\n        result = this._encodeComposite(tag, primitive, cls, content);\n    }\n  }\n\n  // Wrap in explicit\n  if (state.explicit !== null)\n    result = this._encodeComposite(state.explicit, false, 'context', result);\n\n  return result;\n};\n\nNode.prototype._encodeChoice = function encodeChoice(data, reporter) {\n  const state = this._baseState;\n\n  const node = state.choice[data.type];\n  if (!node) {\n    assert(\n      false,\n      data.type + ' not found in ' +\n            JSON.stringify(Object.keys(state.choice)));\n  }\n  return node._encode(data.value, reporter);\n};\n\nNode.prototype._encodePrimitive = function encodePrimitive(tag, data) {\n  const state = this._baseState;\n\n  if (/str$/.test(tag))\n    return this._encodeStr(data, tag);\n  else if (tag === 'objid' && state.args)\n    return this._encodeObjid(data, state.reverseArgs[0], state.args[1]);\n  else if (tag === 'objid')\n    return this._encodeObjid(data, null, null);\n  else if (tag === 'gentime' || tag === 'utctime')\n    return this._encodeTime(data, tag);\n  else if (tag === 'null_')\n    return this._encodeNull();\n  else if (tag === 'int' || tag === 'enum')\n    return this._encodeInt(data, state.args && state.reverseArgs[0]);\n  else if (tag === 'bool')\n    return this._encodeBool(data);\n  else if (tag === 'objDesc')\n    return this._encodeStr(data, tag);\n  else\n    throw new Error('Unsupported tag: ' + tag);\n};\n\nNode.prototype._isNumstr = function isNumstr(str) {\n  return /^[0-9 ]*$/.test(str);\n};\n\nNode.prototype._isPrintstr = function isPrintstr(str) {\n  return /^[A-Za-z0-9 '()+,-./:=?]*$/.test(str);\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/lib/asn1/base/node.js?");

/***/ }),

/***/ "./node_modules/asn1.js/lib/asn1/base/reporter.js":
/*!********************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/base/reporter.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n\nfunction Reporter(options) {\n  this._reporterState = {\n    obj: null,\n    path: [],\n    options: options || {},\n    errors: []\n  };\n}\nexports.Reporter = Reporter;\n\nReporter.prototype.isError = function isError(obj) {\n  return obj instanceof ReporterError;\n};\n\nReporter.prototype.save = function save() {\n  const state = this._reporterState;\n\n  return { obj: state.obj, pathLen: state.path.length };\n};\n\nReporter.prototype.restore = function restore(data) {\n  const state = this._reporterState;\n\n  state.obj = data.obj;\n  state.path = state.path.slice(0, data.pathLen);\n};\n\nReporter.prototype.enterKey = function enterKey(key) {\n  return this._reporterState.path.push(key);\n};\n\nReporter.prototype.exitKey = function exitKey(index) {\n  const state = this._reporterState;\n\n  state.path = state.path.slice(0, index - 1);\n};\n\nReporter.prototype.leaveKey = function leaveKey(index, key, value) {\n  const state = this._reporterState;\n\n  this.exitKey(index);\n  if (state.obj !== null)\n    state.obj[key] = value;\n};\n\nReporter.prototype.path = function path() {\n  return this._reporterState.path.join('/');\n};\n\nReporter.prototype.enterObject = function enterObject() {\n  const state = this._reporterState;\n\n  const prev = state.obj;\n  state.obj = {};\n  return prev;\n};\n\nReporter.prototype.leaveObject = function leaveObject(prev) {\n  const state = this._reporterState;\n\n  const now = state.obj;\n  state.obj = prev;\n  return now;\n};\n\nReporter.prototype.error = function error(msg) {\n  let err;\n  const state = this._reporterState;\n\n  const inherited = msg instanceof ReporterError;\n  if (inherited) {\n    err = msg;\n  } else {\n    err = new ReporterError(state.path.map(function(elem) {\n      return '[' + JSON.stringify(elem) + ']';\n    }).join(''), msg.message || msg, msg.stack);\n  }\n\n  if (!state.options.partial)\n    throw err;\n\n  if (!inherited)\n    state.errors.push(err);\n\n  return err;\n};\n\nReporter.prototype.wrapResult = function wrapResult(result) {\n  const state = this._reporterState;\n  if (!state.options.partial)\n    return result;\n\n  return {\n    result: this.isError(result) ? null : result,\n    errors: state.errors\n  };\n};\n\nfunction ReporterError(path, msg) {\n  this.path = path;\n  this.rethrow(msg);\n}\ninherits(ReporterError, Error);\n\nReporterError.prototype.rethrow = function rethrow(msg) {\n  this.message = msg + ' at: ' + (this.path || '(shallow)');\n  if (Error.captureStackTrace)\n    Error.captureStackTrace(this, ReporterError);\n\n  if (!this.stack) {\n    try {\n      // IE only adds stack when thrown\n      throw new Error(this.message);\n    } catch (e) {\n      this.stack = e.stack;\n    }\n  }\n  return this;\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/lib/asn1/base/reporter.js?");

/***/ }),

/***/ "./node_modules/asn1.js/lib/asn1/constants/der.js":
/*!********************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/constants/der.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n// Helper\nfunction reverse(map) {\n  const res = {};\n\n  Object.keys(map).forEach(function(key) {\n    // Convert key to integer if it is stringified\n    if ((key | 0) == key)\n      key = key | 0;\n\n    const value = map[key];\n    res[value] = key;\n  });\n\n  return res;\n}\n\nexports.tagClass = {\n  0: 'universal',\n  1: 'application',\n  2: 'context',\n  3: 'private'\n};\nexports.tagClassByName = reverse(exports.tagClass);\n\nexports.tag = {\n  0x00: 'end',\n  0x01: 'bool',\n  0x02: 'int',\n  0x03: 'bitstr',\n  0x04: 'octstr',\n  0x05: 'null_',\n  0x06: 'objid',\n  0x07: 'objDesc',\n  0x08: 'external',\n  0x09: 'real',\n  0x0a: 'enum',\n  0x0b: 'embed',\n  0x0c: 'utf8str',\n  0x0d: 'relativeOid',\n  0x10: 'seq',\n  0x11: 'set',\n  0x12: 'numstr',\n  0x13: 'printstr',\n  0x14: 't61str',\n  0x15: 'videostr',\n  0x16: 'ia5str',\n  0x17: 'utctime',\n  0x18: 'gentime',\n  0x19: 'graphstr',\n  0x1a: 'iso646str',\n  0x1b: 'genstr',\n  0x1c: 'unistr',\n  0x1d: 'charstr',\n  0x1e: 'bmpstr'\n};\nexports.tagByName = reverse(exports.tag);\n\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/lib/asn1/constants/der.js?");

/***/ }),

/***/ "./node_modules/asn1.js/lib/asn1/constants/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/constants/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst constants = exports;\n\n// Helper\nconstants._reverse = function reverse(map) {\n  const res = {};\n\n  Object.keys(map).forEach(function(key) {\n    // Convert key to integer if it is stringified\n    if ((key | 0) == key)\n      key = key | 0;\n\n    const value = map[key];\n    res[value] = key;\n  });\n\n  return res;\n};\n\nconstants.der = __webpack_require__(/*! ./der */ \"./node_modules/asn1.js/lib/asn1/constants/der.js\");\n\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/lib/asn1/constants/index.js?");

/***/ }),

/***/ "./node_modules/asn1.js/lib/asn1/decoders/der.js":
/*!*******************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/decoders/der.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n\nconst bignum = __webpack_require__(/*! bn.js */ \"./node_modules/asn1.js/node_modules/bn.js/lib/bn.js\");\nconst DecoderBuffer = __webpack_require__(/*! ../base/buffer */ \"./node_modules/asn1.js/lib/asn1/base/buffer.js\").DecoderBuffer;\nconst Node = __webpack_require__(/*! ../base/node */ \"./node_modules/asn1.js/lib/asn1/base/node.js\");\n\n// Import DER constants\nconst der = __webpack_require__(/*! ../constants/der */ \"./node_modules/asn1.js/lib/asn1/constants/der.js\");\n\nfunction DERDecoder(entity) {\n  this.enc = 'der';\n  this.name = entity.name;\n  this.entity = entity;\n\n  // Construct base tree\n  this.tree = new DERNode();\n  this.tree._init(entity.body);\n}\nmodule.exports = DERDecoder;\n\nDERDecoder.prototype.decode = function decode(data, options) {\n  if (!DecoderBuffer.isDecoderBuffer(data)) {\n    data = new DecoderBuffer(data, options);\n  }\n\n  return this.tree._decode(data, options);\n};\n\n// Tree methods\n\nfunction DERNode(parent) {\n  Node.call(this, 'der', parent);\n}\ninherits(DERNode, Node);\n\nDERNode.prototype._peekTag = function peekTag(buffer, tag, any) {\n  if (buffer.isEmpty())\n    return false;\n\n  const state = buffer.save();\n  const decodedTag = derDecodeTag(buffer, 'Failed to peek tag: \"' + tag + '\"');\n  if (buffer.isError(decodedTag))\n    return decodedTag;\n\n  buffer.restore(state);\n\n  return decodedTag.tag === tag || decodedTag.tagStr === tag ||\n    (decodedTag.tagStr + 'of') === tag || any;\n};\n\nDERNode.prototype._decodeTag = function decodeTag(buffer, tag, any) {\n  const decodedTag = derDecodeTag(buffer,\n    'Failed to decode tag of \"' + tag + '\"');\n  if (buffer.isError(decodedTag))\n    return decodedTag;\n\n  let len = derDecodeLen(buffer,\n    decodedTag.primitive,\n    'Failed to get length of \"' + tag + '\"');\n\n  // Failure\n  if (buffer.isError(len))\n    return len;\n\n  if (!any &&\n      decodedTag.tag !== tag &&\n      decodedTag.tagStr !== tag &&\n      decodedTag.tagStr + 'of' !== tag) {\n    return buffer.error('Failed to match tag: \"' + tag + '\"');\n  }\n\n  if (decodedTag.primitive || len !== null)\n    return buffer.skip(len, 'Failed to match body of: \"' + tag + '\"');\n\n  // Indefinite length... find END tag\n  const state = buffer.save();\n  const res = this._skipUntilEnd(\n    buffer,\n    'Failed to skip indefinite length body: \"' + this.tag + '\"');\n  if (buffer.isError(res))\n    return res;\n\n  len = buffer.offset - state.offset;\n  buffer.restore(state);\n  return buffer.skip(len, 'Failed to match body of: \"' + tag + '\"');\n};\n\nDERNode.prototype._skipUntilEnd = function skipUntilEnd(buffer, fail) {\n  for (;;) {\n    const tag = derDecodeTag(buffer, fail);\n    if (buffer.isError(tag))\n      return tag;\n    const len = derDecodeLen(buffer, tag.primitive, fail);\n    if (buffer.isError(len))\n      return len;\n\n    let res;\n    if (tag.primitive || len !== null)\n      res = buffer.skip(len);\n    else\n      res = this._skipUntilEnd(buffer, fail);\n\n    // Failure\n    if (buffer.isError(res))\n      return res;\n\n    if (tag.tagStr === 'end')\n      break;\n  }\n};\n\nDERNode.prototype._decodeList = function decodeList(buffer, tag, decoder,\n  options) {\n  const result = [];\n  while (!buffer.isEmpty()) {\n    const possibleEnd = this._peekTag(buffer, 'end');\n    if (buffer.isError(possibleEnd))\n      return possibleEnd;\n\n    const res = decoder.decode(buffer, 'der', options);\n    if (buffer.isError(res) && possibleEnd)\n      break;\n    result.push(res);\n  }\n  return result;\n};\n\nDERNode.prototype._decodeStr = function decodeStr(buffer, tag) {\n  if (tag === 'bitstr') {\n    const unused = buffer.readUInt8();\n    if (buffer.isError(unused))\n      return unused;\n    return { unused: unused, data: buffer.raw() };\n  } else if (tag === 'bmpstr') {\n    const raw = buffer.raw();\n    if (raw.length % 2 === 1)\n      return buffer.error('Decoding of string type: bmpstr length mismatch');\n\n    let str = '';\n    for (let i = 0; i < raw.length / 2; i++) {\n      str += String.fromCharCode(raw.readUInt16BE(i * 2));\n    }\n    return str;\n  } else if (tag === 'numstr') {\n    const numstr = buffer.raw().toString('ascii');\n    if (!this._isNumstr(numstr)) {\n      return buffer.error('Decoding of string type: ' +\n                          'numstr unsupported characters');\n    }\n    return numstr;\n  } else if (tag === 'octstr') {\n    return buffer.raw();\n  } else if (tag === 'objDesc') {\n    return buffer.raw();\n  } else if (tag === 'printstr') {\n    const printstr = buffer.raw().toString('ascii');\n    if (!this._isPrintstr(printstr)) {\n      return buffer.error('Decoding of string type: ' +\n                          'printstr unsupported characters');\n    }\n    return printstr;\n  } else if (/str$/.test(tag)) {\n    return buffer.raw().toString();\n  } else {\n    return buffer.error('Decoding of string type: ' + tag + ' unsupported');\n  }\n};\n\nDERNode.prototype._decodeObjid = function decodeObjid(buffer, values, relative) {\n  let result;\n  const identifiers = [];\n  let ident = 0;\n  let subident = 0;\n  while (!buffer.isEmpty()) {\n    subident = buffer.readUInt8();\n    ident <<= 7;\n    ident |= subident & 0x7f;\n    if ((subident & 0x80) === 0) {\n      identifiers.push(ident);\n      ident = 0;\n    }\n  }\n  if (subident & 0x80)\n    identifiers.push(ident);\n\n  const first = (identifiers[0] / 40) | 0;\n  const second = identifiers[0] % 40;\n\n  if (relative)\n    result = identifiers;\n  else\n    result = [first, second].concat(identifiers.slice(1));\n\n  if (values) {\n    let tmp = values[result.join(' ')];\n    if (tmp === undefined)\n      tmp = values[result.join('.')];\n    if (tmp !== undefined)\n      result = tmp;\n  }\n\n  return result;\n};\n\nDERNode.prototype._decodeTime = function decodeTime(buffer, tag) {\n  const str = buffer.raw().toString();\n\n  let year;\n  let mon;\n  let day;\n  let hour;\n  let min;\n  let sec;\n  if (tag === 'gentime') {\n    year = str.slice(0, 4) | 0;\n    mon = str.slice(4, 6) | 0;\n    day = str.slice(6, 8) | 0;\n    hour = str.slice(8, 10) | 0;\n    min = str.slice(10, 12) | 0;\n    sec = str.slice(12, 14) | 0;\n  } else if (tag === 'utctime') {\n    year = str.slice(0, 2) | 0;\n    mon = str.slice(2, 4) | 0;\n    day = str.slice(4, 6) | 0;\n    hour = str.slice(6, 8) | 0;\n    min = str.slice(8, 10) | 0;\n    sec = str.slice(10, 12) | 0;\n    if (year < 70)\n      year = 2000 + year;\n    else\n      year = 1900 + year;\n  } else {\n    return buffer.error('Decoding ' + tag + ' time is not supported yet');\n  }\n\n  return Date.UTC(year, mon - 1, day, hour, min, sec, 0);\n};\n\nDERNode.prototype._decodeNull = function decodeNull() {\n  return null;\n};\n\nDERNode.prototype._decodeBool = function decodeBool(buffer) {\n  const res = buffer.readUInt8();\n  if (buffer.isError(res))\n    return res;\n  else\n    return res !== 0;\n};\n\nDERNode.prototype._decodeInt = function decodeInt(buffer, values) {\n  // Bigint, return as it is (assume big endian)\n  const raw = buffer.raw();\n  let res = new bignum(raw);\n\n  if (values)\n    res = values[res.toString(10)] || res;\n\n  return res;\n};\n\nDERNode.prototype._use = function use(entity, obj) {\n  if (typeof entity === 'function')\n    entity = entity(obj);\n  return entity._getDecoder('der').tree;\n};\n\n// Utility methods\n\nfunction derDecodeTag(buf, fail) {\n  let tag = buf.readUInt8(fail);\n  if (buf.isError(tag))\n    return tag;\n\n  const cls = der.tagClass[tag >> 6];\n  const primitive = (tag & 0x20) === 0;\n\n  // Multi-octet tag - load\n  if ((tag & 0x1f) === 0x1f) {\n    let oct = tag;\n    tag = 0;\n    while ((oct & 0x80) === 0x80) {\n      oct = buf.readUInt8(fail);\n      if (buf.isError(oct))\n        return oct;\n\n      tag <<= 7;\n      tag |= oct & 0x7f;\n    }\n  } else {\n    tag &= 0x1f;\n  }\n  const tagStr = der.tag[tag];\n\n  return {\n    cls: cls,\n    primitive: primitive,\n    tag: tag,\n    tagStr: tagStr\n  };\n}\n\nfunction derDecodeLen(buf, primitive, fail) {\n  let len = buf.readUInt8(fail);\n  if (buf.isError(len))\n    return len;\n\n  // Indefinite form\n  if (!primitive && len === 0x80)\n    return null;\n\n  // Definite form\n  if ((len & 0x80) === 0) {\n    // Short form\n    return len;\n  }\n\n  // Long form\n  const num = len & 0x7f;\n  if (num > 4)\n    return buf.error('length octect is too long');\n\n  len = 0;\n  for (let i = 0; i < num; i++) {\n    len <<= 8;\n    const j = buf.readUInt8(fail);\n    if (buf.isError(j))\n      return j;\n    len |= j;\n  }\n\n  return len;\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/lib/asn1/decoders/der.js?");

/***/ }),

/***/ "./node_modules/asn1.js/lib/asn1/decoders/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/decoders/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst decoders = exports;\n\ndecoders.der = __webpack_require__(/*! ./der */ \"./node_modules/asn1.js/lib/asn1/decoders/der.js\");\ndecoders.pem = __webpack_require__(/*! ./pem */ \"./node_modules/asn1.js/lib/asn1/decoders/pem.js\");\n\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/lib/asn1/decoders/index.js?");

/***/ }),

/***/ "./node_modules/asn1.js/lib/asn1/decoders/pem.js":
/*!*******************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/decoders/pem.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\nconst Buffer = __webpack_require__(/*! safer-buffer */ \"./node_modules/safer-buffer/safer.js\").Buffer;\n\nconst DERDecoder = __webpack_require__(/*! ./der */ \"./node_modules/asn1.js/lib/asn1/decoders/der.js\");\n\nfunction PEMDecoder(entity) {\n  DERDecoder.call(this, entity);\n  this.enc = 'pem';\n}\ninherits(PEMDecoder, DERDecoder);\nmodule.exports = PEMDecoder;\n\nPEMDecoder.prototype.decode = function decode(data, options) {\n  const lines = data.toString().split(/[\\r\\n]+/g);\n\n  const label = options.label.toUpperCase();\n\n  const re = /^-----(BEGIN|END) ([^-]+)-----$/;\n  let start = -1;\n  let end = -1;\n  for (let i = 0; i < lines.length; i++) {\n    const match = lines[i].match(re);\n    if (match === null)\n      continue;\n\n    if (match[2] !== label)\n      continue;\n\n    if (start === -1) {\n      if (match[1] !== 'BEGIN')\n        break;\n      start = i;\n    } else {\n      if (match[1] !== 'END')\n        break;\n      end = i;\n      break;\n    }\n  }\n  if (start === -1 || end === -1)\n    throw new Error('PEM section not found for: ' + label);\n\n  const base64 = lines.slice(start + 1, end).join('');\n  // Remove excessive symbols\n  base64.replace(/[^a-z0-9+/=]+/gi, '');\n\n  const input = Buffer.from(base64, 'base64');\n  return DERDecoder.prototype.decode.call(this, input, options);\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/lib/asn1/decoders/pem.js?");

/***/ }),

/***/ "./node_modules/asn1.js/lib/asn1/encoders/der.js":
/*!*******************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/encoders/der.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\nconst Buffer = __webpack_require__(/*! safer-buffer */ \"./node_modules/safer-buffer/safer.js\").Buffer;\nconst Node = __webpack_require__(/*! ../base/node */ \"./node_modules/asn1.js/lib/asn1/base/node.js\");\n\n// Import DER constants\nconst der = __webpack_require__(/*! ../constants/der */ \"./node_modules/asn1.js/lib/asn1/constants/der.js\");\n\nfunction DEREncoder(entity) {\n  this.enc = 'der';\n  this.name = entity.name;\n  this.entity = entity;\n\n  // Construct base tree\n  this.tree = new DERNode();\n  this.tree._init(entity.body);\n}\nmodule.exports = DEREncoder;\n\nDEREncoder.prototype.encode = function encode(data, reporter) {\n  return this.tree._encode(data, reporter).join();\n};\n\n// Tree methods\n\nfunction DERNode(parent) {\n  Node.call(this, 'der', parent);\n}\ninherits(DERNode, Node);\n\nDERNode.prototype._encodeComposite = function encodeComposite(tag,\n  primitive,\n  cls,\n  content) {\n  const encodedTag = encodeTag(tag, primitive, cls, this.reporter);\n\n  // Short form\n  if (content.length < 0x80) {\n    const header = Buffer.alloc(2);\n    header[0] = encodedTag;\n    header[1] = content.length;\n    return this._createEncoderBuffer([ header, content ]);\n  }\n\n  // Long form\n  // Count octets required to store length\n  let lenOctets = 1;\n  for (let i = content.length; i >= 0x100; i >>= 8)\n    lenOctets++;\n\n  const header = Buffer.alloc(1 + 1 + lenOctets);\n  header[0] = encodedTag;\n  header[1] = 0x80 | lenOctets;\n\n  for (let i = 1 + lenOctets, j = content.length; j > 0; i--, j >>= 8)\n    header[i] = j & 0xff;\n\n  return this._createEncoderBuffer([ header, content ]);\n};\n\nDERNode.prototype._encodeStr = function encodeStr(str, tag) {\n  if (tag === 'bitstr') {\n    return this._createEncoderBuffer([ str.unused | 0, str.data ]);\n  } else if (tag === 'bmpstr') {\n    const buf = Buffer.alloc(str.length * 2);\n    for (let i = 0; i < str.length; i++) {\n      buf.writeUInt16BE(str.charCodeAt(i), i * 2);\n    }\n    return this._createEncoderBuffer(buf);\n  } else if (tag === 'numstr') {\n    if (!this._isNumstr(str)) {\n      return this.reporter.error('Encoding of string type: numstr supports ' +\n                                 'only digits and space');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'printstr') {\n    if (!this._isPrintstr(str)) {\n      return this.reporter.error('Encoding of string type: printstr supports ' +\n                                 'only latin upper and lower case letters, ' +\n                                 'digits, space, apostrophe, left and rigth ' +\n                                 'parenthesis, plus sign, comma, hyphen, ' +\n                                 'dot, slash, colon, equal sign, ' +\n                                 'question mark');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (/str$/.test(tag)) {\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'objDesc') {\n    return this._createEncoderBuffer(str);\n  } else {\n    return this.reporter.error('Encoding of string type: ' + tag +\n                               ' unsupported');\n  }\n};\n\nDERNode.prototype._encodeObjid = function encodeObjid(id, values, relative) {\n  if (typeof id === 'string') {\n    if (!values)\n      return this.reporter.error('string objid given, but no values map found');\n    if (!values.hasOwnProperty(id))\n      return this.reporter.error('objid not found in values map');\n    id = values[id].split(/[\\s.]+/g);\n    for (let i = 0; i < id.length; i++)\n      id[i] |= 0;\n  } else if (Array.isArray(id)) {\n    id = id.slice();\n    for (let i = 0; i < id.length; i++)\n      id[i] |= 0;\n  }\n\n  if (!Array.isArray(id)) {\n    return this.reporter.error('objid() should be either array or string, ' +\n                               'got: ' + JSON.stringify(id));\n  }\n\n  if (!relative) {\n    if (id[1] >= 40)\n      return this.reporter.error('Second objid identifier OOB');\n    id.splice(0, 2, id[0] * 40 + id[1]);\n  }\n\n  // Count number of octets\n  let size = 0;\n  for (let i = 0; i < id.length; i++) {\n    let ident = id[i];\n    for (size++; ident >= 0x80; ident >>= 7)\n      size++;\n  }\n\n  const objid = Buffer.alloc(size);\n  let offset = objid.length - 1;\n  for (let i = id.length - 1; i >= 0; i--) {\n    let ident = id[i];\n    objid[offset--] = ident & 0x7f;\n    while ((ident >>= 7) > 0)\n      objid[offset--] = 0x80 | (ident & 0x7f);\n  }\n\n  return this._createEncoderBuffer(objid);\n};\n\nfunction two(num) {\n  if (num < 10)\n    return '0' + num;\n  else\n    return num;\n}\n\nDERNode.prototype._encodeTime = function encodeTime(time, tag) {\n  let str;\n  const date = new Date(time);\n\n  if (tag === 'gentime') {\n    str = [\n      two(date.getUTCFullYear()),\n      two(date.getUTCMonth() + 1),\n      two(date.getUTCDate()),\n      two(date.getUTCHours()),\n      two(date.getUTCMinutes()),\n      two(date.getUTCSeconds()),\n      'Z'\n    ].join('');\n  } else if (tag === 'utctime') {\n    str = [\n      two(date.getUTCFullYear() % 100),\n      two(date.getUTCMonth() + 1),\n      two(date.getUTCDate()),\n      two(date.getUTCHours()),\n      two(date.getUTCMinutes()),\n      two(date.getUTCSeconds()),\n      'Z'\n    ].join('');\n  } else {\n    this.reporter.error('Encoding ' + tag + ' time is not supported yet');\n  }\n\n  return this._encodeStr(str, 'octstr');\n};\n\nDERNode.prototype._encodeNull = function encodeNull() {\n  return this._createEncoderBuffer('');\n};\n\nDERNode.prototype._encodeInt = function encodeInt(num, values) {\n  if (typeof num === 'string') {\n    if (!values)\n      return this.reporter.error('String int or enum given, but no values map');\n    if (!values.hasOwnProperty(num)) {\n      return this.reporter.error('Values map doesn\\'t contain: ' +\n                                 JSON.stringify(num));\n    }\n    num = values[num];\n  }\n\n  // Bignum, assume big endian\n  if (typeof num !== 'number' && !Buffer.isBuffer(num)) {\n    const numArray = num.toArray();\n    if (!num.sign && numArray[0] & 0x80) {\n      numArray.unshift(0);\n    }\n    num = Buffer.from(numArray);\n  }\n\n  if (Buffer.isBuffer(num)) {\n    let size = num.length;\n    if (num.length === 0)\n      size++;\n\n    const out = Buffer.alloc(size);\n    num.copy(out);\n    if (num.length === 0)\n      out[0] = 0;\n    return this._createEncoderBuffer(out);\n  }\n\n  if (num < 0x80)\n    return this._createEncoderBuffer(num);\n\n  if (num < 0x100)\n    return this._createEncoderBuffer([0, num]);\n\n  let size = 1;\n  for (let i = num; i >= 0x100; i >>= 8)\n    size++;\n\n  const out = new Array(size);\n  for (let i = out.length - 1; i >= 0; i--) {\n    out[i] = num & 0xff;\n    num >>= 8;\n  }\n  if(out[0] & 0x80) {\n    out.unshift(0);\n  }\n\n  return this._createEncoderBuffer(Buffer.from(out));\n};\n\nDERNode.prototype._encodeBool = function encodeBool(value) {\n  return this._createEncoderBuffer(value ? 0xff : 0);\n};\n\nDERNode.prototype._use = function use(entity, obj) {\n  if (typeof entity === 'function')\n    entity = entity(obj);\n  return entity._getEncoder('der').tree;\n};\n\nDERNode.prototype._skipDefault = function skipDefault(dataBuffer, reporter, parent) {\n  const state = this._baseState;\n  let i;\n  if (state['default'] === null)\n    return false;\n\n  const data = dataBuffer.join();\n  if (state.defaultBuffer === undefined)\n    state.defaultBuffer = this._encodeValue(state['default'], reporter, parent).join();\n\n  if (data.length !== state.defaultBuffer.length)\n    return false;\n\n  for (i=0; i < data.length; i++)\n    if (data[i] !== state.defaultBuffer[i])\n      return false;\n\n  return true;\n};\n\n// Utility methods\n\nfunction encodeTag(tag, primitive, cls, reporter) {\n  let res;\n\n  if (tag === 'seqof')\n    tag = 'seq';\n  else if (tag === 'setof')\n    tag = 'set';\n\n  if (der.tagByName.hasOwnProperty(tag))\n    res = der.tagByName[tag];\n  else if (typeof tag === 'number' && (tag | 0) === tag)\n    res = tag;\n  else\n    return reporter.error('Unknown tag: ' + tag);\n\n  if (res >= 0x1f)\n    return reporter.error('Multi-octet tag encoding unsupported');\n\n  if (!primitive)\n    res |= 0x20;\n\n  res |= (der.tagClassByName[cls || 'universal'] << 6);\n\n  return res;\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/lib/asn1/encoders/der.js?");

/***/ }),

/***/ "./node_modules/asn1.js/lib/asn1/encoders/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/encoders/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst encoders = exports;\n\nencoders.der = __webpack_require__(/*! ./der */ \"./node_modules/asn1.js/lib/asn1/encoders/der.js\");\nencoders.pem = __webpack_require__(/*! ./pem */ \"./node_modules/asn1.js/lib/asn1/encoders/pem.js\");\n\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/lib/asn1/encoders/index.js?");

/***/ }),

/***/ "./node_modules/asn1.js/lib/asn1/encoders/pem.js":
/*!*******************************************************!*\
  !*** ./node_modules/asn1.js/lib/asn1/encoders/pem.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nconst inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n\nconst DEREncoder = __webpack_require__(/*! ./der */ \"./node_modules/asn1.js/lib/asn1/encoders/der.js\");\n\nfunction PEMEncoder(entity) {\n  DEREncoder.call(this, entity);\n  this.enc = 'pem';\n}\ninherits(PEMEncoder, DEREncoder);\nmodule.exports = PEMEncoder;\n\nPEMEncoder.prototype.encode = function encode(data, options) {\n  const buf = DEREncoder.prototype.encode.call(this, data);\n\n  const p = buf.toString('base64');\n  const out = [ '-----BEGIN ' + options.label + '-----' ];\n  for (let i = 0; i < p.length; i += 64)\n    out.push(p.slice(i, i + 64));\n  out.push('-----END ' + options.label + '-----');\n  return out.join('\\n');\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/lib/asn1/encoders/pem.js?");

/***/ }),

/***/ "./node_modules/asn1.js/node_modules/bn.js/lib/bn.js":
/*!***********************************************************!*\
  !*** ./node_modules/asn1.js/node_modules/bn.js/lib/bn.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(module) {(function (module, exports) {\r\n  'use strict';\r\n\r\n  // Utils\r\n  function assert (val, msg) {\r\n    if (!val) throw new Error(msg || 'Assertion failed');\r\n  }\r\n\r\n  // Could use `inherits` module, but don't want to move from single file\r\n  // architecture yet.\r\n  function inherits (ctor, superCtor) {\r\n    ctor.super_ = superCtor;\r\n    var TempCtor = function () {};\r\n    TempCtor.prototype = superCtor.prototype;\r\n    ctor.prototype = new TempCtor();\r\n    ctor.prototype.constructor = ctor;\r\n  }\r\n\r\n  // BN\r\n\r\n  function BN (number, base, endian) {\r\n    if (BN.isBN(number)) {\r\n      return number;\r\n    }\r\n\r\n    this.negative = 0;\r\n    this.words = null;\r\n    this.length = 0;\r\n\r\n    // Reduction context\r\n    this.red = null;\r\n\r\n    if (number !== null) {\r\n      if (base === 'le' || base === 'be') {\r\n        endian = base;\r\n        base = 10;\r\n      }\r\n\r\n      this._init(number || 0, base || 10, endian || 'be');\r\n    }\r\n  }\r\n  if (typeof module === 'object') {\r\n    module.exports = BN;\r\n  } else {\r\n    exports.BN = BN;\r\n  }\r\n\r\n  BN.BN = BN;\r\n  BN.wordSize = 26;\r\n\r\n  var Buffer;\r\n  try {\r\n    Buffer = __webpack_require__(/*! buffer */ 13).Buffer;\r\n  } catch (e) {\r\n  }\r\n\r\n  BN.isBN = function isBN (num) {\r\n    if (num instanceof BN) {\r\n      return true;\r\n    }\r\n\r\n    return num !== null && typeof num === 'object' &&\r\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\r\n  };\r\n\r\n  BN.max = function max (left, right) {\r\n    if (left.cmp(right) > 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.min = function min (left, right) {\r\n    if (left.cmp(right) < 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.prototype._init = function init (number, base, endian) {\r\n    if (typeof number === 'number') {\r\n      return this._initNumber(number, base, endian);\r\n    }\r\n\r\n    if (typeof number === 'object') {\r\n      return this._initArray(number, base, endian);\r\n    }\r\n\r\n    if (base === 'hex') {\r\n      base = 16;\r\n    }\r\n    assert(base === (base | 0) && base >= 2 && base <= 36);\r\n\r\n    number = number.toString().replace(/\\s+/g, '');\r\n    var start = 0;\r\n    if (number[0] === '-') {\r\n      start++;\r\n    }\r\n\r\n    if (base === 16) {\r\n      this._parseHex(number, start);\r\n    } else {\r\n      this._parseBase(number, base, start);\r\n    }\r\n\r\n    if (number[0] === '-') {\r\n      this.negative = 1;\r\n    }\r\n\r\n    this.strip();\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\r\n    if (number < 0) {\r\n      this.negative = 1;\r\n      number = -number;\r\n    }\r\n    if (number < 0x4000000) {\r\n      this.words = [ number & 0x3ffffff ];\r\n      this.length = 1;\r\n    } else if (number < 0x10000000000000) {\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff\r\n      ];\r\n      this.length = 2;\r\n    } else {\r\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff,\r\n        1\r\n      ];\r\n      this.length = 3;\r\n    }\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    // Reverse the bytes\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initArray = function _initArray (number, base, endian) {\r\n    // Perhaps a Uint8Array\r\n    assert(typeof number.length === 'number');\r\n    if (number.length <= 0) {\r\n      this.words = [ 0 ];\r\n      this.length = 1;\r\n      return this;\r\n    }\r\n\r\n    this.length = Math.ceil(number.length / 3);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    var off = 0;\r\n    if (endian === 'be') {\r\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\r\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    } else if (endian === 'le') {\r\n      for (i = 0, j = 0; i < number.length; i += 3) {\r\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    }\r\n    return this.strip();\r\n  };\r\n\r\n  function parseHex (str, start, end) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r <<= 4;\r\n\r\n      // 'a' - 'f'\r\n      if (c >= 49 && c <= 54) {\r\n        r |= c - 49 + 0xa;\r\n\r\n      // 'A' - 'F'\r\n      } else if (c >= 17 && c <= 22) {\r\n        r |= c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        r |= c & 0xf;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseHex = function _parseHex (number, start) {\r\n    // Create possibly bigger array to ensure that it fits the number\r\n    this.length = Math.ceil((number.length - start) / 6);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    // Scan 24-bit chunks and add them to the number\r\n    var off = 0;\r\n    for (i = number.length - 6, j = 0; i >= start; i -= 6) {\r\n      w = parseHex(number, i, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      // NOTE: `0x3fffff` is intentional here, 26bits max shift + 24bit hex limb\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n      off += 24;\r\n      if (off >= 26) {\r\n        off -= 26;\r\n        j++;\r\n      }\r\n    }\r\n    if (i + 6 !== start) {\r\n      w = parseHex(number, start, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n    }\r\n    this.strip();\r\n  };\r\n\r\n  function parseBase (str, start, end, mul) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r *= mul;\r\n\r\n      // 'a'\r\n      if (c >= 49) {\r\n        r += c - 49 + 0xa;\r\n\r\n      // 'A'\r\n      } else if (c >= 17) {\r\n        r += c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        r += c;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\r\n    // Initialize as zero\r\n    this.words = [ 0 ];\r\n    this.length = 1;\r\n\r\n    // Find length of limb in base\r\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\r\n      limbLen++;\r\n    }\r\n    limbLen--;\r\n    limbPow = (limbPow / base) | 0;\r\n\r\n    var total = number.length - start;\r\n    var mod = total % limbLen;\r\n    var end = Math.min(total, total - mod) + start;\r\n\r\n    var word = 0;\r\n    for (var i = start; i < end; i += limbLen) {\r\n      word = parseBase(number, i, i + limbLen, base);\r\n\r\n      this.imuln(limbPow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n\r\n    if (mod !== 0) {\r\n      var pow = 1;\r\n      word = parseBase(number, i, number.length, base);\r\n\r\n      for (i = 0; i < mod; i++) {\r\n        pow *= base;\r\n      }\r\n\r\n      this.imuln(pow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n  };\r\n\r\n  BN.prototype.copy = function copy (dest) {\r\n    dest.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      dest.words[i] = this.words[i];\r\n    }\r\n    dest.length = this.length;\r\n    dest.negative = this.negative;\r\n    dest.red = this.red;\r\n  };\r\n\r\n  BN.prototype.clone = function clone () {\r\n    var r = new BN(null);\r\n    this.copy(r);\r\n    return r;\r\n  };\r\n\r\n  BN.prototype._expand = function _expand (size) {\r\n    while (this.length < size) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  // Remove leading `0` from `this`\r\n  BN.prototype.strip = function strip () {\r\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\r\n      this.length--;\r\n    }\r\n    return this._normSign();\r\n  };\r\n\r\n  BN.prototype._normSign = function _normSign () {\r\n    // -0 = 0\r\n    if (this.length === 1 && this.words[0] === 0) {\r\n      this.negative = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.inspect = function inspect () {\r\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\r\n  };\r\n\r\n  /*\r\n\r\n  var zeros = [];\r\n  var groupSizes = [];\r\n  var groupBases = [];\r\n\r\n  var s = '';\r\n  var i = -1;\r\n  while (++i < BN.wordSize) {\r\n    zeros[i] = s;\r\n    s += '0';\r\n  }\r\n  groupSizes[0] = 0;\r\n  groupSizes[1] = 0;\r\n  groupBases[0] = 0;\r\n  groupBases[1] = 0;\r\n  var base = 2 - 1;\r\n  while (++base < 36 + 1) {\r\n    var groupSize = 0;\r\n    var groupBase = 1;\r\n    while (groupBase < (1 << BN.wordSize) / base) {\r\n      groupBase *= base;\r\n      groupSize += 1;\r\n    }\r\n    groupSizes[base] = groupSize;\r\n    groupBases[base] = groupBase;\r\n  }\r\n\r\n  */\r\n\r\n  var zeros = [\r\n    '',\r\n    '0',\r\n    '00',\r\n    '000',\r\n    '0000',\r\n    '00000',\r\n    '000000',\r\n    '0000000',\r\n    '00000000',\r\n    '000000000',\r\n    '0000000000',\r\n    '00000000000',\r\n    '000000000000',\r\n    '0000000000000',\r\n    '00000000000000',\r\n    '000000000000000',\r\n    '0000000000000000',\r\n    '00000000000000000',\r\n    '000000000000000000',\r\n    '0000000000000000000',\r\n    '00000000000000000000',\r\n    '000000000000000000000',\r\n    '0000000000000000000000',\r\n    '00000000000000000000000',\r\n    '000000000000000000000000',\r\n    '0000000000000000000000000'\r\n  ];\r\n\r\n  var groupSizes = [\r\n    0, 0,\r\n    25, 16, 12, 11, 10, 9, 8,\r\n    8, 7, 7, 7, 7, 6, 6,\r\n    6, 6, 6, 6, 6, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5\r\n  ];\r\n\r\n  var groupBases = [\r\n    0, 0,\r\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\r\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\r\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\r\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\r\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\r\n  ];\r\n\r\n  BN.prototype.toString = function toString (base, padding) {\r\n    base = base || 10;\r\n    padding = padding | 0 || 1;\r\n\r\n    var out;\r\n    if (base === 16 || base === 'hex') {\r\n      out = '';\r\n      var off = 0;\r\n      var carry = 0;\r\n      for (var i = 0; i < this.length; i++) {\r\n        var w = this.words[i];\r\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\r\n        carry = (w >>> (24 - off)) & 0xffffff;\r\n        if (carry !== 0 || i !== this.length - 1) {\r\n          out = zeros[6 - word.length] + word + out;\r\n        } else {\r\n          out = word + out;\r\n        }\r\n        off += 2;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          i--;\r\n        }\r\n      }\r\n      if (carry !== 0) {\r\n        out = carry.toString(16) + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    if (base === (base | 0) && base >= 2 && base <= 36) {\r\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\r\n      var groupSize = groupSizes[base];\r\n      // var groupBase = Math.pow(base, groupSize);\r\n      var groupBase = groupBases[base];\r\n      out = '';\r\n      var c = this.clone();\r\n      c.negative = 0;\r\n      while (!c.isZero()) {\r\n        var r = c.modn(groupBase).toString(base);\r\n        c = c.idivn(groupBase);\r\n\r\n        if (!c.isZero()) {\r\n          out = zeros[groupSize - r.length] + r + out;\r\n        } else {\r\n          out = r + out;\r\n        }\r\n      }\r\n      if (this.isZero()) {\r\n        out = '0' + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    assert(false, 'Base should be between 2 and 36');\r\n  };\r\n\r\n  BN.prototype.toNumber = function toNumber () {\r\n    var ret = this.words[0];\r\n    if (this.length === 2) {\r\n      ret += this.words[1] * 0x4000000;\r\n    } else if (this.length === 3 && this.words[2] === 0x01) {\r\n      // NOTE: at this stage it is known that the top bit is set\r\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\r\n    } else if (this.length > 2) {\r\n      assert(false, 'Number can only safely store up to 53 bits');\r\n    }\r\n    return (this.negative !== 0) ? -ret : ret;\r\n  };\r\n\r\n  BN.prototype.toJSON = function toJSON () {\r\n    return this.toString(16);\r\n  };\r\n\r\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\r\n    assert(typeof Buffer !== 'undefined');\r\n    return this.toArrayLike(Buffer, endian, length);\r\n  };\r\n\r\n  BN.prototype.toArray = function toArray (endian, length) {\r\n    return this.toArrayLike(Array, endian, length);\r\n  };\r\n\r\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\r\n    var byteLength = this.byteLength();\r\n    var reqLength = length || Math.max(1, byteLength);\r\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\r\n    assert(reqLength > 0, 'Requested array length <= 0');\r\n\r\n    this.strip();\r\n    var littleEndian = endian === 'le';\r\n    var res = new ArrayType(reqLength);\r\n\r\n    var b, i;\r\n    var q = this.clone();\r\n    if (!littleEndian) {\r\n      // Assume big-endian\r\n      for (i = 0; i < reqLength - byteLength; i++) {\r\n        res[i] = 0;\r\n      }\r\n\r\n      for (i = 0; !q.isZero(); i++) {\r\n        b = q.andln(0xff);\r\n        q.iushrn(8);\r\n\r\n        res[reqLength - i - 1] = b;\r\n      }\r\n    } else {\r\n      for (i = 0; !q.isZero(); i++) {\r\n        b = q.andln(0xff);\r\n        q.iushrn(8);\r\n\r\n        res[i] = b;\r\n      }\r\n\r\n      for (; i < reqLength; i++) {\r\n        res[i] = 0;\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  if (Math.clz32) {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      return 32 - Math.clz32(w);\r\n    };\r\n  } else {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      var t = w;\r\n      var r = 0;\r\n      if (t >= 0x1000) {\r\n        r += 13;\r\n        t >>>= 13;\r\n      }\r\n      if (t >= 0x40) {\r\n        r += 7;\r\n        t >>>= 7;\r\n      }\r\n      if (t >= 0x8) {\r\n        r += 4;\r\n        t >>>= 4;\r\n      }\r\n      if (t >= 0x02) {\r\n        r += 2;\r\n        t >>>= 2;\r\n      }\r\n      return r + t;\r\n    };\r\n  }\r\n\r\n  BN.prototype._zeroBits = function _zeroBits (w) {\r\n    // Short-cut\r\n    if (w === 0) return 26;\r\n\r\n    var t = w;\r\n    var r = 0;\r\n    if ((t & 0x1fff) === 0) {\r\n      r += 13;\r\n      t >>>= 13;\r\n    }\r\n    if ((t & 0x7f) === 0) {\r\n      r += 7;\r\n      t >>>= 7;\r\n    }\r\n    if ((t & 0xf) === 0) {\r\n      r += 4;\r\n      t >>>= 4;\r\n    }\r\n    if ((t & 0x3) === 0) {\r\n      r += 2;\r\n      t >>>= 2;\r\n    }\r\n    if ((t & 0x1) === 0) {\r\n      r++;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  // Return number of used bits in a BN\r\n  BN.prototype.bitLength = function bitLength () {\r\n    var w = this.words[this.length - 1];\r\n    var hi = this._countBits(w);\r\n    return (this.length - 1) * 26 + hi;\r\n  };\r\n\r\n  function toBitArray (num) {\r\n    var w = new Array(num.bitLength());\r\n\r\n    for (var bit = 0; bit < w.length; bit++) {\r\n      var off = (bit / 26) | 0;\r\n      var wbit = bit % 26;\r\n\r\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\r\n    }\r\n\r\n    return w;\r\n  }\r\n\r\n  // Number of trailing zero bits\r\n  BN.prototype.zeroBits = function zeroBits () {\r\n    if (this.isZero()) return 0;\r\n\r\n    var r = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var b = this._zeroBits(this.words[i]);\r\n      r += b;\r\n      if (b !== 26) break;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  BN.prototype.byteLength = function byteLength () {\r\n    return Math.ceil(this.bitLength() / 8);\r\n  };\r\n\r\n  BN.prototype.toTwos = function toTwos (width) {\r\n    if (this.negative !== 0) {\r\n      return this.abs().inotn(width).iaddn(1);\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.fromTwos = function fromTwos (width) {\r\n    if (this.testn(width - 1)) {\r\n      return this.notn(width).iaddn(1).ineg();\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.isNeg = function isNeg () {\r\n    return this.negative !== 0;\r\n  };\r\n\r\n  // Return negative clone of `this`\r\n  BN.prototype.neg = function neg () {\r\n    return this.clone().ineg();\r\n  };\r\n\r\n  BN.prototype.ineg = function ineg () {\r\n    if (!this.isZero()) {\r\n      this.negative ^= 1;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Or `num` with `this` in-place\r\n  BN.prototype.iuor = function iuor (num) {\r\n    while (this.length < num.length) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n\r\n    for (var i = 0; i < num.length; i++) {\r\n      this.words[i] = this.words[i] | num.words[i];\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ior = function ior (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuor(num);\r\n  };\r\n\r\n  // Or `num` with `this`\r\n  BN.prototype.or = function or (num) {\r\n    if (this.length > num.length) return this.clone().ior(num);\r\n    return num.clone().ior(this);\r\n  };\r\n\r\n  BN.prototype.uor = function uor (num) {\r\n    if (this.length > num.length) return this.clone().iuor(num);\r\n    return num.clone().iuor(this);\r\n  };\r\n\r\n  // And `num` with `this` in-place\r\n  BN.prototype.iuand = function iuand (num) {\r\n    // b = min-length(num, this)\r\n    var b;\r\n    if (this.length > num.length) {\r\n      b = num;\r\n    } else {\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = this.words[i] & num.words[i];\r\n    }\r\n\r\n    this.length = b.length;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.iand = function iand (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuand(num);\r\n  };\r\n\r\n  // And `num` with `this`\r\n  BN.prototype.and = function and (num) {\r\n    if (this.length > num.length) return this.clone().iand(num);\r\n    return num.clone().iand(this);\r\n  };\r\n\r\n  BN.prototype.uand = function uand (num) {\r\n    if (this.length > num.length) return this.clone().iuand(num);\r\n    return num.clone().iuand(this);\r\n  };\r\n\r\n  // Xor `num` with `this` in-place\r\n  BN.prototype.iuxor = function iuxor (num) {\r\n    // a.length > b.length\r\n    var a;\r\n    var b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = a.words[i] ^ b.words[i];\r\n    }\r\n\r\n    if (this !== a) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = a.length;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ixor = function ixor (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuxor(num);\r\n  };\r\n\r\n  // Xor `num` with `this`\r\n  BN.prototype.xor = function xor (num) {\r\n    if (this.length > num.length) return this.clone().ixor(num);\r\n    return num.clone().ixor(this);\r\n  };\r\n\r\n  BN.prototype.uxor = function uxor (num) {\r\n    if (this.length > num.length) return this.clone().iuxor(num);\r\n    return num.clone().iuxor(this);\r\n  };\r\n\r\n  // Not ``this`` with ``width`` bitwidth\r\n  BN.prototype.inotn = function inotn (width) {\r\n    assert(typeof width === 'number' && width >= 0);\r\n\r\n    var bytesNeeded = Math.ceil(width / 26) | 0;\r\n    var bitsLeft = width % 26;\r\n\r\n    // Extend the buffer with leading zeroes\r\n    this._expand(bytesNeeded);\r\n\r\n    if (bitsLeft > 0) {\r\n      bytesNeeded--;\r\n    }\r\n\r\n    // Handle complete words\r\n    for (var i = 0; i < bytesNeeded; i++) {\r\n      this.words[i] = ~this.words[i] & 0x3ffffff;\r\n    }\r\n\r\n    // Handle the residue\r\n    if (bitsLeft > 0) {\r\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\r\n    }\r\n\r\n    // And remove leading zeroes\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.notn = function notn (width) {\r\n    return this.clone().inotn(width);\r\n  };\r\n\r\n  // Set `bit` of `this`\r\n  BN.prototype.setn = function setn (bit, val) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n\r\n    var off = (bit / 26) | 0;\r\n    var wbit = bit % 26;\r\n\r\n    this._expand(off + 1);\r\n\r\n    if (val) {\r\n      this.words[off] = this.words[off] | (1 << wbit);\r\n    } else {\r\n      this.words[off] = this.words[off] & ~(1 << wbit);\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Add `num` to `this` in-place\r\n  BN.prototype.iadd = function iadd (num) {\r\n    var r;\r\n\r\n    // negative + positive\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      this.negative = 0;\r\n      r = this.isub(num);\r\n      this.negative ^= 1;\r\n      return this._normSign();\r\n\r\n    // positive + negative\r\n    } else if (this.negative === 0 && num.negative !== 0) {\r\n      num.negative = 0;\r\n      r = this.isub(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n    }\r\n\r\n    // a.length > b.length\r\n    var a, b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n\r\n    this.length = a.length;\r\n    if (carry !== 0) {\r\n      this.words[this.length] = carry;\r\n      this.length++;\r\n    // Copy the rest of the words\r\n    } else if (a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Add `num` to `this`\r\n  BN.prototype.add = function add (num) {\r\n    var res;\r\n    if (num.negative !== 0 && this.negative === 0) {\r\n      num.negative = 0;\r\n      res = this.sub(num);\r\n      num.negative ^= 1;\r\n      return res;\r\n    } else if (num.negative === 0 && this.negative !== 0) {\r\n      this.negative = 0;\r\n      res = num.sub(this);\r\n      this.negative = 1;\r\n      return res;\r\n    }\r\n\r\n    if (this.length > num.length) return this.clone().iadd(num);\r\n\r\n    return num.clone().iadd(this);\r\n  };\r\n\r\n  // Subtract `num` from `this` in-place\r\n  BN.prototype.isub = function isub (num) {\r\n    // this - (-num) = this + num\r\n    if (num.negative !== 0) {\r\n      num.negative = 0;\r\n      var r = this.iadd(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n\r\n    // -this - num = -(this + num)\r\n    } else if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iadd(num);\r\n      this.negative = 1;\r\n      return this._normSign();\r\n    }\r\n\r\n    // At this point both numbers are positive\r\n    var cmp = this.cmp(num);\r\n\r\n    // Optimization - zeroify\r\n    if (cmp === 0) {\r\n      this.negative = 0;\r\n      this.length = 1;\r\n      this.words[0] = 0;\r\n      return this;\r\n    }\r\n\r\n    // a > b\r\n    var a, b;\r\n    if (cmp > 0) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n\r\n    // Copy rest of the words\r\n    if (carry === 0 && i < a.length && a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = Math.max(this.length, i);\r\n\r\n    if (a !== this) {\r\n      this.negative = 1;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Subtract `num` from `this`\r\n  BN.prototype.sub = function sub (num) {\r\n    return this.clone().isub(num);\r\n  };\r\n\r\n  function smallMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    var len = (self.length + num.length) | 0;\r\n    out.length = len;\r\n    len = (len - 1) | 0;\r\n\r\n    // Peel one iteration (compiler can't do it, because of code complexity)\r\n    var a = self.words[0] | 0;\r\n    var b = num.words[0] | 0;\r\n    var r = a * b;\r\n\r\n    var lo = r & 0x3ffffff;\r\n    var carry = (r / 0x4000000) | 0;\r\n    out.words[0] = lo;\r\n\r\n    for (var k = 1; k < len; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = carry >>> 26;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = (k - j) | 0;\r\n        a = self.words[i] | 0;\r\n        b = num.words[j] | 0;\r\n        r = a * b + rword;\r\n        ncarry += (r / 0x4000000) | 0;\r\n        rword = r & 0x3ffffff;\r\n      }\r\n      out.words[k] = rword | 0;\r\n      carry = ncarry | 0;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry | 0;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out.strip();\r\n  }\r\n\r\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\r\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\r\n  // multiplication (like elliptic secp256k1).\r\n  var comb10MulTo = function comb10MulTo (self, num, out) {\r\n    var a = self.words;\r\n    var b = num.words;\r\n    var o = out.words;\r\n    var c = 0;\r\n    var lo;\r\n    var mid;\r\n    var hi;\r\n    var a0 = a[0] | 0;\r\n    var al0 = a0 & 0x1fff;\r\n    var ah0 = a0 >>> 13;\r\n    var a1 = a[1] | 0;\r\n    var al1 = a1 & 0x1fff;\r\n    var ah1 = a1 >>> 13;\r\n    var a2 = a[2] | 0;\r\n    var al2 = a2 & 0x1fff;\r\n    var ah2 = a2 >>> 13;\r\n    var a3 = a[3] | 0;\r\n    var al3 = a3 & 0x1fff;\r\n    var ah3 = a3 >>> 13;\r\n    var a4 = a[4] | 0;\r\n    var al4 = a4 & 0x1fff;\r\n    var ah4 = a4 >>> 13;\r\n    var a5 = a[5] | 0;\r\n    var al5 = a5 & 0x1fff;\r\n    var ah5 = a5 >>> 13;\r\n    var a6 = a[6] | 0;\r\n    var al6 = a6 & 0x1fff;\r\n    var ah6 = a6 >>> 13;\r\n    var a7 = a[7] | 0;\r\n    var al7 = a7 & 0x1fff;\r\n    var ah7 = a7 >>> 13;\r\n    var a8 = a[8] | 0;\r\n    var al8 = a8 & 0x1fff;\r\n    var ah8 = a8 >>> 13;\r\n    var a9 = a[9] | 0;\r\n    var al9 = a9 & 0x1fff;\r\n    var ah9 = a9 >>> 13;\r\n    var b0 = b[0] | 0;\r\n    var bl0 = b0 & 0x1fff;\r\n    var bh0 = b0 >>> 13;\r\n    var b1 = b[1] | 0;\r\n    var bl1 = b1 & 0x1fff;\r\n    var bh1 = b1 >>> 13;\r\n    var b2 = b[2] | 0;\r\n    var bl2 = b2 & 0x1fff;\r\n    var bh2 = b2 >>> 13;\r\n    var b3 = b[3] | 0;\r\n    var bl3 = b3 & 0x1fff;\r\n    var bh3 = b3 >>> 13;\r\n    var b4 = b[4] | 0;\r\n    var bl4 = b4 & 0x1fff;\r\n    var bh4 = b4 >>> 13;\r\n    var b5 = b[5] | 0;\r\n    var bl5 = b5 & 0x1fff;\r\n    var bh5 = b5 >>> 13;\r\n    var b6 = b[6] | 0;\r\n    var bl6 = b6 & 0x1fff;\r\n    var bh6 = b6 >>> 13;\r\n    var b7 = b[7] | 0;\r\n    var bl7 = b7 & 0x1fff;\r\n    var bh7 = b7 >>> 13;\r\n    var b8 = b[8] | 0;\r\n    var bl8 = b8 & 0x1fff;\r\n    var bh8 = b8 >>> 13;\r\n    var b9 = b[9] | 0;\r\n    var bl9 = b9 & 0x1fff;\r\n    var bh9 = b9 >>> 13;\r\n\r\n    out.negative = self.negative ^ num.negative;\r\n    out.length = 19;\r\n    /* k = 0 */\r\n    lo = Math.imul(al0, bl0);\r\n    mid = Math.imul(al0, bh0);\r\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\r\n    hi = Math.imul(ah0, bh0);\r\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\r\n    w0 &= 0x3ffffff;\r\n    /* k = 1 */\r\n    lo = Math.imul(al1, bl0);\r\n    mid = Math.imul(al1, bh0);\r\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\r\n    hi = Math.imul(ah1, bh0);\r\n    lo = (lo + Math.imul(al0, bl1)) | 0;\r\n    mid = (mid + Math.imul(al0, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\r\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\r\n    w1 &= 0x3ffffff;\r\n    /* k = 2 */\r\n    lo = Math.imul(al2, bl0);\r\n    mid = Math.imul(al2, bh0);\r\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\r\n    hi = Math.imul(ah2, bh0);\r\n    lo = (lo + Math.imul(al1, bl1)) | 0;\r\n    mid = (mid + Math.imul(al1, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\r\n    lo = (lo + Math.imul(al0, bl2)) | 0;\r\n    mid = (mid + Math.imul(al0, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\r\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\r\n    w2 &= 0x3ffffff;\r\n    /* k = 3 */\r\n    lo = Math.imul(al3, bl0);\r\n    mid = Math.imul(al3, bh0);\r\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\r\n    hi = Math.imul(ah3, bh0);\r\n    lo = (lo + Math.imul(al2, bl1)) | 0;\r\n    mid = (mid + Math.imul(al2, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\r\n    lo = (lo + Math.imul(al1, bl2)) | 0;\r\n    mid = (mid + Math.imul(al1, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\r\n    lo = (lo + Math.imul(al0, bl3)) | 0;\r\n    mid = (mid + Math.imul(al0, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\r\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\r\n    w3 &= 0x3ffffff;\r\n    /* k = 4 */\r\n    lo = Math.imul(al4, bl0);\r\n    mid = Math.imul(al4, bh0);\r\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\r\n    hi = Math.imul(ah4, bh0);\r\n    lo = (lo + Math.imul(al3, bl1)) | 0;\r\n    mid = (mid + Math.imul(al3, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\r\n    lo = (lo + Math.imul(al2, bl2)) | 0;\r\n    mid = (mid + Math.imul(al2, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\r\n    lo = (lo + Math.imul(al1, bl3)) | 0;\r\n    mid = (mid + Math.imul(al1, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\r\n    lo = (lo + Math.imul(al0, bl4)) | 0;\r\n    mid = (mid + Math.imul(al0, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\r\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\r\n    w4 &= 0x3ffffff;\r\n    /* k = 5 */\r\n    lo = Math.imul(al5, bl0);\r\n    mid = Math.imul(al5, bh0);\r\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\r\n    hi = Math.imul(ah5, bh0);\r\n    lo = (lo + Math.imul(al4, bl1)) | 0;\r\n    mid = (mid + Math.imul(al4, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\r\n    lo = (lo + Math.imul(al3, bl2)) | 0;\r\n    mid = (mid + Math.imul(al3, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\r\n    lo = (lo + Math.imul(al2, bl3)) | 0;\r\n    mid = (mid + Math.imul(al2, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\r\n    lo = (lo + Math.imul(al1, bl4)) | 0;\r\n    mid = (mid + Math.imul(al1, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\r\n    lo = (lo + Math.imul(al0, bl5)) | 0;\r\n    mid = (mid + Math.imul(al0, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\r\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\r\n    w5 &= 0x3ffffff;\r\n    /* k = 6 */\r\n    lo = Math.imul(al6, bl0);\r\n    mid = Math.imul(al6, bh0);\r\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\r\n    hi = Math.imul(ah6, bh0);\r\n    lo = (lo + Math.imul(al5, bl1)) | 0;\r\n    mid = (mid + Math.imul(al5, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\r\n    lo = (lo + Math.imul(al4, bl2)) | 0;\r\n    mid = (mid + Math.imul(al4, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\r\n    lo = (lo + Math.imul(al3, bl3)) | 0;\r\n    mid = (mid + Math.imul(al3, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\r\n    lo = (lo + Math.imul(al2, bl4)) | 0;\r\n    mid = (mid + Math.imul(al2, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\r\n    lo = (lo + Math.imul(al1, bl5)) | 0;\r\n    mid = (mid + Math.imul(al1, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\r\n    lo = (lo + Math.imul(al0, bl6)) | 0;\r\n    mid = (mid + Math.imul(al0, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\r\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\r\n    w6 &= 0x3ffffff;\r\n    /* k = 7 */\r\n    lo = Math.imul(al7, bl0);\r\n    mid = Math.imul(al7, bh0);\r\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\r\n    hi = Math.imul(ah7, bh0);\r\n    lo = (lo + Math.imul(al6, bl1)) | 0;\r\n    mid = (mid + Math.imul(al6, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\r\n    lo = (lo + Math.imul(al5, bl2)) | 0;\r\n    mid = (mid + Math.imul(al5, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\r\n    lo = (lo + Math.imul(al4, bl3)) | 0;\r\n    mid = (mid + Math.imul(al4, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\r\n    lo = (lo + Math.imul(al3, bl4)) | 0;\r\n    mid = (mid + Math.imul(al3, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\r\n    lo = (lo + Math.imul(al2, bl5)) | 0;\r\n    mid = (mid + Math.imul(al2, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\r\n    lo = (lo + Math.imul(al1, bl6)) | 0;\r\n    mid = (mid + Math.imul(al1, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\r\n    lo = (lo + Math.imul(al0, bl7)) | 0;\r\n    mid = (mid + Math.imul(al0, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\r\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\r\n    w7 &= 0x3ffffff;\r\n    /* k = 8 */\r\n    lo = Math.imul(al8, bl0);\r\n    mid = Math.imul(al8, bh0);\r\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\r\n    hi = Math.imul(ah8, bh0);\r\n    lo = (lo + Math.imul(al7, bl1)) | 0;\r\n    mid = (mid + Math.imul(al7, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\r\n    lo = (lo + Math.imul(al6, bl2)) | 0;\r\n    mid = (mid + Math.imul(al6, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\r\n    lo = (lo + Math.imul(al5, bl3)) | 0;\r\n    mid = (mid + Math.imul(al5, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\r\n    lo = (lo + Math.imul(al4, bl4)) | 0;\r\n    mid = (mid + Math.imul(al4, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\r\n    lo = (lo + Math.imul(al3, bl5)) | 0;\r\n    mid = (mid + Math.imul(al3, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\r\n    lo = (lo + Math.imul(al2, bl6)) | 0;\r\n    mid = (mid + Math.imul(al2, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\r\n    lo = (lo + Math.imul(al1, bl7)) | 0;\r\n    mid = (mid + Math.imul(al1, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\r\n    lo = (lo + Math.imul(al0, bl8)) | 0;\r\n    mid = (mid + Math.imul(al0, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\r\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\r\n    w8 &= 0x3ffffff;\r\n    /* k = 9 */\r\n    lo = Math.imul(al9, bl0);\r\n    mid = Math.imul(al9, bh0);\r\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\r\n    hi = Math.imul(ah9, bh0);\r\n    lo = (lo + Math.imul(al8, bl1)) | 0;\r\n    mid = (mid + Math.imul(al8, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\r\n    lo = (lo + Math.imul(al7, bl2)) | 0;\r\n    mid = (mid + Math.imul(al7, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\r\n    lo = (lo + Math.imul(al6, bl3)) | 0;\r\n    mid = (mid + Math.imul(al6, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\r\n    lo = (lo + Math.imul(al5, bl4)) | 0;\r\n    mid = (mid + Math.imul(al5, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\r\n    lo = (lo + Math.imul(al4, bl5)) | 0;\r\n    mid = (mid + Math.imul(al4, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\r\n    lo = (lo + Math.imul(al3, bl6)) | 0;\r\n    mid = (mid + Math.imul(al3, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\r\n    lo = (lo + Math.imul(al2, bl7)) | 0;\r\n    mid = (mid + Math.imul(al2, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\r\n    lo = (lo + Math.imul(al1, bl8)) | 0;\r\n    mid = (mid + Math.imul(al1, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\r\n    lo = (lo + Math.imul(al0, bl9)) | 0;\r\n    mid = (mid + Math.imul(al0, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\r\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\r\n    w9 &= 0x3ffffff;\r\n    /* k = 10 */\r\n    lo = Math.imul(al9, bl1);\r\n    mid = Math.imul(al9, bh1);\r\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\r\n    hi = Math.imul(ah9, bh1);\r\n    lo = (lo + Math.imul(al8, bl2)) | 0;\r\n    mid = (mid + Math.imul(al8, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\r\n    lo = (lo + Math.imul(al7, bl3)) | 0;\r\n    mid = (mid + Math.imul(al7, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\r\n    lo = (lo + Math.imul(al6, bl4)) | 0;\r\n    mid = (mid + Math.imul(al6, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\r\n    lo = (lo + Math.imul(al5, bl5)) | 0;\r\n    mid = (mid + Math.imul(al5, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\r\n    lo = (lo + Math.imul(al4, bl6)) | 0;\r\n    mid = (mid + Math.imul(al4, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\r\n    lo = (lo + Math.imul(al3, bl7)) | 0;\r\n    mid = (mid + Math.imul(al3, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\r\n    lo = (lo + Math.imul(al2, bl8)) | 0;\r\n    mid = (mid + Math.imul(al2, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\r\n    lo = (lo + Math.imul(al1, bl9)) | 0;\r\n    mid = (mid + Math.imul(al1, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\r\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\r\n    w10 &= 0x3ffffff;\r\n    /* k = 11 */\r\n    lo = Math.imul(al9, bl2);\r\n    mid = Math.imul(al9, bh2);\r\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\r\n    hi = Math.imul(ah9, bh2);\r\n    lo = (lo + Math.imul(al8, bl3)) | 0;\r\n    mid = (mid + Math.imul(al8, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\r\n    lo = (lo + Math.imul(al7, bl4)) | 0;\r\n    mid = (mid + Math.imul(al7, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\r\n    lo = (lo + Math.imul(al6, bl5)) | 0;\r\n    mid = (mid + Math.imul(al6, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\r\n    lo = (lo + Math.imul(al5, bl6)) | 0;\r\n    mid = (mid + Math.imul(al5, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\r\n    lo = (lo + Math.imul(al4, bl7)) | 0;\r\n    mid = (mid + Math.imul(al4, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\r\n    lo = (lo + Math.imul(al3, bl8)) | 0;\r\n    mid = (mid + Math.imul(al3, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\r\n    lo = (lo + Math.imul(al2, bl9)) | 0;\r\n    mid = (mid + Math.imul(al2, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\r\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\r\n    w11 &= 0x3ffffff;\r\n    /* k = 12 */\r\n    lo = Math.imul(al9, bl3);\r\n    mid = Math.imul(al9, bh3);\r\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\r\n    hi = Math.imul(ah9, bh3);\r\n    lo = (lo + Math.imul(al8, bl4)) | 0;\r\n    mid = (mid + Math.imul(al8, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\r\n    lo = (lo + Math.imul(al7, bl5)) | 0;\r\n    mid = (mid + Math.imul(al7, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\r\n    lo = (lo + Math.imul(al6, bl6)) | 0;\r\n    mid = (mid + Math.imul(al6, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\r\n    lo = (lo + Math.imul(al5, bl7)) | 0;\r\n    mid = (mid + Math.imul(al5, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\r\n    lo = (lo + Math.imul(al4, bl8)) | 0;\r\n    mid = (mid + Math.imul(al4, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\r\n    lo = (lo + Math.imul(al3, bl9)) | 0;\r\n    mid = (mid + Math.imul(al3, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\r\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\r\n    w12 &= 0x3ffffff;\r\n    /* k = 13 */\r\n    lo = Math.imul(al9, bl4);\r\n    mid = Math.imul(al9, bh4);\r\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\r\n    hi = Math.imul(ah9, bh4);\r\n    lo = (lo + Math.imul(al8, bl5)) | 0;\r\n    mid = (mid + Math.imul(al8, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\r\n    lo = (lo + Math.imul(al7, bl6)) | 0;\r\n    mid = (mid + Math.imul(al7, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\r\n    lo = (lo + Math.imul(al6, bl7)) | 0;\r\n    mid = (mid + Math.imul(al6, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\r\n    lo = (lo + Math.imul(al5, bl8)) | 0;\r\n    mid = (mid + Math.imul(al5, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\r\n    lo = (lo + Math.imul(al4, bl9)) | 0;\r\n    mid = (mid + Math.imul(al4, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\r\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\r\n    w13 &= 0x3ffffff;\r\n    /* k = 14 */\r\n    lo = Math.imul(al9, bl5);\r\n    mid = Math.imul(al9, bh5);\r\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\r\n    hi = Math.imul(ah9, bh5);\r\n    lo = (lo + Math.imul(al8, bl6)) | 0;\r\n    mid = (mid + Math.imul(al8, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\r\n    lo = (lo + Math.imul(al7, bl7)) | 0;\r\n    mid = (mid + Math.imul(al7, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\r\n    lo = (lo + Math.imul(al6, bl8)) | 0;\r\n    mid = (mid + Math.imul(al6, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\r\n    lo = (lo + Math.imul(al5, bl9)) | 0;\r\n    mid = (mid + Math.imul(al5, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\r\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\r\n    w14 &= 0x3ffffff;\r\n    /* k = 15 */\r\n    lo = Math.imul(al9, bl6);\r\n    mid = Math.imul(al9, bh6);\r\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\r\n    hi = Math.imul(ah9, bh6);\r\n    lo = (lo + Math.imul(al8, bl7)) | 0;\r\n    mid = (mid + Math.imul(al8, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\r\n    lo = (lo + Math.imul(al7, bl8)) | 0;\r\n    mid = (mid + Math.imul(al7, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\r\n    lo = (lo + Math.imul(al6, bl9)) | 0;\r\n    mid = (mid + Math.imul(al6, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\r\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\r\n    w15 &= 0x3ffffff;\r\n    /* k = 16 */\r\n    lo = Math.imul(al9, bl7);\r\n    mid = Math.imul(al9, bh7);\r\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\r\n    hi = Math.imul(ah9, bh7);\r\n    lo = (lo + Math.imul(al8, bl8)) | 0;\r\n    mid = (mid + Math.imul(al8, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\r\n    lo = (lo + Math.imul(al7, bl9)) | 0;\r\n    mid = (mid + Math.imul(al7, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\r\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\r\n    w16 &= 0x3ffffff;\r\n    /* k = 17 */\r\n    lo = Math.imul(al9, bl8);\r\n    mid = Math.imul(al9, bh8);\r\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\r\n    hi = Math.imul(ah9, bh8);\r\n    lo = (lo + Math.imul(al8, bl9)) | 0;\r\n    mid = (mid + Math.imul(al8, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\r\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\r\n    w17 &= 0x3ffffff;\r\n    /* k = 18 */\r\n    lo = Math.imul(al9, bl9);\r\n    mid = Math.imul(al9, bh9);\r\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\r\n    hi = Math.imul(ah9, bh9);\r\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\r\n    w18 &= 0x3ffffff;\r\n    o[0] = w0;\r\n    o[1] = w1;\r\n    o[2] = w2;\r\n    o[3] = w3;\r\n    o[4] = w4;\r\n    o[5] = w5;\r\n    o[6] = w6;\r\n    o[7] = w7;\r\n    o[8] = w8;\r\n    o[9] = w9;\r\n    o[10] = w10;\r\n    o[11] = w11;\r\n    o[12] = w12;\r\n    o[13] = w13;\r\n    o[14] = w14;\r\n    o[15] = w15;\r\n    o[16] = w16;\r\n    o[17] = w17;\r\n    o[18] = w18;\r\n    if (c !== 0) {\r\n      o[19] = c;\r\n      out.length++;\r\n    }\r\n    return out;\r\n  };\r\n\r\n  // Polyfill comb\r\n  if (!Math.imul) {\r\n    comb10MulTo = smallMulTo;\r\n  }\r\n\r\n  function bigMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    out.length = self.length + num.length;\r\n\r\n    var carry = 0;\r\n    var hncarry = 0;\r\n    for (var k = 0; k < out.length - 1; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = hncarry;\r\n      hncarry = 0;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = k - j;\r\n        var a = self.words[i] | 0;\r\n        var b = num.words[j] | 0;\r\n        var r = a * b;\r\n\r\n        var lo = r & 0x3ffffff;\r\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\r\n        lo = (lo + rword) | 0;\r\n        rword = lo & 0x3ffffff;\r\n        ncarry = (ncarry + (lo >>> 26)) | 0;\r\n\r\n        hncarry += ncarry >>> 26;\r\n        ncarry &= 0x3ffffff;\r\n      }\r\n      out.words[k] = rword;\r\n      carry = ncarry;\r\n      ncarry = hncarry;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out.strip();\r\n  }\r\n\r\n  function jumboMulTo (self, num, out) {\r\n    var fftm = new FFTM();\r\n    return fftm.mulp(self, num, out);\r\n  }\r\n\r\n  BN.prototype.mulTo = function mulTo (num, out) {\r\n    var res;\r\n    var len = this.length + num.length;\r\n    if (this.length === 10 && num.length === 10) {\r\n      res = comb10MulTo(this, num, out);\r\n    } else if (len < 63) {\r\n      res = smallMulTo(this, num, out);\r\n    } else if (len < 1024) {\r\n      res = bigMulTo(this, num, out);\r\n    } else {\r\n      res = jumboMulTo(this, num, out);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Cooley-Tukey algorithm for FFT\r\n  // slightly revisited to rely on looping instead of recursion\r\n\r\n  function FFTM (x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  FFTM.prototype.makeRBT = function makeRBT (N) {\r\n    var t = new Array(N);\r\n    var l = BN.prototype._countBits(N) - 1;\r\n    for (var i = 0; i < N; i++) {\r\n      t[i] = this.revBin(i, l, N);\r\n    }\r\n\r\n    return t;\r\n  };\r\n\r\n  // Returns binary-reversed representation of `x`\r\n  FFTM.prototype.revBin = function revBin (x, l, N) {\r\n    if (x === 0 || x === N - 1) return x;\r\n\r\n    var rb = 0;\r\n    for (var i = 0; i < l; i++) {\r\n      rb |= (x & 1) << (l - i - 1);\r\n      x >>= 1;\r\n    }\r\n\r\n    return rb;\r\n  };\r\n\r\n  // Performs \"tweedling\" phase, therefore 'emulating'\r\n  // behaviour of the recursive algorithm\r\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\r\n    for (var i = 0; i < N; i++) {\r\n      rtws[i] = rws[rbt[i]];\r\n      itws[i] = iws[rbt[i]];\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\r\n    this.permute(rbt, rws, iws, rtws, itws, N);\r\n\r\n    for (var s = 1; s < N; s <<= 1) {\r\n      var l = s << 1;\r\n\r\n      var rtwdf = Math.cos(2 * Math.PI / l);\r\n      var itwdf = Math.sin(2 * Math.PI / l);\r\n\r\n      for (var p = 0; p < N; p += l) {\r\n        var rtwdf_ = rtwdf;\r\n        var itwdf_ = itwdf;\r\n\r\n        for (var j = 0; j < s; j++) {\r\n          var re = rtws[p + j];\r\n          var ie = itws[p + j];\r\n\r\n          var ro = rtws[p + j + s];\r\n          var io = itws[p + j + s];\r\n\r\n          var rx = rtwdf_ * ro - itwdf_ * io;\r\n\r\n          io = rtwdf_ * io + itwdf_ * ro;\r\n          ro = rx;\r\n\r\n          rtws[p + j] = re + ro;\r\n          itws[p + j] = ie + io;\r\n\r\n          rtws[p + j + s] = re - ro;\r\n          itws[p + j + s] = ie - io;\r\n\r\n          /* jshint maxdepth : false */\r\n          if (j !== l) {\r\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\r\n\r\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\r\n            rtwdf_ = rx;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\r\n    var N = Math.max(m, n) | 1;\r\n    var odd = N & 1;\r\n    var i = 0;\r\n    for (N = N / 2 | 0; N; N = N >>> 1) {\r\n      i++;\r\n    }\r\n\r\n    return 1 << i + 1 + odd;\r\n  };\r\n\r\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\r\n    if (N <= 1) return;\r\n\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var t = rws[i];\r\n\r\n      rws[i] = rws[N - i - 1];\r\n      rws[N - i - 1] = t;\r\n\r\n      t = iws[i];\r\n\r\n      iws[i] = -iws[N - i - 1];\r\n      iws[N - i - 1] = -t;\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\r\n        Math.round(ws[2 * i] / N) +\r\n        carry;\r\n\r\n      ws[i] = w & 0x3ffffff;\r\n\r\n      if (w < 0x4000000) {\r\n        carry = 0;\r\n      } else {\r\n        carry = w / 0x4000000 | 0;\r\n      }\r\n    }\r\n\r\n    return ws;\r\n  };\r\n\r\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < len; i++) {\r\n      carry = carry + (ws[i] | 0);\r\n\r\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\r\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\r\n    }\r\n\r\n    // Pad with zeroes\r\n    for (i = 2 * len; i < N; ++i) {\r\n      rws[i] = 0;\r\n    }\r\n\r\n    assert(carry === 0);\r\n    assert((carry & ~0x1fff) === 0);\r\n  };\r\n\r\n  FFTM.prototype.stub = function stub (N) {\r\n    var ph = new Array(N);\r\n    for (var i = 0; i < N; i++) {\r\n      ph[i] = 0;\r\n    }\r\n\r\n    return ph;\r\n  };\r\n\r\n  FFTM.prototype.mulp = function mulp (x, y, out) {\r\n    var N = 2 * this.guessLen13b(x.length, y.length);\r\n\r\n    var rbt = this.makeRBT(N);\r\n\r\n    var _ = this.stub(N);\r\n\r\n    var rws = new Array(N);\r\n    var rwst = new Array(N);\r\n    var iwst = new Array(N);\r\n\r\n    var nrws = new Array(N);\r\n    var nrwst = new Array(N);\r\n    var niwst = new Array(N);\r\n\r\n    var rmws = out.words;\r\n    rmws.length = N;\r\n\r\n    this.convert13b(x.words, x.length, rws, N);\r\n    this.convert13b(y.words, y.length, nrws, N);\r\n\r\n    this.transform(rws, _, rwst, iwst, N, rbt);\r\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\r\n\r\n    for (var i = 0; i < N; i++) {\r\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\r\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\r\n      rwst[i] = rx;\r\n    }\r\n\r\n    this.conjugate(rwst, iwst, N);\r\n    this.transform(rwst, iwst, rmws, _, N, rbt);\r\n    this.conjugate(rmws, _, N);\r\n    this.normalize13b(rmws, N);\r\n\r\n    out.negative = x.negative ^ y.negative;\r\n    out.length = x.length + y.length;\r\n    return out.strip();\r\n  };\r\n\r\n  // Multiply `this` by `num`\r\n  BN.prototype.mul = function mul (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return this.mulTo(num, out);\r\n  };\r\n\r\n  // Multiply employing FFT\r\n  BN.prototype.mulf = function mulf (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return jumboMulTo(this, num, out);\r\n  };\r\n\r\n  // In-place Multiplication\r\n  BN.prototype.imul = function imul (num) {\r\n    return this.clone().mulTo(num, this);\r\n  };\r\n\r\n  BN.prototype.imuln = function imuln (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n\r\n    // Carry\r\n    var carry = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var w = (this.words[i] | 0) * num;\r\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\r\n      carry >>= 26;\r\n      carry += (w / 0x4000000) | 0;\r\n      // NOTE: lo is 27bit maximum\r\n      carry += lo >>> 26;\r\n      this.words[i] = lo & 0x3ffffff;\r\n    }\r\n\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.muln = function muln (num) {\r\n    return this.clone().imuln(num);\r\n  };\r\n\r\n  // `this` * `this`\r\n  BN.prototype.sqr = function sqr () {\r\n    return this.mul(this);\r\n  };\r\n\r\n  // `this` * `this` in-place\r\n  BN.prototype.isqr = function isqr () {\r\n    return this.imul(this.clone());\r\n  };\r\n\r\n  // Math.pow(`this`, `num`)\r\n  BN.prototype.pow = function pow (num) {\r\n    var w = toBitArray(num);\r\n    if (w.length === 0) return new BN(1);\r\n\r\n    // Skip leading zeroes\r\n    var res = this;\r\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\r\n      if (w[i] !== 0) break;\r\n    }\r\n\r\n    if (++i < w.length) {\r\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\r\n        if (w[i] === 0) continue;\r\n\r\n        res = res.mul(q);\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Shift-left in-place\r\n  BN.prototype.iushln = function iushln (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\r\n    var i;\r\n\r\n    if (r !== 0) {\r\n      var carry = 0;\r\n\r\n      for (i = 0; i < this.length; i++) {\r\n        var newCarry = this.words[i] & carryMask;\r\n        var c = ((this.words[i] | 0) - newCarry) << r;\r\n        this.words[i] = c | carry;\r\n        carry = newCarry >>> (26 - r);\r\n      }\r\n\r\n      if (carry) {\r\n        this.words[i] = carry;\r\n        this.length++;\r\n      }\r\n    }\r\n\r\n    if (s !== 0) {\r\n      for (i = this.length - 1; i >= 0; i--) {\r\n        this.words[i + s] = this.words[i];\r\n      }\r\n\r\n      for (i = 0; i < s; i++) {\r\n        this.words[i] = 0;\r\n      }\r\n\r\n      this.length += s;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ishln = function ishln (bits) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushln(bits);\r\n  };\r\n\r\n  // Shift-right in-place\r\n  // NOTE: `hint` is a lowest bit before trailing zeroes\r\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\r\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var h;\r\n    if (hint) {\r\n      h = (hint - (hint % 26)) / 26;\r\n    } else {\r\n      h = 0;\r\n    }\r\n\r\n    var r = bits % 26;\r\n    var s = Math.min((bits - r) / 26, this.length);\r\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n    var maskedWords = extended;\r\n\r\n    h -= s;\r\n    h = Math.max(0, h);\r\n\r\n    // Extended mode, copy masked part\r\n    if (maskedWords) {\r\n      for (var i = 0; i < s; i++) {\r\n        maskedWords.words[i] = this.words[i];\r\n      }\r\n      maskedWords.length = s;\r\n    }\r\n\r\n    if (s === 0) {\r\n      // No-op, we should not move anything at all\r\n    } else if (this.length > s) {\r\n      this.length -= s;\r\n      for (i = 0; i < this.length; i++) {\r\n        this.words[i] = this.words[i + s];\r\n      }\r\n    } else {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\r\n      var word = this.words[i] | 0;\r\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\r\n      carry = word & mask;\r\n    }\r\n\r\n    // Push carried bits as a mask\r\n    if (maskedWords && carry !== 0) {\r\n      maskedWords.words[maskedWords.length++] = carry;\r\n    }\r\n\r\n    if (this.length === 0) {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushrn(bits, hint, extended);\r\n  };\r\n\r\n  // Shift-left\r\n  BN.prototype.shln = function shln (bits) {\r\n    return this.clone().ishln(bits);\r\n  };\r\n\r\n  BN.prototype.ushln = function ushln (bits) {\r\n    return this.clone().iushln(bits);\r\n  };\r\n\r\n  // Shift-right\r\n  BN.prototype.shrn = function shrn (bits) {\r\n    return this.clone().ishrn(bits);\r\n  };\r\n\r\n  BN.prototype.ushrn = function ushrn (bits) {\r\n    return this.clone().iushrn(bits);\r\n  };\r\n\r\n  // Test if n bit is set\r\n  BN.prototype.testn = function testn (bit) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) return false;\r\n\r\n    // Check bit and return\r\n    var w = this.words[s];\r\n\r\n    return !!(w & q);\r\n  };\r\n\r\n  // Return only lowers bits of number (in-place)\r\n  BN.prototype.imaskn = function imaskn (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n\r\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\r\n\r\n    if (this.length <= s) {\r\n      return this;\r\n    }\r\n\r\n    if (r !== 0) {\r\n      s++;\r\n    }\r\n    this.length = Math.min(s, this.length);\r\n\r\n    if (r !== 0) {\r\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n      this.words[this.length - 1] &= mask;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Return only lowers bits of number\r\n  BN.prototype.maskn = function maskn (bits) {\r\n    return this.clone().imaskn(bits);\r\n  };\r\n\r\n  // Add plain number `num` to `this`\r\n  BN.prototype.iaddn = function iaddn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.isubn(-num);\r\n\r\n    // Possible sign change\r\n    if (this.negative !== 0) {\r\n      if (this.length === 1 && (this.words[0] | 0) < num) {\r\n        this.words[0] = num - (this.words[0] | 0);\r\n        this.negative = 0;\r\n        return this;\r\n      }\r\n\r\n      this.negative = 0;\r\n      this.isubn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    // Add without checks\r\n    return this._iaddn(num);\r\n  };\r\n\r\n  BN.prototype._iaddn = function _iaddn (num) {\r\n    this.words[0] += num;\r\n\r\n    // Carry\r\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\r\n      this.words[i] -= 0x4000000;\r\n      if (i === this.length - 1) {\r\n        this.words[i + 1] = 1;\r\n      } else {\r\n        this.words[i + 1]++;\r\n      }\r\n    }\r\n    this.length = Math.max(this.length, i + 1);\r\n\r\n    return this;\r\n  };\r\n\r\n  // Subtract plain number `num` from `this`\r\n  BN.prototype.isubn = function isubn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.iaddn(-num);\r\n\r\n    if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iaddn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    this.words[0] -= num;\r\n\r\n    if (this.length === 1 && this.words[0] < 0) {\r\n      this.words[0] = -this.words[0];\r\n      this.negative = 1;\r\n    } else {\r\n      // Carry\r\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\r\n        this.words[i] += 0x4000000;\r\n        this.words[i + 1] -= 1;\r\n      }\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.addn = function addn (num) {\r\n    return this.clone().iaddn(num);\r\n  };\r\n\r\n  BN.prototype.subn = function subn (num) {\r\n    return this.clone().isubn(num);\r\n  };\r\n\r\n  BN.prototype.iabs = function iabs () {\r\n    this.negative = 0;\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.abs = function abs () {\r\n    return this.clone().iabs();\r\n  };\r\n\r\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\r\n    var len = num.length + shift;\r\n    var i;\r\n\r\n    this._expand(len);\r\n\r\n    var w;\r\n    var carry = 0;\r\n    for (i = 0; i < num.length; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      var right = (num.words[i] | 0) * mul;\r\n      w -= right & 0x3ffffff;\r\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n    for (; i < this.length - shift; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n\r\n    if (carry === 0) return this.strip();\r\n\r\n    // Subtraction overflow\r\n    assert(carry === -1);\r\n    carry = 0;\r\n    for (i = 0; i < this.length; i++) {\r\n      w = -(this.words[i] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i] = w & 0x3ffffff;\r\n    }\r\n    this.negative = 1;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\r\n    var shift = this.length - num.length;\r\n\r\n    var a = this.clone();\r\n    var b = num;\r\n\r\n    // Normalize\r\n    var bhi = b.words[b.length - 1] | 0;\r\n    var bhiBits = this._countBits(bhi);\r\n    shift = 26 - bhiBits;\r\n    if (shift !== 0) {\r\n      b = b.ushln(shift);\r\n      a.iushln(shift);\r\n      bhi = b.words[b.length - 1] | 0;\r\n    }\r\n\r\n    // Initialize quotient\r\n    var m = a.length - b.length;\r\n    var q;\r\n\r\n    if (mode !== 'mod') {\r\n      q = new BN(null);\r\n      q.length = m + 1;\r\n      q.words = new Array(q.length);\r\n      for (var i = 0; i < q.length; i++) {\r\n        q.words[i] = 0;\r\n      }\r\n    }\r\n\r\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\r\n    if (diff.negative === 0) {\r\n      a = diff;\r\n      if (q) {\r\n        q.words[m] = 1;\r\n      }\r\n    }\r\n\r\n    for (var j = m - 1; j >= 0; j--) {\r\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\r\n        (a.words[b.length + j - 1] | 0);\r\n\r\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\r\n      // (0x7ffffff)\r\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\r\n\r\n      a._ishlnsubmul(b, qj, j);\r\n      while (a.negative !== 0) {\r\n        qj--;\r\n        a.negative = 0;\r\n        a._ishlnsubmul(b, 1, j);\r\n        if (!a.isZero()) {\r\n          a.negative ^= 1;\r\n        }\r\n      }\r\n      if (q) {\r\n        q.words[j] = qj;\r\n      }\r\n    }\r\n    if (q) {\r\n      q.strip();\r\n    }\r\n    a.strip();\r\n\r\n    // Denormalize\r\n    if (mode !== 'div' && shift !== 0) {\r\n      a.iushrn(shift);\r\n    }\r\n\r\n    return {\r\n      div: q || null,\r\n      mod: a\r\n    };\r\n  };\r\n\r\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\r\n  //       to `div` to request div only, or be absent to\r\n  //       request both div & mod\r\n  //       2) `positive` is true if unsigned mod is requested\r\n  BN.prototype.divmod = function divmod (num, mode, positive) {\r\n    assert(!num.isZero());\r\n\r\n    if (this.isZero()) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: new BN(0)\r\n      };\r\n    }\r\n\r\n    var div, mod, res;\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      res = this.neg().divmod(num, mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.iadd(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    if (this.negative === 0 && num.negative !== 0) {\r\n      res = this.divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: res.mod\r\n      };\r\n    }\r\n\r\n    if ((this.negative & num.negative) !== 0) {\r\n      res = this.neg().divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.isub(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: res.div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    // Both numbers are positive at this point\r\n\r\n    // Strip both numbers to approximate shift value\r\n    if (num.length > this.length || this.cmp(num) < 0) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: this\r\n      };\r\n    }\r\n\r\n    // Very short reduction\r\n    if (num.length === 1) {\r\n      if (mode === 'div') {\r\n        return {\r\n          div: this.divn(num.words[0]),\r\n          mod: null\r\n        };\r\n      }\r\n\r\n      if (mode === 'mod') {\r\n        return {\r\n          div: null,\r\n          mod: new BN(this.modn(num.words[0]))\r\n        };\r\n      }\r\n\r\n      return {\r\n        div: this.divn(num.words[0]),\r\n        mod: new BN(this.modn(num.words[0]))\r\n      };\r\n    }\r\n\r\n    return this._wordDiv(num, mode);\r\n  };\r\n\r\n  // Find `this` / `num`\r\n  BN.prototype.div = function div (num) {\r\n    return this.divmod(num, 'div', false).div;\r\n  };\r\n\r\n  // Find `this` % `num`\r\n  BN.prototype.mod = function mod (num) {\r\n    return this.divmod(num, 'mod', false).mod;\r\n  };\r\n\r\n  BN.prototype.umod = function umod (num) {\r\n    return this.divmod(num, 'mod', true).mod;\r\n  };\r\n\r\n  // Find Round(`this` / `num`)\r\n  BN.prototype.divRound = function divRound (num) {\r\n    var dm = this.divmod(num);\r\n\r\n    // Fast case - exact division\r\n    if (dm.mod.isZero()) return dm.div;\r\n\r\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\r\n\r\n    var half = num.ushrn(1);\r\n    var r2 = num.andln(1);\r\n    var cmp = mod.cmp(half);\r\n\r\n    // Round down\r\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\r\n\r\n    // Round up\r\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\r\n  };\r\n\r\n  BN.prototype.modn = function modn (num) {\r\n    assert(num <= 0x3ffffff);\r\n    var p = (1 << 26) % num;\r\n\r\n    var acc = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      acc = (p * acc + (this.words[i] | 0)) % num;\r\n    }\r\n\r\n    return acc;\r\n  };\r\n\r\n  // In-place division by number\r\n  BN.prototype.idivn = function idivn (num) {\r\n    assert(num <= 0x3ffffff);\r\n\r\n    var carry = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var w = (this.words[i] | 0) + carry * 0x4000000;\r\n      this.words[i] = (w / num) | 0;\r\n      carry = w % num;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.divn = function divn (num) {\r\n    return this.clone().idivn(num);\r\n  };\r\n\r\n  BN.prototype.egcd = function egcd (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var x = this;\r\n    var y = p.clone();\r\n\r\n    if (x.negative !== 0) {\r\n      x = x.umod(p);\r\n    } else {\r\n      x = x.clone();\r\n    }\r\n\r\n    // A * x + B * y = x\r\n    var A = new BN(1);\r\n    var B = new BN(0);\r\n\r\n    // C * x + D * y = y\r\n    var C = new BN(0);\r\n    var D = new BN(1);\r\n\r\n    var g = 0;\r\n\r\n    while (x.isEven() && y.isEven()) {\r\n      x.iushrn(1);\r\n      y.iushrn(1);\r\n      ++g;\r\n    }\r\n\r\n    var yp = y.clone();\r\n    var xp = x.clone();\r\n\r\n    while (!x.isZero()) {\r\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        x.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (A.isOdd() || B.isOdd()) {\r\n            A.iadd(yp);\r\n            B.isub(xp);\r\n          }\r\n\r\n          A.iushrn(1);\r\n          B.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        y.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (C.isOdd() || D.isOdd()) {\r\n            C.iadd(yp);\r\n            D.isub(xp);\r\n          }\r\n\r\n          C.iushrn(1);\r\n          D.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (x.cmp(y) >= 0) {\r\n        x.isub(y);\r\n        A.isub(C);\r\n        B.isub(D);\r\n      } else {\r\n        y.isub(x);\r\n        C.isub(A);\r\n        D.isub(B);\r\n      }\r\n    }\r\n\r\n    return {\r\n      a: C,\r\n      b: D,\r\n      gcd: y.iushln(g)\r\n    };\r\n  };\r\n\r\n  // This is reduced incarnation of the binary EEA\r\n  // above, designated to invert members of the\r\n  // _prime_ fields F(p) at a maximal speed\r\n  BN.prototype._invmp = function _invmp (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var a = this;\r\n    var b = p.clone();\r\n\r\n    if (a.negative !== 0) {\r\n      a = a.umod(p);\r\n    } else {\r\n      a = a.clone();\r\n    }\r\n\r\n    var x1 = new BN(1);\r\n    var x2 = new BN(0);\r\n\r\n    var delta = b.clone();\r\n\r\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\r\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        a.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (x1.isOdd()) {\r\n            x1.iadd(delta);\r\n          }\r\n\r\n          x1.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        b.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (x2.isOdd()) {\r\n            x2.iadd(delta);\r\n          }\r\n\r\n          x2.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (a.cmp(b) >= 0) {\r\n        a.isub(b);\r\n        x1.isub(x2);\r\n      } else {\r\n        b.isub(a);\r\n        x2.isub(x1);\r\n      }\r\n    }\r\n\r\n    var res;\r\n    if (a.cmpn(1) === 0) {\r\n      res = x1;\r\n    } else {\r\n      res = x2;\r\n    }\r\n\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(p);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gcd = function gcd (num) {\r\n    if (this.isZero()) return num.abs();\r\n    if (num.isZero()) return this.abs();\r\n\r\n    var a = this.clone();\r\n    var b = num.clone();\r\n    a.negative = 0;\r\n    b.negative = 0;\r\n\r\n    // Remove common factor of two\r\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\r\n      a.iushrn(1);\r\n      b.iushrn(1);\r\n    }\r\n\r\n    do {\r\n      while (a.isEven()) {\r\n        a.iushrn(1);\r\n      }\r\n      while (b.isEven()) {\r\n        b.iushrn(1);\r\n      }\r\n\r\n      var r = a.cmp(b);\r\n      if (r < 0) {\r\n        // Swap `a` and `b` to make `a` always bigger than `b`\r\n        var t = a;\r\n        a = b;\r\n        b = t;\r\n      } else if (r === 0 || b.cmpn(1) === 0) {\r\n        break;\r\n      }\r\n\r\n      a.isub(b);\r\n    } while (true);\r\n\r\n    return b.iushln(shift);\r\n  };\r\n\r\n  // Invert number in the field F(num)\r\n  BN.prototype.invm = function invm (num) {\r\n    return this.egcd(num).a.umod(num);\r\n  };\r\n\r\n  BN.prototype.isEven = function isEven () {\r\n    return (this.words[0] & 1) === 0;\r\n  };\r\n\r\n  BN.prototype.isOdd = function isOdd () {\r\n    return (this.words[0] & 1) === 1;\r\n  };\r\n\r\n  // And first word and num\r\n  BN.prototype.andln = function andln (num) {\r\n    return this.words[0] & num;\r\n  };\r\n\r\n  // Increment at the bit position in-line\r\n  BN.prototype.bincn = function bincn (bit) {\r\n    assert(typeof bit === 'number');\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) {\r\n      this._expand(s + 1);\r\n      this.words[s] |= q;\r\n      return this;\r\n    }\r\n\r\n    // Add bit and propagate, if needed\r\n    var carry = q;\r\n    for (var i = s; carry !== 0 && i < this.length; i++) {\r\n      var w = this.words[i] | 0;\r\n      w += carry;\r\n      carry = w >>> 26;\r\n      w &= 0x3ffffff;\r\n      this.words[i] = w;\r\n    }\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.isZero = function isZero () {\r\n    return this.length === 1 && this.words[0] === 0;\r\n  };\r\n\r\n  BN.prototype.cmpn = function cmpn (num) {\r\n    var negative = num < 0;\r\n\r\n    if (this.negative !== 0 && !negative) return -1;\r\n    if (this.negative === 0 && negative) return 1;\r\n\r\n    this.strip();\r\n\r\n    var res;\r\n    if (this.length > 1) {\r\n      res = 1;\r\n    } else {\r\n      if (negative) {\r\n        num = -num;\r\n      }\r\n\r\n      assert(num <= 0x3ffffff, 'Number is too big');\r\n\r\n      var w = this.words[0] | 0;\r\n      res = w === num ? 0 : w < num ? -1 : 1;\r\n    }\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Compare two numbers and return:\r\n  // 1 - if `this` > `num`\r\n  // 0 - if `this` == `num`\r\n  // -1 - if `this` < `num`\r\n  BN.prototype.cmp = function cmp (num) {\r\n    if (this.negative !== 0 && num.negative === 0) return -1;\r\n    if (this.negative === 0 && num.negative !== 0) return 1;\r\n\r\n    var res = this.ucmp(num);\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Unsigned comparison\r\n  BN.prototype.ucmp = function ucmp (num) {\r\n    // At this point both numbers have the same sign\r\n    if (this.length > num.length) return 1;\r\n    if (this.length < num.length) return -1;\r\n\r\n    var res = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var a = this.words[i] | 0;\r\n      var b = num.words[i] | 0;\r\n\r\n      if (a === b) continue;\r\n      if (a < b) {\r\n        res = -1;\r\n      } else if (a > b) {\r\n        res = 1;\r\n      }\r\n      break;\r\n    }\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gtn = function gtn (num) {\r\n    return this.cmpn(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gt = function gt (num) {\r\n    return this.cmp(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gten = function gten (num) {\r\n    return this.cmpn(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.gte = function gte (num) {\r\n    return this.cmp(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.ltn = function ltn (num) {\r\n    return this.cmpn(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lt = function lt (num) {\r\n    return this.cmp(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lten = function lten (num) {\r\n    return this.cmpn(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.lte = function lte (num) {\r\n    return this.cmp(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.eqn = function eqn (num) {\r\n    return this.cmpn(num) === 0;\r\n  };\r\n\r\n  BN.prototype.eq = function eq (num) {\r\n    return this.cmp(num) === 0;\r\n  };\r\n\r\n  //\r\n  // A reduce context, could be using montgomery or something better, depending\r\n  // on the `m` itself.\r\n  //\r\n  BN.red = function red (num) {\r\n    return new Red(num);\r\n  };\r\n\r\n  BN.prototype.toRed = function toRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    assert(this.negative === 0, 'red works only with positives');\r\n    return ctx.convertTo(this)._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.fromRed = function fromRed () {\r\n    assert(this.red, 'fromRed works only with numbers in reduction context');\r\n    return this.red.convertFrom(this);\r\n  };\r\n\r\n  BN.prototype._forceRed = function _forceRed (ctx) {\r\n    this.red = ctx;\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.forceRed = function forceRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    return this._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.redAdd = function redAdd (num) {\r\n    assert(this.red, 'redAdd works only with red numbers');\r\n    return this.red.add(this, num);\r\n  };\r\n\r\n  BN.prototype.redIAdd = function redIAdd (num) {\r\n    assert(this.red, 'redIAdd works only with red numbers');\r\n    return this.red.iadd(this, num);\r\n  };\r\n\r\n  BN.prototype.redSub = function redSub (num) {\r\n    assert(this.red, 'redSub works only with red numbers');\r\n    return this.red.sub(this, num);\r\n  };\r\n\r\n  BN.prototype.redISub = function redISub (num) {\r\n    assert(this.red, 'redISub works only with red numbers');\r\n    return this.red.isub(this, num);\r\n  };\r\n\r\n  BN.prototype.redShl = function redShl (num) {\r\n    assert(this.red, 'redShl works only with red numbers');\r\n    return this.red.shl(this, num);\r\n  };\r\n\r\n  BN.prototype.redMul = function redMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.mul(this, num);\r\n  };\r\n\r\n  BN.prototype.redIMul = function redIMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.imul(this, num);\r\n  };\r\n\r\n  BN.prototype.redSqr = function redSqr () {\r\n    assert(this.red, 'redSqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqr(this);\r\n  };\r\n\r\n  BN.prototype.redISqr = function redISqr () {\r\n    assert(this.red, 'redISqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.isqr(this);\r\n  };\r\n\r\n  // Square root over p\r\n  BN.prototype.redSqrt = function redSqrt () {\r\n    assert(this.red, 'redSqrt works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqrt(this);\r\n  };\r\n\r\n  BN.prototype.redInvm = function redInvm () {\r\n    assert(this.red, 'redInvm works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.invm(this);\r\n  };\r\n\r\n  // Return negative clone of `this` % `red modulo`\r\n  BN.prototype.redNeg = function redNeg () {\r\n    assert(this.red, 'redNeg works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.neg(this);\r\n  };\r\n\r\n  BN.prototype.redPow = function redPow (num) {\r\n    assert(this.red && !num.red, 'redPow(normalNum)');\r\n    this.red._verify1(this);\r\n    return this.red.pow(this, num);\r\n  };\r\n\r\n  // Prime numbers with efficient reduction\r\n  var primes = {\r\n    k256: null,\r\n    p224: null,\r\n    p192: null,\r\n    p25519: null\r\n  };\r\n\r\n  // Pseudo-Mersenne prime\r\n  function MPrime (name, p) {\r\n    // P = 2 ^ N - K\r\n    this.name = name;\r\n    this.p = new BN(p, 16);\r\n    this.n = this.p.bitLength();\r\n    this.k = new BN(1).iushln(this.n).isub(this.p);\r\n\r\n    this.tmp = this._tmp();\r\n  }\r\n\r\n  MPrime.prototype._tmp = function _tmp () {\r\n    var tmp = new BN(null);\r\n    tmp.words = new Array(Math.ceil(this.n / 13));\r\n    return tmp;\r\n  };\r\n\r\n  MPrime.prototype.ireduce = function ireduce (num) {\r\n    // Assumes that `num` is less than `P^2`\r\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\r\n    var r = num;\r\n    var rlen;\r\n\r\n    do {\r\n      this.split(r, this.tmp);\r\n      r = this.imulK(r);\r\n      r = r.iadd(this.tmp);\r\n      rlen = r.bitLength();\r\n    } while (rlen > this.n);\r\n\r\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\r\n    if (cmp === 0) {\r\n      r.words[0] = 0;\r\n      r.length = 1;\r\n    } else if (cmp > 0) {\r\n      r.isub(this.p);\r\n    } else {\r\n      if (r.strip !== undefined) {\r\n        // r is BN v4 instance\r\n        r.strip();\r\n      } else {\r\n        // r is BN v5 instance\r\n        r._strip();\r\n      }\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  MPrime.prototype.split = function split (input, out) {\r\n    input.iushrn(this.n, 0, out);\r\n  };\r\n\r\n  MPrime.prototype.imulK = function imulK (num) {\r\n    return num.imul(this.k);\r\n  };\r\n\r\n  function K256 () {\r\n    MPrime.call(\r\n      this,\r\n      'k256',\r\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\r\n  }\r\n  inherits(K256, MPrime);\r\n\r\n  K256.prototype.split = function split (input, output) {\r\n    // 256 = 9 * 26 + 22\r\n    var mask = 0x3fffff;\r\n\r\n    var outLen = Math.min(input.length, 9);\r\n    for (var i = 0; i < outLen; i++) {\r\n      output.words[i] = input.words[i];\r\n    }\r\n    output.length = outLen;\r\n\r\n    if (input.length <= 9) {\r\n      input.words[0] = 0;\r\n      input.length = 1;\r\n      return;\r\n    }\r\n\r\n    // Shift by 9 limbs\r\n    var prev = input.words[9];\r\n    output.words[output.length++] = prev & mask;\r\n\r\n    for (i = 10; i < input.length; i++) {\r\n      var next = input.words[i] | 0;\r\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\r\n      prev = next;\r\n    }\r\n    prev >>>= 22;\r\n    input.words[i - 10] = prev;\r\n    if (prev === 0 && input.length > 10) {\r\n      input.length -= 10;\r\n    } else {\r\n      input.length -= 9;\r\n    }\r\n  };\r\n\r\n  K256.prototype.imulK = function imulK (num) {\r\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\r\n    num.words[num.length] = 0;\r\n    num.words[num.length + 1] = 0;\r\n    num.length += 2;\r\n\r\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\r\n    var lo = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var w = num.words[i] | 0;\r\n      lo += w * 0x3d1;\r\n      num.words[i] = lo & 0x3ffffff;\r\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\r\n    }\r\n\r\n    // Fast length reduction\r\n    if (num.words[num.length - 1] === 0) {\r\n      num.length--;\r\n      if (num.words[num.length - 1] === 0) {\r\n        num.length--;\r\n      }\r\n    }\r\n    return num;\r\n  };\r\n\r\n  function P224 () {\r\n    MPrime.call(\r\n      this,\r\n      'p224',\r\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\r\n  }\r\n  inherits(P224, MPrime);\r\n\r\n  function P192 () {\r\n    MPrime.call(\r\n      this,\r\n      'p192',\r\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\r\n  }\r\n  inherits(P192, MPrime);\r\n\r\n  function P25519 () {\r\n    // 2 ^ 255 - 19\r\n    MPrime.call(\r\n      this,\r\n      '25519',\r\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\r\n  }\r\n  inherits(P25519, MPrime);\r\n\r\n  P25519.prototype.imulK = function imulK (num) {\r\n    // K = 0x13\r\n    var carry = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var hi = (num.words[i] | 0) * 0x13 + carry;\r\n      var lo = hi & 0x3ffffff;\r\n      hi >>>= 26;\r\n\r\n      num.words[i] = lo;\r\n      carry = hi;\r\n    }\r\n    if (carry !== 0) {\r\n      num.words[num.length++] = carry;\r\n    }\r\n    return num;\r\n  };\r\n\r\n  // Exported mostly for testing purposes, use plain name instead\r\n  BN._prime = function prime (name) {\r\n    // Cached version of prime\r\n    if (primes[name]) return primes[name];\r\n\r\n    var prime;\r\n    if (name === 'k256') {\r\n      prime = new K256();\r\n    } else if (name === 'p224') {\r\n      prime = new P224();\r\n    } else if (name === 'p192') {\r\n      prime = new P192();\r\n    } else if (name === 'p25519') {\r\n      prime = new P25519();\r\n    } else {\r\n      throw new Error('Unknown prime ' + name);\r\n    }\r\n    primes[name] = prime;\r\n\r\n    return prime;\r\n  };\r\n\r\n  //\r\n  // Base reduction engine\r\n  //\r\n  function Red (m) {\r\n    if (typeof m === 'string') {\r\n      var prime = BN._prime(m);\r\n      this.m = prime.p;\r\n      this.prime = prime;\r\n    } else {\r\n      assert(m.gtn(1), 'modulus must be greater than 1');\r\n      this.m = m;\r\n      this.prime = null;\r\n    }\r\n  }\r\n\r\n  Red.prototype._verify1 = function _verify1 (a) {\r\n    assert(a.negative === 0, 'red works only with positives');\r\n    assert(a.red, 'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype._verify2 = function _verify2 (a, b) {\r\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\r\n    assert(a.red && a.red === b.red,\r\n      'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype.imod = function imod (a) {\r\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\r\n    return a.umod(this.m)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.neg = function neg (a) {\r\n    if (a.isZero()) {\r\n      return a.clone();\r\n    }\r\n\r\n    return this.m.sub(a)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.add = function add (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.add(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.iadd = function iadd (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.iadd(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.sub = function sub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.sub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.isub = function isub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.isub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.shl = function shl (a, num) {\r\n    this._verify1(a);\r\n    return this.imod(a.ushln(num));\r\n  };\r\n\r\n  Red.prototype.imul = function imul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.imul(b));\r\n  };\r\n\r\n  Red.prototype.mul = function mul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.mul(b));\r\n  };\r\n\r\n  Red.prototype.isqr = function isqr (a) {\r\n    return this.imul(a, a.clone());\r\n  };\r\n\r\n  Red.prototype.sqr = function sqr (a) {\r\n    return this.mul(a, a);\r\n  };\r\n\r\n  Red.prototype.sqrt = function sqrt (a) {\r\n    if (a.isZero()) return a.clone();\r\n\r\n    var mod3 = this.m.andln(3);\r\n    assert(mod3 % 2 === 1);\r\n\r\n    // Fast case\r\n    if (mod3 === 3) {\r\n      var pow = this.m.add(new BN(1)).iushrn(2);\r\n      return this.pow(a, pow);\r\n    }\r\n\r\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\r\n    //\r\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\r\n    var q = this.m.subn(1);\r\n    var s = 0;\r\n    while (!q.isZero() && q.andln(1) === 0) {\r\n      s++;\r\n      q.iushrn(1);\r\n    }\r\n    assert(!q.isZero());\r\n\r\n    var one = new BN(1).toRed(this);\r\n    var nOne = one.redNeg();\r\n\r\n    // Find quadratic non-residue\r\n    // NOTE: Max is such because of generalized Riemann hypothesis.\r\n    var lpow = this.m.subn(1).iushrn(1);\r\n    var z = this.m.bitLength();\r\n    z = new BN(2 * z * z).toRed(this);\r\n\r\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\r\n      z.redIAdd(nOne);\r\n    }\r\n\r\n    var c = this.pow(z, q);\r\n    var r = this.pow(a, q.addn(1).iushrn(1));\r\n    var t = this.pow(a, q);\r\n    var m = s;\r\n    while (t.cmp(one) !== 0) {\r\n      var tmp = t;\r\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\r\n        tmp = tmp.redSqr();\r\n      }\r\n      assert(i < m);\r\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\r\n\r\n      r = r.redMul(b);\r\n      c = b.redSqr();\r\n      t = t.redMul(c);\r\n      m = i;\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  Red.prototype.invm = function invm (a) {\r\n    var inv = a._invmp(this.m);\r\n    if (inv.negative !== 0) {\r\n      inv.negative = 0;\r\n      return this.imod(inv).redNeg();\r\n    } else {\r\n      return this.imod(inv);\r\n    }\r\n  };\r\n\r\n  Red.prototype.pow = function pow (a, num) {\r\n    if (num.isZero()) return new BN(1).toRed(this);\r\n    if (num.cmpn(1) === 0) return a.clone();\r\n\r\n    var windowSize = 4;\r\n    var wnd = new Array(1 << windowSize);\r\n    wnd[0] = new BN(1).toRed(this);\r\n    wnd[1] = a;\r\n    for (var i = 2; i < wnd.length; i++) {\r\n      wnd[i] = this.mul(wnd[i - 1], a);\r\n    }\r\n\r\n    var res = wnd[0];\r\n    var current = 0;\r\n    var currentLen = 0;\r\n    var start = num.bitLength() % 26;\r\n    if (start === 0) {\r\n      start = 26;\r\n    }\r\n\r\n    for (i = num.length - 1; i >= 0; i--) {\r\n      var word = num.words[i];\r\n      for (var j = start - 1; j >= 0; j--) {\r\n        var bit = (word >> j) & 1;\r\n        if (res !== wnd[0]) {\r\n          res = this.sqr(res);\r\n        }\r\n\r\n        if (bit === 0 && current === 0) {\r\n          currentLen = 0;\r\n          continue;\r\n        }\r\n\r\n        current <<= 1;\r\n        current |= bit;\r\n        currentLen++;\r\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\r\n\r\n        res = this.mul(res, wnd[current]);\r\n        currentLen = 0;\r\n        current = 0;\r\n      }\r\n      start = 26;\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.convertTo = function convertTo (num) {\r\n    var r = num.umod(this.m);\r\n\r\n    return r === num ? r.clone() : r;\r\n  };\r\n\r\n  Red.prototype.convertFrom = function convertFrom (num) {\r\n    var res = num.clone();\r\n    res.red = null;\r\n    return res;\r\n  };\r\n\r\n  //\r\n  // Montgomery method engine\r\n  //\r\n\r\n  BN.mont = function mont (num) {\r\n    return new Mont(num);\r\n  };\r\n\r\n  function Mont (m) {\r\n    Red.call(this, m);\r\n\r\n    this.shift = this.m.bitLength();\r\n    if (this.shift % 26 !== 0) {\r\n      this.shift += 26 - (this.shift % 26);\r\n    }\r\n\r\n    this.r = new BN(1).iushln(this.shift);\r\n    this.r2 = this.imod(this.r.sqr());\r\n    this.rinv = this.r._invmp(this.m);\r\n\r\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\r\n    this.minv = this.minv.umod(this.r);\r\n    this.minv = this.r.sub(this.minv);\r\n  }\r\n  inherits(Mont, Red);\r\n\r\n  Mont.prototype.convertTo = function convertTo (num) {\r\n    return this.imod(num.ushln(this.shift));\r\n  };\r\n\r\n  Mont.prototype.convertFrom = function convertFrom (num) {\r\n    var r = this.imod(num.mul(this.rinv));\r\n    r.red = null;\r\n    return r;\r\n  };\r\n\r\n  Mont.prototype.imul = function imul (a, b) {\r\n    if (a.isZero() || b.isZero()) {\r\n      a.words[0] = 0;\r\n      a.length = 1;\r\n      return a;\r\n    }\r\n\r\n    var t = a.imul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.mul = function mul (a, b) {\r\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\r\n\r\n    var t = a.mul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.invm = function invm (a) {\r\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\r\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\r\n    return res._forceRed(this);\r\n  };\r\n})( false || module, this);\r\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack://Game/./node_modules/asn1.js/node_modules/bn.js/lib/bn.js?");

/***/ }),

/***/ "./node_modules/base64-js/index.js":
/*!*****************************************!*\
  !*** ./node_modules/base64-js/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/base64-js/index.js?");

/***/ }),

/***/ "./node_modules/bn.js/lib/bn.js":
/*!**************************************!*\
  !*** ./node_modules/bn.js/lib/bn.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(module) {(function (module, exports) {\r\n  'use strict';\r\n\r\n  // Utils\r\n  function assert (val, msg) {\r\n    if (!val) throw new Error(msg || 'Assertion failed');\r\n  }\r\n\r\n  // Could use `inherits` module, but don't want to move from single file\r\n  // architecture yet.\r\n  function inherits (ctor, superCtor) {\r\n    ctor.super_ = superCtor;\r\n    var TempCtor = function () {};\r\n    TempCtor.prototype = superCtor.prototype;\r\n    ctor.prototype = new TempCtor();\r\n    ctor.prototype.constructor = ctor;\r\n  }\r\n\r\n  // BN\r\n\r\n  function BN (number, base, endian) {\r\n    if (BN.isBN(number)) {\r\n      return number;\r\n    }\r\n\r\n    this.negative = 0;\r\n    this.words = null;\r\n    this.length = 0;\r\n\r\n    // Reduction context\r\n    this.red = null;\r\n\r\n    if (number !== null) {\r\n      if (base === 'le' || base === 'be') {\r\n        endian = base;\r\n        base = 10;\r\n      }\r\n\r\n      this._init(number || 0, base || 10, endian || 'be');\r\n    }\r\n  }\r\n  if (typeof module === 'object') {\r\n    module.exports = BN;\r\n  } else {\r\n    exports.BN = BN;\r\n  }\r\n\r\n  BN.BN = BN;\r\n  BN.wordSize = 26;\r\n\r\n  var Buffer;\r\n  try {\r\n    Buffer = __webpack_require__(/*! buffer */ 12).Buffer;\r\n  } catch (e) {\r\n  }\r\n\r\n  BN.isBN = function isBN (num) {\r\n    if (num instanceof BN) {\r\n      return true;\r\n    }\r\n\r\n    return num !== null && typeof num === 'object' &&\r\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\r\n  };\r\n\r\n  BN.max = function max (left, right) {\r\n    if (left.cmp(right) > 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.min = function min (left, right) {\r\n    if (left.cmp(right) < 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.prototype._init = function init (number, base, endian) {\r\n    if (typeof number === 'number') {\r\n      return this._initNumber(number, base, endian);\r\n    }\r\n\r\n    if (typeof number === 'object') {\r\n      return this._initArray(number, base, endian);\r\n    }\r\n\r\n    if (base === 'hex') {\r\n      base = 16;\r\n    }\r\n    assert(base === (base | 0) && base >= 2 && base <= 36);\r\n\r\n    number = number.toString().replace(/\\s+/g, '');\r\n    var start = 0;\r\n    if (number[0] === '-') {\r\n      start++;\r\n    }\r\n\r\n    if (base === 16) {\r\n      this._parseHex(number, start);\r\n    } else {\r\n      this._parseBase(number, base, start);\r\n    }\r\n\r\n    if (number[0] === '-') {\r\n      this.negative = 1;\r\n    }\r\n\r\n    this._strip();\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\r\n    if (number < 0) {\r\n      this.negative = 1;\r\n      number = -number;\r\n    }\r\n    if (number < 0x4000000) {\r\n      this.words = [number & 0x3ffffff];\r\n      this.length = 1;\r\n    } else if (number < 0x10000000000000) {\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff\r\n      ];\r\n      this.length = 2;\r\n    } else {\r\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff,\r\n        1\r\n      ];\r\n      this.length = 3;\r\n    }\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    // Reverse the bytes\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initArray = function _initArray (number, base, endian) {\r\n    // Perhaps a Uint8Array\r\n    assert(typeof number.length === 'number');\r\n    if (number.length <= 0) {\r\n      this.words = [0];\r\n      this.length = 1;\r\n      return this;\r\n    }\r\n\r\n    this.length = Math.ceil(number.length / 3);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    var off = 0;\r\n    if (endian === 'be') {\r\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\r\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    } else if (endian === 'le') {\r\n      for (i = 0, j = 0; i < number.length; i += 3) {\r\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    }\r\n    return this._strip();\r\n  };\r\n\r\n  function parseHex (str, start, end) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    var z = 0;\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r <<= 4;\r\n\r\n      var b;\r\n\r\n      // 'a' - 'f'\r\n      if (c >= 49 && c <= 54) {\r\n        b = c - 49 + 0xa;\r\n\r\n      // 'A' - 'F'\r\n      } else if (c >= 17 && c <= 22) {\r\n        b = c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        b = c;\r\n      }\r\n\r\n      r |= b;\r\n      z |= b;\r\n    }\r\n\r\n    assert(!(z & 0xf0), 'Invalid character in ' + str);\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseHex = function _parseHex (number, start) {\r\n    // Create possibly bigger array to ensure that it fits the number\r\n    this.length = Math.ceil((number.length - start) / 6);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    // Scan 24-bit chunks and add them to the number\r\n    var off = 0;\r\n    for (i = number.length - 6, j = 0; i >= start; i -= 6) {\r\n      w = parseHex(number, i, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      // NOTE: `0x3fffff` is intentional here, 26bits max shift + 24bit hex limb\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n      off += 24;\r\n      if (off >= 26) {\r\n        off -= 26;\r\n        j++;\r\n      }\r\n    }\r\n    if (i + 6 !== start) {\r\n      w = parseHex(number, start, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n    }\r\n    this._strip();\r\n  };\r\n\r\n  function parseBase (str, start, end, mul) {\r\n    var r = 0;\r\n    var b = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r *= mul;\r\n\r\n      // 'a'\r\n      if (c >= 49) {\r\n        b = c - 49 + 0xa;\r\n\r\n      // 'A'\r\n      } else if (c >= 17) {\r\n        b = c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        b = c;\r\n      }\r\n      assert(c >= 0 && b < mul, 'Invalid character');\r\n      r += b;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\r\n    // Initialize as zero\r\n    this.words = [0];\r\n    this.length = 1;\r\n\r\n    // Find length of limb in base\r\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\r\n      limbLen++;\r\n    }\r\n    limbLen--;\r\n    limbPow = (limbPow / base) | 0;\r\n\r\n    var total = number.length - start;\r\n    var mod = total % limbLen;\r\n    var end = Math.min(total, total - mod) + start;\r\n\r\n    var word = 0;\r\n    for (var i = start; i < end; i += limbLen) {\r\n      word = parseBase(number, i, i + limbLen, base);\r\n\r\n      this.imuln(limbPow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n\r\n    if (mod !== 0) {\r\n      var pow = 1;\r\n      word = parseBase(number, i, number.length, base);\r\n\r\n      for (i = 0; i < mod; i++) {\r\n        pow *= base;\r\n      }\r\n\r\n      this.imuln(pow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n  };\r\n\r\n  BN.prototype.copy = function copy (dest) {\r\n    dest.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      dest.words[i] = this.words[i];\r\n    }\r\n    dest.length = this.length;\r\n    dest.negative = this.negative;\r\n    dest.red = this.red;\r\n  };\r\n\r\n  function move (dest, src) {\r\n    dest.words = src.words;\r\n    dest.length = src.length;\r\n    dest.negative = src.negative;\r\n    dest.red = src.red;\r\n  }\r\n\r\n  BN.prototype._move = function _move (dest) {\r\n    move(dest, this);\r\n  };\r\n\r\n  BN.prototype.clone = function clone () {\r\n    var r = new BN(null);\r\n    this.copy(r);\r\n    return r;\r\n  };\r\n\r\n  BN.prototype._expand = function _expand (size) {\r\n    while (this.length < size) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  // Remove leading `0` from `this`\r\n  BN.prototype._strip = function strip () {\r\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\r\n      this.length--;\r\n    }\r\n    return this._normSign();\r\n  };\r\n\r\n  BN.prototype._normSign = function _normSign () {\r\n    // -0 = 0\r\n    if (this.length === 1 && this.words[0] === 0) {\r\n      this.negative = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  // Check Symbol.for because not everywhere where Symbol defined\r\n  // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#Browser_compatibility\r\n  if (typeof Symbol !== 'undefined' && typeof Symbol.for === 'function') {\r\n    try {\r\n      BN.prototype[Symbol.for('nodejs.util.inspect.custom')] = inspect;\r\n    } catch (e) {\r\n      BN.prototype.inspect = inspect;\r\n    }\r\n  } else {\r\n    BN.prototype.inspect = inspect;\r\n  }\r\n\r\n  function inspect () {\r\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\r\n  }\r\n\r\n  /*\r\n\r\n  var zeros = [];\r\n  var groupSizes = [];\r\n  var groupBases = [];\r\n\r\n  var s = '';\r\n  var i = -1;\r\n  while (++i < BN.wordSize) {\r\n    zeros[i] = s;\r\n    s += '0';\r\n  }\r\n  groupSizes[0] = 0;\r\n  groupSizes[1] = 0;\r\n  groupBases[0] = 0;\r\n  groupBases[1] = 0;\r\n  var base = 2 - 1;\r\n  while (++base < 36 + 1) {\r\n    var groupSize = 0;\r\n    var groupBase = 1;\r\n    while (groupBase < (1 << BN.wordSize) / base) {\r\n      groupBase *= base;\r\n      groupSize += 1;\r\n    }\r\n    groupSizes[base] = groupSize;\r\n    groupBases[base] = groupBase;\r\n  }\r\n\r\n  */\r\n\r\n  var zeros = [\r\n    '',\r\n    '0',\r\n    '00',\r\n    '000',\r\n    '0000',\r\n    '00000',\r\n    '000000',\r\n    '0000000',\r\n    '00000000',\r\n    '000000000',\r\n    '0000000000',\r\n    '00000000000',\r\n    '000000000000',\r\n    '0000000000000',\r\n    '00000000000000',\r\n    '000000000000000',\r\n    '0000000000000000',\r\n    '00000000000000000',\r\n    '000000000000000000',\r\n    '0000000000000000000',\r\n    '00000000000000000000',\r\n    '000000000000000000000',\r\n    '0000000000000000000000',\r\n    '00000000000000000000000',\r\n    '000000000000000000000000',\r\n    '0000000000000000000000000'\r\n  ];\r\n\r\n  var groupSizes = [\r\n    0, 0,\r\n    25, 16, 12, 11, 10, 9, 8,\r\n    8, 7, 7, 7, 7, 6, 6,\r\n    6, 6, 6, 6, 6, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5\r\n  ];\r\n\r\n  var groupBases = [\r\n    0, 0,\r\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\r\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\r\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\r\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\r\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\r\n  ];\r\n\r\n  BN.prototype.toString = function toString (base, padding) {\r\n    base = base || 10;\r\n    padding = padding | 0 || 1;\r\n\r\n    var out;\r\n    if (base === 16 || base === 'hex') {\r\n      out = '';\r\n      var off = 0;\r\n      var carry = 0;\r\n      for (var i = 0; i < this.length; i++) {\r\n        var w = this.words[i];\r\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\r\n        carry = (w >>> (24 - off)) & 0xffffff;\r\n        if (carry !== 0 || i !== this.length - 1) {\r\n          out = zeros[6 - word.length] + word + out;\r\n        } else {\r\n          out = word + out;\r\n        }\r\n        off += 2;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          i--;\r\n        }\r\n      }\r\n      if (carry !== 0) {\r\n        out = carry.toString(16) + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    if (base === (base | 0) && base >= 2 && base <= 36) {\r\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\r\n      var groupSize = groupSizes[base];\r\n      // var groupBase = Math.pow(base, groupSize);\r\n      var groupBase = groupBases[base];\r\n      out = '';\r\n      var c = this.clone();\r\n      c.negative = 0;\r\n      while (!c.isZero()) {\r\n        var r = c.modrn(groupBase).toString(base);\r\n        c = c.idivn(groupBase);\r\n\r\n        if (!c.isZero()) {\r\n          out = zeros[groupSize - r.length] + r + out;\r\n        } else {\r\n          out = r + out;\r\n        }\r\n      }\r\n      if (this.isZero()) {\r\n        out = '0' + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    assert(false, 'Base should be between 2 and 36');\r\n  };\r\n\r\n  BN.prototype.toNumber = function toNumber () {\r\n    var ret = this.words[0];\r\n    if (this.length === 2) {\r\n      ret += this.words[1] * 0x4000000;\r\n    } else if (this.length === 3 && this.words[2] === 0x01) {\r\n      // NOTE: at this stage it is known that the top bit is set\r\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\r\n    } else if (this.length > 2) {\r\n      assert(false, 'Number can only safely store up to 53 bits');\r\n    }\r\n    return (this.negative !== 0) ? -ret : ret;\r\n  };\r\n\r\n  BN.prototype.toJSON = function toJSON () {\r\n    return this.toString(16, 2);\r\n  };\r\n\r\n  if (Buffer) {\r\n    BN.prototype.toBuffer = function toBuffer (endian, length) {\r\n      return this.toArrayLike(Buffer, endian, length);\r\n    };\r\n  }\r\n\r\n  BN.prototype.toArray = function toArray (endian, length) {\r\n    return this.toArrayLike(Array, endian, length);\r\n  };\r\n\r\n  var allocate = function allocate (ArrayType, size) {\r\n    if (ArrayType.allocUnsafe) {\r\n      return ArrayType.allocUnsafe(size);\r\n    }\r\n    return new ArrayType(size);\r\n  };\r\n\r\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\r\n    this._strip();\r\n\r\n    var byteLength = this.byteLength();\r\n    var reqLength = length || Math.max(1, byteLength);\r\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\r\n    assert(reqLength > 0, 'Requested array length <= 0');\r\n\r\n    var res = allocate(ArrayType, reqLength);\r\n    var postfix = endian === 'le' ? 'LE' : 'BE';\r\n    this['_toArrayLike' + postfix](res, byteLength);\r\n    return res;\r\n  };\r\n\r\n  BN.prototype._toArrayLikeLE = function _toArrayLikeLE (res, byteLength) {\r\n    var position = 0;\r\n    var carry = 0;\r\n\r\n    for (var i = 0, shift = 0; i < this.length; i++) {\r\n      var word = (this.words[i] << shift) | carry;\r\n\r\n      res[position++] = word & 0xff;\r\n      if (position < res.length) {\r\n        res[position++] = (word >> 8) & 0xff;\r\n      }\r\n      if (position < res.length) {\r\n        res[position++] = (word >> 16) & 0xff;\r\n      }\r\n\r\n      if (shift === 6) {\r\n        if (position < res.length) {\r\n          res[position++] = (word >> 24) & 0xff;\r\n        }\r\n        carry = 0;\r\n        shift = 0;\r\n      } else {\r\n        carry = word >>> 24;\r\n        shift += 2;\r\n      }\r\n    }\r\n\r\n    if (position < res.length) {\r\n      res[position++] = carry;\r\n\r\n      while (position < res.length) {\r\n        res[position++] = 0;\r\n      }\r\n    }\r\n  };\r\n\r\n  BN.prototype._toArrayLikeBE = function _toArrayLikeBE (res, byteLength) {\r\n    var position = res.length - 1;\r\n    var carry = 0;\r\n\r\n    for (var i = 0, shift = 0; i < this.length; i++) {\r\n      var word = (this.words[i] << shift) | carry;\r\n\r\n      res[position--] = word & 0xff;\r\n      if (position >= 0) {\r\n        res[position--] = (word >> 8) & 0xff;\r\n      }\r\n      if (position >= 0) {\r\n        res[position--] = (word >> 16) & 0xff;\r\n      }\r\n\r\n      if (shift === 6) {\r\n        if (position >= 0) {\r\n          res[position--] = (word >> 24) & 0xff;\r\n        }\r\n        carry = 0;\r\n        shift = 0;\r\n      } else {\r\n        carry = word >>> 24;\r\n        shift += 2;\r\n      }\r\n    }\r\n\r\n    if (position >= 0) {\r\n      res[position--] = carry;\r\n\r\n      while (position >= 0) {\r\n        res[position--] = 0;\r\n      }\r\n    }\r\n  };\r\n\r\n  if (Math.clz32) {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      return 32 - Math.clz32(w);\r\n    };\r\n  } else {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      var t = w;\r\n      var r = 0;\r\n      if (t >= 0x1000) {\r\n        r += 13;\r\n        t >>>= 13;\r\n      }\r\n      if (t >= 0x40) {\r\n        r += 7;\r\n        t >>>= 7;\r\n      }\r\n      if (t >= 0x8) {\r\n        r += 4;\r\n        t >>>= 4;\r\n      }\r\n      if (t >= 0x02) {\r\n        r += 2;\r\n        t >>>= 2;\r\n      }\r\n      return r + t;\r\n    };\r\n  }\r\n\r\n  BN.prototype._zeroBits = function _zeroBits (w) {\r\n    // Short-cut\r\n    if (w === 0) return 26;\r\n\r\n    var t = w;\r\n    var r = 0;\r\n    if ((t & 0x1fff) === 0) {\r\n      r += 13;\r\n      t >>>= 13;\r\n    }\r\n    if ((t & 0x7f) === 0) {\r\n      r += 7;\r\n      t >>>= 7;\r\n    }\r\n    if ((t & 0xf) === 0) {\r\n      r += 4;\r\n      t >>>= 4;\r\n    }\r\n    if ((t & 0x3) === 0) {\r\n      r += 2;\r\n      t >>>= 2;\r\n    }\r\n    if ((t & 0x1) === 0) {\r\n      r++;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  // Return number of used bits in a BN\r\n  BN.prototype.bitLength = function bitLength () {\r\n    var w = this.words[this.length - 1];\r\n    var hi = this._countBits(w);\r\n    return (this.length - 1) * 26 + hi;\r\n  };\r\n\r\n  function toBitArray (num) {\r\n    var w = new Array(num.bitLength());\r\n\r\n    for (var bit = 0; bit < w.length; bit++) {\r\n      var off = (bit / 26) | 0;\r\n      var wbit = bit % 26;\r\n\r\n      w[bit] = (num.words[off] >>> wbit) & 0x01;\r\n    }\r\n\r\n    return w;\r\n  }\r\n\r\n  // Number of trailing zero bits\r\n  BN.prototype.zeroBits = function zeroBits () {\r\n    if (this.isZero()) return 0;\r\n\r\n    var r = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var b = this._zeroBits(this.words[i]);\r\n      r += b;\r\n      if (b !== 26) break;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  BN.prototype.byteLength = function byteLength () {\r\n    return Math.ceil(this.bitLength() / 8);\r\n  };\r\n\r\n  BN.prototype.toTwos = function toTwos (width) {\r\n    if (this.negative !== 0) {\r\n      return this.abs().inotn(width).iaddn(1);\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.fromTwos = function fromTwos (width) {\r\n    if (this.testn(width - 1)) {\r\n      return this.notn(width).iaddn(1).ineg();\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.isNeg = function isNeg () {\r\n    return this.negative !== 0;\r\n  };\r\n\r\n  // Return negative clone of `this`\r\n  BN.prototype.neg = function neg () {\r\n    return this.clone().ineg();\r\n  };\r\n\r\n  BN.prototype.ineg = function ineg () {\r\n    if (!this.isZero()) {\r\n      this.negative ^= 1;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Or `num` with `this` in-place\r\n  BN.prototype.iuor = function iuor (num) {\r\n    while (this.length < num.length) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n\r\n    for (var i = 0; i < num.length; i++) {\r\n      this.words[i] = this.words[i] | num.words[i];\r\n    }\r\n\r\n    return this._strip();\r\n  };\r\n\r\n  BN.prototype.ior = function ior (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuor(num);\r\n  };\r\n\r\n  // Or `num` with `this`\r\n  BN.prototype.or = function or (num) {\r\n    if (this.length > num.length) return this.clone().ior(num);\r\n    return num.clone().ior(this);\r\n  };\r\n\r\n  BN.prototype.uor = function uor (num) {\r\n    if (this.length > num.length) return this.clone().iuor(num);\r\n    return num.clone().iuor(this);\r\n  };\r\n\r\n  // And `num` with `this` in-place\r\n  BN.prototype.iuand = function iuand (num) {\r\n    // b = min-length(num, this)\r\n    var b;\r\n    if (this.length > num.length) {\r\n      b = num;\r\n    } else {\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = this.words[i] & num.words[i];\r\n    }\r\n\r\n    this.length = b.length;\r\n\r\n    return this._strip();\r\n  };\r\n\r\n  BN.prototype.iand = function iand (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuand(num);\r\n  };\r\n\r\n  // And `num` with `this`\r\n  BN.prototype.and = function and (num) {\r\n    if (this.length > num.length) return this.clone().iand(num);\r\n    return num.clone().iand(this);\r\n  };\r\n\r\n  BN.prototype.uand = function uand (num) {\r\n    if (this.length > num.length) return this.clone().iuand(num);\r\n    return num.clone().iuand(this);\r\n  };\r\n\r\n  // Xor `num` with `this` in-place\r\n  BN.prototype.iuxor = function iuxor (num) {\r\n    // a.length > b.length\r\n    var a;\r\n    var b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = a.words[i] ^ b.words[i];\r\n    }\r\n\r\n    if (this !== a) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = a.length;\r\n\r\n    return this._strip();\r\n  };\r\n\r\n  BN.prototype.ixor = function ixor (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuxor(num);\r\n  };\r\n\r\n  // Xor `num` with `this`\r\n  BN.prototype.xor = function xor (num) {\r\n    if (this.length > num.length) return this.clone().ixor(num);\r\n    return num.clone().ixor(this);\r\n  };\r\n\r\n  BN.prototype.uxor = function uxor (num) {\r\n    if (this.length > num.length) return this.clone().iuxor(num);\r\n    return num.clone().iuxor(this);\r\n  };\r\n\r\n  // Not ``this`` with ``width`` bitwidth\r\n  BN.prototype.inotn = function inotn (width) {\r\n    assert(typeof width === 'number' && width >= 0);\r\n\r\n    var bytesNeeded = Math.ceil(width / 26) | 0;\r\n    var bitsLeft = width % 26;\r\n\r\n    // Extend the buffer with leading zeroes\r\n    this._expand(bytesNeeded);\r\n\r\n    if (bitsLeft > 0) {\r\n      bytesNeeded--;\r\n    }\r\n\r\n    // Handle complete words\r\n    for (var i = 0; i < bytesNeeded; i++) {\r\n      this.words[i] = ~this.words[i] & 0x3ffffff;\r\n    }\r\n\r\n    // Handle the residue\r\n    if (bitsLeft > 0) {\r\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\r\n    }\r\n\r\n    // And remove leading zeroes\r\n    return this._strip();\r\n  };\r\n\r\n  BN.prototype.notn = function notn (width) {\r\n    return this.clone().inotn(width);\r\n  };\r\n\r\n  // Set `bit` of `this`\r\n  BN.prototype.setn = function setn (bit, val) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n\r\n    var off = (bit / 26) | 0;\r\n    var wbit = bit % 26;\r\n\r\n    this._expand(off + 1);\r\n\r\n    if (val) {\r\n      this.words[off] = this.words[off] | (1 << wbit);\r\n    } else {\r\n      this.words[off] = this.words[off] & ~(1 << wbit);\r\n    }\r\n\r\n    return this._strip();\r\n  };\r\n\r\n  // Add `num` to `this` in-place\r\n  BN.prototype.iadd = function iadd (num) {\r\n    var r;\r\n\r\n    // negative + positive\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      this.negative = 0;\r\n      r = this.isub(num);\r\n      this.negative ^= 1;\r\n      return this._normSign();\r\n\r\n    // positive + negative\r\n    } else if (this.negative === 0 && num.negative !== 0) {\r\n      num.negative = 0;\r\n      r = this.isub(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n    }\r\n\r\n    // a.length > b.length\r\n    var a, b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n\r\n    this.length = a.length;\r\n    if (carry !== 0) {\r\n      this.words[this.length] = carry;\r\n      this.length++;\r\n    // Copy the rest of the words\r\n    } else if (a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Add `num` to `this`\r\n  BN.prototype.add = function add (num) {\r\n    var res;\r\n    if (num.negative !== 0 && this.negative === 0) {\r\n      num.negative = 0;\r\n      res = this.sub(num);\r\n      num.negative ^= 1;\r\n      return res;\r\n    } else if (num.negative === 0 && this.negative !== 0) {\r\n      this.negative = 0;\r\n      res = num.sub(this);\r\n      this.negative = 1;\r\n      return res;\r\n    }\r\n\r\n    if (this.length > num.length) return this.clone().iadd(num);\r\n\r\n    return num.clone().iadd(this);\r\n  };\r\n\r\n  // Subtract `num` from `this` in-place\r\n  BN.prototype.isub = function isub (num) {\r\n    // this - (-num) = this + num\r\n    if (num.negative !== 0) {\r\n      num.negative = 0;\r\n      var r = this.iadd(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n\r\n    // -this - num = -(this + num)\r\n    } else if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iadd(num);\r\n      this.negative = 1;\r\n      return this._normSign();\r\n    }\r\n\r\n    // At this point both numbers are positive\r\n    var cmp = this.cmp(num);\r\n\r\n    // Optimization - zeroify\r\n    if (cmp === 0) {\r\n      this.negative = 0;\r\n      this.length = 1;\r\n      this.words[0] = 0;\r\n      return this;\r\n    }\r\n\r\n    // a > b\r\n    var a, b;\r\n    if (cmp > 0) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n\r\n    // Copy rest of the words\r\n    if (carry === 0 && i < a.length && a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = Math.max(this.length, i);\r\n\r\n    if (a !== this) {\r\n      this.negative = 1;\r\n    }\r\n\r\n    return this._strip();\r\n  };\r\n\r\n  // Subtract `num` from `this`\r\n  BN.prototype.sub = function sub (num) {\r\n    return this.clone().isub(num);\r\n  };\r\n\r\n  function smallMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    var len = (self.length + num.length) | 0;\r\n    out.length = len;\r\n    len = (len - 1) | 0;\r\n\r\n    // Peel one iteration (compiler can't do it, because of code complexity)\r\n    var a = self.words[0] | 0;\r\n    var b = num.words[0] | 0;\r\n    var r = a * b;\r\n\r\n    var lo = r & 0x3ffffff;\r\n    var carry = (r / 0x4000000) | 0;\r\n    out.words[0] = lo;\r\n\r\n    for (var k = 1; k < len; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = carry >>> 26;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = (k - j) | 0;\r\n        a = self.words[i] | 0;\r\n        b = num.words[j] | 0;\r\n        r = a * b + rword;\r\n        ncarry += (r / 0x4000000) | 0;\r\n        rword = r & 0x3ffffff;\r\n      }\r\n      out.words[k] = rword | 0;\r\n      carry = ncarry | 0;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry | 0;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out._strip();\r\n  }\r\n\r\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\r\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\r\n  // multiplication (like elliptic secp256k1).\r\n  var comb10MulTo = function comb10MulTo (self, num, out) {\r\n    var a = self.words;\r\n    var b = num.words;\r\n    var o = out.words;\r\n    var c = 0;\r\n    var lo;\r\n    var mid;\r\n    var hi;\r\n    var a0 = a[0] | 0;\r\n    var al0 = a0 & 0x1fff;\r\n    var ah0 = a0 >>> 13;\r\n    var a1 = a[1] | 0;\r\n    var al1 = a1 & 0x1fff;\r\n    var ah1 = a1 >>> 13;\r\n    var a2 = a[2] | 0;\r\n    var al2 = a2 & 0x1fff;\r\n    var ah2 = a2 >>> 13;\r\n    var a3 = a[3] | 0;\r\n    var al3 = a3 & 0x1fff;\r\n    var ah3 = a3 >>> 13;\r\n    var a4 = a[4] | 0;\r\n    var al4 = a4 & 0x1fff;\r\n    var ah4 = a4 >>> 13;\r\n    var a5 = a[5] | 0;\r\n    var al5 = a5 & 0x1fff;\r\n    var ah5 = a5 >>> 13;\r\n    var a6 = a[6] | 0;\r\n    var al6 = a6 & 0x1fff;\r\n    var ah6 = a6 >>> 13;\r\n    var a7 = a[7] | 0;\r\n    var al7 = a7 & 0x1fff;\r\n    var ah7 = a7 >>> 13;\r\n    var a8 = a[8] | 0;\r\n    var al8 = a8 & 0x1fff;\r\n    var ah8 = a8 >>> 13;\r\n    var a9 = a[9] | 0;\r\n    var al9 = a9 & 0x1fff;\r\n    var ah9 = a9 >>> 13;\r\n    var b0 = b[0] | 0;\r\n    var bl0 = b0 & 0x1fff;\r\n    var bh0 = b0 >>> 13;\r\n    var b1 = b[1] | 0;\r\n    var bl1 = b1 & 0x1fff;\r\n    var bh1 = b1 >>> 13;\r\n    var b2 = b[2] | 0;\r\n    var bl2 = b2 & 0x1fff;\r\n    var bh2 = b2 >>> 13;\r\n    var b3 = b[3] | 0;\r\n    var bl3 = b3 & 0x1fff;\r\n    var bh3 = b3 >>> 13;\r\n    var b4 = b[4] | 0;\r\n    var bl4 = b4 & 0x1fff;\r\n    var bh4 = b4 >>> 13;\r\n    var b5 = b[5] | 0;\r\n    var bl5 = b5 & 0x1fff;\r\n    var bh5 = b5 >>> 13;\r\n    var b6 = b[6] | 0;\r\n    var bl6 = b6 & 0x1fff;\r\n    var bh6 = b6 >>> 13;\r\n    var b7 = b[7] | 0;\r\n    var bl7 = b7 & 0x1fff;\r\n    var bh7 = b7 >>> 13;\r\n    var b8 = b[8] | 0;\r\n    var bl8 = b8 & 0x1fff;\r\n    var bh8 = b8 >>> 13;\r\n    var b9 = b[9] | 0;\r\n    var bl9 = b9 & 0x1fff;\r\n    var bh9 = b9 >>> 13;\r\n\r\n    out.negative = self.negative ^ num.negative;\r\n    out.length = 19;\r\n    /* k = 0 */\r\n    lo = Math.imul(al0, bl0);\r\n    mid = Math.imul(al0, bh0);\r\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\r\n    hi = Math.imul(ah0, bh0);\r\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\r\n    w0 &= 0x3ffffff;\r\n    /* k = 1 */\r\n    lo = Math.imul(al1, bl0);\r\n    mid = Math.imul(al1, bh0);\r\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\r\n    hi = Math.imul(ah1, bh0);\r\n    lo = (lo + Math.imul(al0, bl1)) | 0;\r\n    mid = (mid + Math.imul(al0, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\r\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\r\n    w1 &= 0x3ffffff;\r\n    /* k = 2 */\r\n    lo = Math.imul(al2, bl0);\r\n    mid = Math.imul(al2, bh0);\r\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\r\n    hi = Math.imul(ah2, bh0);\r\n    lo = (lo + Math.imul(al1, bl1)) | 0;\r\n    mid = (mid + Math.imul(al1, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\r\n    lo = (lo + Math.imul(al0, bl2)) | 0;\r\n    mid = (mid + Math.imul(al0, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\r\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\r\n    w2 &= 0x3ffffff;\r\n    /* k = 3 */\r\n    lo = Math.imul(al3, bl0);\r\n    mid = Math.imul(al3, bh0);\r\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\r\n    hi = Math.imul(ah3, bh0);\r\n    lo = (lo + Math.imul(al2, bl1)) | 0;\r\n    mid = (mid + Math.imul(al2, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\r\n    lo = (lo + Math.imul(al1, bl2)) | 0;\r\n    mid = (mid + Math.imul(al1, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\r\n    lo = (lo + Math.imul(al0, bl3)) | 0;\r\n    mid = (mid + Math.imul(al0, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\r\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\r\n    w3 &= 0x3ffffff;\r\n    /* k = 4 */\r\n    lo = Math.imul(al4, bl0);\r\n    mid = Math.imul(al4, bh0);\r\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\r\n    hi = Math.imul(ah4, bh0);\r\n    lo = (lo + Math.imul(al3, bl1)) | 0;\r\n    mid = (mid + Math.imul(al3, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\r\n    lo = (lo + Math.imul(al2, bl2)) | 0;\r\n    mid = (mid + Math.imul(al2, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\r\n    lo = (lo + Math.imul(al1, bl3)) | 0;\r\n    mid = (mid + Math.imul(al1, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\r\n    lo = (lo + Math.imul(al0, bl4)) | 0;\r\n    mid = (mid + Math.imul(al0, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\r\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\r\n    w4 &= 0x3ffffff;\r\n    /* k = 5 */\r\n    lo = Math.imul(al5, bl0);\r\n    mid = Math.imul(al5, bh0);\r\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\r\n    hi = Math.imul(ah5, bh0);\r\n    lo = (lo + Math.imul(al4, bl1)) | 0;\r\n    mid = (mid + Math.imul(al4, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\r\n    lo = (lo + Math.imul(al3, bl2)) | 0;\r\n    mid = (mid + Math.imul(al3, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\r\n    lo = (lo + Math.imul(al2, bl3)) | 0;\r\n    mid = (mid + Math.imul(al2, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\r\n    lo = (lo + Math.imul(al1, bl4)) | 0;\r\n    mid = (mid + Math.imul(al1, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\r\n    lo = (lo + Math.imul(al0, bl5)) | 0;\r\n    mid = (mid + Math.imul(al0, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\r\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\r\n    w5 &= 0x3ffffff;\r\n    /* k = 6 */\r\n    lo = Math.imul(al6, bl0);\r\n    mid = Math.imul(al6, bh0);\r\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\r\n    hi = Math.imul(ah6, bh0);\r\n    lo = (lo + Math.imul(al5, bl1)) | 0;\r\n    mid = (mid + Math.imul(al5, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\r\n    lo = (lo + Math.imul(al4, bl2)) | 0;\r\n    mid = (mid + Math.imul(al4, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\r\n    lo = (lo + Math.imul(al3, bl3)) | 0;\r\n    mid = (mid + Math.imul(al3, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\r\n    lo = (lo + Math.imul(al2, bl4)) | 0;\r\n    mid = (mid + Math.imul(al2, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\r\n    lo = (lo + Math.imul(al1, bl5)) | 0;\r\n    mid = (mid + Math.imul(al1, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\r\n    lo = (lo + Math.imul(al0, bl6)) | 0;\r\n    mid = (mid + Math.imul(al0, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\r\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\r\n    w6 &= 0x3ffffff;\r\n    /* k = 7 */\r\n    lo = Math.imul(al7, bl0);\r\n    mid = Math.imul(al7, bh0);\r\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\r\n    hi = Math.imul(ah7, bh0);\r\n    lo = (lo + Math.imul(al6, bl1)) | 0;\r\n    mid = (mid + Math.imul(al6, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\r\n    lo = (lo + Math.imul(al5, bl2)) | 0;\r\n    mid = (mid + Math.imul(al5, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\r\n    lo = (lo + Math.imul(al4, bl3)) | 0;\r\n    mid = (mid + Math.imul(al4, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\r\n    lo = (lo + Math.imul(al3, bl4)) | 0;\r\n    mid = (mid + Math.imul(al3, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\r\n    lo = (lo + Math.imul(al2, bl5)) | 0;\r\n    mid = (mid + Math.imul(al2, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\r\n    lo = (lo + Math.imul(al1, bl6)) | 0;\r\n    mid = (mid + Math.imul(al1, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\r\n    lo = (lo + Math.imul(al0, bl7)) | 0;\r\n    mid = (mid + Math.imul(al0, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\r\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\r\n    w7 &= 0x3ffffff;\r\n    /* k = 8 */\r\n    lo = Math.imul(al8, bl0);\r\n    mid = Math.imul(al8, bh0);\r\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\r\n    hi = Math.imul(ah8, bh0);\r\n    lo = (lo + Math.imul(al7, bl1)) | 0;\r\n    mid = (mid + Math.imul(al7, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\r\n    lo = (lo + Math.imul(al6, bl2)) | 0;\r\n    mid = (mid + Math.imul(al6, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\r\n    lo = (lo + Math.imul(al5, bl3)) | 0;\r\n    mid = (mid + Math.imul(al5, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\r\n    lo = (lo + Math.imul(al4, bl4)) | 0;\r\n    mid = (mid + Math.imul(al4, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\r\n    lo = (lo + Math.imul(al3, bl5)) | 0;\r\n    mid = (mid + Math.imul(al3, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\r\n    lo = (lo + Math.imul(al2, bl6)) | 0;\r\n    mid = (mid + Math.imul(al2, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\r\n    lo = (lo + Math.imul(al1, bl7)) | 0;\r\n    mid = (mid + Math.imul(al1, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\r\n    lo = (lo + Math.imul(al0, bl8)) | 0;\r\n    mid = (mid + Math.imul(al0, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\r\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\r\n    w8 &= 0x3ffffff;\r\n    /* k = 9 */\r\n    lo = Math.imul(al9, bl0);\r\n    mid = Math.imul(al9, bh0);\r\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\r\n    hi = Math.imul(ah9, bh0);\r\n    lo = (lo + Math.imul(al8, bl1)) | 0;\r\n    mid = (mid + Math.imul(al8, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\r\n    lo = (lo + Math.imul(al7, bl2)) | 0;\r\n    mid = (mid + Math.imul(al7, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\r\n    lo = (lo + Math.imul(al6, bl3)) | 0;\r\n    mid = (mid + Math.imul(al6, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\r\n    lo = (lo + Math.imul(al5, bl4)) | 0;\r\n    mid = (mid + Math.imul(al5, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\r\n    lo = (lo + Math.imul(al4, bl5)) | 0;\r\n    mid = (mid + Math.imul(al4, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\r\n    lo = (lo + Math.imul(al3, bl6)) | 0;\r\n    mid = (mid + Math.imul(al3, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\r\n    lo = (lo + Math.imul(al2, bl7)) | 0;\r\n    mid = (mid + Math.imul(al2, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\r\n    lo = (lo + Math.imul(al1, bl8)) | 0;\r\n    mid = (mid + Math.imul(al1, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\r\n    lo = (lo + Math.imul(al0, bl9)) | 0;\r\n    mid = (mid + Math.imul(al0, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\r\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\r\n    w9 &= 0x3ffffff;\r\n    /* k = 10 */\r\n    lo = Math.imul(al9, bl1);\r\n    mid = Math.imul(al9, bh1);\r\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\r\n    hi = Math.imul(ah9, bh1);\r\n    lo = (lo + Math.imul(al8, bl2)) | 0;\r\n    mid = (mid + Math.imul(al8, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\r\n    lo = (lo + Math.imul(al7, bl3)) | 0;\r\n    mid = (mid + Math.imul(al7, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\r\n    lo = (lo + Math.imul(al6, bl4)) | 0;\r\n    mid = (mid + Math.imul(al6, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\r\n    lo = (lo + Math.imul(al5, bl5)) | 0;\r\n    mid = (mid + Math.imul(al5, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\r\n    lo = (lo + Math.imul(al4, bl6)) | 0;\r\n    mid = (mid + Math.imul(al4, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\r\n    lo = (lo + Math.imul(al3, bl7)) | 0;\r\n    mid = (mid + Math.imul(al3, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\r\n    lo = (lo + Math.imul(al2, bl8)) | 0;\r\n    mid = (mid + Math.imul(al2, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\r\n    lo = (lo + Math.imul(al1, bl9)) | 0;\r\n    mid = (mid + Math.imul(al1, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\r\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\r\n    w10 &= 0x3ffffff;\r\n    /* k = 11 */\r\n    lo = Math.imul(al9, bl2);\r\n    mid = Math.imul(al9, bh2);\r\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\r\n    hi = Math.imul(ah9, bh2);\r\n    lo = (lo + Math.imul(al8, bl3)) | 0;\r\n    mid = (mid + Math.imul(al8, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\r\n    lo = (lo + Math.imul(al7, bl4)) | 0;\r\n    mid = (mid + Math.imul(al7, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\r\n    lo = (lo + Math.imul(al6, bl5)) | 0;\r\n    mid = (mid + Math.imul(al6, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\r\n    lo = (lo + Math.imul(al5, bl6)) | 0;\r\n    mid = (mid + Math.imul(al5, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\r\n    lo = (lo + Math.imul(al4, bl7)) | 0;\r\n    mid = (mid + Math.imul(al4, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\r\n    lo = (lo + Math.imul(al3, bl8)) | 0;\r\n    mid = (mid + Math.imul(al3, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\r\n    lo = (lo + Math.imul(al2, bl9)) | 0;\r\n    mid = (mid + Math.imul(al2, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\r\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\r\n    w11 &= 0x3ffffff;\r\n    /* k = 12 */\r\n    lo = Math.imul(al9, bl3);\r\n    mid = Math.imul(al9, bh3);\r\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\r\n    hi = Math.imul(ah9, bh3);\r\n    lo = (lo + Math.imul(al8, bl4)) | 0;\r\n    mid = (mid + Math.imul(al8, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\r\n    lo = (lo + Math.imul(al7, bl5)) | 0;\r\n    mid = (mid + Math.imul(al7, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\r\n    lo = (lo + Math.imul(al6, bl6)) | 0;\r\n    mid = (mid + Math.imul(al6, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\r\n    lo = (lo + Math.imul(al5, bl7)) | 0;\r\n    mid = (mid + Math.imul(al5, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\r\n    lo = (lo + Math.imul(al4, bl8)) | 0;\r\n    mid = (mid + Math.imul(al4, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\r\n    lo = (lo + Math.imul(al3, bl9)) | 0;\r\n    mid = (mid + Math.imul(al3, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\r\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\r\n    w12 &= 0x3ffffff;\r\n    /* k = 13 */\r\n    lo = Math.imul(al9, bl4);\r\n    mid = Math.imul(al9, bh4);\r\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\r\n    hi = Math.imul(ah9, bh4);\r\n    lo = (lo + Math.imul(al8, bl5)) | 0;\r\n    mid = (mid + Math.imul(al8, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\r\n    lo = (lo + Math.imul(al7, bl6)) | 0;\r\n    mid = (mid + Math.imul(al7, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\r\n    lo = (lo + Math.imul(al6, bl7)) | 0;\r\n    mid = (mid + Math.imul(al6, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\r\n    lo = (lo + Math.imul(al5, bl8)) | 0;\r\n    mid = (mid + Math.imul(al5, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\r\n    lo = (lo + Math.imul(al4, bl9)) | 0;\r\n    mid = (mid + Math.imul(al4, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\r\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\r\n    w13 &= 0x3ffffff;\r\n    /* k = 14 */\r\n    lo = Math.imul(al9, bl5);\r\n    mid = Math.imul(al9, bh5);\r\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\r\n    hi = Math.imul(ah9, bh5);\r\n    lo = (lo + Math.imul(al8, bl6)) | 0;\r\n    mid = (mid + Math.imul(al8, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\r\n    lo = (lo + Math.imul(al7, bl7)) | 0;\r\n    mid = (mid + Math.imul(al7, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\r\n    lo = (lo + Math.imul(al6, bl8)) | 0;\r\n    mid = (mid + Math.imul(al6, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\r\n    lo = (lo + Math.imul(al5, bl9)) | 0;\r\n    mid = (mid + Math.imul(al5, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\r\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\r\n    w14 &= 0x3ffffff;\r\n    /* k = 15 */\r\n    lo = Math.imul(al9, bl6);\r\n    mid = Math.imul(al9, bh6);\r\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\r\n    hi = Math.imul(ah9, bh6);\r\n    lo = (lo + Math.imul(al8, bl7)) | 0;\r\n    mid = (mid + Math.imul(al8, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\r\n    lo = (lo + Math.imul(al7, bl8)) | 0;\r\n    mid = (mid + Math.imul(al7, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\r\n    lo = (lo + Math.imul(al6, bl9)) | 0;\r\n    mid = (mid + Math.imul(al6, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\r\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\r\n    w15 &= 0x3ffffff;\r\n    /* k = 16 */\r\n    lo = Math.imul(al9, bl7);\r\n    mid = Math.imul(al9, bh7);\r\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\r\n    hi = Math.imul(ah9, bh7);\r\n    lo = (lo + Math.imul(al8, bl8)) | 0;\r\n    mid = (mid + Math.imul(al8, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\r\n    lo = (lo + Math.imul(al7, bl9)) | 0;\r\n    mid = (mid + Math.imul(al7, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\r\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\r\n    w16 &= 0x3ffffff;\r\n    /* k = 17 */\r\n    lo = Math.imul(al9, bl8);\r\n    mid = Math.imul(al9, bh8);\r\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\r\n    hi = Math.imul(ah9, bh8);\r\n    lo = (lo + Math.imul(al8, bl9)) | 0;\r\n    mid = (mid + Math.imul(al8, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\r\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\r\n    w17 &= 0x3ffffff;\r\n    /* k = 18 */\r\n    lo = Math.imul(al9, bl9);\r\n    mid = Math.imul(al9, bh9);\r\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\r\n    hi = Math.imul(ah9, bh9);\r\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\r\n    w18 &= 0x3ffffff;\r\n    o[0] = w0;\r\n    o[1] = w1;\r\n    o[2] = w2;\r\n    o[3] = w3;\r\n    o[4] = w4;\r\n    o[5] = w5;\r\n    o[6] = w6;\r\n    o[7] = w7;\r\n    o[8] = w8;\r\n    o[9] = w9;\r\n    o[10] = w10;\r\n    o[11] = w11;\r\n    o[12] = w12;\r\n    o[13] = w13;\r\n    o[14] = w14;\r\n    o[15] = w15;\r\n    o[16] = w16;\r\n    o[17] = w17;\r\n    o[18] = w18;\r\n    if (c !== 0) {\r\n      o[19] = c;\r\n      out.length++;\r\n    }\r\n    return out;\r\n  };\r\n\r\n  // Polyfill comb\r\n  if (!Math.imul) {\r\n    comb10MulTo = smallMulTo;\r\n  }\r\n\r\n  function bigMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    out.length = self.length + num.length;\r\n\r\n    var carry = 0;\r\n    var hncarry = 0;\r\n    for (var k = 0; k < out.length - 1; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = hncarry;\r\n      hncarry = 0;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = k - j;\r\n        var a = self.words[i] | 0;\r\n        var b = num.words[j] | 0;\r\n        var r = a * b;\r\n\r\n        var lo = r & 0x3ffffff;\r\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\r\n        lo = (lo + rword) | 0;\r\n        rword = lo & 0x3ffffff;\r\n        ncarry = (ncarry + (lo >>> 26)) | 0;\r\n\r\n        hncarry += ncarry >>> 26;\r\n        ncarry &= 0x3ffffff;\r\n      }\r\n      out.words[k] = rword;\r\n      carry = ncarry;\r\n      ncarry = hncarry;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out._strip();\r\n  }\r\n\r\n  function jumboMulTo (self, num, out) {\r\n    // Temporary disable, see https://github.com/indutny/bn.js/issues/211\r\n    // var fftm = new FFTM();\r\n    // return fftm.mulp(self, num, out);\r\n    return bigMulTo(self, num, out);\r\n  }\r\n\r\n  BN.prototype.mulTo = function mulTo (num, out) {\r\n    var res;\r\n    var len = this.length + num.length;\r\n    if (this.length === 10 && num.length === 10) {\r\n      res = comb10MulTo(this, num, out);\r\n    } else if (len < 63) {\r\n      res = smallMulTo(this, num, out);\r\n    } else if (len < 1024) {\r\n      res = bigMulTo(this, num, out);\r\n    } else {\r\n      res = jumboMulTo(this, num, out);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Cooley-Tukey algorithm for FFT\r\n  // slightly revisited to rely on looping instead of recursion\r\n\r\n  function FFTM (x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  FFTM.prototype.makeRBT = function makeRBT (N) {\r\n    var t = new Array(N);\r\n    var l = BN.prototype._countBits(N) - 1;\r\n    for (var i = 0; i < N; i++) {\r\n      t[i] = this.revBin(i, l, N);\r\n    }\r\n\r\n    return t;\r\n  };\r\n\r\n  // Returns binary-reversed representation of `x`\r\n  FFTM.prototype.revBin = function revBin (x, l, N) {\r\n    if (x === 0 || x === N - 1) return x;\r\n\r\n    var rb = 0;\r\n    for (var i = 0; i < l; i++) {\r\n      rb |= (x & 1) << (l - i - 1);\r\n      x >>= 1;\r\n    }\r\n\r\n    return rb;\r\n  };\r\n\r\n  // Performs \"tweedling\" phase, therefore 'emulating'\r\n  // behaviour of the recursive algorithm\r\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\r\n    for (var i = 0; i < N; i++) {\r\n      rtws[i] = rws[rbt[i]];\r\n      itws[i] = iws[rbt[i]];\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\r\n    this.permute(rbt, rws, iws, rtws, itws, N);\r\n\r\n    for (var s = 1; s < N; s <<= 1) {\r\n      var l = s << 1;\r\n\r\n      var rtwdf = Math.cos(2 * Math.PI / l);\r\n      var itwdf = Math.sin(2 * Math.PI / l);\r\n\r\n      for (var p = 0; p < N; p += l) {\r\n        var rtwdf_ = rtwdf;\r\n        var itwdf_ = itwdf;\r\n\r\n        for (var j = 0; j < s; j++) {\r\n          var re = rtws[p + j];\r\n          var ie = itws[p + j];\r\n\r\n          var ro = rtws[p + j + s];\r\n          var io = itws[p + j + s];\r\n\r\n          var rx = rtwdf_ * ro - itwdf_ * io;\r\n\r\n          io = rtwdf_ * io + itwdf_ * ro;\r\n          ro = rx;\r\n\r\n          rtws[p + j] = re + ro;\r\n          itws[p + j] = ie + io;\r\n\r\n          rtws[p + j + s] = re - ro;\r\n          itws[p + j + s] = ie - io;\r\n\r\n          /* jshint maxdepth : false */\r\n          if (j !== l) {\r\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\r\n\r\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\r\n            rtwdf_ = rx;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\r\n    var N = Math.max(m, n) | 1;\r\n    var odd = N & 1;\r\n    var i = 0;\r\n    for (N = N / 2 | 0; N; N = N >>> 1) {\r\n      i++;\r\n    }\r\n\r\n    return 1 << i + 1 + odd;\r\n  };\r\n\r\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\r\n    if (N <= 1) return;\r\n\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var t = rws[i];\r\n\r\n      rws[i] = rws[N - i - 1];\r\n      rws[N - i - 1] = t;\r\n\r\n      t = iws[i];\r\n\r\n      iws[i] = -iws[N - i - 1];\r\n      iws[N - i - 1] = -t;\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\r\n        Math.round(ws[2 * i] / N) +\r\n        carry;\r\n\r\n      ws[i] = w & 0x3ffffff;\r\n\r\n      if (w < 0x4000000) {\r\n        carry = 0;\r\n      } else {\r\n        carry = w / 0x4000000 | 0;\r\n      }\r\n    }\r\n\r\n    return ws;\r\n  };\r\n\r\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < len; i++) {\r\n      carry = carry + (ws[i] | 0);\r\n\r\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\r\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\r\n    }\r\n\r\n    // Pad with zeroes\r\n    for (i = 2 * len; i < N; ++i) {\r\n      rws[i] = 0;\r\n    }\r\n\r\n    assert(carry === 0);\r\n    assert((carry & ~0x1fff) === 0);\r\n  };\r\n\r\n  FFTM.prototype.stub = function stub (N) {\r\n    var ph = new Array(N);\r\n    for (var i = 0; i < N; i++) {\r\n      ph[i] = 0;\r\n    }\r\n\r\n    return ph;\r\n  };\r\n\r\n  FFTM.prototype.mulp = function mulp (x, y, out) {\r\n    var N = 2 * this.guessLen13b(x.length, y.length);\r\n\r\n    var rbt = this.makeRBT(N);\r\n\r\n    var _ = this.stub(N);\r\n\r\n    var rws = new Array(N);\r\n    var rwst = new Array(N);\r\n    var iwst = new Array(N);\r\n\r\n    var nrws = new Array(N);\r\n    var nrwst = new Array(N);\r\n    var niwst = new Array(N);\r\n\r\n    var rmws = out.words;\r\n    rmws.length = N;\r\n\r\n    this.convert13b(x.words, x.length, rws, N);\r\n    this.convert13b(y.words, y.length, nrws, N);\r\n\r\n    this.transform(rws, _, rwst, iwst, N, rbt);\r\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\r\n\r\n    for (var i = 0; i < N; i++) {\r\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\r\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\r\n      rwst[i] = rx;\r\n    }\r\n\r\n    this.conjugate(rwst, iwst, N);\r\n    this.transform(rwst, iwst, rmws, _, N, rbt);\r\n    this.conjugate(rmws, _, N);\r\n    this.normalize13b(rmws, N);\r\n\r\n    out.negative = x.negative ^ y.negative;\r\n    out.length = x.length + y.length;\r\n    return out._strip();\r\n  };\r\n\r\n  // Multiply `this` by `num`\r\n  BN.prototype.mul = function mul (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return this.mulTo(num, out);\r\n  };\r\n\r\n  // Multiply employing FFT\r\n  BN.prototype.mulf = function mulf (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return jumboMulTo(this, num, out);\r\n  };\r\n\r\n  // In-place Multiplication\r\n  BN.prototype.imul = function imul (num) {\r\n    return this.clone().mulTo(num, this);\r\n  };\r\n\r\n  BN.prototype.imuln = function imuln (num) {\r\n    var isNegNum = num < 0;\r\n    if (isNegNum) num = -num;\r\n\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n\r\n    // Carry\r\n    var carry = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var w = (this.words[i] | 0) * num;\r\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\r\n      carry >>= 26;\r\n      carry += (w / 0x4000000) | 0;\r\n      // NOTE: lo is 27bit maximum\r\n      carry += lo >>> 26;\r\n      this.words[i] = lo & 0x3ffffff;\r\n    }\r\n\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n\r\n    return isNegNum ? this.ineg() : this;\r\n  };\r\n\r\n  BN.prototype.muln = function muln (num) {\r\n    return this.clone().imuln(num);\r\n  };\r\n\r\n  // `this` * `this`\r\n  BN.prototype.sqr = function sqr () {\r\n    return this.mul(this);\r\n  };\r\n\r\n  // `this` * `this` in-place\r\n  BN.prototype.isqr = function isqr () {\r\n    return this.imul(this.clone());\r\n  };\r\n\r\n  // Math.pow(`this`, `num`)\r\n  BN.prototype.pow = function pow (num) {\r\n    var w = toBitArray(num);\r\n    if (w.length === 0) return new BN(1);\r\n\r\n    // Skip leading zeroes\r\n    var res = this;\r\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\r\n      if (w[i] !== 0) break;\r\n    }\r\n\r\n    if (++i < w.length) {\r\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\r\n        if (w[i] === 0) continue;\r\n\r\n        res = res.mul(q);\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Shift-left in-place\r\n  BN.prototype.iushln = function iushln (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\r\n    var i;\r\n\r\n    if (r !== 0) {\r\n      var carry = 0;\r\n\r\n      for (i = 0; i < this.length; i++) {\r\n        var newCarry = this.words[i] & carryMask;\r\n        var c = ((this.words[i] | 0) - newCarry) << r;\r\n        this.words[i] = c | carry;\r\n        carry = newCarry >>> (26 - r);\r\n      }\r\n\r\n      if (carry) {\r\n        this.words[i] = carry;\r\n        this.length++;\r\n      }\r\n    }\r\n\r\n    if (s !== 0) {\r\n      for (i = this.length - 1; i >= 0; i--) {\r\n        this.words[i + s] = this.words[i];\r\n      }\r\n\r\n      for (i = 0; i < s; i++) {\r\n        this.words[i] = 0;\r\n      }\r\n\r\n      this.length += s;\r\n    }\r\n\r\n    return this._strip();\r\n  };\r\n\r\n  BN.prototype.ishln = function ishln (bits) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushln(bits);\r\n  };\r\n\r\n  // Shift-right in-place\r\n  // NOTE: `hint` is a lowest bit before trailing zeroes\r\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\r\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var h;\r\n    if (hint) {\r\n      h = (hint - (hint % 26)) / 26;\r\n    } else {\r\n      h = 0;\r\n    }\r\n\r\n    var r = bits % 26;\r\n    var s = Math.min((bits - r) / 26, this.length);\r\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n    var maskedWords = extended;\r\n\r\n    h -= s;\r\n    h = Math.max(0, h);\r\n\r\n    // Extended mode, copy masked part\r\n    if (maskedWords) {\r\n      for (var i = 0; i < s; i++) {\r\n        maskedWords.words[i] = this.words[i];\r\n      }\r\n      maskedWords.length = s;\r\n    }\r\n\r\n    if (s === 0) {\r\n      // No-op, we should not move anything at all\r\n    } else if (this.length > s) {\r\n      this.length -= s;\r\n      for (i = 0; i < this.length; i++) {\r\n        this.words[i] = this.words[i + s];\r\n      }\r\n    } else {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\r\n      var word = this.words[i] | 0;\r\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\r\n      carry = word & mask;\r\n    }\r\n\r\n    // Push carried bits as a mask\r\n    if (maskedWords && carry !== 0) {\r\n      maskedWords.words[maskedWords.length++] = carry;\r\n    }\r\n\r\n    if (this.length === 0) {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    return this._strip();\r\n  };\r\n\r\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushrn(bits, hint, extended);\r\n  };\r\n\r\n  // Shift-left\r\n  BN.prototype.shln = function shln (bits) {\r\n    return this.clone().ishln(bits);\r\n  };\r\n\r\n  BN.prototype.ushln = function ushln (bits) {\r\n    return this.clone().iushln(bits);\r\n  };\r\n\r\n  // Shift-right\r\n  BN.prototype.shrn = function shrn (bits) {\r\n    return this.clone().ishrn(bits);\r\n  };\r\n\r\n  BN.prototype.ushrn = function ushrn (bits) {\r\n    return this.clone().iushrn(bits);\r\n  };\r\n\r\n  // Test if n bit is set\r\n  BN.prototype.testn = function testn (bit) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) return false;\r\n\r\n    // Check bit and return\r\n    var w = this.words[s];\r\n\r\n    return !!(w & q);\r\n  };\r\n\r\n  // Return only lowers bits of number (in-place)\r\n  BN.prototype.imaskn = function imaskn (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n\r\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\r\n\r\n    if (this.length <= s) {\r\n      return this;\r\n    }\r\n\r\n    if (r !== 0) {\r\n      s++;\r\n    }\r\n    this.length = Math.min(s, this.length);\r\n\r\n    if (r !== 0) {\r\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n      this.words[this.length - 1] &= mask;\r\n    }\r\n\r\n    return this._strip();\r\n  };\r\n\r\n  // Return only lowers bits of number\r\n  BN.prototype.maskn = function maskn (bits) {\r\n    return this.clone().imaskn(bits);\r\n  };\r\n\r\n  // Add plain number `num` to `this`\r\n  BN.prototype.iaddn = function iaddn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.isubn(-num);\r\n\r\n    // Possible sign change\r\n    if (this.negative !== 0) {\r\n      if (this.length === 1 && (this.words[0] | 0) <= num) {\r\n        this.words[0] = num - (this.words[0] | 0);\r\n        this.negative = 0;\r\n        return this;\r\n      }\r\n\r\n      this.negative = 0;\r\n      this.isubn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    // Add without checks\r\n    return this._iaddn(num);\r\n  };\r\n\r\n  BN.prototype._iaddn = function _iaddn (num) {\r\n    this.words[0] += num;\r\n\r\n    // Carry\r\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\r\n      this.words[i] -= 0x4000000;\r\n      if (i === this.length - 1) {\r\n        this.words[i + 1] = 1;\r\n      } else {\r\n        this.words[i + 1]++;\r\n      }\r\n    }\r\n    this.length = Math.max(this.length, i + 1);\r\n\r\n    return this;\r\n  };\r\n\r\n  // Subtract plain number `num` from `this`\r\n  BN.prototype.isubn = function isubn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.iaddn(-num);\r\n\r\n    if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iaddn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    this.words[0] -= num;\r\n\r\n    if (this.length === 1 && this.words[0] < 0) {\r\n      this.words[0] = -this.words[0];\r\n      this.negative = 1;\r\n    } else {\r\n      // Carry\r\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\r\n        this.words[i] += 0x4000000;\r\n        this.words[i + 1] -= 1;\r\n      }\r\n    }\r\n\r\n    return this._strip();\r\n  };\r\n\r\n  BN.prototype.addn = function addn (num) {\r\n    return this.clone().iaddn(num);\r\n  };\r\n\r\n  BN.prototype.subn = function subn (num) {\r\n    return this.clone().isubn(num);\r\n  };\r\n\r\n  BN.prototype.iabs = function iabs () {\r\n    this.negative = 0;\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.abs = function abs () {\r\n    return this.clone().iabs();\r\n  };\r\n\r\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\r\n    var len = num.length + shift;\r\n    var i;\r\n\r\n    this._expand(len);\r\n\r\n    var w;\r\n    var carry = 0;\r\n    for (i = 0; i < num.length; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      var right = (num.words[i] | 0) * mul;\r\n      w -= right & 0x3ffffff;\r\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n    for (; i < this.length - shift; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n\r\n    if (carry === 0) return this._strip();\r\n\r\n    // Subtraction overflow\r\n    assert(carry === -1);\r\n    carry = 0;\r\n    for (i = 0; i < this.length; i++) {\r\n      w = -(this.words[i] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i] = w & 0x3ffffff;\r\n    }\r\n    this.negative = 1;\r\n\r\n    return this._strip();\r\n  };\r\n\r\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\r\n    var shift = this.length - num.length;\r\n\r\n    var a = this.clone();\r\n    var b = num;\r\n\r\n    // Normalize\r\n    var bhi = b.words[b.length - 1] | 0;\r\n    var bhiBits = this._countBits(bhi);\r\n    shift = 26 - bhiBits;\r\n    if (shift !== 0) {\r\n      b = b.ushln(shift);\r\n      a.iushln(shift);\r\n      bhi = b.words[b.length - 1] | 0;\r\n    }\r\n\r\n    // Initialize quotient\r\n    var m = a.length - b.length;\r\n    var q;\r\n\r\n    if (mode !== 'mod') {\r\n      q = new BN(null);\r\n      q.length = m + 1;\r\n      q.words = new Array(q.length);\r\n      for (var i = 0; i < q.length; i++) {\r\n        q.words[i] = 0;\r\n      }\r\n    }\r\n\r\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\r\n    if (diff.negative === 0) {\r\n      a = diff;\r\n      if (q) {\r\n        q.words[m] = 1;\r\n      }\r\n    }\r\n\r\n    for (var j = m - 1; j >= 0; j--) {\r\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\r\n        (a.words[b.length + j - 1] | 0);\r\n\r\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\r\n      // (0x7ffffff)\r\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\r\n\r\n      a._ishlnsubmul(b, qj, j);\r\n      while (a.negative !== 0) {\r\n        qj--;\r\n        a.negative = 0;\r\n        a._ishlnsubmul(b, 1, j);\r\n        if (!a.isZero()) {\r\n          a.negative ^= 1;\r\n        }\r\n      }\r\n      if (q) {\r\n        q.words[j] = qj;\r\n      }\r\n    }\r\n    if (q) {\r\n      q._strip();\r\n    }\r\n    a._strip();\r\n\r\n    // Denormalize\r\n    if (mode !== 'div' && shift !== 0) {\r\n      a.iushrn(shift);\r\n    }\r\n\r\n    return {\r\n      div: q || null,\r\n      mod: a\r\n    };\r\n  };\r\n\r\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\r\n  //       to `div` to request div only, or be absent to\r\n  //       request both div & mod\r\n  //       2) `positive` is true if unsigned mod is requested\r\n  BN.prototype.divmod = function divmod (num, mode, positive) {\r\n    assert(!num.isZero());\r\n\r\n    if (this.isZero()) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: new BN(0)\r\n      };\r\n    }\r\n\r\n    var div, mod, res;\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      res = this.neg().divmod(num, mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.iadd(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    if (this.negative === 0 && num.negative !== 0) {\r\n      res = this.divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: res.mod\r\n      };\r\n    }\r\n\r\n    if ((this.negative & num.negative) !== 0) {\r\n      res = this.neg().divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.isub(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: res.div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    // Both numbers are positive at this point\r\n\r\n    // Strip both numbers to approximate shift value\r\n    if (num.length > this.length || this.cmp(num) < 0) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: this\r\n      };\r\n    }\r\n\r\n    // Very short reduction\r\n    if (num.length === 1) {\r\n      if (mode === 'div') {\r\n        return {\r\n          div: this.divn(num.words[0]),\r\n          mod: null\r\n        };\r\n      }\r\n\r\n      if (mode === 'mod') {\r\n        return {\r\n          div: null,\r\n          mod: new BN(this.modrn(num.words[0]))\r\n        };\r\n      }\r\n\r\n      return {\r\n        div: this.divn(num.words[0]),\r\n        mod: new BN(this.modrn(num.words[0]))\r\n      };\r\n    }\r\n\r\n    return this._wordDiv(num, mode);\r\n  };\r\n\r\n  // Find `this` / `num`\r\n  BN.prototype.div = function div (num) {\r\n    return this.divmod(num, 'div', false).div;\r\n  };\r\n\r\n  // Find `this` % `num`\r\n  BN.prototype.mod = function mod (num) {\r\n    return this.divmod(num, 'mod', false).mod;\r\n  };\r\n\r\n  BN.prototype.umod = function umod (num) {\r\n    return this.divmod(num, 'mod', true).mod;\r\n  };\r\n\r\n  // Find Round(`this` / `num`)\r\n  BN.prototype.divRound = function divRound (num) {\r\n    var dm = this.divmod(num);\r\n\r\n    // Fast case - exact division\r\n    if (dm.mod.isZero()) return dm.div;\r\n\r\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\r\n\r\n    var half = num.ushrn(1);\r\n    var r2 = num.andln(1);\r\n    var cmp = mod.cmp(half);\r\n\r\n    // Round down\r\n    if (cmp < 0 || (r2 === 1 && cmp === 0)) return dm.div;\r\n\r\n    // Round up\r\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\r\n  };\r\n\r\n  BN.prototype.modrn = function modrn (num) {\r\n    var isNegNum = num < 0;\r\n    if (isNegNum) num = -num;\r\n\r\n    assert(num <= 0x3ffffff);\r\n    var p = (1 << 26) % num;\r\n\r\n    var acc = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      acc = (p * acc + (this.words[i] | 0)) % num;\r\n    }\r\n\r\n    return isNegNum ? -acc : acc;\r\n  };\r\n\r\n  // WARNING: DEPRECATED\r\n  BN.prototype.modn = function modn (num) {\r\n    return this.modrn(num);\r\n  };\r\n\r\n  // In-place division by number\r\n  BN.prototype.idivn = function idivn (num) {\r\n    var isNegNum = num < 0;\r\n    if (isNegNum) num = -num;\r\n\r\n    assert(num <= 0x3ffffff);\r\n\r\n    var carry = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var w = (this.words[i] | 0) + carry * 0x4000000;\r\n      this.words[i] = (w / num) | 0;\r\n      carry = w % num;\r\n    }\r\n\r\n    this._strip();\r\n    return isNegNum ? this.ineg() : this;\r\n  };\r\n\r\n  BN.prototype.divn = function divn (num) {\r\n    return this.clone().idivn(num);\r\n  };\r\n\r\n  BN.prototype.egcd = function egcd (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var x = this;\r\n    var y = p.clone();\r\n\r\n    if (x.negative !== 0) {\r\n      x = x.umod(p);\r\n    } else {\r\n      x = x.clone();\r\n    }\r\n\r\n    // A * x + B * y = x\r\n    var A = new BN(1);\r\n    var B = new BN(0);\r\n\r\n    // C * x + D * y = y\r\n    var C = new BN(0);\r\n    var D = new BN(1);\r\n\r\n    var g = 0;\r\n\r\n    while (x.isEven() && y.isEven()) {\r\n      x.iushrn(1);\r\n      y.iushrn(1);\r\n      ++g;\r\n    }\r\n\r\n    var yp = y.clone();\r\n    var xp = x.clone();\r\n\r\n    while (!x.isZero()) {\r\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        x.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (A.isOdd() || B.isOdd()) {\r\n            A.iadd(yp);\r\n            B.isub(xp);\r\n          }\r\n\r\n          A.iushrn(1);\r\n          B.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        y.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (C.isOdd() || D.isOdd()) {\r\n            C.iadd(yp);\r\n            D.isub(xp);\r\n          }\r\n\r\n          C.iushrn(1);\r\n          D.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (x.cmp(y) >= 0) {\r\n        x.isub(y);\r\n        A.isub(C);\r\n        B.isub(D);\r\n      } else {\r\n        y.isub(x);\r\n        C.isub(A);\r\n        D.isub(B);\r\n      }\r\n    }\r\n\r\n    return {\r\n      a: C,\r\n      b: D,\r\n      gcd: y.iushln(g)\r\n    };\r\n  };\r\n\r\n  // This is reduced incarnation of the binary EEA\r\n  // above, designated to invert members of the\r\n  // _prime_ fields F(p) at a maximal speed\r\n  BN.prototype._invmp = function _invmp (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var a = this;\r\n    var b = p.clone();\r\n\r\n    if (a.negative !== 0) {\r\n      a = a.umod(p);\r\n    } else {\r\n      a = a.clone();\r\n    }\r\n\r\n    var x1 = new BN(1);\r\n    var x2 = new BN(0);\r\n\r\n    var delta = b.clone();\r\n\r\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\r\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        a.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (x1.isOdd()) {\r\n            x1.iadd(delta);\r\n          }\r\n\r\n          x1.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        b.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (x2.isOdd()) {\r\n            x2.iadd(delta);\r\n          }\r\n\r\n          x2.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (a.cmp(b) >= 0) {\r\n        a.isub(b);\r\n        x1.isub(x2);\r\n      } else {\r\n        b.isub(a);\r\n        x2.isub(x1);\r\n      }\r\n    }\r\n\r\n    var res;\r\n    if (a.cmpn(1) === 0) {\r\n      res = x1;\r\n    } else {\r\n      res = x2;\r\n    }\r\n\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(p);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gcd = function gcd (num) {\r\n    if (this.isZero()) return num.abs();\r\n    if (num.isZero()) return this.abs();\r\n\r\n    var a = this.clone();\r\n    var b = num.clone();\r\n    a.negative = 0;\r\n    b.negative = 0;\r\n\r\n    // Remove common factor of two\r\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\r\n      a.iushrn(1);\r\n      b.iushrn(1);\r\n    }\r\n\r\n    do {\r\n      while (a.isEven()) {\r\n        a.iushrn(1);\r\n      }\r\n      while (b.isEven()) {\r\n        b.iushrn(1);\r\n      }\r\n\r\n      var r = a.cmp(b);\r\n      if (r < 0) {\r\n        // Swap `a` and `b` to make `a` always bigger than `b`\r\n        var t = a;\r\n        a = b;\r\n        b = t;\r\n      } else if (r === 0 || b.cmpn(1) === 0) {\r\n        break;\r\n      }\r\n\r\n      a.isub(b);\r\n    } while (true);\r\n\r\n    return b.iushln(shift);\r\n  };\r\n\r\n  // Invert number in the field F(num)\r\n  BN.prototype.invm = function invm (num) {\r\n    return this.egcd(num).a.umod(num);\r\n  };\r\n\r\n  BN.prototype.isEven = function isEven () {\r\n    return (this.words[0] & 1) === 0;\r\n  };\r\n\r\n  BN.prototype.isOdd = function isOdd () {\r\n    return (this.words[0] & 1) === 1;\r\n  };\r\n\r\n  // And first word and num\r\n  BN.prototype.andln = function andln (num) {\r\n    return this.words[0] & num;\r\n  };\r\n\r\n  // Increment at the bit position in-line\r\n  BN.prototype.bincn = function bincn (bit) {\r\n    assert(typeof bit === 'number');\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) {\r\n      this._expand(s + 1);\r\n      this.words[s] |= q;\r\n      return this;\r\n    }\r\n\r\n    // Add bit and propagate, if needed\r\n    var carry = q;\r\n    for (var i = s; carry !== 0 && i < this.length; i++) {\r\n      var w = this.words[i] | 0;\r\n      w += carry;\r\n      carry = w >>> 26;\r\n      w &= 0x3ffffff;\r\n      this.words[i] = w;\r\n    }\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.isZero = function isZero () {\r\n    return this.length === 1 && this.words[0] === 0;\r\n  };\r\n\r\n  BN.prototype.cmpn = function cmpn (num) {\r\n    var negative = num < 0;\r\n\r\n    if (this.negative !== 0 && !negative) return -1;\r\n    if (this.negative === 0 && negative) return 1;\r\n\r\n    this._strip();\r\n\r\n    var res;\r\n    if (this.length > 1) {\r\n      res = 1;\r\n    } else {\r\n      if (negative) {\r\n        num = -num;\r\n      }\r\n\r\n      assert(num <= 0x3ffffff, 'Number is too big');\r\n\r\n      var w = this.words[0] | 0;\r\n      res = w === num ? 0 : w < num ? -1 : 1;\r\n    }\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Compare two numbers and return:\r\n  // 1 - if `this` > `num`\r\n  // 0 - if `this` == `num`\r\n  // -1 - if `this` < `num`\r\n  BN.prototype.cmp = function cmp (num) {\r\n    if (this.negative !== 0 && num.negative === 0) return -1;\r\n    if (this.negative === 0 && num.negative !== 0) return 1;\r\n\r\n    var res = this.ucmp(num);\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Unsigned comparison\r\n  BN.prototype.ucmp = function ucmp (num) {\r\n    // At this point both numbers have the same sign\r\n    if (this.length > num.length) return 1;\r\n    if (this.length < num.length) return -1;\r\n\r\n    var res = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var a = this.words[i] | 0;\r\n      var b = num.words[i] | 0;\r\n\r\n      if (a === b) continue;\r\n      if (a < b) {\r\n        res = -1;\r\n      } else if (a > b) {\r\n        res = 1;\r\n      }\r\n      break;\r\n    }\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gtn = function gtn (num) {\r\n    return this.cmpn(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gt = function gt (num) {\r\n    return this.cmp(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gten = function gten (num) {\r\n    return this.cmpn(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.gte = function gte (num) {\r\n    return this.cmp(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.ltn = function ltn (num) {\r\n    return this.cmpn(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lt = function lt (num) {\r\n    return this.cmp(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lten = function lten (num) {\r\n    return this.cmpn(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.lte = function lte (num) {\r\n    return this.cmp(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.eqn = function eqn (num) {\r\n    return this.cmpn(num) === 0;\r\n  };\r\n\r\n  BN.prototype.eq = function eq (num) {\r\n    return this.cmp(num) === 0;\r\n  };\r\n\r\n  //\r\n  // A reduce context, could be using montgomery or something better, depending\r\n  // on the `m` itself.\r\n  //\r\n  BN.red = function red (num) {\r\n    return new Red(num);\r\n  };\r\n\r\n  BN.prototype.toRed = function toRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    assert(this.negative === 0, 'red works only with positives');\r\n    return ctx.convertTo(this)._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.fromRed = function fromRed () {\r\n    assert(this.red, 'fromRed works only with numbers in reduction context');\r\n    return this.red.convertFrom(this);\r\n  };\r\n\r\n  BN.prototype._forceRed = function _forceRed (ctx) {\r\n    this.red = ctx;\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.forceRed = function forceRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    return this._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.redAdd = function redAdd (num) {\r\n    assert(this.red, 'redAdd works only with red numbers');\r\n    return this.red.add(this, num);\r\n  };\r\n\r\n  BN.prototype.redIAdd = function redIAdd (num) {\r\n    assert(this.red, 'redIAdd works only with red numbers');\r\n    return this.red.iadd(this, num);\r\n  };\r\n\r\n  BN.prototype.redSub = function redSub (num) {\r\n    assert(this.red, 'redSub works only with red numbers');\r\n    return this.red.sub(this, num);\r\n  };\r\n\r\n  BN.prototype.redISub = function redISub (num) {\r\n    assert(this.red, 'redISub works only with red numbers');\r\n    return this.red.isub(this, num);\r\n  };\r\n\r\n  BN.prototype.redShl = function redShl (num) {\r\n    assert(this.red, 'redShl works only with red numbers');\r\n    return this.red.shl(this, num);\r\n  };\r\n\r\n  BN.prototype.redMul = function redMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.mul(this, num);\r\n  };\r\n\r\n  BN.prototype.redIMul = function redIMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.imul(this, num);\r\n  };\r\n\r\n  BN.prototype.redSqr = function redSqr () {\r\n    assert(this.red, 'redSqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqr(this);\r\n  };\r\n\r\n  BN.prototype.redISqr = function redISqr () {\r\n    assert(this.red, 'redISqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.isqr(this);\r\n  };\r\n\r\n  // Square root over p\r\n  BN.prototype.redSqrt = function redSqrt () {\r\n    assert(this.red, 'redSqrt works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqrt(this);\r\n  };\r\n\r\n  BN.prototype.redInvm = function redInvm () {\r\n    assert(this.red, 'redInvm works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.invm(this);\r\n  };\r\n\r\n  // Return negative clone of `this` % `red modulo`\r\n  BN.prototype.redNeg = function redNeg () {\r\n    assert(this.red, 'redNeg works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.neg(this);\r\n  };\r\n\r\n  BN.prototype.redPow = function redPow (num) {\r\n    assert(this.red && !num.red, 'redPow(normalNum)');\r\n    this.red._verify1(this);\r\n    return this.red.pow(this, num);\r\n  };\r\n\r\n  // Prime numbers with efficient reduction\r\n  var primes = {\r\n    k256: null,\r\n    p224: null,\r\n    p192: null,\r\n    p25519: null\r\n  };\r\n\r\n  // Pseudo-Mersenne prime\r\n  function MPrime (name, p) {\r\n    // P = 2 ^ N - K\r\n    this.name = name;\r\n    this.p = new BN(p, 16);\r\n    this.n = this.p.bitLength();\r\n    this.k = new BN(1).iushln(this.n).isub(this.p);\r\n\r\n    this.tmp = this._tmp();\r\n  }\r\n\r\n  MPrime.prototype._tmp = function _tmp () {\r\n    var tmp = new BN(null);\r\n    tmp.words = new Array(Math.ceil(this.n / 13));\r\n    return tmp;\r\n  };\r\n\r\n  MPrime.prototype.ireduce = function ireduce (num) {\r\n    // Assumes that `num` is less than `P^2`\r\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\r\n    var r = num;\r\n    var rlen;\r\n\r\n    do {\r\n      this.split(r, this.tmp);\r\n      r = this.imulK(r);\r\n      r = r.iadd(this.tmp);\r\n      rlen = r.bitLength();\r\n    } while (rlen > this.n);\r\n\r\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\r\n    if (cmp === 0) {\r\n      r.words[0] = 0;\r\n      r.length = 1;\r\n    } else if (cmp > 0) {\r\n      r.isub(this.p);\r\n    } else {\r\n      if (r.strip !== undefined) {\r\n        // r is a BN v4 instance\r\n        r.strip();\r\n      } else {\r\n        // r is a BN v5 instance\r\n        r._strip();\r\n      }\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  MPrime.prototype.split = function split (input, out) {\r\n    input.iushrn(this.n, 0, out);\r\n  };\r\n\r\n  MPrime.prototype.imulK = function imulK (num) {\r\n    return num.imul(this.k);\r\n  };\r\n\r\n  function K256 () {\r\n    MPrime.call(\r\n      this,\r\n      'k256',\r\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\r\n  }\r\n  inherits(K256, MPrime);\r\n\r\n  K256.prototype.split = function split (input, output) {\r\n    // 256 = 9 * 26 + 22\r\n    var mask = 0x3fffff;\r\n\r\n    var outLen = Math.min(input.length, 9);\r\n    for (var i = 0; i < outLen; i++) {\r\n      output.words[i] = input.words[i];\r\n    }\r\n    output.length = outLen;\r\n\r\n    if (input.length <= 9) {\r\n      input.words[0] = 0;\r\n      input.length = 1;\r\n      return;\r\n    }\r\n\r\n    // Shift by 9 limbs\r\n    var prev = input.words[9];\r\n    output.words[output.length++] = prev & mask;\r\n\r\n    for (i = 10; i < input.length; i++) {\r\n      var next = input.words[i] | 0;\r\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\r\n      prev = next;\r\n    }\r\n    prev >>>= 22;\r\n    input.words[i - 10] = prev;\r\n    if (prev === 0 && input.length > 10) {\r\n      input.length -= 10;\r\n    } else {\r\n      input.length -= 9;\r\n    }\r\n  };\r\n\r\n  K256.prototype.imulK = function imulK (num) {\r\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\r\n    num.words[num.length] = 0;\r\n    num.words[num.length + 1] = 0;\r\n    num.length += 2;\r\n\r\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\r\n    var lo = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var w = num.words[i] | 0;\r\n      lo += w * 0x3d1;\r\n      num.words[i] = lo & 0x3ffffff;\r\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\r\n    }\r\n\r\n    // Fast length reduction\r\n    if (num.words[num.length - 1] === 0) {\r\n      num.length--;\r\n      if (num.words[num.length - 1] === 0) {\r\n        num.length--;\r\n      }\r\n    }\r\n    return num;\r\n  };\r\n\r\n  function P224 () {\r\n    MPrime.call(\r\n      this,\r\n      'p224',\r\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\r\n  }\r\n  inherits(P224, MPrime);\r\n\r\n  function P192 () {\r\n    MPrime.call(\r\n      this,\r\n      'p192',\r\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\r\n  }\r\n  inherits(P192, MPrime);\r\n\r\n  function P25519 () {\r\n    // 2 ^ 255 - 19\r\n    MPrime.call(\r\n      this,\r\n      '25519',\r\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\r\n  }\r\n  inherits(P25519, MPrime);\r\n\r\n  P25519.prototype.imulK = function imulK (num) {\r\n    // K = 0x13\r\n    var carry = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var hi = (num.words[i] | 0) * 0x13 + carry;\r\n      var lo = hi & 0x3ffffff;\r\n      hi >>>= 26;\r\n\r\n      num.words[i] = lo;\r\n      carry = hi;\r\n    }\r\n    if (carry !== 0) {\r\n      num.words[num.length++] = carry;\r\n    }\r\n    return num;\r\n  };\r\n\r\n  // Exported mostly for testing purposes, use plain name instead\r\n  BN._prime = function prime (name) {\r\n    // Cached version of prime\r\n    if (primes[name]) return primes[name];\r\n\r\n    var prime;\r\n    if (name === 'k256') {\r\n      prime = new K256();\r\n    } else if (name === 'p224') {\r\n      prime = new P224();\r\n    } else if (name === 'p192') {\r\n      prime = new P192();\r\n    } else if (name === 'p25519') {\r\n      prime = new P25519();\r\n    } else {\r\n      throw new Error('Unknown prime ' + name);\r\n    }\r\n    primes[name] = prime;\r\n\r\n    return prime;\r\n  };\r\n\r\n  //\r\n  // Base reduction engine\r\n  //\r\n  function Red (m) {\r\n    if (typeof m === 'string') {\r\n      var prime = BN._prime(m);\r\n      this.m = prime.p;\r\n      this.prime = prime;\r\n    } else {\r\n      assert(m.gtn(1), 'modulus must be greater than 1');\r\n      this.m = m;\r\n      this.prime = null;\r\n    }\r\n  }\r\n\r\n  Red.prototype._verify1 = function _verify1 (a) {\r\n    assert(a.negative === 0, 'red works only with positives');\r\n    assert(a.red, 'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype._verify2 = function _verify2 (a, b) {\r\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\r\n    assert(a.red && a.red === b.red,\r\n      'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype.imod = function imod (a) {\r\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\r\n\r\n    move(a, a.umod(this.m)._forceRed(this));\r\n    return a;\r\n  };\r\n\r\n  Red.prototype.neg = function neg (a) {\r\n    if (a.isZero()) {\r\n      return a.clone();\r\n    }\r\n\r\n    return this.m.sub(a)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.add = function add (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.add(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.iadd = function iadd (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.iadd(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.sub = function sub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.sub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.isub = function isub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.isub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.shl = function shl (a, num) {\r\n    this._verify1(a);\r\n    return this.imod(a.ushln(num));\r\n  };\r\n\r\n  Red.prototype.imul = function imul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.imul(b));\r\n  };\r\n\r\n  Red.prototype.mul = function mul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.mul(b));\r\n  };\r\n\r\n  Red.prototype.isqr = function isqr (a) {\r\n    return this.imul(a, a.clone());\r\n  };\r\n\r\n  Red.prototype.sqr = function sqr (a) {\r\n    return this.mul(a, a);\r\n  };\r\n\r\n  Red.prototype.sqrt = function sqrt (a) {\r\n    if (a.isZero()) return a.clone();\r\n\r\n    var mod3 = this.m.andln(3);\r\n    assert(mod3 % 2 === 1);\r\n\r\n    // Fast case\r\n    if (mod3 === 3) {\r\n      var pow = this.m.add(new BN(1)).iushrn(2);\r\n      return this.pow(a, pow);\r\n    }\r\n\r\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\r\n    //\r\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\r\n    var q = this.m.subn(1);\r\n    var s = 0;\r\n    while (!q.isZero() && q.andln(1) === 0) {\r\n      s++;\r\n      q.iushrn(1);\r\n    }\r\n    assert(!q.isZero());\r\n\r\n    var one = new BN(1).toRed(this);\r\n    var nOne = one.redNeg();\r\n\r\n    // Find quadratic non-residue\r\n    // NOTE: Max is such because of generalized Riemann hypothesis.\r\n    var lpow = this.m.subn(1).iushrn(1);\r\n    var z = this.m.bitLength();\r\n    z = new BN(2 * z * z).toRed(this);\r\n\r\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\r\n      z.redIAdd(nOne);\r\n    }\r\n\r\n    var c = this.pow(z, q);\r\n    var r = this.pow(a, q.addn(1).iushrn(1));\r\n    var t = this.pow(a, q);\r\n    var m = s;\r\n    while (t.cmp(one) !== 0) {\r\n      var tmp = t;\r\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\r\n        tmp = tmp.redSqr();\r\n      }\r\n      assert(i < m);\r\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\r\n\r\n      r = r.redMul(b);\r\n      c = b.redSqr();\r\n      t = t.redMul(c);\r\n      m = i;\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  Red.prototype.invm = function invm (a) {\r\n    var inv = a._invmp(this.m);\r\n    if (inv.negative !== 0) {\r\n      inv.negative = 0;\r\n      return this.imod(inv).redNeg();\r\n    } else {\r\n      return this.imod(inv);\r\n    }\r\n  };\r\n\r\n  Red.prototype.pow = function pow (a, num) {\r\n    if (num.isZero()) return new BN(1).toRed(this);\r\n    if (num.cmpn(1) === 0) return a.clone();\r\n\r\n    var windowSize = 4;\r\n    var wnd = new Array(1 << windowSize);\r\n    wnd[0] = new BN(1).toRed(this);\r\n    wnd[1] = a;\r\n    for (var i = 2; i < wnd.length; i++) {\r\n      wnd[i] = this.mul(wnd[i - 1], a);\r\n    }\r\n\r\n    var res = wnd[0];\r\n    var current = 0;\r\n    var currentLen = 0;\r\n    var start = num.bitLength() % 26;\r\n    if (start === 0) {\r\n      start = 26;\r\n    }\r\n\r\n    for (i = num.length - 1; i >= 0; i--) {\r\n      var word = num.words[i];\r\n      for (var j = start - 1; j >= 0; j--) {\r\n        var bit = (word >> j) & 1;\r\n        if (res !== wnd[0]) {\r\n          res = this.sqr(res);\r\n        }\r\n\r\n        if (bit === 0 && current === 0) {\r\n          currentLen = 0;\r\n          continue;\r\n        }\r\n\r\n        current <<= 1;\r\n        current |= bit;\r\n        currentLen++;\r\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\r\n\r\n        res = this.mul(res, wnd[current]);\r\n        currentLen = 0;\r\n        current = 0;\r\n      }\r\n      start = 26;\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.convertTo = function convertTo (num) {\r\n    var r = num.umod(this.m);\r\n\r\n    return r === num ? r.clone() : r;\r\n  };\r\n\r\n  Red.prototype.convertFrom = function convertFrom (num) {\r\n    var res = num.clone();\r\n    res.red = null;\r\n    return res;\r\n  };\r\n\r\n  //\r\n  // Montgomery method engine\r\n  //\r\n\r\n  BN.mont = function mont (num) {\r\n    return new Mont(num);\r\n  };\r\n\r\n  function Mont (m) {\r\n    Red.call(this, m);\r\n\r\n    this.shift = this.m.bitLength();\r\n    if (this.shift % 26 !== 0) {\r\n      this.shift += 26 - (this.shift % 26);\r\n    }\r\n\r\n    this.r = new BN(1).iushln(this.shift);\r\n    this.r2 = this.imod(this.r.sqr());\r\n    this.rinv = this.r._invmp(this.m);\r\n\r\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\r\n    this.minv = this.minv.umod(this.r);\r\n    this.minv = this.r.sub(this.minv);\r\n  }\r\n  inherits(Mont, Red);\r\n\r\n  Mont.prototype.convertTo = function convertTo (num) {\r\n    return this.imod(num.ushln(this.shift));\r\n  };\r\n\r\n  Mont.prototype.convertFrom = function convertFrom (num) {\r\n    var r = this.imod(num.mul(this.rinv));\r\n    r.red = null;\r\n    return r;\r\n  };\r\n\r\n  Mont.prototype.imul = function imul (a, b) {\r\n    if (a.isZero() || b.isZero()) {\r\n      a.words[0] = 0;\r\n      a.length = 1;\r\n      return a;\r\n    }\r\n\r\n    var t = a.imul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.mul = function mul (a, b) {\r\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\r\n\r\n    var t = a.mul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.invm = function invm (a) {\r\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\r\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\r\n    return res._forceRed(this);\r\n  };\r\n})( false || module, this);\r\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack://Game/./node_modules/bn.js/lib/bn.js?");

/***/ }),

/***/ "./node_modules/break_infinity.js/dist/break_infinity.esm.js":
/*!*******************************************************************!*\
  !*** ./node_modules/break_infinity.js/dist/break_infinity.esm.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var pad_end__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pad-end */ \"./node_modules/pad-end/index.js\");\n/* harmony import */ var pad_end__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pad_end__WEBPACK_IMPORTED_MODULE_0__);\n\n\n// consider adding them together pointless, just return the larger one\n\nvar MAX_SIGNIFICANT_DIGITS = 17; // Highest value you can safely put here is Number.MAX_SAFE_INTEGER-MAX_SIGNIFICANT_DIGITS\n\nvar EXP_LIMIT = 9e15; // The largest exponent that can appear in a Number, though not all mantissas are valid here.\n\nvar NUMBER_EXP_MAX = 308; // The smallest exponent that can appear in a Number, though not all mantissas are valid here.\n\nvar NUMBER_EXP_MIN = -324; // Tolerance which is used for Number conversion to compensate floating-point error.\n\nvar ROUND_TOLERANCE = 1e-10;\n\nvar powerOf10 = function () {\n  // We need this lookup table because Math.pow(10, exponent)\n  // when exponent's absolute value is large is slightly inaccurate.\n  // You can fix it with the power of math... or just make a lookup table.\n  // Faster AND simpler\n  var powersOf10 = [];\n\n  for (var i = NUMBER_EXP_MIN + 1; i <= NUMBER_EXP_MAX; i++) {\n    powersOf10.push(Number(\"1e\" + i));\n  }\n\n  var indexOf0InPowersOf10 = 323;\n  return function (power) {\n    return powersOf10[power + indexOf0InPowersOf10];\n  };\n}();\n\nvar D = function D(value) {\n  return value instanceof Decimal ? value : new Decimal(value);\n};\n\nvar ME = function ME(mantissa, exponent) {\n  return new Decimal().fromMantissaExponent(mantissa, exponent);\n};\n\nvar ME_NN = function ME_NN(mantissa, exponent) {\n  return new Decimal().fromMantissaExponent_noNormalize(mantissa, exponent);\n};\n\nfunction affordGeometricSeries(resourcesAvailable, priceStart, priceRatio, currentOwned) {\n  var actualStart = priceStart.mul(priceRatio.pow(currentOwned));\n  return Decimal.floor(resourcesAvailable.div(actualStart).mul(priceRatio.sub(1)).add(1).log10() / priceRatio.log10());\n}\n\nfunction sumGeometricSeries(numItems, priceStart, priceRatio, currentOwned) {\n  return priceStart.mul(priceRatio.pow(currentOwned)).mul(Decimal.sub(1, priceRatio.pow(numItems))).div(Decimal.sub(1, priceRatio));\n}\n\nfunction affordArithmeticSeries(resourcesAvailable, priceStart, priceAdd, currentOwned) {\n  // n = (-(a-d/2) + sqrt((a-d/2)^2+2dS))/d\n  // where a is actualStart, d is priceAdd and S is resourcesAvailable\n  // then floor it and you're done!\n  var actualStart = priceStart.add(currentOwned.mul(priceAdd));\n  var b = actualStart.sub(priceAdd.div(2));\n  var b2 = b.pow(2);\n  return b.neg().add(b2.add(priceAdd.mul(resourcesAvailable).mul(2)).sqrt()).div(priceAdd).floor();\n}\n\nfunction sumArithmeticSeries(numItems, priceStart, priceAdd, currentOwned) {\n  var actualStart = priceStart.add(currentOwned.mul(priceAdd)); // (n/2)*(2*a+(n-1)*d)\n\n  return numItems.div(2).mul(actualStart.mul(2).plus(numItems.sub(1).mul(priceAdd)));\n}\n\nfunction efficiencyOfPurchase(cost, currentRpS, deltaRpS) {\n  return cost.div(currentRpS).add(cost.div(deltaRpS));\n}\n/**\n * The Decimal's value is simply mantissa * 10^exponent.\n */\n\n\nvar Decimal =\n/** @class */\nfunction () {\n  function Decimal(value) {\n    /**\n     * A number (double) with absolute value between [1, 10) OR exactly 0.\n     * If mantissa is ever 10 or greater, it should be normalized\n     * (divide by 10 and add 1 to exponent until it is less than 10,\n     * or multiply by 10 and subtract 1 from exponent until it is 1 or greater).\n     * Infinity/-Infinity/NaN will cause bad things to happen.\n     */\n    this.mantissa = NaN;\n    /**\n     * A number (integer) between -EXP_LIMIT and EXP_LIMIT.\n     * Non-integral/out of bounds will cause bad things to happen.\n     */\n\n    this.exponent = NaN;\n\n    if (value === undefined) {\n      this.m = 0;\n      this.e = 0;\n    } else if (value instanceof Decimal) {\n      this.fromDecimal(value);\n    } else if (typeof value === \"number\") {\n      this.fromNumber(value);\n    } else {\n      this.fromString(value);\n    }\n  }\n\n  Object.defineProperty(Decimal.prototype, \"m\", {\n    get: function get() {\n      return this.mantissa;\n    },\n    set: function set(value) {\n      this.mantissa = value;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Decimal.prototype, \"e\", {\n    get: function get() {\n      return this.exponent;\n    },\n    set: function set(value) {\n      this.exponent = value;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Decimal.prototype, \"s\", {\n    get: function get() {\n      return this.sign();\n    },\n    set: function set(value) {\n      if (value === 0) {\n        this.e = 0;\n        this.m = 0;\n        return;\n      }\n\n      if (this.sgn() !== value) {\n        this.m = -this.m;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Decimal.fromMantissaExponent = function (mantissa, exponent) {\n    return new Decimal().fromMantissaExponent(mantissa, exponent);\n  };\n\n  Decimal.fromMantissaExponent_noNormalize = function (mantissa, exponent) {\n    return new Decimal().fromMantissaExponent_noNormalize(mantissa, exponent);\n  };\n\n  Decimal.fromDecimal = function (value) {\n    return new Decimal().fromDecimal(value);\n  };\n\n  Decimal.fromNumber = function (value) {\n    return new Decimal().fromNumber(value);\n  };\n\n  Decimal.fromString = function (value) {\n    return new Decimal().fromString(value);\n  };\n\n  Decimal.fromValue = function (value) {\n    return new Decimal().fromValue(value);\n  };\n\n  Decimal.fromValue_noAlloc = function (value) {\n    return value instanceof Decimal ? value : new Decimal(value);\n  };\n\n  Decimal.abs = function (value) {\n    return D(value).abs();\n  };\n\n  Decimal.neg = function (value) {\n    return D(value).neg();\n  };\n\n  Decimal.negate = function (value) {\n    return D(value).neg();\n  };\n\n  Decimal.negated = function (value) {\n    return D(value).neg();\n  };\n\n  Decimal.sign = function (value) {\n    return D(value).sign();\n  };\n\n  Decimal.sgn = function (value) {\n    return D(value).sign();\n  };\n\n  Decimal.round = function (value) {\n    return D(value).round();\n  };\n\n  Decimal.floor = function (value) {\n    return D(value).floor();\n  };\n\n  Decimal.ceil = function (value) {\n    return D(value).ceil();\n  };\n\n  Decimal.trunc = function (value) {\n    return D(value).trunc();\n  };\n\n  Decimal.add = function (value, other) {\n    return D(value).add(other);\n  };\n\n  Decimal.plus = function (value, other) {\n    return D(value).add(other);\n  };\n\n  Decimal.sub = function (value, other) {\n    return D(value).sub(other);\n  };\n\n  Decimal.subtract = function (value, other) {\n    return D(value).sub(other);\n  };\n\n  Decimal.minus = function (value, other) {\n    return D(value).sub(other);\n  };\n\n  Decimal.mul = function (value, other) {\n    return D(value).mul(other);\n  };\n\n  Decimal.multiply = function (value, other) {\n    return D(value).mul(other);\n  };\n\n  Decimal.times = function (value, other) {\n    return D(value).mul(other);\n  };\n\n  Decimal.div = function (value, other) {\n    return D(value).div(other);\n  };\n\n  Decimal.divide = function (value, other) {\n    return D(value).div(other);\n  };\n\n  Decimal.recip = function (value) {\n    return D(value).recip();\n  };\n\n  Decimal.reciprocal = function (value) {\n    return D(value).recip();\n  };\n\n  Decimal.reciprocate = function (value) {\n    return D(value).reciprocate();\n  };\n\n  Decimal.cmp = function (value, other) {\n    return D(value).cmp(other);\n  };\n\n  Decimal.compare = function (value, other) {\n    return D(value).cmp(other);\n  };\n\n  Decimal.eq = function (value, other) {\n    return D(value).eq(other);\n  };\n\n  Decimal.equals = function (value, other) {\n    return D(value).eq(other);\n  };\n\n  Decimal.neq = function (value, other) {\n    return D(value).neq(other);\n  };\n\n  Decimal.notEquals = function (value, other) {\n    return D(value).notEquals(other);\n  };\n\n  Decimal.lt = function (value, other) {\n    return D(value).lt(other);\n  };\n\n  Decimal.lte = function (value, other) {\n    return D(value).lte(other);\n  };\n\n  Decimal.gt = function (value, other) {\n    return D(value).gt(other);\n  };\n\n  Decimal.gte = function (value, other) {\n    return D(value).gte(other);\n  };\n\n  Decimal.max = function (value, other) {\n    return D(value).max(other);\n  };\n\n  Decimal.min = function (value, other) {\n    return D(value).min(other);\n  };\n\n  Decimal.clamp = function (value, min, max) {\n    return D(value).clamp(min, max);\n  };\n\n  Decimal.clampMin = function (value, min) {\n    return D(value).clampMin(min);\n  };\n\n  Decimal.clampMax = function (value, max) {\n    return D(value).clampMax(max);\n  };\n\n  Decimal.cmp_tolerance = function (value, other, tolerance) {\n    return D(value).cmp_tolerance(other, tolerance);\n  };\n\n  Decimal.compare_tolerance = function (value, other, tolerance) {\n    return D(value).cmp_tolerance(other, tolerance);\n  };\n\n  Decimal.eq_tolerance = function (value, other, tolerance) {\n    return D(value).eq_tolerance(other, tolerance);\n  };\n\n  Decimal.equals_tolerance = function (value, other, tolerance) {\n    return D(value).eq_tolerance(other, tolerance);\n  };\n\n  Decimal.neq_tolerance = function (value, other, tolerance) {\n    return D(value).neq_tolerance(other, tolerance);\n  };\n\n  Decimal.notEquals_tolerance = function (value, other, tolerance) {\n    return D(value).notEquals_tolerance(other, tolerance);\n  };\n\n  Decimal.lt_tolerance = function (value, other, tolerance) {\n    return D(value).lt_tolerance(other, tolerance);\n  };\n\n  Decimal.lte_tolerance = function (value, other, tolerance) {\n    return D(value).lte_tolerance(other, tolerance);\n  };\n\n  Decimal.gt_tolerance = function (value, other, tolerance) {\n    return D(value).gt_tolerance(other, tolerance);\n  };\n\n  Decimal.gte_tolerance = function (value, other, tolerance) {\n    return D(value).gte_tolerance(other, tolerance);\n  };\n\n  Decimal.log10 = function (value) {\n    return D(value).log10();\n  };\n\n  Decimal.absLog10 = function (value) {\n    return D(value).absLog10();\n  };\n\n  Decimal.pLog10 = function (value) {\n    return D(value).pLog10();\n  };\n\n  Decimal.log = function (value, base) {\n    return D(value).log(base);\n  };\n\n  Decimal.log2 = function (value) {\n    return D(value).log2();\n  };\n\n  Decimal.ln = function (value) {\n    return D(value).ln();\n  };\n\n  Decimal.logarithm = function (value, base) {\n    return D(value).logarithm(base);\n  };\n\n  Decimal.pow10 = function (value) {\n    if (Number.isInteger(value)) {\n      return ME_NN(1, value);\n    }\n\n    return ME(Math.pow(10, value % 1), Math.trunc(value));\n  };\n\n  Decimal.pow = function (value, other) {\n    // Fast track: 10^integer\n    if (typeof value === \"number\" && value === 10 && typeof other === \"number\" && Number.isInteger(other)) {\n      return ME_NN(1, other);\n    }\n\n    return D(value).pow(other);\n  };\n\n  Decimal.exp = function (value) {\n    return D(value).exp();\n  };\n\n  Decimal.sqr = function (value) {\n    return D(value).sqr();\n  };\n\n  Decimal.sqrt = function (value) {\n    return D(value).sqrt();\n  };\n\n  Decimal.cube = function (value) {\n    return D(value).cube();\n  };\n\n  Decimal.cbrt = function (value) {\n    return D(value).cbrt();\n  };\n\n  Decimal.dp = function (value) {\n    return D(value).dp();\n  };\n\n  Decimal.decimalPlaces = function (value) {\n    return D(value).dp();\n  };\n  /**\n   * If you're willing to spend 'resourcesAvailable' and want to buy something\n   * with exponentially increasing cost each purchase (start at priceStart,\n   * multiply by priceRatio, already own currentOwned), how much of it can you buy?\n   * Adapted from Trimps source code.\n   */\n\n\n  Decimal.affordGeometricSeries = function (resourcesAvailable, priceStart, priceRatio, currentOwned) {\n    return affordGeometricSeries(D(resourcesAvailable), D(priceStart), D(priceRatio), currentOwned);\n  };\n  /**\n   * How much resource would it cost to buy (numItems) items if you already have currentOwned,\n   * the initial price is priceStart and it multiplies by priceRatio each purchase?\n   */\n\n\n  Decimal.sumGeometricSeries = function (numItems, priceStart, priceRatio, currentOwned) {\n    return sumGeometricSeries(numItems, D(priceStart), D(priceRatio), currentOwned);\n  };\n  /**\n   * If you're willing to spend 'resourcesAvailable' and want to buy something with additively\n   * increasing cost each purchase (start at priceStart, add by priceAdd, already own currentOwned),\n   * how much of it can you buy?\n   */\n\n\n  Decimal.affordArithmeticSeries = function (resourcesAvailable, priceStart, priceAdd, currentOwned) {\n    return affordArithmeticSeries(D(resourcesAvailable), D(priceStart), D(priceAdd), D(currentOwned));\n  };\n  /**\n   * How much resource would it cost to buy (numItems) items if you already have currentOwned,\n   * the initial price is priceStart and it adds priceAdd each purchase?\n   * Adapted from http://www.mathwords.com/a/arithmetic_series.htm\n   */\n\n\n  Decimal.sumArithmeticSeries = function (numItems, priceStart, priceAdd, currentOwned) {\n    return sumArithmeticSeries(D(numItems), D(priceStart), D(priceAdd), D(currentOwned));\n  };\n  /**\n   * When comparing two purchases that cost (resource) and increase your resource/sec by (deltaRpS),\n   * the lowest efficiency score is the better one to purchase.\n   * From Frozen Cookies:\n   * http://cookieclicker.wikia.com/wiki/Frozen_Cookies_(JavaScript_Add-on)#Efficiency.3F_What.27s_that.3F\n   */\n\n\n  Decimal.efficiencyOfPurchase = function (cost, currentRpS, deltaRpS) {\n    return efficiencyOfPurchase(D(cost), D(currentRpS), D(deltaRpS));\n  };\n\n  Decimal.randomDecimalForTesting = function (absMaxExponent) {\n    // NOTE: This doesn't follow any kind of sane random distribution, so use this for testing purposes only.\n    // 5% of the time, have a mantissa of 0\n    if (Math.random() * 20 < 1) {\n      return ME_NN(0, 0);\n    }\n\n    var mantissa = Math.random() * 10; // 10% of the time, have a simple mantissa\n\n    if (Math.random() * 10 < 1) {\n      mantissa = Math.round(mantissa);\n    }\n\n    mantissa *= Math.sign(Math.random() * 2 - 1);\n    var exponent = Math.floor(Math.random() * absMaxExponent * 2) - absMaxExponent;\n    return ME(mantissa, exponent);\n    /*\n      Examples:\n            randomly test pow:\n            var a = Decimal.randomDecimalForTesting(1000);\n      var pow = Math.random()*20-10;\n      if (Math.random()*2 < 1) { pow = Math.round(pow); }\n      var result = Decimal.pow(a, pow);\n      [\"(\" + a.toString() + \")^\" + pow.toString(), result.toString()]\n            randomly test add:\n            var a = Decimal.randomDecimalForTesting(1000);\n      var b = Decimal.randomDecimalForTesting(17);\n      var c = a.mul(b);\n      var result = a.add(c);\n      [a.toString() + \"+\" + c.toString(), result.toString()]\n    */\n  };\n  /**\n   * When mantissa is very denormalized, use this to normalize much faster.\n   */\n\n\n  Decimal.prototype.normalize = function () {\n    if (this.m >= 1 && this.m < 10) {\n      return this;\n    } // TODO: I'm worried about mantissa being negative 0 here which is why I set it again, but it may never matter\n\n\n    if (this.m === 0) {\n      this.m = 0;\n      this.e = 0;\n      return this;\n    }\n\n    var tempExponent = Math.floor(Math.log10(Math.abs(this.m)));\n    this.m = tempExponent === NUMBER_EXP_MIN ? this.m * 10 / 1e-323 : this.m / powerOf10(tempExponent);\n    this.e += tempExponent;\n    return this;\n  };\n\n  Decimal.prototype.fromMantissaExponent = function (mantissa, exponent) {\n    // SAFETY: don't let in non-numbers\n    if (!isFinite(mantissa) || !isFinite(exponent)) {\n      mantissa = Number.NaN;\n      exponent = Number.NaN;\n      return this;\n    }\n\n    this.m = mantissa;\n    this.e = exponent; // Non-normalized mantissas can easily get here, so this is mandatory.\n\n    this.normalize();\n    return this;\n  };\n  /**\n   * Well, you know what you're doing!\n   */\n\n\n  Decimal.prototype.fromMantissaExponent_noNormalize = function (mantissa, exponent) {\n    this.m = mantissa;\n    this.e = exponent;\n    return this;\n  };\n\n  Decimal.prototype.fromDecimal = function (value) {\n    this.m = value.m;\n    this.e = value.e;\n    return this;\n  };\n\n  Decimal.prototype.fromNumber = function (value) {\n    // SAFETY: Handle Infinity and NaN in a somewhat meaningful way.\n    if (isNaN(value)) {\n      this.m = Number.NaN;\n      this.e = Number.NaN;\n    } else if (value === Number.POSITIVE_INFINITY) {\n      this.m = 1;\n      this.e = EXP_LIMIT;\n    } else if (value === Number.NEGATIVE_INFINITY) {\n      this.m = -1;\n      this.e = EXP_LIMIT;\n    } else if (value === 0) {\n      this.m = 0;\n      this.e = 0;\n    } else {\n      this.e = Math.floor(Math.log10(Math.abs(value))); // SAFETY: handle 5e-324, -5e-324 separately\n\n      this.m = this.e === NUMBER_EXP_MIN ? value * 10 / 1e-323 : value / powerOf10(this.e); // SAFETY: Prevent weirdness.\n\n      this.normalize();\n    }\n\n    return this;\n  };\n\n  Decimal.prototype.fromString = function (value) {\n    if (value.indexOf(\"e\") !== -1) {\n      var parts = value.split(\"e\");\n      this.m = parseFloat(parts[0]);\n      this.e = parseFloat(parts[1]); // Non-normalized mantissas can easily get here, so this is mandatory.\n\n      this.normalize();\n    } else if (value === \"NaN\") {\n      this.m = Number.NaN;\n      this.e = Number.NaN;\n    } else {\n      this.fromNumber(parseFloat(value));\n\n      if (isNaN(this.m)) {\n        throw Error(\"[DecimalError] Invalid argument: \" + value);\n      }\n    }\n\n    return this;\n  };\n\n  Decimal.prototype.fromValue = function (value) {\n    if (value instanceof Decimal) {\n      return this.fromDecimal(value);\n    }\n\n    if (typeof value === \"number\") {\n      return this.fromNumber(value);\n    }\n\n    if (typeof value === \"string\") {\n      return this.fromString(value);\n    }\n\n    this.m = 0;\n    this.e = 0;\n    return this;\n  };\n\n  Decimal.prototype.toNumber = function () {\n    // Problem: new Decimal(116).toNumber() returns 115.99999999999999.\n    // TODO: How to fix in general case? It's clear that if toNumber() is\n    //  VERY close to an integer, we want exactly the integer.\n    //  But it's not clear how to specifically write that.\n    //  So I'll just settle with 'exponent >= 0 and difference between rounded\n    //  and not rounded < 1e-9' as a quick fix.\n    // var result = this.m*Math.pow(10, this.e);\n    if (!isFinite(this.e)) {\n      return Number.NaN;\n    }\n\n    if (this.e > NUMBER_EXP_MAX) {\n      return this.m > 0 ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\n    }\n\n    if (this.e < NUMBER_EXP_MIN) {\n      return 0;\n    } // SAFETY: again, handle 5e-324, -5e-324 separately\n\n\n    if (this.e === NUMBER_EXP_MIN) {\n      return this.m > 0 ? 5e-324 : -5e-324;\n    }\n\n    var result = this.m * powerOf10(this.e);\n\n    if (!isFinite(result) || this.e < 0) {\n      return result;\n    }\n\n    var resultRounded = Math.round(result);\n\n    if (Math.abs(resultRounded - result) < ROUND_TOLERANCE) {\n      return resultRounded;\n    }\n\n    return result;\n  };\n\n  Decimal.prototype.mantissaWithDecimalPlaces = function (places) {\n    // https://stackoverflow.com/a/37425022\n    if (isNaN(this.m) || isNaN(this.e)) {\n      return Number.NaN;\n    }\n\n    if (this.m === 0) {\n      return 0;\n    }\n\n    var len = places + 1;\n    var numDigits = Math.ceil(Math.log10(Math.abs(this.m)));\n    var rounded = Math.round(this.m * Math.pow(10, len - numDigits)) * Math.pow(10, numDigits - len);\n    return parseFloat(rounded.toFixed(Math.max(len - numDigits, 0)));\n  };\n\n  Decimal.prototype.string = function () {\n    if (isNaN(this.m) || isNaN(this.e)) {\n      return \"NaN\";\n    }\n\n    if (this.e >= EXP_LIMIT) {\n      return this.m > 0 ? \"Infinity\" : \"-Infinity\";\n    }\n\n    if (this.e <= -EXP_LIMIT || this.m === 0) {\n      return \"0\";\n    }\n\n    if (this.e < 21 && this.e > -7) {\n      return this.toNumber().toString();\n    }\n\n    return this.m + \"e\" + (this.e >= 0 ? \"+\" : \"\") + this.e;\n  };\n\n  Decimal.prototype.toExponential = function (places) {\n    // https://stackoverflow.com/a/37425022\n    // TODO: Some unfixed cases:\n    //  new Decimal(\"1.2345e-999\").toExponential()\n    //  \"1.23450000000000015e-999\"\n    //  new Decimal(\"1e-999\").toExponential()\n    //  \"1.000000000000000000e-999\"\n    // TBH I'm tempted to just say it's a feature.\n    // If you're doing pretty formatting then why don't you know how many decimal places you want...?\n    if (isNaN(this.m) || isNaN(this.e)) {\n      return \"NaN\";\n    }\n\n    if (this.e >= EXP_LIMIT) {\n      return this.m > 0 ? \"Infinity\" : \"-Infinity\";\n    }\n\n    if (this.e <= -EXP_LIMIT || this.m === 0) {\n      return \"0\" + (places > 0 ? pad_end__WEBPACK_IMPORTED_MODULE_0___default()(\".\", places + 1, \"0\") : \"\") + \"e+0\";\n    } // two cases:\n    // 1) exponent is < 308 and > -324: use basic toFixed\n    // 2) everything else: we have to do it ourselves!\n\n\n    if (this.e > NUMBER_EXP_MIN && this.e < NUMBER_EXP_MAX) {\n      return this.toNumber().toExponential(places);\n    }\n\n    if (!isFinite(places)) {\n      places = MAX_SIGNIFICANT_DIGITS;\n    }\n\n    var len = places + 1;\n    var numDigits = Math.max(1, Math.ceil(Math.log10(Math.abs(this.m))));\n    var rounded = Math.round(this.m * Math.pow(10, len - numDigits)) * Math.pow(10, numDigits - len);\n    return rounded.toFixed(Math.max(len - numDigits, 0)) + \"e\" + (this.e >= 0 ? \"+\" : \"\") + this.e;\n  };\n\n  Decimal.prototype.toFixed = function (places) {\n    if (isNaN(this.m) || isNaN(this.e)) {\n      return \"NaN\";\n    }\n\n    if (this.e >= EXP_LIMIT) {\n      return this.m > 0 ? \"Infinity\" : \"-Infinity\";\n    }\n\n    if (this.e <= -EXP_LIMIT || this.m === 0) {\n      return \"0\" + (places > 0 ? pad_end__WEBPACK_IMPORTED_MODULE_0___default()(\".\", places + 1, \"0\") : \"\");\n    } // two cases:\n    // 1) exponent is 17 or greater: just print out mantissa with the appropriate number of zeroes after it\n    // 2) exponent is 16 or less: use basic toFixed\n\n\n    if (this.e >= MAX_SIGNIFICANT_DIGITS) {\n      return this.m.toString().replace(\".\", \"\").padEnd(this.e + 1, \"0\") + (places > 0 ? pad_end__WEBPACK_IMPORTED_MODULE_0___default()(\".\", places + 1, \"0\") : \"\");\n    }\n\n    return this.toNumber().toFixed(places);\n  };\n\n  Decimal.prototype.toPrecision = function (places) {\n    if (this.e <= -7) {\n      return this.toExponential(places - 1);\n    }\n\n    if (places > this.e) {\n      return this.toFixed(places - this.e - 1);\n    }\n\n    return this.toExponential(places - 1);\n  };\n\n  Decimal.prototype.valueOf = function () {\n    return this.string();\n  };\n  /*\n  public toJSON() {\n    return this.string();\n  }\n  */\n\n\n  Decimal.prototype.toStringWithDecimalPlaces = function (places) {\n    return this.toExponential(places);\n  };\n\n  Decimal.prototype.abs = function () {\n    return ME_NN(Math.abs(this.m), this.e);\n  };\n\n  Decimal.prototype.neg = function () {\n    return ME_NN(-this.m, this.e);\n  };\n\n  Decimal.prototype.negate = function () {\n    return this.neg();\n  };\n\n  Decimal.prototype.negated = function () {\n    return this.neg();\n  };\n\n  Decimal.prototype.sign = function () {\n    return Math.sign(this.m);\n  };\n\n  Decimal.prototype.sgn = function () {\n    return this.sign();\n  };\n\n  Decimal.prototype.round = function () {\n    if (this.e < -1) {\n      return new Decimal(0);\n    }\n\n    if (this.e < MAX_SIGNIFICANT_DIGITS) {\n      return new Decimal(Math.round(this.toNumber()));\n    }\n\n    return this;\n  };\n\n  Decimal.prototype.floor = function () {\n    if (this.e < -1) {\n      return Math.sign(this.m) >= 0 ? new Decimal(0) : new Decimal(-1);\n    }\n\n    if (this.e < MAX_SIGNIFICANT_DIGITS) {\n      return new Decimal(Math.floor(this.toNumber()));\n    }\n\n    return this;\n  };\n\n  Decimal.prototype.ceil = function () {\n    if (this.e < -1) {\n      return Math.sign(this.m) > 0 ? new Decimal(1) : new Decimal(0);\n    }\n\n    if (this.e < MAX_SIGNIFICANT_DIGITS) {\n      return new Decimal(Math.ceil(this.toNumber()));\n    }\n\n    return this;\n  };\n\n  Decimal.prototype.trunc = function () {\n    if (this.e < 0) {\n      return new Decimal(0);\n    }\n\n    if (this.e < MAX_SIGNIFICANT_DIGITS) {\n      return new Decimal(Math.trunc(this.toNumber()));\n    }\n\n    return this;\n  };\n\n  Decimal.prototype.add = function (value) {\n    // figure out which is bigger, shrink the mantissa of the smaller\n    // by the difference in exponents, add mantissas, normalize and return\n    // TODO: Optimizations and simplification may be possible, see https://github.com/Patashu/break_infinity.js/issues/8\n    var decimal = D(value);\n\n    if (this.m === 0) {\n      return decimal;\n    }\n\n    if (decimal.m === 0) {\n      return this;\n    }\n\n    var biggerDecimal;\n    var smallerDecimal;\n\n    if (this.e >= decimal.e) {\n      biggerDecimal = this;\n      smallerDecimal = decimal;\n    } else {\n      biggerDecimal = decimal;\n      smallerDecimal = this;\n    }\n\n    if (biggerDecimal.e - smallerDecimal.e > MAX_SIGNIFICANT_DIGITS) {\n      return biggerDecimal;\n    } // Have to do this because adding numbers that were once integers but scaled down is imprecise.\n    // Example: 299 + 18\n\n\n    return ME(Math.round(1e14 * biggerDecimal.m + 1e14 * smallerDecimal.m * powerOf10(smallerDecimal.e - biggerDecimal.e)), biggerDecimal.e - 14);\n  };\n\n  Decimal.prototype.plus = function (value) {\n    return this.add(value);\n  };\n\n  Decimal.prototype.sub = function (value) {\n    return this.add(D(value).neg());\n  };\n\n  Decimal.prototype.subtract = function (value) {\n    return this.sub(value);\n  };\n\n  Decimal.prototype.minus = function (value) {\n    return this.sub(value);\n  };\n\n  Decimal.prototype.mul = function (value) {\n    // This version avoids an extra conversion to Decimal, if possible. Since the\n    // mantissa is -10...10, any number short of MAX/10 can be safely multiplied in\n    if (typeof value === \"number\") {\n      if (value < 1e307 && value > -1e307) {\n        return ME(this.m * value, this.e);\n      } // If the value is larger than 1e307, we can divide that out of mantissa (since it's\n      // greater than 1, it won't underflow)\n\n\n      return ME(this.m * 1e-307 * value, this.e + 307);\n    }\n\n    var decimal = typeof value === \"string\" ? new Decimal(value) : value;\n    return ME(this.m * decimal.m, this.e + decimal.e);\n  };\n\n  Decimal.prototype.multiply = function (value) {\n    return this.mul(value);\n  };\n\n  Decimal.prototype.times = function (value) {\n    return this.mul(value);\n  };\n\n  Decimal.prototype.div = function (value) {\n    return this.mul(D(value).recip());\n  };\n\n  Decimal.prototype.divide = function (value) {\n    return this.div(value);\n  };\n\n  Decimal.prototype.divideBy = function (value) {\n    return this.div(value);\n  };\n\n  Decimal.prototype.dividedBy = function (value) {\n    return this.div(value);\n  };\n\n  Decimal.prototype.recip = function () {\n    return ME(1 / this.m, -this.e);\n  };\n\n  Decimal.prototype.reciprocal = function () {\n    return this.recip();\n  };\n\n  Decimal.prototype.reciprocate = function () {\n    return this.recip();\n  };\n  /**\n   * -1 for less than value, 0 for equals value, 1 for greater than value\n   */\n\n\n  Decimal.prototype.cmp = function (value) {\n    var decimal = D(value); // TODO: sign(a-b) might be better? https://github.com/Patashu/break_infinity.js/issues/12\n\n    /*\n    from smallest to largest:\n          -3e100\n    -1e100\n    -3e99\n    -1e99\n    -3e0\n    -1e0\n    -3e-99\n    -1e-99\n    -3e-100\n    -1e-100\n    0\n    1e-100\n    3e-100\n    1e-99\n    3e-99\n    1e0\n    3e0\n    1e99\n    3e99\n    1e100\n    3e100\n          */\n\n    if (this.m === 0) {\n      if (decimal.m === 0) {\n        return 0;\n      }\n\n      if (decimal.m < 0) {\n        return 1;\n      }\n\n      if (decimal.m > 0) {\n        return -1;\n      }\n    }\n\n    if (decimal.m === 0) {\n      if (this.m < 0) {\n        return -1;\n      }\n\n      if (this.m > 0) {\n        return 1;\n      }\n    }\n\n    if (this.m > 0) {\n      if (decimal.m < 0) {\n        return 1;\n      }\n\n      if (this.e > decimal.e) {\n        return 1;\n      }\n\n      if (this.e < decimal.e) {\n        return -1;\n      }\n\n      if (this.m > decimal.m) {\n        return 1;\n      }\n\n      if (this.m < decimal.m) {\n        return -1;\n      }\n\n      return 0;\n    }\n\n    if (this.m < 0) {\n      if (decimal.m > 0) {\n        return -1;\n      }\n\n      if (this.e > decimal.e) {\n        return -1;\n      }\n\n      if (this.e < decimal.e) {\n        return 1;\n      }\n\n      if (this.m > decimal.m) {\n        return 1;\n      }\n\n      if (this.m < decimal.m) {\n        return -1;\n      }\n\n      return 0;\n    }\n\n    throw Error(\"Unreachable code\");\n  };\n\n  Decimal.prototype.compare = function (value) {\n    return this.cmp(value);\n  };\n\n  Decimal.prototype.eq = function (value) {\n    var decimal = D(value);\n    return this.e === decimal.e && this.m === decimal.m;\n  };\n\n  Decimal.prototype.equals = function (value) {\n    return this.eq(value);\n  };\n\n  Decimal.prototype.neq = function (value) {\n    return !this.eq(value);\n  };\n\n  Decimal.prototype.notEquals = function (value) {\n    return this.neq(value);\n  };\n\n  Decimal.prototype.lt = function (value) {\n    var decimal = D(value);\n\n    if (this.m === 0) {\n      return decimal.m > 0;\n    }\n\n    if (decimal.m === 0) {\n      return this.m <= 0;\n    }\n\n    if (this.e === decimal.e) {\n      return this.m < decimal.m;\n    }\n\n    if (this.m > 0) {\n      return decimal.m > 0 && this.e < decimal.e;\n    }\n\n    return decimal.m > 0 || this.e > decimal.e;\n  };\n\n  Decimal.prototype.lte = function (value) {\n    return !this.gt(value);\n  };\n\n  Decimal.prototype.gt = function (value) {\n    var decimal = D(value);\n\n    if (this.m === 0) {\n      return decimal.m < 0;\n    }\n\n    if (decimal.m === 0) {\n      return this.m > 0;\n    }\n\n    if (this.e === decimal.e) {\n      return this.m > decimal.m;\n    }\n\n    if (this.m > 0) {\n      return decimal.m < 0 || this.e > decimal.e;\n    }\n\n    return decimal.m < 0 && this.e < decimal.e;\n  };\n\n  Decimal.prototype.gte = function (value) {\n    return !this.lt(value);\n  };\n\n  Decimal.prototype.max = function (value) {\n    var decimal = D(value);\n    return this.lt(decimal) ? decimal : this;\n  };\n\n  Decimal.prototype.min = function (value) {\n    var decimal = D(value);\n    return this.gt(decimal) ? decimal : this;\n  };\n\n  Decimal.prototype.clamp = function (min, max) {\n    return this.max(min).min(max);\n  };\n\n  Decimal.prototype.clampMin = function (min) {\n    return this.max(min);\n  };\n\n  Decimal.prototype.clampMax = function (max) {\n    return this.min(max);\n  };\n\n  Decimal.prototype.cmp_tolerance = function (value, tolerance) {\n    var decimal = D(value);\n    return this.eq_tolerance(decimal, tolerance) ? 0 : this.cmp(decimal);\n  };\n\n  Decimal.prototype.compare_tolerance = function (value, tolerance) {\n    return this.cmp_tolerance(value, tolerance);\n  };\n  /**\n   * Tolerance is a relative tolerance, multiplied by the greater of the magnitudes of the two arguments.\n   * For example, if you put in 1e-9, then any number closer to the\n   * larger number than (larger number)*1e-9 will be considered equal.\n   */\n\n\n  Decimal.prototype.eq_tolerance = function (value, tolerance) {\n    var decimal = D(value); // https://stackoverflow.com/a/33024979\n    // return abs(a-b) <= tolerance * max(abs(a), abs(b))\n\n    return Decimal.lte(this.sub(decimal).abs(), Decimal.max(this.abs(), decimal.abs()).mul(tolerance));\n  };\n\n  Decimal.prototype.equals_tolerance = function (value, tolerance) {\n    return this.eq_tolerance(value, tolerance);\n  };\n\n  Decimal.prototype.neq_tolerance = function (value, tolerance) {\n    return !this.eq_tolerance(value, tolerance);\n  };\n\n  Decimal.prototype.notEquals_tolerance = function (value, tolerance) {\n    return this.neq_tolerance(value, tolerance);\n  };\n\n  Decimal.prototype.lt_tolerance = function (value, tolerance) {\n    var decimal = D(value);\n    return !this.eq_tolerance(decimal, tolerance) && this.lt(decimal);\n  };\n\n  Decimal.prototype.lte_tolerance = function (value, tolerance) {\n    var decimal = D(value);\n    return this.eq_tolerance(decimal, tolerance) || this.lt(decimal);\n  };\n\n  Decimal.prototype.gt_tolerance = function (value, tolerance) {\n    var decimal = D(value);\n    return !this.eq_tolerance(decimal, tolerance) && this.gt(decimal);\n  };\n\n  Decimal.prototype.gte_tolerance = function (value, tolerance) {\n    var decimal = D(value);\n    return this.eq_tolerance(decimal, tolerance) || this.gt(decimal);\n  };\n\n  Decimal.prototype.log10 = function () {\n    return this.e + Math.log10(this.m);\n  };\n\n  Decimal.prototype.absLog10 = function () {\n    return this.e + Math.log10(Math.abs(this.m));\n  };\n\n  Decimal.prototype.pLog10 = function () {\n    return this.m <= 0 || this.e < 0 ? 0 : this.log10();\n  };\n\n  Decimal.prototype.log = function (base) {\n    // UN-SAFETY: Most incremental game cases are log(number := 1 or greater, base := 2 or greater).\n    // We assume this to be true and thus only need to return a number, not a Decimal,\n    // and don't do any other kind of error checking.\n    return Math.LN10 / Math.log(base) * this.log10();\n  };\n\n  Decimal.prototype.log2 = function () {\n    return 3.32192809488736234787 * this.log10();\n  };\n\n  Decimal.prototype.ln = function () {\n    return 2.30258509299404568402 * this.log10();\n  };\n\n  Decimal.prototype.logarithm = function (base) {\n    return this.log(base);\n  };\n\n  Decimal.prototype.pow = function (value) {\n    // UN-SAFETY: Accuracy not guaranteed beyond ~9~11 decimal places.\n    // TODO: Decimal.pow(new Decimal(0.5), 0); or Decimal.pow(new Decimal(1), -1);\n    //  makes an exponent of -0! Is a negative zero ever a problem?\n    var numberValue = value instanceof Decimal ? value.toNumber() : value; // TODO: Fast track seems about neutral for performance.\n    //  It might become faster if an integer pow is implemented,\n    //  or it might not be worth doing (see https://github.com/Patashu/break_infinity.js/issues/4 )\n    // Fast track: If (this.e*value) is an integer and mantissa^value\n    // fits in a Number, we can do a very fast method.\n\n    var temp = this.e * numberValue;\n    var newMantissa;\n\n    if (Number.isSafeInteger(temp)) {\n      newMantissa = Math.pow(this.m, numberValue);\n\n      if (isFinite(newMantissa) && newMantissa !== 0) {\n        return ME(newMantissa, temp);\n      }\n    } // Same speed and usually more accurate.\n\n\n    var newExponent = Math.trunc(temp);\n    var residue = temp - newExponent;\n    newMantissa = Math.pow(10, numberValue * Math.log10(this.m) + residue);\n\n    if (isFinite(newMantissa) && newMantissa !== 0) {\n      return ME(newMantissa, newExponent);\n    } // return Decimal.exp(value*this.ln());\n    // UN-SAFETY: This should return NaN when mantissa is negative and value is non-integer.\n\n\n    var result = Decimal.pow10(numberValue * this.absLog10()); // this is 2x faster and gives same values AFAIK\n\n    if (this.sign() === -1 && numberValue % 2 === 1) {\n      return result.neg();\n    }\n\n    return result;\n  };\n\n  Decimal.prototype.pow_base = function (value) {\n    return D(value).pow(this);\n  };\n\n  Decimal.prototype.factorial = function () {\n    // Using Stirling's Approximation.\n    // https://en.wikipedia.org/wiki/Stirling%27s_approximation#Versions_suitable_for_calculators\n    var n = this.toNumber() + 1;\n    return Decimal.pow(n / Math.E * Math.sqrt(n * Math.sinh(1 / n) + 1 / (810 * Math.pow(n, 6))), n).mul(Math.sqrt(2 * Math.PI / n));\n  };\n\n  Decimal.prototype.exp = function () {\n    var x = this.toNumber(); // Fast track: if -706 < this < 709, we can use regular exp.\n\n    if (-706 < x && x < 709) {\n      return Decimal.fromNumber(Math.exp(x));\n    }\n\n    return Decimal.pow(Math.E, x);\n  };\n\n  Decimal.prototype.sqr = function () {\n    return ME(Math.pow(this.m, 2), this.e * 2);\n  };\n\n  Decimal.prototype.sqrt = function () {\n    if (this.m < 0) {\n      return new Decimal(Number.NaN);\n    }\n\n    if (this.e % 2 !== 0) {\n      return ME(Math.sqrt(this.m) * 3.16227766016838, Math.floor(this.e / 2));\n    } // Mod of a negative number is negative, so != means '1 or -1'\n\n\n    return ME(Math.sqrt(this.m), Math.floor(this.e / 2));\n  };\n\n  Decimal.prototype.cube = function () {\n    return ME(Math.pow(this.m, 3), this.e * 3);\n  };\n\n  Decimal.prototype.cbrt = function () {\n    var sign = 1;\n    var mantissa = this.m;\n\n    if (mantissa < 0) {\n      sign = -1;\n      mantissa = -mantissa;\n    }\n\n    var newMantissa = sign * Math.pow(mantissa, 1 / 3);\n    var mod = this.e % 3;\n\n    if (mod === 1 || mod === -1) {\n      return ME(newMantissa * 2.1544346900318837, Math.floor(this.e / 3));\n    }\n\n    if (mod !== 0) {\n      return ME(newMantissa * 4.6415888336127789, Math.floor(this.e / 3));\n    } // mod != 0 at this point means 'mod == 2 || mod == -2'\n\n\n    return ME(newMantissa, Math.floor(this.e / 3));\n  }; // Some hyperbolic trig functions that happen to be easy\n\n\n  Decimal.prototype.sinh = function () {\n    return this.exp().sub(this.negate().exp()).div(2);\n  };\n\n  Decimal.prototype.cosh = function () {\n    return this.exp().add(this.negate().exp()).div(2);\n  };\n\n  Decimal.prototype.tanh = function () {\n    return this.sinh().div(this.cosh());\n  };\n\n  Decimal.prototype.asinh = function () {\n    return Decimal.ln(this.add(this.sqr().add(1).sqrt()));\n  };\n\n  Decimal.prototype.acosh = function () {\n    return Decimal.ln(this.add(this.sqr().sub(1).sqrt()));\n  };\n\n  Decimal.prototype.atanh = function () {\n    if (this.abs().gte(1)) {\n      return Number.NaN;\n    }\n\n    return Decimal.ln(this.add(1).div(new Decimal(1).sub(this))) / 2;\n  };\n  /**\n   * Joke function from Realm Grinder\n   */\n\n\n  Decimal.prototype.ascensionPenalty = function (ascensions) {\n    if (ascensions === 0) {\n      return this;\n    }\n\n    return this.pow(Math.pow(10, -ascensions));\n  };\n  /**\n   * Joke function from Cookie Clicker. It's 'egg'\n   */\n\n\n  Decimal.prototype.egg = function () {\n    return this.add(9);\n  };\n\n  Decimal.prototype.lessThanOrEqualTo = function (other) {\n    return this.cmp(other) < 1;\n  };\n\n  Decimal.prototype.lessThan = function (other) {\n    return this.cmp(other) < 0;\n  };\n\n  Decimal.prototype.greaterThanOrEqualTo = function (other) {\n    return this.cmp(other) > -1;\n  };\n\n  Decimal.prototype.greaterThan = function (other) {\n    return this.cmp(other) > 0;\n  };\n\n  Decimal.prototype.decimalPlaces = function () {\n    return this.dp();\n  };\n\n  Decimal.prototype.dp = function () {\n    if (!isFinite(this.mantissa)) {\n      return NaN;\n    }\n\n    if (this.exponent >= MAX_SIGNIFICANT_DIGITS) {\n      return 0;\n    }\n\n    var mantissa = this.mantissa;\n    var places = -this.exponent;\n    var e = 1;\n\n    while (Math.abs(Math.round(mantissa * e) / e - mantissa) > ROUND_TOLERANCE) {\n      e *= 10;\n      places++;\n    }\n\n    return places > 0 ? places : 0;\n  };\n\n  Object.defineProperty(Decimal, \"MAX_VALUE\", {\n    get: function get() {\n      return MAX_VALUE;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Decimal, \"MIN_VALUE\", {\n    get: function get() {\n      return MIN_VALUE;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Decimal, \"NUMBER_MAX_VALUE\", {\n    get: function get() {\n      return NUMBER_MAX_VALUE;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Decimal, \"NUMBER_MIN_VALUE\", {\n    get: function get() {\n      return NUMBER_MIN_VALUE;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return Decimal;\n}();\nvar MAX_VALUE = ME_NN(1, EXP_LIMIT);\nvar MIN_VALUE = ME_NN(1, -EXP_LIMIT);\nvar NUMBER_MAX_VALUE = D(Number.MAX_VALUE);\nvar NUMBER_MIN_VALUE = D(Number.MIN_VALUE);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Decimal);\n\n\n//# sourceURL=webpack://Game/./node_modules/break_infinity.js/dist/break_infinity.esm.js?");

/***/ }),

/***/ "./node_modules/brorand/index.js":
/*!***************************************!*\
  !*** ./node_modules/brorand/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var r;\n\nmodule.exports = function rand(len) {\n  if (!r)\n    r = new Rand(null);\n\n  return r.generate(len);\n};\n\nfunction Rand(rand) {\n  this.rand = rand;\n}\nmodule.exports.Rand = Rand;\n\nRand.prototype.generate = function generate(len) {\n  return this._rand(len);\n};\n\n// Emulate crypto API using randy\nRand.prototype._rand = function _rand(n) {\n  if (this.rand.getBytes)\n    return this.rand.getBytes(n);\n\n  var res = new Uint8Array(n);\n  for (var i = 0; i < res.length; i++)\n    res[i] = this.rand.getByte();\n  return res;\n};\n\nif (typeof self === 'object') {\n  if (self.crypto && self.crypto.getRandomValues) {\n    // Modern browsers\n    Rand.prototype._rand = function _rand(n) {\n      var arr = new Uint8Array(n);\n      self.crypto.getRandomValues(arr);\n      return arr;\n    };\n  } else if (self.msCrypto && self.msCrypto.getRandomValues) {\n    // IE\n    Rand.prototype._rand = function _rand(n) {\n      var arr = new Uint8Array(n);\n      self.msCrypto.getRandomValues(arr);\n      return arr;\n    };\n\n  // Safari's WebWorkers do not have `crypto`\n  } else if (typeof window === 'object') {\n    // Old junk\n    Rand.prototype._rand = function() {\n      throw new Error('Not implemented yet');\n    };\n  }\n} else {\n  // Node.js or Web worker with no crypto support\n  try {\n    var crypto = __webpack_require__(/*! crypto */ 7);\n    if (typeof crypto.randomBytes !== 'function')\n      throw new Error('Not supported');\n\n    Rand.prototype._rand = function _rand(n) {\n      return crypto.randomBytes(n);\n    };\n  } catch (e) {\n  }\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/brorand/index.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/aes.js":
/*!********************************************!*\
  !*** ./node_modules/browserify-aes/aes.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// based on the aes implimentation in triple sec\n// https://github.com/keybase/triplesec\n// which is in turn based on the one from crypto-js\n// https://code.google.com/p/crypto-js/\n\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nfunction asUInt32Array (buf) {\n  if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n\n  var len = (buf.length / 4) | 0\n  var out = new Array(len)\n\n  for (var i = 0; i < len; i++) {\n    out[i] = buf.readUInt32BE(i * 4)\n  }\n\n  return out\n}\n\nfunction scrubVec (v) {\n  for (var i = 0; i < v.length; v++) {\n    v[i] = 0\n  }\n}\n\nfunction cryptBlock (M, keySchedule, SUB_MIX, SBOX, nRounds) {\n  var SUB_MIX0 = SUB_MIX[0]\n  var SUB_MIX1 = SUB_MIX[1]\n  var SUB_MIX2 = SUB_MIX[2]\n  var SUB_MIX3 = SUB_MIX[3]\n\n  var s0 = M[0] ^ keySchedule[0]\n  var s1 = M[1] ^ keySchedule[1]\n  var s2 = M[2] ^ keySchedule[2]\n  var s3 = M[3] ^ keySchedule[3]\n  var t0, t1, t2, t3\n  var ksRow = 4\n\n  for (var round = 1; round < nRounds; round++) {\n    t0 = SUB_MIX0[s0 >>> 24] ^ SUB_MIX1[(s1 >>> 16) & 0xff] ^ SUB_MIX2[(s2 >>> 8) & 0xff] ^ SUB_MIX3[s3 & 0xff] ^ keySchedule[ksRow++]\n    t1 = SUB_MIX0[s1 >>> 24] ^ SUB_MIX1[(s2 >>> 16) & 0xff] ^ SUB_MIX2[(s3 >>> 8) & 0xff] ^ SUB_MIX3[s0 & 0xff] ^ keySchedule[ksRow++]\n    t2 = SUB_MIX0[s2 >>> 24] ^ SUB_MIX1[(s3 >>> 16) & 0xff] ^ SUB_MIX2[(s0 >>> 8) & 0xff] ^ SUB_MIX3[s1 & 0xff] ^ keySchedule[ksRow++]\n    t3 = SUB_MIX0[s3 >>> 24] ^ SUB_MIX1[(s0 >>> 16) & 0xff] ^ SUB_MIX2[(s1 >>> 8) & 0xff] ^ SUB_MIX3[s2 & 0xff] ^ keySchedule[ksRow++]\n    s0 = t0\n    s1 = t1\n    s2 = t2\n    s3 = t3\n  }\n\n  t0 = ((SBOX[s0 >>> 24] << 24) | (SBOX[(s1 >>> 16) & 0xff] << 16) | (SBOX[(s2 >>> 8) & 0xff] << 8) | SBOX[s3 & 0xff]) ^ keySchedule[ksRow++]\n  t1 = ((SBOX[s1 >>> 24] << 24) | (SBOX[(s2 >>> 16) & 0xff] << 16) | (SBOX[(s3 >>> 8) & 0xff] << 8) | SBOX[s0 & 0xff]) ^ keySchedule[ksRow++]\n  t2 = ((SBOX[s2 >>> 24] << 24) | (SBOX[(s3 >>> 16) & 0xff] << 16) | (SBOX[(s0 >>> 8) & 0xff] << 8) | SBOX[s1 & 0xff]) ^ keySchedule[ksRow++]\n  t3 = ((SBOX[s3 >>> 24] << 24) | (SBOX[(s0 >>> 16) & 0xff] << 16) | (SBOX[(s1 >>> 8) & 0xff] << 8) | SBOX[s2 & 0xff]) ^ keySchedule[ksRow++]\n  t0 = t0 >>> 0\n  t1 = t1 >>> 0\n  t2 = t2 >>> 0\n  t3 = t3 >>> 0\n\n  return [t0, t1, t2, t3]\n}\n\n// AES constants\nvar RCON = [0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36]\nvar G = (function () {\n  // Compute double table\n  var d = new Array(256)\n  for (var j = 0; j < 256; j++) {\n    if (j < 128) {\n      d[j] = j << 1\n    } else {\n      d[j] = (j << 1) ^ 0x11b\n    }\n  }\n\n  var SBOX = []\n  var INV_SBOX = []\n  var SUB_MIX = [[], [], [], []]\n  var INV_SUB_MIX = [[], [], [], []]\n\n  // Walk GF(2^8)\n  var x = 0\n  var xi = 0\n  for (var i = 0; i < 256; ++i) {\n    // Compute sbox\n    var sx = xi ^ (xi << 1) ^ (xi << 2) ^ (xi << 3) ^ (xi << 4)\n    sx = (sx >>> 8) ^ (sx & 0xff) ^ 0x63\n    SBOX[x] = sx\n    INV_SBOX[sx] = x\n\n    // Compute multiplication\n    var x2 = d[x]\n    var x4 = d[x2]\n    var x8 = d[x4]\n\n    // Compute sub bytes, mix columns tables\n    var t = (d[sx] * 0x101) ^ (sx * 0x1010100)\n    SUB_MIX[0][x] = (t << 24) | (t >>> 8)\n    SUB_MIX[1][x] = (t << 16) | (t >>> 16)\n    SUB_MIX[2][x] = (t << 8) | (t >>> 24)\n    SUB_MIX[3][x] = t\n\n    // Compute inv sub bytes, inv mix columns tables\n    t = (x8 * 0x1010101) ^ (x4 * 0x10001) ^ (x2 * 0x101) ^ (x * 0x1010100)\n    INV_SUB_MIX[0][sx] = (t << 24) | (t >>> 8)\n    INV_SUB_MIX[1][sx] = (t << 16) | (t >>> 16)\n    INV_SUB_MIX[2][sx] = (t << 8) | (t >>> 24)\n    INV_SUB_MIX[3][sx] = t\n\n    if (x === 0) {\n      x = xi = 1\n    } else {\n      x = x2 ^ d[d[d[x8 ^ x2]]]\n      xi ^= d[d[xi]]\n    }\n  }\n\n  return {\n    SBOX: SBOX,\n    INV_SBOX: INV_SBOX,\n    SUB_MIX: SUB_MIX,\n    INV_SUB_MIX: INV_SUB_MIX\n  }\n})()\n\nfunction AES (key) {\n  this._key = asUInt32Array(key)\n  this._reset()\n}\n\nAES.blockSize = 4 * 4\nAES.keySize = 256 / 8\nAES.prototype.blockSize = AES.blockSize\nAES.prototype.keySize = AES.keySize\nAES.prototype._reset = function () {\n  var keyWords = this._key\n  var keySize = keyWords.length\n  var nRounds = keySize + 6\n  var ksRows = (nRounds + 1) * 4\n\n  var keySchedule = []\n  for (var k = 0; k < keySize; k++) {\n    keySchedule[k] = keyWords[k]\n  }\n\n  for (k = keySize; k < ksRows; k++) {\n    var t = keySchedule[k - 1]\n\n    if (k % keySize === 0) {\n      t = (t << 8) | (t >>> 24)\n      t =\n        (G.SBOX[t >>> 24] << 24) |\n        (G.SBOX[(t >>> 16) & 0xff] << 16) |\n        (G.SBOX[(t >>> 8) & 0xff] << 8) |\n        (G.SBOX[t & 0xff])\n\n      t ^= RCON[(k / keySize) | 0] << 24\n    } else if (keySize > 6 && k % keySize === 4) {\n      t =\n        (G.SBOX[t >>> 24] << 24) |\n        (G.SBOX[(t >>> 16) & 0xff] << 16) |\n        (G.SBOX[(t >>> 8) & 0xff] << 8) |\n        (G.SBOX[t & 0xff])\n    }\n\n    keySchedule[k] = keySchedule[k - keySize] ^ t\n  }\n\n  var invKeySchedule = []\n  for (var ik = 0; ik < ksRows; ik++) {\n    var ksR = ksRows - ik\n    var tt = keySchedule[ksR - (ik % 4 ? 0 : 4)]\n\n    if (ik < 4 || ksR <= 4) {\n      invKeySchedule[ik] = tt\n    } else {\n      invKeySchedule[ik] =\n        G.INV_SUB_MIX[0][G.SBOX[tt >>> 24]] ^\n        G.INV_SUB_MIX[1][G.SBOX[(tt >>> 16) & 0xff]] ^\n        G.INV_SUB_MIX[2][G.SBOX[(tt >>> 8) & 0xff]] ^\n        G.INV_SUB_MIX[3][G.SBOX[tt & 0xff]]\n    }\n  }\n\n  this._nRounds = nRounds\n  this._keySchedule = keySchedule\n  this._invKeySchedule = invKeySchedule\n}\n\nAES.prototype.encryptBlockRaw = function (M) {\n  M = asUInt32Array(M)\n  return cryptBlock(M, this._keySchedule, G.SUB_MIX, G.SBOX, this._nRounds)\n}\n\nAES.prototype.encryptBlock = function (M) {\n  var out = this.encryptBlockRaw(M)\n  var buf = Buffer.allocUnsafe(16)\n  buf.writeUInt32BE(out[0], 0)\n  buf.writeUInt32BE(out[1], 4)\n  buf.writeUInt32BE(out[2], 8)\n  buf.writeUInt32BE(out[3], 12)\n  return buf\n}\n\nAES.prototype.decryptBlock = function (M) {\n  M = asUInt32Array(M)\n\n  // swap\n  var m1 = M[1]\n  M[1] = M[3]\n  M[3] = m1\n\n  var out = cryptBlock(M, this._invKeySchedule, G.INV_SUB_MIX, G.INV_SBOX, this._nRounds)\n  var buf = Buffer.allocUnsafe(16)\n  buf.writeUInt32BE(out[0], 0)\n  buf.writeUInt32BE(out[3], 4)\n  buf.writeUInt32BE(out[2], 8)\n  buf.writeUInt32BE(out[1], 12)\n  return buf\n}\n\nAES.prototype.scrub = function () {\n  scrubVec(this._keySchedule)\n  scrubVec(this._invKeySchedule)\n  scrubVec(this._key)\n}\n\nmodule.exports.AES = AES\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/aes.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/authCipher.js":
/*!***************************************************!*\
  !*** ./node_modules/browserify-aes/authCipher.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var aes = __webpack_require__(/*! ./aes */ \"./node_modules/browserify-aes/aes.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\nvar Transform = __webpack_require__(/*! cipher-base */ \"./node_modules/cipher-base/index.js\")\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\nvar GHASH = __webpack_require__(/*! ./ghash */ \"./node_modules/browserify-aes/ghash.js\")\nvar xor = __webpack_require__(/*! buffer-xor */ \"./node_modules/buffer-xor/index.js\")\nvar incr32 = __webpack_require__(/*! ./incr32 */ \"./node_modules/browserify-aes/incr32.js\")\n\nfunction xorTest (a, b) {\n  var out = 0\n  if (a.length !== b.length) out++\n\n  var len = Math.min(a.length, b.length)\n  for (var i = 0; i < len; ++i) {\n    out += (a[i] ^ b[i])\n  }\n\n  return out\n}\n\nfunction calcIv (self, iv, ck) {\n  if (iv.length === 12) {\n    self._finID = Buffer.concat([iv, Buffer.from([0, 0, 0, 1])])\n    return Buffer.concat([iv, Buffer.from([0, 0, 0, 2])])\n  }\n  var ghash = new GHASH(ck)\n  var len = iv.length\n  var toPad = len % 16\n  ghash.update(iv)\n  if (toPad) {\n    toPad = 16 - toPad\n    ghash.update(Buffer.alloc(toPad, 0))\n  }\n  ghash.update(Buffer.alloc(8, 0))\n  var ivBits = len * 8\n  var tail = Buffer.alloc(8)\n  tail.writeUIntBE(ivBits, 0, 8)\n  ghash.update(tail)\n  self._finID = ghash.state\n  var out = Buffer.from(self._finID)\n  incr32(out)\n  return out\n}\nfunction StreamCipher (mode, key, iv, decrypt) {\n  Transform.call(this)\n\n  var h = Buffer.alloc(4, 0)\n\n  this._cipher = new aes.AES(key)\n  var ck = this._cipher.encryptBlock(h)\n  this._ghash = new GHASH(ck)\n  iv = calcIv(this, iv, ck)\n\n  this._prev = Buffer.from(iv)\n  this._cache = Buffer.allocUnsafe(0)\n  this._secCache = Buffer.allocUnsafe(0)\n  this._decrypt = decrypt\n  this._alen = 0\n  this._len = 0\n  this._mode = mode\n\n  this._authTag = null\n  this._called = false\n}\n\ninherits(StreamCipher, Transform)\n\nStreamCipher.prototype._update = function (chunk) {\n  if (!this._called && this._alen) {\n    var rump = 16 - (this._alen % 16)\n    if (rump < 16) {\n      rump = Buffer.alloc(rump, 0)\n      this._ghash.update(rump)\n    }\n  }\n\n  this._called = true\n  var out = this._mode.encrypt(this, chunk)\n  if (this._decrypt) {\n    this._ghash.update(chunk)\n  } else {\n    this._ghash.update(out)\n  }\n  this._len += chunk.length\n  return out\n}\n\nStreamCipher.prototype._final = function () {\n  if (this._decrypt && !this._authTag) throw new Error('Unsupported state or unable to authenticate data')\n\n  var tag = xor(this._ghash.final(this._alen * 8, this._len * 8), this._cipher.encryptBlock(this._finID))\n  if (this._decrypt && xorTest(tag, this._authTag)) throw new Error('Unsupported state or unable to authenticate data')\n\n  this._authTag = tag\n  this._cipher.scrub()\n}\n\nStreamCipher.prototype.getAuthTag = function getAuthTag () {\n  if (this._decrypt || !Buffer.isBuffer(this._authTag)) throw new Error('Attempting to get auth tag in unsupported state')\n\n  return this._authTag\n}\n\nStreamCipher.prototype.setAuthTag = function setAuthTag (tag) {\n  if (!this._decrypt) throw new Error('Attempting to set auth tag in unsupported state')\n\n  this._authTag = tag\n}\n\nStreamCipher.prototype.setAAD = function setAAD (buf) {\n  if (this._called) throw new Error('Attempting to set AAD in unsupported state')\n\n  this._ghash.update(buf)\n  this._alen += buf.length\n}\n\nmodule.exports = StreamCipher\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/authCipher.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/browser.js":
/*!************************************************!*\
  !*** ./node_modules/browserify-aes/browser.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var ciphers = __webpack_require__(/*! ./encrypter */ \"./node_modules/browserify-aes/encrypter.js\")\nvar deciphers = __webpack_require__(/*! ./decrypter */ \"./node_modules/browserify-aes/decrypter.js\")\nvar modes = __webpack_require__(/*! ./modes/list.json */ \"./node_modules/browserify-aes/modes/list.json\")\n\nfunction getCiphers () {\n  return Object.keys(modes)\n}\n\nexports.createCipher = exports.Cipher = ciphers.createCipher\nexports.createCipheriv = exports.Cipheriv = ciphers.createCipheriv\nexports.createDecipher = exports.Decipher = deciphers.createDecipher\nexports.createDecipheriv = exports.Decipheriv = deciphers.createDecipheriv\nexports.listCiphers = exports.getCiphers = getCiphers\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/browser.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/decrypter.js":
/*!**************************************************!*\
  !*** ./node_modules/browserify-aes/decrypter.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var AuthCipher = __webpack_require__(/*! ./authCipher */ \"./node_modules/browserify-aes/authCipher.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\nvar MODES = __webpack_require__(/*! ./modes */ \"./node_modules/browserify-aes/modes/index.js\")\nvar StreamCipher = __webpack_require__(/*! ./streamCipher */ \"./node_modules/browserify-aes/streamCipher.js\")\nvar Transform = __webpack_require__(/*! cipher-base */ \"./node_modules/cipher-base/index.js\")\nvar aes = __webpack_require__(/*! ./aes */ \"./node_modules/browserify-aes/aes.js\")\nvar ebtk = __webpack_require__(/*! evp_bytestokey */ \"./node_modules/evp_bytestokey/index.js\")\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\n\nfunction Decipher (mode, key, iv) {\n  Transform.call(this)\n\n  this._cache = new Splitter()\n  this._last = void 0\n  this._cipher = new aes.AES(key)\n  this._prev = Buffer.from(iv)\n  this._mode = mode\n  this._autopadding = true\n}\n\ninherits(Decipher, Transform)\n\nDecipher.prototype._update = function (data) {\n  this._cache.add(data)\n  var chunk\n  var thing\n  var out = []\n  while ((chunk = this._cache.get(this._autopadding))) {\n    thing = this._mode.decrypt(this, chunk)\n    out.push(thing)\n  }\n  return Buffer.concat(out)\n}\n\nDecipher.prototype._final = function () {\n  var chunk = this._cache.flush()\n  if (this._autopadding) {\n    return unpad(this._mode.decrypt(this, chunk))\n  } else if (chunk) {\n    throw new Error('data not multiple of block length')\n  }\n}\n\nDecipher.prototype.setAutoPadding = function (setTo) {\n  this._autopadding = !!setTo\n  return this\n}\n\nfunction Splitter () {\n  this.cache = Buffer.allocUnsafe(0)\n}\n\nSplitter.prototype.add = function (data) {\n  this.cache = Buffer.concat([this.cache, data])\n}\n\nSplitter.prototype.get = function (autoPadding) {\n  var out\n  if (autoPadding) {\n    if (this.cache.length > 16) {\n      out = this.cache.slice(0, 16)\n      this.cache = this.cache.slice(16)\n      return out\n    }\n  } else {\n    if (this.cache.length >= 16) {\n      out = this.cache.slice(0, 16)\n      this.cache = this.cache.slice(16)\n      return out\n    }\n  }\n\n  return null\n}\n\nSplitter.prototype.flush = function () {\n  if (this.cache.length) return this.cache\n}\n\nfunction unpad (last) {\n  var padded = last[15]\n  if (padded < 1 || padded > 16) {\n    throw new Error('unable to decrypt data')\n  }\n  var i = -1\n  while (++i < padded) {\n    if (last[(i + (16 - padded))] !== padded) {\n      throw new Error('unable to decrypt data')\n    }\n  }\n  if (padded === 16) return\n\n  return last.slice(0, 16 - padded)\n}\n\nfunction createDecipheriv (suite, password, iv) {\n  var config = MODES[suite.toLowerCase()]\n  if (!config) throw new TypeError('invalid suite type')\n\n  if (typeof iv === 'string') iv = Buffer.from(iv)\n  if (config.mode !== 'GCM' && iv.length !== config.iv) throw new TypeError('invalid iv length ' + iv.length)\n\n  if (typeof password === 'string') password = Buffer.from(password)\n  if (password.length !== config.key / 8) throw new TypeError('invalid key length ' + password.length)\n\n  if (config.type === 'stream') {\n    return new StreamCipher(config.module, password, iv, true)\n  } else if (config.type === 'auth') {\n    return new AuthCipher(config.module, password, iv, true)\n  }\n\n  return new Decipher(config.module, password, iv)\n}\n\nfunction createDecipher (suite, password) {\n  var config = MODES[suite.toLowerCase()]\n  if (!config) throw new TypeError('invalid suite type')\n\n  var keys = ebtk(password, false, config.key, config.iv)\n  return createDecipheriv(suite, keys.key, keys.iv)\n}\n\nexports.createDecipher = createDecipher\nexports.createDecipheriv = createDecipheriv\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/decrypter.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/encrypter.js":
/*!**************************************************!*\
  !*** ./node_modules/browserify-aes/encrypter.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var MODES = __webpack_require__(/*! ./modes */ \"./node_modules/browserify-aes/modes/index.js\")\nvar AuthCipher = __webpack_require__(/*! ./authCipher */ \"./node_modules/browserify-aes/authCipher.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\nvar StreamCipher = __webpack_require__(/*! ./streamCipher */ \"./node_modules/browserify-aes/streamCipher.js\")\nvar Transform = __webpack_require__(/*! cipher-base */ \"./node_modules/cipher-base/index.js\")\nvar aes = __webpack_require__(/*! ./aes */ \"./node_modules/browserify-aes/aes.js\")\nvar ebtk = __webpack_require__(/*! evp_bytestokey */ \"./node_modules/evp_bytestokey/index.js\")\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\n\nfunction Cipher (mode, key, iv) {\n  Transform.call(this)\n\n  this._cache = new Splitter()\n  this._cipher = new aes.AES(key)\n  this._prev = Buffer.from(iv)\n  this._mode = mode\n  this._autopadding = true\n}\n\ninherits(Cipher, Transform)\n\nCipher.prototype._update = function (data) {\n  this._cache.add(data)\n  var chunk\n  var thing\n  var out = []\n\n  while ((chunk = this._cache.get())) {\n    thing = this._mode.encrypt(this, chunk)\n    out.push(thing)\n  }\n\n  return Buffer.concat(out)\n}\n\nvar PADDING = Buffer.alloc(16, 0x10)\n\nCipher.prototype._final = function () {\n  var chunk = this._cache.flush()\n  if (this._autopadding) {\n    chunk = this._mode.encrypt(this, chunk)\n    this._cipher.scrub()\n    return chunk\n  }\n\n  if (!chunk.equals(PADDING)) {\n    this._cipher.scrub()\n    throw new Error('data not multiple of block length')\n  }\n}\n\nCipher.prototype.setAutoPadding = function (setTo) {\n  this._autopadding = !!setTo\n  return this\n}\n\nfunction Splitter () {\n  this.cache = Buffer.allocUnsafe(0)\n}\n\nSplitter.prototype.add = function (data) {\n  this.cache = Buffer.concat([this.cache, data])\n}\n\nSplitter.prototype.get = function () {\n  if (this.cache.length > 15) {\n    var out = this.cache.slice(0, 16)\n    this.cache = this.cache.slice(16)\n    return out\n  }\n  return null\n}\n\nSplitter.prototype.flush = function () {\n  var len = 16 - this.cache.length\n  var padBuff = Buffer.allocUnsafe(len)\n\n  var i = -1\n  while (++i < len) {\n    padBuff.writeUInt8(len, i)\n  }\n\n  return Buffer.concat([this.cache, padBuff])\n}\n\nfunction createCipheriv (suite, password, iv) {\n  var config = MODES[suite.toLowerCase()]\n  if (!config) throw new TypeError('invalid suite type')\n\n  if (typeof password === 'string') password = Buffer.from(password)\n  if (password.length !== config.key / 8) throw new TypeError('invalid key length ' + password.length)\n\n  if (typeof iv === 'string') iv = Buffer.from(iv)\n  if (config.mode !== 'GCM' && iv.length !== config.iv) throw new TypeError('invalid iv length ' + iv.length)\n\n  if (config.type === 'stream') {\n    return new StreamCipher(config.module, password, iv)\n  } else if (config.type === 'auth') {\n    return new AuthCipher(config.module, password, iv)\n  }\n\n  return new Cipher(config.module, password, iv)\n}\n\nfunction createCipher (suite, password) {\n  var config = MODES[suite.toLowerCase()]\n  if (!config) throw new TypeError('invalid suite type')\n\n  var keys = ebtk(password, false, config.key, config.iv)\n  return createCipheriv(suite, keys.key, keys.iv)\n}\n\nexports.createCipheriv = createCipheriv\nexports.createCipher = createCipher\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/encrypter.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/ghash.js":
/*!**********************************************!*\
  !*** ./node_modules/browserify-aes/ghash.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\nvar ZEROES = Buffer.alloc(16, 0)\n\nfunction toArray (buf) {\n  return [\n    buf.readUInt32BE(0),\n    buf.readUInt32BE(4),\n    buf.readUInt32BE(8),\n    buf.readUInt32BE(12)\n  ]\n}\n\nfunction fromArray (out) {\n  var buf = Buffer.allocUnsafe(16)\n  buf.writeUInt32BE(out[0] >>> 0, 0)\n  buf.writeUInt32BE(out[1] >>> 0, 4)\n  buf.writeUInt32BE(out[2] >>> 0, 8)\n  buf.writeUInt32BE(out[3] >>> 0, 12)\n  return buf\n}\n\nfunction GHASH (key) {\n  this.h = key\n  this.state = Buffer.alloc(16, 0)\n  this.cache = Buffer.allocUnsafe(0)\n}\n\n// from http://bitwiseshiftleft.github.io/sjcl/doc/symbols/src/core_gcm.js.html\n// by Juho Vähä-Herttua\nGHASH.prototype.ghash = function (block) {\n  var i = -1\n  while (++i < block.length) {\n    this.state[i] ^= block[i]\n  }\n  this._multiply()\n}\n\nGHASH.prototype._multiply = function () {\n  var Vi = toArray(this.h)\n  var Zi = [0, 0, 0, 0]\n  var j, xi, lsbVi\n  var i = -1\n  while (++i < 128) {\n    xi = (this.state[~~(i / 8)] & (1 << (7 - (i % 8)))) !== 0\n    if (xi) {\n      // Z_i+1 = Z_i ^ V_i\n      Zi[0] ^= Vi[0]\n      Zi[1] ^= Vi[1]\n      Zi[2] ^= Vi[2]\n      Zi[3] ^= Vi[3]\n    }\n\n    // Store the value of LSB(V_i)\n    lsbVi = (Vi[3] & 1) !== 0\n\n    // V_i+1 = V_i >> 1\n    for (j = 3; j > 0; j--) {\n      Vi[j] = (Vi[j] >>> 1) | ((Vi[j - 1] & 1) << 31)\n    }\n    Vi[0] = Vi[0] >>> 1\n\n    // If LSB(V_i) is 1, V_i+1 = (V_i >> 1) ^ R\n    if (lsbVi) {\n      Vi[0] = Vi[0] ^ (0xe1 << 24)\n    }\n  }\n  this.state = fromArray(Zi)\n}\n\nGHASH.prototype.update = function (buf) {\n  this.cache = Buffer.concat([this.cache, buf])\n  var chunk\n  while (this.cache.length >= 16) {\n    chunk = this.cache.slice(0, 16)\n    this.cache = this.cache.slice(16)\n    this.ghash(chunk)\n  }\n}\n\nGHASH.prototype.final = function (abl, bl) {\n  if (this.cache.length) {\n    this.ghash(Buffer.concat([this.cache, ZEROES], 16))\n  }\n\n  this.ghash(fromArray([0, abl, 0, bl]))\n  return this.state\n}\n\nmodule.exports = GHASH\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/ghash.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/incr32.js":
/*!***********************************************!*\
  !*** ./node_modules/browserify-aes/incr32.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function incr32 (iv) {\n  var len = iv.length\n  var item\n  while (len--) {\n    item = iv.readUInt8(len)\n    if (item === 255) {\n      iv.writeUInt8(0, len)\n    } else {\n      item++\n      iv.writeUInt8(item, len)\n      break\n    }\n  }\n}\nmodule.exports = incr32\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/incr32.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/modes/cbc.js":
/*!**************************************************!*\
  !*** ./node_modules/browserify-aes/modes/cbc.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var xor = __webpack_require__(/*! buffer-xor */ \"./node_modules/buffer-xor/index.js\")\n\nexports.encrypt = function (self, block) {\n  var data = xor(block, self._prev)\n\n  self._prev = self._cipher.encryptBlock(data)\n  return self._prev\n}\n\nexports.decrypt = function (self, block) {\n  var pad = self._prev\n\n  self._prev = block\n  var out = self._cipher.decryptBlock(block)\n\n  return xor(out, pad)\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/modes/cbc.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/modes/cfb.js":
/*!**************************************************!*\
  !*** ./node_modules/browserify-aes/modes/cfb.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\nvar xor = __webpack_require__(/*! buffer-xor */ \"./node_modules/buffer-xor/index.js\")\n\nfunction encryptStart (self, data, decrypt) {\n  var len = data.length\n  var out = xor(data, self._cache)\n  self._cache = self._cache.slice(len)\n  self._prev = Buffer.concat([self._prev, decrypt ? data : out])\n  return out\n}\n\nexports.encrypt = function (self, data, decrypt) {\n  var out = Buffer.allocUnsafe(0)\n  var len\n\n  while (data.length) {\n    if (self._cache.length === 0) {\n      self._cache = self._cipher.encryptBlock(self._prev)\n      self._prev = Buffer.allocUnsafe(0)\n    }\n\n    if (self._cache.length <= data.length) {\n      len = self._cache.length\n      out = Buffer.concat([out, encryptStart(self, data.slice(0, len), decrypt)])\n      data = data.slice(len)\n    } else {\n      out = Buffer.concat([out, encryptStart(self, data, decrypt)])\n      break\n    }\n  }\n\n  return out\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/modes/cfb.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/modes/cfb1.js":
/*!***************************************************!*\
  !*** ./node_modules/browserify-aes/modes/cfb1.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nfunction encryptByte (self, byteParam, decrypt) {\n  var pad\n  var i = -1\n  var len = 8\n  var out = 0\n  var bit, value\n  while (++i < len) {\n    pad = self._cipher.encryptBlock(self._prev)\n    bit = (byteParam & (1 << (7 - i))) ? 0x80 : 0\n    value = pad[0] ^ bit\n    out += ((value & 0x80) >> (i % 8))\n    self._prev = shiftIn(self._prev, decrypt ? bit : value)\n  }\n  return out\n}\n\nfunction shiftIn (buffer, value) {\n  var len = buffer.length\n  var i = -1\n  var out = Buffer.allocUnsafe(buffer.length)\n  buffer = Buffer.concat([buffer, Buffer.from([value])])\n\n  while (++i < len) {\n    out[i] = buffer[i] << 1 | buffer[i + 1] >> (7)\n  }\n\n  return out\n}\n\nexports.encrypt = function (self, chunk, decrypt) {\n  var len = chunk.length\n  var out = Buffer.allocUnsafe(len)\n  var i = -1\n\n  while (++i < len) {\n    out[i] = encryptByte(self, chunk[i], decrypt)\n  }\n\n  return out\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/modes/cfb1.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/modes/cfb8.js":
/*!***************************************************!*\
  !*** ./node_modules/browserify-aes/modes/cfb8.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nfunction encryptByte (self, byteParam, decrypt) {\n  var pad = self._cipher.encryptBlock(self._prev)\n  var out = pad[0] ^ byteParam\n\n  self._prev = Buffer.concat([\n    self._prev.slice(1),\n    Buffer.from([decrypt ? byteParam : out])\n  ])\n\n  return out\n}\n\nexports.encrypt = function (self, chunk, decrypt) {\n  var len = chunk.length\n  var out = Buffer.allocUnsafe(len)\n  var i = -1\n\n  while (++i < len) {\n    out[i] = encryptByte(self, chunk[i], decrypt)\n  }\n\n  return out\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/modes/cfb8.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/modes/ctr.js":
/*!**************************************************!*\
  !*** ./node_modules/browserify-aes/modes/ctr.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var xor = __webpack_require__(/*! buffer-xor */ \"./node_modules/buffer-xor/index.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\nvar incr32 = __webpack_require__(/*! ../incr32 */ \"./node_modules/browserify-aes/incr32.js\")\n\nfunction getBlock (self) {\n  var out = self._cipher.encryptBlockRaw(self._prev)\n  incr32(self._prev)\n  return out\n}\n\nvar blockSize = 16\nexports.encrypt = function (self, chunk) {\n  var chunkNum = Math.ceil(chunk.length / blockSize)\n  var start = self._cache.length\n  self._cache = Buffer.concat([\n    self._cache,\n    Buffer.allocUnsafe(chunkNum * blockSize)\n  ])\n  for (var i = 0; i < chunkNum; i++) {\n    var out = getBlock(self)\n    var offset = start + i * blockSize\n    self._cache.writeUInt32BE(out[0], offset + 0)\n    self._cache.writeUInt32BE(out[1], offset + 4)\n    self._cache.writeUInt32BE(out[2], offset + 8)\n    self._cache.writeUInt32BE(out[3], offset + 12)\n  }\n  var pad = self._cache.slice(0, chunk.length)\n  self._cache = self._cache.slice(chunk.length)\n  return xor(chunk, pad)\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/modes/ctr.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/modes/ecb.js":
/*!**************************************************!*\
  !*** ./node_modules/browserify-aes/modes/ecb.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("exports.encrypt = function (self, block) {\n  return self._cipher.encryptBlock(block)\n}\n\nexports.decrypt = function (self, block) {\n  return self._cipher.decryptBlock(block)\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/modes/ecb.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/modes/index.js":
/*!****************************************************!*\
  !*** ./node_modules/browserify-aes/modes/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var modeModules = {\n  ECB: __webpack_require__(/*! ./ecb */ \"./node_modules/browserify-aes/modes/ecb.js\"),\n  CBC: __webpack_require__(/*! ./cbc */ \"./node_modules/browserify-aes/modes/cbc.js\"),\n  CFB: __webpack_require__(/*! ./cfb */ \"./node_modules/browserify-aes/modes/cfb.js\"),\n  CFB8: __webpack_require__(/*! ./cfb8 */ \"./node_modules/browserify-aes/modes/cfb8.js\"),\n  CFB1: __webpack_require__(/*! ./cfb1 */ \"./node_modules/browserify-aes/modes/cfb1.js\"),\n  OFB: __webpack_require__(/*! ./ofb */ \"./node_modules/browserify-aes/modes/ofb.js\"),\n  CTR: __webpack_require__(/*! ./ctr */ \"./node_modules/browserify-aes/modes/ctr.js\"),\n  GCM: __webpack_require__(/*! ./ctr */ \"./node_modules/browserify-aes/modes/ctr.js\")\n}\n\nvar modes = __webpack_require__(/*! ./list.json */ \"./node_modules/browserify-aes/modes/list.json\")\n\nfor (var key in modes) {\n  modes[key].module = modeModules[modes[key].mode]\n}\n\nmodule.exports = modes\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/modes/index.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/modes/list.json":
/*!*****************************************************!*\
  !*** ./node_modules/browserify-aes/modes/list.json ***!
  \*****************************************************/
/*! exports provided: aes-128-ecb, aes-192-ecb, aes-256-ecb, aes-128-cbc, aes-192-cbc, aes-256-cbc, aes128, aes192, aes256, aes-128-cfb, aes-192-cfb, aes-256-cfb, aes-128-cfb8, aes-192-cfb8, aes-256-cfb8, aes-128-cfb1, aes-192-cfb1, aes-256-cfb1, aes-128-ofb, aes-192-ofb, aes-256-ofb, aes-128-ctr, aes-192-ctr, aes-256-ctr, aes-128-gcm, aes-192-gcm, aes-256-gcm, default */
/***/ (function(module) {

eval("module.exports = JSON.parse(\"{\\\"aes-128-ecb\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":128,\\\"iv\\\":0,\\\"mode\\\":\\\"ECB\\\",\\\"type\\\":\\\"block\\\"},\\\"aes-192-ecb\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":192,\\\"iv\\\":0,\\\"mode\\\":\\\"ECB\\\",\\\"type\\\":\\\"block\\\"},\\\"aes-256-ecb\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":256,\\\"iv\\\":0,\\\"mode\\\":\\\"ECB\\\",\\\"type\\\":\\\"block\\\"},\\\"aes-128-cbc\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":128,\\\"iv\\\":16,\\\"mode\\\":\\\"CBC\\\",\\\"type\\\":\\\"block\\\"},\\\"aes-192-cbc\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":192,\\\"iv\\\":16,\\\"mode\\\":\\\"CBC\\\",\\\"type\\\":\\\"block\\\"},\\\"aes-256-cbc\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":256,\\\"iv\\\":16,\\\"mode\\\":\\\"CBC\\\",\\\"type\\\":\\\"block\\\"},\\\"aes128\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":128,\\\"iv\\\":16,\\\"mode\\\":\\\"CBC\\\",\\\"type\\\":\\\"block\\\"},\\\"aes192\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":192,\\\"iv\\\":16,\\\"mode\\\":\\\"CBC\\\",\\\"type\\\":\\\"block\\\"},\\\"aes256\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":256,\\\"iv\\\":16,\\\"mode\\\":\\\"CBC\\\",\\\"type\\\":\\\"block\\\"},\\\"aes-128-cfb\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":128,\\\"iv\\\":16,\\\"mode\\\":\\\"CFB\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-192-cfb\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":192,\\\"iv\\\":16,\\\"mode\\\":\\\"CFB\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-256-cfb\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":256,\\\"iv\\\":16,\\\"mode\\\":\\\"CFB\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-128-cfb8\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":128,\\\"iv\\\":16,\\\"mode\\\":\\\"CFB8\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-192-cfb8\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":192,\\\"iv\\\":16,\\\"mode\\\":\\\"CFB8\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-256-cfb8\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":256,\\\"iv\\\":16,\\\"mode\\\":\\\"CFB8\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-128-cfb1\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":128,\\\"iv\\\":16,\\\"mode\\\":\\\"CFB1\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-192-cfb1\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":192,\\\"iv\\\":16,\\\"mode\\\":\\\"CFB1\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-256-cfb1\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":256,\\\"iv\\\":16,\\\"mode\\\":\\\"CFB1\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-128-ofb\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":128,\\\"iv\\\":16,\\\"mode\\\":\\\"OFB\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-192-ofb\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":192,\\\"iv\\\":16,\\\"mode\\\":\\\"OFB\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-256-ofb\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":256,\\\"iv\\\":16,\\\"mode\\\":\\\"OFB\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-128-ctr\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":128,\\\"iv\\\":16,\\\"mode\\\":\\\"CTR\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-192-ctr\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":192,\\\"iv\\\":16,\\\"mode\\\":\\\"CTR\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-256-ctr\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":256,\\\"iv\\\":16,\\\"mode\\\":\\\"CTR\\\",\\\"type\\\":\\\"stream\\\"},\\\"aes-128-gcm\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":128,\\\"iv\\\":12,\\\"mode\\\":\\\"GCM\\\",\\\"type\\\":\\\"auth\\\"},\\\"aes-192-gcm\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":192,\\\"iv\\\":12,\\\"mode\\\":\\\"GCM\\\",\\\"type\\\":\\\"auth\\\"},\\\"aes-256-gcm\\\":{\\\"cipher\\\":\\\"AES\\\",\\\"key\\\":256,\\\"iv\\\":12,\\\"mode\\\":\\\"GCM\\\",\\\"type\\\":\\\"auth\\\"}}\");\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/modes/list.json?");

/***/ }),

/***/ "./node_modules/browserify-aes/modes/ofb.js":
/*!**************************************************!*\
  !*** ./node_modules/browserify-aes/modes/ofb.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(Buffer) {var xor = __webpack_require__(/*! buffer-xor */ \"./node_modules/buffer-xor/index.js\")\n\nfunction getBlock (self) {\n  self._prev = self._cipher.encryptBlock(self._prev)\n  return self._prev\n}\n\nexports.encrypt = function (self, chunk) {\n  while (self._cache.length < chunk.length) {\n    self._cache = Buffer.concat([self._cache, getBlock(self)])\n  }\n\n  var pad = self._cache.slice(0, chunk.length)\n  self._cache = self._cache.slice(chunk.length)\n  return xor(chunk, pad)\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../buffer/index.js */ \"./node_modules/buffer/index.js\").Buffer))\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/modes/ofb.js?");

/***/ }),

/***/ "./node_modules/browserify-aes/streamCipher.js":
/*!*****************************************************!*\
  !*** ./node_modules/browserify-aes/streamCipher.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var aes = __webpack_require__(/*! ./aes */ \"./node_modules/browserify-aes/aes.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\nvar Transform = __webpack_require__(/*! cipher-base */ \"./node_modules/cipher-base/index.js\")\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\n\nfunction StreamCipher (mode, key, iv, decrypt) {\n  Transform.call(this)\n\n  this._cipher = new aes.AES(key)\n  this._prev = Buffer.from(iv)\n  this._cache = Buffer.allocUnsafe(0)\n  this._secCache = Buffer.allocUnsafe(0)\n  this._decrypt = decrypt\n  this._mode = mode\n}\n\ninherits(StreamCipher, Transform)\n\nStreamCipher.prototype._update = function (chunk) {\n  return this._mode.encrypt(this, chunk, this._decrypt)\n}\n\nStreamCipher.prototype._final = function () {\n  this._cipher.scrub()\n}\n\nmodule.exports = StreamCipher\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-aes/streamCipher.js?");

/***/ }),

/***/ "./node_modules/browserify-cipher/browser.js":
/*!***************************************************!*\
  !*** ./node_modules/browserify-cipher/browser.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var DES = __webpack_require__(/*! browserify-des */ \"./node_modules/browserify-des/index.js\")\nvar aes = __webpack_require__(/*! browserify-aes/browser */ \"./node_modules/browserify-aes/browser.js\")\nvar aesModes = __webpack_require__(/*! browserify-aes/modes */ \"./node_modules/browserify-aes/modes/index.js\")\nvar desModes = __webpack_require__(/*! browserify-des/modes */ \"./node_modules/browserify-des/modes.js\")\nvar ebtk = __webpack_require__(/*! evp_bytestokey */ \"./node_modules/evp_bytestokey/index.js\")\n\nfunction createCipher (suite, password) {\n  suite = suite.toLowerCase()\n\n  var keyLen, ivLen\n  if (aesModes[suite]) {\n    keyLen = aesModes[suite].key\n    ivLen = aesModes[suite].iv\n  } else if (desModes[suite]) {\n    keyLen = desModes[suite].key * 8\n    ivLen = desModes[suite].iv\n  } else {\n    throw new TypeError('invalid suite type')\n  }\n\n  var keys = ebtk(password, false, keyLen, ivLen)\n  return createCipheriv(suite, keys.key, keys.iv)\n}\n\nfunction createDecipher (suite, password) {\n  suite = suite.toLowerCase()\n\n  var keyLen, ivLen\n  if (aesModes[suite]) {\n    keyLen = aesModes[suite].key\n    ivLen = aesModes[suite].iv\n  } else if (desModes[suite]) {\n    keyLen = desModes[suite].key * 8\n    ivLen = desModes[suite].iv\n  } else {\n    throw new TypeError('invalid suite type')\n  }\n\n  var keys = ebtk(password, false, keyLen, ivLen)\n  return createDecipheriv(suite, keys.key, keys.iv)\n}\n\nfunction createCipheriv (suite, key, iv) {\n  suite = suite.toLowerCase()\n  if (aesModes[suite]) return aes.createCipheriv(suite, key, iv)\n  if (desModes[suite]) return new DES({ key: key, iv: iv, mode: suite })\n\n  throw new TypeError('invalid suite type')\n}\n\nfunction createDecipheriv (suite, key, iv) {\n  suite = suite.toLowerCase()\n  if (aesModes[suite]) return aes.createDecipheriv(suite, key, iv)\n  if (desModes[suite]) return new DES({ key: key, iv: iv, mode: suite, decrypt: true })\n\n  throw new TypeError('invalid suite type')\n}\n\nfunction getCiphers () {\n  return Object.keys(desModes).concat(aes.getCiphers())\n}\n\nexports.createCipher = exports.Cipher = createCipher\nexports.createCipheriv = exports.Cipheriv = createCipheriv\nexports.createDecipher = exports.Decipher = createDecipher\nexports.createDecipheriv = exports.Decipheriv = createDecipheriv\nexports.listCiphers = exports.getCiphers = getCiphers\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-cipher/browser.js?");

/***/ }),

/***/ "./node_modules/browserify-des/index.js":
/*!**********************************************!*\
  !*** ./node_modules/browserify-des/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var CipherBase = __webpack_require__(/*! cipher-base */ \"./node_modules/cipher-base/index.js\")\nvar des = __webpack_require__(/*! des.js */ \"./node_modules/des.js/lib/des.js\")\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nvar modes = {\n  'des-ede3-cbc': des.CBC.instantiate(des.EDE),\n  'des-ede3': des.EDE,\n  'des-ede-cbc': des.CBC.instantiate(des.EDE),\n  'des-ede': des.EDE,\n  'des-cbc': des.CBC.instantiate(des.DES),\n  'des-ecb': des.DES\n}\nmodes.des = modes['des-cbc']\nmodes.des3 = modes['des-ede3-cbc']\nmodule.exports = DES\ninherits(DES, CipherBase)\nfunction DES (opts) {\n  CipherBase.call(this)\n  var modeName = opts.mode.toLowerCase()\n  var mode = modes[modeName]\n  var type\n  if (opts.decrypt) {\n    type = 'decrypt'\n  } else {\n    type = 'encrypt'\n  }\n  var key = opts.key\n  if (!Buffer.isBuffer(key)) {\n    key = Buffer.from(key)\n  }\n  if (modeName === 'des-ede' || modeName === 'des-ede-cbc') {\n    key = Buffer.concat([key, key.slice(0, 8)])\n  }\n  var iv = opts.iv\n  if (!Buffer.isBuffer(iv)) {\n    iv = Buffer.from(iv)\n  }\n  this._des = mode.create({\n    key: key,\n    iv: iv,\n    type: type\n  })\n}\nDES.prototype._update = function (data) {\n  return Buffer.from(this._des.update(data))\n}\nDES.prototype._final = function () {\n  return Buffer.from(this._des.final())\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-des/index.js?");

/***/ }),

/***/ "./node_modules/browserify-des/modes.js":
/*!**********************************************!*\
  !*** ./node_modules/browserify-des/modes.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("exports['des-ecb'] = {\n  key: 8,\n  iv: 0\n}\nexports['des-cbc'] = exports.des = {\n  key: 8,\n  iv: 8\n}\nexports['des-ede3-cbc'] = exports.des3 = {\n  key: 24,\n  iv: 8\n}\nexports['des-ede3'] = {\n  key: 24,\n  iv: 0\n}\nexports['des-ede-cbc'] = {\n  key: 16,\n  iv: 8\n}\nexports['des-ede'] = {\n  key: 16,\n  iv: 0\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-des/modes.js?");

/***/ }),

/***/ "./node_modules/browserify-rsa/index.js":
/*!**********************************************!*\
  !*** ./node_modules/browserify-rsa/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(Buffer) {var bn = __webpack_require__(/*! bn.js */ \"./node_modules/browserify-rsa/node_modules/bn.js/lib/bn.js\");\nvar randomBytes = __webpack_require__(/*! randombytes */ \"./node_modules/randombytes/browser.js\");\nmodule.exports = crt;\nfunction blind(priv) {\n  var r = getr(priv);\n  var blinder = r.toRed(bn.mont(priv.modulus))\n  .redPow(new bn(priv.publicExponent)).fromRed();\n  return {\n    blinder: blinder,\n    unblinder:r.invm(priv.modulus)\n  };\n}\nfunction crt(msg, priv) {\n  var blinds = blind(priv);\n  var len = priv.modulus.byteLength();\n  var mod = bn.mont(priv.modulus);\n  var blinded = new bn(msg).mul(blinds.blinder).umod(priv.modulus);\n  var c1 = blinded.toRed(bn.mont(priv.prime1));\n  var c2 = blinded.toRed(bn.mont(priv.prime2));\n  var qinv = priv.coefficient;\n  var p = priv.prime1;\n  var q = priv.prime2;\n  var m1 = c1.redPow(priv.exponent1);\n  var m2 = c2.redPow(priv.exponent2);\n  m1 = m1.fromRed();\n  m2 = m2.fromRed();\n  var h = m1.isub(m2).imul(qinv).umod(p);\n  h.imul(q);\n  m2.iadd(h);\n  return new Buffer(m2.imul(blinds.unblinder).umod(priv.modulus).toArray(false, len));\n}\ncrt.getr = getr;\nfunction getr(priv) {\n  var len = priv.modulus.byteLength();\n  var r = new bn(randomBytes(len));\n  while (r.cmp(priv.modulus) >=  0 || !r.umod(priv.prime1) || !r.umod(priv.prime2)) {\n    r = new bn(randomBytes(len));\n  }\n  return r;\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../buffer/index.js */ \"./node_modules/buffer/index.js\").Buffer))\n\n//# sourceURL=webpack://Game/./node_modules/browserify-rsa/index.js?");

/***/ }),

/***/ "./node_modules/browserify-rsa/node_modules/bn.js/lib/bn.js":
/*!******************************************************************!*\
  !*** ./node_modules/browserify-rsa/node_modules/bn.js/lib/bn.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(module) {(function (module, exports) {\r\n  'use strict';\r\n\r\n  // Utils\r\n  function assert (val, msg) {\r\n    if (!val) throw new Error(msg || 'Assertion failed');\r\n  }\r\n\r\n  // Could use `inherits` module, but don't want to move from single file\r\n  // architecture yet.\r\n  function inherits (ctor, superCtor) {\r\n    ctor.super_ = superCtor;\r\n    var TempCtor = function () {};\r\n    TempCtor.prototype = superCtor.prototype;\r\n    ctor.prototype = new TempCtor();\r\n    ctor.prototype.constructor = ctor;\r\n  }\r\n\r\n  // BN\r\n\r\n  function BN (number, base, endian) {\r\n    if (BN.isBN(number)) {\r\n      return number;\r\n    }\r\n\r\n    this.negative = 0;\r\n    this.words = null;\r\n    this.length = 0;\r\n\r\n    // Reduction context\r\n    this.red = null;\r\n\r\n    if (number !== null) {\r\n      if (base === 'le' || base === 'be') {\r\n        endian = base;\r\n        base = 10;\r\n      }\r\n\r\n      this._init(number || 0, base || 10, endian || 'be');\r\n    }\r\n  }\r\n  if (typeof module === 'object') {\r\n    module.exports = BN;\r\n  } else {\r\n    exports.BN = BN;\r\n  }\r\n\r\n  BN.BN = BN;\r\n  BN.wordSize = 26;\r\n\r\n  var Buffer;\r\n  try {\r\n    Buffer = __webpack_require__(/*! buffer */ 10).Buffer;\r\n  } catch (e) {\r\n  }\r\n\r\n  BN.isBN = function isBN (num) {\r\n    if (num instanceof BN) {\r\n      return true;\r\n    }\r\n\r\n    return num !== null && typeof num === 'object' &&\r\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\r\n  };\r\n\r\n  BN.max = function max (left, right) {\r\n    if (left.cmp(right) > 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.min = function min (left, right) {\r\n    if (left.cmp(right) < 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.prototype._init = function init (number, base, endian) {\r\n    if (typeof number === 'number') {\r\n      return this._initNumber(number, base, endian);\r\n    }\r\n\r\n    if (typeof number === 'object') {\r\n      return this._initArray(number, base, endian);\r\n    }\r\n\r\n    if (base === 'hex') {\r\n      base = 16;\r\n    }\r\n    assert(base === (base | 0) && base >= 2 && base <= 36);\r\n\r\n    number = number.toString().replace(/\\s+/g, '');\r\n    var start = 0;\r\n    if (number[0] === '-') {\r\n      start++;\r\n    }\r\n\r\n    if (base === 16) {\r\n      this._parseHex(number, start);\r\n    } else {\r\n      this._parseBase(number, base, start);\r\n    }\r\n\r\n    if (number[0] === '-') {\r\n      this.negative = 1;\r\n    }\r\n\r\n    this.strip();\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\r\n    if (number < 0) {\r\n      this.negative = 1;\r\n      number = -number;\r\n    }\r\n    if (number < 0x4000000) {\r\n      this.words = [ number & 0x3ffffff ];\r\n      this.length = 1;\r\n    } else if (number < 0x10000000000000) {\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff\r\n      ];\r\n      this.length = 2;\r\n    } else {\r\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff,\r\n        1\r\n      ];\r\n      this.length = 3;\r\n    }\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    // Reverse the bytes\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initArray = function _initArray (number, base, endian) {\r\n    // Perhaps a Uint8Array\r\n    assert(typeof number.length === 'number');\r\n    if (number.length <= 0) {\r\n      this.words = [ 0 ];\r\n      this.length = 1;\r\n      return this;\r\n    }\r\n\r\n    this.length = Math.ceil(number.length / 3);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    var off = 0;\r\n    if (endian === 'be') {\r\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\r\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    } else if (endian === 'le') {\r\n      for (i = 0, j = 0; i < number.length; i += 3) {\r\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    }\r\n    return this.strip();\r\n  };\r\n\r\n  function parseHex (str, start, end) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r <<= 4;\r\n\r\n      // 'a' - 'f'\r\n      if (c >= 49 && c <= 54) {\r\n        r |= c - 49 + 0xa;\r\n\r\n      // 'A' - 'F'\r\n      } else if (c >= 17 && c <= 22) {\r\n        r |= c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        r |= c & 0xf;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseHex = function _parseHex (number, start) {\r\n    // Create possibly bigger array to ensure that it fits the number\r\n    this.length = Math.ceil((number.length - start) / 6);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    // Scan 24-bit chunks and add them to the number\r\n    var off = 0;\r\n    for (i = number.length - 6, j = 0; i >= start; i -= 6) {\r\n      w = parseHex(number, i, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      // NOTE: `0x3fffff` is intentional here, 26bits max shift + 24bit hex limb\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n      off += 24;\r\n      if (off >= 26) {\r\n        off -= 26;\r\n        j++;\r\n      }\r\n    }\r\n    if (i + 6 !== start) {\r\n      w = parseHex(number, start, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n    }\r\n    this.strip();\r\n  };\r\n\r\n  function parseBase (str, start, end, mul) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r *= mul;\r\n\r\n      // 'a'\r\n      if (c >= 49) {\r\n        r += c - 49 + 0xa;\r\n\r\n      // 'A'\r\n      } else if (c >= 17) {\r\n        r += c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        r += c;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\r\n    // Initialize as zero\r\n    this.words = [ 0 ];\r\n    this.length = 1;\r\n\r\n    // Find length of limb in base\r\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\r\n      limbLen++;\r\n    }\r\n    limbLen--;\r\n    limbPow = (limbPow / base) | 0;\r\n\r\n    var total = number.length - start;\r\n    var mod = total % limbLen;\r\n    var end = Math.min(total, total - mod) + start;\r\n\r\n    var word = 0;\r\n    for (var i = start; i < end; i += limbLen) {\r\n      word = parseBase(number, i, i + limbLen, base);\r\n\r\n      this.imuln(limbPow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n\r\n    if (mod !== 0) {\r\n      var pow = 1;\r\n      word = parseBase(number, i, number.length, base);\r\n\r\n      for (i = 0; i < mod; i++) {\r\n        pow *= base;\r\n      }\r\n\r\n      this.imuln(pow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n  };\r\n\r\n  BN.prototype.copy = function copy (dest) {\r\n    dest.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      dest.words[i] = this.words[i];\r\n    }\r\n    dest.length = this.length;\r\n    dest.negative = this.negative;\r\n    dest.red = this.red;\r\n  };\r\n\r\n  BN.prototype.clone = function clone () {\r\n    var r = new BN(null);\r\n    this.copy(r);\r\n    return r;\r\n  };\r\n\r\n  BN.prototype._expand = function _expand (size) {\r\n    while (this.length < size) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  // Remove leading `0` from `this`\r\n  BN.prototype.strip = function strip () {\r\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\r\n      this.length--;\r\n    }\r\n    return this._normSign();\r\n  };\r\n\r\n  BN.prototype._normSign = function _normSign () {\r\n    // -0 = 0\r\n    if (this.length === 1 && this.words[0] === 0) {\r\n      this.negative = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.inspect = function inspect () {\r\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\r\n  };\r\n\r\n  /*\r\n\r\n  var zeros = [];\r\n  var groupSizes = [];\r\n  var groupBases = [];\r\n\r\n  var s = '';\r\n  var i = -1;\r\n  while (++i < BN.wordSize) {\r\n    zeros[i] = s;\r\n    s += '0';\r\n  }\r\n  groupSizes[0] = 0;\r\n  groupSizes[1] = 0;\r\n  groupBases[0] = 0;\r\n  groupBases[1] = 0;\r\n  var base = 2 - 1;\r\n  while (++base < 36 + 1) {\r\n    var groupSize = 0;\r\n    var groupBase = 1;\r\n    while (groupBase < (1 << BN.wordSize) / base) {\r\n      groupBase *= base;\r\n      groupSize += 1;\r\n    }\r\n    groupSizes[base] = groupSize;\r\n    groupBases[base] = groupBase;\r\n  }\r\n\r\n  */\r\n\r\n  var zeros = [\r\n    '',\r\n    '0',\r\n    '00',\r\n    '000',\r\n    '0000',\r\n    '00000',\r\n    '000000',\r\n    '0000000',\r\n    '00000000',\r\n    '000000000',\r\n    '0000000000',\r\n    '00000000000',\r\n    '000000000000',\r\n    '0000000000000',\r\n    '00000000000000',\r\n    '000000000000000',\r\n    '0000000000000000',\r\n    '00000000000000000',\r\n    '000000000000000000',\r\n    '0000000000000000000',\r\n    '00000000000000000000',\r\n    '000000000000000000000',\r\n    '0000000000000000000000',\r\n    '00000000000000000000000',\r\n    '000000000000000000000000',\r\n    '0000000000000000000000000'\r\n  ];\r\n\r\n  var groupSizes = [\r\n    0, 0,\r\n    25, 16, 12, 11, 10, 9, 8,\r\n    8, 7, 7, 7, 7, 6, 6,\r\n    6, 6, 6, 6, 6, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5\r\n  ];\r\n\r\n  var groupBases = [\r\n    0, 0,\r\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\r\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\r\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\r\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\r\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\r\n  ];\r\n\r\n  BN.prototype.toString = function toString (base, padding) {\r\n    base = base || 10;\r\n    padding = padding | 0 || 1;\r\n\r\n    var out;\r\n    if (base === 16 || base === 'hex') {\r\n      out = '';\r\n      var off = 0;\r\n      var carry = 0;\r\n      for (var i = 0; i < this.length; i++) {\r\n        var w = this.words[i];\r\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\r\n        carry = (w >>> (24 - off)) & 0xffffff;\r\n        if (carry !== 0 || i !== this.length - 1) {\r\n          out = zeros[6 - word.length] + word + out;\r\n        } else {\r\n          out = word + out;\r\n        }\r\n        off += 2;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          i--;\r\n        }\r\n      }\r\n      if (carry !== 0) {\r\n        out = carry.toString(16) + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    if (base === (base | 0) && base >= 2 && base <= 36) {\r\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\r\n      var groupSize = groupSizes[base];\r\n      // var groupBase = Math.pow(base, groupSize);\r\n      var groupBase = groupBases[base];\r\n      out = '';\r\n      var c = this.clone();\r\n      c.negative = 0;\r\n      while (!c.isZero()) {\r\n        var r = c.modn(groupBase).toString(base);\r\n        c = c.idivn(groupBase);\r\n\r\n        if (!c.isZero()) {\r\n          out = zeros[groupSize - r.length] + r + out;\r\n        } else {\r\n          out = r + out;\r\n        }\r\n      }\r\n      if (this.isZero()) {\r\n        out = '0' + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    assert(false, 'Base should be between 2 and 36');\r\n  };\r\n\r\n  BN.prototype.toNumber = function toNumber () {\r\n    var ret = this.words[0];\r\n    if (this.length === 2) {\r\n      ret += this.words[1] * 0x4000000;\r\n    } else if (this.length === 3 && this.words[2] === 0x01) {\r\n      // NOTE: at this stage it is known that the top bit is set\r\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\r\n    } else if (this.length > 2) {\r\n      assert(false, 'Number can only safely store up to 53 bits');\r\n    }\r\n    return (this.negative !== 0) ? -ret : ret;\r\n  };\r\n\r\n  BN.prototype.toJSON = function toJSON () {\r\n    return this.toString(16);\r\n  };\r\n\r\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\r\n    assert(typeof Buffer !== 'undefined');\r\n    return this.toArrayLike(Buffer, endian, length);\r\n  };\r\n\r\n  BN.prototype.toArray = function toArray (endian, length) {\r\n    return this.toArrayLike(Array, endian, length);\r\n  };\r\n\r\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\r\n    var byteLength = this.byteLength();\r\n    var reqLength = length || Math.max(1, byteLength);\r\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\r\n    assert(reqLength > 0, 'Requested array length <= 0');\r\n\r\n    this.strip();\r\n    var littleEndian = endian === 'le';\r\n    var res = new ArrayType(reqLength);\r\n\r\n    var b, i;\r\n    var q = this.clone();\r\n    if (!littleEndian) {\r\n      // Assume big-endian\r\n      for (i = 0; i < reqLength - byteLength; i++) {\r\n        res[i] = 0;\r\n      }\r\n\r\n      for (i = 0; !q.isZero(); i++) {\r\n        b = q.andln(0xff);\r\n        q.iushrn(8);\r\n\r\n        res[reqLength - i - 1] = b;\r\n      }\r\n    } else {\r\n      for (i = 0; !q.isZero(); i++) {\r\n        b = q.andln(0xff);\r\n        q.iushrn(8);\r\n\r\n        res[i] = b;\r\n      }\r\n\r\n      for (; i < reqLength; i++) {\r\n        res[i] = 0;\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  if (Math.clz32) {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      return 32 - Math.clz32(w);\r\n    };\r\n  } else {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      var t = w;\r\n      var r = 0;\r\n      if (t >= 0x1000) {\r\n        r += 13;\r\n        t >>>= 13;\r\n      }\r\n      if (t >= 0x40) {\r\n        r += 7;\r\n        t >>>= 7;\r\n      }\r\n      if (t >= 0x8) {\r\n        r += 4;\r\n        t >>>= 4;\r\n      }\r\n      if (t >= 0x02) {\r\n        r += 2;\r\n        t >>>= 2;\r\n      }\r\n      return r + t;\r\n    };\r\n  }\r\n\r\n  BN.prototype._zeroBits = function _zeroBits (w) {\r\n    // Short-cut\r\n    if (w === 0) return 26;\r\n\r\n    var t = w;\r\n    var r = 0;\r\n    if ((t & 0x1fff) === 0) {\r\n      r += 13;\r\n      t >>>= 13;\r\n    }\r\n    if ((t & 0x7f) === 0) {\r\n      r += 7;\r\n      t >>>= 7;\r\n    }\r\n    if ((t & 0xf) === 0) {\r\n      r += 4;\r\n      t >>>= 4;\r\n    }\r\n    if ((t & 0x3) === 0) {\r\n      r += 2;\r\n      t >>>= 2;\r\n    }\r\n    if ((t & 0x1) === 0) {\r\n      r++;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  // Return number of used bits in a BN\r\n  BN.prototype.bitLength = function bitLength () {\r\n    var w = this.words[this.length - 1];\r\n    var hi = this._countBits(w);\r\n    return (this.length - 1) * 26 + hi;\r\n  };\r\n\r\n  function toBitArray (num) {\r\n    var w = new Array(num.bitLength());\r\n\r\n    for (var bit = 0; bit < w.length; bit++) {\r\n      var off = (bit / 26) | 0;\r\n      var wbit = bit % 26;\r\n\r\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\r\n    }\r\n\r\n    return w;\r\n  }\r\n\r\n  // Number of trailing zero bits\r\n  BN.prototype.zeroBits = function zeroBits () {\r\n    if (this.isZero()) return 0;\r\n\r\n    var r = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var b = this._zeroBits(this.words[i]);\r\n      r += b;\r\n      if (b !== 26) break;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  BN.prototype.byteLength = function byteLength () {\r\n    return Math.ceil(this.bitLength() / 8);\r\n  };\r\n\r\n  BN.prototype.toTwos = function toTwos (width) {\r\n    if (this.negative !== 0) {\r\n      return this.abs().inotn(width).iaddn(1);\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.fromTwos = function fromTwos (width) {\r\n    if (this.testn(width - 1)) {\r\n      return this.notn(width).iaddn(1).ineg();\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.isNeg = function isNeg () {\r\n    return this.negative !== 0;\r\n  };\r\n\r\n  // Return negative clone of `this`\r\n  BN.prototype.neg = function neg () {\r\n    return this.clone().ineg();\r\n  };\r\n\r\n  BN.prototype.ineg = function ineg () {\r\n    if (!this.isZero()) {\r\n      this.negative ^= 1;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Or `num` with `this` in-place\r\n  BN.prototype.iuor = function iuor (num) {\r\n    while (this.length < num.length) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n\r\n    for (var i = 0; i < num.length; i++) {\r\n      this.words[i] = this.words[i] | num.words[i];\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ior = function ior (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuor(num);\r\n  };\r\n\r\n  // Or `num` with `this`\r\n  BN.prototype.or = function or (num) {\r\n    if (this.length > num.length) return this.clone().ior(num);\r\n    return num.clone().ior(this);\r\n  };\r\n\r\n  BN.prototype.uor = function uor (num) {\r\n    if (this.length > num.length) return this.clone().iuor(num);\r\n    return num.clone().iuor(this);\r\n  };\r\n\r\n  // And `num` with `this` in-place\r\n  BN.prototype.iuand = function iuand (num) {\r\n    // b = min-length(num, this)\r\n    var b;\r\n    if (this.length > num.length) {\r\n      b = num;\r\n    } else {\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = this.words[i] & num.words[i];\r\n    }\r\n\r\n    this.length = b.length;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.iand = function iand (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuand(num);\r\n  };\r\n\r\n  // And `num` with `this`\r\n  BN.prototype.and = function and (num) {\r\n    if (this.length > num.length) return this.clone().iand(num);\r\n    return num.clone().iand(this);\r\n  };\r\n\r\n  BN.prototype.uand = function uand (num) {\r\n    if (this.length > num.length) return this.clone().iuand(num);\r\n    return num.clone().iuand(this);\r\n  };\r\n\r\n  // Xor `num` with `this` in-place\r\n  BN.prototype.iuxor = function iuxor (num) {\r\n    // a.length > b.length\r\n    var a;\r\n    var b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = a.words[i] ^ b.words[i];\r\n    }\r\n\r\n    if (this !== a) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = a.length;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ixor = function ixor (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuxor(num);\r\n  };\r\n\r\n  // Xor `num` with `this`\r\n  BN.prototype.xor = function xor (num) {\r\n    if (this.length > num.length) return this.clone().ixor(num);\r\n    return num.clone().ixor(this);\r\n  };\r\n\r\n  BN.prototype.uxor = function uxor (num) {\r\n    if (this.length > num.length) return this.clone().iuxor(num);\r\n    return num.clone().iuxor(this);\r\n  };\r\n\r\n  // Not ``this`` with ``width`` bitwidth\r\n  BN.prototype.inotn = function inotn (width) {\r\n    assert(typeof width === 'number' && width >= 0);\r\n\r\n    var bytesNeeded = Math.ceil(width / 26) | 0;\r\n    var bitsLeft = width % 26;\r\n\r\n    // Extend the buffer with leading zeroes\r\n    this._expand(bytesNeeded);\r\n\r\n    if (bitsLeft > 0) {\r\n      bytesNeeded--;\r\n    }\r\n\r\n    // Handle complete words\r\n    for (var i = 0; i < bytesNeeded; i++) {\r\n      this.words[i] = ~this.words[i] & 0x3ffffff;\r\n    }\r\n\r\n    // Handle the residue\r\n    if (bitsLeft > 0) {\r\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\r\n    }\r\n\r\n    // And remove leading zeroes\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.notn = function notn (width) {\r\n    return this.clone().inotn(width);\r\n  };\r\n\r\n  // Set `bit` of `this`\r\n  BN.prototype.setn = function setn (bit, val) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n\r\n    var off = (bit / 26) | 0;\r\n    var wbit = bit % 26;\r\n\r\n    this._expand(off + 1);\r\n\r\n    if (val) {\r\n      this.words[off] = this.words[off] | (1 << wbit);\r\n    } else {\r\n      this.words[off] = this.words[off] & ~(1 << wbit);\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Add `num` to `this` in-place\r\n  BN.prototype.iadd = function iadd (num) {\r\n    var r;\r\n\r\n    // negative + positive\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      this.negative = 0;\r\n      r = this.isub(num);\r\n      this.negative ^= 1;\r\n      return this._normSign();\r\n\r\n    // positive + negative\r\n    } else if (this.negative === 0 && num.negative !== 0) {\r\n      num.negative = 0;\r\n      r = this.isub(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n    }\r\n\r\n    // a.length > b.length\r\n    var a, b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n\r\n    this.length = a.length;\r\n    if (carry !== 0) {\r\n      this.words[this.length] = carry;\r\n      this.length++;\r\n    // Copy the rest of the words\r\n    } else if (a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Add `num` to `this`\r\n  BN.prototype.add = function add (num) {\r\n    var res;\r\n    if (num.negative !== 0 && this.negative === 0) {\r\n      num.negative = 0;\r\n      res = this.sub(num);\r\n      num.negative ^= 1;\r\n      return res;\r\n    } else if (num.negative === 0 && this.negative !== 0) {\r\n      this.negative = 0;\r\n      res = num.sub(this);\r\n      this.negative = 1;\r\n      return res;\r\n    }\r\n\r\n    if (this.length > num.length) return this.clone().iadd(num);\r\n\r\n    return num.clone().iadd(this);\r\n  };\r\n\r\n  // Subtract `num` from `this` in-place\r\n  BN.prototype.isub = function isub (num) {\r\n    // this - (-num) = this + num\r\n    if (num.negative !== 0) {\r\n      num.negative = 0;\r\n      var r = this.iadd(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n\r\n    // -this - num = -(this + num)\r\n    } else if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iadd(num);\r\n      this.negative = 1;\r\n      return this._normSign();\r\n    }\r\n\r\n    // At this point both numbers are positive\r\n    var cmp = this.cmp(num);\r\n\r\n    // Optimization - zeroify\r\n    if (cmp === 0) {\r\n      this.negative = 0;\r\n      this.length = 1;\r\n      this.words[0] = 0;\r\n      return this;\r\n    }\r\n\r\n    // a > b\r\n    var a, b;\r\n    if (cmp > 0) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n\r\n    // Copy rest of the words\r\n    if (carry === 0 && i < a.length && a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = Math.max(this.length, i);\r\n\r\n    if (a !== this) {\r\n      this.negative = 1;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Subtract `num` from `this`\r\n  BN.prototype.sub = function sub (num) {\r\n    return this.clone().isub(num);\r\n  };\r\n\r\n  function smallMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    var len = (self.length + num.length) | 0;\r\n    out.length = len;\r\n    len = (len - 1) | 0;\r\n\r\n    // Peel one iteration (compiler can't do it, because of code complexity)\r\n    var a = self.words[0] | 0;\r\n    var b = num.words[0] | 0;\r\n    var r = a * b;\r\n\r\n    var lo = r & 0x3ffffff;\r\n    var carry = (r / 0x4000000) | 0;\r\n    out.words[0] = lo;\r\n\r\n    for (var k = 1; k < len; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = carry >>> 26;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = (k - j) | 0;\r\n        a = self.words[i] | 0;\r\n        b = num.words[j] | 0;\r\n        r = a * b + rword;\r\n        ncarry += (r / 0x4000000) | 0;\r\n        rword = r & 0x3ffffff;\r\n      }\r\n      out.words[k] = rword | 0;\r\n      carry = ncarry | 0;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry | 0;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out.strip();\r\n  }\r\n\r\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\r\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\r\n  // multiplication (like elliptic secp256k1).\r\n  var comb10MulTo = function comb10MulTo (self, num, out) {\r\n    var a = self.words;\r\n    var b = num.words;\r\n    var o = out.words;\r\n    var c = 0;\r\n    var lo;\r\n    var mid;\r\n    var hi;\r\n    var a0 = a[0] | 0;\r\n    var al0 = a0 & 0x1fff;\r\n    var ah0 = a0 >>> 13;\r\n    var a1 = a[1] | 0;\r\n    var al1 = a1 & 0x1fff;\r\n    var ah1 = a1 >>> 13;\r\n    var a2 = a[2] | 0;\r\n    var al2 = a2 & 0x1fff;\r\n    var ah2 = a2 >>> 13;\r\n    var a3 = a[3] | 0;\r\n    var al3 = a3 & 0x1fff;\r\n    var ah3 = a3 >>> 13;\r\n    var a4 = a[4] | 0;\r\n    var al4 = a4 & 0x1fff;\r\n    var ah4 = a4 >>> 13;\r\n    var a5 = a[5] | 0;\r\n    var al5 = a5 & 0x1fff;\r\n    var ah5 = a5 >>> 13;\r\n    var a6 = a[6] | 0;\r\n    var al6 = a6 & 0x1fff;\r\n    var ah6 = a6 >>> 13;\r\n    var a7 = a[7] | 0;\r\n    var al7 = a7 & 0x1fff;\r\n    var ah7 = a7 >>> 13;\r\n    var a8 = a[8] | 0;\r\n    var al8 = a8 & 0x1fff;\r\n    var ah8 = a8 >>> 13;\r\n    var a9 = a[9] | 0;\r\n    var al9 = a9 & 0x1fff;\r\n    var ah9 = a9 >>> 13;\r\n    var b0 = b[0] | 0;\r\n    var bl0 = b0 & 0x1fff;\r\n    var bh0 = b0 >>> 13;\r\n    var b1 = b[1] | 0;\r\n    var bl1 = b1 & 0x1fff;\r\n    var bh1 = b1 >>> 13;\r\n    var b2 = b[2] | 0;\r\n    var bl2 = b2 & 0x1fff;\r\n    var bh2 = b2 >>> 13;\r\n    var b3 = b[3] | 0;\r\n    var bl3 = b3 & 0x1fff;\r\n    var bh3 = b3 >>> 13;\r\n    var b4 = b[4] | 0;\r\n    var bl4 = b4 & 0x1fff;\r\n    var bh4 = b4 >>> 13;\r\n    var b5 = b[5] | 0;\r\n    var bl5 = b5 & 0x1fff;\r\n    var bh5 = b5 >>> 13;\r\n    var b6 = b[6] | 0;\r\n    var bl6 = b6 & 0x1fff;\r\n    var bh6 = b6 >>> 13;\r\n    var b7 = b[7] | 0;\r\n    var bl7 = b7 & 0x1fff;\r\n    var bh7 = b7 >>> 13;\r\n    var b8 = b[8] | 0;\r\n    var bl8 = b8 & 0x1fff;\r\n    var bh8 = b8 >>> 13;\r\n    var b9 = b[9] | 0;\r\n    var bl9 = b9 & 0x1fff;\r\n    var bh9 = b9 >>> 13;\r\n\r\n    out.negative = self.negative ^ num.negative;\r\n    out.length = 19;\r\n    /* k = 0 */\r\n    lo = Math.imul(al0, bl0);\r\n    mid = Math.imul(al0, bh0);\r\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\r\n    hi = Math.imul(ah0, bh0);\r\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\r\n    w0 &= 0x3ffffff;\r\n    /* k = 1 */\r\n    lo = Math.imul(al1, bl0);\r\n    mid = Math.imul(al1, bh0);\r\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\r\n    hi = Math.imul(ah1, bh0);\r\n    lo = (lo + Math.imul(al0, bl1)) | 0;\r\n    mid = (mid + Math.imul(al0, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\r\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\r\n    w1 &= 0x3ffffff;\r\n    /* k = 2 */\r\n    lo = Math.imul(al2, bl0);\r\n    mid = Math.imul(al2, bh0);\r\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\r\n    hi = Math.imul(ah2, bh0);\r\n    lo = (lo + Math.imul(al1, bl1)) | 0;\r\n    mid = (mid + Math.imul(al1, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\r\n    lo = (lo + Math.imul(al0, bl2)) | 0;\r\n    mid = (mid + Math.imul(al0, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\r\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\r\n    w2 &= 0x3ffffff;\r\n    /* k = 3 */\r\n    lo = Math.imul(al3, bl0);\r\n    mid = Math.imul(al3, bh0);\r\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\r\n    hi = Math.imul(ah3, bh0);\r\n    lo = (lo + Math.imul(al2, bl1)) | 0;\r\n    mid = (mid + Math.imul(al2, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\r\n    lo = (lo + Math.imul(al1, bl2)) | 0;\r\n    mid = (mid + Math.imul(al1, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\r\n    lo = (lo + Math.imul(al0, bl3)) | 0;\r\n    mid = (mid + Math.imul(al0, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\r\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\r\n    w3 &= 0x3ffffff;\r\n    /* k = 4 */\r\n    lo = Math.imul(al4, bl0);\r\n    mid = Math.imul(al4, bh0);\r\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\r\n    hi = Math.imul(ah4, bh0);\r\n    lo = (lo + Math.imul(al3, bl1)) | 0;\r\n    mid = (mid + Math.imul(al3, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\r\n    lo = (lo + Math.imul(al2, bl2)) | 0;\r\n    mid = (mid + Math.imul(al2, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\r\n    lo = (lo + Math.imul(al1, bl3)) | 0;\r\n    mid = (mid + Math.imul(al1, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\r\n    lo = (lo + Math.imul(al0, bl4)) | 0;\r\n    mid = (mid + Math.imul(al0, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\r\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\r\n    w4 &= 0x3ffffff;\r\n    /* k = 5 */\r\n    lo = Math.imul(al5, bl0);\r\n    mid = Math.imul(al5, bh0);\r\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\r\n    hi = Math.imul(ah5, bh0);\r\n    lo = (lo + Math.imul(al4, bl1)) | 0;\r\n    mid = (mid + Math.imul(al4, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\r\n    lo = (lo + Math.imul(al3, bl2)) | 0;\r\n    mid = (mid + Math.imul(al3, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\r\n    lo = (lo + Math.imul(al2, bl3)) | 0;\r\n    mid = (mid + Math.imul(al2, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\r\n    lo = (lo + Math.imul(al1, bl4)) | 0;\r\n    mid = (mid + Math.imul(al1, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\r\n    lo = (lo + Math.imul(al0, bl5)) | 0;\r\n    mid = (mid + Math.imul(al0, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\r\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\r\n    w5 &= 0x3ffffff;\r\n    /* k = 6 */\r\n    lo = Math.imul(al6, bl0);\r\n    mid = Math.imul(al6, bh0);\r\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\r\n    hi = Math.imul(ah6, bh0);\r\n    lo = (lo + Math.imul(al5, bl1)) | 0;\r\n    mid = (mid + Math.imul(al5, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\r\n    lo = (lo + Math.imul(al4, bl2)) | 0;\r\n    mid = (mid + Math.imul(al4, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\r\n    lo = (lo + Math.imul(al3, bl3)) | 0;\r\n    mid = (mid + Math.imul(al3, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\r\n    lo = (lo + Math.imul(al2, bl4)) | 0;\r\n    mid = (mid + Math.imul(al2, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\r\n    lo = (lo + Math.imul(al1, bl5)) | 0;\r\n    mid = (mid + Math.imul(al1, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\r\n    lo = (lo + Math.imul(al0, bl6)) | 0;\r\n    mid = (mid + Math.imul(al0, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\r\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\r\n    w6 &= 0x3ffffff;\r\n    /* k = 7 */\r\n    lo = Math.imul(al7, bl0);\r\n    mid = Math.imul(al7, bh0);\r\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\r\n    hi = Math.imul(ah7, bh0);\r\n    lo = (lo + Math.imul(al6, bl1)) | 0;\r\n    mid = (mid + Math.imul(al6, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\r\n    lo = (lo + Math.imul(al5, bl2)) | 0;\r\n    mid = (mid + Math.imul(al5, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\r\n    lo = (lo + Math.imul(al4, bl3)) | 0;\r\n    mid = (mid + Math.imul(al4, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\r\n    lo = (lo + Math.imul(al3, bl4)) | 0;\r\n    mid = (mid + Math.imul(al3, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\r\n    lo = (lo + Math.imul(al2, bl5)) | 0;\r\n    mid = (mid + Math.imul(al2, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\r\n    lo = (lo + Math.imul(al1, bl6)) | 0;\r\n    mid = (mid + Math.imul(al1, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\r\n    lo = (lo + Math.imul(al0, bl7)) | 0;\r\n    mid = (mid + Math.imul(al0, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\r\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\r\n    w7 &= 0x3ffffff;\r\n    /* k = 8 */\r\n    lo = Math.imul(al8, bl0);\r\n    mid = Math.imul(al8, bh0);\r\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\r\n    hi = Math.imul(ah8, bh0);\r\n    lo = (lo + Math.imul(al7, bl1)) | 0;\r\n    mid = (mid + Math.imul(al7, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\r\n    lo = (lo + Math.imul(al6, bl2)) | 0;\r\n    mid = (mid + Math.imul(al6, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\r\n    lo = (lo + Math.imul(al5, bl3)) | 0;\r\n    mid = (mid + Math.imul(al5, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\r\n    lo = (lo + Math.imul(al4, bl4)) | 0;\r\n    mid = (mid + Math.imul(al4, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\r\n    lo = (lo + Math.imul(al3, bl5)) | 0;\r\n    mid = (mid + Math.imul(al3, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\r\n    lo = (lo + Math.imul(al2, bl6)) | 0;\r\n    mid = (mid + Math.imul(al2, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\r\n    lo = (lo + Math.imul(al1, bl7)) | 0;\r\n    mid = (mid + Math.imul(al1, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\r\n    lo = (lo + Math.imul(al0, bl8)) | 0;\r\n    mid = (mid + Math.imul(al0, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\r\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\r\n    w8 &= 0x3ffffff;\r\n    /* k = 9 */\r\n    lo = Math.imul(al9, bl0);\r\n    mid = Math.imul(al9, bh0);\r\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\r\n    hi = Math.imul(ah9, bh0);\r\n    lo = (lo + Math.imul(al8, bl1)) | 0;\r\n    mid = (mid + Math.imul(al8, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\r\n    lo = (lo + Math.imul(al7, bl2)) | 0;\r\n    mid = (mid + Math.imul(al7, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\r\n    lo = (lo + Math.imul(al6, bl3)) | 0;\r\n    mid = (mid + Math.imul(al6, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\r\n    lo = (lo + Math.imul(al5, bl4)) | 0;\r\n    mid = (mid + Math.imul(al5, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\r\n    lo = (lo + Math.imul(al4, bl5)) | 0;\r\n    mid = (mid + Math.imul(al4, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\r\n    lo = (lo + Math.imul(al3, bl6)) | 0;\r\n    mid = (mid + Math.imul(al3, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\r\n    lo = (lo + Math.imul(al2, bl7)) | 0;\r\n    mid = (mid + Math.imul(al2, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\r\n    lo = (lo + Math.imul(al1, bl8)) | 0;\r\n    mid = (mid + Math.imul(al1, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\r\n    lo = (lo + Math.imul(al0, bl9)) | 0;\r\n    mid = (mid + Math.imul(al0, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\r\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\r\n    w9 &= 0x3ffffff;\r\n    /* k = 10 */\r\n    lo = Math.imul(al9, bl1);\r\n    mid = Math.imul(al9, bh1);\r\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\r\n    hi = Math.imul(ah9, bh1);\r\n    lo = (lo + Math.imul(al8, bl2)) | 0;\r\n    mid = (mid + Math.imul(al8, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\r\n    lo = (lo + Math.imul(al7, bl3)) | 0;\r\n    mid = (mid + Math.imul(al7, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\r\n    lo = (lo + Math.imul(al6, bl4)) | 0;\r\n    mid = (mid + Math.imul(al6, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\r\n    lo = (lo + Math.imul(al5, bl5)) | 0;\r\n    mid = (mid + Math.imul(al5, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\r\n    lo = (lo + Math.imul(al4, bl6)) | 0;\r\n    mid = (mid + Math.imul(al4, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\r\n    lo = (lo + Math.imul(al3, bl7)) | 0;\r\n    mid = (mid + Math.imul(al3, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\r\n    lo = (lo + Math.imul(al2, bl8)) | 0;\r\n    mid = (mid + Math.imul(al2, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\r\n    lo = (lo + Math.imul(al1, bl9)) | 0;\r\n    mid = (mid + Math.imul(al1, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\r\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\r\n    w10 &= 0x3ffffff;\r\n    /* k = 11 */\r\n    lo = Math.imul(al9, bl2);\r\n    mid = Math.imul(al9, bh2);\r\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\r\n    hi = Math.imul(ah9, bh2);\r\n    lo = (lo + Math.imul(al8, bl3)) | 0;\r\n    mid = (mid + Math.imul(al8, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\r\n    lo = (lo + Math.imul(al7, bl4)) | 0;\r\n    mid = (mid + Math.imul(al7, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\r\n    lo = (lo + Math.imul(al6, bl5)) | 0;\r\n    mid = (mid + Math.imul(al6, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\r\n    lo = (lo + Math.imul(al5, bl6)) | 0;\r\n    mid = (mid + Math.imul(al5, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\r\n    lo = (lo + Math.imul(al4, bl7)) | 0;\r\n    mid = (mid + Math.imul(al4, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\r\n    lo = (lo + Math.imul(al3, bl8)) | 0;\r\n    mid = (mid + Math.imul(al3, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\r\n    lo = (lo + Math.imul(al2, bl9)) | 0;\r\n    mid = (mid + Math.imul(al2, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\r\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\r\n    w11 &= 0x3ffffff;\r\n    /* k = 12 */\r\n    lo = Math.imul(al9, bl3);\r\n    mid = Math.imul(al9, bh3);\r\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\r\n    hi = Math.imul(ah9, bh3);\r\n    lo = (lo + Math.imul(al8, bl4)) | 0;\r\n    mid = (mid + Math.imul(al8, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\r\n    lo = (lo + Math.imul(al7, bl5)) | 0;\r\n    mid = (mid + Math.imul(al7, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\r\n    lo = (lo + Math.imul(al6, bl6)) | 0;\r\n    mid = (mid + Math.imul(al6, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\r\n    lo = (lo + Math.imul(al5, bl7)) | 0;\r\n    mid = (mid + Math.imul(al5, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\r\n    lo = (lo + Math.imul(al4, bl8)) | 0;\r\n    mid = (mid + Math.imul(al4, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\r\n    lo = (lo + Math.imul(al3, bl9)) | 0;\r\n    mid = (mid + Math.imul(al3, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\r\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\r\n    w12 &= 0x3ffffff;\r\n    /* k = 13 */\r\n    lo = Math.imul(al9, bl4);\r\n    mid = Math.imul(al9, bh4);\r\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\r\n    hi = Math.imul(ah9, bh4);\r\n    lo = (lo + Math.imul(al8, bl5)) | 0;\r\n    mid = (mid + Math.imul(al8, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\r\n    lo = (lo + Math.imul(al7, bl6)) | 0;\r\n    mid = (mid + Math.imul(al7, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\r\n    lo = (lo + Math.imul(al6, bl7)) | 0;\r\n    mid = (mid + Math.imul(al6, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\r\n    lo = (lo + Math.imul(al5, bl8)) | 0;\r\n    mid = (mid + Math.imul(al5, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\r\n    lo = (lo + Math.imul(al4, bl9)) | 0;\r\n    mid = (mid + Math.imul(al4, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\r\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\r\n    w13 &= 0x3ffffff;\r\n    /* k = 14 */\r\n    lo = Math.imul(al9, bl5);\r\n    mid = Math.imul(al9, bh5);\r\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\r\n    hi = Math.imul(ah9, bh5);\r\n    lo = (lo + Math.imul(al8, bl6)) | 0;\r\n    mid = (mid + Math.imul(al8, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\r\n    lo = (lo + Math.imul(al7, bl7)) | 0;\r\n    mid = (mid + Math.imul(al7, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\r\n    lo = (lo + Math.imul(al6, bl8)) | 0;\r\n    mid = (mid + Math.imul(al6, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\r\n    lo = (lo + Math.imul(al5, bl9)) | 0;\r\n    mid = (mid + Math.imul(al5, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\r\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\r\n    w14 &= 0x3ffffff;\r\n    /* k = 15 */\r\n    lo = Math.imul(al9, bl6);\r\n    mid = Math.imul(al9, bh6);\r\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\r\n    hi = Math.imul(ah9, bh6);\r\n    lo = (lo + Math.imul(al8, bl7)) | 0;\r\n    mid = (mid + Math.imul(al8, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\r\n    lo = (lo + Math.imul(al7, bl8)) | 0;\r\n    mid = (mid + Math.imul(al7, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\r\n    lo = (lo + Math.imul(al6, bl9)) | 0;\r\n    mid = (mid + Math.imul(al6, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\r\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\r\n    w15 &= 0x3ffffff;\r\n    /* k = 16 */\r\n    lo = Math.imul(al9, bl7);\r\n    mid = Math.imul(al9, bh7);\r\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\r\n    hi = Math.imul(ah9, bh7);\r\n    lo = (lo + Math.imul(al8, bl8)) | 0;\r\n    mid = (mid + Math.imul(al8, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\r\n    lo = (lo + Math.imul(al7, bl9)) | 0;\r\n    mid = (mid + Math.imul(al7, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\r\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\r\n    w16 &= 0x3ffffff;\r\n    /* k = 17 */\r\n    lo = Math.imul(al9, bl8);\r\n    mid = Math.imul(al9, bh8);\r\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\r\n    hi = Math.imul(ah9, bh8);\r\n    lo = (lo + Math.imul(al8, bl9)) | 0;\r\n    mid = (mid + Math.imul(al8, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\r\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\r\n    w17 &= 0x3ffffff;\r\n    /* k = 18 */\r\n    lo = Math.imul(al9, bl9);\r\n    mid = Math.imul(al9, bh9);\r\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\r\n    hi = Math.imul(ah9, bh9);\r\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\r\n    w18 &= 0x3ffffff;\r\n    o[0] = w0;\r\n    o[1] = w1;\r\n    o[2] = w2;\r\n    o[3] = w3;\r\n    o[4] = w4;\r\n    o[5] = w5;\r\n    o[6] = w6;\r\n    o[7] = w7;\r\n    o[8] = w8;\r\n    o[9] = w9;\r\n    o[10] = w10;\r\n    o[11] = w11;\r\n    o[12] = w12;\r\n    o[13] = w13;\r\n    o[14] = w14;\r\n    o[15] = w15;\r\n    o[16] = w16;\r\n    o[17] = w17;\r\n    o[18] = w18;\r\n    if (c !== 0) {\r\n      o[19] = c;\r\n      out.length++;\r\n    }\r\n    return out;\r\n  };\r\n\r\n  // Polyfill comb\r\n  if (!Math.imul) {\r\n    comb10MulTo = smallMulTo;\r\n  }\r\n\r\n  function bigMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    out.length = self.length + num.length;\r\n\r\n    var carry = 0;\r\n    var hncarry = 0;\r\n    for (var k = 0; k < out.length - 1; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = hncarry;\r\n      hncarry = 0;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = k - j;\r\n        var a = self.words[i] | 0;\r\n        var b = num.words[j] | 0;\r\n        var r = a * b;\r\n\r\n        var lo = r & 0x3ffffff;\r\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\r\n        lo = (lo + rword) | 0;\r\n        rword = lo & 0x3ffffff;\r\n        ncarry = (ncarry + (lo >>> 26)) | 0;\r\n\r\n        hncarry += ncarry >>> 26;\r\n        ncarry &= 0x3ffffff;\r\n      }\r\n      out.words[k] = rword;\r\n      carry = ncarry;\r\n      ncarry = hncarry;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out.strip();\r\n  }\r\n\r\n  function jumboMulTo (self, num, out) {\r\n    var fftm = new FFTM();\r\n    return fftm.mulp(self, num, out);\r\n  }\r\n\r\n  BN.prototype.mulTo = function mulTo (num, out) {\r\n    var res;\r\n    var len = this.length + num.length;\r\n    if (this.length === 10 && num.length === 10) {\r\n      res = comb10MulTo(this, num, out);\r\n    } else if (len < 63) {\r\n      res = smallMulTo(this, num, out);\r\n    } else if (len < 1024) {\r\n      res = bigMulTo(this, num, out);\r\n    } else {\r\n      res = jumboMulTo(this, num, out);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Cooley-Tukey algorithm for FFT\r\n  // slightly revisited to rely on looping instead of recursion\r\n\r\n  function FFTM (x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  FFTM.prototype.makeRBT = function makeRBT (N) {\r\n    var t = new Array(N);\r\n    var l = BN.prototype._countBits(N) - 1;\r\n    for (var i = 0; i < N; i++) {\r\n      t[i] = this.revBin(i, l, N);\r\n    }\r\n\r\n    return t;\r\n  };\r\n\r\n  // Returns binary-reversed representation of `x`\r\n  FFTM.prototype.revBin = function revBin (x, l, N) {\r\n    if (x === 0 || x === N - 1) return x;\r\n\r\n    var rb = 0;\r\n    for (var i = 0; i < l; i++) {\r\n      rb |= (x & 1) << (l - i - 1);\r\n      x >>= 1;\r\n    }\r\n\r\n    return rb;\r\n  };\r\n\r\n  // Performs \"tweedling\" phase, therefore 'emulating'\r\n  // behaviour of the recursive algorithm\r\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\r\n    for (var i = 0; i < N; i++) {\r\n      rtws[i] = rws[rbt[i]];\r\n      itws[i] = iws[rbt[i]];\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\r\n    this.permute(rbt, rws, iws, rtws, itws, N);\r\n\r\n    for (var s = 1; s < N; s <<= 1) {\r\n      var l = s << 1;\r\n\r\n      var rtwdf = Math.cos(2 * Math.PI / l);\r\n      var itwdf = Math.sin(2 * Math.PI / l);\r\n\r\n      for (var p = 0; p < N; p += l) {\r\n        var rtwdf_ = rtwdf;\r\n        var itwdf_ = itwdf;\r\n\r\n        for (var j = 0; j < s; j++) {\r\n          var re = rtws[p + j];\r\n          var ie = itws[p + j];\r\n\r\n          var ro = rtws[p + j + s];\r\n          var io = itws[p + j + s];\r\n\r\n          var rx = rtwdf_ * ro - itwdf_ * io;\r\n\r\n          io = rtwdf_ * io + itwdf_ * ro;\r\n          ro = rx;\r\n\r\n          rtws[p + j] = re + ro;\r\n          itws[p + j] = ie + io;\r\n\r\n          rtws[p + j + s] = re - ro;\r\n          itws[p + j + s] = ie - io;\r\n\r\n          /* jshint maxdepth : false */\r\n          if (j !== l) {\r\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\r\n\r\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\r\n            rtwdf_ = rx;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\r\n    var N = Math.max(m, n) | 1;\r\n    var odd = N & 1;\r\n    var i = 0;\r\n    for (N = N / 2 | 0; N; N = N >>> 1) {\r\n      i++;\r\n    }\r\n\r\n    return 1 << i + 1 + odd;\r\n  };\r\n\r\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\r\n    if (N <= 1) return;\r\n\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var t = rws[i];\r\n\r\n      rws[i] = rws[N - i - 1];\r\n      rws[N - i - 1] = t;\r\n\r\n      t = iws[i];\r\n\r\n      iws[i] = -iws[N - i - 1];\r\n      iws[N - i - 1] = -t;\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\r\n        Math.round(ws[2 * i] / N) +\r\n        carry;\r\n\r\n      ws[i] = w & 0x3ffffff;\r\n\r\n      if (w < 0x4000000) {\r\n        carry = 0;\r\n      } else {\r\n        carry = w / 0x4000000 | 0;\r\n      }\r\n    }\r\n\r\n    return ws;\r\n  };\r\n\r\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < len; i++) {\r\n      carry = carry + (ws[i] | 0);\r\n\r\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\r\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\r\n    }\r\n\r\n    // Pad with zeroes\r\n    for (i = 2 * len; i < N; ++i) {\r\n      rws[i] = 0;\r\n    }\r\n\r\n    assert(carry === 0);\r\n    assert((carry & ~0x1fff) === 0);\r\n  };\r\n\r\n  FFTM.prototype.stub = function stub (N) {\r\n    var ph = new Array(N);\r\n    for (var i = 0; i < N; i++) {\r\n      ph[i] = 0;\r\n    }\r\n\r\n    return ph;\r\n  };\r\n\r\n  FFTM.prototype.mulp = function mulp (x, y, out) {\r\n    var N = 2 * this.guessLen13b(x.length, y.length);\r\n\r\n    var rbt = this.makeRBT(N);\r\n\r\n    var _ = this.stub(N);\r\n\r\n    var rws = new Array(N);\r\n    var rwst = new Array(N);\r\n    var iwst = new Array(N);\r\n\r\n    var nrws = new Array(N);\r\n    var nrwst = new Array(N);\r\n    var niwst = new Array(N);\r\n\r\n    var rmws = out.words;\r\n    rmws.length = N;\r\n\r\n    this.convert13b(x.words, x.length, rws, N);\r\n    this.convert13b(y.words, y.length, nrws, N);\r\n\r\n    this.transform(rws, _, rwst, iwst, N, rbt);\r\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\r\n\r\n    for (var i = 0; i < N; i++) {\r\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\r\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\r\n      rwst[i] = rx;\r\n    }\r\n\r\n    this.conjugate(rwst, iwst, N);\r\n    this.transform(rwst, iwst, rmws, _, N, rbt);\r\n    this.conjugate(rmws, _, N);\r\n    this.normalize13b(rmws, N);\r\n\r\n    out.negative = x.negative ^ y.negative;\r\n    out.length = x.length + y.length;\r\n    return out.strip();\r\n  };\r\n\r\n  // Multiply `this` by `num`\r\n  BN.prototype.mul = function mul (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return this.mulTo(num, out);\r\n  };\r\n\r\n  // Multiply employing FFT\r\n  BN.prototype.mulf = function mulf (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return jumboMulTo(this, num, out);\r\n  };\r\n\r\n  // In-place Multiplication\r\n  BN.prototype.imul = function imul (num) {\r\n    return this.clone().mulTo(num, this);\r\n  };\r\n\r\n  BN.prototype.imuln = function imuln (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n\r\n    // Carry\r\n    var carry = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var w = (this.words[i] | 0) * num;\r\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\r\n      carry >>= 26;\r\n      carry += (w / 0x4000000) | 0;\r\n      // NOTE: lo is 27bit maximum\r\n      carry += lo >>> 26;\r\n      this.words[i] = lo & 0x3ffffff;\r\n    }\r\n\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.muln = function muln (num) {\r\n    return this.clone().imuln(num);\r\n  };\r\n\r\n  // `this` * `this`\r\n  BN.prototype.sqr = function sqr () {\r\n    return this.mul(this);\r\n  };\r\n\r\n  // `this` * `this` in-place\r\n  BN.prototype.isqr = function isqr () {\r\n    return this.imul(this.clone());\r\n  };\r\n\r\n  // Math.pow(`this`, `num`)\r\n  BN.prototype.pow = function pow (num) {\r\n    var w = toBitArray(num);\r\n    if (w.length === 0) return new BN(1);\r\n\r\n    // Skip leading zeroes\r\n    var res = this;\r\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\r\n      if (w[i] !== 0) break;\r\n    }\r\n\r\n    if (++i < w.length) {\r\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\r\n        if (w[i] === 0) continue;\r\n\r\n        res = res.mul(q);\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Shift-left in-place\r\n  BN.prototype.iushln = function iushln (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\r\n    var i;\r\n\r\n    if (r !== 0) {\r\n      var carry = 0;\r\n\r\n      for (i = 0; i < this.length; i++) {\r\n        var newCarry = this.words[i] & carryMask;\r\n        var c = ((this.words[i] | 0) - newCarry) << r;\r\n        this.words[i] = c | carry;\r\n        carry = newCarry >>> (26 - r);\r\n      }\r\n\r\n      if (carry) {\r\n        this.words[i] = carry;\r\n        this.length++;\r\n      }\r\n    }\r\n\r\n    if (s !== 0) {\r\n      for (i = this.length - 1; i >= 0; i--) {\r\n        this.words[i + s] = this.words[i];\r\n      }\r\n\r\n      for (i = 0; i < s; i++) {\r\n        this.words[i] = 0;\r\n      }\r\n\r\n      this.length += s;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ishln = function ishln (bits) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushln(bits);\r\n  };\r\n\r\n  // Shift-right in-place\r\n  // NOTE: `hint` is a lowest bit before trailing zeroes\r\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\r\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var h;\r\n    if (hint) {\r\n      h = (hint - (hint % 26)) / 26;\r\n    } else {\r\n      h = 0;\r\n    }\r\n\r\n    var r = bits % 26;\r\n    var s = Math.min((bits - r) / 26, this.length);\r\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n    var maskedWords = extended;\r\n\r\n    h -= s;\r\n    h = Math.max(0, h);\r\n\r\n    // Extended mode, copy masked part\r\n    if (maskedWords) {\r\n      for (var i = 0; i < s; i++) {\r\n        maskedWords.words[i] = this.words[i];\r\n      }\r\n      maskedWords.length = s;\r\n    }\r\n\r\n    if (s === 0) {\r\n      // No-op, we should not move anything at all\r\n    } else if (this.length > s) {\r\n      this.length -= s;\r\n      for (i = 0; i < this.length; i++) {\r\n        this.words[i] = this.words[i + s];\r\n      }\r\n    } else {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\r\n      var word = this.words[i] | 0;\r\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\r\n      carry = word & mask;\r\n    }\r\n\r\n    // Push carried bits as a mask\r\n    if (maskedWords && carry !== 0) {\r\n      maskedWords.words[maskedWords.length++] = carry;\r\n    }\r\n\r\n    if (this.length === 0) {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushrn(bits, hint, extended);\r\n  };\r\n\r\n  // Shift-left\r\n  BN.prototype.shln = function shln (bits) {\r\n    return this.clone().ishln(bits);\r\n  };\r\n\r\n  BN.prototype.ushln = function ushln (bits) {\r\n    return this.clone().iushln(bits);\r\n  };\r\n\r\n  // Shift-right\r\n  BN.prototype.shrn = function shrn (bits) {\r\n    return this.clone().ishrn(bits);\r\n  };\r\n\r\n  BN.prototype.ushrn = function ushrn (bits) {\r\n    return this.clone().iushrn(bits);\r\n  };\r\n\r\n  // Test if n bit is set\r\n  BN.prototype.testn = function testn (bit) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) return false;\r\n\r\n    // Check bit and return\r\n    var w = this.words[s];\r\n\r\n    return !!(w & q);\r\n  };\r\n\r\n  // Return only lowers bits of number (in-place)\r\n  BN.prototype.imaskn = function imaskn (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n\r\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\r\n\r\n    if (this.length <= s) {\r\n      return this;\r\n    }\r\n\r\n    if (r !== 0) {\r\n      s++;\r\n    }\r\n    this.length = Math.min(s, this.length);\r\n\r\n    if (r !== 0) {\r\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n      this.words[this.length - 1] &= mask;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Return only lowers bits of number\r\n  BN.prototype.maskn = function maskn (bits) {\r\n    return this.clone().imaskn(bits);\r\n  };\r\n\r\n  // Add plain number `num` to `this`\r\n  BN.prototype.iaddn = function iaddn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.isubn(-num);\r\n\r\n    // Possible sign change\r\n    if (this.negative !== 0) {\r\n      if (this.length === 1 && (this.words[0] | 0) < num) {\r\n        this.words[0] = num - (this.words[0] | 0);\r\n        this.negative = 0;\r\n        return this;\r\n      }\r\n\r\n      this.negative = 0;\r\n      this.isubn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    // Add without checks\r\n    return this._iaddn(num);\r\n  };\r\n\r\n  BN.prototype._iaddn = function _iaddn (num) {\r\n    this.words[0] += num;\r\n\r\n    // Carry\r\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\r\n      this.words[i] -= 0x4000000;\r\n      if (i === this.length - 1) {\r\n        this.words[i + 1] = 1;\r\n      } else {\r\n        this.words[i + 1]++;\r\n      }\r\n    }\r\n    this.length = Math.max(this.length, i + 1);\r\n\r\n    return this;\r\n  };\r\n\r\n  // Subtract plain number `num` from `this`\r\n  BN.prototype.isubn = function isubn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.iaddn(-num);\r\n\r\n    if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iaddn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    this.words[0] -= num;\r\n\r\n    if (this.length === 1 && this.words[0] < 0) {\r\n      this.words[0] = -this.words[0];\r\n      this.negative = 1;\r\n    } else {\r\n      // Carry\r\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\r\n        this.words[i] += 0x4000000;\r\n        this.words[i + 1] -= 1;\r\n      }\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.addn = function addn (num) {\r\n    return this.clone().iaddn(num);\r\n  };\r\n\r\n  BN.prototype.subn = function subn (num) {\r\n    return this.clone().isubn(num);\r\n  };\r\n\r\n  BN.prototype.iabs = function iabs () {\r\n    this.negative = 0;\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.abs = function abs () {\r\n    return this.clone().iabs();\r\n  };\r\n\r\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\r\n    var len = num.length + shift;\r\n    var i;\r\n\r\n    this._expand(len);\r\n\r\n    var w;\r\n    var carry = 0;\r\n    for (i = 0; i < num.length; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      var right = (num.words[i] | 0) * mul;\r\n      w -= right & 0x3ffffff;\r\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n    for (; i < this.length - shift; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n\r\n    if (carry === 0) return this.strip();\r\n\r\n    // Subtraction overflow\r\n    assert(carry === -1);\r\n    carry = 0;\r\n    for (i = 0; i < this.length; i++) {\r\n      w = -(this.words[i] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i] = w & 0x3ffffff;\r\n    }\r\n    this.negative = 1;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\r\n    var shift = this.length - num.length;\r\n\r\n    var a = this.clone();\r\n    var b = num;\r\n\r\n    // Normalize\r\n    var bhi = b.words[b.length - 1] | 0;\r\n    var bhiBits = this._countBits(bhi);\r\n    shift = 26 - bhiBits;\r\n    if (shift !== 0) {\r\n      b = b.ushln(shift);\r\n      a.iushln(shift);\r\n      bhi = b.words[b.length - 1] | 0;\r\n    }\r\n\r\n    // Initialize quotient\r\n    var m = a.length - b.length;\r\n    var q;\r\n\r\n    if (mode !== 'mod') {\r\n      q = new BN(null);\r\n      q.length = m + 1;\r\n      q.words = new Array(q.length);\r\n      for (var i = 0; i < q.length; i++) {\r\n        q.words[i] = 0;\r\n      }\r\n    }\r\n\r\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\r\n    if (diff.negative === 0) {\r\n      a = diff;\r\n      if (q) {\r\n        q.words[m] = 1;\r\n      }\r\n    }\r\n\r\n    for (var j = m - 1; j >= 0; j--) {\r\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\r\n        (a.words[b.length + j - 1] | 0);\r\n\r\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\r\n      // (0x7ffffff)\r\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\r\n\r\n      a._ishlnsubmul(b, qj, j);\r\n      while (a.negative !== 0) {\r\n        qj--;\r\n        a.negative = 0;\r\n        a._ishlnsubmul(b, 1, j);\r\n        if (!a.isZero()) {\r\n          a.negative ^= 1;\r\n        }\r\n      }\r\n      if (q) {\r\n        q.words[j] = qj;\r\n      }\r\n    }\r\n    if (q) {\r\n      q.strip();\r\n    }\r\n    a.strip();\r\n\r\n    // Denormalize\r\n    if (mode !== 'div' && shift !== 0) {\r\n      a.iushrn(shift);\r\n    }\r\n\r\n    return {\r\n      div: q || null,\r\n      mod: a\r\n    };\r\n  };\r\n\r\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\r\n  //       to `div` to request div only, or be absent to\r\n  //       request both div & mod\r\n  //       2) `positive` is true if unsigned mod is requested\r\n  BN.prototype.divmod = function divmod (num, mode, positive) {\r\n    assert(!num.isZero());\r\n\r\n    if (this.isZero()) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: new BN(0)\r\n      };\r\n    }\r\n\r\n    var div, mod, res;\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      res = this.neg().divmod(num, mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.iadd(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    if (this.negative === 0 && num.negative !== 0) {\r\n      res = this.divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: res.mod\r\n      };\r\n    }\r\n\r\n    if ((this.negative & num.negative) !== 0) {\r\n      res = this.neg().divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.isub(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: res.div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    // Both numbers are positive at this point\r\n\r\n    // Strip both numbers to approximate shift value\r\n    if (num.length > this.length || this.cmp(num) < 0) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: this\r\n      };\r\n    }\r\n\r\n    // Very short reduction\r\n    if (num.length === 1) {\r\n      if (mode === 'div') {\r\n        return {\r\n          div: this.divn(num.words[0]),\r\n          mod: null\r\n        };\r\n      }\r\n\r\n      if (mode === 'mod') {\r\n        return {\r\n          div: null,\r\n          mod: new BN(this.modn(num.words[0]))\r\n        };\r\n      }\r\n\r\n      return {\r\n        div: this.divn(num.words[0]),\r\n        mod: new BN(this.modn(num.words[0]))\r\n      };\r\n    }\r\n\r\n    return this._wordDiv(num, mode);\r\n  };\r\n\r\n  // Find `this` / `num`\r\n  BN.prototype.div = function div (num) {\r\n    return this.divmod(num, 'div', false).div;\r\n  };\r\n\r\n  // Find `this` % `num`\r\n  BN.prototype.mod = function mod (num) {\r\n    return this.divmod(num, 'mod', false).mod;\r\n  };\r\n\r\n  BN.prototype.umod = function umod (num) {\r\n    return this.divmod(num, 'mod', true).mod;\r\n  };\r\n\r\n  // Find Round(`this` / `num`)\r\n  BN.prototype.divRound = function divRound (num) {\r\n    var dm = this.divmod(num);\r\n\r\n    // Fast case - exact division\r\n    if (dm.mod.isZero()) return dm.div;\r\n\r\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\r\n\r\n    var half = num.ushrn(1);\r\n    var r2 = num.andln(1);\r\n    var cmp = mod.cmp(half);\r\n\r\n    // Round down\r\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\r\n\r\n    // Round up\r\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\r\n  };\r\n\r\n  BN.prototype.modn = function modn (num) {\r\n    assert(num <= 0x3ffffff);\r\n    var p = (1 << 26) % num;\r\n\r\n    var acc = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      acc = (p * acc + (this.words[i] | 0)) % num;\r\n    }\r\n\r\n    return acc;\r\n  };\r\n\r\n  // In-place division by number\r\n  BN.prototype.idivn = function idivn (num) {\r\n    assert(num <= 0x3ffffff);\r\n\r\n    var carry = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var w = (this.words[i] | 0) + carry * 0x4000000;\r\n      this.words[i] = (w / num) | 0;\r\n      carry = w % num;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.divn = function divn (num) {\r\n    return this.clone().idivn(num);\r\n  };\r\n\r\n  BN.prototype.egcd = function egcd (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var x = this;\r\n    var y = p.clone();\r\n\r\n    if (x.negative !== 0) {\r\n      x = x.umod(p);\r\n    } else {\r\n      x = x.clone();\r\n    }\r\n\r\n    // A * x + B * y = x\r\n    var A = new BN(1);\r\n    var B = new BN(0);\r\n\r\n    // C * x + D * y = y\r\n    var C = new BN(0);\r\n    var D = new BN(1);\r\n\r\n    var g = 0;\r\n\r\n    while (x.isEven() && y.isEven()) {\r\n      x.iushrn(1);\r\n      y.iushrn(1);\r\n      ++g;\r\n    }\r\n\r\n    var yp = y.clone();\r\n    var xp = x.clone();\r\n\r\n    while (!x.isZero()) {\r\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        x.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (A.isOdd() || B.isOdd()) {\r\n            A.iadd(yp);\r\n            B.isub(xp);\r\n          }\r\n\r\n          A.iushrn(1);\r\n          B.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        y.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (C.isOdd() || D.isOdd()) {\r\n            C.iadd(yp);\r\n            D.isub(xp);\r\n          }\r\n\r\n          C.iushrn(1);\r\n          D.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (x.cmp(y) >= 0) {\r\n        x.isub(y);\r\n        A.isub(C);\r\n        B.isub(D);\r\n      } else {\r\n        y.isub(x);\r\n        C.isub(A);\r\n        D.isub(B);\r\n      }\r\n    }\r\n\r\n    return {\r\n      a: C,\r\n      b: D,\r\n      gcd: y.iushln(g)\r\n    };\r\n  };\r\n\r\n  // This is reduced incarnation of the binary EEA\r\n  // above, designated to invert members of the\r\n  // _prime_ fields F(p) at a maximal speed\r\n  BN.prototype._invmp = function _invmp (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var a = this;\r\n    var b = p.clone();\r\n\r\n    if (a.negative !== 0) {\r\n      a = a.umod(p);\r\n    } else {\r\n      a = a.clone();\r\n    }\r\n\r\n    var x1 = new BN(1);\r\n    var x2 = new BN(0);\r\n\r\n    var delta = b.clone();\r\n\r\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\r\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        a.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (x1.isOdd()) {\r\n            x1.iadd(delta);\r\n          }\r\n\r\n          x1.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        b.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (x2.isOdd()) {\r\n            x2.iadd(delta);\r\n          }\r\n\r\n          x2.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (a.cmp(b) >= 0) {\r\n        a.isub(b);\r\n        x1.isub(x2);\r\n      } else {\r\n        b.isub(a);\r\n        x2.isub(x1);\r\n      }\r\n    }\r\n\r\n    var res;\r\n    if (a.cmpn(1) === 0) {\r\n      res = x1;\r\n    } else {\r\n      res = x2;\r\n    }\r\n\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(p);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gcd = function gcd (num) {\r\n    if (this.isZero()) return num.abs();\r\n    if (num.isZero()) return this.abs();\r\n\r\n    var a = this.clone();\r\n    var b = num.clone();\r\n    a.negative = 0;\r\n    b.negative = 0;\r\n\r\n    // Remove common factor of two\r\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\r\n      a.iushrn(1);\r\n      b.iushrn(1);\r\n    }\r\n\r\n    do {\r\n      while (a.isEven()) {\r\n        a.iushrn(1);\r\n      }\r\n      while (b.isEven()) {\r\n        b.iushrn(1);\r\n      }\r\n\r\n      var r = a.cmp(b);\r\n      if (r < 0) {\r\n        // Swap `a` and `b` to make `a` always bigger than `b`\r\n        var t = a;\r\n        a = b;\r\n        b = t;\r\n      } else if (r === 0 || b.cmpn(1) === 0) {\r\n        break;\r\n      }\r\n\r\n      a.isub(b);\r\n    } while (true);\r\n\r\n    return b.iushln(shift);\r\n  };\r\n\r\n  // Invert number in the field F(num)\r\n  BN.prototype.invm = function invm (num) {\r\n    return this.egcd(num).a.umod(num);\r\n  };\r\n\r\n  BN.prototype.isEven = function isEven () {\r\n    return (this.words[0] & 1) === 0;\r\n  };\r\n\r\n  BN.prototype.isOdd = function isOdd () {\r\n    return (this.words[0] & 1) === 1;\r\n  };\r\n\r\n  // And first word and num\r\n  BN.prototype.andln = function andln (num) {\r\n    return this.words[0] & num;\r\n  };\r\n\r\n  // Increment at the bit position in-line\r\n  BN.prototype.bincn = function bincn (bit) {\r\n    assert(typeof bit === 'number');\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) {\r\n      this._expand(s + 1);\r\n      this.words[s] |= q;\r\n      return this;\r\n    }\r\n\r\n    // Add bit and propagate, if needed\r\n    var carry = q;\r\n    for (var i = s; carry !== 0 && i < this.length; i++) {\r\n      var w = this.words[i] | 0;\r\n      w += carry;\r\n      carry = w >>> 26;\r\n      w &= 0x3ffffff;\r\n      this.words[i] = w;\r\n    }\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.isZero = function isZero () {\r\n    return this.length === 1 && this.words[0] === 0;\r\n  };\r\n\r\n  BN.prototype.cmpn = function cmpn (num) {\r\n    var negative = num < 0;\r\n\r\n    if (this.negative !== 0 && !negative) return -1;\r\n    if (this.negative === 0 && negative) return 1;\r\n\r\n    this.strip();\r\n\r\n    var res;\r\n    if (this.length > 1) {\r\n      res = 1;\r\n    } else {\r\n      if (negative) {\r\n        num = -num;\r\n      }\r\n\r\n      assert(num <= 0x3ffffff, 'Number is too big');\r\n\r\n      var w = this.words[0] | 0;\r\n      res = w === num ? 0 : w < num ? -1 : 1;\r\n    }\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Compare two numbers and return:\r\n  // 1 - if `this` > `num`\r\n  // 0 - if `this` == `num`\r\n  // -1 - if `this` < `num`\r\n  BN.prototype.cmp = function cmp (num) {\r\n    if (this.negative !== 0 && num.negative === 0) return -1;\r\n    if (this.negative === 0 && num.negative !== 0) return 1;\r\n\r\n    var res = this.ucmp(num);\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Unsigned comparison\r\n  BN.prototype.ucmp = function ucmp (num) {\r\n    // At this point both numbers have the same sign\r\n    if (this.length > num.length) return 1;\r\n    if (this.length < num.length) return -1;\r\n\r\n    var res = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var a = this.words[i] | 0;\r\n      var b = num.words[i] | 0;\r\n\r\n      if (a === b) continue;\r\n      if (a < b) {\r\n        res = -1;\r\n      } else if (a > b) {\r\n        res = 1;\r\n      }\r\n      break;\r\n    }\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gtn = function gtn (num) {\r\n    return this.cmpn(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gt = function gt (num) {\r\n    return this.cmp(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gten = function gten (num) {\r\n    return this.cmpn(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.gte = function gte (num) {\r\n    return this.cmp(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.ltn = function ltn (num) {\r\n    return this.cmpn(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lt = function lt (num) {\r\n    return this.cmp(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lten = function lten (num) {\r\n    return this.cmpn(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.lte = function lte (num) {\r\n    return this.cmp(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.eqn = function eqn (num) {\r\n    return this.cmpn(num) === 0;\r\n  };\r\n\r\n  BN.prototype.eq = function eq (num) {\r\n    return this.cmp(num) === 0;\r\n  };\r\n\r\n  //\r\n  // A reduce context, could be using montgomery or something better, depending\r\n  // on the `m` itself.\r\n  //\r\n  BN.red = function red (num) {\r\n    return new Red(num);\r\n  };\r\n\r\n  BN.prototype.toRed = function toRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    assert(this.negative === 0, 'red works only with positives');\r\n    return ctx.convertTo(this)._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.fromRed = function fromRed () {\r\n    assert(this.red, 'fromRed works only with numbers in reduction context');\r\n    return this.red.convertFrom(this);\r\n  };\r\n\r\n  BN.prototype._forceRed = function _forceRed (ctx) {\r\n    this.red = ctx;\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.forceRed = function forceRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    return this._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.redAdd = function redAdd (num) {\r\n    assert(this.red, 'redAdd works only with red numbers');\r\n    return this.red.add(this, num);\r\n  };\r\n\r\n  BN.prototype.redIAdd = function redIAdd (num) {\r\n    assert(this.red, 'redIAdd works only with red numbers');\r\n    return this.red.iadd(this, num);\r\n  };\r\n\r\n  BN.prototype.redSub = function redSub (num) {\r\n    assert(this.red, 'redSub works only with red numbers');\r\n    return this.red.sub(this, num);\r\n  };\r\n\r\n  BN.prototype.redISub = function redISub (num) {\r\n    assert(this.red, 'redISub works only with red numbers');\r\n    return this.red.isub(this, num);\r\n  };\r\n\r\n  BN.prototype.redShl = function redShl (num) {\r\n    assert(this.red, 'redShl works only with red numbers');\r\n    return this.red.shl(this, num);\r\n  };\r\n\r\n  BN.prototype.redMul = function redMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.mul(this, num);\r\n  };\r\n\r\n  BN.prototype.redIMul = function redIMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.imul(this, num);\r\n  };\r\n\r\n  BN.prototype.redSqr = function redSqr () {\r\n    assert(this.red, 'redSqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqr(this);\r\n  };\r\n\r\n  BN.prototype.redISqr = function redISqr () {\r\n    assert(this.red, 'redISqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.isqr(this);\r\n  };\r\n\r\n  // Square root over p\r\n  BN.prototype.redSqrt = function redSqrt () {\r\n    assert(this.red, 'redSqrt works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqrt(this);\r\n  };\r\n\r\n  BN.prototype.redInvm = function redInvm () {\r\n    assert(this.red, 'redInvm works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.invm(this);\r\n  };\r\n\r\n  // Return negative clone of `this` % `red modulo`\r\n  BN.prototype.redNeg = function redNeg () {\r\n    assert(this.red, 'redNeg works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.neg(this);\r\n  };\r\n\r\n  BN.prototype.redPow = function redPow (num) {\r\n    assert(this.red && !num.red, 'redPow(normalNum)');\r\n    this.red._verify1(this);\r\n    return this.red.pow(this, num);\r\n  };\r\n\r\n  // Prime numbers with efficient reduction\r\n  var primes = {\r\n    k256: null,\r\n    p224: null,\r\n    p192: null,\r\n    p25519: null\r\n  };\r\n\r\n  // Pseudo-Mersenne prime\r\n  function MPrime (name, p) {\r\n    // P = 2 ^ N - K\r\n    this.name = name;\r\n    this.p = new BN(p, 16);\r\n    this.n = this.p.bitLength();\r\n    this.k = new BN(1).iushln(this.n).isub(this.p);\r\n\r\n    this.tmp = this._tmp();\r\n  }\r\n\r\n  MPrime.prototype._tmp = function _tmp () {\r\n    var tmp = new BN(null);\r\n    tmp.words = new Array(Math.ceil(this.n / 13));\r\n    return tmp;\r\n  };\r\n\r\n  MPrime.prototype.ireduce = function ireduce (num) {\r\n    // Assumes that `num` is less than `P^2`\r\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\r\n    var r = num;\r\n    var rlen;\r\n\r\n    do {\r\n      this.split(r, this.tmp);\r\n      r = this.imulK(r);\r\n      r = r.iadd(this.tmp);\r\n      rlen = r.bitLength();\r\n    } while (rlen > this.n);\r\n\r\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\r\n    if (cmp === 0) {\r\n      r.words[0] = 0;\r\n      r.length = 1;\r\n    } else if (cmp > 0) {\r\n      r.isub(this.p);\r\n    } else {\r\n      if (r.strip !== undefined) {\r\n        // r is BN v4 instance\r\n        r.strip();\r\n      } else {\r\n        // r is BN v5 instance\r\n        r._strip();\r\n      }\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  MPrime.prototype.split = function split (input, out) {\r\n    input.iushrn(this.n, 0, out);\r\n  };\r\n\r\n  MPrime.prototype.imulK = function imulK (num) {\r\n    return num.imul(this.k);\r\n  };\r\n\r\n  function K256 () {\r\n    MPrime.call(\r\n      this,\r\n      'k256',\r\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\r\n  }\r\n  inherits(K256, MPrime);\r\n\r\n  K256.prototype.split = function split (input, output) {\r\n    // 256 = 9 * 26 + 22\r\n    var mask = 0x3fffff;\r\n\r\n    var outLen = Math.min(input.length, 9);\r\n    for (var i = 0; i < outLen; i++) {\r\n      output.words[i] = input.words[i];\r\n    }\r\n    output.length = outLen;\r\n\r\n    if (input.length <= 9) {\r\n      input.words[0] = 0;\r\n      input.length = 1;\r\n      return;\r\n    }\r\n\r\n    // Shift by 9 limbs\r\n    var prev = input.words[9];\r\n    output.words[output.length++] = prev & mask;\r\n\r\n    for (i = 10; i < input.length; i++) {\r\n      var next = input.words[i] | 0;\r\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\r\n      prev = next;\r\n    }\r\n    prev >>>= 22;\r\n    input.words[i - 10] = prev;\r\n    if (prev === 0 && input.length > 10) {\r\n      input.length -= 10;\r\n    } else {\r\n      input.length -= 9;\r\n    }\r\n  };\r\n\r\n  K256.prototype.imulK = function imulK (num) {\r\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\r\n    num.words[num.length] = 0;\r\n    num.words[num.length + 1] = 0;\r\n    num.length += 2;\r\n\r\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\r\n    var lo = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var w = num.words[i] | 0;\r\n      lo += w * 0x3d1;\r\n      num.words[i] = lo & 0x3ffffff;\r\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\r\n    }\r\n\r\n    // Fast length reduction\r\n    if (num.words[num.length - 1] === 0) {\r\n      num.length--;\r\n      if (num.words[num.length - 1] === 0) {\r\n        num.length--;\r\n      }\r\n    }\r\n    return num;\r\n  };\r\n\r\n  function P224 () {\r\n    MPrime.call(\r\n      this,\r\n      'p224',\r\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\r\n  }\r\n  inherits(P224, MPrime);\r\n\r\n  function P192 () {\r\n    MPrime.call(\r\n      this,\r\n      'p192',\r\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\r\n  }\r\n  inherits(P192, MPrime);\r\n\r\n  function P25519 () {\r\n    // 2 ^ 255 - 19\r\n    MPrime.call(\r\n      this,\r\n      '25519',\r\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\r\n  }\r\n  inherits(P25519, MPrime);\r\n\r\n  P25519.prototype.imulK = function imulK (num) {\r\n    // K = 0x13\r\n    var carry = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var hi = (num.words[i] | 0) * 0x13 + carry;\r\n      var lo = hi & 0x3ffffff;\r\n      hi >>>= 26;\r\n\r\n      num.words[i] = lo;\r\n      carry = hi;\r\n    }\r\n    if (carry !== 0) {\r\n      num.words[num.length++] = carry;\r\n    }\r\n    return num;\r\n  };\r\n\r\n  // Exported mostly for testing purposes, use plain name instead\r\n  BN._prime = function prime (name) {\r\n    // Cached version of prime\r\n    if (primes[name]) return primes[name];\r\n\r\n    var prime;\r\n    if (name === 'k256') {\r\n      prime = new K256();\r\n    } else if (name === 'p224') {\r\n      prime = new P224();\r\n    } else if (name === 'p192') {\r\n      prime = new P192();\r\n    } else if (name === 'p25519') {\r\n      prime = new P25519();\r\n    } else {\r\n      throw new Error('Unknown prime ' + name);\r\n    }\r\n    primes[name] = prime;\r\n\r\n    return prime;\r\n  };\r\n\r\n  //\r\n  // Base reduction engine\r\n  //\r\n  function Red (m) {\r\n    if (typeof m === 'string') {\r\n      var prime = BN._prime(m);\r\n      this.m = prime.p;\r\n      this.prime = prime;\r\n    } else {\r\n      assert(m.gtn(1), 'modulus must be greater than 1');\r\n      this.m = m;\r\n      this.prime = null;\r\n    }\r\n  }\r\n\r\n  Red.prototype._verify1 = function _verify1 (a) {\r\n    assert(a.negative === 0, 'red works only with positives');\r\n    assert(a.red, 'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype._verify2 = function _verify2 (a, b) {\r\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\r\n    assert(a.red && a.red === b.red,\r\n      'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype.imod = function imod (a) {\r\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\r\n    return a.umod(this.m)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.neg = function neg (a) {\r\n    if (a.isZero()) {\r\n      return a.clone();\r\n    }\r\n\r\n    return this.m.sub(a)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.add = function add (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.add(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.iadd = function iadd (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.iadd(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.sub = function sub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.sub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.isub = function isub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.isub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.shl = function shl (a, num) {\r\n    this._verify1(a);\r\n    return this.imod(a.ushln(num));\r\n  };\r\n\r\n  Red.prototype.imul = function imul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.imul(b));\r\n  };\r\n\r\n  Red.prototype.mul = function mul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.mul(b));\r\n  };\r\n\r\n  Red.prototype.isqr = function isqr (a) {\r\n    return this.imul(a, a.clone());\r\n  };\r\n\r\n  Red.prototype.sqr = function sqr (a) {\r\n    return this.mul(a, a);\r\n  };\r\n\r\n  Red.prototype.sqrt = function sqrt (a) {\r\n    if (a.isZero()) return a.clone();\r\n\r\n    var mod3 = this.m.andln(3);\r\n    assert(mod3 % 2 === 1);\r\n\r\n    // Fast case\r\n    if (mod3 === 3) {\r\n      var pow = this.m.add(new BN(1)).iushrn(2);\r\n      return this.pow(a, pow);\r\n    }\r\n\r\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\r\n    //\r\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\r\n    var q = this.m.subn(1);\r\n    var s = 0;\r\n    while (!q.isZero() && q.andln(1) === 0) {\r\n      s++;\r\n      q.iushrn(1);\r\n    }\r\n    assert(!q.isZero());\r\n\r\n    var one = new BN(1).toRed(this);\r\n    var nOne = one.redNeg();\r\n\r\n    // Find quadratic non-residue\r\n    // NOTE: Max is such because of generalized Riemann hypothesis.\r\n    var lpow = this.m.subn(1).iushrn(1);\r\n    var z = this.m.bitLength();\r\n    z = new BN(2 * z * z).toRed(this);\r\n\r\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\r\n      z.redIAdd(nOne);\r\n    }\r\n\r\n    var c = this.pow(z, q);\r\n    var r = this.pow(a, q.addn(1).iushrn(1));\r\n    var t = this.pow(a, q);\r\n    var m = s;\r\n    while (t.cmp(one) !== 0) {\r\n      var tmp = t;\r\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\r\n        tmp = tmp.redSqr();\r\n      }\r\n      assert(i < m);\r\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\r\n\r\n      r = r.redMul(b);\r\n      c = b.redSqr();\r\n      t = t.redMul(c);\r\n      m = i;\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  Red.prototype.invm = function invm (a) {\r\n    var inv = a._invmp(this.m);\r\n    if (inv.negative !== 0) {\r\n      inv.negative = 0;\r\n      return this.imod(inv).redNeg();\r\n    } else {\r\n      return this.imod(inv);\r\n    }\r\n  };\r\n\r\n  Red.prototype.pow = function pow (a, num) {\r\n    if (num.isZero()) return new BN(1).toRed(this);\r\n    if (num.cmpn(1) === 0) return a.clone();\r\n\r\n    var windowSize = 4;\r\n    var wnd = new Array(1 << windowSize);\r\n    wnd[0] = new BN(1).toRed(this);\r\n    wnd[1] = a;\r\n    for (var i = 2; i < wnd.length; i++) {\r\n      wnd[i] = this.mul(wnd[i - 1], a);\r\n    }\r\n\r\n    var res = wnd[0];\r\n    var current = 0;\r\n    var currentLen = 0;\r\n    var start = num.bitLength() % 26;\r\n    if (start === 0) {\r\n      start = 26;\r\n    }\r\n\r\n    for (i = num.length - 1; i >= 0; i--) {\r\n      var word = num.words[i];\r\n      for (var j = start - 1; j >= 0; j--) {\r\n        var bit = (word >> j) & 1;\r\n        if (res !== wnd[0]) {\r\n          res = this.sqr(res);\r\n        }\r\n\r\n        if (bit === 0 && current === 0) {\r\n          currentLen = 0;\r\n          continue;\r\n        }\r\n\r\n        current <<= 1;\r\n        current |= bit;\r\n        currentLen++;\r\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\r\n\r\n        res = this.mul(res, wnd[current]);\r\n        currentLen = 0;\r\n        current = 0;\r\n      }\r\n      start = 26;\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.convertTo = function convertTo (num) {\r\n    var r = num.umod(this.m);\r\n\r\n    return r === num ? r.clone() : r;\r\n  };\r\n\r\n  Red.prototype.convertFrom = function convertFrom (num) {\r\n    var res = num.clone();\r\n    res.red = null;\r\n    return res;\r\n  };\r\n\r\n  //\r\n  // Montgomery method engine\r\n  //\r\n\r\n  BN.mont = function mont (num) {\r\n    return new Mont(num);\r\n  };\r\n\r\n  function Mont (m) {\r\n    Red.call(this, m);\r\n\r\n    this.shift = this.m.bitLength();\r\n    if (this.shift % 26 !== 0) {\r\n      this.shift += 26 - (this.shift % 26);\r\n    }\r\n\r\n    this.r = new BN(1).iushln(this.shift);\r\n    this.r2 = this.imod(this.r.sqr());\r\n    this.rinv = this.r._invmp(this.m);\r\n\r\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\r\n    this.minv = this.minv.umod(this.r);\r\n    this.minv = this.r.sub(this.minv);\r\n  }\r\n  inherits(Mont, Red);\r\n\r\n  Mont.prototype.convertTo = function convertTo (num) {\r\n    return this.imod(num.ushln(this.shift));\r\n  };\r\n\r\n  Mont.prototype.convertFrom = function convertFrom (num) {\r\n    var r = this.imod(num.mul(this.rinv));\r\n    r.red = null;\r\n    return r;\r\n  };\r\n\r\n  Mont.prototype.imul = function imul (a, b) {\r\n    if (a.isZero() || b.isZero()) {\r\n      a.words[0] = 0;\r\n      a.length = 1;\r\n      return a;\r\n    }\r\n\r\n    var t = a.imul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.mul = function mul (a, b) {\r\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\r\n\r\n    var t = a.mul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.invm = function invm (a) {\r\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\r\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\r\n    return res._forceRed(this);\r\n  };\r\n})( false || module, this);\r\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack://Game/./node_modules/browserify-rsa/node_modules/bn.js/lib/bn.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/algos.js":
/*!***********************************************!*\
  !*** ./node_modules/browserify-sign/algos.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! ./browser/algorithms.json */ \"./node_modules/browserify-sign/browser/algorithms.json\")\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/algos.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/browser/algorithms.json":
/*!**************************************************************!*\
  !*** ./node_modules/browserify-sign/browser/algorithms.json ***!
  \**************************************************************/
/*! exports provided: sha224WithRSAEncryption, RSA-SHA224, sha256WithRSAEncryption, RSA-SHA256, sha384WithRSAEncryption, RSA-SHA384, sha512WithRSAEncryption, RSA-SHA512, RSA-SHA1, ecdsa-with-SHA1, sha256, sha224, sha384, sha512, DSA-SHA, DSA-SHA1, DSA, DSA-WITH-SHA224, DSA-SHA224, DSA-WITH-SHA256, DSA-SHA256, DSA-WITH-SHA384, DSA-SHA384, DSA-WITH-SHA512, DSA-SHA512, DSA-RIPEMD160, ripemd160WithRSA, RSA-RIPEMD160, md5WithRSAEncryption, RSA-MD5, default */
/***/ (function(module) {

eval("module.exports = JSON.parse(\"{\\\"sha224WithRSAEncryption\\\":{\\\"sign\\\":\\\"rsa\\\",\\\"hash\\\":\\\"sha224\\\",\\\"id\\\":\\\"302d300d06096086480165030402040500041c\\\"},\\\"RSA-SHA224\\\":{\\\"sign\\\":\\\"ecdsa/rsa\\\",\\\"hash\\\":\\\"sha224\\\",\\\"id\\\":\\\"302d300d06096086480165030402040500041c\\\"},\\\"sha256WithRSAEncryption\\\":{\\\"sign\\\":\\\"rsa\\\",\\\"hash\\\":\\\"sha256\\\",\\\"id\\\":\\\"3031300d060960864801650304020105000420\\\"},\\\"RSA-SHA256\\\":{\\\"sign\\\":\\\"ecdsa/rsa\\\",\\\"hash\\\":\\\"sha256\\\",\\\"id\\\":\\\"3031300d060960864801650304020105000420\\\"},\\\"sha384WithRSAEncryption\\\":{\\\"sign\\\":\\\"rsa\\\",\\\"hash\\\":\\\"sha384\\\",\\\"id\\\":\\\"3041300d060960864801650304020205000430\\\"},\\\"RSA-SHA384\\\":{\\\"sign\\\":\\\"ecdsa/rsa\\\",\\\"hash\\\":\\\"sha384\\\",\\\"id\\\":\\\"3041300d060960864801650304020205000430\\\"},\\\"sha512WithRSAEncryption\\\":{\\\"sign\\\":\\\"rsa\\\",\\\"hash\\\":\\\"sha512\\\",\\\"id\\\":\\\"3051300d060960864801650304020305000440\\\"},\\\"RSA-SHA512\\\":{\\\"sign\\\":\\\"ecdsa/rsa\\\",\\\"hash\\\":\\\"sha512\\\",\\\"id\\\":\\\"3051300d060960864801650304020305000440\\\"},\\\"RSA-SHA1\\\":{\\\"sign\\\":\\\"rsa\\\",\\\"hash\\\":\\\"sha1\\\",\\\"id\\\":\\\"3021300906052b0e03021a05000414\\\"},\\\"ecdsa-with-SHA1\\\":{\\\"sign\\\":\\\"ecdsa\\\",\\\"hash\\\":\\\"sha1\\\",\\\"id\\\":\\\"\\\"},\\\"sha256\\\":{\\\"sign\\\":\\\"ecdsa\\\",\\\"hash\\\":\\\"sha256\\\",\\\"id\\\":\\\"\\\"},\\\"sha224\\\":{\\\"sign\\\":\\\"ecdsa\\\",\\\"hash\\\":\\\"sha224\\\",\\\"id\\\":\\\"\\\"},\\\"sha384\\\":{\\\"sign\\\":\\\"ecdsa\\\",\\\"hash\\\":\\\"sha384\\\",\\\"id\\\":\\\"\\\"},\\\"sha512\\\":{\\\"sign\\\":\\\"ecdsa\\\",\\\"hash\\\":\\\"sha512\\\",\\\"id\\\":\\\"\\\"},\\\"DSA-SHA\\\":{\\\"sign\\\":\\\"dsa\\\",\\\"hash\\\":\\\"sha1\\\",\\\"id\\\":\\\"\\\"},\\\"DSA-SHA1\\\":{\\\"sign\\\":\\\"dsa\\\",\\\"hash\\\":\\\"sha1\\\",\\\"id\\\":\\\"\\\"},\\\"DSA\\\":{\\\"sign\\\":\\\"dsa\\\",\\\"hash\\\":\\\"sha1\\\",\\\"id\\\":\\\"\\\"},\\\"DSA-WITH-SHA224\\\":{\\\"sign\\\":\\\"dsa\\\",\\\"hash\\\":\\\"sha224\\\",\\\"id\\\":\\\"\\\"},\\\"DSA-SHA224\\\":{\\\"sign\\\":\\\"dsa\\\",\\\"hash\\\":\\\"sha224\\\",\\\"id\\\":\\\"\\\"},\\\"DSA-WITH-SHA256\\\":{\\\"sign\\\":\\\"dsa\\\",\\\"hash\\\":\\\"sha256\\\",\\\"id\\\":\\\"\\\"},\\\"DSA-SHA256\\\":{\\\"sign\\\":\\\"dsa\\\",\\\"hash\\\":\\\"sha256\\\",\\\"id\\\":\\\"\\\"},\\\"DSA-WITH-SHA384\\\":{\\\"sign\\\":\\\"dsa\\\",\\\"hash\\\":\\\"sha384\\\",\\\"id\\\":\\\"\\\"},\\\"DSA-SHA384\\\":{\\\"sign\\\":\\\"dsa\\\",\\\"hash\\\":\\\"sha384\\\",\\\"id\\\":\\\"\\\"},\\\"DSA-WITH-SHA512\\\":{\\\"sign\\\":\\\"dsa\\\",\\\"hash\\\":\\\"sha512\\\",\\\"id\\\":\\\"\\\"},\\\"DSA-SHA512\\\":{\\\"sign\\\":\\\"dsa\\\",\\\"hash\\\":\\\"sha512\\\",\\\"id\\\":\\\"\\\"},\\\"DSA-RIPEMD160\\\":{\\\"sign\\\":\\\"dsa\\\",\\\"hash\\\":\\\"rmd160\\\",\\\"id\\\":\\\"\\\"},\\\"ripemd160WithRSA\\\":{\\\"sign\\\":\\\"rsa\\\",\\\"hash\\\":\\\"rmd160\\\",\\\"id\\\":\\\"3021300906052b2403020105000414\\\"},\\\"RSA-RIPEMD160\\\":{\\\"sign\\\":\\\"rsa\\\",\\\"hash\\\":\\\"rmd160\\\",\\\"id\\\":\\\"3021300906052b2403020105000414\\\"},\\\"md5WithRSAEncryption\\\":{\\\"sign\\\":\\\"rsa\\\",\\\"hash\\\":\\\"md5\\\",\\\"id\\\":\\\"3020300c06082a864886f70d020505000410\\\"},\\\"RSA-MD5\\\":{\\\"sign\\\":\\\"rsa\\\",\\\"hash\\\":\\\"md5\\\",\\\"id\\\":\\\"3020300c06082a864886f70d020505000410\\\"}}\");\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/browser/algorithms.json?");

/***/ }),

/***/ "./node_modules/browserify-sign/browser/curves.json":
/*!**********************************************************!*\
  !*** ./node_modules/browserify-sign/browser/curves.json ***!
  \**********************************************************/
/*! exports provided: 1.3.132.0.10, 1.3.132.0.33, 1.2.840.10045.3.1.1, 1.2.840.10045.3.1.7, 1.3.132.0.34, 1.3.132.0.35, default */
/***/ (function(module) {

eval("module.exports = JSON.parse(\"{\\\"1.3.132.0.10\\\":\\\"secp256k1\\\",\\\"1.3.132.0.33\\\":\\\"p224\\\",\\\"1.2.840.10045.3.1.1\\\":\\\"p192\\\",\\\"1.2.840.10045.3.1.7\\\":\\\"p256\\\",\\\"1.3.132.0.34\\\":\\\"p384\\\",\\\"1.3.132.0.35\\\":\\\"p521\\\"}\");\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/browser/curves.json?");

/***/ }),

/***/ "./node_modules/browserify-sign/browser/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/browserify-sign/browser/index.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/browserify-sign/node_modules/safe-buffer/index.js\").Buffer\nvar createHash = __webpack_require__(/*! create-hash */ \"./node_modules/create-hash/browser.js\")\nvar stream = __webpack_require__(/*! readable-stream */ \"./node_modules/browserify-sign/node_modules/readable-stream/readable-browser.js\")\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\nvar sign = __webpack_require__(/*! ./sign */ \"./node_modules/browserify-sign/browser/sign.js\")\nvar verify = __webpack_require__(/*! ./verify */ \"./node_modules/browserify-sign/browser/verify.js\")\n\nvar algorithms = __webpack_require__(/*! ./algorithms.json */ \"./node_modules/browserify-sign/browser/algorithms.json\")\nObject.keys(algorithms).forEach(function (key) {\n  algorithms[key].id = Buffer.from(algorithms[key].id, 'hex')\n  algorithms[key.toLowerCase()] = algorithms[key]\n})\n\nfunction Sign (algorithm) {\n  stream.Writable.call(this)\n\n  var data = algorithms[algorithm]\n  if (!data) throw new Error('Unknown message digest')\n\n  this._hashType = data.hash\n  this._hash = createHash(data.hash)\n  this._tag = data.id\n  this._signType = data.sign\n}\ninherits(Sign, stream.Writable)\n\nSign.prototype._write = function _write (data, _, done) {\n  this._hash.update(data)\n  done()\n}\n\nSign.prototype.update = function update (data, enc) {\n  if (typeof data === 'string') data = Buffer.from(data, enc)\n\n  this._hash.update(data)\n  return this\n}\n\nSign.prototype.sign = function signMethod (key, enc) {\n  this.end()\n  var hash = this._hash.digest()\n  var sig = sign(hash, key, this._hashType, this._signType, this._tag)\n\n  return enc ? sig.toString(enc) : sig\n}\n\nfunction Verify (algorithm) {\n  stream.Writable.call(this)\n\n  var data = algorithms[algorithm]\n  if (!data) throw new Error('Unknown message digest')\n\n  this._hash = createHash(data.hash)\n  this._tag = data.id\n  this._signType = data.sign\n}\ninherits(Verify, stream.Writable)\n\nVerify.prototype._write = function _write (data, _, done) {\n  this._hash.update(data)\n  done()\n}\n\nVerify.prototype.update = function update (data, enc) {\n  if (typeof data === 'string') data = Buffer.from(data, enc)\n\n  this._hash.update(data)\n  return this\n}\n\nVerify.prototype.verify = function verifyMethod (key, sig, enc) {\n  if (typeof sig === 'string') sig = Buffer.from(sig, enc)\n\n  this.end()\n  var hash = this._hash.digest()\n  return verify(sig, hash, key, this._signType, this._tag)\n}\n\nfunction createSign (algorithm) {\n  return new Sign(algorithm)\n}\n\nfunction createVerify (algorithm) {\n  return new Verify(algorithm)\n}\n\nmodule.exports = {\n  Sign: createSign,\n  Verify: createVerify,\n  createSign: createSign,\n  createVerify: createVerify\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/browser/index.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/browser/sign.js":
/*!******************************************************!*\
  !*** ./node_modules/browserify-sign/browser/sign.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// much of this based on https://github.com/indutny/self-signed/blob/gh-pages/lib/rsa.js\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/browserify-sign/node_modules/safe-buffer/index.js\").Buffer\nvar createHmac = __webpack_require__(/*! create-hmac */ \"./node_modules/create-hmac/browser.js\")\nvar crt = __webpack_require__(/*! browserify-rsa */ \"./node_modules/browserify-rsa/index.js\")\nvar EC = __webpack_require__(/*! elliptic */ \"./node_modules/elliptic/lib/elliptic.js\").ec\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/bn.js/lib/bn.js\")\nvar parseKeys = __webpack_require__(/*! parse-asn1 */ \"./node_modules/parse-asn1/index.js\")\nvar curves = __webpack_require__(/*! ./curves.json */ \"./node_modules/browserify-sign/browser/curves.json\")\n\nfunction sign (hash, key, hashType, signType, tag) {\n  var priv = parseKeys(key)\n  if (priv.curve) {\n    // rsa keys can be interpreted as ecdsa ones in openssl\n    if (signType !== 'ecdsa' && signType !== 'ecdsa/rsa') throw new Error('wrong private key type')\n    return ecSign(hash, priv)\n  } else if (priv.type === 'dsa') {\n    if (signType !== 'dsa') throw new Error('wrong private key type')\n    return dsaSign(hash, priv, hashType)\n  } else {\n    if (signType !== 'rsa' && signType !== 'ecdsa/rsa') throw new Error('wrong private key type')\n  }\n  hash = Buffer.concat([tag, hash])\n  var len = priv.modulus.byteLength()\n  var pad = [0, 1]\n  while (hash.length + pad.length + 1 < len) pad.push(0xff)\n  pad.push(0x00)\n  var i = -1\n  while (++i < hash.length) pad.push(hash[i])\n\n  var out = crt(pad, priv)\n  return out\n}\n\nfunction ecSign (hash, priv) {\n  var curveId = curves[priv.curve.join('.')]\n  if (!curveId) throw new Error('unknown curve ' + priv.curve.join('.'))\n\n  var curve = new EC(curveId)\n  var key = curve.keyFromPrivate(priv.privateKey)\n  var out = key.sign(hash)\n\n  return Buffer.from(out.toDER())\n}\n\nfunction dsaSign (hash, priv, algo) {\n  var x = priv.params.priv_key\n  var p = priv.params.p\n  var q = priv.params.q\n  var g = priv.params.g\n  var r = new BN(0)\n  var k\n  var H = bits2int(hash, q).mod(q)\n  var s = false\n  var kv = getKey(x, q, hash, algo)\n  while (s === false) {\n    k = makeKey(q, kv, algo)\n    r = makeR(g, k, p, q)\n    s = k.invm(q).imul(H.add(x.mul(r))).mod(q)\n    if (s.cmpn(0) === 0) {\n      s = false\n      r = new BN(0)\n    }\n  }\n  return toDER(r, s)\n}\n\nfunction toDER (r, s) {\n  r = r.toArray()\n  s = s.toArray()\n\n  // Pad values\n  if (r[0] & 0x80) r = [0].concat(r)\n  if (s[0] & 0x80) s = [0].concat(s)\n\n  var total = r.length + s.length + 4\n  var res = [0x30, total, 0x02, r.length]\n  res = res.concat(r, [0x02, s.length], s)\n  return Buffer.from(res)\n}\n\nfunction getKey (x, q, hash, algo) {\n  x = Buffer.from(x.toArray())\n  if (x.length < q.byteLength()) {\n    var zeros = Buffer.alloc(q.byteLength() - x.length)\n    x = Buffer.concat([zeros, x])\n  }\n  var hlen = hash.length\n  var hbits = bits2octets(hash, q)\n  var v = Buffer.alloc(hlen)\n  v.fill(1)\n  var k = Buffer.alloc(hlen)\n  k = createHmac(algo, k).update(v).update(Buffer.from([0])).update(x).update(hbits).digest()\n  v = createHmac(algo, k).update(v).digest()\n  k = createHmac(algo, k).update(v).update(Buffer.from([1])).update(x).update(hbits).digest()\n  v = createHmac(algo, k).update(v).digest()\n  return { k: k, v: v }\n}\n\nfunction bits2int (obits, q) {\n  var bits = new BN(obits)\n  var shift = (obits.length << 3) - q.bitLength()\n  if (shift > 0) bits.ishrn(shift)\n  return bits\n}\n\nfunction bits2octets (bits, q) {\n  bits = bits2int(bits, q)\n  bits = bits.mod(q)\n  var out = Buffer.from(bits.toArray())\n  if (out.length < q.byteLength()) {\n    var zeros = Buffer.alloc(q.byteLength() - out.length)\n    out = Buffer.concat([zeros, out])\n  }\n  return out\n}\n\nfunction makeKey (q, kv, algo) {\n  var t\n  var k\n\n  do {\n    t = Buffer.alloc(0)\n\n    while (t.length * 8 < q.bitLength()) {\n      kv.v = createHmac(algo, kv.k).update(kv.v).digest()\n      t = Buffer.concat([t, kv.v])\n    }\n\n    k = bits2int(t, q)\n    kv.k = createHmac(algo, kv.k).update(kv.v).update(Buffer.from([0])).digest()\n    kv.v = createHmac(algo, kv.k).update(kv.v).digest()\n  } while (k.cmp(q) !== -1)\n\n  return k\n}\n\nfunction makeR (g, k, p, q) {\n  return g.toRed(BN.mont(p)).redPow(k).fromRed().mod(q)\n}\n\nmodule.exports = sign\nmodule.exports.getKey = getKey\nmodule.exports.makeKey = makeKey\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/browser/sign.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/browser/verify.js":
/*!********************************************************!*\
  !*** ./node_modules/browserify-sign/browser/verify.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// much of this based on https://github.com/indutny/self-signed/blob/gh-pages/lib/rsa.js\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/browserify-sign/node_modules/safe-buffer/index.js\").Buffer\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/bn.js/lib/bn.js\")\nvar EC = __webpack_require__(/*! elliptic */ \"./node_modules/elliptic/lib/elliptic.js\").ec\nvar parseKeys = __webpack_require__(/*! parse-asn1 */ \"./node_modules/parse-asn1/index.js\")\nvar curves = __webpack_require__(/*! ./curves.json */ \"./node_modules/browserify-sign/browser/curves.json\")\n\nfunction verify (sig, hash, key, signType, tag) {\n  var pub = parseKeys(key)\n  if (pub.type === 'ec') {\n    // rsa keys can be interpreted as ecdsa ones in openssl\n    if (signType !== 'ecdsa' && signType !== 'ecdsa/rsa') throw new Error('wrong public key type')\n    return ecVerify(sig, hash, pub)\n  } else if (pub.type === 'dsa') {\n    if (signType !== 'dsa') throw new Error('wrong public key type')\n    return dsaVerify(sig, hash, pub)\n  } else {\n    if (signType !== 'rsa' && signType !== 'ecdsa/rsa') throw new Error('wrong public key type')\n  }\n  hash = Buffer.concat([tag, hash])\n  var len = pub.modulus.byteLength()\n  var pad = [1]\n  var padNum = 0\n  while (hash.length + pad.length + 2 < len) {\n    pad.push(0xff)\n    padNum++\n  }\n  pad.push(0x00)\n  var i = -1\n  while (++i < hash.length) {\n    pad.push(hash[i])\n  }\n  pad = Buffer.from(pad)\n  var red = BN.mont(pub.modulus)\n  sig = new BN(sig).toRed(red)\n\n  sig = sig.redPow(new BN(pub.publicExponent))\n  sig = Buffer.from(sig.fromRed().toArray())\n  var out = padNum < 8 ? 1 : 0\n  len = Math.min(sig.length, pad.length)\n  if (sig.length !== pad.length) out = 1\n\n  i = -1\n  while (++i < len) out |= sig[i] ^ pad[i]\n  return out === 0\n}\n\nfunction ecVerify (sig, hash, pub) {\n  var curveId = curves[pub.data.algorithm.curve.join('.')]\n  if (!curveId) throw new Error('unknown curve ' + pub.data.algorithm.curve.join('.'))\n\n  var curve = new EC(curveId)\n  var pubkey = pub.data.subjectPrivateKey.data\n\n  return curve.verify(hash, sig, pubkey)\n}\n\nfunction dsaVerify (sig, hash, pub) {\n  var p = pub.data.p\n  var q = pub.data.q\n  var g = pub.data.g\n  var y = pub.data.pub_key\n  var unpacked = parseKeys.signature.decode(sig, 'der')\n  var s = unpacked.s\n  var r = unpacked.r\n  checkValue(s, q)\n  checkValue(r, q)\n  var montp = BN.mont(p)\n  var w = s.invm(q)\n  var v = g.toRed(montp)\n    .redPow(new BN(hash).mul(w).mod(q))\n    .fromRed()\n    .mul(y.toRed(montp).redPow(r.mul(w).mod(q)).fromRed())\n    .mod(p)\n    .mod(q)\n  return v.cmp(r) === 0\n}\n\nfunction checkValue (b, q) {\n  if (b.cmpn(0) <= 0) throw new Error('invalid sig')\n  if (b.cmp(q) >= q) throw new Error('invalid sig')\n}\n\nmodule.exports = verify\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/browser/verify.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/errors-browser.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/errors-browser.js ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar codes = {};\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n\n  var NodeError =\n  /*#__PURE__*/\n  function (_Base) {\n    _inheritsLoose(NodeError, _Base);\n\n    function NodeError(arg1, arg2, arg3) {\n      return _Base.call(this, getMessage(arg1, arg2, arg3)) || this;\n    }\n\n    return NodeError;\n  }(Base);\n\n  NodeError.prototype.name = Base.name;\n  NodeError.prototype.code = code;\n  codes[code] = NodeError;\n} // https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\n\n\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\n\n\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n\n\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n\n  return str.substring(this_len - search.length, this_len) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\n\n\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_INVALID_OPT_VALUE', function (name, value) {\n  return 'The value \"' + value + '\" is invalid for option \"' + name + '\"';\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  // determiner: 'must be' or 'must not be'\n  var determiner;\n\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  var msg;\n\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  }\n\n  msg += \". Received type \".concat(typeof actual);\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF');\ncreateErrorType('ERR_METHOD_NOT_IMPLEMENTED', function (name) {\n  return 'The ' + name + ' method is not implemented';\n});\ncreateErrorType('ERR_STREAM_PREMATURE_CLOSE', 'Premature close');\ncreateErrorType('ERR_STREAM_DESTROYED', function (name) {\n  return 'Cannot call ' + name + ' after a stream was destroyed';\n});\ncreateErrorType('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times');\ncreateErrorType('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable');\ncreateErrorType('ERR_STREAM_WRITE_AFTER_END', 'write after end');\ncreateErrorType('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError);\ncreateErrorType('ERR_UNKNOWN_ENCODING', function (arg) {\n  return 'Unknown encoding: ' + arg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event');\nmodule.exports.codes = codes;\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/errors-browser.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_duplex.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_duplex.js ***!
  \*****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(process) {// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n/*<replacement>*/\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n\n  for (var key in obj) {\n    keys.push(key);\n  }\n\n  return keys;\n};\n/*</replacement>*/\n\n\nmodule.exports = Duplex;\n\nvar Readable = __webpack_require__(/*! ./_stream_readable */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_readable.js\");\n\nvar Writable = __webpack_require__(/*! ./_stream_writable */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_writable.js\");\n\n__webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")(Duplex, Readable);\n\n{\n  // Allow the keys array to be GC'ed.\n  var keys = objectKeys(Writable.prototype);\n\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n  Readable.call(this, options);\n  Writable.call(this, options);\n  this.allowHalfOpen = true;\n\n  if (options) {\n    if (options.readable === false) this.readable = false;\n    if (options.writable === false) this.writable = false;\n\n    if (options.allowHalfOpen === false) {\n      this.allowHalfOpen = false;\n      this.once('end', onend);\n    }\n  }\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n}); // the no-half-open enforcer\n\nfunction onend() {\n  // If the writable side ended, then we're ok.\n  if (this._writableState.ended) return; // no more data can be written.\n  // But allow more writes to happen in this tick.\n\n  process.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_duplex.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_passthrough.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_passthrough.js ***!
  \**********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n\nmodule.exports = PassThrough;\n\nvar Transform = __webpack_require__(/*! ./_stream_transform */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_transform.js\");\n\n__webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_passthrough.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_readable.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_readable.js ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global, process) {// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\nmodule.exports = Readable;\n/*<replacement>*/\n\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n/*<replacement>*/\n\nvar EE = __webpack_require__(/*! events */ \"./node_modules/events/events.js\").EventEmitter;\n\nvar EElistenerCount = function EElistenerCount(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\n\n\nvar Stream = __webpack_require__(/*! ./internal/streams/stream */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/stream-browser.js\");\n/*</replacement>*/\n\n\nvar Buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\").Buffer;\n\nvar OurUint8Array = global.Uint8Array || function () {};\n\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\n\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n/*<replacement>*/\n\n\nvar debugUtil = __webpack_require__(/*! util */ 8);\n\nvar debug;\n\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function debug() {};\n}\n/*</replacement>*/\n\n\nvar BufferList = __webpack_require__(/*! ./internal/streams/buffer_list */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/buffer_list.js\");\n\nvar destroyImpl = __webpack_require__(/*! ./internal/streams/destroy */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/destroy.js\");\n\nvar _require = __webpack_require__(/*! ./internal/streams/state */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/state.js\"),\n    getHighWaterMark = _require.getHighWaterMark;\n\nvar _require$codes = __webpack_require__(/*! ../errors */ \"./node_modules/browserify-sign/node_modules/readable-stream/errors-browser.js\").codes,\n    ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n    ERR_STREAM_PUSH_AFTER_EOF = _require$codes.ERR_STREAM_PUSH_AFTER_EOF,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_STREAM_UNSHIFT_AFTER_END_EVENT = _require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT; // Lazy loaded to improve the startup performance.\n\n\nvar StringDecoder;\nvar createReadableStreamAsyncIterator;\nvar from;\n\n__webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")(Readable, Stream);\n\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn); // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (Array.isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream, isDuplex) {\n  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_duplex.js\");\n  options = options || {}; // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex; // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode; // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n\n  this.highWaterMark = getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex); // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false; // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n\n  this.sync = true; // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n  this.paused = true; // Should close be emitted on destroy. Defaults to true.\n\n  this.emitClose = options.emitClose !== false; // Should .destroy() be called after 'end' (and potentially 'finish')\n\n  this.autoDestroy = !!options.autoDestroy; // has it been destroyed\n\n  this.destroyed = false; // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n\n  this.defaultEncoding = options.defaultEncoding || 'utf8'; // the number of writers that are awaiting a drain event in .pipe()s\n\n  this.awaitDrain = 0; // if true, a maybeReadMore has been scheduled\n\n  this.readingMore = false;\n  this.decoder = null;\n  this.encoding = null;\n\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = __webpack_require__(/*! string_decoder/ */ \"./node_modules/string_decoder/lib/string_decoder.js\").StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_duplex.js\");\n  if (!(this instanceof Readable)) return new Readable(options); // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5\n\n  var isDuplex = this instanceof Duplex;\n  this._readableState = new ReadableState(options, this, isDuplex); // legacy\n\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined) {\n      return false;\n    }\n\n    return this._readableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._readableState.destroyed = value;\n  }\n});\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\n\nReadable.prototype._destroy = function (err, cb) {\n  cb(err);\n}; // Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\n\n\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n}; // Unshift should *always* be something directly out of read()\n\n\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  debug('readableAddChunk', chunk);\n  var state = stream._readableState;\n\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n\n    if (er) {\n      errorOrDestroy(stream, er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF());\n      } else if (state.destroyed) {\n        return false;\n      } else {\n        state.reading = false;\n\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n      maybeReadMore(stream, state);\n    }\n  } // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n\n\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    state.awaitDrain = 0;\n    stream.emit('data', chunk);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n    if (state.needReadable) emitReadable(stream);\n  }\n\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk);\n  }\n\n  return er;\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n}; // backwards compatibility.\n\n\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = __webpack_require__(/*! string_decoder/ */ \"./node_modules/string_decoder/lib/string_decoder.js\").StringDecoder;\n  var decoder = new StringDecoder(enc);\n  this._readableState.decoder = decoder; // If setEncoding(null), decoder.encoding equals utf8\n\n  this._readableState.encoding = this._readableState.decoder.encoding; // Iterate over current buffer to convert already stored Buffers:\n\n  var p = this._readableState.buffer.head;\n  var content = '';\n\n  while (p !== null) {\n    content += decoder.write(p.data);\n    p = p.next;\n  }\n\n  this._readableState.buffer.clear();\n\n  if (content !== '') this._readableState.buffer.push(content);\n  this._readableState.length = content.length;\n  return this;\n}; // Don't raise the hwm > 1GB\n\n\nvar MAX_HWM = 0x40000000;\n\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    // TODO(ronag): Throw ERR_VALUE_OUT_OF_RANGE.\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n\n  return n;\n} // This function is designed to be inlinable, so please take care when making\n// changes to the function body.\n\n\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  } // If we're asking for more than the current hwm, then raise the hwm.\n\n\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n; // Don't have enough\n\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n\n  return state.length;\n} // you can override either this method, or the async _read(n) below.\n\n\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n  if (n !== 0) state.emittedReadable = false; // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n\n  if (n === 0 && state.needReadable && ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state); // if we've ended, and we're now clear, then finish it up.\n\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  } // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n  // if we need a readable event, then we need to do some reading.\n\n\n  var doRead = state.needReadable;\n  debug('need readable', doRead); // if we currently have less than the highWaterMark, then also read some\n\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  } // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n\n\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true; // if the length is currently zero, then we *need* a readable event.\n\n    if (state.length === 0) state.needReadable = true; // call internal read method\n\n    this._read(state.highWaterMark);\n\n    state.sync = false; // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark;\n    n = 0;\n  } else {\n    state.length -= n;\n    state.awaitDrain = 0;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true; // If we tried to read() past the EOF, then emit end on the next tick.\n\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk');\n  if (state.ended) return;\n\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n\n  state.ended = true;\n\n  if (state.sync) {\n    // if we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call\n    emitReadable(stream);\n  } else {\n    // emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false;\n\n    if (!state.emittedReadable) {\n      state.emittedReadable = true;\n      emitReadable_(stream);\n    }\n  }\n} // Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\n\n\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  debug('emitReadable', state.needReadable, state.emittedReadable);\n  state.needReadable = false;\n\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    process.nextTick(emitReadable_, stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  var state = stream._readableState;\n  debug('emitReadable_', state.destroyed, state.length, state.ended);\n\n  if (!state.destroyed && (state.length || state.ended)) {\n    stream.emit('readable');\n    state.emittedReadable = false;\n  } // The stream needs another readable event if\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n\n\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark;\n  flow(stream);\n} // at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\n\n\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (!state.reading && !state.ended && (state.length < state.highWaterMark || state.flowing && state.length === 0)) {\n    var len = state.length;\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length) // didn't get any data, stop spinning.\n      break;\n  }\n\n  state.readingMore = false;\n} // abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\n\n\nReadable.prototype._read = function (n) {\n  errorOrDestroy(this, new ERR_METHOD_NOT_IMPLEMENTED('_read()'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) process.nextTick(endFn);else src.once('end', endFn);\n  dest.on('unpipe', onunpipe);\n\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  } // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n\n\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n  var cleanedUp = false;\n\n  function cleanup() {\n    debug('cleanup'); // cleanup event handlers once the pipe is broken\n\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n    cleanedUp = true; // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  src.on('data', ondata);\n\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    debug('dest.write', ret);\n\n    if (ret === false) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n      }\n\n      src.pause();\n    }\n  } // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n\n\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) errorOrDestroy(dest, er);\n  } // Make sure our error handler is attached before userland ones.\n\n\n  prependListener(dest, 'error', onerror); // Both close and finish should trigger unpipe, but only once.\n\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n\n  dest.once('close', onclose);\n\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  } // tell the dest that it's being piped to\n\n\n  dest.emit('pipe', src); // start the flow if it hasn't been started already.\n\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function pipeOnDrainFunctionResult() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = {\n    hasUnpiped: false\n  }; // if we're not piping anywhere, then do nothing.\n\n  if (state.pipesCount === 0) return this; // just one destination.  most common case.\n\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n    if (!dest) dest = state.pipes; // got a match.\n\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  } // slow case. multiple pipe destinations.\n\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, {\n        hasUnpiped: false\n      });\n    }\n\n    return this;\n  } // try to find the right one.\n\n\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n  dest.emit('unpipe', this, unpipeInfo);\n  return this;\n}; // set up data events if they are asked for\n// Ensure readable listeners eventually get something\n\n\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n  var state = this._readableState;\n\n  if (ev === 'data') {\n    // update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0; // Try start flowing on next tick if stream isn't explicitly paused\n\n    if (state.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.flowing = false;\n      state.emittedReadable = false;\n      debug('on readable', state.length, state.reading);\n\n      if (state.length) {\n        emitReadable(this);\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this);\n      }\n    }\n  }\n\n  return res;\n};\n\nReadable.prototype.addListener = Readable.prototype.on;\n\nReadable.prototype.removeListener = function (ev, fn) {\n  var res = Stream.prototype.removeListener.call(this, ev, fn);\n\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n\n  return res;\n};\n\nReadable.prototype.removeAllListeners = function (ev) {\n  var res = Stream.prototype.removeAllListeners.apply(this, arguments);\n\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n\n  return res;\n};\n\nfunction updateReadableListening(self) {\n  var state = self._readableState;\n  state.readableListening = self.listenerCount('readable') > 0;\n\n  if (state.resumeScheduled && !state.paused) {\n    // flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true; // crude way to check if we should resume\n  } else if (self.listenerCount('data') > 0) {\n    self.resume();\n  }\n}\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n} // pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\n\n\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n\n  if (!state.flowing) {\n    debug('resume'); // we flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume()\n\n    state.flowing = !state.readableListening;\n    resume(this, state);\n  }\n\n  state.paused = false;\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  debug('resume', state.reading);\n\n  if (!state.reading) {\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n\n  if (this._readableState.flowing !== false) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n\n  this._readableState.paused = true;\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n\n  while (state.flowing && stream.read() !== null) {\n    ;\n  }\n} // wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\n\n\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n  stream.on('end', function () {\n    debug('wrapped end');\n\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk); // don't skip over falsy values in objectMode\n\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  }); // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function methodWrap(method) {\n        return function methodWrapReturnFunction() {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  } // proxy certain important events.\n\n\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  } // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n\n\n  this._read = function (n) {\n    debug('wrapped _read', n);\n\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nif (typeof Symbol === 'function') {\n  Readable.prototype[Symbol.asyncIterator] = function () {\n    if (createReadableStreamAsyncIterator === undefined) {\n      createReadableStreamAsyncIterator = __webpack_require__(/*! ./internal/streams/async_iterator */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/async_iterator.js\");\n    }\n\n    return createReadableStreamAsyncIterator(this);\n  };\n}\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.highWaterMark;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState && this._readableState.buffer;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableFlowing', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.flowing;\n  },\n  set: function set(state) {\n    if (this._readableState) {\n      this._readableState.flowing = state;\n    }\n  }\n}); // exposed for testing purposes only.\n\nReadable._fromList = fromList;\nObject.defineProperty(Readable.prototype, 'readableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.length;\n  }\n}); // Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\n\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.first();else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = state.buffer.consume(n, state.decoder);\n  }\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n  debug('endReadable', state.endEmitted);\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length); // Check that we didn't get one last unshift.\n\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n\n    if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well\n      var wState = stream._writableState;\n\n      if (!wState || wState.autoDestroy && wState.finished) {\n        stream.destroy();\n      }\n    }\n  }\n}\n\nif (typeof Symbol === 'function') {\n  Readable.from = function (iterable, opts) {\n    if (from === undefined) {\n      from = __webpack_require__(/*! ./internal/streams/from */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/from-browser.js\");\n    }\n\n    return from(Readable, iterable, opts);\n  };\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n\n  return -1;\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! ./../../../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_readable.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_transform.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_transform.js ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n\nmodule.exports = Transform;\n\nvar _require$codes = __webpack_require__(/*! ../errors */ \"./node_modules/browserify-sign/node_modules/readable-stream/errors-browser.js\").codes,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n    ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,\n    ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes.ERR_TRANSFORM_WITH_LENGTH_0;\n\nvar Duplex = __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_duplex.js\");\n\n__webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n  var cb = ts.writecb;\n\n  if (cb === null) {\n    return this.emit('error', new ERR_MULTIPLE_CALLBACK());\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n  cb(er);\n  var rs = this._readableState;\n  rs.reading = false;\n\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n  Duplex.call(this, options);\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  }; // start out asking for a readable event once data is transformed.\n\n  this._readableState.needReadable = true; // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  } // When the writable side finishes, then flush out anything remaining.\n\n\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function' && !this._readableState.destroyed) {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n}; // This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\n\n\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n}; // Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\n\n\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && !ts.transforming) {\n    ts.transforming = true;\n\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data); // TODO(BridgeAR): Write a test for these two error cases\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n\n  if (stream._writableState.length) throw new ERR_TRANSFORM_WITH_LENGTH_0();\n  if (stream._transformState.transforming) throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();\n  return stream.push(null);\n}\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_transform.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_writable.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_writable.js ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global, process) {// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n\nmodule.exports = Writable;\n/* <replacement> */\n\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n} // It seems a linked list but it is not\n// there will be only 2 of these for each stream\n\n\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\n\n\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n/*<replacement>*/\n\nvar internalUtil = {\n  deprecate: __webpack_require__(/*! util-deprecate */ \"./node_modules/util-deprecate/browser.js\")\n};\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Stream = __webpack_require__(/*! ./internal/streams/stream */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/stream-browser.js\");\n/*</replacement>*/\n\n\nvar Buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\").Buffer;\n\nvar OurUint8Array = global.Uint8Array || function () {};\n\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\n\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\nvar destroyImpl = __webpack_require__(/*! ./internal/streams/destroy */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/destroy.js\");\n\nvar _require = __webpack_require__(/*! ./internal/streams/state */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/state.js\"),\n    getHighWaterMark = _require.getHighWaterMark;\n\nvar _require$codes = __webpack_require__(/*! ../errors */ \"./node_modules/browserify-sign/node_modules/readable-stream/errors-browser.js\").codes,\n    ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n    ERR_STREAM_CANNOT_PIPE = _require$codes.ERR_STREAM_CANNOT_PIPE,\n    ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED,\n    ERR_STREAM_NULL_VALUES = _require$codes.ERR_STREAM_NULL_VALUES,\n    ERR_STREAM_WRITE_AFTER_END = _require$codes.ERR_STREAM_WRITE_AFTER_END,\n    ERR_UNKNOWN_ENCODING = _require$codes.ERR_UNKNOWN_ENCODING;\n\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\n\n__webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream, isDuplex) {\n  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_duplex.js\");\n  options = options || {}; // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex; // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode; // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n\n  this.highWaterMark = getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex); // if _final has been called\n\n  this.finalCalled = false; // drain event flag.\n\n  this.needDrain = false; // at the start of calling end()\n\n  this.ending = false; // when end() has been called, and returned\n\n  this.ended = false; // when 'finish' is emitted\n\n  this.finished = false; // has it been destroyed\n\n  this.destroyed = false; // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode; // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n\n  this.defaultEncoding = options.defaultEncoding || 'utf8'; // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n\n  this.length = 0; // a flag to see when we're in the middle of a write.\n\n  this.writing = false; // when true all writes will be buffered until .uncork() call\n\n  this.corked = 0; // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n\n  this.sync = true; // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n\n  this.bufferProcessing = false; // the callback that's passed to _write(chunk,cb)\n\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  }; // the callback that the user supplies to write(chunk,encoding,cb)\n\n\n  this.writecb = null; // the amount that is being written when _write is called.\n\n  this.writelen = 0;\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null; // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n\n  this.pendingcb = 0; // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n\n  this.prefinished = false; // True if the error was already emitted and should not be thrown again\n\n  this.errorEmitted = false; // Should close be emitted on destroy. Defaults to true.\n\n  this.emitClose = options.emitClose !== false; // Should .destroy() be called after 'finish' (and potentially 'end')\n\n  this.autoDestroy = !!options.autoDestroy; // count buffered requests\n\n  this.bufferedRequestCount = 0; // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function writableStateBufferGetter() {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})(); // Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\n\n\nvar realHasInstance;\n\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function value(object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function realHasInstance(object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_duplex.js\"); // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5\n\n  var isDuplex = this instanceof Duplex;\n  if (!isDuplex && !realHasInstance.call(Writable, this)) return new Writable(options);\n  this._writableState = new WritableState(options, this, isDuplex); // legacy.\n\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n    if (typeof options.writev === 'function') this._writev = options.writev;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n} // Otherwise people can pipe Writable streams, which is just wrong.\n\n\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE());\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new ERR_STREAM_WRITE_AFTER_END(); // TODO: defer error events consistently everywhere, not just the cb\n\n  errorOrDestroy(stream, er);\n  process.nextTick(cb, er);\n} // Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\n\n\nfunction validChunk(stream, state, chunk, cb) {\n  var er;\n\n  if (chunk === null) {\n    er = new ERR_STREAM_NULL_VALUES();\n  } else if (typeof chunk !== 'string' && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer'], chunk);\n  }\n\n  if (er) {\n    errorOrDestroy(stream, er);\n    process.nextTick(cb, er);\n    return false;\n  }\n\n  return true;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n  if (typeof cb !== 'function') cb = nop;\n  if (state.ending) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  this._writableState.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new ERR_UNKNOWN_ENCODING(encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nObject.defineProperty(Writable.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n}); // if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\n\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n\n  var len = state.objectMode ? 1 : chunk.length;\n  state.length += len;\n  var ret = state.length < state.highWaterMark; // we must ensure that previous needDrain will not be reset to false.\n\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'));else if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    process.nextTick(cb, er); // this can emit finish, and it will always happen\n    // after error\n\n    process.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er); // this can emit finish, but finish must\n    // always follow error\n\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n  if (typeof cb !== 'function') throw new ERR_MULTIPLE_CALLBACK();\n  onwriteStateUpdate(state);\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state) || stream.destroyed;\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      process.nextTick(afterWrite, stream, state, finished, cb);\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n} // Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\n\n\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n} // if there's something in the buffer waiting, then process it\n\n\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n    var count = 0;\n    var allBuffers = true;\n\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n\n    buffer.allBuffers = allBuffers;\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish); // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--; // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding); // .end() fully uncorks\n\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  } // ignore unnecessary end() calls.\n\n\n  if (!state.ending) endWritable(this, state, cb);\n  return this;\n};\n\nObject.defineProperty(Writable.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\n\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n\n    if (err) {\n      errorOrDestroy(stream, err);\n    }\n\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\n\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.pendingcb++;\n      state.finalCalled = true;\n      process.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n\n  if (need) {\n    prefinish(stream, state);\n\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n\n      if (state.autoDestroy) {\n        // In case of duplex streams we need a way to detect\n        // if the readable side is ready for autoDestroy as well\n        var rState = stream._readableState;\n\n        if (!rState || rState.autoDestroy && rState.endEmitted) {\n          stream.destroy();\n        }\n      }\n    }\n  }\n\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n\n  if (cb) {\n    if (state.finished) process.nextTick(cb);else stream.once('finish', cb);\n  }\n\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  } // reuse the free corkReq.\n\n\n  state.corkedRequestsFree.next = corkReq;\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._writableState === undefined) {\n      return false;\n    }\n\n    return this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._writableState.destroyed = value;\n  }\n});\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\n\nWritable.prototype._destroy = function (err, cb) {\n  cb(err);\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! ./../../../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_writable.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/async_iterator.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/async_iterator.js ***!
  \**********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(process) {\n\nvar _Object$setPrototypeO;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar finished = __webpack_require__(/*! ./end-of-stream */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/end-of-stream.js\");\n\nvar kLastResolve = Symbol('lastResolve');\nvar kLastReject = Symbol('lastReject');\nvar kError = Symbol('error');\nvar kEnded = Symbol('ended');\nvar kLastPromise = Symbol('lastPromise');\nvar kHandlePromise = Symbol('handlePromise');\nvar kStream = Symbol('stream');\n\nfunction createIterResult(value, done) {\n  return {\n    value: value,\n    done: done\n  };\n}\n\nfunction readAndResolve(iter) {\n  var resolve = iter[kLastResolve];\n\n  if (resolve !== null) {\n    var data = iter[kStream].read(); // we defer if data is null\n    // we can be expecting either 'end' or\n    // 'error'\n\n    if (data !== null) {\n      iter[kLastPromise] = null;\n      iter[kLastResolve] = null;\n      iter[kLastReject] = null;\n      resolve(createIterResult(data, false));\n    }\n  }\n}\n\nfunction onReadable(iter) {\n  // we wait for the next tick, because it might\n  // emit an error with process.nextTick\n  process.nextTick(readAndResolve, iter);\n}\n\nfunction wrapForNext(lastPromise, iter) {\n  return function (resolve, reject) {\n    lastPromise.then(function () {\n      if (iter[kEnded]) {\n        resolve(createIterResult(undefined, true));\n        return;\n      }\n\n      iter[kHandlePromise](resolve, reject);\n    }, reject);\n  };\n}\n\nvar AsyncIteratorPrototype = Object.getPrototypeOf(function () {});\nvar ReadableStreamAsyncIteratorPrototype = Object.setPrototypeOf((_Object$setPrototypeO = {\n  get stream() {\n    return this[kStream];\n  },\n\n  next: function next() {\n    var _this = this;\n\n    // if we have detected an error in the meanwhile\n    // reject straight away\n    var error = this[kError];\n\n    if (error !== null) {\n      return Promise.reject(error);\n    }\n\n    if (this[kEnded]) {\n      return Promise.resolve(createIterResult(undefined, true));\n    }\n\n    if (this[kStream].destroyed) {\n      // We need to defer via nextTick because if .destroy(err) is\n      // called, the error will be emitted via nextTick, and\n      // we cannot guarantee that there is no error lingering around\n      // waiting to be emitted.\n      return new Promise(function (resolve, reject) {\n        process.nextTick(function () {\n          if (_this[kError]) {\n            reject(_this[kError]);\n          } else {\n            resolve(createIterResult(undefined, true));\n          }\n        });\n      });\n    } // if we have multiple next() calls\n    // we will wait for the previous Promise to finish\n    // this logic is optimized to support for await loops,\n    // where next() is only called once at a time\n\n\n    var lastPromise = this[kLastPromise];\n    var promise;\n\n    if (lastPromise) {\n      promise = new Promise(wrapForNext(lastPromise, this));\n    } else {\n      // fast path needed to support multiple this.push()\n      // without triggering the next() queue\n      var data = this[kStream].read();\n\n      if (data !== null) {\n        return Promise.resolve(createIterResult(data, false));\n      }\n\n      promise = new Promise(this[kHandlePromise]);\n    }\n\n    this[kLastPromise] = promise;\n    return promise;\n  }\n}, _defineProperty(_Object$setPrototypeO, Symbol.asyncIterator, function () {\n  return this;\n}), _defineProperty(_Object$setPrototypeO, \"return\", function _return() {\n  var _this2 = this;\n\n  // destroy(err, cb) is a private API\n  // we can guarantee we have that here, because we control the\n  // Readable class this is attached to\n  return new Promise(function (resolve, reject) {\n    _this2[kStream].destroy(null, function (err) {\n      if (err) {\n        reject(err);\n        return;\n      }\n\n      resolve(createIterResult(undefined, true));\n    });\n  });\n}), _Object$setPrototypeO), AsyncIteratorPrototype);\n\nvar createReadableStreamAsyncIterator = function createReadableStreamAsyncIterator(stream) {\n  var _Object$create;\n\n  var iterator = Object.create(ReadableStreamAsyncIteratorPrototype, (_Object$create = {}, _defineProperty(_Object$create, kStream, {\n    value: stream,\n    writable: true\n  }), _defineProperty(_Object$create, kLastResolve, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kLastReject, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kError, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kEnded, {\n    value: stream._readableState.endEmitted,\n    writable: true\n  }), _defineProperty(_Object$create, kHandlePromise, {\n    value: function value(resolve, reject) {\n      var data = iterator[kStream].read();\n\n      if (data) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        resolve(createIterResult(data, false));\n      } else {\n        iterator[kLastResolve] = resolve;\n        iterator[kLastReject] = reject;\n      }\n    },\n    writable: true\n  }), _Object$create));\n  iterator[kLastPromise] = null;\n  finished(stream, function (err) {\n    if (err && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n      var reject = iterator[kLastReject]; // reject if we are waiting for data in the Promise\n      // returned by next() and store the error\n\n      if (reject !== null) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        reject(err);\n      }\n\n      iterator[kError] = err;\n      return;\n    }\n\n    var resolve = iterator[kLastResolve];\n\n    if (resolve !== null) {\n      iterator[kLastPromise] = null;\n      iterator[kLastResolve] = null;\n      iterator[kLastReject] = null;\n      resolve(createIterResult(undefined, true));\n    }\n\n    iterator[kEnded] = true;\n  });\n  stream.on('readable', onReadable.bind(null, iterator));\n  return iterator;\n};\n\nmodule.exports = createReadableStreamAsyncIterator;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/async_iterator.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/buffer_list.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/buffer_list.js ***!
  \*******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar _require = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\"),\n    Buffer = _require.Buffer;\n\nvar _require2 = __webpack_require__(/*! util */ 9),\n    inspect = _require2.inspect;\n\nvar custom = inspect && inspect.custom || 'inspect';\n\nfunction copyBuffer(src, target, offset) {\n  Buffer.prototype.copy.call(src, target, offset);\n}\n\nmodule.exports =\n/*#__PURE__*/\nfunction () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  _createClass(BufferList, [{\n    key: \"push\",\n    value: function push(v) {\n      var entry = {\n        data: v,\n        next: null\n      };\n      if (this.length > 0) this.tail.next = entry;else this.head = entry;\n      this.tail = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"unshift\",\n    value: function unshift(v) {\n      var entry = {\n        data: v,\n        next: this.head\n      };\n      if (this.length === 0) this.tail = entry;\n      this.head = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      if (this.length === 0) return;\n      var ret = this.head.data;\n      if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n      --this.length;\n      return ret;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.head = this.tail = null;\n      this.length = 0;\n    }\n  }, {\n    key: \"join\",\n    value: function join(s) {\n      if (this.length === 0) return '';\n      var p = this.head;\n      var ret = '' + p.data;\n\n      while (p = p.next) {\n        ret += s + p.data;\n      }\n\n      return ret;\n    }\n  }, {\n    key: \"concat\",\n    value: function concat(n) {\n      if (this.length === 0) return Buffer.alloc(0);\n      var ret = Buffer.allocUnsafe(n >>> 0);\n      var p = this.head;\n      var i = 0;\n\n      while (p) {\n        copyBuffer(p.data, ret, i);\n        i += p.data.length;\n        p = p.next;\n      }\n\n      return ret;\n    } // Consumes a specified amount of bytes or characters from the buffered data.\n\n  }, {\n    key: \"consume\",\n    value: function consume(n, hasStrings) {\n      var ret;\n\n      if (n < this.head.data.length) {\n        // `slice` is the same for buffers and strings.\n        ret = this.head.data.slice(0, n);\n        this.head.data = this.head.data.slice(n);\n      } else if (n === this.head.data.length) {\n        // First chunk is a perfect match.\n        ret = this.shift();\n      } else {\n        // Result spans more than one buffer.\n        ret = hasStrings ? this._getString(n) : this._getBuffer(n);\n      }\n\n      return ret;\n    }\n  }, {\n    key: \"first\",\n    value: function first() {\n      return this.head.data;\n    } // Consumes a specified amount of characters from the buffered data.\n\n  }, {\n    key: \"_getString\",\n    value: function _getString(n) {\n      var p = this.head;\n      var c = 1;\n      var ret = p.data;\n      n -= ret.length;\n\n      while (p = p.next) {\n        var str = p.data;\n        var nb = n > str.length ? str.length : n;\n        if (nb === str.length) ret += str;else ret += str.slice(0, n);\n        n -= nb;\n\n        if (n === 0) {\n          if (nb === str.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = str.slice(nb);\n          }\n\n          break;\n        }\n\n        ++c;\n      }\n\n      this.length -= c;\n      return ret;\n    } // Consumes a specified amount of bytes from the buffered data.\n\n  }, {\n    key: \"_getBuffer\",\n    value: function _getBuffer(n) {\n      var ret = Buffer.allocUnsafe(n);\n      var p = this.head;\n      var c = 1;\n      p.data.copy(ret);\n      n -= p.data.length;\n\n      while (p = p.next) {\n        var buf = p.data;\n        var nb = n > buf.length ? buf.length : n;\n        buf.copy(ret, ret.length - n, 0, nb);\n        n -= nb;\n\n        if (n === 0) {\n          if (nb === buf.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = buf.slice(nb);\n          }\n\n          break;\n        }\n\n        ++c;\n      }\n\n      this.length -= c;\n      return ret;\n    } // Make sure the linked list only shows the minimal necessary information.\n\n  }, {\n    key: custom,\n    value: function value(_, options) {\n      return inspect(this, _objectSpread({}, options, {\n        // Only inspect one level.\n        depth: 0,\n        // It should not recurse.\n        customInspect: false\n      }));\n    }\n  }]);\n\n  return BufferList;\n}();\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/buffer_list.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/destroy.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/destroy.js ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(process) { // undocumented cb() API, needed for core, not for public API\n\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err) {\n      if (!this._writableState) {\n        process.nextTick(emitErrorNT, this, err);\n      } else if (!this._writableState.errorEmitted) {\n        this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorNT, this, err);\n      }\n    }\n\n    return this;\n  } // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  } // if this is a duplex stream mark the writable part as destroyed as well\n\n\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      if (!_this._writableState) {\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else if (!_this._writableState.errorEmitted) {\n        _this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else {\n        process.nextTick(emitCloseNT, _this);\n      }\n    } else if (cb) {\n      process.nextTick(emitCloseNT, _this);\n      cb(err);\n    } else {\n      process.nextTick(emitCloseNT, _this);\n    }\n  });\n\n  return this;\n}\n\nfunction emitErrorAndCloseNT(self, err) {\n  emitErrorNT(self, err);\n  emitCloseNT(self);\n}\n\nfunction emitCloseNT(self) {\n  if (self._writableState && !self._writableState.emitClose) return;\n  if (self._readableState && !self._readableState.emitClose) return;\n  self.emit('close');\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nfunction errorOrDestroy(stream, err) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n  var rState = stream._readableState;\n  var wState = stream._writableState;\n  if (rState && rState.autoDestroy || wState && wState.autoDestroy) stream.destroy(err);else stream.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy,\n  errorOrDestroy: errorOrDestroy\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/destroy.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/end-of-stream.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/end-of-stream.js ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n\n\nvar ERR_STREAM_PREMATURE_CLOSE = __webpack_require__(/*! ../../../errors */ \"./node_modules/browserify-sign/node_modules/readable-stream/errors-browser.js\").codes.ERR_STREAM_PREMATURE_CLOSE;\n\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    callback.apply(this, args);\n  };\n}\n\nfunction noop() {}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction eos(stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n\n  var onlegacyfinish = function onlegacyfinish() {\n    if (!stream.writable) onfinish();\n  };\n\n  var writableEnded = stream._writableState && stream._writableState.finished;\n\n  var onfinish = function onfinish() {\n    writable = false;\n    writableEnded = true;\n    if (!readable) callback.call(stream);\n  };\n\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\n\n  var onend = function onend() {\n    readable = false;\n    readableEnded = true;\n    if (!writable) callback.call(stream);\n  };\n\n  var onerror = function onerror(err) {\n    callback.call(stream, err);\n  };\n\n  var onclose = function onclose() {\n    var err;\n\n    if (readable && !readableEnded) {\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n\n    if (writable && !writableEnded) {\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n  };\n\n  var onrequest = function onrequest() {\n    stream.req.on('finish', onfinish);\n  };\n\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !stream._writableState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n}\n\nmodule.exports = eos;\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/end-of-stream.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/from-browser.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/from-browser.js ***!
  \********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function () {\n  throw new Error('Readable.from is not available in the browser')\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/from-browser.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/pipeline.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/pipeline.js ***!
  \****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n\nvar eos;\n\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback.apply(void 0, arguments);\n  };\n}\n\nvar _require$codes = __webpack_require__(/*! ../../../errors */ \"./node_modules/browserify-sign/node_modules/readable-stream/errors-browser.js\").codes,\n    ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n    ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\n\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  var closed = false;\n  stream.on('close', function () {\n    closed = true;\n  });\n  if (eos === undefined) eos = __webpack_require__(/*! ./end-of-stream */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/end-of-stream.js\");\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, function (err) {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  var destroyed = false;\n  return function (err) {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true; // request.destroy just do .end - .abort is what we want\n\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\n\nfunction call(fn) {\n  fn();\n}\n\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\n\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\n\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n\n  var callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n\n  var error;\n  var destroys = streams.map(function (stream, i) {\n    var reading = i < streams.length - 1;\n    var writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\n\nmodule.exports = pipeline;\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/pipeline.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/state.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/state.js ***!
  \*************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar ERR_INVALID_OPT_VALUE = __webpack_require__(/*! ../../../errors */ \"./node_modules/browserify-sign/node_modules/readable-stream/errors-browser.js\").codes.ERR_INVALID_OPT_VALUE;\n\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;\n}\n\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  var hwm = highWaterMarkFrom(options, isDuplex, duplexKey);\n\n  if (hwm != null) {\n    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {\n      var name = isDuplex ? duplexKey : 'highWaterMark';\n      throw new ERR_INVALID_OPT_VALUE(name, hwm);\n    }\n\n    return Math.floor(hwm);\n  } // Default value\n\n\n  return state.objectMode ? 16 : 16 * 1024;\n}\n\nmodule.exports = {\n  getHighWaterMark: getHighWaterMark\n};\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/state.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/stream-browser.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/stream-browser.js ***!
  \**********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! events */ \"./node_modules/events/events.js\").EventEmitter;\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/stream-browser.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/readable-stream/readable-browser.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/readable-stream/readable-browser.js ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("exports = module.exports = __webpack_require__(/*! ./lib/_stream_readable.js */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_readable.js\");\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = __webpack_require__(/*! ./lib/_stream_writable.js */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_writable.js\");\nexports.Duplex = __webpack_require__(/*! ./lib/_stream_duplex.js */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_duplex.js\");\nexports.Transform = __webpack_require__(/*! ./lib/_stream_transform.js */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_transform.js\");\nexports.PassThrough = __webpack_require__(/*! ./lib/_stream_passthrough.js */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/_stream_passthrough.js\");\nexports.finished = __webpack_require__(/*! ./lib/internal/streams/end-of-stream.js */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/end-of-stream.js\");\nexports.pipeline = __webpack_require__(/*! ./lib/internal/streams/pipeline.js */ \"./node_modules/browserify-sign/node_modules/readable-stream/lib/internal/streams/pipeline.js\");\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/readable-stream/readable-browser.js?");

/***/ }),

/***/ "./node_modules/browserify-sign/node_modules/safe-buffer/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/browserify-sign/node_modules/safe-buffer/index.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\r\n/* eslint-disable node/no-deprecated-api */\r\nvar buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\")\r\nvar Buffer = buffer.Buffer\r\n\r\n// alternative to using Object.keys for old browsers\r\nfunction copyProps (src, dst) {\r\n  for (var key in src) {\r\n    dst[key] = src[key]\r\n  }\r\n}\r\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\r\n  module.exports = buffer\r\n} else {\r\n  // Copy properties from require('buffer')\r\n  copyProps(buffer, exports)\r\n  exports.Buffer = SafeBuffer\r\n}\r\n\r\nfunction SafeBuffer (arg, encodingOrOffset, length) {\r\n  return Buffer(arg, encodingOrOffset, length)\r\n}\r\n\r\nSafeBuffer.prototype = Object.create(Buffer.prototype)\r\n\r\n// Copy static methods from Buffer\r\ncopyProps(Buffer, SafeBuffer)\r\n\r\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\r\n  if (typeof arg === 'number') {\r\n    throw new TypeError('Argument must not be a number')\r\n  }\r\n  return Buffer(arg, encodingOrOffset, length)\r\n}\r\n\r\nSafeBuffer.alloc = function (size, fill, encoding) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  var buf = Buffer(size)\r\n  if (fill !== undefined) {\r\n    if (typeof encoding === 'string') {\r\n      buf.fill(fill, encoding)\r\n    } else {\r\n      buf.fill(fill)\r\n    }\r\n  } else {\r\n    buf.fill(0)\r\n  }\r\n  return buf\r\n}\r\n\r\nSafeBuffer.allocUnsafe = function (size) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  return Buffer(size)\r\n}\r\n\r\nSafeBuffer.allocUnsafeSlow = function (size) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  return buffer.SlowBuffer(size)\r\n}\r\n\n\n//# sourceURL=webpack://Game/./node_modules/browserify-sign/node_modules/safe-buffer/index.js?");

/***/ }),

/***/ "./node_modules/buffer-xor/index.js":
/*!******************************************!*\
  !*** ./node_modules/buffer-xor/index.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(Buffer) {module.exports = function xor (a, b) {\n  var length = Math.min(a.length, b.length)\n  var buffer = new Buffer(length)\n\n  for (var i = 0; i < length; ++i) {\n    buffer[i] = a[i] ^ b[i]\n  }\n\n  return buffer\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../buffer/index.js */ \"./node_modules/buffer/index.js\").Buffer))\n\n//# sourceURL=webpack://Game/./node_modules/buffer-xor/index.js?");

/***/ }),

/***/ "./node_modules/buffer/index.js":
/*!**************************************!*\
  !*** ./node_modules/buffer/index.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n\n\nvar base64 = __webpack_require__(/*! base64-js */ \"./node_modules/base64-js/index.js\")\nvar ieee754 = __webpack_require__(/*! ieee754 */ \"./node_modules/ieee754/index.js\")\nvar isArray = __webpack_require__(/*! isarray */ \"./node_modules/isarray/index.js\")\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/buffer/index.js?");

/***/ }),

/***/ "./node_modules/cipher-base/index.js":
/*!*******************************************!*\
  !*** ./node_modules/cipher-base/index.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\nvar Transform = __webpack_require__(/*! stream */ \"./node_modules/stream-browserify/index.js\").Transform\nvar StringDecoder = __webpack_require__(/*! string_decoder */ \"./node_modules/string_decoder/lib/string_decoder.js\").StringDecoder\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\n\nfunction CipherBase (hashMode) {\n  Transform.call(this)\n  this.hashMode = typeof hashMode === 'string'\n  if (this.hashMode) {\n    this[hashMode] = this._finalOrDigest\n  } else {\n    this.final = this._finalOrDigest\n  }\n  if (this._final) {\n    this.__final = this._final\n    this._final = null\n  }\n  this._decoder = null\n  this._encoding = null\n}\ninherits(CipherBase, Transform)\n\nCipherBase.prototype.update = function (data, inputEnc, outputEnc) {\n  if (typeof data === 'string') {\n    data = Buffer.from(data, inputEnc)\n  }\n\n  var outData = this._update(data)\n  if (this.hashMode) return this\n\n  if (outputEnc) {\n    outData = this._toString(outData, outputEnc)\n  }\n\n  return outData\n}\n\nCipherBase.prototype.setAutoPadding = function () {}\nCipherBase.prototype.getAuthTag = function () {\n  throw new Error('trying to get auth tag in unsupported state')\n}\n\nCipherBase.prototype.setAuthTag = function () {\n  throw new Error('trying to set auth tag in unsupported state')\n}\n\nCipherBase.prototype.setAAD = function () {\n  throw new Error('trying to set aad in unsupported state')\n}\n\nCipherBase.prototype._transform = function (data, _, next) {\n  var err\n  try {\n    if (this.hashMode) {\n      this._update(data)\n    } else {\n      this.push(this._update(data))\n    }\n  } catch (e) {\n    err = e\n  } finally {\n    next(err)\n  }\n}\nCipherBase.prototype._flush = function (done) {\n  var err\n  try {\n    this.push(this.__final())\n  } catch (e) {\n    err = e\n  }\n\n  done(err)\n}\nCipherBase.prototype._finalOrDigest = function (outputEnc) {\n  var outData = this.__final() || Buffer.alloc(0)\n  if (outputEnc) {\n    outData = this._toString(outData, outputEnc, true)\n  }\n  return outData\n}\n\nCipherBase.prototype._toString = function (value, enc, fin) {\n  if (!this._decoder) {\n    this._decoder = new StringDecoder(enc)\n    this._encoding = enc\n  }\n\n  if (this._encoding !== enc) throw new Error('can\\'t switch encodings')\n\n  var out = this._decoder.write(value)\n  if (fin) {\n    out += this._decoder.end()\n  }\n\n  return out\n}\n\nmodule.exports = CipherBase\n\n\n//# sourceURL=webpack://Game/./node_modules/cipher-base/index.js?");

/***/ }),

/***/ "./node_modules/class-transformer/ClassTransformer.js":
/*!************************************************************!*\
  !*** ./node_modules/class-transformer/ClassTransformer.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ClassTransformer = void 0;\nconst TransformOperationExecutor_1 = __webpack_require__(/*! ./TransformOperationExecutor */ \"./node_modules/class-transformer/TransformOperationExecutor.js\");\nconst enums_1 = __webpack_require__(/*! ./enums */ \"./node_modules/class-transformer/enums/index.js\");\nclass ClassTransformer {\n    classToPlain(object, options) {\n        const executor = new TransformOperationExecutor_1.TransformOperationExecutor(enums_1.TransformationType.CLASS_TO_PLAIN, options || {});\n        return executor.transform(undefined, object, undefined, undefined, undefined, undefined);\n    }\n    classToPlainFromExist(object, plainObject, options) {\n        const executor = new TransformOperationExecutor_1.TransformOperationExecutor(enums_1.TransformationType.CLASS_TO_PLAIN, options || {});\n        return executor.transform(plainObject, object, undefined, undefined, undefined, undefined);\n    }\n    plainToClass(cls, plain, options) {\n        const executor = new TransformOperationExecutor_1.TransformOperationExecutor(enums_1.TransformationType.PLAIN_TO_CLASS, options || {});\n        return executor.transform(undefined, plain, cls, undefined, undefined, undefined);\n    }\n    plainToClassFromExist(clsObject, plain, options) {\n        const executor = new TransformOperationExecutor_1.TransformOperationExecutor(enums_1.TransformationType.PLAIN_TO_CLASS, options || {});\n        return executor.transform(clsObject, plain, undefined, undefined, undefined, undefined);\n    }\n    classToClass(object, options) {\n        const executor = new TransformOperationExecutor_1.TransformOperationExecutor(enums_1.TransformationType.CLASS_TO_CLASS, options || {});\n        return executor.transform(undefined, object, undefined, undefined, undefined, undefined);\n    }\n    classToClassFromExist(object, fromObject, options) {\n        const executor = new TransformOperationExecutor_1.TransformOperationExecutor(enums_1.TransformationType.CLASS_TO_CLASS, options || {});\n        return executor.transform(fromObject, object, undefined, undefined, undefined, undefined);\n    }\n    serialize(object, options) {\n        return JSON.stringify(this.classToPlain(object, options));\n    }\n    /**\n     * Deserializes given JSON string to a object of the given class.\n     */\n    deserialize(cls, json, options) {\n        const jsonObject = JSON.parse(json);\n        return this.plainToClass(cls, jsonObject, options);\n    }\n    /**\n     * Deserializes given JSON string to an array of objects of the given class.\n     */\n    deserializeArray(cls, json, options) {\n        const jsonObject = JSON.parse(json);\n        return this.plainToClass(cls, jsonObject, options);\n    }\n}\nexports.ClassTransformer = ClassTransformer;\n//# sourceMappingURL=ClassTransformer.js.map\n\n//# sourceURL=webpack://Game/./node_modules/class-transformer/ClassTransformer.js?");

/***/ }),

/***/ "./node_modules/class-transformer/TransformOperationExecutor.js":
/*!**********************************************************************!*\
  !*** ./node_modules/class-transformer/TransformOperationExecutor.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(Buffer) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TransformOperationExecutor = exports.testForBuffer = void 0;\nconst storage_1 = __webpack_require__(/*! ./storage */ \"./node_modules/class-transformer/storage.js\");\nconst enums_1 = __webpack_require__(/*! ./enums */ \"./node_modules/class-transformer/enums/index.js\");\nfunction testForBuffer() {\n    try {\n        Buffer.isBuffer({\n        /* empty object */\n        });\n        return true;\n    }\n    catch (_a) {\n        return false;\n    }\n}\nexports.testForBuffer = testForBuffer;\nfunction instantiateArrayType(arrayType) {\n    const array = new arrayType();\n    if (!(array instanceof Set) && !('push' in array)) {\n        return [];\n    }\n    return array;\n}\nclass TransformOperationExecutor {\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n    constructor(transformationType, options) {\n        this.transformationType = transformationType;\n        this.options = options;\n        // -------------------------------------------------------------------------\n        // Private Properties\n        // -------------------------------------------------------------------------\n        this.recursionStack = new Set();\n    }\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n    transform(source, value, targetType, arrayType, isMap, level = 0) {\n        if (Array.isArray(value) || value instanceof Set) {\n            const newValue = arrayType && this.transformationType === enums_1.TransformationType.PLAIN_TO_CLASS\n                ? instantiateArrayType(arrayType)\n                : [];\n            value.forEach((subValue, index) => {\n                const subSource = source ? source[index] : undefined;\n                if (!this.options.enableCircularCheck || !this.isCircular(subValue)) {\n                    let realTargetType;\n                    if (typeof targetType !== 'function' &&\n                        targetType &&\n                        targetType.options &&\n                        targetType.options.discriminator &&\n                        targetType.options.discriminator.property &&\n                        targetType.options.discriminator.subTypes) {\n                        if (this.transformationType === enums_1.TransformationType.PLAIN_TO_CLASS) {\n                            realTargetType = targetType.options.discriminator.subTypes.find(subType => subType.name === subValue[targetType.options.discriminator.property]);\n                            const options = { newObject: newValue, object: subValue, property: undefined };\n                            const newType = targetType.typeFunction(options);\n                            realTargetType === undefined ? (realTargetType = newType) : (realTargetType = realTargetType.value);\n                            if (!targetType.options.keepDiscriminatorProperty)\n                                delete subValue[targetType.options.discriminator.property];\n                        }\n                        if (this.transformationType === enums_1.TransformationType.CLASS_TO_CLASS) {\n                            realTargetType = subValue.constructor;\n                        }\n                        if (this.transformationType === enums_1.TransformationType.CLASS_TO_PLAIN) {\n                            subValue[targetType.options.discriminator.property] = targetType.options.discriminator.subTypes.find(subType => subType.value === subValue.constructor).name;\n                        }\n                    }\n                    else {\n                        realTargetType = targetType;\n                    }\n                    const value = this.transform(subSource, subValue, realTargetType, undefined, subValue instanceof Map, level + 1);\n                    if (newValue instanceof Set) {\n                        newValue.add(value);\n                    }\n                    else {\n                        newValue.push(value);\n                    }\n                }\n                else if (this.transformationType === enums_1.TransformationType.CLASS_TO_CLASS) {\n                    if (newValue instanceof Set) {\n                        newValue.add(subValue);\n                    }\n                    else {\n                        newValue.push(subValue);\n                    }\n                }\n            });\n            return newValue;\n        }\n        else if (targetType === String && !isMap) {\n            if (value === null || value === undefined)\n                return value;\n            return String(value);\n        }\n        else if (targetType === Number && !isMap) {\n            if (value === null || value === undefined)\n                return value;\n            return Number(value);\n        }\n        else if (targetType === Boolean && !isMap) {\n            if (value === null || value === undefined)\n                return value;\n            return Boolean(value);\n        }\n        else if ((targetType === Date || value instanceof Date) && !isMap) {\n            if (value instanceof Date) {\n                return new Date(value.valueOf());\n            }\n            if (value === null || value === undefined)\n                return value;\n            return new Date(value);\n        }\n        else if (testForBuffer() && (targetType === Buffer || value instanceof Buffer) && !isMap) {\n            if (value === null || value === undefined)\n                return value;\n            return Buffer.from(value);\n        }\n        else if (typeof value === 'object' && value !== null) {\n            // try to guess the type\n            if (!targetType && value.constructor !== Object /* && TransformationType === TransformationType.CLASS_TO_PLAIN*/)\n                targetType = value.constructor;\n            if (!targetType && source)\n                targetType = source.constructor;\n            if (this.options.enableCircularCheck) {\n                // add transformed type to prevent circular references\n                this.recursionStack.add(value);\n            }\n            const keys = this.getKeys(targetType, value);\n            let newValue = source ? source : {};\n            if (!source &&\n                (this.transformationType === enums_1.TransformationType.PLAIN_TO_CLASS ||\n                    this.transformationType === enums_1.TransformationType.CLASS_TO_CLASS)) {\n                if (isMap) {\n                    newValue = new Map();\n                }\n                else if (targetType) {\n                    newValue = new targetType();\n                }\n                else {\n                    newValue = {};\n                }\n            }\n            // traverse over keys\n            for (const key of keys) {\n                if (key === '__proto__' || key === 'constructor') {\n                    continue;\n                }\n                const valueKey = key;\n                let newValueKey = key, propertyName = key;\n                if (!this.options.ignoreDecorators && targetType) {\n                    if (this.transformationType === enums_1.TransformationType.PLAIN_TO_CLASS) {\n                        const exposeMetadata = storage_1.defaultMetadataStorage.findExposeMetadataByCustomName(targetType, key);\n                        if (exposeMetadata) {\n                            propertyName = exposeMetadata.propertyName;\n                            newValueKey = exposeMetadata.propertyName;\n                        }\n                    }\n                    else if (this.transformationType === enums_1.TransformationType.CLASS_TO_PLAIN ||\n                        this.transformationType === enums_1.TransformationType.CLASS_TO_CLASS) {\n                        const exposeMetadata = storage_1.defaultMetadataStorage.findExposeMetadata(targetType, key);\n                        if (exposeMetadata && exposeMetadata.options && exposeMetadata.options.name) {\n                            newValueKey = exposeMetadata.options.name;\n                        }\n                    }\n                }\n                // get a subvalue\n                let subValue = undefined;\n                if (value instanceof Map) {\n                    subValue = value.get(valueKey);\n                }\n                else if (value[valueKey] instanceof Function) {\n                    subValue = value[valueKey]();\n                }\n                else {\n                    subValue = value[valueKey];\n                }\n                // determine a type\n                let type = undefined, isSubValueMap = subValue instanceof Map;\n                if (targetType && isMap) {\n                    type = targetType;\n                }\n                else if (targetType) {\n                    const metadata = storage_1.defaultMetadataStorage.findTypeMetadata(targetType, propertyName);\n                    if (metadata) {\n                        const options = { newObject: newValue, object: value, property: propertyName };\n                        const newType = metadata.typeFunction ? metadata.typeFunction(options) : metadata.reflectedType;\n                        if (metadata.options &&\n                            metadata.options.discriminator &&\n                            metadata.options.discriminator.property &&\n                            metadata.options.discriminator.subTypes) {\n                            if (!(value[valueKey] instanceof Array)) {\n                                if (this.transformationType === enums_1.TransformationType.PLAIN_TO_CLASS) {\n                                    type = metadata.options.discriminator.subTypes.find(subType => {\n                                        if (subValue && metadata.options.discriminator.property in subValue) {\n                                            return subType.name === subValue[metadata.options.discriminator.property];\n                                        }\n                                    });\n                                    type === undefined ? (type = newType) : (type = type.value);\n                                    if (!metadata.options.keepDiscriminatorProperty) {\n                                        if (subValue && metadata.options.discriminator.property in subValue) {\n                                            delete subValue[metadata.options.discriminator.property];\n                                        }\n                                    }\n                                }\n                                if (this.transformationType === enums_1.TransformationType.CLASS_TO_CLASS) {\n                                    type = subValue.constructor;\n                                }\n                                if (this.transformationType === enums_1.TransformationType.CLASS_TO_PLAIN) {\n                                    subValue[metadata.options.discriminator.property] = metadata.options.discriminator.subTypes.find(subType => subType.value === subValue.constructor).name;\n                                }\n                            }\n                            else {\n                                type = metadata;\n                            }\n                        }\n                        else {\n                            type = newType;\n                        }\n                        isSubValueMap = isSubValueMap || metadata.reflectedType === Map;\n                    }\n                    else if (this.options.targetMaps) {\n                        // try to find a type in target maps\n                        this.options.targetMaps\n                            .filter(map => map.target === targetType && !!map.properties[propertyName])\n                            .forEach(map => (type = map.properties[propertyName]));\n                    }\n                    else if (this.options.enableImplicitConversion &&\n                        this.transformationType === enums_1.TransformationType.PLAIN_TO_CLASS) {\n                        // if we have no registererd type via the @Type() decorator then we check if we have any\n                        // type declarations in reflect-metadata (type declaration is emited only if some decorator is added to the property.)\n                        const reflectedType = Reflect.getMetadata('design:type', targetType.prototype, propertyName);\n                        if (reflectedType) {\n                            type = reflectedType;\n                        }\n                    }\n                }\n                // if value is an array try to get its custom array type\n                const arrayType = Array.isArray(value[valueKey])\n                    ? this.getReflectedType(targetType, propertyName)\n                    : undefined;\n                // const subValueKey = TransformationType === TransformationType.PLAIN_TO_CLASS && newKeyName ? newKeyName : key;\n                const subSource = source ? source[valueKey] : undefined;\n                // if its deserialization then type if required\n                // if we uncomment this types like string[] will not work\n                // if (this.transformationType === TransformationType.PLAIN_TO_CLASS && !type && subValue instanceof Object && !(subValue instanceof Date))\n                //     throw new Error(`Cannot determine type for ${(targetType as any).name }.${propertyName}, did you forget to specify a @Type?`);\n                // if newValue is a source object that has method that match newKeyName then skip it\n                if (newValue.constructor.prototype) {\n                    const descriptor = Object.getOwnPropertyDescriptor(newValue.constructor.prototype, newValueKey);\n                    if ((this.transformationType === enums_1.TransformationType.PLAIN_TO_CLASS ||\n                        this.transformationType === enums_1.TransformationType.CLASS_TO_CLASS) &&\n                        // eslint-disable-next-line @typescript-eslint/unbound-method\n                        ((descriptor && !descriptor.set) || newValue[newValueKey] instanceof Function))\n                        //  || TransformationType === TransformationType.CLASS_TO_CLASS\n                        continue;\n                }\n                if (!this.options.enableCircularCheck || !this.isCircular(subValue)) {\n                    const transformKey = this.transformationType === enums_1.TransformationType.PLAIN_TO_CLASS ? newValueKey : key;\n                    let finalValue;\n                    if (this.transformationType === enums_1.TransformationType.CLASS_TO_PLAIN) {\n                        // Get original value\n                        finalValue = value[transformKey];\n                        // Apply custom transformation\n                        finalValue = this.applyCustomTransformations(finalValue, targetType, transformKey, value, this.transformationType);\n                        // If nothing change, it means no custom transformation was applied, so use the subValue.\n                        finalValue = value[transformKey] === finalValue ? subValue : finalValue;\n                        // Apply the default transformation\n                        finalValue = this.transform(subSource, finalValue, type, arrayType, isSubValueMap, level + 1);\n                    }\n                    else {\n                        finalValue = this.transform(subSource, subValue, type, arrayType, isSubValueMap, level + 1);\n                        finalValue = this.applyCustomTransformations(finalValue, targetType, transformKey, value, this.transformationType);\n                    }\n                    if (newValue instanceof Map) {\n                        newValue.set(newValueKey, finalValue);\n                    }\n                    else {\n                        newValue[newValueKey] = finalValue;\n                    }\n                }\n                else if (this.transformationType === enums_1.TransformationType.CLASS_TO_CLASS) {\n                    let finalValue = subValue;\n                    finalValue = this.applyCustomTransformations(finalValue, targetType, key, value, this.transformationType);\n                    if (newValue instanceof Map) {\n                        newValue.set(newValueKey, finalValue);\n                    }\n                    else {\n                        newValue[newValueKey] = finalValue;\n                    }\n                }\n            }\n            if (this.options.enableCircularCheck) {\n                this.recursionStack.delete(value);\n            }\n            return newValue;\n        }\n        else {\n            return value;\n        }\n    }\n    applyCustomTransformations(value, target, key, obj, transformationType) {\n        let metadatas = storage_1.defaultMetadataStorage.findTransformMetadatas(target, key, this.transformationType);\n        // apply versioning options\n        if (this.options.version !== undefined) {\n            metadatas = metadatas.filter(metadata => {\n                if (!metadata.options)\n                    return true;\n                return this.checkVersion(metadata.options.since, metadata.options.until);\n            });\n        }\n        // apply grouping options\n        if (this.options.groups && this.options.groups.length) {\n            metadatas = metadatas.filter(metadata => {\n                if (!metadata.options)\n                    return true;\n                return this.checkGroups(metadata.options.groups);\n            });\n        }\n        else {\n            metadatas = metadatas.filter(metadata => {\n                return !metadata.options || !metadata.options.groups || !metadata.options.groups.length;\n            });\n        }\n        metadatas.forEach(metadata => {\n            value = metadata.transformFn(value, obj, transformationType);\n        });\n        return value;\n    }\n    // preventing circular references\n    isCircular(object) {\n        return this.recursionStack.has(object);\n    }\n    getReflectedType(target, propertyName) {\n        if (!target)\n            return undefined;\n        const meta = storage_1.defaultMetadataStorage.findTypeMetadata(target, propertyName);\n        return meta ? meta.reflectedType : undefined;\n    }\n    getKeys(target, object) {\n        // determine exclusion strategy\n        let strategy = storage_1.defaultMetadataStorage.getStrategy(target);\n        if (strategy === 'none')\n            strategy = this.options.strategy || 'exposeAll'; // exposeAll is default strategy\n        // get all keys that need to expose\n        let keys = [];\n        if (strategy === 'exposeAll') {\n            if (object instanceof Map) {\n                keys = Array.from(object.keys());\n            }\n            else {\n                keys = Object.keys(object);\n            }\n        }\n        if (!this.options.ignoreDecorators && target) {\n            // add all exposed to list of keys\n            let exposedProperties = storage_1.defaultMetadataStorage.getExposedProperties(target, this.transformationType);\n            if (this.transformationType === enums_1.TransformationType.PLAIN_TO_CLASS) {\n                exposedProperties = exposedProperties.map(key => {\n                    const exposeMetadata = storage_1.defaultMetadataStorage.findExposeMetadata(target, key);\n                    if (exposeMetadata && exposeMetadata.options && exposeMetadata.options.name) {\n                        return exposeMetadata.options.name;\n                    }\n                    return key;\n                });\n            }\n            if (this.options.excludeExtraneousValues) {\n                keys = exposedProperties;\n            }\n            else {\n                keys = keys.concat(exposedProperties);\n            }\n            // exclude excluded properties\n            const excludedProperties = storage_1.defaultMetadataStorage.getExcludedProperties(target, this.transformationType);\n            if (excludedProperties.length > 0) {\n                keys = keys.filter(key => {\n                    return !excludedProperties.includes(key);\n                });\n            }\n            // apply versioning options\n            if (this.options.version !== undefined) {\n                keys = keys.filter(key => {\n                    const exposeMetadata = storage_1.defaultMetadataStorage.findExposeMetadata(target, key);\n                    if (!exposeMetadata || !exposeMetadata.options)\n                        return true;\n                    return this.checkVersion(exposeMetadata.options.since, exposeMetadata.options.until);\n                });\n            }\n            // apply grouping options\n            if (this.options.groups && this.options.groups.length) {\n                keys = keys.filter(key => {\n                    const exposeMetadata = storage_1.defaultMetadataStorage.findExposeMetadata(target, key);\n                    if (!exposeMetadata || !exposeMetadata.options)\n                        return true;\n                    return this.checkGroups(exposeMetadata.options.groups);\n                });\n            }\n            else {\n                keys = keys.filter(key => {\n                    const exposeMetadata = storage_1.defaultMetadataStorage.findExposeMetadata(target, key);\n                    return (!exposeMetadata ||\n                        !exposeMetadata.options ||\n                        !exposeMetadata.options.groups ||\n                        !exposeMetadata.options.groups.length);\n                });\n            }\n        }\n        // exclude prefixed properties\n        if (this.options.excludePrefixes && this.options.excludePrefixes.length) {\n            keys = keys.filter(key => this.options.excludePrefixes.every(prefix => {\n                return key.substr(0, prefix.length) !== prefix;\n            }));\n        }\n        // make sure we have unique keys\n        keys = keys.filter((key, index, self) => {\n            return self.indexOf(key) === index;\n        });\n        return keys;\n    }\n    checkVersion(since, until) {\n        let decision = true;\n        if (decision && since)\n            decision = this.options.version >= since;\n        if (decision && until)\n            decision = this.options.version < until;\n        return decision;\n    }\n    checkGroups(groups) {\n        if (!groups)\n            return true;\n        return this.options.groups.some(optionGroup => groups.includes(optionGroup));\n    }\n}\nexports.TransformOperationExecutor = TransformOperationExecutor;\n//# sourceMappingURL=TransformOperationExecutor.js.map\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../buffer/index.js */ \"./node_modules/buffer/index.js\").Buffer))\n\n//# sourceURL=webpack://Game/./node_modules/class-transformer/TransformOperationExecutor.js?");

/***/ }),

/***/ "./node_modules/class-transformer/decorators.js":
/*!******************************************************!*\
  !*** ./node_modules/class-transformer/decorators.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TransformPlainToClass = exports.TransformClassToClass = exports.TransformClassToPlain = exports.Exclude = exports.Expose = exports.Type = exports.Transform = void 0;\nconst ClassTransformer_1 = __webpack_require__(/*! ./ClassTransformer */ \"./node_modules/class-transformer/ClassTransformer.js\");\nconst storage_1 = __webpack_require__(/*! ./storage */ \"./node_modules/class-transformer/storage.js\");\nconst TypeMetadata_1 = __webpack_require__(/*! ./metadata/TypeMetadata */ \"./node_modules/class-transformer/metadata/TypeMetadata.js\");\nconst ExposeMetadata_1 = __webpack_require__(/*! ./metadata/ExposeMetadata */ \"./node_modules/class-transformer/metadata/ExposeMetadata.js\");\nconst ExcludeMetadata_1 = __webpack_require__(/*! ./metadata/ExcludeMetadata */ \"./node_modules/class-transformer/metadata/ExcludeMetadata.js\");\nconst TransformMetadata_1 = __webpack_require__(/*! ./metadata/TransformMetadata */ \"./node_modules/class-transformer/metadata/TransformMetadata.js\");\n/**\n * Defines a custom logic for value transformation.\n */\nfunction Transform(transformFn, options) {\n    return function (target, key) {\n        const metadata = new TransformMetadata_1.TransformMetadata(target.constructor, key, transformFn, options);\n        storage_1.defaultMetadataStorage.addTransformMetadata(metadata);\n    };\n}\nexports.Transform = Transform;\n/**\n * Specifies a type of the property.\n * The given TypeFunction can return a constructor. A discriminator can be given in the options.\n */\nfunction Type(typeFunction, options) {\n    return function (target, key) {\n        const type = Reflect.getMetadata('design:type', target, key);\n        const metadata = new TypeMetadata_1.TypeMetadata(target.constructor, key, type, typeFunction, options);\n        storage_1.defaultMetadataStorage.addTypeMetadata(metadata);\n    };\n}\nexports.Type = Type;\n/**\n * Marks property as included in the process of transformation. By default it includes the property for both\n * constructorToPlain and plainToConstructor transformations, however you can specify on which of transformation types\n * you want to skip this property.\n */\nfunction Expose(options) {\n    return function (object, propertyName) {\n        const metadata = new ExposeMetadata_1.ExposeMetadata(object instanceof Function ? object : object.constructor, propertyName, options || {});\n        storage_1.defaultMetadataStorage.addExposeMetadata(metadata);\n    };\n}\nexports.Expose = Expose;\n/**\n * Marks property as excluded from the process of transformation. By default it excludes the property for both\n * constructorToPlain and plainToConstructor transformations, however you can specify on which of transformation types\n * you want to skip this property.\n */\nfunction Exclude(options) {\n    return function (object, propertyName) {\n        const metadata = new ExcludeMetadata_1.ExcludeMetadata(object instanceof Function ? object : object.constructor, propertyName, options || {});\n        storage_1.defaultMetadataStorage.addExcludeMetadata(metadata);\n    };\n}\nexports.Exclude = Exclude;\n/**\n * Transform the object from class to plain object and return only with the exposed properties.\n */\nfunction TransformClassToPlain(params) {\n    return function (target, propertyKey, descriptor) {\n        const classTransformer = new ClassTransformer_1.ClassTransformer();\n        const originalMethod = descriptor.value;\n        descriptor.value = function (...args) {\n            const result = originalMethod.apply(this, args);\n            const isPromise = !!result && (typeof result === 'object' || typeof result === 'function') && typeof result.then === 'function';\n            return isPromise\n                ? result.then((data) => classTransformer.classToPlain(data, params))\n                : classTransformer.classToPlain(result, params);\n        };\n    };\n}\nexports.TransformClassToPlain = TransformClassToPlain;\n/**\n * Return the class instance only with the exposed properties.\n */\nfunction TransformClassToClass(params) {\n    return function (target, propertyKey, descriptor) {\n        const classTransformer = new ClassTransformer_1.ClassTransformer();\n        const originalMethod = descriptor.value;\n        descriptor.value = function (...args) {\n            const result = originalMethod.apply(this, args);\n            const isPromise = !!result && (typeof result === 'object' || typeof result === 'function') && typeof result.then === 'function';\n            return isPromise\n                ? result.then((data) => classTransformer.classToClass(data, params))\n                : classTransformer.classToClass(result, params);\n        };\n    };\n}\nexports.TransformClassToClass = TransformClassToClass;\n/**\n * Return the class instance only with the exposed properties.\n */\nfunction TransformPlainToClass(classType, params) {\n    return function (target, propertyKey, descriptor) {\n        const classTransformer = new ClassTransformer_1.ClassTransformer();\n        const originalMethod = descriptor.value;\n        descriptor.value = function (...args) {\n            const result = originalMethod.apply(this, args);\n            const isPromise = !!result && (typeof result === 'object' || typeof result === 'function') && typeof result.then === 'function';\n            return isPromise\n                ? result.then((data) => classTransformer.plainToClass(classType, data, params))\n                : classTransformer.plainToClass(classType, result, params);\n        };\n    };\n}\nexports.TransformPlainToClass = TransformPlainToClass;\n//# sourceMappingURL=decorators.js.map\n\n//# sourceURL=webpack://Game/./node_modules/class-transformer/decorators.js?");

/***/ }),

/***/ "./node_modules/class-transformer/enums/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/class-transformer/enums/index.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(__webpack_require__(/*! ./transformation-type.enum */ \"./node_modules/class-transformer/enums/transformation-type.enum.js\"), exports);\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack://Game/./node_modules/class-transformer/enums/index.js?");

/***/ }),

/***/ "./node_modules/class-transformer/enums/transformation-type.enum.js":
/*!**************************************************************************!*\
  !*** ./node_modules/class-transformer/enums/transformation-type.enum.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TransformationType = void 0;\nvar TransformationType;\n(function (TransformationType) {\n    TransformationType[TransformationType[\"PLAIN_TO_CLASS\"] = 0] = \"PLAIN_TO_CLASS\";\n    TransformationType[TransformationType[\"CLASS_TO_PLAIN\"] = 1] = \"CLASS_TO_PLAIN\";\n    TransformationType[TransformationType[\"CLASS_TO_CLASS\"] = 2] = \"CLASS_TO_CLASS\";\n})(TransformationType = exports.TransformationType || (exports.TransformationType = {}));\n//# sourceMappingURL=transformation-type.enum.js.map\n\n//# sourceURL=webpack://Game/./node_modules/class-transformer/enums/transformation-type.enum.js?");

/***/ }),

/***/ "./node_modules/class-transformer/index.js":
/*!*************************************************!*\
  !*** ./node_modules/class-transformer/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TransformationType = exports.deserializeArray = exports.deserialize = exports.serialize = exports.classToClassFromExist = exports.classToClass = exports.plainToClassFromExist = exports.plainToClass = exports.classToPlainFromExist = exports.classToPlain = void 0;\nconst ClassTransformer_1 = __webpack_require__(/*! ./ClassTransformer */ \"./node_modules/class-transformer/ClassTransformer.js\");\nvar ClassTransformer_2 = __webpack_require__(/*! ./ClassTransformer */ \"./node_modules/class-transformer/ClassTransformer.js\");\nObject.defineProperty(exports, \"ClassTransformer\", { enumerable: true, get: function () { return ClassTransformer_2.ClassTransformer; } });\n__exportStar(__webpack_require__(/*! ./metadata/ExposeExcludeOptions */ \"./node_modules/class-transformer/metadata/ExposeExcludeOptions.js\"), exports);\n__exportStar(__webpack_require__(/*! ./decorators */ \"./node_modules/class-transformer/decorators.js\"), exports);\nconst classTransformer = new ClassTransformer_1.ClassTransformer();\nfunction classToPlain(object, options) {\n    return classTransformer.classToPlain(object, options);\n}\nexports.classToPlain = classToPlain;\nfunction classToPlainFromExist(object, plainObject, options) {\n    return classTransformer.classToPlainFromExist(object, plainObject, options);\n}\nexports.classToPlainFromExist = classToPlainFromExist;\nfunction plainToClass(cls, plain, options) {\n    return classTransformer.plainToClass(cls, plain, options);\n}\nexports.plainToClass = plainToClass;\nfunction plainToClassFromExist(clsObject, plain, options) {\n    return classTransformer.plainToClassFromExist(clsObject, plain, options);\n}\nexports.plainToClassFromExist = plainToClassFromExist;\nfunction classToClass(object, options) {\n    return classTransformer.classToClass(object, options);\n}\nexports.classToClass = classToClass;\nfunction classToClassFromExist(object, fromObject, options) {\n    return classTransformer.classToClassFromExist(object, fromObject, options);\n}\nexports.classToClassFromExist = classToClassFromExist;\nfunction serialize(object, options) {\n    return classTransformer.serialize(object, options);\n}\nexports.serialize = serialize;\n/**\n * Deserializes given JSON string to a object of the given class.\n */\nfunction deserialize(cls, json, options) {\n    return classTransformer.deserialize(cls, json, options);\n}\nexports.deserialize = deserialize;\n/**\n * Deserializes given JSON string to an array of objects of the given class.\n */\nfunction deserializeArray(cls, json, options) {\n    return classTransformer.deserializeArray(cls, json, options);\n}\nexports.deserializeArray = deserializeArray;\n/**\n * Enum representing the different transformation types.\n */\nvar TransformationType;\n(function (TransformationType) {\n    TransformationType[TransformationType[\"PLAIN_TO_CLASS\"] = 0] = \"PLAIN_TO_CLASS\";\n    TransformationType[TransformationType[\"CLASS_TO_PLAIN\"] = 1] = \"CLASS_TO_PLAIN\";\n    TransformationType[TransformationType[\"CLASS_TO_CLASS\"] = 2] = \"CLASS_TO_CLASS\";\n})(TransformationType = exports.TransformationType || (exports.TransformationType = {}));\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack://Game/./node_modules/class-transformer/index.js?");

/***/ }),

/***/ "./node_modules/class-transformer/metadata/ExcludeMetadata.js":
/*!********************************************************************!*\
  !*** ./node_modules/class-transformer/metadata/ExcludeMetadata.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExcludeMetadata = void 0;\nclass ExcludeMetadata {\n    constructor(target, propertyName, options) {\n        this.target = target;\n        this.propertyName = propertyName;\n        this.options = options;\n    }\n}\nexports.ExcludeMetadata = ExcludeMetadata;\n//# sourceMappingURL=ExcludeMetadata.js.map\n\n//# sourceURL=webpack://Game/./node_modules/class-transformer/metadata/ExcludeMetadata.js?");

/***/ }),

/***/ "./node_modules/class-transformer/metadata/ExposeExcludeOptions.js":
/*!*************************************************************************!*\
  !*** ./node_modules/class-transformer/metadata/ExposeExcludeOptions.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=ExposeExcludeOptions.js.map\n\n//# sourceURL=webpack://Game/./node_modules/class-transformer/metadata/ExposeExcludeOptions.js?");

/***/ }),

/***/ "./node_modules/class-transformer/metadata/ExposeMetadata.js":
/*!*******************************************************************!*\
  !*** ./node_modules/class-transformer/metadata/ExposeMetadata.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExposeMetadata = void 0;\nclass ExposeMetadata {\n    constructor(target, propertyName, options) {\n        this.target = target;\n        this.propertyName = propertyName;\n        this.options = options;\n    }\n}\nexports.ExposeMetadata = ExposeMetadata;\n//# sourceMappingURL=ExposeMetadata.js.map\n\n//# sourceURL=webpack://Game/./node_modules/class-transformer/metadata/ExposeMetadata.js?");

/***/ }),

/***/ "./node_modules/class-transformer/metadata/MetadataStorage.js":
/*!********************************************************************!*\
  !*** ./node_modules/class-transformer/metadata/MetadataStorage.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MetadataStorage = void 0;\nconst enums_1 = __webpack_require__(/*! ../enums */ \"./node_modules/class-transformer/enums/index.js\");\n/**\n * Storage all library metadata.\n */\nclass MetadataStorage {\n    constructor() {\n        // -------------------------------------------------------------------------\n        // Properties\n        // -------------------------------------------------------------------------\n        this._typeMetadatas = new Map();\n        this._transformMetadatas = new Map();\n        this._exposeMetadatas = new Map();\n        this._excludeMetadatas = new Map();\n        this._ancestorsMap = new Map();\n    }\n    // -------------------------------------------------------------------------\n    // Adder Methods\n    // -------------------------------------------------------------------------\n    addTypeMetadata(metadata) {\n        if (!this._typeMetadatas.has(metadata.target)) {\n            this._typeMetadatas.set(metadata.target, new Map());\n        }\n        this._typeMetadatas.get(metadata.target).set(metadata.propertyName, metadata);\n    }\n    addTransformMetadata(metadata) {\n        if (!this._transformMetadatas.has(metadata.target)) {\n            this._transformMetadatas.set(metadata.target, new Map());\n        }\n        if (!this._transformMetadatas.get(metadata.target).has(metadata.propertyName)) {\n            this._transformMetadatas.get(metadata.target).set(metadata.propertyName, []);\n        }\n        this._transformMetadatas.get(metadata.target).get(metadata.propertyName).push(metadata);\n    }\n    addExposeMetadata(metadata) {\n        if (!this._exposeMetadatas.has(metadata.target)) {\n            this._exposeMetadatas.set(metadata.target, new Map());\n        }\n        this._exposeMetadatas.get(metadata.target).set(metadata.propertyName, metadata);\n    }\n    addExcludeMetadata(metadata) {\n        if (!this._excludeMetadatas.has(metadata.target)) {\n            this._excludeMetadatas.set(metadata.target, new Map());\n        }\n        this._excludeMetadatas.get(metadata.target).set(metadata.propertyName, metadata);\n    }\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n    findTransformMetadatas(target, propertyName, transformationType) {\n        return this.findMetadatas(this._transformMetadatas, target, propertyName).filter(metadata => {\n            if (!metadata.options)\n                return true;\n            if (metadata.options.toClassOnly === true && metadata.options.toPlainOnly === true)\n                return true;\n            if (metadata.options.toClassOnly === true) {\n                return (transformationType === enums_1.TransformationType.CLASS_TO_CLASS ||\n                    transformationType === enums_1.TransformationType.PLAIN_TO_CLASS);\n            }\n            if (metadata.options.toPlainOnly === true) {\n                return transformationType === enums_1.TransformationType.CLASS_TO_PLAIN;\n            }\n            return true;\n        });\n    }\n    findExcludeMetadata(target, propertyName) {\n        return this.findMetadata(this._excludeMetadatas, target, propertyName);\n    }\n    findExposeMetadata(target, propertyName) {\n        return this.findMetadata(this._exposeMetadatas, target, propertyName);\n    }\n    findExposeMetadataByCustomName(target, name) {\n        return this.getExposedMetadatas(target).find(metadata => {\n            return metadata.options && metadata.options.name === name;\n        });\n    }\n    findTypeMetadata(target, propertyName) {\n        return this.findMetadata(this._typeMetadatas, target, propertyName);\n    }\n    getStrategy(target) {\n        const excludeMap = this._excludeMetadatas.get(target);\n        const exclude = excludeMap && excludeMap.get(undefined);\n        const exposeMap = this._exposeMetadatas.get(target);\n        const expose = exposeMap && exposeMap.get(undefined);\n        if ((exclude && expose) || (!exclude && !expose))\n            return 'none';\n        return exclude ? 'excludeAll' : 'exposeAll';\n    }\n    getExposedMetadatas(target) {\n        return this.getMetadata(this._exposeMetadatas, target);\n    }\n    getExcludedMetadatas(target) {\n        return this.getMetadata(this._excludeMetadatas, target);\n    }\n    getExposedProperties(target, transformationType) {\n        return this.getExposedMetadatas(target)\n            .filter(metadata => {\n            if (!metadata.options)\n                return true;\n            if (metadata.options.toClassOnly === true && metadata.options.toPlainOnly === true)\n                return true;\n            if (metadata.options.toClassOnly === true) {\n                return (transformationType === enums_1.TransformationType.CLASS_TO_CLASS ||\n                    transformationType === enums_1.TransformationType.PLAIN_TO_CLASS);\n            }\n            if (metadata.options.toPlainOnly === true) {\n                return transformationType === enums_1.TransformationType.CLASS_TO_PLAIN;\n            }\n            return true;\n        })\n            .map(metadata => metadata.propertyName);\n    }\n    getExcludedProperties(target, transformationType) {\n        return this.getExcludedMetadatas(target)\n            .filter(metadata => {\n            if (!metadata.options)\n                return true;\n            if (metadata.options.toClassOnly === true && metadata.options.toPlainOnly === true)\n                return true;\n            if (metadata.options.toClassOnly === true) {\n                return (transformationType === enums_1.TransformationType.CLASS_TO_CLASS ||\n                    transformationType === enums_1.TransformationType.PLAIN_TO_CLASS);\n            }\n            if (metadata.options.toPlainOnly === true) {\n                return transformationType === enums_1.TransformationType.CLASS_TO_PLAIN;\n            }\n            return true;\n        })\n            .map(metadata => metadata.propertyName);\n    }\n    clear() {\n        this._typeMetadatas.clear();\n        this._exposeMetadatas.clear();\n        this._excludeMetadatas.clear();\n        this._ancestorsMap.clear();\n    }\n    // -------------------------------------------------------------------------\n    // Private Methods\n    // -------------------------------------------------------------------------\n    getMetadata(metadatas, target) {\n        const metadataFromTargetMap = metadatas.get(target);\n        let metadataFromTarget;\n        if (metadataFromTargetMap) {\n            metadataFromTarget = Array.from(metadataFromTargetMap.values()).filter(meta => meta.propertyName !== undefined);\n        }\n        const metadataFromAncestors = [];\n        for (const ancestor of this.getAncestors(target)) {\n            const ancestorMetadataMap = metadatas.get(ancestor);\n            if (ancestorMetadataMap) {\n                const metadataFromAncestor = Array.from(ancestorMetadataMap.values()).filter(meta => meta.propertyName !== undefined);\n                metadataFromAncestors.push(...metadataFromAncestor);\n            }\n        }\n        return metadataFromAncestors.concat(metadataFromTarget || []);\n    }\n    findMetadata(metadatas, target, propertyName) {\n        const metadataFromTargetMap = metadatas.get(target);\n        if (metadataFromTargetMap) {\n            const metadataFromTarget = metadataFromTargetMap.get(propertyName);\n            if (metadataFromTarget) {\n                return metadataFromTarget;\n            }\n        }\n        for (const ancestor of this.getAncestors(target)) {\n            const ancestorMetadataMap = metadatas.get(ancestor);\n            if (ancestorMetadataMap) {\n                const ancestorResult = ancestorMetadataMap.get(propertyName);\n                if (ancestorResult) {\n                    return ancestorResult;\n                }\n            }\n        }\n        return undefined;\n    }\n    findMetadatas(metadatas, target, propertyName) {\n        const metadataFromTargetMap = metadatas.get(target);\n        let metadataFromTarget;\n        if (metadataFromTargetMap) {\n            metadataFromTarget = metadataFromTargetMap.get(propertyName);\n        }\n        const metadataFromAncestorsTarget = [];\n        for (const ancestor of this.getAncestors(target)) {\n            const ancestorMetadataMap = metadatas.get(ancestor);\n            if (ancestorMetadataMap) {\n                if (ancestorMetadataMap.has(propertyName)) {\n                    metadataFromAncestorsTarget.push(...ancestorMetadataMap.get(propertyName));\n                }\n            }\n        }\n        return metadataFromAncestorsTarget\n            .slice()\n            .reverse()\n            .concat((metadataFromTarget || []).slice().reverse());\n    }\n    getAncestors(target) {\n        if (!target)\n            return [];\n        if (!this._ancestorsMap.has(target)) {\n            const ancestors = [];\n            for (let baseClass = Object.getPrototypeOf(target.prototype.constructor); typeof baseClass.prototype !== 'undefined'; baseClass = Object.getPrototypeOf(baseClass.prototype.constructor)) {\n                ancestors.push(baseClass);\n            }\n            this._ancestorsMap.set(target, ancestors);\n        }\n        return this._ancestorsMap.get(target);\n    }\n}\nexports.MetadataStorage = MetadataStorage;\n//# sourceMappingURL=MetadataStorage.js.map\n\n//# sourceURL=webpack://Game/./node_modules/class-transformer/metadata/MetadataStorage.js?");

/***/ }),

/***/ "./node_modules/class-transformer/metadata/TransformMetadata.js":
/*!**********************************************************************!*\
  !*** ./node_modules/class-transformer/metadata/TransformMetadata.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TransformMetadata = void 0;\nclass TransformMetadata {\n    constructor(target, propertyName, transformFn, options) {\n        this.target = target;\n        this.propertyName = propertyName;\n        this.transformFn = transformFn;\n        this.options = options;\n    }\n}\nexports.TransformMetadata = TransformMetadata;\n//# sourceMappingURL=TransformMetadata.js.map\n\n//# sourceURL=webpack://Game/./node_modules/class-transformer/metadata/TransformMetadata.js?");

/***/ }),

/***/ "./node_modules/class-transformer/metadata/TypeMetadata.js":
/*!*****************************************************************!*\
  !*** ./node_modules/class-transformer/metadata/TypeMetadata.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeMetadata = void 0;\nclass TypeMetadata {\n    constructor(target, propertyName, reflectedType, typeFunction, options) {\n        this.target = target;\n        this.propertyName = propertyName;\n        this.reflectedType = reflectedType;\n        this.typeFunction = typeFunction;\n        this.options = options;\n    }\n}\nexports.TypeMetadata = TypeMetadata;\n//# sourceMappingURL=TypeMetadata.js.map\n\n//# sourceURL=webpack://Game/./node_modules/class-transformer/metadata/TypeMetadata.js?");

/***/ }),

/***/ "./node_modules/class-transformer/storage.js":
/*!***************************************************!*\
  !*** ./node_modules/class-transformer/storage.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultMetadataStorage = void 0;\nconst MetadataStorage_1 = __webpack_require__(/*! ./metadata/MetadataStorage */ \"./node_modules/class-transformer/metadata/MetadataStorage.js\");\n/**\n * Default metadata storage is used as singleton and can be used to storage all metadatas.\n */\nexports.defaultMetadataStorage = new MetadataStorage_1.MetadataStorage();\n//# sourceMappingURL=storage.js.map\n\n//# sourceURL=webpack://Game/./node_modules/class-transformer/storage.js?");

/***/ }),

/***/ "./node_modules/core-util-is/lib/util.js":
/*!***********************************************!*\
  !*** ./node_modules/core-util-is/lib/util.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(Buffer) {// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../buffer/index.js */ \"./node_modules/buffer/index.js\").Buffer))\n\n//# sourceURL=webpack://Game/./node_modules/core-util-is/lib/util.js?");

/***/ }),

/***/ "./node_modules/create-ecdh/browser.js":
/*!*********************************************!*\
  !*** ./node_modules/create-ecdh/browser.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(Buffer) {var elliptic = __webpack_require__(/*! elliptic */ \"./node_modules/elliptic/lib/elliptic.js\")\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/create-ecdh/node_modules/bn.js/lib/bn.js\")\n\nmodule.exports = function createECDH (curve) {\n  return new ECDH(curve)\n}\n\nvar aliases = {\n  secp256k1: {\n    name: 'secp256k1',\n    byteLength: 32\n  },\n  secp224r1: {\n    name: 'p224',\n    byteLength: 28\n  },\n  prime256v1: {\n    name: 'p256',\n    byteLength: 32\n  },\n  prime192v1: {\n    name: 'p192',\n    byteLength: 24\n  },\n  ed25519: {\n    name: 'ed25519',\n    byteLength: 32\n  },\n  secp384r1: {\n    name: 'p384',\n    byteLength: 48\n  },\n  secp521r1: {\n    name: 'p521',\n    byteLength: 66\n  }\n}\n\naliases.p224 = aliases.secp224r1\naliases.p256 = aliases.secp256r1 = aliases.prime256v1\naliases.p192 = aliases.secp192r1 = aliases.prime192v1\naliases.p384 = aliases.secp384r1\naliases.p521 = aliases.secp521r1\n\nfunction ECDH (curve) {\n  this.curveType = aliases[curve]\n  if (!this.curveType) {\n    this.curveType = {\n      name: curve\n    }\n  }\n  this.curve = new elliptic.ec(this.curveType.name) // eslint-disable-line new-cap\n  this.keys = void 0\n}\n\nECDH.prototype.generateKeys = function (enc, format) {\n  this.keys = this.curve.genKeyPair()\n  return this.getPublicKey(enc, format)\n}\n\nECDH.prototype.computeSecret = function (other, inenc, enc) {\n  inenc = inenc || 'utf8'\n  if (!Buffer.isBuffer(other)) {\n    other = new Buffer(other, inenc)\n  }\n  var otherPub = this.curve.keyFromPublic(other).getPublic()\n  var out = otherPub.mul(this.keys.getPrivate()).getX()\n  return formatReturnValue(out, enc, this.curveType.byteLength)\n}\n\nECDH.prototype.getPublicKey = function (enc, format) {\n  var key = this.keys.getPublic(format === 'compressed', true)\n  if (format === 'hybrid') {\n    if (key[key.length - 1] % 2) {\n      key[0] = 7\n    } else {\n      key[0] = 6\n    }\n  }\n  return formatReturnValue(key, enc)\n}\n\nECDH.prototype.getPrivateKey = function (enc) {\n  return formatReturnValue(this.keys.getPrivate(), enc)\n}\n\nECDH.prototype.setPublicKey = function (pub, enc) {\n  enc = enc || 'utf8'\n  if (!Buffer.isBuffer(pub)) {\n    pub = new Buffer(pub, enc)\n  }\n  this.keys._importPublic(pub)\n  return this\n}\n\nECDH.prototype.setPrivateKey = function (priv, enc) {\n  enc = enc || 'utf8'\n  if (!Buffer.isBuffer(priv)) {\n    priv = new Buffer(priv, enc)\n  }\n\n  var _priv = new BN(priv)\n  _priv = _priv.toString(16)\n  this.keys = this.curve.genKeyPair()\n  this.keys._importPrivate(_priv)\n  return this\n}\n\nfunction formatReturnValue (bn, enc, len) {\n  if (!Array.isArray(bn)) {\n    bn = bn.toArray()\n  }\n  var buf = new Buffer(bn)\n  if (len && buf.length < len) {\n    var zeros = new Buffer(len - buf.length)\n    zeros.fill(0)\n    buf = Buffer.concat([zeros, buf])\n  }\n  if (!enc) {\n    return buf\n  } else {\n    return buf.toString(enc)\n  }\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../buffer/index.js */ \"./node_modules/buffer/index.js\").Buffer))\n\n//# sourceURL=webpack://Game/./node_modules/create-ecdh/browser.js?");

/***/ }),

/***/ "./node_modules/create-ecdh/node_modules/bn.js/lib/bn.js":
/*!***************************************************************!*\
  !*** ./node_modules/create-ecdh/node_modules/bn.js/lib/bn.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(module) {(function (module, exports) {\r\n  'use strict';\r\n\r\n  // Utils\r\n  function assert (val, msg) {\r\n    if (!val) throw new Error(msg || 'Assertion failed');\r\n  }\r\n\r\n  // Could use `inherits` module, but don't want to move from single file\r\n  // architecture yet.\r\n  function inherits (ctor, superCtor) {\r\n    ctor.super_ = superCtor;\r\n    var TempCtor = function () {};\r\n    TempCtor.prototype = superCtor.prototype;\r\n    ctor.prototype = new TempCtor();\r\n    ctor.prototype.constructor = ctor;\r\n  }\r\n\r\n  // BN\r\n\r\n  function BN (number, base, endian) {\r\n    if (BN.isBN(number)) {\r\n      return number;\r\n    }\r\n\r\n    this.negative = 0;\r\n    this.words = null;\r\n    this.length = 0;\r\n\r\n    // Reduction context\r\n    this.red = null;\r\n\r\n    if (number !== null) {\r\n      if (base === 'le' || base === 'be') {\r\n        endian = base;\r\n        base = 10;\r\n      }\r\n\r\n      this._init(number || 0, base || 10, endian || 'be');\r\n    }\r\n  }\r\n  if (typeof module === 'object') {\r\n    module.exports = BN;\r\n  } else {\r\n    exports.BN = BN;\r\n  }\r\n\r\n  BN.BN = BN;\r\n  BN.wordSize = 26;\r\n\r\n  var Buffer;\r\n  try {\r\n    Buffer = __webpack_require__(/*! buffer */ 14).Buffer;\r\n  } catch (e) {\r\n  }\r\n\r\n  BN.isBN = function isBN (num) {\r\n    if (num instanceof BN) {\r\n      return true;\r\n    }\r\n\r\n    return num !== null && typeof num === 'object' &&\r\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\r\n  };\r\n\r\n  BN.max = function max (left, right) {\r\n    if (left.cmp(right) > 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.min = function min (left, right) {\r\n    if (left.cmp(right) < 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.prototype._init = function init (number, base, endian) {\r\n    if (typeof number === 'number') {\r\n      return this._initNumber(number, base, endian);\r\n    }\r\n\r\n    if (typeof number === 'object') {\r\n      return this._initArray(number, base, endian);\r\n    }\r\n\r\n    if (base === 'hex') {\r\n      base = 16;\r\n    }\r\n    assert(base === (base | 0) && base >= 2 && base <= 36);\r\n\r\n    number = number.toString().replace(/\\s+/g, '');\r\n    var start = 0;\r\n    if (number[0] === '-') {\r\n      start++;\r\n    }\r\n\r\n    if (base === 16) {\r\n      this._parseHex(number, start);\r\n    } else {\r\n      this._parseBase(number, base, start);\r\n    }\r\n\r\n    if (number[0] === '-') {\r\n      this.negative = 1;\r\n    }\r\n\r\n    this.strip();\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\r\n    if (number < 0) {\r\n      this.negative = 1;\r\n      number = -number;\r\n    }\r\n    if (number < 0x4000000) {\r\n      this.words = [ number & 0x3ffffff ];\r\n      this.length = 1;\r\n    } else if (number < 0x10000000000000) {\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff\r\n      ];\r\n      this.length = 2;\r\n    } else {\r\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff,\r\n        1\r\n      ];\r\n      this.length = 3;\r\n    }\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    // Reverse the bytes\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initArray = function _initArray (number, base, endian) {\r\n    // Perhaps a Uint8Array\r\n    assert(typeof number.length === 'number');\r\n    if (number.length <= 0) {\r\n      this.words = [ 0 ];\r\n      this.length = 1;\r\n      return this;\r\n    }\r\n\r\n    this.length = Math.ceil(number.length / 3);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    var off = 0;\r\n    if (endian === 'be') {\r\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\r\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    } else if (endian === 'le') {\r\n      for (i = 0, j = 0; i < number.length; i += 3) {\r\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    }\r\n    return this.strip();\r\n  };\r\n\r\n  function parseHex (str, start, end) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r <<= 4;\r\n\r\n      // 'a' - 'f'\r\n      if (c >= 49 && c <= 54) {\r\n        r |= c - 49 + 0xa;\r\n\r\n      // 'A' - 'F'\r\n      } else if (c >= 17 && c <= 22) {\r\n        r |= c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        r |= c & 0xf;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseHex = function _parseHex (number, start) {\r\n    // Create possibly bigger array to ensure that it fits the number\r\n    this.length = Math.ceil((number.length - start) / 6);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    // Scan 24-bit chunks and add them to the number\r\n    var off = 0;\r\n    for (i = number.length - 6, j = 0; i >= start; i -= 6) {\r\n      w = parseHex(number, i, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      // NOTE: `0x3fffff` is intentional here, 26bits max shift + 24bit hex limb\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n      off += 24;\r\n      if (off >= 26) {\r\n        off -= 26;\r\n        j++;\r\n      }\r\n    }\r\n    if (i + 6 !== start) {\r\n      w = parseHex(number, start, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n    }\r\n    this.strip();\r\n  };\r\n\r\n  function parseBase (str, start, end, mul) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r *= mul;\r\n\r\n      // 'a'\r\n      if (c >= 49) {\r\n        r += c - 49 + 0xa;\r\n\r\n      // 'A'\r\n      } else if (c >= 17) {\r\n        r += c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        r += c;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\r\n    // Initialize as zero\r\n    this.words = [ 0 ];\r\n    this.length = 1;\r\n\r\n    // Find length of limb in base\r\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\r\n      limbLen++;\r\n    }\r\n    limbLen--;\r\n    limbPow = (limbPow / base) | 0;\r\n\r\n    var total = number.length - start;\r\n    var mod = total % limbLen;\r\n    var end = Math.min(total, total - mod) + start;\r\n\r\n    var word = 0;\r\n    for (var i = start; i < end; i += limbLen) {\r\n      word = parseBase(number, i, i + limbLen, base);\r\n\r\n      this.imuln(limbPow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n\r\n    if (mod !== 0) {\r\n      var pow = 1;\r\n      word = parseBase(number, i, number.length, base);\r\n\r\n      for (i = 0; i < mod; i++) {\r\n        pow *= base;\r\n      }\r\n\r\n      this.imuln(pow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n  };\r\n\r\n  BN.prototype.copy = function copy (dest) {\r\n    dest.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      dest.words[i] = this.words[i];\r\n    }\r\n    dest.length = this.length;\r\n    dest.negative = this.negative;\r\n    dest.red = this.red;\r\n  };\r\n\r\n  BN.prototype.clone = function clone () {\r\n    var r = new BN(null);\r\n    this.copy(r);\r\n    return r;\r\n  };\r\n\r\n  BN.prototype._expand = function _expand (size) {\r\n    while (this.length < size) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  // Remove leading `0` from `this`\r\n  BN.prototype.strip = function strip () {\r\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\r\n      this.length--;\r\n    }\r\n    return this._normSign();\r\n  };\r\n\r\n  BN.prototype._normSign = function _normSign () {\r\n    // -0 = 0\r\n    if (this.length === 1 && this.words[0] === 0) {\r\n      this.negative = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.inspect = function inspect () {\r\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\r\n  };\r\n\r\n  /*\r\n\r\n  var zeros = [];\r\n  var groupSizes = [];\r\n  var groupBases = [];\r\n\r\n  var s = '';\r\n  var i = -1;\r\n  while (++i < BN.wordSize) {\r\n    zeros[i] = s;\r\n    s += '0';\r\n  }\r\n  groupSizes[0] = 0;\r\n  groupSizes[1] = 0;\r\n  groupBases[0] = 0;\r\n  groupBases[1] = 0;\r\n  var base = 2 - 1;\r\n  while (++base < 36 + 1) {\r\n    var groupSize = 0;\r\n    var groupBase = 1;\r\n    while (groupBase < (1 << BN.wordSize) / base) {\r\n      groupBase *= base;\r\n      groupSize += 1;\r\n    }\r\n    groupSizes[base] = groupSize;\r\n    groupBases[base] = groupBase;\r\n  }\r\n\r\n  */\r\n\r\n  var zeros = [\r\n    '',\r\n    '0',\r\n    '00',\r\n    '000',\r\n    '0000',\r\n    '00000',\r\n    '000000',\r\n    '0000000',\r\n    '00000000',\r\n    '000000000',\r\n    '0000000000',\r\n    '00000000000',\r\n    '000000000000',\r\n    '0000000000000',\r\n    '00000000000000',\r\n    '000000000000000',\r\n    '0000000000000000',\r\n    '00000000000000000',\r\n    '000000000000000000',\r\n    '0000000000000000000',\r\n    '00000000000000000000',\r\n    '000000000000000000000',\r\n    '0000000000000000000000',\r\n    '00000000000000000000000',\r\n    '000000000000000000000000',\r\n    '0000000000000000000000000'\r\n  ];\r\n\r\n  var groupSizes = [\r\n    0, 0,\r\n    25, 16, 12, 11, 10, 9, 8,\r\n    8, 7, 7, 7, 7, 6, 6,\r\n    6, 6, 6, 6, 6, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5\r\n  ];\r\n\r\n  var groupBases = [\r\n    0, 0,\r\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\r\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\r\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\r\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\r\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\r\n  ];\r\n\r\n  BN.prototype.toString = function toString (base, padding) {\r\n    base = base || 10;\r\n    padding = padding | 0 || 1;\r\n\r\n    var out;\r\n    if (base === 16 || base === 'hex') {\r\n      out = '';\r\n      var off = 0;\r\n      var carry = 0;\r\n      for (var i = 0; i < this.length; i++) {\r\n        var w = this.words[i];\r\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\r\n        carry = (w >>> (24 - off)) & 0xffffff;\r\n        if (carry !== 0 || i !== this.length - 1) {\r\n          out = zeros[6 - word.length] + word + out;\r\n        } else {\r\n          out = word + out;\r\n        }\r\n        off += 2;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          i--;\r\n        }\r\n      }\r\n      if (carry !== 0) {\r\n        out = carry.toString(16) + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    if (base === (base | 0) && base >= 2 && base <= 36) {\r\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\r\n      var groupSize = groupSizes[base];\r\n      // var groupBase = Math.pow(base, groupSize);\r\n      var groupBase = groupBases[base];\r\n      out = '';\r\n      var c = this.clone();\r\n      c.negative = 0;\r\n      while (!c.isZero()) {\r\n        var r = c.modn(groupBase).toString(base);\r\n        c = c.idivn(groupBase);\r\n\r\n        if (!c.isZero()) {\r\n          out = zeros[groupSize - r.length] + r + out;\r\n        } else {\r\n          out = r + out;\r\n        }\r\n      }\r\n      if (this.isZero()) {\r\n        out = '0' + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    assert(false, 'Base should be between 2 and 36');\r\n  };\r\n\r\n  BN.prototype.toNumber = function toNumber () {\r\n    var ret = this.words[0];\r\n    if (this.length === 2) {\r\n      ret += this.words[1] * 0x4000000;\r\n    } else if (this.length === 3 && this.words[2] === 0x01) {\r\n      // NOTE: at this stage it is known that the top bit is set\r\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\r\n    } else if (this.length > 2) {\r\n      assert(false, 'Number can only safely store up to 53 bits');\r\n    }\r\n    return (this.negative !== 0) ? -ret : ret;\r\n  };\r\n\r\n  BN.prototype.toJSON = function toJSON () {\r\n    return this.toString(16);\r\n  };\r\n\r\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\r\n    assert(typeof Buffer !== 'undefined');\r\n    return this.toArrayLike(Buffer, endian, length);\r\n  };\r\n\r\n  BN.prototype.toArray = function toArray (endian, length) {\r\n    return this.toArrayLike(Array, endian, length);\r\n  };\r\n\r\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\r\n    var byteLength = this.byteLength();\r\n    var reqLength = length || Math.max(1, byteLength);\r\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\r\n    assert(reqLength > 0, 'Requested array length <= 0');\r\n\r\n    this.strip();\r\n    var littleEndian = endian === 'le';\r\n    var res = new ArrayType(reqLength);\r\n\r\n    var b, i;\r\n    var q = this.clone();\r\n    if (!littleEndian) {\r\n      // Assume big-endian\r\n      for (i = 0; i < reqLength - byteLength; i++) {\r\n        res[i] = 0;\r\n      }\r\n\r\n      for (i = 0; !q.isZero(); i++) {\r\n        b = q.andln(0xff);\r\n        q.iushrn(8);\r\n\r\n        res[reqLength - i - 1] = b;\r\n      }\r\n    } else {\r\n      for (i = 0; !q.isZero(); i++) {\r\n        b = q.andln(0xff);\r\n        q.iushrn(8);\r\n\r\n        res[i] = b;\r\n      }\r\n\r\n      for (; i < reqLength; i++) {\r\n        res[i] = 0;\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  if (Math.clz32) {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      return 32 - Math.clz32(w);\r\n    };\r\n  } else {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      var t = w;\r\n      var r = 0;\r\n      if (t >= 0x1000) {\r\n        r += 13;\r\n        t >>>= 13;\r\n      }\r\n      if (t >= 0x40) {\r\n        r += 7;\r\n        t >>>= 7;\r\n      }\r\n      if (t >= 0x8) {\r\n        r += 4;\r\n        t >>>= 4;\r\n      }\r\n      if (t >= 0x02) {\r\n        r += 2;\r\n        t >>>= 2;\r\n      }\r\n      return r + t;\r\n    };\r\n  }\r\n\r\n  BN.prototype._zeroBits = function _zeroBits (w) {\r\n    // Short-cut\r\n    if (w === 0) return 26;\r\n\r\n    var t = w;\r\n    var r = 0;\r\n    if ((t & 0x1fff) === 0) {\r\n      r += 13;\r\n      t >>>= 13;\r\n    }\r\n    if ((t & 0x7f) === 0) {\r\n      r += 7;\r\n      t >>>= 7;\r\n    }\r\n    if ((t & 0xf) === 0) {\r\n      r += 4;\r\n      t >>>= 4;\r\n    }\r\n    if ((t & 0x3) === 0) {\r\n      r += 2;\r\n      t >>>= 2;\r\n    }\r\n    if ((t & 0x1) === 0) {\r\n      r++;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  // Return number of used bits in a BN\r\n  BN.prototype.bitLength = function bitLength () {\r\n    var w = this.words[this.length - 1];\r\n    var hi = this._countBits(w);\r\n    return (this.length - 1) * 26 + hi;\r\n  };\r\n\r\n  function toBitArray (num) {\r\n    var w = new Array(num.bitLength());\r\n\r\n    for (var bit = 0; bit < w.length; bit++) {\r\n      var off = (bit / 26) | 0;\r\n      var wbit = bit % 26;\r\n\r\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\r\n    }\r\n\r\n    return w;\r\n  }\r\n\r\n  // Number of trailing zero bits\r\n  BN.prototype.zeroBits = function zeroBits () {\r\n    if (this.isZero()) return 0;\r\n\r\n    var r = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var b = this._zeroBits(this.words[i]);\r\n      r += b;\r\n      if (b !== 26) break;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  BN.prototype.byteLength = function byteLength () {\r\n    return Math.ceil(this.bitLength() / 8);\r\n  };\r\n\r\n  BN.prototype.toTwos = function toTwos (width) {\r\n    if (this.negative !== 0) {\r\n      return this.abs().inotn(width).iaddn(1);\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.fromTwos = function fromTwos (width) {\r\n    if (this.testn(width - 1)) {\r\n      return this.notn(width).iaddn(1).ineg();\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.isNeg = function isNeg () {\r\n    return this.negative !== 0;\r\n  };\r\n\r\n  // Return negative clone of `this`\r\n  BN.prototype.neg = function neg () {\r\n    return this.clone().ineg();\r\n  };\r\n\r\n  BN.prototype.ineg = function ineg () {\r\n    if (!this.isZero()) {\r\n      this.negative ^= 1;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Or `num` with `this` in-place\r\n  BN.prototype.iuor = function iuor (num) {\r\n    while (this.length < num.length) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n\r\n    for (var i = 0; i < num.length; i++) {\r\n      this.words[i] = this.words[i] | num.words[i];\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ior = function ior (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuor(num);\r\n  };\r\n\r\n  // Or `num` with `this`\r\n  BN.prototype.or = function or (num) {\r\n    if (this.length > num.length) return this.clone().ior(num);\r\n    return num.clone().ior(this);\r\n  };\r\n\r\n  BN.prototype.uor = function uor (num) {\r\n    if (this.length > num.length) return this.clone().iuor(num);\r\n    return num.clone().iuor(this);\r\n  };\r\n\r\n  // And `num` with `this` in-place\r\n  BN.prototype.iuand = function iuand (num) {\r\n    // b = min-length(num, this)\r\n    var b;\r\n    if (this.length > num.length) {\r\n      b = num;\r\n    } else {\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = this.words[i] & num.words[i];\r\n    }\r\n\r\n    this.length = b.length;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.iand = function iand (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuand(num);\r\n  };\r\n\r\n  // And `num` with `this`\r\n  BN.prototype.and = function and (num) {\r\n    if (this.length > num.length) return this.clone().iand(num);\r\n    return num.clone().iand(this);\r\n  };\r\n\r\n  BN.prototype.uand = function uand (num) {\r\n    if (this.length > num.length) return this.clone().iuand(num);\r\n    return num.clone().iuand(this);\r\n  };\r\n\r\n  // Xor `num` with `this` in-place\r\n  BN.prototype.iuxor = function iuxor (num) {\r\n    // a.length > b.length\r\n    var a;\r\n    var b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = a.words[i] ^ b.words[i];\r\n    }\r\n\r\n    if (this !== a) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = a.length;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ixor = function ixor (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuxor(num);\r\n  };\r\n\r\n  // Xor `num` with `this`\r\n  BN.prototype.xor = function xor (num) {\r\n    if (this.length > num.length) return this.clone().ixor(num);\r\n    return num.clone().ixor(this);\r\n  };\r\n\r\n  BN.prototype.uxor = function uxor (num) {\r\n    if (this.length > num.length) return this.clone().iuxor(num);\r\n    return num.clone().iuxor(this);\r\n  };\r\n\r\n  // Not ``this`` with ``width`` bitwidth\r\n  BN.prototype.inotn = function inotn (width) {\r\n    assert(typeof width === 'number' && width >= 0);\r\n\r\n    var bytesNeeded = Math.ceil(width / 26) | 0;\r\n    var bitsLeft = width % 26;\r\n\r\n    // Extend the buffer with leading zeroes\r\n    this._expand(bytesNeeded);\r\n\r\n    if (bitsLeft > 0) {\r\n      bytesNeeded--;\r\n    }\r\n\r\n    // Handle complete words\r\n    for (var i = 0; i < bytesNeeded; i++) {\r\n      this.words[i] = ~this.words[i] & 0x3ffffff;\r\n    }\r\n\r\n    // Handle the residue\r\n    if (bitsLeft > 0) {\r\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\r\n    }\r\n\r\n    // And remove leading zeroes\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.notn = function notn (width) {\r\n    return this.clone().inotn(width);\r\n  };\r\n\r\n  // Set `bit` of `this`\r\n  BN.prototype.setn = function setn (bit, val) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n\r\n    var off = (bit / 26) | 0;\r\n    var wbit = bit % 26;\r\n\r\n    this._expand(off + 1);\r\n\r\n    if (val) {\r\n      this.words[off] = this.words[off] | (1 << wbit);\r\n    } else {\r\n      this.words[off] = this.words[off] & ~(1 << wbit);\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Add `num` to `this` in-place\r\n  BN.prototype.iadd = function iadd (num) {\r\n    var r;\r\n\r\n    // negative + positive\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      this.negative = 0;\r\n      r = this.isub(num);\r\n      this.negative ^= 1;\r\n      return this._normSign();\r\n\r\n    // positive + negative\r\n    } else if (this.negative === 0 && num.negative !== 0) {\r\n      num.negative = 0;\r\n      r = this.isub(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n    }\r\n\r\n    // a.length > b.length\r\n    var a, b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n\r\n    this.length = a.length;\r\n    if (carry !== 0) {\r\n      this.words[this.length] = carry;\r\n      this.length++;\r\n    // Copy the rest of the words\r\n    } else if (a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Add `num` to `this`\r\n  BN.prototype.add = function add (num) {\r\n    var res;\r\n    if (num.negative !== 0 && this.negative === 0) {\r\n      num.negative = 0;\r\n      res = this.sub(num);\r\n      num.negative ^= 1;\r\n      return res;\r\n    } else if (num.negative === 0 && this.negative !== 0) {\r\n      this.negative = 0;\r\n      res = num.sub(this);\r\n      this.negative = 1;\r\n      return res;\r\n    }\r\n\r\n    if (this.length > num.length) return this.clone().iadd(num);\r\n\r\n    return num.clone().iadd(this);\r\n  };\r\n\r\n  // Subtract `num` from `this` in-place\r\n  BN.prototype.isub = function isub (num) {\r\n    // this - (-num) = this + num\r\n    if (num.negative !== 0) {\r\n      num.negative = 0;\r\n      var r = this.iadd(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n\r\n    // -this - num = -(this + num)\r\n    } else if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iadd(num);\r\n      this.negative = 1;\r\n      return this._normSign();\r\n    }\r\n\r\n    // At this point both numbers are positive\r\n    var cmp = this.cmp(num);\r\n\r\n    // Optimization - zeroify\r\n    if (cmp === 0) {\r\n      this.negative = 0;\r\n      this.length = 1;\r\n      this.words[0] = 0;\r\n      return this;\r\n    }\r\n\r\n    // a > b\r\n    var a, b;\r\n    if (cmp > 0) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n\r\n    // Copy rest of the words\r\n    if (carry === 0 && i < a.length && a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = Math.max(this.length, i);\r\n\r\n    if (a !== this) {\r\n      this.negative = 1;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Subtract `num` from `this`\r\n  BN.prototype.sub = function sub (num) {\r\n    return this.clone().isub(num);\r\n  };\r\n\r\n  function smallMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    var len = (self.length + num.length) | 0;\r\n    out.length = len;\r\n    len = (len - 1) | 0;\r\n\r\n    // Peel one iteration (compiler can't do it, because of code complexity)\r\n    var a = self.words[0] | 0;\r\n    var b = num.words[0] | 0;\r\n    var r = a * b;\r\n\r\n    var lo = r & 0x3ffffff;\r\n    var carry = (r / 0x4000000) | 0;\r\n    out.words[0] = lo;\r\n\r\n    for (var k = 1; k < len; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = carry >>> 26;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = (k - j) | 0;\r\n        a = self.words[i] | 0;\r\n        b = num.words[j] | 0;\r\n        r = a * b + rword;\r\n        ncarry += (r / 0x4000000) | 0;\r\n        rword = r & 0x3ffffff;\r\n      }\r\n      out.words[k] = rword | 0;\r\n      carry = ncarry | 0;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry | 0;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out.strip();\r\n  }\r\n\r\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\r\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\r\n  // multiplication (like elliptic secp256k1).\r\n  var comb10MulTo = function comb10MulTo (self, num, out) {\r\n    var a = self.words;\r\n    var b = num.words;\r\n    var o = out.words;\r\n    var c = 0;\r\n    var lo;\r\n    var mid;\r\n    var hi;\r\n    var a0 = a[0] | 0;\r\n    var al0 = a0 & 0x1fff;\r\n    var ah0 = a0 >>> 13;\r\n    var a1 = a[1] | 0;\r\n    var al1 = a1 & 0x1fff;\r\n    var ah1 = a1 >>> 13;\r\n    var a2 = a[2] | 0;\r\n    var al2 = a2 & 0x1fff;\r\n    var ah2 = a2 >>> 13;\r\n    var a3 = a[3] | 0;\r\n    var al3 = a3 & 0x1fff;\r\n    var ah3 = a3 >>> 13;\r\n    var a4 = a[4] | 0;\r\n    var al4 = a4 & 0x1fff;\r\n    var ah4 = a4 >>> 13;\r\n    var a5 = a[5] | 0;\r\n    var al5 = a5 & 0x1fff;\r\n    var ah5 = a5 >>> 13;\r\n    var a6 = a[6] | 0;\r\n    var al6 = a6 & 0x1fff;\r\n    var ah6 = a6 >>> 13;\r\n    var a7 = a[7] | 0;\r\n    var al7 = a7 & 0x1fff;\r\n    var ah7 = a7 >>> 13;\r\n    var a8 = a[8] | 0;\r\n    var al8 = a8 & 0x1fff;\r\n    var ah8 = a8 >>> 13;\r\n    var a9 = a[9] | 0;\r\n    var al9 = a9 & 0x1fff;\r\n    var ah9 = a9 >>> 13;\r\n    var b0 = b[0] | 0;\r\n    var bl0 = b0 & 0x1fff;\r\n    var bh0 = b0 >>> 13;\r\n    var b1 = b[1] | 0;\r\n    var bl1 = b1 & 0x1fff;\r\n    var bh1 = b1 >>> 13;\r\n    var b2 = b[2] | 0;\r\n    var bl2 = b2 & 0x1fff;\r\n    var bh2 = b2 >>> 13;\r\n    var b3 = b[3] | 0;\r\n    var bl3 = b3 & 0x1fff;\r\n    var bh3 = b3 >>> 13;\r\n    var b4 = b[4] | 0;\r\n    var bl4 = b4 & 0x1fff;\r\n    var bh4 = b4 >>> 13;\r\n    var b5 = b[5] | 0;\r\n    var bl5 = b5 & 0x1fff;\r\n    var bh5 = b5 >>> 13;\r\n    var b6 = b[6] | 0;\r\n    var bl6 = b6 & 0x1fff;\r\n    var bh6 = b6 >>> 13;\r\n    var b7 = b[7] | 0;\r\n    var bl7 = b7 & 0x1fff;\r\n    var bh7 = b7 >>> 13;\r\n    var b8 = b[8] | 0;\r\n    var bl8 = b8 & 0x1fff;\r\n    var bh8 = b8 >>> 13;\r\n    var b9 = b[9] | 0;\r\n    var bl9 = b9 & 0x1fff;\r\n    var bh9 = b9 >>> 13;\r\n\r\n    out.negative = self.negative ^ num.negative;\r\n    out.length = 19;\r\n    /* k = 0 */\r\n    lo = Math.imul(al0, bl0);\r\n    mid = Math.imul(al0, bh0);\r\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\r\n    hi = Math.imul(ah0, bh0);\r\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\r\n    w0 &= 0x3ffffff;\r\n    /* k = 1 */\r\n    lo = Math.imul(al1, bl0);\r\n    mid = Math.imul(al1, bh0);\r\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\r\n    hi = Math.imul(ah1, bh0);\r\n    lo = (lo + Math.imul(al0, bl1)) | 0;\r\n    mid = (mid + Math.imul(al0, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\r\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\r\n    w1 &= 0x3ffffff;\r\n    /* k = 2 */\r\n    lo = Math.imul(al2, bl0);\r\n    mid = Math.imul(al2, bh0);\r\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\r\n    hi = Math.imul(ah2, bh0);\r\n    lo = (lo + Math.imul(al1, bl1)) | 0;\r\n    mid = (mid + Math.imul(al1, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\r\n    lo = (lo + Math.imul(al0, bl2)) | 0;\r\n    mid = (mid + Math.imul(al0, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\r\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\r\n    w2 &= 0x3ffffff;\r\n    /* k = 3 */\r\n    lo = Math.imul(al3, bl0);\r\n    mid = Math.imul(al3, bh0);\r\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\r\n    hi = Math.imul(ah3, bh0);\r\n    lo = (lo + Math.imul(al2, bl1)) | 0;\r\n    mid = (mid + Math.imul(al2, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\r\n    lo = (lo + Math.imul(al1, bl2)) | 0;\r\n    mid = (mid + Math.imul(al1, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\r\n    lo = (lo + Math.imul(al0, bl3)) | 0;\r\n    mid = (mid + Math.imul(al0, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\r\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\r\n    w3 &= 0x3ffffff;\r\n    /* k = 4 */\r\n    lo = Math.imul(al4, bl0);\r\n    mid = Math.imul(al4, bh0);\r\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\r\n    hi = Math.imul(ah4, bh0);\r\n    lo = (lo + Math.imul(al3, bl1)) | 0;\r\n    mid = (mid + Math.imul(al3, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\r\n    lo = (lo + Math.imul(al2, bl2)) | 0;\r\n    mid = (mid + Math.imul(al2, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\r\n    lo = (lo + Math.imul(al1, bl3)) | 0;\r\n    mid = (mid + Math.imul(al1, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\r\n    lo = (lo + Math.imul(al0, bl4)) | 0;\r\n    mid = (mid + Math.imul(al0, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\r\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\r\n    w4 &= 0x3ffffff;\r\n    /* k = 5 */\r\n    lo = Math.imul(al5, bl0);\r\n    mid = Math.imul(al5, bh0);\r\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\r\n    hi = Math.imul(ah5, bh0);\r\n    lo = (lo + Math.imul(al4, bl1)) | 0;\r\n    mid = (mid + Math.imul(al4, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\r\n    lo = (lo + Math.imul(al3, bl2)) | 0;\r\n    mid = (mid + Math.imul(al3, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\r\n    lo = (lo + Math.imul(al2, bl3)) | 0;\r\n    mid = (mid + Math.imul(al2, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\r\n    lo = (lo + Math.imul(al1, bl4)) | 0;\r\n    mid = (mid + Math.imul(al1, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\r\n    lo = (lo + Math.imul(al0, bl5)) | 0;\r\n    mid = (mid + Math.imul(al0, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\r\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\r\n    w5 &= 0x3ffffff;\r\n    /* k = 6 */\r\n    lo = Math.imul(al6, bl0);\r\n    mid = Math.imul(al6, bh0);\r\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\r\n    hi = Math.imul(ah6, bh0);\r\n    lo = (lo + Math.imul(al5, bl1)) | 0;\r\n    mid = (mid + Math.imul(al5, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\r\n    lo = (lo + Math.imul(al4, bl2)) | 0;\r\n    mid = (mid + Math.imul(al4, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\r\n    lo = (lo + Math.imul(al3, bl3)) | 0;\r\n    mid = (mid + Math.imul(al3, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\r\n    lo = (lo + Math.imul(al2, bl4)) | 0;\r\n    mid = (mid + Math.imul(al2, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\r\n    lo = (lo + Math.imul(al1, bl5)) | 0;\r\n    mid = (mid + Math.imul(al1, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\r\n    lo = (lo + Math.imul(al0, bl6)) | 0;\r\n    mid = (mid + Math.imul(al0, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\r\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\r\n    w6 &= 0x3ffffff;\r\n    /* k = 7 */\r\n    lo = Math.imul(al7, bl0);\r\n    mid = Math.imul(al7, bh0);\r\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\r\n    hi = Math.imul(ah7, bh0);\r\n    lo = (lo + Math.imul(al6, bl1)) | 0;\r\n    mid = (mid + Math.imul(al6, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\r\n    lo = (lo + Math.imul(al5, bl2)) | 0;\r\n    mid = (mid + Math.imul(al5, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\r\n    lo = (lo + Math.imul(al4, bl3)) | 0;\r\n    mid = (mid + Math.imul(al4, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\r\n    lo = (lo + Math.imul(al3, bl4)) | 0;\r\n    mid = (mid + Math.imul(al3, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\r\n    lo = (lo + Math.imul(al2, bl5)) | 0;\r\n    mid = (mid + Math.imul(al2, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\r\n    lo = (lo + Math.imul(al1, bl6)) | 0;\r\n    mid = (mid + Math.imul(al1, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\r\n    lo = (lo + Math.imul(al0, bl7)) | 0;\r\n    mid = (mid + Math.imul(al0, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\r\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\r\n    w7 &= 0x3ffffff;\r\n    /* k = 8 */\r\n    lo = Math.imul(al8, bl0);\r\n    mid = Math.imul(al8, bh0);\r\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\r\n    hi = Math.imul(ah8, bh0);\r\n    lo = (lo + Math.imul(al7, bl1)) | 0;\r\n    mid = (mid + Math.imul(al7, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\r\n    lo = (lo + Math.imul(al6, bl2)) | 0;\r\n    mid = (mid + Math.imul(al6, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\r\n    lo = (lo + Math.imul(al5, bl3)) | 0;\r\n    mid = (mid + Math.imul(al5, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\r\n    lo = (lo + Math.imul(al4, bl4)) | 0;\r\n    mid = (mid + Math.imul(al4, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\r\n    lo = (lo + Math.imul(al3, bl5)) | 0;\r\n    mid = (mid + Math.imul(al3, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\r\n    lo = (lo + Math.imul(al2, bl6)) | 0;\r\n    mid = (mid + Math.imul(al2, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\r\n    lo = (lo + Math.imul(al1, bl7)) | 0;\r\n    mid = (mid + Math.imul(al1, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\r\n    lo = (lo + Math.imul(al0, bl8)) | 0;\r\n    mid = (mid + Math.imul(al0, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\r\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\r\n    w8 &= 0x3ffffff;\r\n    /* k = 9 */\r\n    lo = Math.imul(al9, bl0);\r\n    mid = Math.imul(al9, bh0);\r\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\r\n    hi = Math.imul(ah9, bh0);\r\n    lo = (lo + Math.imul(al8, bl1)) | 0;\r\n    mid = (mid + Math.imul(al8, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\r\n    lo = (lo + Math.imul(al7, bl2)) | 0;\r\n    mid = (mid + Math.imul(al7, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\r\n    lo = (lo + Math.imul(al6, bl3)) | 0;\r\n    mid = (mid + Math.imul(al6, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\r\n    lo = (lo + Math.imul(al5, bl4)) | 0;\r\n    mid = (mid + Math.imul(al5, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\r\n    lo = (lo + Math.imul(al4, bl5)) | 0;\r\n    mid = (mid + Math.imul(al4, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\r\n    lo = (lo + Math.imul(al3, bl6)) | 0;\r\n    mid = (mid + Math.imul(al3, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\r\n    lo = (lo + Math.imul(al2, bl7)) | 0;\r\n    mid = (mid + Math.imul(al2, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\r\n    lo = (lo + Math.imul(al1, bl8)) | 0;\r\n    mid = (mid + Math.imul(al1, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\r\n    lo = (lo + Math.imul(al0, bl9)) | 0;\r\n    mid = (mid + Math.imul(al0, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\r\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\r\n    w9 &= 0x3ffffff;\r\n    /* k = 10 */\r\n    lo = Math.imul(al9, bl1);\r\n    mid = Math.imul(al9, bh1);\r\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\r\n    hi = Math.imul(ah9, bh1);\r\n    lo = (lo + Math.imul(al8, bl2)) | 0;\r\n    mid = (mid + Math.imul(al8, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\r\n    lo = (lo + Math.imul(al7, bl3)) | 0;\r\n    mid = (mid + Math.imul(al7, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\r\n    lo = (lo + Math.imul(al6, bl4)) | 0;\r\n    mid = (mid + Math.imul(al6, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\r\n    lo = (lo + Math.imul(al5, bl5)) | 0;\r\n    mid = (mid + Math.imul(al5, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\r\n    lo = (lo + Math.imul(al4, bl6)) | 0;\r\n    mid = (mid + Math.imul(al4, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\r\n    lo = (lo + Math.imul(al3, bl7)) | 0;\r\n    mid = (mid + Math.imul(al3, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\r\n    lo = (lo + Math.imul(al2, bl8)) | 0;\r\n    mid = (mid + Math.imul(al2, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\r\n    lo = (lo + Math.imul(al1, bl9)) | 0;\r\n    mid = (mid + Math.imul(al1, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\r\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\r\n    w10 &= 0x3ffffff;\r\n    /* k = 11 */\r\n    lo = Math.imul(al9, bl2);\r\n    mid = Math.imul(al9, bh2);\r\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\r\n    hi = Math.imul(ah9, bh2);\r\n    lo = (lo + Math.imul(al8, bl3)) | 0;\r\n    mid = (mid + Math.imul(al8, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\r\n    lo = (lo + Math.imul(al7, bl4)) | 0;\r\n    mid = (mid + Math.imul(al7, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\r\n    lo = (lo + Math.imul(al6, bl5)) | 0;\r\n    mid = (mid + Math.imul(al6, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\r\n    lo = (lo + Math.imul(al5, bl6)) | 0;\r\n    mid = (mid + Math.imul(al5, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\r\n    lo = (lo + Math.imul(al4, bl7)) | 0;\r\n    mid = (mid + Math.imul(al4, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\r\n    lo = (lo + Math.imul(al3, bl8)) | 0;\r\n    mid = (mid + Math.imul(al3, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\r\n    lo = (lo + Math.imul(al2, bl9)) | 0;\r\n    mid = (mid + Math.imul(al2, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\r\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\r\n    w11 &= 0x3ffffff;\r\n    /* k = 12 */\r\n    lo = Math.imul(al9, bl3);\r\n    mid = Math.imul(al9, bh3);\r\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\r\n    hi = Math.imul(ah9, bh3);\r\n    lo = (lo + Math.imul(al8, bl4)) | 0;\r\n    mid = (mid + Math.imul(al8, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\r\n    lo = (lo + Math.imul(al7, bl5)) | 0;\r\n    mid = (mid + Math.imul(al7, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\r\n    lo = (lo + Math.imul(al6, bl6)) | 0;\r\n    mid = (mid + Math.imul(al6, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\r\n    lo = (lo + Math.imul(al5, bl7)) | 0;\r\n    mid = (mid + Math.imul(al5, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\r\n    lo = (lo + Math.imul(al4, bl8)) | 0;\r\n    mid = (mid + Math.imul(al4, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\r\n    lo = (lo + Math.imul(al3, bl9)) | 0;\r\n    mid = (mid + Math.imul(al3, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\r\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\r\n    w12 &= 0x3ffffff;\r\n    /* k = 13 */\r\n    lo = Math.imul(al9, bl4);\r\n    mid = Math.imul(al9, bh4);\r\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\r\n    hi = Math.imul(ah9, bh4);\r\n    lo = (lo + Math.imul(al8, bl5)) | 0;\r\n    mid = (mid + Math.imul(al8, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\r\n    lo = (lo + Math.imul(al7, bl6)) | 0;\r\n    mid = (mid + Math.imul(al7, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\r\n    lo = (lo + Math.imul(al6, bl7)) | 0;\r\n    mid = (mid + Math.imul(al6, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\r\n    lo = (lo + Math.imul(al5, bl8)) | 0;\r\n    mid = (mid + Math.imul(al5, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\r\n    lo = (lo + Math.imul(al4, bl9)) | 0;\r\n    mid = (mid + Math.imul(al4, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\r\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\r\n    w13 &= 0x3ffffff;\r\n    /* k = 14 */\r\n    lo = Math.imul(al9, bl5);\r\n    mid = Math.imul(al9, bh5);\r\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\r\n    hi = Math.imul(ah9, bh5);\r\n    lo = (lo + Math.imul(al8, bl6)) | 0;\r\n    mid = (mid + Math.imul(al8, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\r\n    lo = (lo + Math.imul(al7, bl7)) | 0;\r\n    mid = (mid + Math.imul(al7, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\r\n    lo = (lo + Math.imul(al6, bl8)) | 0;\r\n    mid = (mid + Math.imul(al6, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\r\n    lo = (lo + Math.imul(al5, bl9)) | 0;\r\n    mid = (mid + Math.imul(al5, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\r\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\r\n    w14 &= 0x3ffffff;\r\n    /* k = 15 */\r\n    lo = Math.imul(al9, bl6);\r\n    mid = Math.imul(al9, bh6);\r\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\r\n    hi = Math.imul(ah9, bh6);\r\n    lo = (lo + Math.imul(al8, bl7)) | 0;\r\n    mid = (mid + Math.imul(al8, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\r\n    lo = (lo + Math.imul(al7, bl8)) | 0;\r\n    mid = (mid + Math.imul(al7, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\r\n    lo = (lo + Math.imul(al6, bl9)) | 0;\r\n    mid = (mid + Math.imul(al6, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\r\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\r\n    w15 &= 0x3ffffff;\r\n    /* k = 16 */\r\n    lo = Math.imul(al9, bl7);\r\n    mid = Math.imul(al9, bh7);\r\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\r\n    hi = Math.imul(ah9, bh7);\r\n    lo = (lo + Math.imul(al8, bl8)) | 0;\r\n    mid = (mid + Math.imul(al8, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\r\n    lo = (lo + Math.imul(al7, bl9)) | 0;\r\n    mid = (mid + Math.imul(al7, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\r\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\r\n    w16 &= 0x3ffffff;\r\n    /* k = 17 */\r\n    lo = Math.imul(al9, bl8);\r\n    mid = Math.imul(al9, bh8);\r\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\r\n    hi = Math.imul(ah9, bh8);\r\n    lo = (lo + Math.imul(al8, bl9)) | 0;\r\n    mid = (mid + Math.imul(al8, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\r\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\r\n    w17 &= 0x3ffffff;\r\n    /* k = 18 */\r\n    lo = Math.imul(al9, bl9);\r\n    mid = Math.imul(al9, bh9);\r\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\r\n    hi = Math.imul(ah9, bh9);\r\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\r\n    w18 &= 0x3ffffff;\r\n    o[0] = w0;\r\n    o[1] = w1;\r\n    o[2] = w2;\r\n    o[3] = w3;\r\n    o[4] = w4;\r\n    o[5] = w5;\r\n    o[6] = w6;\r\n    o[7] = w7;\r\n    o[8] = w8;\r\n    o[9] = w9;\r\n    o[10] = w10;\r\n    o[11] = w11;\r\n    o[12] = w12;\r\n    o[13] = w13;\r\n    o[14] = w14;\r\n    o[15] = w15;\r\n    o[16] = w16;\r\n    o[17] = w17;\r\n    o[18] = w18;\r\n    if (c !== 0) {\r\n      o[19] = c;\r\n      out.length++;\r\n    }\r\n    return out;\r\n  };\r\n\r\n  // Polyfill comb\r\n  if (!Math.imul) {\r\n    comb10MulTo = smallMulTo;\r\n  }\r\n\r\n  function bigMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    out.length = self.length + num.length;\r\n\r\n    var carry = 0;\r\n    var hncarry = 0;\r\n    for (var k = 0; k < out.length - 1; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = hncarry;\r\n      hncarry = 0;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = k - j;\r\n        var a = self.words[i] | 0;\r\n        var b = num.words[j] | 0;\r\n        var r = a * b;\r\n\r\n        var lo = r & 0x3ffffff;\r\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\r\n        lo = (lo + rword) | 0;\r\n        rword = lo & 0x3ffffff;\r\n        ncarry = (ncarry + (lo >>> 26)) | 0;\r\n\r\n        hncarry += ncarry >>> 26;\r\n        ncarry &= 0x3ffffff;\r\n      }\r\n      out.words[k] = rword;\r\n      carry = ncarry;\r\n      ncarry = hncarry;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out.strip();\r\n  }\r\n\r\n  function jumboMulTo (self, num, out) {\r\n    var fftm = new FFTM();\r\n    return fftm.mulp(self, num, out);\r\n  }\r\n\r\n  BN.prototype.mulTo = function mulTo (num, out) {\r\n    var res;\r\n    var len = this.length + num.length;\r\n    if (this.length === 10 && num.length === 10) {\r\n      res = comb10MulTo(this, num, out);\r\n    } else if (len < 63) {\r\n      res = smallMulTo(this, num, out);\r\n    } else if (len < 1024) {\r\n      res = bigMulTo(this, num, out);\r\n    } else {\r\n      res = jumboMulTo(this, num, out);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Cooley-Tukey algorithm for FFT\r\n  // slightly revisited to rely on looping instead of recursion\r\n\r\n  function FFTM (x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  FFTM.prototype.makeRBT = function makeRBT (N) {\r\n    var t = new Array(N);\r\n    var l = BN.prototype._countBits(N) - 1;\r\n    for (var i = 0; i < N; i++) {\r\n      t[i] = this.revBin(i, l, N);\r\n    }\r\n\r\n    return t;\r\n  };\r\n\r\n  // Returns binary-reversed representation of `x`\r\n  FFTM.prototype.revBin = function revBin (x, l, N) {\r\n    if (x === 0 || x === N - 1) return x;\r\n\r\n    var rb = 0;\r\n    for (var i = 0; i < l; i++) {\r\n      rb |= (x & 1) << (l - i - 1);\r\n      x >>= 1;\r\n    }\r\n\r\n    return rb;\r\n  };\r\n\r\n  // Performs \"tweedling\" phase, therefore 'emulating'\r\n  // behaviour of the recursive algorithm\r\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\r\n    for (var i = 0; i < N; i++) {\r\n      rtws[i] = rws[rbt[i]];\r\n      itws[i] = iws[rbt[i]];\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\r\n    this.permute(rbt, rws, iws, rtws, itws, N);\r\n\r\n    for (var s = 1; s < N; s <<= 1) {\r\n      var l = s << 1;\r\n\r\n      var rtwdf = Math.cos(2 * Math.PI / l);\r\n      var itwdf = Math.sin(2 * Math.PI / l);\r\n\r\n      for (var p = 0; p < N; p += l) {\r\n        var rtwdf_ = rtwdf;\r\n        var itwdf_ = itwdf;\r\n\r\n        for (var j = 0; j < s; j++) {\r\n          var re = rtws[p + j];\r\n          var ie = itws[p + j];\r\n\r\n          var ro = rtws[p + j + s];\r\n          var io = itws[p + j + s];\r\n\r\n          var rx = rtwdf_ * ro - itwdf_ * io;\r\n\r\n          io = rtwdf_ * io + itwdf_ * ro;\r\n          ro = rx;\r\n\r\n          rtws[p + j] = re + ro;\r\n          itws[p + j] = ie + io;\r\n\r\n          rtws[p + j + s] = re - ro;\r\n          itws[p + j + s] = ie - io;\r\n\r\n          /* jshint maxdepth : false */\r\n          if (j !== l) {\r\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\r\n\r\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\r\n            rtwdf_ = rx;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\r\n    var N = Math.max(m, n) | 1;\r\n    var odd = N & 1;\r\n    var i = 0;\r\n    for (N = N / 2 | 0; N; N = N >>> 1) {\r\n      i++;\r\n    }\r\n\r\n    return 1 << i + 1 + odd;\r\n  };\r\n\r\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\r\n    if (N <= 1) return;\r\n\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var t = rws[i];\r\n\r\n      rws[i] = rws[N - i - 1];\r\n      rws[N - i - 1] = t;\r\n\r\n      t = iws[i];\r\n\r\n      iws[i] = -iws[N - i - 1];\r\n      iws[N - i - 1] = -t;\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\r\n        Math.round(ws[2 * i] / N) +\r\n        carry;\r\n\r\n      ws[i] = w & 0x3ffffff;\r\n\r\n      if (w < 0x4000000) {\r\n        carry = 0;\r\n      } else {\r\n        carry = w / 0x4000000 | 0;\r\n      }\r\n    }\r\n\r\n    return ws;\r\n  };\r\n\r\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < len; i++) {\r\n      carry = carry + (ws[i] | 0);\r\n\r\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\r\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\r\n    }\r\n\r\n    // Pad with zeroes\r\n    for (i = 2 * len; i < N; ++i) {\r\n      rws[i] = 0;\r\n    }\r\n\r\n    assert(carry === 0);\r\n    assert((carry & ~0x1fff) === 0);\r\n  };\r\n\r\n  FFTM.prototype.stub = function stub (N) {\r\n    var ph = new Array(N);\r\n    for (var i = 0; i < N; i++) {\r\n      ph[i] = 0;\r\n    }\r\n\r\n    return ph;\r\n  };\r\n\r\n  FFTM.prototype.mulp = function mulp (x, y, out) {\r\n    var N = 2 * this.guessLen13b(x.length, y.length);\r\n\r\n    var rbt = this.makeRBT(N);\r\n\r\n    var _ = this.stub(N);\r\n\r\n    var rws = new Array(N);\r\n    var rwst = new Array(N);\r\n    var iwst = new Array(N);\r\n\r\n    var nrws = new Array(N);\r\n    var nrwst = new Array(N);\r\n    var niwst = new Array(N);\r\n\r\n    var rmws = out.words;\r\n    rmws.length = N;\r\n\r\n    this.convert13b(x.words, x.length, rws, N);\r\n    this.convert13b(y.words, y.length, nrws, N);\r\n\r\n    this.transform(rws, _, rwst, iwst, N, rbt);\r\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\r\n\r\n    for (var i = 0; i < N; i++) {\r\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\r\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\r\n      rwst[i] = rx;\r\n    }\r\n\r\n    this.conjugate(rwst, iwst, N);\r\n    this.transform(rwst, iwst, rmws, _, N, rbt);\r\n    this.conjugate(rmws, _, N);\r\n    this.normalize13b(rmws, N);\r\n\r\n    out.negative = x.negative ^ y.negative;\r\n    out.length = x.length + y.length;\r\n    return out.strip();\r\n  };\r\n\r\n  // Multiply `this` by `num`\r\n  BN.prototype.mul = function mul (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return this.mulTo(num, out);\r\n  };\r\n\r\n  // Multiply employing FFT\r\n  BN.prototype.mulf = function mulf (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return jumboMulTo(this, num, out);\r\n  };\r\n\r\n  // In-place Multiplication\r\n  BN.prototype.imul = function imul (num) {\r\n    return this.clone().mulTo(num, this);\r\n  };\r\n\r\n  BN.prototype.imuln = function imuln (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n\r\n    // Carry\r\n    var carry = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var w = (this.words[i] | 0) * num;\r\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\r\n      carry >>= 26;\r\n      carry += (w / 0x4000000) | 0;\r\n      // NOTE: lo is 27bit maximum\r\n      carry += lo >>> 26;\r\n      this.words[i] = lo & 0x3ffffff;\r\n    }\r\n\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.muln = function muln (num) {\r\n    return this.clone().imuln(num);\r\n  };\r\n\r\n  // `this` * `this`\r\n  BN.prototype.sqr = function sqr () {\r\n    return this.mul(this);\r\n  };\r\n\r\n  // `this` * `this` in-place\r\n  BN.prototype.isqr = function isqr () {\r\n    return this.imul(this.clone());\r\n  };\r\n\r\n  // Math.pow(`this`, `num`)\r\n  BN.prototype.pow = function pow (num) {\r\n    var w = toBitArray(num);\r\n    if (w.length === 0) return new BN(1);\r\n\r\n    // Skip leading zeroes\r\n    var res = this;\r\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\r\n      if (w[i] !== 0) break;\r\n    }\r\n\r\n    if (++i < w.length) {\r\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\r\n        if (w[i] === 0) continue;\r\n\r\n        res = res.mul(q);\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Shift-left in-place\r\n  BN.prototype.iushln = function iushln (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\r\n    var i;\r\n\r\n    if (r !== 0) {\r\n      var carry = 0;\r\n\r\n      for (i = 0; i < this.length; i++) {\r\n        var newCarry = this.words[i] & carryMask;\r\n        var c = ((this.words[i] | 0) - newCarry) << r;\r\n        this.words[i] = c | carry;\r\n        carry = newCarry >>> (26 - r);\r\n      }\r\n\r\n      if (carry) {\r\n        this.words[i] = carry;\r\n        this.length++;\r\n      }\r\n    }\r\n\r\n    if (s !== 0) {\r\n      for (i = this.length - 1; i >= 0; i--) {\r\n        this.words[i + s] = this.words[i];\r\n      }\r\n\r\n      for (i = 0; i < s; i++) {\r\n        this.words[i] = 0;\r\n      }\r\n\r\n      this.length += s;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ishln = function ishln (bits) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushln(bits);\r\n  };\r\n\r\n  // Shift-right in-place\r\n  // NOTE: `hint` is a lowest bit before trailing zeroes\r\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\r\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var h;\r\n    if (hint) {\r\n      h = (hint - (hint % 26)) / 26;\r\n    } else {\r\n      h = 0;\r\n    }\r\n\r\n    var r = bits % 26;\r\n    var s = Math.min((bits - r) / 26, this.length);\r\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n    var maskedWords = extended;\r\n\r\n    h -= s;\r\n    h = Math.max(0, h);\r\n\r\n    // Extended mode, copy masked part\r\n    if (maskedWords) {\r\n      for (var i = 0; i < s; i++) {\r\n        maskedWords.words[i] = this.words[i];\r\n      }\r\n      maskedWords.length = s;\r\n    }\r\n\r\n    if (s === 0) {\r\n      // No-op, we should not move anything at all\r\n    } else if (this.length > s) {\r\n      this.length -= s;\r\n      for (i = 0; i < this.length; i++) {\r\n        this.words[i] = this.words[i + s];\r\n      }\r\n    } else {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\r\n      var word = this.words[i] | 0;\r\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\r\n      carry = word & mask;\r\n    }\r\n\r\n    // Push carried bits as a mask\r\n    if (maskedWords && carry !== 0) {\r\n      maskedWords.words[maskedWords.length++] = carry;\r\n    }\r\n\r\n    if (this.length === 0) {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushrn(bits, hint, extended);\r\n  };\r\n\r\n  // Shift-left\r\n  BN.prototype.shln = function shln (bits) {\r\n    return this.clone().ishln(bits);\r\n  };\r\n\r\n  BN.prototype.ushln = function ushln (bits) {\r\n    return this.clone().iushln(bits);\r\n  };\r\n\r\n  // Shift-right\r\n  BN.prototype.shrn = function shrn (bits) {\r\n    return this.clone().ishrn(bits);\r\n  };\r\n\r\n  BN.prototype.ushrn = function ushrn (bits) {\r\n    return this.clone().iushrn(bits);\r\n  };\r\n\r\n  // Test if n bit is set\r\n  BN.prototype.testn = function testn (bit) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) return false;\r\n\r\n    // Check bit and return\r\n    var w = this.words[s];\r\n\r\n    return !!(w & q);\r\n  };\r\n\r\n  // Return only lowers bits of number (in-place)\r\n  BN.prototype.imaskn = function imaskn (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n\r\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\r\n\r\n    if (this.length <= s) {\r\n      return this;\r\n    }\r\n\r\n    if (r !== 0) {\r\n      s++;\r\n    }\r\n    this.length = Math.min(s, this.length);\r\n\r\n    if (r !== 0) {\r\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n      this.words[this.length - 1] &= mask;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Return only lowers bits of number\r\n  BN.prototype.maskn = function maskn (bits) {\r\n    return this.clone().imaskn(bits);\r\n  };\r\n\r\n  // Add plain number `num` to `this`\r\n  BN.prototype.iaddn = function iaddn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.isubn(-num);\r\n\r\n    // Possible sign change\r\n    if (this.negative !== 0) {\r\n      if (this.length === 1 && (this.words[0] | 0) < num) {\r\n        this.words[0] = num - (this.words[0] | 0);\r\n        this.negative = 0;\r\n        return this;\r\n      }\r\n\r\n      this.negative = 0;\r\n      this.isubn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    // Add without checks\r\n    return this._iaddn(num);\r\n  };\r\n\r\n  BN.prototype._iaddn = function _iaddn (num) {\r\n    this.words[0] += num;\r\n\r\n    // Carry\r\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\r\n      this.words[i] -= 0x4000000;\r\n      if (i === this.length - 1) {\r\n        this.words[i + 1] = 1;\r\n      } else {\r\n        this.words[i + 1]++;\r\n      }\r\n    }\r\n    this.length = Math.max(this.length, i + 1);\r\n\r\n    return this;\r\n  };\r\n\r\n  // Subtract plain number `num` from `this`\r\n  BN.prototype.isubn = function isubn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.iaddn(-num);\r\n\r\n    if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iaddn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    this.words[0] -= num;\r\n\r\n    if (this.length === 1 && this.words[0] < 0) {\r\n      this.words[0] = -this.words[0];\r\n      this.negative = 1;\r\n    } else {\r\n      // Carry\r\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\r\n        this.words[i] += 0x4000000;\r\n        this.words[i + 1] -= 1;\r\n      }\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.addn = function addn (num) {\r\n    return this.clone().iaddn(num);\r\n  };\r\n\r\n  BN.prototype.subn = function subn (num) {\r\n    return this.clone().isubn(num);\r\n  };\r\n\r\n  BN.prototype.iabs = function iabs () {\r\n    this.negative = 0;\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.abs = function abs () {\r\n    return this.clone().iabs();\r\n  };\r\n\r\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\r\n    var len = num.length + shift;\r\n    var i;\r\n\r\n    this._expand(len);\r\n\r\n    var w;\r\n    var carry = 0;\r\n    for (i = 0; i < num.length; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      var right = (num.words[i] | 0) * mul;\r\n      w -= right & 0x3ffffff;\r\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n    for (; i < this.length - shift; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n\r\n    if (carry === 0) return this.strip();\r\n\r\n    // Subtraction overflow\r\n    assert(carry === -1);\r\n    carry = 0;\r\n    for (i = 0; i < this.length; i++) {\r\n      w = -(this.words[i] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i] = w & 0x3ffffff;\r\n    }\r\n    this.negative = 1;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\r\n    var shift = this.length - num.length;\r\n\r\n    var a = this.clone();\r\n    var b = num;\r\n\r\n    // Normalize\r\n    var bhi = b.words[b.length - 1] | 0;\r\n    var bhiBits = this._countBits(bhi);\r\n    shift = 26 - bhiBits;\r\n    if (shift !== 0) {\r\n      b = b.ushln(shift);\r\n      a.iushln(shift);\r\n      bhi = b.words[b.length - 1] | 0;\r\n    }\r\n\r\n    // Initialize quotient\r\n    var m = a.length - b.length;\r\n    var q;\r\n\r\n    if (mode !== 'mod') {\r\n      q = new BN(null);\r\n      q.length = m + 1;\r\n      q.words = new Array(q.length);\r\n      for (var i = 0; i < q.length; i++) {\r\n        q.words[i] = 0;\r\n      }\r\n    }\r\n\r\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\r\n    if (diff.negative === 0) {\r\n      a = diff;\r\n      if (q) {\r\n        q.words[m] = 1;\r\n      }\r\n    }\r\n\r\n    for (var j = m - 1; j >= 0; j--) {\r\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\r\n        (a.words[b.length + j - 1] | 0);\r\n\r\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\r\n      // (0x7ffffff)\r\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\r\n\r\n      a._ishlnsubmul(b, qj, j);\r\n      while (a.negative !== 0) {\r\n        qj--;\r\n        a.negative = 0;\r\n        a._ishlnsubmul(b, 1, j);\r\n        if (!a.isZero()) {\r\n          a.negative ^= 1;\r\n        }\r\n      }\r\n      if (q) {\r\n        q.words[j] = qj;\r\n      }\r\n    }\r\n    if (q) {\r\n      q.strip();\r\n    }\r\n    a.strip();\r\n\r\n    // Denormalize\r\n    if (mode !== 'div' && shift !== 0) {\r\n      a.iushrn(shift);\r\n    }\r\n\r\n    return {\r\n      div: q || null,\r\n      mod: a\r\n    };\r\n  };\r\n\r\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\r\n  //       to `div` to request div only, or be absent to\r\n  //       request both div & mod\r\n  //       2) `positive` is true if unsigned mod is requested\r\n  BN.prototype.divmod = function divmod (num, mode, positive) {\r\n    assert(!num.isZero());\r\n\r\n    if (this.isZero()) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: new BN(0)\r\n      };\r\n    }\r\n\r\n    var div, mod, res;\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      res = this.neg().divmod(num, mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.iadd(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    if (this.negative === 0 && num.negative !== 0) {\r\n      res = this.divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: res.mod\r\n      };\r\n    }\r\n\r\n    if ((this.negative & num.negative) !== 0) {\r\n      res = this.neg().divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.isub(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: res.div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    // Both numbers are positive at this point\r\n\r\n    // Strip both numbers to approximate shift value\r\n    if (num.length > this.length || this.cmp(num) < 0) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: this\r\n      };\r\n    }\r\n\r\n    // Very short reduction\r\n    if (num.length === 1) {\r\n      if (mode === 'div') {\r\n        return {\r\n          div: this.divn(num.words[0]),\r\n          mod: null\r\n        };\r\n      }\r\n\r\n      if (mode === 'mod') {\r\n        return {\r\n          div: null,\r\n          mod: new BN(this.modn(num.words[0]))\r\n        };\r\n      }\r\n\r\n      return {\r\n        div: this.divn(num.words[0]),\r\n        mod: new BN(this.modn(num.words[0]))\r\n      };\r\n    }\r\n\r\n    return this._wordDiv(num, mode);\r\n  };\r\n\r\n  // Find `this` / `num`\r\n  BN.prototype.div = function div (num) {\r\n    return this.divmod(num, 'div', false).div;\r\n  };\r\n\r\n  // Find `this` % `num`\r\n  BN.prototype.mod = function mod (num) {\r\n    return this.divmod(num, 'mod', false).mod;\r\n  };\r\n\r\n  BN.prototype.umod = function umod (num) {\r\n    return this.divmod(num, 'mod', true).mod;\r\n  };\r\n\r\n  // Find Round(`this` / `num`)\r\n  BN.prototype.divRound = function divRound (num) {\r\n    var dm = this.divmod(num);\r\n\r\n    // Fast case - exact division\r\n    if (dm.mod.isZero()) return dm.div;\r\n\r\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\r\n\r\n    var half = num.ushrn(1);\r\n    var r2 = num.andln(1);\r\n    var cmp = mod.cmp(half);\r\n\r\n    // Round down\r\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\r\n\r\n    // Round up\r\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\r\n  };\r\n\r\n  BN.prototype.modn = function modn (num) {\r\n    assert(num <= 0x3ffffff);\r\n    var p = (1 << 26) % num;\r\n\r\n    var acc = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      acc = (p * acc + (this.words[i] | 0)) % num;\r\n    }\r\n\r\n    return acc;\r\n  };\r\n\r\n  // In-place division by number\r\n  BN.prototype.idivn = function idivn (num) {\r\n    assert(num <= 0x3ffffff);\r\n\r\n    var carry = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var w = (this.words[i] | 0) + carry * 0x4000000;\r\n      this.words[i] = (w / num) | 0;\r\n      carry = w % num;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.divn = function divn (num) {\r\n    return this.clone().idivn(num);\r\n  };\r\n\r\n  BN.prototype.egcd = function egcd (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var x = this;\r\n    var y = p.clone();\r\n\r\n    if (x.negative !== 0) {\r\n      x = x.umod(p);\r\n    } else {\r\n      x = x.clone();\r\n    }\r\n\r\n    // A * x + B * y = x\r\n    var A = new BN(1);\r\n    var B = new BN(0);\r\n\r\n    // C * x + D * y = y\r\n    var C = new BN(0);\r\n    var D = new BN(1);\r\n\r\n    var g = 0;\r\n\r\n    while (x.isEven() && y.isEven()) {\r\n      x.iushrn(1);\r\n      y.iushrn(1);\r\n      ++g;\r\n    }\r\n\r\n    var yp = y.clone();\r\n    var xp = x.clone();\r\n\r\n    while (!x.isZero()) {\r\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        x.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (A.isOdd() || B.isOdd()) {\r\n            A.iadd(yp);\r\n            B.isub(xp);\r\n          }\r\n\r\n          A.iushrn(1);\r\n          B.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        y.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (C.isOdd() || D.isOdd()) {\r\n            C.iadd(yp);\r\n            D.isub(xp);\r\n          }\r\n\r\n          C.iushrn(1);\r\n          D.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (x.cmp(y) >= 0) {\r\n        x.isub(y);\r\n        A.isub(C);\r\n        B.isub(D);\r\n      } else {\r\n        y.isub(x);\r\n        C.isub(A);\r\n        D.isub(B);\r\n      }\r\n    }\r\n\r\n    return {\r\n      a: C,\r\n      b: D,\r\n      gcd: y.iushln(g)\r\n    };\r\n  };\r\n\r\n  // This is reduced incarnation of the binary EEA\r\n  // above, designated to invert members of the\r\n  // _prime_ fields F(p) at a maximal speed\r\n  BN.prototype._invmp = function _invmp (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var a = this;\r\n    var b = p.clone();\r\n\r\n    if (a.negative !== 0) {\r\n      a = a.umod(p);\r\n    } else {\r\n      a = a.clone();\r\n    }\r\n\r\n    var x1 = new BN(1);\r\n    var x2 = new BN(0);\r\n\r\n    var delta = b.clone();\r\n\r\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\r\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        a.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (x1.isOdd()) {\r\n            x1.iadd(delta);\r\n          }\r\n\r\n          x1.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        b.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (x2.isOdd()) {\r\n            x2.iadd(delta);\r\n          }\r\n\r\n          x2.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (a.cmp(b) >= 0) {\r\n        a.isub(b);\r\n        x1.isub(x2);\r\n      } else {\r\n        b.isub(a);\r\n        x2.isub(x1);\r\n      }\r\n    }\r\n\r\n    var res;\r\n    if (a.cmpn(1) === 0) {\r\n      res = x1;\r\n    } else {\r\n      res = x2;\r\n    }\r\n\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(p);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gcd = function gcd (num) {\r\n    if (this.isZero()) return num.abs();\r\n    if (num.isZero()) return this.abs();\r\n\r\n    var a = this.clone();\r\n    var b = num.clone();\r\n    a.negative = 0;\r\n    b.negative = 0;\r\n\r\n    // Remove common factor of two\r\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\r\n      a.iushrn(1);\r\n      b.iushrn(1);\r\n    }\r\n\r\n    do {\r\n      while (a.isEven()) {\r\n        a.iushrn(1);\r\n      }\r\n      while (b.isEven()) {\r\n        b.iushrn(1);\r\n      }\r\n\r\n      var r = a.cmp(b);\r\n      if (r < 0) {\r\n        // Swap `a` and `b` to make `a` always bigger than `b`\r\n        var t = a;\r\n        a = b;\r\n        b = t;\r\n      } else if (r === 0 || b.cmpn(1) === 0) {\r\n        break;\r\n      }\r\n\r\n      a.isub(b);\r\n    } while (true);\r\n\r\n    return b.iushln(shift);\r\n  };\r\n\r\n  // Invert number in the field F(num)\r\n  BN.prototype.invm = function invm (num) {\r\n    return this.egcd(num).a.umod(num);\r\n  };\r\n\r\n  BN.prototype.isEven = function isEven () {\r\n    return (this.words[0] & 1) === 0;\r\n  };\r\n\r\n  BN.prototype.isOdd = function isOdd () {\r\n    return (this.words[0] & 1) === 1;\r\n  };\r\n\r\n  // And first word and num\r\n  BN.prototype.andln = function andln (num) {\r\n    return this.words[0] & num;\r\n  };\r\n\r\n  // Increment at the bit position in-line\r\n  BN.prototype.bincn = function bincn (bit) {\r\n    assert(typeof bit === 'number');\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) {\r\n      this._expand(s + 1);\r\n      this.words[s] |= q;\r\n      return this;\r\n    }\r\n\r\n    // Add bit and propagate, if needed\r\n    var carry = q;\r\n    for (var i = s; carry !== 0 && i < this.length; i++) {\r\n      var w = this.words[i] | 0;\r\n      w += carry;\r\n      carry = w >>> 26;\r\n      w &= 0x3ffffff;\r\n      this.words[i] = w;\r\n    }\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.isZero = function isZero () {\r\n    return this.length === 1 && this.words[0] === 0;\r\n  };\r\n\r\n  BN.prototype.cmpn = function cmpn (num) {\r\n    var negative = num < 0;\r\n\r\n    if (this.negative !== 0 && !negative) return -1;\r\n    if (this.negative === 0 && negative) return 1;\r\n\r\n    this.strip();\r\n\r\n    var res;\r\n    if (this.length > 1) {\r\n      res = 1;\r\n    } else {\r\n      if (negative) {\r\n        num = -num;\r\n      }\r\n\r\n      assert(num <= 0x3ffffff, 'Number is too big');\r\n\r\n      var w = this.words[0] | 0;\r\n      res = w === num ? 0 : w < num ? -1 : 1;\r\n    }\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Compare two numbers and return:\r\n  // 1 - if `this` > `num`\r\n  // 0 - if `this` == `num`\r\n  // -1 - if `this` < `num`\r\n  BN.prototype.cmp = function cmp (num) {\r\n    if (this.negative !== 0 && num.negative === 0) return -1;\r\n    if (this.negative === 0 && num.negative !== 0) return 1;\r\n\r\n    var res = this.ucmp(num);\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Unsigned comparison\r\n  BN.prototype.ucmp = function ucmp (num) {\r\n    // At this point both numbers have the same sign\r\n    if (this.length > num.length) return 1;\r\n    if (this.length < num.length) return -1;\r\n\r\n    var res = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var a = this.words[i] | 0;\r\n      var b = num.words[i] | 0;\r\n\r\n      if (a === b) continue;\r\n      if (a < b) {\r\n        res = -1;\r\n      } else if (a > b) {\r\n        res = 1;\r\n      }\r\n      break;\r\n    }\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gtn = function gtn (num) {\r\n    return this.cmpn(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gt = function gt (num) {\r\n    return this.cmp(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gten = function gten (num) {\r\n    return this.cmpn(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.gte = function gte (num) {\r\n    return this.cmp(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.ltn = function ltn (num) {\r\n    return this.cmpn(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lt = function lt (num) {\r\n    return this.cmp(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lten = function lten (num) {\r\n    return this.cmpn(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.lte = function lte (num) {\r\n    return this.cmp(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.eqn = function eqn (num) {\r\n    return this.cmpn(num) === 0;\r\n  };\r\n\r\n  BN.prototype.eq = function eq (num) {\r\n    return this.cmp(num) === 0;\r\n  };\r\n\r\n  //\r\n  // A reduce context, could be using montgomery or something better, depending\r\n  // on the `m` itself.\r\n  //\r\n  BN.red = function red (num) {\r\n    return new Red(num);\r\n  };\r\n\r\n  BN.prototype.toRed = function toRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    assert(this.negative === 0, 'red works only with positives');\r\n    return ctx.convertTo(this)._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.fromRed = function fromRed () {\r\n    assert(this.red, 'fromRed works only with numbers in reduction context');\r\n    return this.red.convertFrom(this);\r\n  };\r\n\r\n  BN.prototype._forceRed = function _forceRed (ctx) {\r\n    this.red = ctx;\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.forceRed = function forceRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    return this._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.redAdd = function redAdd (num) {\r\n    assert(this.red, 'redAdd works only with red numbers');\r\n    return this.red.add(this, num);\r\n  };\r\n\r\n  BN.prototype.redIAdd = function redIAdd (num) {\r\n    assert(this.red, 'redIAdd works only with red numbers');\r\n    return this.red.iadd(this, num);\r\n  };\r\n\r\n  BN.prototype.redSub = function redSub (num) {\r\n    assert(this.red, 'redSub works only with red numbers');\r\n    return this.red.sub(this, num);\r\n  };\r\n\r\n  BN.prototype.redISub = function redISub (num) {\r\n    assert(this.red, 'redISub works only with red numbers');\r\n    return this.red.isub(this, num);\r\n  };\r\n\r\n  BN.prototype.redShl = function redShl (num) {\r\n    assert(this.red, 'redShl works only with red numbers');\r\n    return this.red.shl(this, num);\r\n  };\r\n\r\n  BN.prototype.redMul = function redMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.mul(this, num);\r\n  };\r\n\r\n  BN.prototype.redIMul = function redIMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.imul(this, num);\r\n  };\r\n\r\n  BN.prototype.redSqr = function redSqr () {\r\n    assert(this.red, 'redSqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqr(this);\r\n  };\r\n\r\n  BN.prototype.redISqr = function redISqr () {\r\n    assert(this.red, 'redISqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.isqr(this);\r\n  };\r\n\r\n  // Square root over p\r\n  BN.prototype.redSqrt = function redSqrt () {\r\n    assert(this.red, 'redSqrt works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqrt(this);\r\n  };\r\n\r\n  BN.prototype.redInvm = function redInvm () {\r\n    assert(this.red, 'redInvm works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.invm(this);\r\n  };\r\n\r\n  // Return negative clone of `this` % `red modulo`\r\n  BN.prototype.redNeg = function redNeg () {\r\n    assert(this.red, 'redNeg works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.neg(this);\r\n  };\r\n\r\n  BN.prototype.redPow = function redPow (num) {\r\n    assert(this.red && !num.red, 'redPow(normalNum)');\r\n    this.red._verify1(this);\r\n    return this.red.pow(this, num);\r\n  };\r\n\r\n  // Prime numbers with efficient reduction\r\n  var primes = {\r\n    k256: null,\r\n    p224: null,\r\n    p192: null,\r\n    p25519: null\r\n  };\r\n\r\n  // Pseudo-Mersenne prime\r\n  function MPrime (name, p) {\r\n    // P = 2 ^ N - K\r\n    this.name = name;\r\n    this.p = new BN(p, 16);\r\n    this.n = this.p.bitLength();\r\n    this.k = new BN(1).iushln(this.n).isub(this.p);\r\n\r\n    this.tmp = this._tmp();\r\n  }\r\n\r\n  MPrime.prototype._tmp = function _tmp () {\r\n    var tmp = new BN(null);\r\n    tmp.words = new Array(Math.ceil(this.n / 13));\r\n    return tmp;\r\n  };\r\n\r\n  MPrime.prototype.ireduce = function ireduce (num) {\r\n    // Assumes that `num` is less than `P^2`\r\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\r\n    var r = num;\r\n    var rlen;\r\n\r\n    do {\r\n      this.split(r, this.tmp);\r\n      r = this.imulK(r);\r\n      r = r.iadd(this.tmp);\r\n      rlen = r.bitLength();\r\n    } while (rlen > this.n);\r\n\r\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\r\n    if (cmp === 0) {\r\n      r.words[0] = 0;\r\n      r.length = 1;\r\n    } else if (cmp > 0) {\r\n      r.isub(this.p);\r\n    } else {\r\n      if (r.strip !== undefined) {\r\n        // r is BN v4 instance\r\n        r.strip();\r\n      } else {\r\n        // r is BN v5 instance\r\n        r._strip();\r\n      }\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  MPrime.prototype.split = function split (input, out) {\r\n    input.iushrn(this.n, 0, out);\r\n  };\r\n\r\n  MPrime.prototype.imulK = function imulK (num) {\r\n    return num.imul(this.k);\r\n  };\r\n\r\n  function K256 () {\r\n    MPrime.call(\r\n      this,\r\n      'k256',\r\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\r\n  }\r\n  inherits(K256, MPrime);\r\n\r\n  K256.prototype.split = function split (input, output) {\r\n    // 256 = 9 * 26 + 22\r\n    var mask = 0x3fffff;\r\n\r\n    var outLen = Math.min(input.length, 9);\r\n    for (var i = 0; i < outLen; i++) {\r\n      output.words[i] = input.words[i];\r\n    }\r\n    output.length = outLen;\r\n\r\n    if (input.length <= 9) {\r\n      input.words[0] = 0;\r\n      input.length = 1;\r\n      return;\r\n    }\r\n\r\n    // Shift by 9 limbs\r\n    var prev = input.words[9];\r\n    output.words[output.length++] = prev & mask;\r\n\r\n    for (i = 10; i < input.length; i++) {\r\n      var next = input.words[i] | 0;\r\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\r\n      prev = next;\r\n    }\r\n    prev >>>= 22;\r\n    input.words[i - 10] = prev;\r\n    if (prev === 0 && input.length > 10) {\r\n      input.length -= 10;\r\n    } else {\r\n      input.length -= 9;\r\n    }\r\n  };\r\n\r\n  K256.prototype.imulK = function imulK (num) {\r\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\r\n    num.words[num.length] = 0;\r\n    num.words[num.length + 1] = 0;\r\n    num.length += 2;\r\n\r\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\r\n    var lo = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var w = num.words[i] | 0;\r\n      lo += w * 0x3d1;\r\n      num.words[i] = lo & 0x3ffffff;\r\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\r\n    }\r\n\r\n    // Fast length reduction\r\n    if (num.words[num.length - 1] === 0) {\r\n      num.length--;\r\n      if (num.words[num.length - 1] === 0) {\r\n        num.length--;\r\n      }\r\n    }\r\n    return num;\r\n  };\r\n\r\n  function P224 () {\r\n    MPrime.call(\r\n      this,\r\n      'p224',\r\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\r\n  }\r\n  inherits(P224, MPrime);\r\n\r\n  function P192 () {\r\n    MPrime.call(\r\n      this,\r\n      'p192',\r\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\r\n  }\r\n  inherits(P192, MPrime);\r\n\r\n  function P25519 () {\r\n    // 2 ^ 255 - 19\r\n    MPrime.call(\r\n      this,\r\n      '25519',\r\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\r\n  }\r\n  inherits(P25519, MPrime);\r\n\r\n  P25519.prototype.imulK = function imulK (num) {\r\n    // K = 0x13\r\n    var carry = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var hi = (num.words[i] | 0) * 0x13 + carry;\r\n      var lo = hi & 0x3ffffff;\r\n      hi >>>= 26;\r\n\r\n      num.words[i] = lo;\r\n      carry = hi;\r\n    }\r\n    if (carry !== 0) {\r\n      num.words[num.length++] = carry;\r\n    }\r\n    return num;\r\n  };\r\n\r\n  // Exported mostly for testing purposes, use plain name instead\r\n  BN._prime = function prime (name) {\r\n    // Cached version of prime\r\n    if (primes[name]) return primes[name];\r\n\r\n    var prime;\r\n    if (name === 'k256') {\r\n      prime = new K256();\r\n    } else if (name === 'p224') {\r\n      prime = new P224();\r\n    } else if (name === 'p192') {\r\n      prime = new P192();\r\n    } else if (name === 'p25519') {\r\n      prime = new P25519();\r\n    } else {\r\n      throw new Error('Unknown prime ' + name);\r\n    }\r\n    primes[name] = prime;\r\n\r\n    return prime;\r\n  };\r\n\r\n  //\r\n  // Base reduction engine\r\n  //\r\n  function Red (m) {\r\n    if (typeof m === 'string') {\r\n      var prime = BN._prime(m);\r\n      this.m = prime.p;\r\n      this.prime = prime;\r\n    } else {\r\n      assert(m.gtn(1), 'modulus must be greater than 1');\r\n      this.m = m;\r\n      this.prime = null;\r\n    }\r\n  }\r\n\r\n  Red.prototype._verify1 = function _verify1 (a) {\r\n    assert(a.negative === 0, 'red works only with positives');\r\n    assert(a.red, 'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype._verify2 = function _verify2 (a, b) {\r\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\r\n    assert(a.red && a.red === b.red,\r\n      'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype.imod = function imod (a) {\r\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\r\n    return a.umod(this.m)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.neg = function neg (a) {\r\n    if (a.isZero()) {\r\n      return a.clone();\r\n    }\r\n\r\n    return this.m.sub(a)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.add = function add (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.add(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.iadd = function iadd (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.iadd(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.sub = function sub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.sub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.isub = function isub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.isub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.shl = function shl (a, num) {\r\n    this._verify1(a);\r\n    return this.imod(a.ushln(num));\r\n  };\r\n\r\n  Red.prototype.imul = function imul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.imul(b));\r\n  };\r\n\r\n  Red.prototype.mul = function mul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.mul(b));\r\n  };\r\n\r\n  Red.prototype.isqr = function isqr (a) {\r\n    return this.imul(a, a.clone());\r\n  };\r\n\r\n  Red.prototype.sqr = function sqr (a) {\r\n    return this.mul(a, a);\r\n  };\r\n\r\n  Red.prototype.sqrt = function sqrt (a) {\r\n    if (a.isZero()) return a.clone();\r\n\r\n    var mod3 = this.m.andln(3);\r\n    assert(mod3 % 2 === 1);\r\n\r\n    // Fast case\r\n    if (mod3 === 3) {\r\n      var pow = this.m.add(new BN(1)).iushrn(2);\r\n      return this.pow(a, pow);\r\n    }\r\n\r\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\r\n    //\r\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\r\n    var q = this.m.subn(1);\r\n    var s = 0;\r\n    while (!q.isZero() && q.andln(1) === 0) {\r\n      s++;\r\n      q.iushrn(1);\r\n    }\r\n    assert(!q.isZero());\r\n\r\n    var one = new BN(1).toRed(this);\r\n    var nOne = one.redNeg();\r\n\r\n    // Find quadratic non-residue\r\n    // NOTE: Max is such because of generalized Riemann hypothesis.\r\n    var lpow = this.m.subn(1).iushrn(1);\r\n    var z = this.m.bitLength();\r\n    z = new BN(2 * z * z).toRed(this);\r\n\r\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\r\n      z.redIAdd(nOne);\r\n    }\r\n\r\n    var c = this.pow(z, q);\r\n    var r = this.pow(a, q.addn(1).iushrn(1));\r\n    var t = this.pow(a, q);\r\n    var m = s;\r\n    while (t.cmp(one) !== 0) {\r\n      var tmp = t;\r\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\r\n        tmp = tmp.redSqr();\r\n      }\r\n      assert(i < m);\r\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\r\n\r\n      r = r.redMul(b);\r\n      c = b.redSqr();\r\n      t = t.redMul(c);\r\n      m = i;\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  Red.prototype.invm = function invm (a) {\r\n    var inv = a._invmp(this.m);\r\n    if (inv.negative !== 0) {\r\n      inv.negative = 0;\r\n      return this.imod(inv).redNeg();\r\n    } else {\r\n      return this.imod(inv);\r\n    }\r\n  };\r\n\r\n  Red.prototype.pow = function pow (a, num) {\r\n    if (num.isZero()) return new BN(1).toRed(this);\r\n    if (num.cmpn(1) === 0) return a.clone();\r\n\r\n    var windowSize = 4;\r\n    var wnd = new Array(1 << windowSize);\r\n    wnd[0] = new BN(1).toRed(this);\r\n    wnd[1] = a;\r\n    for (var i = 2; i < wnd.length; i++) {\r\n      wnd[i] = this.mul(wnd[i - 1], a);\r\n    }\r\n\r\n    var res = wnd[0];\r\n    var current = 0;\r\n    var currentLen = 0;\r\n    var start = num.bitLength() % 26;\r\n    if (start === 0) {\r\n      start = 26;\r\n    }\r\n\r\n    for (i = num.length - 1; i >= 0; i--) {\r\n      var word = num.words[i];\r\n      for (var j = start - 1; j >= 0; j--) {\r\n        var bit = (word >> j) & 1;\r\n        if (res !== wnd[0]) {\r\n          res = this.sqr(res);\r\n        }\r\n\r\n        if (bit === 0 && current === 0) {\r\n          currentLen = 0;\r\n          continue;\r\n        }\r\n\r\n        current <<= 1;\r\n        current |= bit;\r\n        currentLen++;\r\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\r\n\r\n        res = this.mul(res, wnd[current]);\r\n        currentLen = 0;\r\n        current = 0;\r\n      }\r\n      start = 26;\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.convertTo = function convertTo (num) {\r\n    var r = num.umod(this.m);\r\n\r\n    return r === num ? r.clone() : r;\r\n  };\r\n\r\n  Red.prototype.convertFrom = function convertFrom (num) {\r\n    var res = num.clone();\r\n    res.red = null;\r\n    return res;\r\n  };\r\n\r\n  //\r\n  // Montgomery method engine\r\n  //\r\n\r\n  BN.mont = function mont (num) {\r\n    return new Mont(num);\r\n  };\r\n\r\n  function Mont (m) {\r\n    Red.call(this, m);\r\n\r\n    this.shift = this.m.bitLength();\r\n    if (this.shift % 26 !== 0) {\r\n      this.shift += 26 - (this.shift % 26);\r\n    }\r\n\r\n    this.r = new BN(1).iushln(this.shift);\r\n    this.r2 = this.imod(this.r.sqr());\r\n    this.rinv = this.r._invmp(this.m);\r\n\r\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\r\n    this.minv = this.minv.umod(this.r);\r\n    this.minv = this.r.sub(this.minv);\r\n  }\r\n  inherits(Mont, Red);\r\n\r\n  Mont.prototype.convertTo = function convertTo (num) {\r\n    return this.imod(num.ushln(this.shift));\r\n  };\r\n\r\n  Mont.prototype.convertFrom = function convertFrom (num) {\r\n    var r = this.imod(num.mul(this.rinv));\r\n    r.red = null;\r\n    return r;\r\n  };\r\n\r\n  Mont.prototype.imul = function imul (a, b) {\r\n    if (a.isZero() || b.isZero()) {\r\n      a.words[0] = 0;\r\n      a.length = 1;\r\n      return a;\r\n    }\r\n\r\n    var t = a.imul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.mul = function mul (a, b) {\r\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\r\n\r\n    var t = a.mul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.invm = function invm (a) {\r\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\r\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\r\n    return res._forceRed(this);\r\n  };\r\n})( false || module, this);\r\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack://Game/./node_modules/create-ecdh/node_modules/bn.js/lib/bn.js?");

/***/ }),

/***/ "./node_modules/create-hash/browser.js":
/*!*********************************************!*\
  !*** ./node_modules/create-hash/browser.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\nvar MD5 = __webpack_require__(/*! md5.js */ \"./node_modules/md5.js/index.js\")\nvar RIPEMD160 = __webpack_require__(/*! ripemd160 */ \"./node_modules/ripemd160/index.js\")\nvar sha = __webpack_require__(/*! sha.js */ \"./node_modules/sha.js/index.js\")\nvar Base = __webpack_require__(/*! cipher-base */ \"./node_modules/cipher-base/index.js\")\n\nfunction Hash (hash) {\n  Base.call(this, 'digest')\n\n  this._hash = hash\n}\n\ninherits(Hash, Base)\n\nHash.prototype._update = function (data) {\n  this._hash.update(data)\n}\n\nHash.prototype._final = function () {\n  return this._hash.digest()\n}\n\nmodule.exports = function createHash (alg) {\n  alg = alg.toLowerCase()\n  if (alg === 'md5') return new MD5()\n  if (alg === 'rmd160' || alg === 'ripemd160') return new RIPEMD160()\n\n  return new Hash(sha(alg))\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/create-hash/browser.js?");

/***/ }),

/***/ "./node_modules/create-hash/md5.js":
/*!*****************************************!*\
  !*** ./node_modules/create-hash/md5.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var MD5 = __webpack_require__(/*! md5.js */ \"./node_modules/md5.js/index.js\")\n\nmodule.exports = function (buffer) {\n  return new MD5().update(buffer).digest()\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/create-hash/md5.js?");

/***/ }),

/***/ "./node_modules/create-hmac/browser.js":
/*!*********************************************!*\
  !*** ./node_modules/create-hmac/browser.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\nvar Legacy = __webpack_require__(/*! ./legacy */ \"./node_modules/create-hmac/legacy.js\")\nvar Base = __webpack_require__(/*! cipher-base */ \"./node_modules/cipher-base/index.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\nvar md5 = __webpack_require__(/*! create-hash/md5 */ \"./node_modules/create-hash/md5.js\")\nvar RIPEMD160 = __webpack_require__(/*! ripemd160 */ \"./node_modules/ripemd160/index.js\")\n\nvar sha = __webpack_require__(/*! sha.js */ \"./node_modules/sha.js/index.js\")\n\nvar ZEROS = Buffer.alloc(128)\n\nfunction Hmac (alg, key) {\n  Base.call(this, 'digest')\n  if (typeof key === 'string') {\n    key = Buffer.from(key)\n  }\n\n  var blocksize = (alg === 'sha512' || alg === 'sha384') ? 128 : 64\n\n  this._alg = alg\n  this._key = key\n  if (key.length > blocksize) {\n    var hash = alg === 'rmd160' ? new RIPEMD160() : sha(alg)\n    key = hash.update(key).digest()\n  } else if (key.length < blocksize) {\n    key = Buffer.concat([key, ZEROS], blocksize)\n  }\n\n  var ipad = this._ipad = Buffer.allocUnsafe(blocksize)\n  var opad = this._opad = Buffer.allocUnsafe(blocksize)\n\n  for (var i = 0; i < blocksize; i++) {\n    ipad[i] = key[i] ^ 0x36\n    opad[i] = key[i] ^ 0x5C\n  }\n  this._hash = alg === 'rmd160' ? new RIPEMD160() : sha(alg)\n  this._hash.update(ipad)\n}\n\ninherits(Hmac, Base)\n\nHmac.prototype._update = function (data) {\n  this._hash.update(data)\n}\n\nHmac.prototype._final = function () {\n  var h = this._hash.digest()\n  var hash = this._alg === 'rmd160' ? new RIPEMD160() : sha(this._alg)\n  return hash.update(this._opad).update(h).digest()\n}\n\nmodule.exports = function createHmac (alg, key) {\n  alg = alg.toLowerCase()\n  if (alg === 'rmd160' || alg === 'ripemd160') {\n    return new Hmac('rmd160', key)\n  }\n  if (alg === 'md5') {\n    return new Legacy(md5, key)\n  }\n  return new Hmac(alg, key)\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/create-hmac/browser.js?");

/***/ }),

/***/ "./node_modules/create-hmac/legacy.js":
/*!********************************************!*\
  !*** ./node_modules/create-hmac/legacy.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nvar Base = __webpack_require__(/*! cipher-base */ \"./node_modules/cipher-base/index.js\")\n\nvar ZEROS = Buffer.alloc(128)\nvar blocksize = 64\n\nfunction Hmac (alg, key) {\n  Base.call(this, 'digest')\n  if (typeof key === 'string') {\n    key = Buffer.from(key)\n  }\n\n  this._alg = alg\n  this._key = key\n\n  if (key.length > blocksize) {\n    key = alg(key)\n  } else if (key.length < blocksize) {\n    key = Buffer.concat([key, ZEROS], blocksize)\n  }\n\n  var ipad = this._ipad = Buffer.allocUnsafe(blocksize)\n  var opad = this._opad = Buffer.allocUnsafe(blocksize)\n\n  for (var i = 0; i < blocksize; i++) {\n    ipad[i] = key[i] ^ 0x36\n    opad[i] = key[i] ^ 0x5C\n  }\n\n  this._hash = [ipad]\n}\n\ninherits(Hmac, Base)\n\nHmac.prototype._update = function (data) {\n  this._hash.push(data)\n}\n\nHmac.prototype._final = function () {\n  var h = this._alg(Buffer.concat(this._hash))\n  return this._alg(Buffer.concat([this._opad, h]))\n}\nmodule.exports = Hmac\n\n\n//# sourceURL=webpack://Game/./node_modules/create-hmac/legacy.js?");

/***/ }),

/***/ "./node_modules/crypto-browserify/index.js":
/*!*************************************************!*\
  !*** ./node_modules/crypto-browserify/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nexports.randomBytes = exports.rng = exports.pseudoRandomBytes = exports.prng = __webpack_require__(/*! randombytes */ \"./node_modules/randombytes/browser.js\")\nexports.createHash = exports.Hash = __webpack_require__(/*! create-hash */ \"./node_modules/create-hash/browser.js\")\nexports.createHmac = exports.Hmac = __webpack_require__(/*! create-hmac */ \"./node_modules/create-hmac/browser.js\")\n\nvar algos = __webpack_require__(/*! browserify-sign/algos */ \"./node_modules/browserify-sign/algos.js\")\nvar algoKeys = Object.keys(algos)\nvar hashes = ['sha1', 'sha224', 'sha256', 'sha384', 'sha512', 'md5', 'rmd160'].concat(algoKeys)\nexports.getHashes = function () {\n  return hashes\n}\n\nvar p = __webpack_require__(/*! pbkdf2 */ \"./node_modules/pbkdf2/browser.js\")\nexports.pbkdf2 = p.pbkdf2\nexports.pbkdf2Sync = p.pbkdf2Sync\n\nvar aes = __webpack_require__(/*! browserify-cipher */ \"./node_modules/browserify-cipher/browser.js\")\n\nexports.Cipher = aes.Cipher\nexports.createCipher = aes.createCipher\nexports.Cipheriv = aes.Cipheriv\nexports.createCipheriv = aes.createCipheriv\nexports.Decipher = aes.Decipher\nexports.createDecipher = aes.createDecipher\nexports.Decipheriv = aes.Decipheriv\nexports.createDecipheriv = aes.createDecipheriv\nexports.getCiphers = aes.getCiphers\nexports.listCiphers = aes.listCiphers\n\nvar dh = __webpack_require__(/*! diffie-hellman */ \"./node_modules/diffie-hellman/browser.js\")\n\nexports.DiffieHellmanGroup = dh.DiffieHellmanGroup\nexports.createDiffieHellmanGroup = dh.createDiffieHellmanGroup\nexports.getDiffieHellman = dh.getDiffieHellman\nexports.createDiffieHellman = dh.createDiffieHellman\nexports.DiffieHellman = dh.DiffieHellman\n\nvar sign = __webpack_require__(/*! browserify-sign */ \"./node_modules/browserify-sign/browser/index.js\")\n\nexports.createSign = sign.createSign\nexports.Sign = sign.Sign\nexports.createVerify = sign.createVerify\nexports.Verify = sign.Verify\n\nexports.createECDH = __webpack_require__(/*! create-ecdh */ \"./node_modules/create-ecdh/browser.js\")\n\nvar publicEncrypt = __webpack_require__(/*! public-encrypt */ \"./node_modules/public-encrypt/browser.js\")\n\nexports.publicEncrypt = publicEncrypt.publicEncrypt\nexports.privateEncrypt = publicEncrypt.privateEncrypt\nexports.publicDecrypt = publicEncrypt.publicDecrypt\nexports.privateDecrypt = publicEncrypt.privateDecrypt\n\n// the least I can do is make error messages for the rest of the node.js/crypto api.\n// ;[\n//   'createCredentials'\n// ].forEach(function (name) {\n//   exports[name] = function () {\n//     throw new Error([\n//       'sorry, ' + name + ' is not implemented yet',\n//       'we accept pull requests',\n//       'https://github.com/crypto-browserify/crypto-browserify'\n//     ].join('\\n'))\n//   }\n// })\n\nvar rf = __webpack_require__(/*! randomfill */ \"./node_modules/randomfill/browser.js\")\n\nexports.randomFill = rf.randomFill\nexports.randomFillSync = rf.randomFillSync\n\nexports.createCredentials = function () {\n  throw new Error([\n    'sorry, createCredentials is not implemented yet',\n    'we accept pull requests',\n    'https://github.com/crypto-browserify/crypto-browserify'\n  ].join('\\n'))\n}\n\nexports.constants = {\n  'DH_CHECK_P_NOT_SAFE_PRIME': 2,\n  'DH_CHECK_P_NOT_PRIME': 1,\n  'DH_UNABLE_TO_CHECK_GENERATOR': 4,\n  'DH_NOT_SUITABLE_GENERATOR': 8,\n  'NPN_ENABLED': 1,\n  'ALPN_ENABLED': 1,\n  'RSA_PKCS1_PADDING': 1,\n  'RSA_SSLV23_PADDING': 2,\n  'RSA_NO_PADDING': 3,\n  'RSA_PKCS1_OAEP_PADDING': 4,\n  'RSA_X931_PADDING': 5,\n  'RSA_PKCS1_PSS_PADDING': 6,\n  'POINT_CONVERSION_COMPRESSED': 2,\n  'POINT_CONVERSION_UNCOMPRESSED': 4,\n  'POINT_CONVERSION_HYBRID': 6\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/crypto-browserify/index.js?");

/***/ }),

/***/ "./node_modules/d3-color/src/color.js":
/*!********************************************!*\
  !*** ./node_modules/d3-color/src/color.js ***!
  \********************************************/
/*! exports provided: Color, darker, brighter, default, rgbConvert, rgb, Rgb, hslConvert, hsl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Color\", function() { return Color; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"darker\", function() { return darker; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"brighter\", function() { return brighter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return color; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rgbConvert\", function() { return rgbConvert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rgb\", function() { return rgb; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Rgb\", function() { return Rgb; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hslConvert\", function() { return hslConvert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hsl\", function() { return hsl; });\n/* harmony import */ var _define_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./define.js */ \"./node_modules/d3-color/src/define.js\");\n\n\nfunction Color() {}\n\nvar darker = 0.7;\nvar brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\nObject(_define_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nfunction color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nfunction rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nfunction rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nfunction Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\nObject(_define_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(Rgb, rgb, Object(_define_js__WEBPACK_IMPORTED_MODULE_0__[\"extend\"])(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nfunction hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nfunction hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nObject(_define_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(Hsl, hsl, Object(_define_js__WEBPACK_IMPORTED_MODULE_0__[\"extend\"])(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-color/src/color.js?");

/***/ }),

/***/ "./node_modules/d3-color/src/cubehelix.js":
/*!************************************************!*\
  !*** ./node_modules/d3-color/src/cubehelix.js ***!
  \************************************************/
/*! exports provided: default, Cubehelix */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return cubehelix; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Cubehelix\", function() { return Cubehelix; });\n/* harmony import */ var _define_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./define.js */ \"./node_modules/d3-color/src/define.js\");\n/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color.js */ \"./node_modules/d3-color/src/color.js\");\n/* harmony import */ var _math_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./math.js */ \"./node_modules/d3-color/src/math.js\");\n\n\n\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof _color_js__WEBPACK_IMPORTED_MODULE_1__[\"Rgb\"])) o = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"rgbConvert\"])(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * _math_js__WEBPACK_IMPORTED_MODULE_2__[\"degrees\"] - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nfunction cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nObject(_define_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(Cubehelix, cubehelix, Object(_define_js__WEBPACK_IMPORTED_MODULE_0__[\"extend\"])(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"Color\"], {\n  brighter: function(k) {\n    k = k == null ? _color_js__WEBPACK_IMPORTED_MODULE_1__[\"brighter\"] : Math.pow(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"brighter\"], k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? _color_js__WEBPACK_IMPORTED_MODULE_1__[\"darker\"] : Math.pow(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"darker\"], k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * _math_js__WEBPACK_IMPORTED_MODULE_2__[\"radians\"],\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new _color_js__WEBPACK_IMPORTED_MODULE_1__[\"Rgb\"](\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-color/src/cubehelix.js?");

/***/ }),

/***/ "./node_modules/d3-color/src/define.js":
/*!*********************************************!*\
  !*** ./node_modules/d3-color/src/define.js ***!
  \*********************************************/
/*! exports provided: default, extend */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"extend\", function() { return extend; });\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n});\n\nfunction extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-color/src/define.js?");

/***/ }),

/***/ "./node_modules/d3-color/src/index.js":
/*!********************************************!*\
  !*** ./node_modules/d3-color/src/index.js ***!
  \********************************************/
/*! exports provided: color, rgb, hsl, lab, hcl, lch, gray, cubehelix */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./color.js */ \"./node_modules/d3-color/src/color.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"color\", function() { return _color_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"rgb\", function() { return _color_js__WEBPACK_IMPORTED_MODULE_0__[\"rgb\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"hsl\", function() { return _color_js__WEBPACK_IMPORTED_MODULE_0__[\"hsl\"]; });\n\n/* harmony import */ var _lab_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lab.js */ \"./node_modules/d3-color/src/lab.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"lab\", function() { return _lab_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"hcl\", function() { return _lab_js__WEBPACK_IMPORTED_MODULE_1__[\"hcl\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"lch\", function() { return _lab_js__WEBPACK_IMPORTED_MODULE_1__[\"lch\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"gray\", function() { return _lab_js__WEBPACK_IMPORTED_MODULE_1__[\"gray\"]; });\n\n/* harmony import */ var _cubehelix_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cubehelix.js */ \"./node_modules/d3-color/src/cubehelix.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"cubehelix\", function() { return _cubehelix_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]; });\n\n\n\n\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-color/src/index.js?");

/***/ }),

/***/ "./node_modules/d3-color/src/lab.js":
/*!******************************************!*\
  !*** ./node_modules/d3-color/src/lab.js ***!
  \******************************************/
/*! exports provided: gray, default, Lab, lch, hcl, Hcl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"gray\", function() { return gray; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return lab; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Lab\", function() { return Lab; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"lch\", function() { return lch; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hcl\", function() { return hcl; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Hcl\", function() { return Hcl; });\n/* harmony import */ var _define_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./define.js */ \"./node_modules/d3-color/src/define.js\");\n/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color.js */ \"./node_modules/d3-color/src/color.js\");\n/* harmony import */ var _math_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./math.js */ \"./node_modules/d3-color/src/math.js\");\n\n\n\n\n// https://observablehq.com/@mbostock/lab-and-rgb\nconst K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof _color_js__WEBPACK_IMPORTED_MODULE_1__[\"Rgb\"])) o = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"rgbConvert\"])(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nfunction gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nfunction lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nfunction Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\nObject(_define_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(Lab, lab, Object(_define_js__WEBPACK_IMPORTED_MODULE_0__[\"extend\"])(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"Color\"], {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new _color_js__WEBPACK_IMPORTED_MODULE_1__[\"Rgb\"](\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * _math_js__WEBPACK_IMPORTED_MODULE_2__[\"degrees\"];\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nfunction lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nfunction hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * _math_js__WEBPACK_IMPORTED_MODULE_2__[\"radians\"];\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\nObject(_define_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(Hcl, hcl, Object(_define_js__WEBPACK_IMPORTED_MODULE_0__[\"extend\"])(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"Color\"], {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return hcl2lab(this).rgb();\n  }\n}));\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-color/src/lab.js?");

/***/ }),

/***/ "./node_modules/d3-color/src/math.js":
/*!*******************************************!*\
  !*** ./node_modules/d3-color/src/math.js ***!
  \*******************************************/
/*! exports provided: radians, degrees */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"radians\", function() { return radians; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"degrees\", function() { return degrees; });\nconst radians = Math.PI / 180;\nconst degrees = 180 / Math.PI;\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-color/src/math.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/array.js":
/*!**************************************************!*\
  !*** ./node_modules/d3-interpolate/src/array.js ***!
  \**************************************************/
/*! exports provided: default, genericArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"genericArray\", function() { return genericArray; });\n/* harmony import */ var _value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./value.js */ \"./node_modules/d3-interpolate/src/value.js\");\n/* harmony import */ var _numberArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./numberArray.js */ \"./node_modules/d3-interpolate/src/numberArray.js\");\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(a, b) {\n  return (Object(_numberArray_js__WEBPACK_IMPORTED_MODULE_1__[\"isNumberArray\"])(b) ? _numberArray_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"] : genericArray)(a, b);\n});\n\nfunction genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = Object(_value_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/array.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/basis.js":
/*!**************************************************!*\
  !*** ./node_modules/d3-interpolate/src/basis.js ***!
  \**************************************************/
/*! exports provided: basis, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"basis\", function() { return basis; });\nfunction basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n});\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/basis.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/basisClosed.js":
/*!********************************************************!*\
  !*** ./node_modules/d3-interpolate/src/basisClosed.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _basis_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basis.js */ \"./node_modules/d3-interpolate/src/basis.js\");\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return Object(_basis_js__WEBPACK_IMPORTED_MODULE_0__[\"basis\"])((t - i / n) * n, v0, v1, v2, v3);\n  };\n});\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/basisClosed.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/color.js":
/*!**************************************************!*\
  !*** ./node_modules/d3-interpolate/src/color.js ***!
  \**************************************************/
/*! exports provided: hue, gamma, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hue\", function() { return hue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"gamma\", function() { return gamma; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return nogamma; });\n/* harmony import */ var _constant_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constant.js */ \"./node_modules/d3-interpolate/src/constant.js\");\n\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nfunction hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : Object(_constant_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(isNaN(a) ? b : a);\n}\n\nfunction gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : Object(_constant_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(isNaN(a) ? b : a);\n  };\n}\n\nfunction nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : Object(_constant_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(isNaN(a) ? b : a);\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/color.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/constant.js":
/*!*****************************************************!*\
  !*** ./node_modules/d3-interpolate/src/constant.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (x => () => x);\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/constant.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/cubehelix.js":
/*!******************************************************!*\
  !*** ./node_modules/d3-interpolate/src/cubehelix.js ***!
  \******************************************************/
/*! exports provided: default, cubehelixLong */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cubehelixLong\", function() { return cubehelixLong; });\n/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ \"./node_modules/d3-color/src/index.js\");\n/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color.js */ \"./node_modules/d3-interpolate/src/color.js\");\n\n\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__[\"cubehelix\"])(start)).h, (end = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__[\"cubehelix\"])(end)).h),\n          s = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(start.s, end.s),\n          l = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(start.l, end.l),\n          opacity = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (cubehelix(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"hue\"]));\nvar cubehelixLong = cubehelix(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/cubehelix.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/date.js":
/*!*************************************************!*\
  !*** ./node_modules/d3-interpolate/src/date.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n});\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/date.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/discrete.js":
/*!*****************************************************!*\
  !*** ./node_modules/d3-interpolate/src/discrete.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n});\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/discrete.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/hcl.js":
/*!************************************************!*\
  !*** ./node_modules/d3-interpolate/src/hcl.js ***!
  \************************************************/
/*! exports provided: default, hclLong */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hclLong\", function() { return hclLong; });\n/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ \"./node_modules/d3-color/src/index.js\");\n/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color.js */ \"./node_modules/d3-interpolate/src/color.js\");\n\n\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__[\"hcl\"])(start)).h, (end = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__[\"hcl\"])(end)).h),\n        c = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(start.c, end.c),\n        l = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(start.l, end.l),\n        opacity = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (hcl(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"hue\"]));\nvar hclLong = hcl(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/hcl.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/hsl.js":
/*!************************************************!*\
  !*** ./node_modules/d3-interpolate/src/hsl.js ***!
  \************************************************/
/*! exports provided: default, hslLong */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hslLong\", function() { return hslLong; });\n/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ \"./node_modules/d3-color/src/index.js\");\n/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color.js */ \"./node_modules/d3-interpolate/src/color.js\");\n\n\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__[\"hsl\"])(start)).h, (end = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__[\"hsl\"])(end)).h),\n        s = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(start.s, end.s),\n        l = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(start.l, end.l),\n        opacity = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (hsl(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"hue\"]));\nvar hslLong = hsl(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/hsl.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/hue.js":
/*!************************************************!*\
  !*** ./node_modules/d3-interpolate/src/hue.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./color.js */ \"./node_modules/d3-interpolate/src/color.js\");\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(a, b) {\n  var i = Object(_color_js__WEBPACK_IMPORTED_MODULE_0__[\"hue\"])(+a, +b);\n  return function(t) {\n    var x = i(t);\n    return x - 360 * Math.floor(x / 360);\n  };\n});\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/hue.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/index.js":
/*!**************************************************!*\
  !*** ./node_modules/d3-interpolate/src/index.js ***!
  \**************************************************/
/*! exports provided: interpolate, interpolateArray, interpolateBasis, interpolateBasisClosed, interpolateDate, interpolateDiscrete, interpolateHue, interpolateNumber, interpolateNumberArray, interpolateObject, interpolateRound, interpolateString, interpolateTransformCss, interpolateTransformSvg, interpolateZoom, interpolateRgb, interpolateRgbBasis, interpolateRgbBasisClosed, interpolateHsl, interpolateHslLong, interpolateLab, interpolateHcl, interpolateHclLong, interpolateCubehelix, interpolateCubehelixLong, piecewise, quantize */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./value.js */ \"./node_modules/d3-interpolate/src/value.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolate\", function() { return _value_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]; });\n\n/* harmony import */ var _array_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./array.js */ \"./node_modules/d3-interpolate/src/array.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateArray\", function() { return _array_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]; });\n\n/* harmony import */ var _basis_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./basis.js */ \"./node_modules/d3-interpolate/src/basis.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateBasis\", function() { return _basis_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]; });\n\n/* harmony import */ var _basisClosed_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./basisClosed.js */ \"./node_modules/d3-interpolate/src/basisClosed.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateBasisClosed\", function() { return _basisClosed_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]; });\n\n/* harmony import */ var _date_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./date.js */ \"./node_modules/d3-interpolate/src/date.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateDate\", function() { return _date_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]; });\n\n/* harmony import */ var _discrete_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./discrete.js */ \"./node_modules/d3-interpolate/src/discrete.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateDiscrete\", function() { return _discrete_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]; });\n\n/* harmony import */ var _hue_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./hue.js */ \"./node_modules/d3-interpolate/src/hue.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateHue\", function() { return _hue_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]; });\n\n/* harmony import */ var _number_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./number.js */ \"./node_modules/d3-interpolate/src/number.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateNumber\", function() { return _number_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"]; });\n\n/* harmony import */ var _numberArray_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./numberArray.js */ \"./node_modules/d3-interpolate/src/numberArray.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateNumberArray\", function() { return _numberArray_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"]; });\n\n/* harmony import */ var _object_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./object.js */ \"./node_modules/d3-interpolate/src/object.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateObject\", function() { return _object_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]; });\n\n/* harmony import */ var _round_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./round.js */ \"./node_modules/d3-interpolate/src/round.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateRound\", function() { return _round_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"]; });\n\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./string.js */ \"./node_modules/d3-interpolate/src/string.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateString\", function() { return _string_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"]; });\n\n/* harmony import */ var _transform_index_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./transform/index.js */ \"./node_modules/d3-interpolate/src/transform/index.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateTransformCss\", function() { return _transform_index_js__WEBPACK_IMPORTED_MODULE_12__[\"interpolateTransformCss\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateTransformSvg\", function() { return _transform_index_js__WEBPACK_IMPORTED_MODULE_12__[\"interpolateTransformSvg\"]; });\n\n/* harmony import */ var _zoom_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./zoom.js */ \"./node_modules/d3-interpolate/src/zoom.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateZoom\", function() { return _zoom_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"]; });\n\n/* harmony import */ var _rgb_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./rgb.js */ \"./node_modules/d3-interpolate/src/rgb.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateRgb\", function() { return _rgb_js__WEBPACK_IMPORTED_MODULE_14__[\"default\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateRgbBasis\", function() { return _rgb_js__WEBPACK_IMPORTED_MODULE_14__[\"rgbBasis\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateRgbBasisClosed\", function() { return _rgb_js__WEBPACK_IMPORTED_MODULE_14__[\"rgbBasisClosed\"]; });\n\n/* harmony import */ var _hsl_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./hsl.js */ \"./node_modules/d3-interpolate/src/hsl.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateHsl\", function() { return _hsl_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateHslLong\", function() { return _hsl_js__WEBPACK_IMPORTED_MODULE_15__[\"hslLong\"]; });\n\n/* harmony import */ var _lab_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./lab.js */ \"./node_modules/d3-interpolate/src/lab.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateLab\", function() { return _lab_js__WEBPACK_IMPORTED_MODULE_16__[\"default\"]; });\n\n/* harmony import */ var _hcl_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./hcl.js */ \"./node_modules/d3-interpolate/src/hcl.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateHcl\", function() { return _hcl_js__WEBPACK_IMPORTED_MODULE_17__[\"default\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateHclLong\", function() { return _hcl_js__WEBPACK_IMPORTED_MODULE_17__[\"hclLong\"]; });\n\n/* harmony import */ var _cubehelix_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./cubehelix.js */ \"./node_modules/d3-interpolate/src/cubehelix.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateCubehelix\", function() { return _cubehelix_js__WEBPACK_IMPORTED_MODULE_18__[\"default\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"interpolateCubehelixLong\", function() { return _cubehelix_js__WEBPACK_IMPORTED_MODULE_18__[\"cubehelixLong\"]; });\n\n/* harmony import */ var _piecewise_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./piecewise.js */ \"./node_modules/d3-interpolate/src/piecewise.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"piecewise\", function() { return _piecewise_js__WEBPACK_IMPORTED_MODULE_19__[\"default\"]; });\n\n/* harmony import */ var _quantize_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./quantize.js */ \"./node_modules/d3-interpolate/src/quantize.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"quantize\", function() { return _quantize_js__WEBPACK_IMPORTED_MODULE_20__[\"default\"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/index.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/lab.js":
/*!************************************************!*\
  !*** ./node_modules/d3-interpolate/src/lab.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return lab; });\n/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ \"./node_modules/d3-color/src/index.js\");\n/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color.js */ \"./node_modules/d3-interpolate/src/color.js\");\n\n\n\nfunction lab(start, end) {\n  var l = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((start = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__[\"lab\"])(start)).l, (end = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__[\"lab\"])(end)).l),\n      a = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(start.a, end.a),\n      b = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(start.b, end.b),\n      opacity = Object(_color_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(start.opacity, end.opacity);\n  return function(t) {\n    start.l = l(t);\n    start.a = a(t);\n    start.b = b(t);\n    start.opacity = opacity(t);\n    return start + \"\";\n  };\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/lab.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/number.js":
/*!***************************************************!*\
  !*** ./node_modules/d3-interpolate/src/number.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n});\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/number.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/numberArray.js":
/*!********************************************************!*\
  !*** ./node_modules/d3-interpolate/src/numberArray.js ***!
  \********************************************************/
/*! exports provided: default, isNumberArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isNumberArray\", function() { return isNumberArray; });\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n});\n\nfunction isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/numberArray.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/object.js":
/*!***************************************************!*\
  !*** ./node_modules/d3-interpolate/src/object.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./value.js */ \"./node_modules/d3-interpolate/src/value.js\");\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = Object(_value_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n});\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/object.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/piecewise.js":
/*!******************************************************!*\
  !*** ./node_modules/d3-interpolate/src/piecewise.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return piecewise; });\n/* harmony import */ var _value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./value.js */ \"./node_modules/d3-interpolate/src/value.js\");\n\n\nfunction piecewise(interpolate, values) {\n  if (values === undefined) values = interpolate, interpolate = _value_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n  var i = 0, n = values.length - 1, v = values[0], I = new Array(n < 0 ? 0 : n);\n  while (i < n) I[i] = interpolate(v, v = values[++i]);\n  return function(t) {\n    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));\n    return I[i](t - i);\n  };\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/piecewise.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/quantize.js":
/*!*****************************************************!*\
  !*** ./node_modules/d3-interpolate/src/quantize.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(interpolator, n) {\n  var samples = new Array(n);\n  for (var i = 0; i < n; ++i) samples[i] = interpolator(i / (n - 1));\n  return samples;\n});\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/quantize.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/rgb.js":
/*!************************************************!*\
  !*** ./node_modules/d3-interpolate/src/rgb.js ***!
  \************************************************/
/*! exports provided: default, rgbBasis, rgbBasisClosed */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rgbBasis\", function() { return rgbBasis; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rgbBasisClosed\", function() { return rgbBasisClosed; });\n/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ \"./node_modules/d3-color/src/index.js\");\n/* harmony import */ var _basis_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./basis.js */ \"./node_modules/d3-interpolate/src/basis.js\");\n/* harmony import */ var _basisClosed_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./basisClosed.js */ \"./node_modules/d3-interpolate/src/basisClosed.js\");\n/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./color.js */ \"./node_modules/d3-interpolate/src/color.js\");\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((function rgbGamma(y) {\n  var color = Object(_color_js__WEBPACK_IMPORTED_MODULE_3__[\"gamma\"])(y);\n\n  function rgb(start, end) {\n    var r = color((start = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__[\"rgb\"])(start)).r, (end = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__[\"rgb\"])(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = Object(_color_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1));\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__[\"rgb\"])(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nvar rgbBasis = rgbSpline(_basis_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\nvar rgbBasisClosed = rgbSpline(_basisClosed_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/rgb.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/round.js":
/*!**************************************************!*\
  !*** ./node_modules/d3-interpolate/src/round.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n});\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/round.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/string.js":
/*!***************************************************!*\
  !*** ./node_modules/d3-interpolate/src/string.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _number_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./number.js */ \"./node_modules/d3-interpolate/src/number.js\");\n\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: Object(_number_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n});\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/string.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/transform/decompose.js":
/*!****************************************************************!*\
  !*** ./node_modules/d3-interpolate/src/transform/decompose.js ***!
  \****************************************************************/
/*! exports provided: identity, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"identity\", function() { return identity; });\nvar degrees = 180 / Math.PI;\n\nvar identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n});\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/transform/decompose.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/transform/index.js":
/*!************************************************************!*\
  !*** ./node_modules/d3-interpolate/src/transform/index.js ***!
  \************************************************************/
/*! exports provided: interpolateTransformCss, interpolateTransformSvg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateTransformCss\", function() { return interpolateTransformCss; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateTransformSvg\", function() { return interpolateTransformSvg; });\n/* harmony import */ var _number_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../number.js */ \"./node_modules/d3-interpolate/src/number.js\");\n/* harmony import */ var _parse_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parse.js */ \"./node_modules/d3-interpolate/src/transform/parse.js\");\n\n\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: Object(_number_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(xa, xb)}, {i: i - 2, x: Object(_number_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: Object(_number_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: Object(_number_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: Object(_number_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(xa, xb)}, {i: i - 2, x: Object(_number_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nvar interpolateTransformCss = interpolateTransform(_parse_js__WEBPACK_IMPORTED_MODULE_1__[\"parseCss\"], \"px, \", \"px)\", \"deg)\");\nvar interpolateTransformSvg = interpolateTransform(_parse_js__WEBPACK_IMPORTED_MODULE_1__[\"parseSvg\"], \", \", \")\", \")\");\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/transform/index.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/transform/parse.js":
/*!************************************************************!*\
  !*** ./node_modules/d3-interpolate/src/transform/parse.js ***!
  \************************************************************/
/*! exports provided: parseCss, parseSvg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"parseCss\", function() { return parseCss; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"parseSvg\", function() { return parseSvg; });\n/* harmony import */ var _decompose_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./decompose.js */ \"./node_modules/d3-interpolate/src/transform/decompose.js\");\n\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nfunction parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? _decompose_js__WEBPACK_IMPORTED_MODULE_0__[\"identity\"] : Object(_decompose_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nfunction parseSvg(value) {\n  if (value == null) return _decompose_js__WEBPACK_IMPORTED_MODULE_0__[\"identity\"];\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return _decompose_js__WEBPACK_IMPORTED_MODULE_0__[\"identity\"];\n  value = value.matrix;\n  return Object(_decompose_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/transform/parse.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/value.js":
/*!**************************************************!*\
  !*** ./node_modules/d3-interpolate/src/value.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var d3_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-color */ \"./node_modules/d3-color/src/index.js\");\n/* harmony import */ var _rgb_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rgb.js */ \"./node_modules/d3-interpolate/src/rgb.js\");\n/* harmony import */ var _array_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./array.js */ \"./node_modules/d3-interpolate/src/array.js\");\n/* harmony import */ var _date_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./date.js */ \"./node_modules/d3-interpolate/src/date.js\");\n/* harmony import */ var _number_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./number.js */ \"./node_modules/d3-interpolate/src/number.js\");\n/* harmony import */ var _object_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./object.js */ \"./node_modules/d3-interpolate/src/object.js\");\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./string.js */ \"./node_modules/d3-interpolate/src/string.js\");\n/* harmony import */ var _constant_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./constant.js */ \"./node_modules/d3-interpolate/src/constant.js\");\n/* harmony import */ var _numberArray_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./numberArray.js */ \"./node_modules/d3-interpolate/src/numberArray.js\");\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? Object(_constant_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(b)\n      : (t === \"number\" ? _number_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]\n      : t === \"string\" ? ((c = Object(d3_color__WEBPACK_IMPORTED_MODULE_0__[\"color\"])(b)) ? (b = c, _rgb_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]) : _string_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])\n      : b instanceof d3_color__WEBPACK_IMPORTED_MODULE_0__[\"color\"] ? _rgb_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]\n      : b instanceof Date ? _date_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n      : Object(_numberArray_js__WEBPACK_IMPORTED_MODULE_8__[\"isNumberArray\"])(b) ? _numberArray_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"]\n      : Array.isArray(b) ? _array_js__WEBPACK_IMPORTED_MODULE_2__[\"genericArray\"]\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? _object_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]\n      : _number_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(a, b);\n});\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/value.js?");

/***/ }),

/***/ "./node_modules/d3-interpolate/src/zoom.js":
/*!*************************************************!*\
  !*** ./node_modules/d3-interpolate/src/zoom.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0 ≅ u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4));\n\n\n//# sourceURL=webpack://Game/./node_modules/d3-interpolate/src/zoom.js?");

/***/ }),

/***/ "./node_modules/des.js/lib/des.js":
/*!****************************************!*\
  !*** ./node_modules/des.js/lib/des.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nexports.utils = __webpack_require__(/*! ./des/utils */ \"./node_modules/des.js/lib/des/utils.js\");\nexports.Cipher = __webpack_require__(/*! ./des/cipher */ \"./node_modules/des.js/lib/des/cipher.js\");\nexports.DES = __webpack_require__(/*! ./des/des */ \"./node_modules/des.js/lib/des/des.js\");\nexports.CBC = __webpack_require__(/*! ./des/cbc */ \"./node_modules/des.js/lib/des/cbc.js\");\nexports.EDE = __webpack_require__(/*! ./des/ede */ \"./node_modules/des.js/lib/des/ede.js\");\n\n\n//# sourceURL=webpack://Game/./node_modules/des.js/lib/des.js?");

/***/ }),

/***/ "./node_modules/des.js/lib/des/cbc.js":
/*!********************************************!*\
  !*** ./node_modules/des.js/lib/des/cbc.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar assert = __webpack_require__(/*! minimalistic-assert */ \"./node_modules/minimalistic-assert/index.js\");\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n\nvar proto = {};\n\nfunction CBCState(iv) {\n  assert.equal(iv.length, 8, 'Invalid IV length');\n\n  this.iv = new Array(8);\n  for (var i = 0; i < this.iv.length; i++)\n    this.iv[i] = iv[i];\n}\n\nfunction instantiate(Base) {\n  function CBC(options) {\n    Base.call(this, options);\n    this._cbcInit();\n  }\n  inherits(CBC, Base);\n\n  var keys = Object.keys(proto);\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    CBC.prototype[key] = proto[key];\n  }\n\n  CBC.create = function create(options) {\n    return new CBC(options);\n  };\n\n  return CBC;\n}\n\nexports.instantiate = instantiate;\n\nproto._cbcInit = function _cbcInit() {\n  var state = new CBCState(this.options.iv);\n  this._cbcState = state;\n};\n\nproto._update = function _update(inp, inOff, out, outOff) {\n  var state = this._cbcState;\n  var superProto = this.constructor.super_.prototype;\n\n  var iv = state.iv;\n  if (this.type === 'encrypt') {\n    for (var i = 0; i < this.blockSize; i++)\n      iv[i] ^= inp[inOff + i];\n\n    superProto._update.call(this, iv, 0, out, outOff);\n\n    for (var i = 0; i < this.blockSize; i++)\n      iv[i] = out[outOff + i];\n  } else {\n    superProto._update.call(this, inp, inOff, out, outOff);\n\n    for (var i = 0; i < this.blockSize; i++)\n      out[outOff + i] ^= iv[i];\n\n    for (var i = 0; i < this.blockSize; i++)\n      iv[i] = inp[inOff + i];\n  }\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/des.js/lib/des/cbc.js?");

/***/ }),

/***/ "./node_modules/des.js/lib/des/cipher.js":
/*!***********************************************!*\
  !*** ./node_modules/des.js/lib/des/cipher.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar assert = __webpack_require__(/*! minimalistic-assert */ \"./node_modules/minimalistic-assert/index.js\");\n\nfunction Cipher(options) {\n  this.options = options;\n\n  this.type = this.options.type;\n  this.blockSize = 8;\n  this._init();\n\n  this.buffer = new Array(this.blockSize);\n  this.bufferOff = 0;\n}\nmodule.exports = Cipher;\n\nCipher.prototype._init = function _init() {\n  // Might be overrided\n};\n\nCipher.prototype.update = function update(data) {\n  if (data.length === 0)\n    return [];\n\n  if (this.type === 'decrypt')\n    return this._updateDecrypt(data);\n  else\n    return this._updateEncrypt(data);\n};\n\nCipher.prototype._buffer = function _buffer(data, off) {\n  // Append data to buffer\n  var min = Math.min(this.buffer.length - this.bufferOff, data.length - off);\n  for (var i = 0; i < min; i++)\n    this.buffer[this.bufferOff + i] = data[off + i];\n  this.bufferOff += min;\n\n  // Shift next\n  return min;\n};\n\nCipher.prototype._flushBuffer = function _flushBuffer(out, off) {\n  this._update(this.buffer, 0, out, off);\n  this.bufferOff = 0;\n  return this.blockSize;\n};\n\nCipher.prototype._updateEncrypt = function _updateEncrypt(data) {\n  var inputOff = 0;\n  var outputOff = 0;\n\n  var count = ((this.bufferOff + data.length) / this.blockSize) | 0;\n  var out = new Array(count * this.blockSize);\n\n  if (this.bufferOff !== 0) {\n    inputOff += this._buffer(data, inputOff);\n\n    if (this.bufferOff === this.buffer.length)\n      outputOff += this._flushBuffer(out, outputOff);\n  }\n\n  // Write blocks\n  var max = data.length - ((data.length - inputOff) % this.blockSize);\n  for (; inputOff < max; inputOff += this.blockSize) {\n    this._update(data, inputOff, out, outputOff);\n    outputOff += this.blockSize;\n  }\n\n  // Queue rest\n  for (; inputOff < data.length; inputOff++, this.bufferOff++)\n    this.buffer[this.bufferOff] = data[inputOff];\n\n  return out;\n};\n\nCipher.prototype._updateDecrypt = function _updateDecrypt(data) {\n  var inputOff = 0;\n  var outputOff = 0;\n\n  var count = Math.ceil((this.bufferOff + data.length) / this.blockSize) - 1;\n  var out = new Array(count * this.blockSize);\n\n  // TODO(indutny): optimize it, this is far from optimal\n  for (; count > 0; count--) {\n    inputOff += this._buffer(data, inputOff);\n    outputOff += this._flushBuffer(out, outputOff);\n  }\n\n  // Buffer rest of the input\n  inputOff += this._buffer(data, inputOff);\n\n  return out;\n};\n\nCipher.prototype.final = function final(buffer) {\n  var first;\n  if (buffer)\n    first = this.update(buffer);\n\n  var last;\n  if (this.type === 'encrypt')\n    last = this._finalEncrypt();\n  else\n    last = this._finalDecrypt();\n\n  if (first)\n    return first.concat(last);\n  else\n    return last;\n};\n\nCipher.prototype._pad = function _pad(buffer, off) {\n  if (off === 0)\n    return false;\n\n  while (off < buffer.length)\n    buffer[off++] = 0;\n\n  return true;\n};\n\nCipher.prototype._finalEncrypt = function _finalEncrypt() {\n  if (!this._pad(this.buffer, this.bufferOff))\n    return [];\n\n  var out = new Array(this.blockSize);\n  this._update(this.buffer, 0, out, 0);\n  return out;\n};\n\nCipher.prototype._unpad = function _unpad(buffer) {\n  return buffer;\n};\n\nCipher.prototype._finalDecrypt = function _finalDecrypt() {\n  assert.equal(this.bufferOff, this.blockSize, 'Not enough data to decrypt');\n  var out = new Array(this.blockSize);\n  this._flushBuffer(out, 0);\n\n  return this._unpad(out);\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/des.js/lib/des/cipher.js?");

/***/ }),

/***/ "./node_modules/des.js/lib/des/des.js":
/*!********************************************!*\
  !*** ./node_modules/des.js/lib/des/des.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar assert = __webpack_require__(/*! minimalistic-assert */ \"./node_modules/minimalistic-assert/index.js\");\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n\nvar utils = __webpack_require__(/*! ./utils */ \"./node_modules/des.js/lib/des/utils.js\");\nvar Cipher = __webpack_require__(/*! ./cipher */ \"./node_modules/des.js/lib/des/cipher.js\");\n\nfunction DESState() {\n  this.tmp = new Array(2);\n  this.keys = null;\n}\n\nfunction DES(options) {\n  Cipher.call(this, options);\n\n  var state = new DESState();\n  this._desState = state;\n\n  this.deriveKeys(state, options.key);\n}\ninherits(DES, Cipher);\nmodule.exports = DES;\n\nDES.create = function create(options) {\n  return new DES(options);\n};\n\nvar shiftTable = [\n  1, 1, 2, 2, 2, 2, 2, 2,\n  1, 2, 2, 2, 2, 2, 2, 1\n];\n\nDES.prototype.deriveKeys = function deriveKeys(state, key) {\n  state.keys = new Array(16 * 2);\n\n  assert.equal(key.length, this.blockSize, 'Invalid key length');\n\n  var kL = utils.readUInt32BE(key, 0);\n  var kR = utils.readUInt32BE(key, 4);\n\n  utils.pc1(kL, kR, state.tmp, 0);\n  kL = state.tmp[0];\n  kR = state.tmp[1];\n  for (var i = 0; i < state.keys.length; i += 2) {\n    var shift = shiftTable[i >>> 1];\n    kL = utils.r28shl(kL, shift);\n    kR = utils.r28shl(kR, shift);\n    utils.pc2(kL, kR, state.keys, i);\n  }\n};\n\nDES.prototype._update = function _update(inp, inOff, out, outOff) {\n  var state = this._desState;\n\n  var l = utils.readUInt32BE(inp, inOff);\n  var r = utils.readUInt32BE(inp, inOff + 4);\n\n  // Initial Permutation\n  utils.ip(l, r, state.tmp, 0);\n  l = state.tmp[0];\n  r = state.tmp[1];\n\n  if (this.type === 'encrypt')\n    this._encrypt(state, l, r, state.tmp, 0);\n  else\n    this._decrypt(state, l, r, state.tmp, 0);\n\n  l = state.tmp[0];\n  r = state.tmp[1];\n\n  utils.writeUInt32BE(out, l, outOff);\n  utils.writeUInt32BE(out, r, outOff + 4);\n};\n\nDES.prototype._pad = function _pad(buffer, off) {\n  var value = buffer.length - off;\n  for (var i = off; i < buffer.length; i++)\n    buffer[i] = value;\n\n  return true;\n};\n\nDES.prototype._unpad = function _unpad(buffer) {\n  var pad = buffer[buffer.length - 1];\n  for (var i = buffer.length - pad; i < buffer.length; i++)\n    assert.equal(buffer[i], pad);\n\n  return buffer.slice(0, buffer.length - pad);\n};\n\nDES.prototype._encrypt = function _encrypt(state, lStart, rStart, out, off) {\n  var l = lStart;\n  var r = rStart;\n\n  // Apply f() x16 times\n  for (var i = 0; i < state.keys.length; i += 2) {\n    var keyL = state.keys[i];\n    var keyR = state.keys[i + 1];\n\n    // f(r, k)\n    utils.expand(r, state.tmp, 0);\n\n    keyL ^= state.tmp[0];\n    keyR ^= state.tmp[1];\n    var s = utils.substitute(keyL, keyR);\n    var f = utils.permute(s);\n\n    var t = r;\n    r = (l ^ f) >>> 0;\n    l = t;\n  }\n\n  // Reverse Initial Permutation\n  utils.rip(r, l, out, off);\n};\n\nDES.prototype._decrypt = function _decrypt(state, lStart, rStart, out, off) {\n  var l = rStart;\n  var r = lStart;\n\n  // Apply f() x16 times\n  for (var i = state.keys.length - 2; i >= 0; i -= 2) {\n    var keyL = state.keys[i];\n    var keyR = state.keys[i + 1];\n\n    // f(r, k)\n    utils.expand(l, state.tmp, 0);\n\n    keyL ^= state.tmp[0];\n    keyR ^= state.tmp[1];\n    var s = utils.substitute(keyL, keyR);\n    var f = utils.permute(s);\n\n    var t = l;\n    l = (r ^ f) >>> 0;\n    r = t;\n  }\n\n  // Reverse Initial Permutation\n  utils.rip(l, r, out, off);\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/des.js/lib/des/des.js?");

/***/ }),

/***/ "./node_modules/des.js/lib/des/ede.js":
/*!********************************************!*\
  !*** ./node_modules/des.js/lib/des/ede.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar assert = __webpack_require__(/*! minimalistic-assert */ \"./node_modules/minimalistic-assert/index.js\");\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n\nvar Cipher = __webpack_require__(/*! ./cipher */ \"./node_modules/des.js/lib/des/cipher.js\");\nvar DES = __webpack_require__(/*! ./des */ \"./node_modules/des.js/lib/des/des.js\");\n\nfunction EDEState(type, key) {\n  assert.equal(key.length, 24, 'Invalid key length');\n\n  var k1 = key.slice(0, 8);\n  var k2 = key.slice(8, 16);\n  var k3 = key.slice(16, 24);\n\n  if (type === 'encrypt') {\n    this.ciphers = [\n      DES.create({ type: 'encrypt', key: k1 }),\n      DES.create({ type: 'decrypt', key: k2 }),\n      DES.create({ type: 'encrypt', key: k3 })\n    ];\n  } else {\n    this.ciphers = [\n      DES.create({ type: 'decrypt', key: k3 }),\n      DES.create({ type: 'encrypt', key: k2 }),\n      DES.create({ type: 'decrypt', key: k1 })\n    ];\n  }\n}\n\nfunction EDE(options) {\n  Cipher.call(this, options);\n\n  var state = new EDEState(this.type, this.options.key);\n  this._edeState = state;\n}\ninherits(EDE, Cipher);\n\nmodule.exports = EDE;\n\nEDE.create = function create(options) {\n  return new EDE(options);\n};\n\nEDE.prototype._update = function _update(inp, inOff, out, outOff) {\n  var state = this._edeState;\n\n  state.ciphers[0]._update(inp, inOff, out, outOff);\n  state.ciphers[1]._update(out, outOff, out, outOff);\n  state.ciphers[2]._update(out, outOff, out, outOff);\n};\n\nEDE.prototype._pad = DES.prototype._pad;\nEDE.prototype._unpad = DES.prototype._unpad;\n\n\n//# sourceURL=webpack://Game/./node_modules/des.js/lib/des/ede.js?");

/***/ }),

/***/ "./node_modules/des.js/lib/des/utils.js":
/*!**********************************************!*\
  !*** ./node_modules/des.js/lib/des/utils.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nexports.readUInt32BE = function readUInt32BE(bytes, off) {\n  var res =  (bytes[0 + off] << 24) |\n             (bytes[1 + off] << 16) |\n             (bytes[2 + off] << 8) |\n             bytes[3 + off];\n  return res >>> 0;\n};\n\nexports.writeUInt32BE = function writeUInt32BE(bytes, value, off) {\n  bytes[0 + off] = value >>> 24;\n  bytes[1 + off] = (value >>> 16) & 0xff;\n  bytes[2 + off] = (value >>> 8) & 0xff;\n  bytes[3 + off] = value & 0xff;\n};\n\nexports.ip = function ip(inL, inR, out, off) {\n  var outL = 0;\n  var outR = 0;\n\n  for (var i = 6; i >= 0; i -= 2) {\n    for (var j = 0; j <= 24; j += 8) {\n      outL <<= 1;\n      outL |= (inR >>> (j + i)) & 1;\n    }\n    for (var j = 0; j <= 24; j += 8) {\n      outL <<= 1;\n      outL |= (inL >>> (j + i)) & 1;\n    }\n  }\n\n  for (var i = 6; i >= 0; i -= 2) {\n    for (var j = 1; j <= 25; j += 8) {\n      outR <<= 1;\n      outR |= (inR >>> (j + i)) & 1;\n    }\n    for (var j = 1; j <= 25; j += 8) {\n      outR <<= 1;\n      outR |= (inL >>> (j + i)) & 1;\n    }\n  }\n\n  out[off + 0] = outL >>> 0;\n  out[off + 1] = outR >>> 0;\n};\n\nexports.rip = function rip(inL, inR, out, off) {\n  var outL = 0;\n  var outR = 0;\n\n  for (var i = 0; i < 4; i++) {\n    for (var j = 24; j >= 0; j -= 8) {\n      outL <<= 1;\n      outL |= (inR >>> (j + i)) & 1;\n      outL <<= 1;\n      outL |= (inL >>> (j + i)) & 1;\n    }\n  }\n  for (var i = 4; i < 8; i++) {\n    for (var j = 24; j >= 0; j -= 8) {\n      outR <<= 1;\n      outR |= (inR >>> (j + i)) & 1;\n      outR <<= 1;\n      outR |= (inL >>> (j + i)) & 1;\n    }\n  }\n\n  out[off + 0] = outL >>> 0;\n  out[off + 1] = outR >>> 0;\n};\n\nexports.pc1 = function pc1(inL, inR, out, off) {\n  var outL = 0;\n  var outR = 0;\n\n  // 7, 15, 23, 31, 39, 47, 55, 63\n  // 6, 14, 22, 30, 39, 47, 55, 63\n  // 5, 13, 21, 29, 39, 47, 55, 63\n  // 4, 12, 20, 28\n  for (var i = 7; i >= 5; i--) {\n    for (var j = 0; j <= 24; j += 8) {\n      outL <<= 1;\n      outL |= (inR >> (j + i)) & 1;\n    }\n    for (var j = 0; j <= 24; j += 8) {\n      outL <<= 1;\n      outL |= (inL >> (j + i)) & 1;\n    }\n  }\n  for (var j = 0; j <= 24; j += 8) {\n    outL <<= 1;\n    outL |= (inR >> (j + i)) & 1;\n  }\n\n  // 1, 9, 17, 25, 33, 41, 49, 57\n  // 2, 10, 18, 26, 34, 42, 50, 58\n  // 3, 11, 19, 27, 35, 43, 51, 59\n  // 36, 44, 52, 60\n  for (var i = 1; i <= 3; i++) {\n    for (var j = 0; j <= 24; j += 8) {\n      outR <<= 1;\n      outR |= (inR >> (j + i)) & 1;\n    }\n    for (var j = 0; j <= 24; j += 8) {\n      outR <<= 1;\n      outR |= (inL >> (j + i)) & 1;\n    }\n  }\n  for (var j = 0; j <= 24; j += 8) {\n    outR <<= 1;\n    outR |= (inL >> (j + i)) & 1;\n  }\n\n  out[off + 0] = outL >>> 0;\n  out[off + 1] = outR >>> 0;\n};\n\nexports.r28shl = function r28shl(num, shift) {\n  return ((num << shift) & 0xfffffff) | (num >>> (28 - shift));\n};\n\nvar pc2table = [\n  // inL => outL\n  14, 11, 17, 4, 27, 23, 25, 0,\n  13, 22, 7, 18, 5, 9, 16, 24,\n  2, 20, 12, 21, 1, 8, 15, 26,\n\n  // inR => outR\n  15, 4, 25, 19, 9, 1, 26, 16,\n  5, 11, 23, 8, 12, 7, 17, 0,\n  22, 3, 10, 14, 6, 20, 27, 24\n];\n\nexports.pc2 = function pc2(inL, inR, out, off) {\n  var outL = 0;\n  var outR = 0;\n\n  var len = pc2table.length >>> 1;\n  for (var i = 0; i < len; i++) {\n    outL <<= 1;\n    outL |= (inL >>> pc2table[i]) & 0x1;\n  }\n  for (var i = len; i < pc2table.length; i++) {\n    outR <<= 1;\n    outR |= (inR >>> pc2table[i]) & 0x1;\n  }\n\n  out[off + 0] = outL >>> 0;\n  out[off + 1] = outR >>> 0;\n};\n\nexports.expand = function expand(r, out, off) {\n  var outL = 0;\n  var outR = 0;\n\n  outL = ((r & 1) << 5) | (r >>> 27);\n  for (var i = 23; i >= 15; i -= 4) {\n    outL <<= 6;\n    outL |= (r >>> i) & 0x3f;\n  }\n  for (var i = 11; i >= 3; i -= 4) {\n    outR |= (r >>> i) & 0x3f;\n    outR <<= 6;\n  }\n  outR |= ((r & 0x1f) << 1) | (r >>> 31);\n\n  out[off + 0] = outL >>> 0;\n  out[off + 1] = outR >>> 0;\n};\n\nvar sTable = [\n  14, 0, 4, 15, 13, 7, 1, 4, 2, 14, 15, 2, 11, 13, 8, 1,\n  3, 10, 10, 6, 6, 12, 12, 11, 5, 9, 9, 5, 0, 3, 7, 8,\n  4, 15, 1, 12, 14, 8, 8, 2, 13, 4, 6, 9, 2, 1, 11, 7,\n  15, 5, 12, 11, 9, 3, 7, 14, 3, 10, 10, 0, 5, 6, 0, 13,\n\n  15, 3, 1, 13, 8, 4, 14, 7, 6, 15, 11, 2, 3, 8, 4, 14,\n  9, 12, 7, 0, 2, 1, 13, 10, 12, 6, 0, 9, 5, 11, 10, 5,\n  0, 13, 14, 8, 7, 10, 11, 1, 10, 3, 4, 15, 13, 4, 1, 2,\n  5, 11, 8, 6, 12, 7, 6, 12, 9, 0, 3, 5, 2, 14, 15, 9,\n\n  10, 13, 0, 7, 9, 0, 14, 9, 6, 3, 3, 4, 15, 6, 5, 10,\n  1, 2, 13, 8, 12, 5, 7, 14, 11, 12, 4, 11, 2, 15, 8, 1,\n  13, 1, 6, 10, 4, 13, 9, 0, 8, 6, 15, 9, 3, 8, 0, 7,\n  11, 4, 1, 15, 2, 14, 12, 3, 5, 11, 10, 5, 14, 2, 7, 12,\n\n  7, 13, 13, 8, 14, 11, 3, 5, 0, 6, 6, 15, 9, 0, 10, 3,\n  1, 4, 2, 7, 8, 2, 5, 12, 11, 1, 12, 10, 4, 14, 15, 9,\n  10, 3, 6, 15, 9, 0, 0, 6, 12, 10, 11, 1, 7, 13, 13, 8,\n  15, 9, 1, 4, 3, 5, 14, 11, 5, 12, 2, 7, 8, 2, 4, 14,\n\n  2, 14, 12, 11, 4, 2, 1, 12, 7, 4, 10, 7, 11, 13, 6, 1,\n  8, 5, 5, 0, 3, 15, 15, 10, 13, 3, 0, 9, 14, 8, 9, 6,\n  4, 11, 2, 8, 1, 12, 11, 7, 10, 1, 13, 14, 7, 2, 8, 13,\n  15, 6, 9, 15, 12, 0, 5, 9, 6, 10, 3, 4, 0, 5, 14, 3,\n\n  12, 10, 1, 15, 10, 4, 15, 2, 9, 7, 2, 12, 6, 9, 8, 5,\n  0, 6, 13, 1, 3, 13, 4, 14, 14, 0, 7, 11, 5, 3, 11, 8,\n  9, 4, 14, 3, 15, 2, 5, 12, 2, 9, 8, 5, 12, 15, 3, 10,\n  7, 11, 0, 14, 4, 1, 10, 7, 1, 6, 13, 0, 11, 8, 6, 13,\n\n  4, 13, 11, 0, 2, 11, 14, 7, 15, 4, 0, 9, 8, 1, 13, 10,\n  3, 14, 12, 3, 9, 5, 7, 12, 5, 2, 10, 15, 6, 8, 1, 6,\n  1, 6, 4, 11, 11, 13, 13, 8, 12, 1, 3, 4, 7, 10, 14, 7,\n  10, 9, 15, 5, 6, 0, 8, 15, 0, 14, 5, 2, 9, 3, 2, 12,\n\n  13, 1, 2, 15, 8, 13, 4, 8, 6, 10, 15, 3, 11, 7, 1, 4,\n  10, 12, 9, 5, 3, 6, 14, 11, 5, 0, 0, 14, 12, 9, 7, 2,\n  7, 2, 11, 1, 4, 14, 1, 7, 9, 4, 12, 10, 14, 8, 2, 13,\n  0, 15, 6, 12, 10, 9, 13, 0, 15, 3, 3, 5, 5, 6, 8, 11\n];\n\nexports.substitute = function substitute(inL, inR) {\n  var out = 0;\n  for (var i = 0; i < 4; i++) {\n    var b = (inL >>> (18 - i * 6)) & 0x3f;\n    var sb = sTable[i * 0x40 + b];\n\n    out <<= 4;\n    out |= sb;\n  }\n  for (var i = 0; i < 4; i++) {\n    var b = (inR >>> (18 - i * 6)) & 0x3f;\n    var sb = sTable[4 * 0x40 + i * 0x40 + b];\n\n    out <<= 4;\n    out |= sb;\n  }\n  return out >>> 0;\n};\n\nvar permuteTable = [\n  16, 25, 12, 11, 3, 20, 4, 15, 31, 17, 9, 6, 27, 14, 1, 22,\n  30, 24, 8, 18, 0, 5, 29, 23, 13, 19, 2, 26, 10, 21, 28, 7\n];\n\nexports.permute = function permute(num) {\n  var out = 0;\n  for (var i = 0; i < permuteTable.length; i++) {\n    out <<= 1;\n    out |= (num >>> permuteTable[i]) & 0x1;\n  }\n  return out >>> 0;\n};\n\nexports.padSplit = function padSplit(num, size, group) {\n  var str = num.toString(2);\n  while (str.length < size)\n    str = '0' + str;\n\n  var out = [];\n  for (var i = 0; i < size; i += group)\n    out.push(str.slice(i, i + group));\n  return out.join(' ');\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/des.js/lib/des/utils.js?");

/***/ }),

/***/ "./node_modules/diffie-hellman/browser.js":
/*!************************************************!*\
  !*** ./node_modules/diffie-hellman/browser.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(Buffer) {var generatePrime = __webpack_require__(/*! ./lib/generatePrime */ \"./node_modules/diffie-hellman/lib/generatePrime.js\")\nvar primes = __webpack_require__(/*! ./lib/primes.json */ \"./node_modules/diffie-hellman/lib/primes.json\")\n\nvar DH = __webpack_require__(/*! ./lib/dh */ \"./node_modules/diffie-hellman/lib/dh.js\")\n\nfunction getDiffieHellman (mod) {\n  var prime = new Buffer(primes[mod].prime, 'hex')\n  var gen = new Buffer(primes[mod].gen, 'hex')\n\n  return new DH(prime, gen)\n}\n\nvar ENCODINGS = {\n  'binary': true, 'hex': true, 'base64': true\n}\n\nfunction createDiffieHellman (prime, enc, generator, genc) {\n  if (Buffer.isBuffer(enc) || ENCODINGS[enc] === undefined) {\n    return createDiffieHellman(prime, 'binary', enc, generator)\n  }\n\n  enc = enc || 'binary'\n  genc = genc || 'binary'\n  generator = generator || new Buffer([2])\n\n  if (!Buffer.isBuffer(generator)) {\n    generator = new Buffer(generator, genc)\n  }\n\n  if (typeof prime === 'number') {\n    return new DH(generatePrime(prime, generator), generator, true)\n  }\n\n  if (!Buffer.isBuffer(prime)) {\n    prime = new Buffer(prime, enc)\n  }\n\n  return new DH(prime, generator, true)\n}\n\nexports.DiffieHellmanGroup = exports.createDiffieHellmanGroup = exports.getDiffieHellman = getDiffieHellman\nexports.createDiffieHellman = exports.DiffieHellman = createDiffieHellman\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../buffer/index.js */ \"./node_modules/buffer/index.js\").Buffer))\n\n//# sourceURL=webpack://Game/./node_modules/diffie-hellman/browser.js?");

/***/ }),

/***/ "./node_modules/diffie-hellman/lib/dh.js":
/*!***********************************************!*\
  !*** ./node_modules/diffie-hellman/lib/dh.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(Buffer) {var BN = __webpack_require__(/*! bn.js */ \"./node_modules/diffie-hellman/node_modules/bn.js/lib/bn.js\");\nvar MillerRabin = __webpack_require__(/*! miller-rabin */ \"./node_modules/miller-rabin/lib/mr.js\");\nvar millerRabin = new MillerRabin();\nvar TWENTYFOUR = new BN(24);\nvar ELEVEN = new BN(11);\nvar TEN = new BN(10);\nvar THREE = new BN(3);\nvar SEVEN = new BN(7);\nvar primes = __webpack_require__(/*! ./generatePrime */ \"./node_modules/diffie-hellman/lib/generatePrime.js\");\nvar randomBytes = __webpack_require__(/*! randombytes */ \"./node_modules/randombytes/browser.js\");\nmodule.exports = DH;\n\nfunction setPublicKey(pub, enc) {\n  enc = enc || 'utf8';\n  if (!Buffer.isBuffer(pub)) {\n    pub = new Buffer(pub, enc);\n  }\n  this._pub = new BN(pub);\n  return this;\n}\n\nfunction setPrivateKey(priv, enc) {\n  enc = enc || 'utf8';\n  if (!Buffer.isBuffer(priv)) {\n    priv = new Buffer(priv, enc);\n  }\n  this._priv = new BN(priv);\n  return this;\n}\n\nvar primeCache = {};\nfunction checkPrime(prime, generator) {\n  var gen = generator.toString('hex');\n  var hex = [gen, prime.toString(16)].join('_');\n  if (hex in primeCache) {\n    return primeCache[hex];\n  }\n  var error = 0;\n\n  if (prime.isEven() ||\n    !primes.simpleSieve ||\n    !primes.fermatTest(prime) ||\n    !millerRabin.test(prime)) {\n    //not a prime so +1\n    error += 1;\n\n    if (gen === '02' || gen === '05') {\n      // we'd be able to check the generator\n      // it would fail so +8\n      error += 8;\n    } else {\n      //we wouldn't be able to test the generator\n      // so +4\n      error += 4;\n    }\n    primeCache[hex] = error;\n    return error;\n  }\n  if (!millerRabin.test(prime.shrn(1))) {\n    //not a safe prime\n    error += 2;\n  }\n  var rem;\n  switch (gen) {\n    case '02':\n      if (prime.mod(TWENTYFOUR).cmp(ELEVEN)) {\n        // unsuidable generator\n        error += 8;\n      }\n      break;\n    case '05':\n      rem = prime.mod(TEN);\n      if (rem.cmp(THREE) && rem.cmp(SEVEN)) {\n        // prime mod 10 needs to equal 3 or 7\n        error += 8;\n      }\n      break;\n    default:\n      error += 4;\n  }\n  primeCache[hex] = error;\n  return error;\n}\n\nfunction DH(prime, generator, malleable) {\n  this.setGenerator(generator);\n  this.__prime = new BN(prime);\n  this._prime = BN.mont(this.__prime);\n  this._primeLen = prime.length;\n  this._pub = undefined;\n  this._priv = undefined;\n  this._primeCode = undefined;\n  if (malleable) {\n    this.setPublicKey = setPublicKey;\n    this.setPrivateKey = setPrivateKey;\n  } else {\n    this._primeCode = 8;\n  }\n}\nObject.defineProperty(DH.prototype, 'verifyError', {\n  enumerable: true,\n  get: function () {\n    if (typeof this._primeCode !== 'number') {\n      this._primeCode = checkPrime(this.__prime, this.__gen);\n    }\n    return this._primeCode;\n  }\n});\nDH.prototype.generateKeys = function () {\n  if (!this._priv) {\n    this._priv = new BN(randomBytes(this._primeLen));\n  }\n  this._pub = this._gen.toRed(this._prime).redPow(this._priv).fromRed();\n  return this.getPublicKey();\n};\n\nDH.prototype.computeSecret = function (other) {\n  other = new BN(other);\n  other = other.toRed(this._prime);\n  var secret = other.redPow(this._priv).fromRed();\n  var out = new Buffer(secret.toArray());\n  var prime = this.getPrime();\n  if (out.length < prime.length) {\n    var front = new Buffer(prime.length - out.length);\n    front.fill(0);\n    out = Buffer.concat([front, out]);\n  }\n  return out;\n};\n\nDH.prototype.getPublicKey = function getPublicKey(enc) {\n  return formatReturnValue(this._pub, enc);\n};\n\nDH.prototype.getPrivateKey = function getPrivateKey(enc) {\n  return formatReturnValue(this._priv, enc);\n};\n\nDH.prototype.getPrime = function (enc) {\n  return formatReturnValue(this.__prime, enc);\n};\n\nDH.prototype.getGenerator = function (enc) {\n  return formatReturnValue(this._gen, enc);\n};\n\nDH.prototype.setGenerator = function (gen, enc) {\n  enc = enc || 'utf8';\n  if (!Buffer.isBuffer(gen)) {\n    gen = new Buffer(gen, enc);\n  }\n  this.__gen = gen;\n  this._gen = new BN(gen);\n  return this;\n};\n\nfunction formatReturnValue(bn, enc) {\n  var buf = new Buffer(bn.toArray());\n  if (!enc) {\n    return buf;\n  } else {\n    return buf.toString(enc);\n  }\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../buffer/index.js */ \"./node_modules/buffer/index.js\").Buffer))\n\n//# sourceURL=webpack://Game/./node_modules/diffie-hellman/lib/dh.js?");

/***/ }),

/***/ "./node_modules/diffie-hellman/lib/generatePrime.js":
/*!**********************************************************!*\
  !*** ./node_modules/diffie-hellman/lib/generatePrime.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var randomBytes = __webpack_require__(/*! randombytes */ \"./node_modules/randombytes/browser.js\");\nmodule.exports = findPrime;\nfindPrime.simpleSieve = simpleSieve;\nfindPrime.fermatTest = fermatTest;\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/diffie-hellman/node_modules/bn.js/lib/bn.js\");\nvar TWENTYFOUR = new BN(24);\nvar MillerRabin = __webpack_require__(/*! miller-rabin */ \"./node_modules/miller-rabin/lib/mr.js\");\nvar millerRabin = new MillerRabin();\nvar ONE = new BN(1);\nvar TWO = new BN(2);\nvar FIVE = new BN(5);\nvar SIXTEEN = new BN(16);\nvar EIGHT = new BN(8);\nvar TEN = new BN(10);\nvar THREE = new BN(3);\nvar SEVEN = new BN(7);\nvar ELEVEN = new BN(11);\nvar FOUR = new BN(4);\nvar TWELVE = new BN(12);\nvar primes = null;\n\nfunction _getPrimes() {\n  if (primes !== null)\n    return primes;\n\n  var limit = 0x100000;\n  var res = [];\n  res[0] = 2;\n  for (var i = 1, k = 3; k < limit; k += 2) {\n    var sqrt = Math.ceil(Math.sqrt(k));\n    for (var j = 0; j < i && res[j] <= sqrt; j++)\n      if (k % res[j] === 0)\n        break;\n\n    if (i !== j && res[j] <= sqrt)\n      continue;\n\n    res[i++] = k;\n  }\n  primes = res;\n  return res;\n}\n\nfunction simpleSieve(p) {\n  var primes = _getPrimes();\n\n  for (var i = 0; i < primes.length; i++)\n    if (p.modn(primes[i]) === 0) {\n      if (p.cmpn(primes[i]) === 0) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n  return true;\n}\n\nfunction fermatTest(p) {\n  var red = BN.mont(p);\n  return TWO.toRed(red).redPow(p.subn(1)).fromRed().cmpn(1) === 0;\n}\n\nfunction findPrime(bits, gen) {\n  if (bits < 16) {\n    // this is what openssl does\n    if (gen === 2 || gen === 5) {\n      return new BN([0x8c, 0x7b]);\n    } else {\n      return new BN([0x8c, 0x27]);\n    }\n  }\n  gen = new BN(gen);\n\n  var num, n2;\n\n  while (true) {\n    num = new BN(randomBytes(Math.ceil(bits / 8)));\n    while (num.bitLength() > bits) {\n      num.ishrn(1);\n    }\n    if (num.isEven()) {\n      num.iadd(ONE);\n    }\n    if (!num.testn(1)) {\n      num.iadd(TWO);\n    }\n    if (!gen.cmp(TWO)) {\n      while (num.mod(TWENTYFOUR).cmp(ELEVEN)) {\n        num.iadd(FOUR);\n      }\n    } else if (!gen.cmp(FIVE)) {\n      while (num.mod(TEN).cmp(THREE)) {\n        num.iadd(FOUR);\n      }\n    }\n    n2 = num.shrn(1);\n    if (simpleSieve(n2) && simpleSieve(num) &&\n      fermatTest(n2) && fermatTest(num) &&\n      millerRabin.test(n2) && millerRabin.test(num)) {\n      return num;\n    }\n  }\n\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/diffie-hellman/lib/generatePrime.js?");

/***/ }),

/***/ "./node_modules/diffie-hellman/lib/primes.json":
/*!*****************************************************!*\
  !*** ./node_modules/diffie-hellman/lib/primes.json ***!
  \*****************************************************/
/*! exports provided: modp1, modp2, modp5, modp14, modp15, modp16, modp17, modp18, default */
/***/ (function(module) {

eval("module.exports = JSON.parse(\"{\\\"modp1\\\":{\\\"gen\\\":\\\"02\\\",\\\"prime\\\":\\\"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff\\\"},\\\"modp2\\\":{\\\"gen\\\":\\\"02\\\",\\\"prime\\\":\\\"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff\\\"},\\\"modp5\\\":{\\\"gen\\\":\\\"02\\\",\\\"prime\\\":\\\"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff\\\"},\\\"modp14\\\":{\\\"gen\\\":\\\"02\\\",\\\"prime\\\":\\\"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff\\\"},\\\"modp15\\\":{\\\"gen\\\":\\\"02\\\",\\\"prime\\\":\\\"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff\\\"},\\\"modp16\\\":{\\\"gen\\\":\\\"02\\\",\\\"prime\\\":\\\"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff\\\"},\\\"modp17\\\":{\\\"gen\\\":\\\"02\\\",\\\"prime\\\":\\\"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff\\\"},\\\"modp18\\\":{\\\"gen\\\":\\\"02\\\",\\\"prime\\\":\\\"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff\\\"}}\");\n\n//# sourceURL=webpack://Game/./node_modules/diffie-hellman/lib/primes.json?");

/***/ }),

/***/ "./node_modules/diffie-hellman/node_modules/bn.js/lib/bn.js":
/*!******************************************************************!*\
  !*** ./node_modules/diffie-hellman/node_modules/bn.js/lib/bn.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(module) {(function (module, exports) {\r\n  'use strict';\r\n\r\n  // Utils\r\n  function assert (val, msg) {\r\n    if (!val) throw new Error(msg || 'Assertion failed');\r\n  }\r\n\r\n  // Could use `inherits` module, but don't want to move from single file\r\n  // architecture yet.\r\n  function inherits (ctor, superCtor) {\r\n    ctor.super_ = superCtor;\r\n    var TempCtor = function () {};\r\n    TempCtor.prototype = superCtor.prototype;\r\n    ctor.prototype = new TempCtor();\r\n    ctor.prototype.constructor = ctor;\r\n  }\r\n\r\n  // BN\r\n\r\n  function BN (number, base, endian) {\r\n    if (BN.isBN(number)) {\r\n      return number;\r\n    }\r\n\r\n    this.negative = 0;\r\n    this.words = null;\r\n    this.length = 0;\r\n\r\n    // Reduction context\r\n    this.red = null;\r\n\r\n    if (number !== null) {\r\n      if (base === 'le' || base === 'be') {\r\n        endian = base;\r\n        base = 10;\r\n      }\r\n\r\n      this._init(number || 0, base || 10, endian || 'be');\r\n    }\r\n  }\r\n  if (typeof module === 'object') {\r\n    module.exports = BN;\r\n  } else {\r\n    exports.BN = BN;\r\n  }\r\n\r\n  BN.BN = BN;\r\n  BN.wordSize = 26;\r\n\r\n  var Buffer;\r\n  try {\r\n    Buffer = __webpack_require__(/*! buffer */ 5).Buffer;\r\n  } catch (e) {\r\n  }\r\n\r\n  BN.isBN = function isBN (num) {\r\n    if (num instanceof BN) {\r\n      return true;\r\n    }\r\n\r\n    return num !== null && typeof num === 'object' &&\r\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\r\n  };\r\n\r\n  BN.max = function max (left, right) {\r\n    if (left.cmp(right) > 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.min = function min (left, right) {\r\n    if (left.cmp(right) < 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.prototype._init = function init (number, base, endian) {\r\n    if (typeof number === 'number') {\r\n      return this._initNumber(number, base, endian);\r\n    }\r\n\r\n    if (typeof number === 'object') {\r\n      return this._initArray(number, base, endian);\r\n    }\r\n\r\n    if (base === 'hex') {\r\n      base = 16;\r\n    }\r\n    assert(base === (base | 0) && base >= 2 && base <= 36);\r\n\r\n    number = number.toString().replace(/\\s+/g, '');\r\n    var start = 0;\r\n    if (number[0] === '-') {\r\n      start++;\r\n    }\r\n\r\n    if (base === 16) {\r\n      this._parseHex(number, start);\r\n    } else {\r\n      this._parseBase(number, base, start);\r\n    }\r\n\r\n    if (number[0] === '-') {\r\n      this.negative = 1;\r\n    }\r\n\r\n    this.strip();\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\r\n    if (number < 0) {\r\n      this.negative = 1;\r\n      number = -number;\r\n    }\r\n    if (number < 0x4000000) {\r\n      this.words = [ number & 0x3ffffff ];\r\n      this.length = 1;\r\n    } else if (number < 0x10000000000000) {\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff\r\n      ];\r\n      this.length = 2;\r\n    } else {\r\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff,\r\n        1\r\n      ];\r\n      this.length = 3;\r\n    }\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    // Reverse the bytes\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initArray = function _initArray (number, base, endian) {\r\n    // Perhaps a Uint8Array\r\n    assert(typeof number.length === 'number');\r\n    if (number.length <= 0) {\r\n      this.words = [ 0 ];\r\n      this.length = 1;\r\n      return this;\r\n    }\r\n\r\n    this.length = Math.ceil(number.length / 3);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    var off = 0;\r\n    if (endian === 'be') {\r\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\r\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    } else if (endian === 'le') {\r\n      for (i = 0, j = 0; i < number.length; i += 3) {\r\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    }\r\n    return this.strip();\r\n  };\r\n\r\n  function parseHex (str, start, end) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r <<= 4;\r\n\r\n      // 'a' - 'f'\r\n      if (c >= 49 && c <= 54) {\r\n        r |= c - 49 + 0xa;\r\n\r\n      // 'A' - 'F'\r\n      } else if (c >= 17 && c <= 22) {\r\n        r |= c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        r |= c & 0xf;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseHex = function _parseHex (number, start) {\r\n    // Create possibly bigger array to ensure that it fits the number\r\n    this.length = Math.ceil((number.length - start) / 6);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    // Scan 24-bit chunks and add them to the number\r\n    var off = 0;\r\n    for (i = number.length - 6, j = 0; i >= start; i -= 6) {\r\n      w = parseHex(number, i, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      // NOTE: `0x3fffff` is intentional here, 26bits max shift + 24bit hex limb\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n      off += 24;\r\n      if (off >= 26) {\r\n        off -= 26;\r\n        j++;\r\n      }\r\n    }\r\n    if (i + 6 !== start) {\r\n      w = parseHex(number, start, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n    }\r\n    this.strip();\r\n  };\r\n\r\n  function parseBase (str, start, end, mul) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r *= mul;\r\n\r\n      // 'a'\r\n      if (c >= 49) {\r\n        r += c - 49 + 0xa;\r\n\r\n      // 'A'\r\n      } else if (c >= 17) {\r\n        r += c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        r += c;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\r\n    // Initialize as zero\r\n    this.words = [ 0 ];\r\n    this.length = 1;\r\n\r\n    // Find length of limb in base\r\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\r\n      limbLen++;\r\n    }\r\n    limbLen--;\r\n    limbPow = (limbPow / base) | 0;\r\n\r\n    var total = number.length - start;\r\n    var mod = total % limbLen;\r\n    var end = Math.min(total, total - mod) + start;\r\n\r\n    var word = 0;\r\n    for (var i = start; i < end; i += limbLen) {\r\n      word = parseBase(number, i, i + limbLen, base);\r\n\r\n      this.imuln(limbPow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n\r\n    if (mod !== 0) {\r\n      var pow = 1;\r\n      word = parseBase(number, i, number.length, base);\r\n\r\n      for (i = 0; i < mod; i++) {\r\n        pow *= base;\r\n      }\r\n\r\n      this.imuln(pow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n  };\r\n\r\n  BN.prototype.copy = function copy (dest) {\r\n    dest.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      dest.words[i] = this.words[i];\r\n    }\r\n    dest.length = this.length;\r\n    dest.negative = this.negative;\r\n    dest.red = this.red;\r\n  };\r\n\r\n  BN.prototype.clone = function clone () {\r\n    var r = new BN(null);\r\n    this.copy(r);\r\n    return r;\r\n  };\r\n\r\n  BN.prototype._expand = function _expand (size) {\r\n    while (this.length < size) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  // Remove leading `0` from `this`\r\n  BN.prototype.strip = function strip () {\r\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\r\n      this.length--;\r\n    }\r\n    return this._normSign();\r\n  };\r\n\r\n  BN.prototype._normSign = function _normSign () {\r\n    // -0 = 0\r\n    if (this.length === 1 && this.words[0] === 0) {\r\n      this.negative = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.inspect = function inspect () {\r\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\r\n  };\r\n\r\n  /*\r\n\r\n  var zeros = [];\r\n  var groupSizes = [];\r\n  var groupBases = [];\r\n\r\n  var s = '';\r\n  var i = -1;\r\n  while (++i < BN.wordSize) {\r\n    zeros[i] = s;\r\n    s += '0';\r\n  }\r\n  groupSizes[0] = 0;\r\n  groupSizes[1] = 0;\r\n  groupBases[0] = 0;\r\n  groupBases[1] = 0;\r\n  var base = 2 - 1;\r\n  while (++base < 36 + 1) {\r\n    var groupSize = 0;\r\n    var groupBase = 1;\r\n    while (groupBase < (1 << BN.wordSize) / base) {\r\n      groupBase *= base;\r\n      groupSize += 1;\r\n    }\r\n    groupSizes[base] = groupSize;\r\n    groupBases[base] = groupBase;\r\n  }\r\n\r\n  */\r\n\r\n  var zeros = [\r\n    '',\r\n    '0',\r\n    '00',\r\n    '000',\r\n    '0000',\r\n    '00000',\r\n    '000000',\r\n    '0000000',\r\n    '00000000',\r\n    '000000000',\r\n    '0000000000',\r\n    '00000000000',\r\n    '000000000000',\r\n    '0000000000000',\r\n    '00000000000000',\r\n    '000000000000000',\r\n    '0000000000000000',\r\n    '00000000000000000',\r\n    '000000000000000000',\r\n    '0000000000000000000',\r\n    '00000000000000000000',\r\n    '000000000000000000000',\r\n    '0000000000000000000000',\r\n    '00000000000000000000000',\r\n    '000000000000000000000000',\r\n    '0000000000000000000000000'\r\n  ];\r\n\r\n  var groupSizes = [\r\n    0, 0,\r\n    25, 16, 12, 11, 10, 9, 8,\r\n    8, 7, 7, 7, 7, 6, 6,\r\n    6, 6, 6, 6, 6, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5\r\n  ];\r\n\r\n  var groupBases = [\r\n    0, 0,\r\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\r\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\r\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\r\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\r\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\r\n  ];\r\n\r\n  BN.prototype.toString = function toString (base, padding) {\r\n    base = base || 10;\r\n    padding = padding | 0 || 1;\r\n\r\n    var out;\r\n    if (base === 16 || base === 'hex') {\r\n      out = '';\r\n      var off = 0;\r\n      var carry = 0;\r\n      for (var i = 0; i < this.length; i++) {\r\n        var w = this.words[i];\r\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\r\n        carry = (w >>> (24 - off)) & 0xffffff;\r\n        if (carry !== 0 || i !== this.length - 1) {\r\n          out = zeros[6 - word.length] + word + out;\r\n        } else {\r\n          out = word + out;\r\n        }\r\n        off += 2;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          i--;\r\n        }\r\n      }\r\n      if (carry !== 0) {\r\n        out = carry.toString(16) + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    if (base === (base | 0) && base >= 2 && base <= 36) {\r\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\r\n      var groupSize = groupSizes[base];\r\n      // var groupBase = Math.pow(base, groupSize);\r\n      var groupBase = groupBases[base];\r\n      out = '';\r\n      var c = this.clone();\r\n      c.negative = 0;\r\n      while (!c.isZero()) {\r\n        var r = c.modn(groupBase).toString(base);\r\n        c = c.idivn(groupBase);\r\n\r\n        if (!c.isZero()) {\r\n          out = zeros[groupSize - r.length] + r + out;\r\n        } else {\r\n          out = r + out;\r\n        }\r\n      }\r\n      if (this.isZero()) {\r\n        out = '0' + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    assert(false, 'Base should be between 2 and 36');\r\n  };\r\n\r\n  BN.prototype.toNumber = function toNumber () {\r\n    var ret = this.words[0];\r\n    if (this.length === 2) {\r\n      ret += this.words[1] * 0x4000000;\r\n    } else if (this.length === 3 && this.words[2] === 0x01) {\r\n      // NOTE: at this stage it is known that the top bit is set\r\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\r\n    } else if (this.length > 2) {\r\n      assert(false, 'Number can only safely store up to 53 bits');\r\n    }\r\n    return (this.negative !== 0) ? -ret : ret;\r\n  };\r\n\r\n  BN.prototype.toJSON = function toJSON () {\r\n    return this.toString(16);\r\n  };\r\n\r\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\r\n    assert(typeof Buffer !== 'undefined');\r\n    return this.toArrayLike(Buffer, endian, length);\r\n  };\r\n\r\n  BN.prototype.toArray = function toArray (endian, length) {\r\n    return this.toArrayLike(Array, endian, length);\r\n  };\r\n\r\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\r\n    var byteLength = this.byteLength();\r\n    var reqLength = length || Math.max(1, byteLength);\r\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\r\n    assert(reqLength > 0, 'Requested array length <= 0');\r\n\r\n    this.strip();\r\n    var littleEndian = endian === 'le';\r\n    var res = new ArrayType(reqLength);\r\n\r\n    var b, i;\r\n    var q = this.clone();\r\n    if (!littleEndian) {\r\n      // Assume big-endian\r\n      for (i = 0; i < reqLength - byteLength; i++) {\r\n        res[i] = 0;\r\n      }\r\n\r\n      for (i = 0; !q.isZero(); i++) {\r\n        b = q.andln(0xff);\r\n        q.iushrn(8);\r\n\r\n        res[reqLength - i - 1] = b;\r\n      }\r\n    } else {\r\n      for (i = 0; !q.isZero(); i++) {\r\n        b = q.andln(0xff);\r\n        q.iushrn(8);\r\n\r\n        res[i] = b;\r\n      }\r\n\r\n      for (; i < reqLength; i++) {\r\n        res[i] = 0;\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  if (Math.clz32) {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      return 32 - Math.clz32(w);\r\n    };\r\n  } else {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      var t = w;\r\n      var r = 0;\r\n      if (t >= 0x1000) {\r\n        r += 13;\r\n        t >>>= 13;\r\n      }\r\n      if (t >= 0x40) {\r\n        r += 7;\r\n        t >>>= 7;\r\n      }\r\n      if (t >= 0x8) {\r\n        r += 4;\r\n        t >>>= 4;\r\n      }\r\n      if (t >= 0x02) {\r\n        r += 2;\r\n        t >>>= 2;\r\n      }\r\n      return r + t;\r\n    };\r\n  }\r\n\r\n  BN.prototype._zeroBits = function _zeroBits (w) {\r\n    // Short-cut\r\n    if (w === 0) return 26;\r\n\r\n    var t = w;\r\n    var r = 0;\r\n    if ((t & 0x1fff) === 0) {\r\n      r += 13;\r\n      t >>>= 13;\r\n    }\r\n    if ((t & 0x7f) === 0) {\r\n      r += 7;\r\n      t >>>= 7;\r\n    }\r\n    if ((t & 0xf) === 0) {\r\n      r += 4;\r\n      t >>>= 4;\r\n    }\r\n    if ((t & 0x3) === 0) {\r\n      r += 2;\r\n      t >>>= 2;\r\n    }\r\n    if ((t & 0x1) === 0) {\r\n      r++;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  // Return number of used bits in a BN\r\n  BN.prototype.bitLength = function bitLength () {\r\n    var w = this.words[this.length - 1];\r\n    var hi = this._countBits(w);\r\n    return (this.length - 1) * 26 + hi;\r\n  };\r\n\r\n  function toBitArray (num) {\r\n    var w = new Array(num.bitLength());\r\n\r\n    for (var bit = 0; bit < w.length; bit++) {\r\n      var off = (bit / 26) | 0;\r\n      var wbit = bit % 26;\r\n\r\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\r\n    }\r\n\r\n    return w;\r\n  }\r\n\r\n  // Number of trailing zero bits\r\n  BN.prototype.zeroBits = function zeroBits () {\r\n    if (this.isZero()) return 0;\r\n\r\n    var r = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var b = this._zeroBits(this.words[i]);\r\n      r += b;\r\n      if (b !== 26) break;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  BN.prototype.byteLength = function byteLength () {\r\n    return Math.ceil(this.bitLength() / 8);\r\n  };\r\n\r\n  BN.prototype.toTwos = function toTwos (width) {\r\n    if (this.negative !== 0) {\r\n      return this.abs().inotn(width).iaddn(1);\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.fromTwos = function fromTwos (width) {\r\n    if (this.testn(width - 1)) {\r\n      return this.notn(width).iaddn(1).ineg();\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.isNeg = function isNeg () {\r\n    return this.negative !== 0;\r\n  };\r\n\r\n  // Return negative clone of `this`\r\n  BN.prototype.neg = function neg () {\r\n    return this.clone().ineg();\r\n  };\r\n\r\n  BN.prototype.ineg = function ineg () {\r\n    if (!this.isZero()) {\r\n      this.negative ^= 1;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Or `num` with `this` in-place\r\n  BN.prototype.iuor = function iuor (num) {\r\n    while (this.length < num.length) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n\r\n    for (var i = 0; i < num.length; i++) {\r\n      this.words[i] = this.words[i] | num.words[i];\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ior = function ior (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuor(num);\r\n  };\r\n\r\n  // Or `num` with `this`\r\n  BN.prototype.or = function or (num) {\r\n    if (this.length > num.length) return this.clone().ior(num);\r\n    return num.clone().ior(this);\r\n  };\r\n\r\n  BN.prototype.uor = function uor (num) {\r\n    if (this.length > num.length) return this.clone().iuor(num);\r\n    return num.clone().iuor(this);\r\n  };\r\n\r\n  // And `num` with `this` in-place\r\n  BN.prototype.iuand = function iuand (num) {\r\n    // b = min-length(num, this)\r\n    var b;\r\n    if (this.length > num.length) {\r\n      b = num;\r\n    } else {\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = this.words[i] & num.words[i];\r\n    }\r\n\r\n    this.length = b.length;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.iand = function iand (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuand(num);\r\n  };\r\n\r\n  // And `num` with `this`\r\n  BN.prototype.and = function and (num) {\r\n    if (this.length > num.length) return this.clone().iand(num);\r\n    return num.clone().iand(this);\r\n  };\r\n\r\n  BN.prototype.uand = function uand (num) {\r\n    if (this.length > num.length) return this.clone().iuand(num);\r\n    return num.clone().iuand(this);\r\n  };\r\n\r\n  // Xor `num` with `this` in-place\r\n  BN.prototype.iuxor = function iuxor (num) {\r\n    // a.length > b.length\r\n    var a;\r\n    var b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = a.words[i] ^ b.words[i];\r\n    }\r\n\r\n    if (this !== a) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = a.length;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ixor = function ixor (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuxor(num);\r\n  };\r\n\r\n  // Xor `num` with `this`\r\n  BN.prototype.xor = function xor (num) {\r\n    if (this.length > num.length) return this.clone().ixor(num);\r\n    return num.clone().ixor(this);\r\n  };\r\n\r\n  BN.prototype.uxor = function uxor (num) {\r\n    if (this.length > num.length) return this.clone().iuxor(num);\r\n    return num.clone().iuxor(this);\r\n  };\r\n\r\n  // Not ``this`` with ``width`` bitwidth\r\n  BN.prototype.inotn = function inotn (width) {\r\n    assert(typeof width === 'number' && width >= 0);\r\n\r\n    var bytesNeeded = Math.ceil(width / 26) | 0;\r\n    var bitsLeft = width % 26;\r\n\r\n    // Extend the buffer with leading zeroes\r\n    this._expand(bytesNeeded);\r\n\r\n    if (bitsLeft > 0) {\r\n      bytesNeeded--;\r\n    }\r\n\r\n    // Handle complete words\r\n    for (var i = 0; i < bytesNeeded; i++) {\r\n      this.words[i] = ~this.words[i] & 0x3ffffff;\r\n    }\r\n\r\n    // Handle the residue\r\n    if (bitsLeft > 0) {\r\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\r\n    }\r\n\r\n    // And remove leading zeroes\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.notn = function notn (width) {\r\n    return this.clone().inotn(width);\r\n  };\r\n\r\n  // Set `bit` of `this`\r\n  BN.prototype.setn = function setn (bit, val) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n\r\n    var off = (bit / 26) | 0;\r\n    var wbit = bit % 26;\r\n\r\n    this._expand(off + 1);\r\n\r\n    if (val) {\r\n      this.words[off] = this.words[off] | (1 << wbit);\r\n    } else {\r\n      this.words[off] = this.words[off] & ~(1 << wbit);\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Add `num` to `this` in-place\r\n  BN.prototype.iadd = function iadd (num) {\r\n    var r;\r\n\r\n    // negative + positive\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      this.negative = 0;\r\n      r = this.isub(num);\r\n      this.negative ^= 1;\r\n      return this._normSign();\r\n\r\n    // positive + negative\r\n    } else if (this.negative === 0 && num.negative !== 0) {\r\n      num.negative = 0;\r\n      r = this.isub(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n    }\r\n\r\n    // a.length > b.length\r\n    var a, b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n\r\n    this.length = a.length;\r\n    if (carry !== 0) {\r\n      this.words[this.length] = carry;\r\n      this.length++;\r\n    // Copy the rest of the words\r\n    } else if (a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Add `num` to `this`\r\n  BN.prototype.add = function add (num) {\r\n    var res;\r\n    if (num.negative !== 0 && this.negative === 0) {\r\n      num.negative = 0;\r\n      res = this.sub(num);\r\n      num.negative ^= 1;\r\n      return res;\r\n    } else if (num.negative === 0 && this.negative !== 0) {\r\n      this.negative = 0;\r\n      res = num.sub(this);\r\n      this.negative = 1;\r\n      return res;\r\n    }\r\n\r\n    if (this.length > num.length) return this.clone().iadd(num);\r\n\r\n    return num.clone().iadd(this);\r\n  };\r\n\r\n  // Subtract `num` from `this` in-place\r\n  BN.prototype.isub = function isub (num) {\r\n    // this - (-num) = this + num\r\n    if (num.negative !== 0) {\r\n      num.negative = 0;\r\n      var r = this.iadd(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n\r\n    // -this - num = -(this + num)\r\n    } else if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iadd(num);\r\n      this.negative = 1;\r\n      return this._normSign();\r\n    }\r\n\r\n    // At this point both numbers are positive\r\n    var cmp = this.cmp(num);\r\n\r\n    // Optimization - zeroify\r\n    if (cmp === 0) {\r\n      this.negative = 0;\r\n      this.length = 1;\r\n      this.words[0] = 0;\r\n      return this;\r\n    }\r\n\r\n    // a > b\r\n    var a, b;\r\n    if (cmp > 0) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n\r\n    // Copy rest of the words\r\n    if (carry === 0 && i < a.length && a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = Math.max(this.length, i);\r\n\r\n    if (a !== this) {\r\n      this.negative = 1;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Subtract `num` from `this`\r\n  BN.prototype.sub = function sub (num) {\r\n    return this.clone().isub(num);\r\n  };\r\n\r\n  function smallMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    var len = (self.length + num.length) | 0;\r\n    out.length = len;\r\n    len = (len - 1) | 0;\r\n\r\n    // Peel one iteration (compiler can't do it, because of code complexity)\r\n    var a = self.words[0] | 0;\r\n    var b = num.words[0] | 0;\r\n    var r = a * b;\r\n\r\n    var lo = r & 0x3ffffff;\r\n    var carry = (r / 0x4000000) | 0;\r\n    out.words[0] = lo;\r\n\r\n    for (var k = 1; k < len; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = carry >>> 26;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = (k - j) | 0;\r\n        a = self.words[i] | 0;\r\n        b = num.words[j] | 0;\r\n        r = a * b + rword;\r\n        ncarry += (r / 0x4000000) | 0;\r\n        rword = r & 0x3ffffff;\r\n      }\r\n      out.words[k] = rword | 0;\r\n      carry = ncarry | 0;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry | 0;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out.strip();\r\n  }\r\n\r\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\r\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\r\n  // multiplication (like elliptic secp256k1).\r\n  var comb10MulTo = function comb10MulTo (self, num, out) {\r\n    var a = self.words;\r\n    var b = num.words;\r\n    var o = out.words;\r\n    var c = 0;\r\n    var lo;\r\n    var mid;\r\n    var hi;\r\n    var a0 = a[0] | 0;\r\n    var al0 = a0 & 0x1fff;\r\n    var ah0 = a0 >>> 13;\r\n    var a1 = a[1] | 0;\r\n    var al1 = a1 & 0x1fff;\r\n    var ah1 = a1 >>> 13;\r\n    var a2 = a[2] | 0;\r\n    var al2 = a2 & 0x1fff;\r\n    var ah2 = a2 >>> 13;\r\n    var a3 = a[3] | 0;\r\n    var al3 = a3 & 0x1fff;\r\n    var ah3 = a3 >>> 13;\r\n    var a4 = a[4] | 0;\r\n    var al4 = a4 & 0x1fff;\r\n    var ah4 = a4 >>> 13;\r\n    var a5 = a[5] | 0;\r\n    var al5 = a5 & 0x1fff;\r\n    var ah5 = a5 >>> 13;\r\n    var a6 = a[6] | 0;\r\n    var al6 = a6 & 0x1fff;\r\n    var ah6 = a6 >>> 13;\r\n    var a7 = a[7] | 0;\r\n    var al7 = a7 & 0x1fff;\r\n    var ah7 = a7 >>> 13;\r\n    var a8 = a[8] | 0;\r\n    var al8 = a8 & 0x1fff;\r\n    var ah8 = a8 >>> 13;\r\n    var a9 = a[9] | 0;\r\n    var al9 = a9 & 0x1fff;\r\n    var ah9 = a9 >>> 13;\r\n    var b0 = b[0] | 0;\r\n    var bl0 = b0 & 0x1fff;\r\n    var bh0 = b0 >>> 13;\r\n    var b1 = b[1] | 0;\r\n    var bl1 = b1 & 0x1fff;\r\n    var bh1 = b1 >>> 13;\r\n    var b2 = b[2] | 0;\r\n    var bl2 = b2 & 0x1fff;\r\n    var bh2 = b2 >>> 13;\r\n    var b3 = b[3] | 0;\r\n    var bl3 = b3 & 0x1fff;\r\n    var bh3 = b3 >>> 13;\r\n    var b4 = b[4] | 0;\r\n    var bl4 = b4 & 0x1fff;\r\n    var bh4 = b4 >>> 13;\r\n    var b5 = b[5] | 0;\r\n    var bl5 = b5 & 0x1fff;\r\n    var bh5 = b5 >>> 13;\r\n    var b6 = b[6] | 0;\r\n    var bl6 = b6 & 0x1fff;\r\n    var bh6 = b6 >>> 13;\r\n    var b7 = b[7] | 0;\r\n    var bl7 = b7 & 0x1fff;\r\n    var bh7 = b7 >>> 13;\r\n    var b8 = b[8] | 0;\r\n    var bl8 = b8 & 0x1fff;\r\n    var bh8 = b8 >>> 13;\r\n    var b9 = b[9] | 0;\r\n    var bl9 = b9 & 0x1fff;\r\n    var bh9 = b9 >>> 13;\r\n\r\n    out.negative = self.negative ^ num.negative;\r\n    out.length = 19;\r\n    /* k = 0 */\r\n    lo = Math.imul(al0, bl0);\r\n    mid = Math.imul(al0, bh0);\r\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\r\n    hi = Math.imul(ah0, bh0);\r\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\r\n    w0 &= 0x3ffffff;\r\n    /* k = 1 */\r\n    lo = Math.imul(al1, bl0);\r\n    mid = Math.imul(al1, bh0);\r\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\r\n    hi = Math.imul(ah1, bh0);\r\n    lo = (lo + Math.imul(al0, bl1)) | 0;\r\n    mid = (mid + Math.imul(al0, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\r\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\r\n    w1 &= 0x3ffffff;\r\n    /* k = 2 */\r\n    lo = Math.imul(al2, bl0);\r\n    mid = Math.imul(al2, bh0);\r\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\r\n    hi = Math.imul(ah2, bh0);\r\n    lo = (lo + Math.imul(al1, bl1)) | 0;\r\n    mid = (mid + Math.imul(al1, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\r\n    lo = (lo + Math.imul(al0, bl2)) | 0;\r\n    mid = (mid + Math.imul(al0, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\r\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\r\n    w2 &= 0x3ffffff;\r\n    /* k = 3 */\r\n    lo = Math.imul(al3, bl0);\r\n    mid = Math.imul(al3, bh0);\r\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\r\n    hi = Math.imul(ah3, bh0);\r\n    lo = (lo + Math.imul(al2, bl1)) | 0;\r\n    mid = (mid + Math.imul(al2, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\r\n    lo = (lo + Math.imul(al1, bl2)) | 0;\r\n    mid = (mid + Math.imul(al1, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\r\n    lo = (lo + Math.imul(al0, bl3)) | 0;\r\n    mid = (mid + Math.imul(al0, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\r\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\r\n    w3 &= 0x3ffffff;\r\n    /* k = 4 */\r\n    lo = Math.imul(al4, bl0);\r\n    mid = Math.imul(al4, bh0);\r\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\r\n    hi = Math.imul(ah4, bh0);\r\n    lo = (lo + Math.imul(al3, bl1)) | 0;\r\n    mid = (mid + Math.imul(al3, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\r\n    lo = (lo + Math.imul(al2, bl2)) | 0;\r\n    mid = (mid + Math.imul(al2, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\r\n    lo = (lo + Math.imul(al1, bl3)) | 0;\r\n    mid = (mid + Math.imul(al1, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\r\n    lo = (lo + Math.imul(al0, bl4)) | 0;\r\n    mid = (mid + Math.imul(al0, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\r\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\r\n    w4 &= 0x3ffffff;\r\n    /* k = 5 */\r\n    lo = Math.imul(al5, bl0);\r\n    mid = Math.imul(al5, bh0);\r\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\r\n    hi = Math.imul(ah5, bh0);\r\n    lo = (lo + Math.imul(al4, bl1)) | 0;\r\n    mid = (mid + Math.imul(al4, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\r\n    lo = (lo + Math.imul(al3, bl2)) | 0;\r\n    mid = (mid + Math.imul(al3, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\r\n    lo = (lo + Math.imul(al2, bl3)) | 0;\r\n    mid = (mid + Math.imul(al2, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\r\n    lo = (lo + Math.imul(al1, bl4)) | 0;\r\n    mid = (mid + Math.imul(al1, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\r\n    lo = (lo + Math.imul(al0, bl5)) | 0;\r\n    mid = (mid + Math.imul(al0, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\r\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\r\n    w5 &= 0x3ffffff;\r\n    /* k = 6 */\r\n    lo = Math.imul(al6, bl0);\r\n    mid = Math.imul(al6, bh0);\r\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\r\n    hi = Math.imul(ah6, bh0);\r\n    lo = (lo + Math.imul(al5, bl1)) | 0;\r\n    mid = (mid + Math.imul(al5, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\r\n    lo = (lo + Math.imul(al4, bl2)) | 0;\r\n    mid = (mid + Math.imul(al4, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\r\n    lo = (lo + Math.imul(al3, bl3)) | 0;\r\n    mid = (mid + Math.imul(al3, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\r\n    lo = (lo + Math.imul(al2, bl4)) | 0;\r\n    mid = (mid + Math.imul(al2, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\r\n    lo = (lo + Math.imul(al1, bl5)) | 0;\r\n    mid = (mid + Math.imul(al1, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\r\n    lo = (lo + Math.imul(al0, bl6)) | 0;\r\n    mid = (mid + Math.imul(al0, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\r\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\r\n    w6 &= 0x3ffffff;\r\n    /* k = 7 */\r\n    lo = Math.imul(al7, bl0);\r\n    mid = Math.imul(al7, bh0);\r\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\r\n    hi = Math.imul(ah7, bh0);\r\n    lo = (lo + Math.imul(al6, bl1)) | 0;\r\n    mid = (mid + Math.imul(al6, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\r\n    lo = (lo + Math.imul(al5, bl2)) | 0;\r\n    mid = (mid + Math.imul(al5, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\r\n    lo = (lo + Math.imul(al4, bl3)) | 0;\r\n    mid = (mid + Math.imul(al4, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\r\n    lo = (lo + Math.imul(al3, bl4)) | 0;\r\n    mid = (mid + Math.imul(al3, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\r\n    lo = (lo + Math.imul(al2, bl5)) | 0;\r\n    mid = (mid + Math.imul(al2, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\r\n    lo = (lo + Math.imul(al1, bl6)) | 0;\r\n    mid = (mid + Math.imul(al1, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\r\n    lo = (lo + Math.imul(al0, bl7)) | 0;\r\n    mid = (mid + Math.imul(al0, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\r\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\r\n    w7 &= 0x3ffffff;\r\n    /* k = 8 */\r\n    lo = Math.imul(al8, bl0);\r\n    mid = Math.imul(al8, bh0);\r\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\r\n    hi = Math.imul(ah8, bh0);\r\n    lo = (lo + Math.imul(al7, bl1)) | 0;\r\n    mid = (mid + Math.imul(al7, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\r\n    lo = (lo + Math.imul(al6, bl2)) | 0;\r\n    mid = (mid + Math.imul(al6, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\r\n    lo = (lo + Math.imul(al5, bl3)) | 0;\r\n    mid = (mid + Math.imul(al5, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\r\n    lo = (lo + Math.imul(al4, bl4)) | 0;\r\n    mid = (mid + Math.imul(al4, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\r\n    lo = (lo + Math.imul(al3, bl5)) | 0;\r\n    mid = (mid + Math.imul(al3, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\r\n    lo = (lo + Math.imul(al2, bl6)) | 0;\r\n    mid = (mid + Math.imul(al2, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\r\n    lo = (lo + Math.imul(al1, bl7)) | 0;\r\n    mid = (mid + Math.imul(al1, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\r\n    lo = (lo + Math.imul(al0, bl8)) | 0;\r\n    mid = (mid + Math.imul(al0, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\r\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\r\n    w8 &= 0x3ffffff;\r\n    /* k = 9 */\r\n    lo = Math.imul(al9, bl0);\r\n    mid = Math.imul(al9, bh0);\r\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\r\n    hi = Math.imul(ah9, bh0);\r\n    lo = (lo + Math.imul(al8, bl1)) | 0;\r\n    mid = (mid + Math.imul(al8, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\r\n    lo = (lo + Math.imul(al7, bl2)) | 0;\r\n    mid = (mid + Math.imul(al7, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\r\n    lo = (lo + Math.imul(al6, bl3)) | 0;\r\n    mid = (mid + Math.imul(al6, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\r\n    lo = (lo + Math.imul(al5, bl4)) | 0;\r\n    mid = (mid + Math.imul(al5, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\r\n    lo = (lo + Math.imul(al4, bl5)) | 0;\r\n    mid = (mid + Math.imul(al4, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\r\n    lo = (lo + Math.imul(al3, bl6)) | 0;\r\n    mid = (mid + Math.imul(al3, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\r\n    lo = (lo + Math.imul(al2, bl7)) | 0;\r\n    mid = (mid + Math.imul(al2, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\r\n    lo = (lo + Math.imul(al1, bl8)) | 0;\r\n    mid = (mid + Math.imul(al1, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\r\n    lo = (lo + Math.imul(al0, bl9)) | 0;\r\n    mid = (mid + Math.imul(al0, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\r\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\r\n    w9 &= 0x3ffffff;\r\n    /* k = 10 */\r\n    lo = Math.imul(al9, bl1);\r\n    mid = Math.imul(al9, bh1);\r\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\r\n    hi = Math.imul(ah9, bh1);\r\n    lo = (lo + Math.imul(al8, bl2)) | 0;\r\n    mid = (mid + Math.imul(al8, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\r\n    lo = (lo + Math.imul(al7, bl3)) | 0;\r\n    mid = (mid + Math.imul(al7, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\r\n    lo = (lo + Math.imul(al6, bl4)) | 0;\r\n    mid = (mid + Math.imul(al6, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\r\n    lo = (lo + Math.imul(al5, bl5)) | 0;\r\n    mid = (mid + Math.imul(al5, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\r\n    lo = (lo + Math.imul(al4, bl6)) | 0;\r\n    mid = (mid + Math.imul(al4, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\r\n    lo = (lo + Math.imul(al3, bl7)) | 0;\r\n    mid = (mid + Math.imul(al3, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\r\n    lo = (lo + Math.imul(al2, bl8)) | 0;\r\n    mid = (mid + Math.imul(al2, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\r\n    lo = (lo + Math.imul(al1, bl9)) | 0;\r\n    mid = (mid + Math.imul(al1, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\r\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\r\n    w10 &= 0x3ffffff;\r\n    /* k = 11 */\r\n    lo = Math.imul(al9, bl2);\r\n    mid = Math.imul(al9, bh2);\r\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\r\n    hi = Math.imul(ah9, bh2);\r\n    lo = (lo + Math.imul(al8, bl3)) | 0;\r\n    mid = (mid + Math.imul(al8, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\r\n    lo = (lo + Math.imul(al7, bl4)) | 0;\r\n    mid = (mid + Math.imul(al7, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\r\n    lo = (lo + Math.imul(al6, bl5)) | 0;\r\n    mid = (mid + Math.imul(al6, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\r\n    lo = (lo + Math.imul(al5, bl6)) | 0;\r\n    mid = (mid + Math.imul(al5, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\r\n    lo = (lo + Math.imul(al4, bl7)) | 0;\r\n    mid = (mid + Math.imul(al4, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\r\n    lo = (lo + Math.imul(al3, bl8)) | 0;\r\n    mid = (mid + Math.imul(al3, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\r\n    lo = (lo + Math.imul(al2, bl9)) | 0;\r\n    mid = (mid + Math.imul(al2, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\r\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\r\n    w11 &= 0x3ffffff;\r\n    /* k = 12 */\r\n    lo = Math.imul(al9, bl3);\r\n    mid = Math.imul(al9, bh3);\r\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\r\n    hi = Math.imul(ah9, bh3);\r\n    lo = (lo + Math.imul(al8, bl4)) | 0;\r\n    mid = (mid + Math.imul(al8, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\r\n    lo = (lo + Math.imul(al7, bl5)) | 0;\r\n    mid = (mid + Math.imul(al7, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\r\n    lo = (lo + Math.imul(al6, bl6)) | 0;\r\n    mid = (mid + Math.imul(al6, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\r\n    lo = (lo + Math.imul(al5, bl7)) | 0;\r\n    mid = (mid + Math.imul(al5, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\r\n    lo = (lo + Math.imul(al4, bl8)) | 0;\r\n    mid = (mid + Math.imul(al4, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\r\n    lo = (lo + Math.imul(al3, bl9)) | 0;\r\n    mid = (mid + Math.imul(al3, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\r\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\r\n    w12 &= 0x3ffffff;\r\n    /* k = 13 */\r\n    lo = Math.imul(al9, bl4);\r\n    mid = Math.imul(al9, bh4);\r\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\r\n    hi = Math.imul(ah9, bh4);\r\n    lo = (lo + Math.imul(al8, bl5)) | 0;\r\n    mid = (mid + Math.imul(al8, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\r\n    lo = (lo + Math.imul(al7, bl6)) | 0;\r\n    mid = (mid + Math.imul(al7, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\r\n    lo = (lo + Math.imul(al6, bl7)) | 0;\r\n    mid = (mid + Math.imul(al6, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\r\n    lo = (lo + Math.imul(al5, bl8)) | 0;\r\n    mid = (mid + Math.imul(al5, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\r\n    lo = (lo + Math.imul(al4, bl9)) | 0;\r\n    mid = (mid + Math.imul(al4, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\r\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\r\n    w13 &= 0x3ffffff;\r\n    /* k = 14 */\r\n    lo = Math.imul(al9, bl5);\r\n    mid = Math.imul(al9, bh5);\r\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\r\n    hi = Math.imul(ah9, bh5);\r\n    lo = (lo + Math.imul(al8, bl6)) | 0;\r\n    mid = (mid + Math.imul(al8, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\r\n    lo = (lo + Math.imul(al7, bl7)) | 0;\r\n    mid = (mid + Math.imul(al7, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\r\n    lo = (lo + Math.imul(al6, bl8)) | 0;\r\n    mid = (mid + Math.imul(al6, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\r\n    lo = (lo + Math.imul(al5, bl9)) | 0;\r\n    mid = (mid + Math.imul(al5, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\r\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\r\n    w14 &= 0x3ffffff;\r\n    /* k = 15 */\r\n    lo = Math.imul(al9, bl6);\r\n    mid = Math.imul(al9, bh6);\r\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\r\n    hi = Math.imul(ah9, bh6);\r\n    lo = (lo + Math.imul(al8, bl7)) | 0;\r\n    mid = (mid + Math.imul(al8, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\r\n    lo = (lo + Math.imul(al7, bl8)) | 0;\r\n    mid = (mid + Math.imul(al7, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\r\n    lo = (lo + Math.imul(al6, bl9)) | 0;\r\n    mid = (mid + Math.imul(al6, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\r\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\r\n    w15 &= 0x3ffffff;\r\n    /* k = 16 */\r\n    lo = Math.imul(al9, bl7);\r\n    mid = Math.imul(al9, bh7);\r\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\r\n    hi = Math.imul(ah9, bh7);\r\n    lo = (lo + Math.imul(al8, bl8)) | 0;\r\n    mid = (mid + Math.imul(al8, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\r\n    lo = (lo + Math.imul(al7, bl9)) | 0;\r\n    mid = (mid + Math.imul(al7, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\r\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\r\n    w16 &= 0x3ffffff;\r\n    /* k = 17 */\r\n    lo = Math.imul(al9, bl8);\r\n    mid = Math.imul(al9, bh8);\r\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\r\n    hi = Math.imul(ah9, bh8);\r\n    lo = (lo + Math.imul(al8, bl9)) | 0;\r\n    mid = (mid + Math.imul(al8, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\r\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\r\n    w17 &= 0x3ffffff;\r\n    /* k = 18 */\r\n    lo = Math.imul(al9, bl9);\r\n    mid = Math.imul(al9, bh9);\r\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\r\n    hi = Math.imul(ah9, bh9);\r\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\r\n    w18 &= 0x3ffffff;\r\n    o[0] = w0;\r\n    o[1] = w1;\r\n    o[2] = w2;\r\n    o[3] = w3;\r\n    o[4] = w4;\r\n    o[5] = w5;\r\n    o[6] = w6;\r\n    o[7] = w7;\r\n    o[8] = w8;\r\n    o[9] = w9;\r\n    o[10] = w10;\r\n    o[11] = w11;\r\n    o[12] = w12;\r\n    o[13] = w13;\r\n    o[14] = w14;\r\n    o[15] = w15;\r\n    o[16] = w16;\r\n    o[17] = w17;\r\n    o[18] = w18;\r\n    if (c !== 0) {\r\n      o[19] = c;\r\n      out.length++;\r\n    }\r\n    return out;\r\n  };\r\n\r\n  // Polyfill comb\r\n  if (!Math.imul) {\r\n    comb10MulTo = smallMulTo;\r\n  }\r\n\r\n  function bigMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    out.length = self.length + num.length;\r\n\r\n    var carry = 0;\r\n    var hncarry = 0;\r\n    for (var k = 0; k < out.length - 1; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = hncarry;\r\n      hncarry = 0;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = k - j;\r\n        var a = self.words[i] | 0;\r\n        var b = num.words[j] | 0;\r\n        var r = a * b;\r\n\r\n        var lo = r & 0x3ffffff;\r\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\r\n        lo = (lo + rword) | 0;\r\n        rword = lo & 0x3ffffff;\r\n        ncarry = (ncarry + (lo >>> 26)) | 0;\r\n\r\n        hncarry += ncarry >>> 26;\r\n        ncarry &= 0x3ffffff;\r\n      }\r\n      out.words[k] = rword;\r\n      carry = ncarry;\r\n      ncarry = hncarry;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out.strip();\r\n  }\r\n\r\n  function jumboMulTo (self, num, out) {\r\n    var fftm = new FFTM();\r\n    return fftm.mulp(self, num, out);\r\n  }\r\n\r\n  BN.prototype.mulTo = function mulTo (num, out) {\r\n    var res;\r\n    var len = this.length + num.length;\r\n    if (this.length === 10 && num.length === 10) {\r\n      res = comb10MulTo(this, num, out);\r\n    } else if (len < 63) {\r\n      res = smallMulTo(this, num, out);\r\n    } else if (len < 1024) {\r\n      res = bigMulTo(this, num, out);\r\n    } else {\r\n      res = jumboMulTo(this, num, out);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Cooley-Tukey algorithm for FFT\r\n  // slightly revisited to rely on looping instead of recursion\r\n\r\n  function FFTM (x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  FFTM.prototype.makeRBT = function makeRBT (N) {\r\n    var t = new Array(N);\r\n    var l = BN.prototype._countBits(N) - 1;\r\n    for (var i = 0; i < N; i++) {\r\n      t[i] = this.revBin(i, l, N);\r\n    }\r\n\r\n    return t;\r\n  };\r\n\r\n  // Returns binary-reversed representation of `x`\r\n  FFTM.prototype.revBin = function revBin (x, l, N) {\r\n    if (x === 0 || x === N - 1) return x;\r\n\r\n    var rb = 0;\r\n    for (var i = 0; i < l; i++) {\r\n      rb |= (x & 1) << (l - i - 1);\r\n      x >>= 1;\r\n    }\r\n\r\n    return rb;\r\n  };\r\n\r\n  // Performs \"tweedling\" phase, therefore 'emulating'\r\n  // behaviour of the recursive algorithm\r\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\r\n    for (var i = 0; i < N; i++) {\r\n      rtws[i] = rws[rbt[i]];\r\n      itws[i] = iws[rbt[i]];\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\r\n    this.permute(rbt, rws, iws, rtws, itws, N);\r\n\r\n    for (var s = 1; s < N; s <<= 1) {\r\n      var l = s << 1;\r\n\r\n      var rtwdf = Math.cos(2 * Math.PI / l);\r\n      var itwdf = Math.sin(2 * Math.PI / l);\r\n\r\n      for (var p = 0; p < N; p += l) {\r\n        var rtwdf_ = rtwdf;\r\n        var itwdf_ = itwdf;\r\n\r\n        for (var j = 0; j < s; j++) {\r\n          var re = rtws[p + j];\r\n          var ie = itws[p + j];\r\n\r\n          var ro = rtws[p + j + s];\r\n          var io = itws[p + j + s];\r\n\r\n          var rx = rtwdf_ * ro - itwdf_ * io;\r\n\r\n          io = rtwdf_ * io + itwdf_ * ro;\r\n          ro = rx;\r\n\r\n          rtws[p + j] = re + ro;\r\n          itws[p + j] = ie + io;\r\n\r\n          rtws[p + j + s] = re - ro;\r\n          itws[p + j + s] = ie - io;\r\n\r\n          /* jshint maxdepth : false */\r\n          if (j !== l) {\r\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\r\n\r\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\r\n            rtwdf_ = rx;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\r\n    var N = Math.max(m, n) | 1;\r\n    var odd = N & 1;\r\n    var i = 0;\r\n    for (N = N / 2 | 0; N; N = N >>> 1) {\r\n      i++;\r\n    }\r\n\r\n    return 1 << i + 1 + odd;\r\n  };\r\n\r\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\r\n    if (N <= 1) return;\r\n\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var t = rws[i];\r\n\r\n      rws[i] = rws[N - i - 1];\r\n      rws[N - i - 1] = t;\r\n\r\n      t = iws[i];\r\n\r\n      iws[i] = -iws[N - i - 1];\r\n      iws[N - i - 1] = -t;\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\r\n        Math.round(ws[2 * i] / N) +\r\n        carry;\r\n\r\n      ws[i] = w & 0x3ffffff;\r\n\r\n      if (w < 0x4000000) {\r\n        carry = 0;\r\n      } else {\r\n        carry = w / 0x4000000 | 0;\r\n      }\r\n    }\r\n\r\n    return ws;\r\n  };\r\n\r\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < len; i++) {\r\n      carry = carry + (ws[i] | 0);\r\n\r\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\r\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\r\n    }\r\n\r\n    // Pad with zeroes\r\n    for (i = 2 * len; i < N; ++i) {\r\n      rws[i] = 0;\r\n    }\r\n\r\n    assert(carry === 0);\r\n    assert((carry & ~0x1fff) === 0);\r\n  };\r\n\r\n  FFTM.prototype.stub = function stub (N) {\r\n    var ph = new Array(N);\r\n    for (var i = 0; i < N; i++) {\r\n      ph[i] = 0;\r\n    }\r\n\r\n    return ph;\r\n  };\r\n\r\n  FFTM.prototype.mulp = function mulp (x, y, out) {\r\n    var N = 2 * this.guessLen13b(x.length, y.length);\r\n\r\n    var rbt = this.makeRBT(N);\r\n\r\n    var _ = this.stub(N);\r\n\r\n    var rws = new Array(N);\r\n    var rwst = new Array(N);\r\n    var iwst = new Array(N);\r\n\r\n    var nrws = new Array(N);\r\n    var nrwst = new Array(N);\r\n    var niwst = new Array(N);\r\n\r\n    var rmws = out.words;\r\n    rmws.length = N;\r\n\r\n    this.convert13b(x.words, x.length, rws, N);\r\n    this.convert13b(y.words, y.length, nrws, N);\r\n\r\n    this.transform(rws, _, rwst, iwst, N, rbt);\r\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\r\n\r\n    for (var i = 0; i < N; i++) {\r\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\r\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\r\n      rwst[i] = rx;\r\n    }\r\n\r\n    this.conjugate(rwst, iwst, N);\r\n    this.transform(rwst, iwst, rmws, _, N, rbt);\r\n    this.conjugate(rmws, _, N);\r\n    this.normalize13b(rmws, N);\r\n\r\n    out.negative = x.negative ^ y.negative;\r\n    out.length = x.length + y.length;\r\n    return out.strip();\r\n  };\r\n\r\n  // Multiply `this` by `num`\r\n  BN.prototype.mul = function mul (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return this.mulTo(num, out);\r\n  };\r\n\r\n  // Multiply employing FFT\r\n  BN.prototype.mulf = function mulf (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return jumboMulTo(this, num, out);\r\n  };\r\n\r\n  // In-place Multiplication\r\n  BN.prototype.imul = function imul (num) {\r\n    return this.clone().mulTo(num, this);\r\n  };\r\n\r\n  BN.prototype.imuln = function imuln (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n\r\n    // Carry\r\n    var carry = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var w = (this.words[i] | 0) * num;\r\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\r\n      carry >>= 26;\r\n      carry += (w / 0x4000000) | 0;\r\n      // NOTE: lo is 27bit maximum\r\n      carry += lo >>> 26;\r\n      this.words[i] = lo & 0x3ffffff;\r\n    }\r\n\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.muln = function muln (num) {\r\n    return this.clone().imuln(num);\r\n  };\r\n\r\n  // `this` * `this`\r\n  BN.prototype.sqr = function sqr () {\r\n    return this.mul(this);\r\n  };\r\n\r\n  // `this` * `this` in-place\r\n  BN.prototype.isqr = function isqr () {\r\n    return this.imul(this.clone());\r\n  };\r\n\r\n  // Math.pow(`this`, `num`)\r\n  BN.prototype.pow = function pow (num) {\r\n    var w = toBitArray(num);\r\n    if (w.length === 0) return new BN(1);\r\n\r\n    // Skip leading zeroes\r\n    var res = this;\r\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\r\n      if (w[i] !== 0) break;\r\n    }\r\n\r\n    if (++i < w.length) {\r\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\r\n        if (w[i] === 0) continue;\r\n\r\n        res = res.mul(q);\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Shift-left in-place\r\n  BN.prototype.iushln = function iushln (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\r\n    var i;\r\n\r\n    if (r !== 0) {\r\n      var carry = 0;\r\n\r\n      for (i = 0; i < this.length; i++) {\r\n        var newCarry = this.words[i] & carryMask;\r\n        var c = ((this.words[i] | 0) - newCarry) << r;\r\n        this.words[i] = c | carry;\r\n        carry = newCarry >>> (26 - r);\r\n      }\r\n\r\n      if (carry) {\r\n        this.words[i] = carry;\r\n        this.length++;\r\n      }\r\n    }\r\n\r\n    if (s !== 0) {\r\n      for (i = this.length - 1; i >= 0; i--) {\r\n        this.words[i + s] = this.words[i];\r\n      }\r\n\r\n      for (i = 0; i < s; i++) {\r\n        this.words[i] = 0;\r\n      }\r\n\r\n      this.length += s;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ishln = function ishln (bits) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushln(bits);\r\n  };\r\n\r\n  // Shift-right in-place\r\n  // NOTE: `hint` is a lowest bit before trailing zeroes\r\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\r\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var h;\r\n    if (hint) {\r\n      h = (hint - (hint % 26)) / 26;\r\n    } else {\r\n      h = 0;\r\n    }\r\n\r\n    var r = bits % 26;\r\n    var s = Math.min((bits - r) / 26, this.length);\r\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n    var maskedWords = extended;\r\n\r\n    h -= s;\r\n    h = Math.max(0, h);\r\n\r\n    // Extended mode, copy masked part\r\n    if (maskedWords) {\r\n      for (var i = 0; i < s; i++) {\r\n        maskedWords.words[i] = this.words[i];\r\n      }\r\n      maskedWords.length = s;\r\n    }\r\n\r\n    if (s === 0) {\r\n      // No-op, we should not move anything at all\r\n    } else if (this.length > s) {\r\n      this.length -= s;\r\n      for (i = 0; i < this.length; i++) {\r\n        this.words[i] = this.words[i + s];\r\n      }\r\n    } else {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\r\n      var word = this.words[i] | 0;\r\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\r\n      carry = word & mask;\r\n    }\r\n\r\n    // Push carried bits as a mask\r\n    if (maskedWords && carry !== 0) {\r\n      maskedWords.words[maskedWords.length++] = carry;\r\n    }\r\n\r\n    if (this.length === 0) {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushrn(bits, hint, extended);\r\n  };\r\n\r\n  // Shift-left\r\n  BN.prototype.shln = function shln (bits) {\r\n    return this.clone().ishln(bits);\r\n  };\r\n\r\n  BN.prototype.ushln = function ushln (bits) {\r\n    return this.clone().iushln(bits);\r\n  };\r\n\r\n  // Shift-right\r\n  BN.prototype.shrn = function shrn (bits) {\r\n    return this.clone().ishrn(bits);\r\n  };\r\n\r\n  BN.prototype.ushrn = function ushrn (bits) {\r\n    return this.clone().iushrn(bits);\r\n  };\r\n\r\n  // Test if n bit is set\r\n  BN.prototype.testn = function testn (bit) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) return false;\r\n\r\n    // Check bit and return\r\n    var w = this.words[s];\r\n\r\n    return !!(w & q);\r\n  };\r\n\r\n  // Return only lowers bits of number (in-place)\r\n  BN.prototype.imaskn = function imaskn (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n\r\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\r\n\r\n    if (this.length <= s) {\r\n      return this;\r\n    }\r\n\r\n    if (r !== 0) {\r\n      s++;\r\n    }\r\n    this.length = Math.min(s, this.length);\r\n\r\n    if (r !== 0) {\r\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n      this.words[this.length - 1] &= mask;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Return only lowers bits of number\r\n  BN.prototype.maskn = function maskn (bits) {\r\n    return this.clone().imaskn(bits);\r\n  };\r\n\r\n  // Add plain number `num` to `this`\r\n  BN.prototype.iaddn = function iaddn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.isubn(-num);\r\n\r\n    // Possible sign change\r\n    if (this.negative !== 0) {\r\n      if (this.length === 1 && (this.words[0] | 0) < num) {\r\n        this.words[0] = num - (this.words[0] | 0);\r\n        this.negative = 0;\r\n        return this;\r\n      }\r\n\r\n      this.negative = 0;\r\n      this.isubn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    // Add without checks\r\n    return this._iaddn(num);\r\n  };\r\n\r\n  BN.prototype._iaddn = function _iaddn (num) {\r\n    this.words[0] += num;\r\n\r\n    // Carry\r\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\r\n      this.words[i] -= 0x4000000;\r\n      if (i === this.length - 1) {\r\n        this.words[i + 1] = 1;\r\n      } else {\r\n        this.words[i + 1]++;\r\n      }\r\n    }\r\n    this.length = Math.max(this.length, i + 1);\r\n\r\n    return this;\r\n  };\r\n\r\n  // Subtract plain number `num` from `this`\r\n  BN.prototype.isubn = function isubn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.iaddn(-num);\r\n\r\n    if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iaddn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    this.words[0] -= num;\r\n\r\n    if (this.length === 1 && this.words[0] < 0) {\r\n      this.words[0] = -this.words[0];\r\n      this.negative = 1;\r\n    } else {\r\n      // Carry\r\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\r\n        this.words[i] += 0x4000000;\r\n        this.words[i + 1] -= 1;\r\n      }\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.addn = function addn (num) {\r\n    return this.clone().iaddn(num);\r\n  };\r\n\r\n  BN.prototype.subn = function subn (num) {\r\n    return this.clone().isubn(num);\r\n  };\r\n\r\n  BN.prototype.iabs = function iabs () {\r\n    this.negative = 0;\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.abs = function abs () {\r\n    return this.clone().iabs();\r\n  };\r\n\r\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\r\n    var len = num.length + shift;\r\n    var i;\r\n\r\n    this._expand(len);\r\n\r\n    var w;\r\n    var carry = 0;\r\n    for (i = 0; i < num.length; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      var right = (num.words[i] | 0) * mul;\r\n      w -= right & 0x3ffffff;\r\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n    for (; i < this.length - shift; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n\r\n    if (carry === 0) return this.strip();\r\n\r\n    // Subtraction overflow\r\n    assert(carry === -1);\r\n    carry = 0;\r\n    for (i = 0; i < this.length; i++) {\r\n      w = -(this.words[i] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i] = w & 0x3ffffff;\r\n    }\r\n    this.negative = 1;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\r\n    var shift = this.length - num.length;\r\n\r\n    var a = this.clone();\r\n    var b = num;\r\n\r\n    // Normalize\r\n    var bhi = b.words[b.length - 1] | 0;\r\n    var bhiBits = this._countBits(bhi);\r\n    shift = 26 - bhiBits;\r\n    if (shift !== 0) {\r\n      b = b.ushln(shift);\r\n      a.iushln(shift);\r\n      bhi = b.words[b.length - 1] | 0;\r\n    }\r\n\r\n    // Initialize quotient\r\n    var m = a.length - b.length;\r\n    var q;\r\n\r\n    if (mode !== 'mod') {\r\n      q = new BN(null);\r\n      q.length = m + 1;\r\n      q.words = new Array(q.length);\r\n      for (var i = 0; i < q.length; i++) {\r\n        q.words[i] = 0;\r\n      }\r\n    }\r\n\r\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\r\n    if (diff.negative === 0) {\r\n      a = diff;\r\n      if (q) {\r\n        q.words[m] = 1;\r\n      }\r\n    }\r\n\r\n    for (var j = m - 1; j >= 0; j--) {\r\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\r\n        (a.words[b.length + j - 1] | 0);\r\n\r\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\r\n      // (0x7ffffff)\r\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\r\n\r\n      a._ishlnsubmul(b, qj, j);\r\n      while (a.negative !== 0) {\r\n        qj--;\r\n        a.negative = 0;\r\n        a._ishlnsubmul(b, 1, j);\r\n        if (!a.isZero()) {\r\n          a.negative ^= 1;\r\n        }\r\n      }\r\n      if (q) {\r\n        q.words[j] = qj;\r\n      }\r\n    }\r\n    if (q) {\r\n      q.strip();\r\n    }\r\n    a.strip();\r\n\r\n    // Denormalize\r\n    if (mode !== 'div' && shift !== 0) {\r\n      a.iushrn(shift);\r\n    }\r\n\r\n    return {\r\n      div: q || null,\r\n      mod: a\r\n    };\r\n  };\r\n\r\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\r\n  //       to `div` to request div only, or be absent to\r\n  //       request both div & mod\r\n  //       2) `positive` is true if unsigned mod is requested\r\n  BN.prototype.divmod = function divmod (num, mode, positive) {\r\n    assert(!num.isZero());\r\n\r\n    if (this.isZero()) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: new BN(0)\r\n      };\r\n    }\r\n\r\n    var div, mod, res;\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      res = this.neg().divmod(num, mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.iadd(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    if (this.negative === 0 && num.negative !== 0) {\r\n      res = this.divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: res.mod\r\n      };\r\n    }\r\n\r\n    if ((this.negative & num.negative) !== 0) {\r\n      res = this.neg().divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.isub(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: res.div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    // Both numbers are positive at this point\r\n\r\n    // Strip both numbers to approximate shift value\r\n    if (num.length > this.length || this.cmp(num) < 0) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: this\r\n      };\r\n    }\r\n\r\n    // Very short reduction\r\n    if (num.length === 1) {\r\n      if (mode === 'div') {\r\n        return {\r\n          div: this.divn(num.words[0]),\r\n          mod: null\r\n        };\r\n      }\r\n\r\n      if (mode === 'mod') {\r\n        return {\r\n          div: null,\r\n          mod: new BN(this.modn(num.words[0]))\r\n        };\r\n      }\r\n\r\n      return {\r\n        div: this.divn(num.words[0]),\r\n        mod: new BN(this.modn(num.words[0]))\r\n      };\r\n    }\r\n\r\n    return this._wordDiv(num, mode);\r\n  };\r\n\r\n  // Find `this` / `num`\r\n  BN.prototype.div = function div (num) {\r\n    return this.divmod(num, 'div', false).div;\r\n  };\r\n\r\n  // Find `this` % `num`\r\n  BN.prototype.mod = function mod (num) {\r\n    return this.divmod(num, 'mod', false).mod;\r\n  };\r\n\r\n  BN.prototype.umod = function umod (num) {\r\n    return this.divmod(num, 'mod', true).mod;\r\n  };\r\n\r\n  // Find Round(`this` / `num`)\r\n  BN.prototype.divRound = function divRound (num) {\r\n    var dm = this.divmod(num);\r\n\r\n    // Fast case - exact division\r\n    if (dm.mod.isZero()) return dm.div;\r\n\r\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\r\n\r\n    var half = num.ushrn(1);\r\n    var r2 = num.andln(1);\r\n    var cmp = mod.cmp(half);\r\n\r\n    // Round down\r\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\r\n\r\n    // Round up\r\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\r\n  };\r\n\r\n  BN.prototype.modn = function modn (num) {\r\n    assert(num <= 0x3ffffff);\r\n    var p = (1 << 26) % num;\r\n\r\n    var acc = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      acc = (p * acc + (this.words[i] | 0)) % num;\r\n    }\r\n\r\n    return acc;\r\n  };\r\n\r\n  // In-place division by number\r\n  BN.prototype.idivn = function idivn (num) {\r\n    assert(num <= 0x3ffffff);\r\n\r\n    var carry = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var w = (this.words[i] | 0) + carry * 0x4000000;\r\n      this.words[i] = (w / num) | 0;\r\n      carry = w % num;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.divn = function divn (num) {\r\n    return this.clone().idivn(num);\r\n  };\r\n\r\n  BN.prototype.egcd = function egcd (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var x = this;\r\n    var y = p.clone();\r\n\r\n    if (x.negative !== 0) {\r\n      x = x.umod(p);\r\n    } else {\r\n      x = x.clone();\r\n    }\r\n\r\n    // A * x + B * y = x\r\n    var A = new BN(1);\r\n    var B = new BN(0);\r\n\r\n    // C * x + D * y = y\r\n    var C = new BN(0);\r\n    var D = new BN(1);\r\n\r\n    var g = 0;\r\n\r\n    while (x.isEven() && y.isEven()) {\r\n      x.iushrn(1);\r\n      y.iushrn(1);\r\n      ++g;\r\n    }\r\n\r\n    var yp = y.clone();\r\n    var xp = x.clone();\r\n\r\n    while (!x.isZero()) {\r\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        x.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (A.isOdd() || B.isOdd()) {\r\n            A.iadd(yp);\r\n            B.isub(xp);\r\n          }\r\n\r\n          A.iushrn(1);\r\n          B.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        y.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (C.isOdd() || D.isOdd()) {\r\n            C.iadd(yp);\r\n            D.isub(xp);\r\n          }\r\n\r\n          C.iushrn(1);\r\n          D.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (x.cmp(y) >= 0) {\r\n        x.isub(y);\r\n        A.isub(C);\r\n        B.isub(D);\r\n      } else {\r\n        y.isub(x);\r\n        C.isub(A);\r\n        D.isub(B);\r\n      }\r\n    }\r\n\r\n    return {\r\n      a: C,\r\n      b: D,\r\n      gcd: y.iushln(g)\r\n    };\r\n  };\r\n\r\n  // This is reduced incarnation of the binary EEA\r\n  // above, designated to invert members of the\r\n  // _prime_ fields F(p) at a maximal speed\r\n  BN.prototype._invmp = function _invmp (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var a = this;\r\n    var b = p.clone();\r\n\r\n    if (a.negative !== 0) {\r\n      a = a.umod(p);\r\n    } else {\r\n      a = a.clone();\r\n    }\r\n\r\n    var x1 = new BN(1);\r\n    var x2 = new BN(0);\r\n\r\n    var delta = b.clone();\r\n\r\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\r\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        a.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (x1.isOdd()) {\r\n            x1.iadd(delta);\r\n          }\r\n\r\n          x1.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        b.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (x2.isOdd()) {\r\n            x2.iadd(delta);\r\n          }\r\n\r\n          x2.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (a.cmp(b) >= 0) {\r\n        a.isub(b);\r\n        x1.isub(x2);\r\n      } else {\r\n        b.isub(a);\r\n        x2.isub(x1);\r\n      }\r\n    }\r\n\r\n    var res;\r\n    if (a.cmpn(1) === 0) {\r\n      res = x1;\r\n    } else {\r\n      res = x2;\r\n    }\r\n\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(p);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gcd = function gcd (num) {\r\n    if (this.isZero()) return num.abs();\r\n    if (num.isZero()) return this.abs();\r\n\r\n    var a = this.clone();\r\n    var b = num.clone();\r\n    a.negative = 0;\r\n    b.negative = 0;\r\n\r\n    // Remove common factor of two\r\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\r\n      a.iushrn(1);\r\n      b.iushrn(1);\r\n    }\r\n\r\n    do {\r\n      while (a.isEven()) {\r\n        a.iushrn(1);\r\n      }\r\n      while (b.isEven()) {\r\n        b.iushrn(1);\r\n      }\r\n\r\n      var r = a.cmp(b);\r\n      if (r < 0) {\r\n        // Swap `a` and `b` to make `a` always bigger than `b`\r\n        var t = a;\r\n        a = b;\r\n        b = t;\r\n      } else if (r === 0 || b.cmpn(1) === 0) {\r\n        break;\r\n      }\r\n\r\n      a.isub(b);\r\n    } while (true);\r\n\r\n    return b.iushln(shift);\r\n  };\r\n\r\n  // Invert number in the field F(num)\r\n  BN.prototype.invm = function invm (num) {\r\n    return this.egcd(num).a.umod(num);\r\n  };\r\n\r\n  BN.prototype.isEven = function isEven () {\r\n    return (this.words[0] & 1) === 0;\r\n  };\r\n\r\n  BN.prototype.isOdd = function isOdd () {\r\n    return (this.words[0] & 1) === 1;\r\n  };\r\n\r\n  // And first word and num\r\n  BN.prototype.andln = function andln (num) {\r\n    return this.words[0] & num;\r\n  };\r\n\r\n  // Increment at the bit position in-line\r\n  BN.prototype.bincn = function bincn (bit) {\r\n    assert(typeof bit === 'number');\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) {\r\n      this._expand(s + 1);\r\n      this.words[s] |= q;\r\n      return this;\r\n    }\r\n\r\n    // Add bit and propagate, if needed\r\n    var carry = q;\r\n    for (var i = s; carry !== 0 && i < this.length; i++) {\r\n      var w = this.words[i] | 0;\r\n      w += carry;\r\n      carry = w >>> 26;\r\n      w &= 0x3ffffff;\r\n      this.words[i] = w;\r\n    }\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.isZero = function isZero () {\r\n    return this.length === 1 && this.words[0] === 0;\r\n  };\r\n\r\n  BN.prototype.cmpn = function cmpn (num) {\r\n    var negative = num < 0;\r\n\r\n    if (this.negative !== 0 && !negative) return -1;\r\n    if (this.negative === 0 && negative) return 1;\r\n\r\n    this.strip();\r\n\r\n    var res;\r\n    if (this.length > 1) {\r\n      res = 1;\r\n    } else {\r\n      if (negative) {\r\n        num = -num;\r\n      }\r\n\r\n      assert(num <= 0x3ffffff, 'Number is too big');\r\n\r\n      var w = this.words[0] | 0;\r\n      res = w === num ? 0 : w < num ? -1 : 1;\r\n    }\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Compare two numbers and return:\r\n  // 1 - if `this` > `num`\r\n  // 0 - if `this` == `num`\r\n  // -1 - if `this` < `num`\r\n  BN.prototype.cmp = function cmp (num) {\r\n    if (this.negative !== 0 && num.negative === 0) return -1;\r\n    if (this.negative === 0 && num.negative !== 0) return 1;\r\n\r\n    var res = this.ucmp(num);\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Unsigned comparison\r\n  BN.prototype.ucmp = function ucmp (num) {\r\n    // At this point both numbers have the same sign\r\n    if (this.length > num.length) return 1;\r\n    if (this.length < num.length) return -1;\r\n\r\n    var res = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var a = this.words[i] | 0;\r\n      var b = num.words[i] | 0;\r\n\r\n      if (a === b) continue;\r\n      if (a < b) {\r\n        res = -1;\r\n      } else if (a > b) {\r\n        res = 1;\r\n      }\r\n      break;\r\n    }\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gtn = function gtn (num) {\r\n    return this.cmpn(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gt = function gt (num) {\r\n    return this.cmp(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gten = function gten (num) {\r\n    return this.cmpn(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.gte = function gte (num) {\r\n    return this.cmp(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.ltn = function ltn (num) {\r\n    return this.cmpn(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lt = function lt (num) {\r\n    return this.cmp(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lten = function lten (num) {\r\n    return this.cmpn(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.lte = function lte (num) {\r\n    return this.cmp(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.eqn = function eqn (num) {\r\n    return this.cmpn(num) === 0;\r\n  };\r\n\r\n  BN.prototype.eq = function eq (num) {\r\n    return this.cmp(num) === 0;\r\n  };\r\n\r\n  //\r\n  // A reduce context, could be using montgomery or something better, depending\r\n  // on the `m` itself.\r\n  //\r\n  BN.red = function red (num) {\r\n    return new Red(num);\r\n  };\r\n\r\n  BN.prototype.toRed = function toRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    assert(this.negative === 0, 'red works only with positives');\r\n    return ctx.convertTo(this)._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.fromRed = function fromRed () {\r\n    assert(this.red, 'fromRed works only with numbers in reduction context');\r\n    return this.red.convertFrom(this);\r\n  };\r\n\r\n  BN.prototype._forceRed = function _forceRed (ctx) {\r\n    this.red = ctx;\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.forceRed = function forceRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    return this._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.redAdd = function redAdd (num) {\r\n    assert(this.red, 'redAdd works only with red numbers');\r\n    return this.red.add(this, num);\r\n  };\r\n\r\n  BN.prototype.redIAdd = function redIAdd (num) {\r\n    assert(this.red, 'redIAdd works only with red numbers');\r\n    return this.red.iadd(this, num);\r\n  };\r\n\r\n  BN.prototype.redSub = function redSub (num) {\r\n    assert(this.red, 'redSub works only with red numbers');\r\n    return this.red.sub(this, num);\r\n  };\r\n\r\n  BN.prototype.redISub = function redISub (num) {\r\n    assert(this.red, 'redISub works only with red numbers');\r\n    return this.red.isub(this, num);\r\n  };\r\n\r\n  BN.prototype.redShl = function redShl (num) {\r\n    assert(this.red, 'redShl works only with red numbers');\r\n    return this.red.shl(this, num);\r\n  };\r\n\r\n  BN.prototype.redMul = function redMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.mul(this, num);\r\n  };\r\n\r\n  BN.prototype.redIMul = function redIMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.imul(this, num);\r\n  };\r\n\r\n  BN.prototype.redSqr = function redSqr () {\r\n    assert(this.red, 'redSqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqr(this);\r\n  };\r\n\r\n  BN.prototype.redISqr = function redISqr () {\r\n    assert(this.red, 'redISqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.isqr(this);\r\n  };\r\n\r\n  // Square root over p\r\n  BN.prototype.redSqrt = function redSqrt () {\r\n    assert(this.red, 'redSqrt works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqrt(this);\r\n  };\r\n\r\n  BN.prototype.redInvm = function redInvm () {\r\n    assert(this.red, 'redInvm works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.invm(this);\r\n  };\r\n\r\n  // Return negative clone of `this` % `red modulo`\r\n  BN.prototype.redNeg = function redNeg () {\r\n    assert(this.red, 'redNeg works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.neg(this);\r\n  };\r\n\r\n  BN.prototype.redPow = function redPow (num) {\r\n    assert(this.red && !num.red, 'redPow(normalNum)');\r\n    this.red._verify1(this);\r\n    return this.red.pow(this, num);\r\n  };\r\n\r\n  // Prime numbers with efficient reduction\r\n  var primes = {\r\n    k256: null,\r\n    p224: null,\r\n    p192: null,\r\n    p25519: null\r\n  };\r\n\r\n  // Pseudo-Mersenne prime\r\n  function MPrime (name, p) {\r\n    // P = 2 ^ N - K\r\n    this.name = name;\r\n    this.p = new BN(p, 16);\r\n    this.n = this.p.bitLength();\r\n    this.k = new BN(1).iushln(this.n).isub(this.p);\r\n\r\n    this.tmp = this._tmp();\r\n  }\r\n\r\n  MPrime.prototype._tmp = function _tmp () {\r\n    var tmp = new BN(null);\r\n    tmp.words = new Array(Math.ceil(this.n / 13));\r\n    return tmp;\r\n  };\r\n\r\n  MPrime.prototype.ireduce = function ireduce (num) {\r\n    // Assumes that `num` is less than `P^2`\r\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\r\n    var r = num;\r\n    var rlen;\r\n\r\n    do {\r\n      this.split(r, this.tmp);\r\n      r = this.imulK(r);\r\n      r = r.iadd(this.tmp);\r\n      rlen = r.bitLength();\r\n    } while (rlen > this.n);\r\n\r\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\r\n    if (cmp === 0) {\r\n      r.words[0] = 0;\r\n      r.length = 1;\r\n    } else if (cmp > 0) {\r\n      r.isub(this.p);\r\n    } else {\r\n      if (r.strip !== undefined) {\r\n        // r is BN v4 instance\r\n        r.strip();\r\n      } else {\r\n        // r is BN v5 instance\r\n        r._strip();\r\n      }\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  MPrime.prototype.split = function split (input, out) {\r\n    input.iushrn(this.n, 0, out);\r\n  };\r\n\r\n  MPrime.prototype.imulK = function imulK (num) {\r\n    return num.imul(this.k);\r\n  };\r\n\r\n  function K256 () {\r\n    MPrime.call(\r\n      this,\r\n      'k256',\r\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\r\n  }\r\n  inherits(K256, MPrime);\r\n\r\n  K256.prototype.split = function split (input, output) {\r\n    // 256 = 9 * 26 + 22\r\n    var mask = 0x3fffff;\r\n\r\n    var outLen = Math.min(input.length, 9);\r\n    for (var i = 0; i < outLen; i++) {\r\n      output.words[i] = input.words[i];\r\n    }\r\n    output.length = outLen;\r\n\r\n    if (input.length <= 9) {\r\n      input.words[0] = 0;\r\n      input.length = 1;\r\n      return;\r\n    }\r\n\r\n    // Shift by 9 limbs\r\n    var prev = input.words[9];\r\n    output.words[output.length++] = prev & mask;\r\n\r\n    for (i = 10; i < input.length; i++) {\r\n      var next = input.words[i] | 0;\r\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\r\n      prev = next;\r\n    }\r\n    prev >>>= 22;\r\n    input.words[i - 10] = prev;\r\n    if (prev === 0 && input.length > 10) {\r\n      input.length -= 10;\r\n    } else {\r\n      input.length -= 9;\r\n    }\r\n  };\r\n\r\n  K256.prototype.imulK = function imulK (num) {\r\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\r\n    num.words[num.length] = 0;\r\n    num.words[num.length + 1] = 0;\r\n    num.length += 2;\r\n\r\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\r\n    var lo = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var w = num.words[i] | 0;\r\n      lo += w * 0x3d1;\r\n      num.words[i] = lo & 0x3ffffff;\r\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\r\n    }\r\n\r\n    // Fast length reduction\r\n    if (num.words[num.length - 1] === 0) {\r\n      num.length--;\r\n      if (num.words[num.length - 1] === 0) {\r\n        num.length--;\r\n      }\r\n    }\r\n    return num;\r\n  };\r\n\r\n  function P224 () {\r\n    MPrime.call(\r\n      this,\r\n      'p224',\r\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\r\n  }\r\n  inherits(P224, MPrime);\r\n\r\n  function P192 () {\r\n    MPrime.call(\r\n      this,\r\n      'p192',\r\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\r\n  }\r\n  inherits(P192, MPrime);\r\n\r\n  function P25519 () {\r\n    // 2 ^ 255 - 19\r\n    MPrime.call(\r\n      this,\r\n      '25519',\r\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\r\n  }\r\n  inherits(P25519, MPrime);\r\n\r\n  P25519.prototype.imulK = function imulK (num) {\r\n    // K = 0x13\r\n    var carry = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var hi = (num.words[i] | 0) * 0x13 + carry;\r\n      var lo = hi & 0x3ffffff;\r\n      hi >>>= 26;\r\n\r\n      num.words[i] = lo;\r\n      carry = hi;\r\n    }\r\n    if (carry !== 0) {\r\n      num.words[num.length++] = carry;\r\n    }\r\n    return num;\r\n  };\r\n\r\n  // Exported mostly for testing purposes, use plain name instead\r\n  BN._prime = function prime (name) {\r\n    // Cached version of prime\r\n    if (primes[name]) return primes[name];\r\n\r\n    var prime;\r\n    if (name === 'k256') {\r\n      prime = new K256();\r\n    } else if (name === 'p224') {\r\n      prime = new P224();\r\n    } else if (name === 'p192') {\r\n      prime = new P192();\r\n    } else if (name === 'p25519') {\r\n      prime = new P25519();\r\n    } else {\r\n      throw new Error('Unknown prime ' + name);\r\n    }\r\n    primes[name] = prime;\r\n\r\n    return prime;\r\n  };\r\n\r\n  //\r\n  // Base reduction engine\r\n  //\r\n  function Red (m) {\r\n    if (typeof m === 'string') {\r\n      var prime = BN._prime(m);\r\n      this.m = prime.p;\r\n      this.prime = prime;\r\n    } else {\r\n      assert(m.gtn(1), 'modulus must be greater than 1');\r\n      this.m = m;\r\n      this.prime = null;\r\n    }\r\n  }\r\n\r\n  Red.prototype._verify1 = function _verify1 (a) {\r\n    assert(a.negative === 0, 'red works only with positives');\r\n    assert(a.red, 'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype._verify2 = function _verify2 (a, b) {\r\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\r\n    assert(a.red && a.red === b.red,\r\n      'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype.imod = function imod (a) {\r\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\r\n    return a.umod(this.m)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.neg = function neg (a) {\r\n    if (a.isZero()) {\r\n      return a.clone();\r\n    }\r\n\r\n    return this.m.sub(a)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.add = function add (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.add(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.iadd = function iadd (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.iadd(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.sub = function sub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.sub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.isub = function isub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.isub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.shl = function shl (a, num) {\r\n    this._verify1(a);\r\n    return this.imod(a.ushln(num));\r\n  };\r\n\r\n  Red.prototype.imul = function imul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.imul(b));\r\n  };\r\n\r\n  Red.prototype.mul = function mul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.mul(b));\r\n  };\r\n\r\n  Red.prototype.isqr = function isqr (a) {\r\n    return this.imul(a, a.clone());\r\n  };\r\n\r\n  Red.prototype.sqr = function sqr (a) {\r\n    return this.mul(a, a);\r\n  };\r\n\r\n  Red.prototype.sqrt = function sqrt (a) {\r\n    if (a.isZero()) return a.clone();\r\n\r\n    var mod3 = this.m.andln(3);\r\n    assert(mod3 % 2 === 1);\r\n\r\n    // Fast case\r\n    if (mod3 === 3) {\r\n      var pow = this.m.add(new BN(1)).iushrn(2);\r\n      return this.pow(a, pow);\r\n    }\r\n\r\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\r\n    //\r\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\r\n    var q = this.m.subn(1);\r\n    var s = 0;\r\n    while (!q.isZero() && q.andln(1) === 0) {\r\n      s++;\r\n      q.iushrn(1);\r\n    }\r\n    assert(!q.isZero());\r\n\r\n    var one = new BN(1).toRed(this);\r\n    var nOne = one.redNeg();\r\n\r\n    // Find quadratic non-residue\r\n    // NOTE: Max is such because of generalized Riemann hypothesis.\r\n    var lpow = this.m.subn(1).iushrn(1);\r\n    var z = this.m.bitLength();\r\n    z = new BN(2 * z * z).toRed(this);\r\n\r\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\r\n      z.redIAdd(nOne);\r\n    }\r\n\r\n    var c = this.pow(z, q);\r\n    var r = this.pow(a, q.addn(1).iushrn(1));\r\n    var t = this.pow(a, q);\r\n    var m = s;\r\n    while (t.cmp(one) !== 0) {\r\n      var tmp = t;\r\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\r\n        tmp = tmp.redSqr();\r\n      }\r\n      assert(i < m);\r\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\r\n\r\n      r = r.redMul(b);\r\n      c = b.redSqr();\r\n      t = t.redMul(c);\r\n      m = i;\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  Red.prototype.invm = function invm (a) {\r\n    var inv = a._invmp(this.m);\r\n    if (inv.negative !== 0) {\r\n      inv.negative = 0;\r\n      return this.imod(inv).redNeg();\r\n    } else {\r\n      return this.imod(inv);\r\n    }\r\n  };\r\n\r\n  Red.prototype.pow = function pow (a, num) {\r\n    if (num.isZero()) return new BN(1).toRed(this);\r\n    if (num.cmpn(1) === 0) return a.clone();\r\n\r\n    var windowSize = 4;\r\n    var wnd = new Array(1 << windowSize);\r\n    wnd[0] = new BN(1).toRed(this);\r\n    wnd[1] = a;\r\n    for (var i = 2; i < wnd.length; i++) {\r\n      wnd[i] = this.mul(wnd[i - 1], a);\r\n    }\r\n\r\n    var res = wnd[0];\r\n    var current = 0;\r\n    var currentLen = 0;\r\n    var start = num.bitLength() % 26;\r\n    if (start === 0) {\r\n      start = 26;\r\n    }\r\n\r\n    for (i = num.length - 1; i >= 0; i--) {\r\n      var word = num.words[i];\r\n      for (var j = start - 1; j >= 0; j--) {\r\n        var bit = (word >> j) & 1;\r\n        if (res !== wnd[0]) {\r\n          res = this.sqr(res);\r\n        }\r\n\r\n        if (bit === 0 && current === 0) {\r\n          currentLen = 0;\r\n          continue;\r\n        }\r\n\r\n        current <<= 1;\r\n        current |= bit;\r\n        currentLen++;\r\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\r\n\r\n        res = this.mul(res, wnd[current]);\r\n        currentLen = 0;\r\n        current = 0;\r\n      }\r\n      start = 26;\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.convertTo = function convertTo (num) {\r\n    var r = num.umod(this.m);\r\n\r\n    return r === num ? r.clone() : r;\r\n  };\r\n\r\n  Red.prototype.convertFrom = function convertFrom (num) {\r\n    var res = num.clone();\r\n    res.red = null;\r\n    return res;\r\n  };\r\n\r\n  //\r\n  // Montgomery method engine\r\n  //\r\n\r\n  BN.mont = function mont (num) {\r\n    return new Mont(num);\r\n  };\r\n\r\n  function Mont (m) {\r\n    Red.call(this, m);\r\n\r\n    this.shift = this.m.bitLength();\r\n    if (this.shift % 26 !== 0) {\r\n      this.shift += 26 - (this.shift % 26);\r\n    }\r\n\r\n    this.r = new BN(1).iushln(this.shift);\r\n    this.r2 = this.imod(this.r.sqr());\r\n    this.rinv = this.r._invmp(this.m);\r\n\r\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\r\n    this.minv = this.minv.umod(this.r);\r\n    this.minv = this.r.sub(this.minv);\r\n  }\r\n  inherits(Mont, Red);\r\n\r\n  Mont.prototype.convertTo = function convertTo (num) {\r\n    return this.imod(num.ushln(this.shift));\r\n  };\r\n\r\n  Mont.prototype.convertFrom = function convertFrom (num) {\r\n    var r = this.imod(num.mul(this.rinv));\r\n    r.red = null;\r\n    return r;\r\n  };\r\n\r\n  Mont.prototype.imul = function imul (a, b) {\r\n    if (a.isZero() || b.isZero()) {\r\n      a.words[0] = 0;\r\n      a.length = 1;\r\n      return a;\r\n    }\r\n\r\n    var t = a.imul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.mul = function mul (a, b) {\r\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\r\n\r\n    var t = a.mul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.invm = function invm (a) {\r\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\r\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\r\n    return res._forceRed(this);\r\n  };\r\n})( false || module, this);\r\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack://Game/./node_modules/diffie-hellman/node_modules/bn.js/lib/bn.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic.js":
/*!***********************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar elliptic = exports;\n\nelliptic.version = __webpack_require__(/*! ../package.json */ \"./node_modules/elliptic/package.json\").version;\nelliptic.utils = __webpack_require__(/*! ./elliptic/utils */ \"./node_modules/elliptic/lib/elliptic/utils.js\");\nelliptic.rand = __webpack_require__(/*! brorand */ \"./node_modules/brorand/index.js\");\nelliptic.curve = __webpack_require__(/*! ./elliptic/curve */ \"./node_modules/elliptic/lib/elliptic/curve/index.js\");\nelliptic.curves = __webpack_require__(/*! ./elliptic/curves */ \"./node_modules/elliptic/lib/elliptic/curves.js\");\n\n// Protocols\nelliptic.ec = __webpack_require__(/*! ./elliptic/ec */ \"./node_modules/elliptic/lib/elliptic/ec/index.js\");\nelliptic.eddsa = __webpack_require__(/*! ./elliptic/eddsa */ \"./node_modules/elliptic/lib/elliptic/eddsa/index.js\");\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic/curve/base.js":
/*!**********************************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic/curve/base.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/elliptic/node_modules/bn.js/lib/bn.js\");\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/elliptic/lib/elliptic/utils.js\");\nvar getNAF = utils.getNAF;\nvar getJSF = utils.getJSF;\nvar assert = utils.assert;\n\nfunction BaseCurve(type, conf) {\n  this.type = type;\n  this.p = new BN(conf.p, 16);\n\n  // Use Montgomery, when there is no fast reduction for the prime\n  this.red = conf.prime ? BN.red(conf.prime) : BN.mont(this.p);\n\n  // Useful for many curves\n  this.zero = new BN(0).toRed(this.red);\n  this.one = new BN(1).toRed(this.red);\n  this.two = new BN(2).toRed(this.red);\n\n  // Curve configuration, optional\n  this.n = conf.n && new BN(conf.n, 16);\n  this.g = conf.g && this.pointFromJSON(conf.g, conf.gRed);\n\n  // Temporary arrays\n  this._wnafT1 = new Array(4);\n  this._wnafT2 = new Array(4);\n  this._wnafT3 = new Array(4);\n  this._wnafT4 = new Array(4);\n\n  this._bitLength = this.n ? this.n.bitLength() : 0;\n\n  // Generalized Greg Maxwell's trick\n  var adjustCount = this.n && this.p.div(this.n);\n  if (!adjustCount || adjustCount.cmpn(100) > 0) {\n    this.redN = null;\n  } else {\n    this._maxwellTrick = true;\n    this.redN = this.n.toRed(this.red);\n  }\n}\nmodule.exports = BaseCurve;\n\nBaseCurve.prototype.point = function point() {\n  throw new Error('Not implemented');\n};\n\nBaseCurve.prototype.validate = function validate() {\n  throw new Error('Not implemented');\n};\n\nBaseCurve.prototype._fixedNafMul = function _fixedNafMul(p, k) {\n  assert(p.precomputed);\n  var doubles = p._getDoubles();\n\n  var naf = getNAF(k, 1, this._bitLength);\n  var I = (1 << (doubles.step + 1)) - (doubles.step % 2 === 0 ? 2 : 1);\n  I /= 3;\n\n  // Translate into more windowed form\n  var repr = [];\n  for (var j = 0; j < naf.length; j += doubles.step) {\n    var nafW = 0;\n    for (var k = j + doubles.step - 1; k >= j; k--)\n      nafW = (nafW << 1) + naf[k];\n    repr.push(nafW);\n  }\n\n  var a = this.jpoint(null, null, null);\n  var b = this.jpoint(null, null, null);\n  for (var i = I; i > 0; i--) {\n    for (var j = 0; j < repr.length; j++) {\n      var nafW = repr[j];\n      if (nafW === i)\n        b = b.mixedAdd(doubles.points[j]);\n      else if (nafW === -i)\n        b = b.mixedAdd(doubles.points[j].neg());\n    }\n    a = a.add(b);\n  }\n  return a.toP();\n};\n\nBaseCurve.prototype._wnafMul = function _wnafMul(p, k) {\n  var w = 4;\n\n  // Precompute window\n  var nafPoints = p._getNAFPoints(w);\n  w = nafPoints.wnd;\n  var wnd = nafPoints.points;\n\n  // Get NAF form\n  var naf = getNAF(k, w, this._bitLength);\n\n  // Add `this`*(N+1) for every w-NAF index\n  var acc = this.jpoint(null, null, null);\n  for (var i = naf.length - 1; i >= 0; i--) {\n    // Count zeroes\n    for (var k = 0; i >= 0 && naf[i] === 0; i--)\n      k++;\n    if (i >= 0)\n      k++;\n    acc = acc.dblp(k);\n\n    if (i < 0)\n      break;\n    var z = naf[i];\n    assert(z !== 0);\n    if (p.type === 'affine') {\n      // J +- P\n      if (z > 0)\n        acc = acc.mixedAdd(wnd[(z - 1) >> 1]);\n      else\n        acc = acc.mixedAdd(wnd[(-z - 1) >> 1].neg());\n    } else {\n      // J +- J\n      if (z > 0)\n        acc = acc.add(wnd[(z - 1) >> 1]);\n      else\n        acc = acc.add(wnd[(-z - 1) >> 1].neg());\n    }\n  }\n  return p.type === 'affine' ? acc.toP() : acc;\n};\n\nBaseCurve.prototype._wnafMulAdd = function _wnafMulAdd(defW,\n                                                       points,\n                                                       coeffs,\n                                                       len,\n                                                       jacobianResult) {\n  var wndWidth = this._wnafT1;\n  var wnd = this._wnafT2;\n  var naf = this._wnafT3;\n\n  // Fill all arrays\n  var max = 0;\n  for (var i = 0; i < len; i++) {\n    var p = points[i];\n    var nafPoints = p._getNAFPoints(defW);\n    wndWidth[i] = nafPoints.wnd;\n    wnd[i] = nafPoints.points;\n  }\n\n  // Comb small window NAFs\n  for (var i = len - 1; i >= 1; i -= 2) {\n    var a = i - 1;\n    var b = i;\n    if (wndWidth[a] !== 1 || wndWidth[b] !== 1) {\n      naf[a] = getNAF(coeffs[a], wndWidth[a], this._bitLength);\n      naf[b] = getNAF(coeffs[b], wndWidth[b], this._bitLength);\n      max = Math.max(naf[a].length, max);\n      max = Math.max(naf[b].length, max);\n      continue;\n    }\n\n    var comb = [\n      points[a], /* 1 */\n      null, /* 3 */\n      null, /* 5 */\n      points[b] /* 7 */\n    ];\n\n    // Try to avoid Projective points, if possible\n    if (points[a].y.cmp(points[b].y) === 0) {\n      comb[1] = points[a].add(points[b]);\n      comb[2] = points[a].toJ().mixedAdd(points[b].neg());\n    } else if (points[a].y.cmp(points[b].y.redNeg()) === 0) {\n      comb[1] = points[a].toJ().mixedAdd(points[b]);\n      comb[2] = points[a].add(points[b].neg());\n    } else {\n      comb[1] = points[a].toJ().mixedAdd(points[b]);\n      comb[2] = points[a].toJ().mixedAdd(points[b].neg());\n    }\n\n    var index = [\n      -3, /* -1 -1 */\n      -1, /* -1 0 */\n      -5, /* -1 1 */\n      -7, /* 0 -1 */\n      0, /* 0 0 */\n      7, /* 0 1 */\n      5, /* 1 -1 */\n      1, /* 1 0 */\n      3  /* 1 1 */\n    ];\n\n    var jsf = getJSF(coeffs[a], coeffs[b]);\n    max = Math.max(jsf[0].length, max);\n    naf[a] = new Array(max);\n    naf[b] = new Array(max);\n    for (var j = 0; j < max; j++) {\n      var ja = jsf[0][j] | 0;\n      var jb = jsf[1][j] | 0;\n\n      naf[a][j] = index[(ja + 1) * 3 + (jb + 1)];\n      naf[b][j] = 0;\n      wnd[a] = comb;\n    }\n  }\n\n  var acc = this.jpoint(null, null, null);\n  var tmp = this._wnafT4;\n  for (var i = max; i >= 0; i--) {\n    var k = 0;\n\n    while (i >= 0) {\n      var zero = true;\n      for (var j = 0; j < len; j++) {\n        tmp[j] = naf[j][i] | 0;\n        if (tmp[j] !== 0)\n          zero = false;\n      }\n      if (!zero)\n        break;\n      k++;\n      i--;\n    }\n    if (i >= 0)\n      k++;\n    acc = acc.dblp(k);\n    if (i < 0)\n      break;\n\n    for (var j = 0; j < len; j++) {\n      var z = tmp[j];\n      var p;\n      if (z === 0)\n        continue;\n      else if (z > 0)\n        p = wnd[j][(z - 1) >> 1];\n      else if (z < 0)\n        p = wnd[j][(-z - 1) >> 1].neg();\n\n      if (p.type === 'affine')\n        acc = acc.mixedAdd(p);\n      else\n        acc = acc.add(p);\n    }\n  }\n  // Zeroify references\n  for (var i = 0; i < len; i++)\n    wnd[i] = null;\n\n  if (jacobianResult)\n    return acc;\n  else\n    return acc.toP();\n};\n\nfunction BasePoint(curve, type) {\n  this.curve = curve;\n  this.type = type;\n  this.precomputed = null;\n}\nBaseCurve.BasePoint = BasePoint;\n\nBasePoint.prototype.eq = function eq(/*other*/) {\n  throw new Error('Not implemented');\n};\n\nBasePoint.prototype.validate = function validate() {\n  return this.curve.validate(this);\n};\n\nBaseCurve.prototype.decodePoint = function decodePoint(bytes, enc) {\n  bytes = utils.toArray(bytes, enc);\n\n  var len = this.p.byteLength();\n\n  // uncompressed, hybrid-odd, hybrid-even\n  if ((bytes[0] === 0x04 || bytes[0] === 0x06 || bytes[0] === 0x07) &&\n      bytes.length - 1 === 2 * len) {\n    if (bytes[0] === 0x06)\n      assert(bytes[bytes.length - 1] % 2 === 0);\n    else if (bytes[0] === 0x07)\n      assert(bytes[bytes.length - 1] % 2 === 1);\n\n    var res =  this.point(bytes.slice(1, 1 + len),\n                          bytes.slice(1 + len, 1 + 2 * len));\n\n    return res;\n  } else if ((bytes[0] === 0x02 || bytes[0] === 0x03) &&\n              bytes.length - 1 === len) {\n    return this.pointFromX(bytes.slice(1, 1 + len), bytes[0] === 0x03);\n  }\n  throw new Error('Unknown point format');\n};\n\nBasePoint.prototype.encodeCompressed = function encodeCompressed(enc) {\n  return this.encode(enc, true);\n};\n\nBasePoint.prototype._encode = function _encode(compact) {\n  var len = this.curve.p.byteLength();\n  var x = this.getX().toArray('be', len);\n\n  if (compact)\n    return [ this.getY().isEven() ? 0x02 : 0x03 ].concat(x);\n\n  return [ 0x04 ].concat(x, this.getY().toArray('be', len)) ;\n};\n\nBasePoint.prototype.encode = function encode(enc, compact) {\n  return utils.encode(this._encode(compact), enc);\n};\n\nBasePoint.prototype.precompute = function precompute(power) {\n  if (this.precomputed)\n    return this;\n\n  var precomputed = {\n    doubles: null,\n    naf: null,\n    beta: null\n  };\n  precomputed.naf = this._getNAFPoints(8);\n  precomputed.doubles = this._getDoubles(4, power);\n  precomputed.beta = this._getBeta();\n  this.precomputed = precomputed;\n\n  return this;\n};\n\nBasePoint.prototype._hasDoubles = function _hasDoubles(k) {\n  if (!this.precomputed)\n    return false;\n\n  var doubles = this.precomputed.doubles;\n  if (!doubles)\n    return false;\n\n  return doubles.points.length >= Math.ceil((k.bitLength() + 1) / doubles.step);\n};\n\nBasePoint.prototype._getDoubles = function _getDoubles(step, power) {\n  if (this.precomputed && this.precomputed.doubles)\n    return this.precomputed.doubles;\n\n  var doubles = [ this ];\n  var acc = this;\n  for (var i = 0; i < power; i += step) {\n    for (var j = 0; j < step; j++)\n      acc = acc.dbl();\n    doubles.push(acc);\n  }\n  return {\n    step: step,\n    points: doubles\n  };\n};\n\nBasePoint.prototype._getNAFPoints = function _getNAFPoints(wnd) {\n  if (this.precomputed && this.precomputed.naf)\n    return this.precomputed.naf;\n\n  var res = [ this ];\n  var max = (1 << wnd) - 1;\n  var dbl = max === 1 ? null : this.dbl();\n  for (var i = 1; i < max; i++)\n    res[i] = res[i - 1].add(dbl);\n  return {\n    wnd: wnd,\n    points: res\n  };\n};\n\nBasePoint.prototype._getBeta = function _getBeta() {\n  return null;\n};\n\nBasePoint.prototype.dblp = function dblp(k) {\n  var r = this;\n  for (var i = 0; i < k; i++)\n    r = r.dbl();\n  return r;\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic/curve/base.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic/curve/edwards.js":
/*!*************************************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic/curve/edwards.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/elliptic/lib/elliptic/utils.js\");\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/elliptic/node_modules/bn.js/lib/bn.js\");\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\nvar Base = __webpack_require__(/*! ./base */ \"./node_modules/elliptic/lib/elliptic/curve/base.js\");\n\nvar assert = utils.assert;\n\nfunction EdwardsCurve(conf) {\n  // NOTE: Important as we are creating point in Base.call()\n  this.twisted = (conf.a | 0) !== 1;\n  this.mOneA = this.twisted && (conf.a | 0) === -1;\n  this.extended = this.mOneA;\n\n  Base.call(this, 'edwards', conf);\n\n  this.a = new BN(conf.a, 16).umod(this.red.m);\n  this.a = this.a.toRed(this.red);\n  this.c = new BN(conf.c, 16).toRed(this.red);\n  this.c2 = this.c.redSqr();\n  this.d = new BN(conf.d, 16).toRed(this.red);\n  this.dd = this.d.redAdd(this.d);\n\n  assert(!this.twisted || this.c.fromRed().cmpn(1) === 0);\n  this.oneC = (conf.c | 0) === 1;\n}\ninherits(EdwardsCurve, Base);\nmodule.exports = EdwardsCurve;\n\nEdwardsCurve.prototype._mulA = function _mulA(num) {\n  if (this.mOneA)\n    return num.redNeg();\n  else\n    return this.a.redMul(num);\n};\n\nEdwardsCurve.prototype._mulC = function _mulC(num) {\n  if (this.oneC)\n    return num;\n  else\n    return this.c.redMul(num);\n};\n\n// Just for compatibility with Short curve\nEdwardsCurve.prototype.jpoint = function jpoint(x, y, z, t) {\n  return this.point(x, y, z, t);\n};\n\nEdwardsCurve.prototype.pointFromX = function pointFromX(x, odd) {\n  x = new BN(x, 16);\n  if (!x.red)\n    x = x.toRed(this.red);\n\n  var x2 = x.redSqr();\n  var rhs = this.c2.redSub(this.a.redMul(x2));\n  var lhs = this.one.redSub(this.c2.redMul(this.d).redMul(x2));\n\n  var y2 = rhs.redMul(lhs.redInvm());\n  var y = y2.redSqrt();\n  if (y.redSqr().redSub(y2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  var isOdd = y.fromRed().isOdd();\n  if (odd && !isOdd || !odd && isOdd)\n    y = y.redNeg();\n\n  return this.point(x, y);\n};\n\nEdwardsCurve.prototype.pointFromY = function pointFromY(y, odd) {\n  y = new BN(y, 16);\n  if (!y.red)\n    y = y.toRed(this.red);\n\n  // x^2 = (y^2 - c^2) / (c^2 d y^2 - a)\n  var y2 = y.redSqr();\n  var lhs = y2.redSub(this.c2);\n  var rhs = y2.redMul(this.d).redMul(this.c2).redSub(this.a);\n  var x2 = lhs.redMul(rhs.redInvm());\n\n  if (x2.cmp(this.zero) === 0) {\n    if (odd)\n      throw new Error('invalid point');\n    else\n      return this.point(this.zero, y);\n  }\n\n  var x = x2.redSqrt();\n  if (x.redSqr().redSub(x2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  if (x.fromRed().isOdd() !== odd)\n    x = x.redNeg();\n\n  return this.point(x, y);\n};\n\nEdwardsCurve.prototype.validate = function validate(point) {\n  if (point.isInfinity())\n    return true;\n\n  // Curve: A * X^2 + Y^2 = C^2 * (1 + D * X^2 * Y^2)\n  point.normalize();\n\n  var x2 = point.x.redSqr();\n  var y2 = point.y.redSqr();\n  var lhs = x2.redMul(this.a).redAdd(y2);\n  var rhs = this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));\n\n  return lhs.cmp(rhs) === 0;\n};\n\nfunction Point(curve, x, y, z, t) {\n  Base.BasePoint.call(this, curve, 'projective');\n  if (x === null && y === null && z === null) {\n    this.x = this.curve.zero;\n    this.y = this.curve.one;\n    this.z = this.curve.one;\n    this.t = this.curve.zero;\n    this.zOne = true;\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    this.z = z ? new BN(z, 16) : this.curve.one;\n    this.t = t && new BN(t, 16);\n    if (!this.x.red)\n      this.x = this.x.toRed(this.curve.red);\n    if (!this.y.red)\n      this.y = this.y.toRed(this.curve.red);\n    if (!this.z.red)\n      this.z = this.z.toRed(this.curve.red);\n    if (this.t && !this.t.red)\n      this.t = this.t.toRed(this.curve.red);\n    this.zOne = this.z === this.curve.one;\n\n    // Use extended coordinates\n    if (this.curve.extended && !this.t) {\n      this.t = this.x.redMul(this.y);\n      if (!this.zOne)\n        this.t = this.t.redMul(this.z.redInvm());\n    }\n  }\n}\ninherits(Point, Base.BasePoint);\n\nEdwardsCurve.prototype.pointFromJSON = function pointFromJSON(obj) {\n  return Point.fromJSON(this, obj);\n};\n\nEdwardsCurve.prototype.point = function point(x, y, z, t) {\n  return new Point(this, x, y, z, t);\n};\n\nPoint.fromJSON = function fromJSON(curve, obj) {\n  return new Point(curve, obj[0], obj[1], obj[2]);\n};\n\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) +\n      ' y: ' + this.y.fromRed().toString(16, 2) +\n      ' z: ' + this.z.fromRed().toString(16, 2) + '>';\n};\n\nPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.x.cmpn(0) === 0 &&\n    (this.y.cmp(this.z) === 0 ||\n    (this.zOne && this.y.cmp(this.curve.c) === 0));\n};\n\nPoint.prototype._extDbl = function _extDbl() {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-extended-1.html\n  //     #doubling-dbl-2008-hwcd\n  // 4M + 4S\n\n  // A = X1^2\n  var a = this.x.redSqr();\n  // B = Y1^2\n  var b = this.y.redSqr();\n  // C = 2 * Z1^2\n  var c = this.z.redSqr();\n  c = c.redIAdd(c);\n  // D = a * A\n  var d = this.curve._mulA(a);\n  // E = (X1 + Y1)^2 - A - B\n  var e = this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);\n  // G = D + B\n  var g = d.redAdd(b);\n  // F = G - C\n  var f = g.redSub(c);\n  // H = D - B\n  var h = d.redSub(b);\n  // X3 = E * F\n  var nx = e.redMul(f);\n  // Y3 = G * H\n  var ny = g.redMul(h);\n  // T3 = E * H\n  var nt = e.redMul(h);\n  // Z3 = F * G\n  var nz = f.redMul(g);\n  return this.curve.point(nx, ny, nz, nt);\n};\n\nPoint.prototype._projDbl = function _projDbl() {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-projective.html\n  //     #doubling-dbl-2008-bbjlp\n  //     #doubling-dbl-2007-bl\n  // and others\n  // Generally 3M + 4S or 2M + 4S\n\n  // B = (X1 + Y1)^2\n  var b = this.x.redAdd(this.y).redSqr();\n  // C = X1^2\n  var c = this.x.redSqr();\n  // D = Y1^2\n  var d = this.y.redSqr();\n\n  var nx;\n  var ny;\n  var nz;\n  if (this.curve.twisted) {\n    // E = a * C\n    var e = this.curve._mulA(c);\n    // F = E + D\n    var f = e.redAdd(d);\n    if (this.zOne) {\n      // X3 = (B - C - D) * (F - 2)\n      nx = b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two));\n      // Y3 = F * (E - D)\n      ny = f.redMul(e.redSub(d));\n      // Z3 = F^2 - 2 * F\n      nz = f.redSqr().redSub(f).redSub(f);\n    } else {\n      // H = Z1^2\n      var h = this.z.redSqr();\n      // J = F - 2 * H\n      var j = f.redSub(h).redISub(h);\n      // X3 = (B-C-D)*J\n      nx = b.redSub(c).redISub(d).redMul(j);\n      // Y3 = F * (E - D)\n      ny = f.redMul(e.redSub(d));\n      // Z3 = F * J\n      nz = f.redMul(j);\n    }\n  } else {\n    // E = C + D\n    var e = c.redAdd(d);\n    // H = (c * Z1)^2\n    var h = this.curve._mulC(this.z).redSqr();\n    // J = E - 2 * H\n    var j = e.redSub(h).redSub(h);\n    // X3 = c * (B - E) * J\n    nx = this.curve._mulC(b.redISub(e)).redMul(j);\n    // Y3 = c * E * (C - D)\n    ny = this.curve._mulC(e).redMul(c.redISub(d));\n    // Z3 = E * J\n    nz = e.redMul(j);\n  }\n  return this.curve.point(nx, ny, nz);\n};\n\nPoint.prototype.dbl = function dbl() {\n  if (this.isInfinity())\n    return this;\n\n  // Double in extended coordinates\n  if (this.curve.extended)\n    return this._extDbl();\n  else\n    return this._projDbl();\n};\n\nPoint.prototype._extAdd = function _extAdd(p) {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-extended-1.html\n  //     #addition-add-2008-hwcd-3\n  // 8M\n\n  // A = (Y1 - X1) * (Y2 - X2)\n  var a = this.y.redSub(this.x).redMul(p.y.redSub(p.x));\n  // B = (Y1 + X1) * (Y2 + X2)\n  var b = this.y.redAdd(this.x).redMul(p.y.redAdd(p.x));\n  // C = T1 * k * T2\n  var c = this.t.redMul(this.curve.dd).redMul(p.t);\n  // D = Z1 * 2 * Z2\n  var d = this.z.redMul(p.z.redAdd(p.z));\n  // E = B - A\n  var e = b.redSub(a);\n  // F = D - C\n  var f = d.redSub(c);\n  // G = D + C\n  var g = d.redAdd(c);\n  // H = B + A\n  var h = b.redAdd(a);\n  // X3 = E * F\n  var nx = e.redMul(f);\n  // Y3 = G * H\n  var ny = g.redMul(h);\n  // T3 = E * H\n  var nt = e.redMul(h);\n  // Z3 = F * G\n  var nz = f.redMul(g);\n  return this.curve.point(nx, ny, nz, nt);\n};\n\nPoint.prototype._projAdd = function _projAdd(p) {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-projective.html\n  //     #addition-add-2008-bbjlp\n  //     #addition-add-2007-bl\n  // 10M + 1S\n\n  // A = Z1 * Z2\n  var a = this.z.redMul(p.z);\n  // B = A^2\n  var b = a.redSqr();\n  // C = X1 * X2\n  var c = this.x.redMul(p.x);\n  // D = Y1 * Y2\n  var d = this.y.redMul(p.y);\n  // E = d * C * D\n  var e = this.curve.d.redMul(c).redMul(d);\n  // F = B - E\n  var f = b.redSub(e);\n  // G = B + E\n  var g = b.redAdd(e);\n  // X3 = A * F * ((X1 + Y1) * (X2 + Y2) - C - D)\n  var tmp = this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d);\n  var nx = a.redMul(f).redMul(tmp);\n  var ny;\n  var nz;\n  if (this.curve.twisted) {\n    // Y3 = A * G * (D - a * C)\n    ny = a.redMul(g).redMul(d.redSub(this.curve._mulA(c)));\n    // Z3 = F * G\n    nz = f.redMul(g);\n  } else {\n    // Y3 = A * G * (D - C)\n    ny = a.redMul(g).redMul(d.redSub(c));\n    // Z3 = c * F * G\n    nz = this.curve._mulC(f).redMul(g);\n  }\n  return this.curve.point(nx, ny, nz);\n};\n\nPoint.prototype.add = function add(p) {\n  if (this.isInfinity())\n    return p;\n  if (p.isInfinity())\n    return this;\n\n  if (this.curve.extended)\n    return this._extAdd(p);\n  else\n    return this._projAdd(p);\n};\n\nPoint.prototype.mul = function mul(k) {\n  if (this._hasDoubles(k))\n    return this.curve._fixedNafMul(this, k);\n  else\n    return this.curve._wnafMul(this, k);\n};\n\nPoint.prototype.mulAdd = function mulAdd(k1, p, k2) {\n  return this.curve._wnafMulAdd(1, [ this, p ], [ k1, k2 ], 2, false);\n};\n\nPoint.prototype.jmulAdd = function jmulAdd(k1, p, k2) {\n  return this.curve._wnafMulAdd(1, [ this, p ], [ k1, k2 ], 2, true);\n};\n\nPoint.prototype.normalize = function normalize() {\n  if (this.zOne)\n    return this;\n\n  // Normalize coordinates\n  var zi = this.z.redInvm();\n  this.x = this.x.redMul(zi);\n  this.y = this.y.redMul(zi);\n  if (this.t)\n    this.t = this.t.redMul(zi);\n  this.z = this.curve.one;\n  this.zOne = true;\n  return this;\n};\n\nPoint.prototype.neg = function neg() {\n  return this.curve.point(this.x.redNeg(),\n                          this.y,\n                          this.z,\n                          this.t && this.t.redNeg());\n};\n\nPoint.prototype.getX = function getX() {\n  this.normalize();\n  return this.x.fromRed();\n};\n\nPoint.prototype.getY = function getY() {\n  this.normalize();\n  return this.y.fromRed();\n};\n\nPoint.prototype.eq = function eq(other) {\n  return this === other ||\n         this.getX().cmp(other.getX()) === 0 &&\n         this.getY().cmp(other.getY()) === 0;\n};\n\nPoint.prototype.eqXToP = function eqXToP(x) {\n  var rx = x.toRed(this.curve.red).redMul(this.z);\n  if (this.x.cmp(rx) === 0)\n    return true;\n\n  var xc = x.clone();\n  var t = this.curve.redN.redMul(this.z);\n  for (;;) {\n    xc.iadd(this.curve.n);\n    if (xc.cmp(this.curve.p) >= 0)\n      return false;\n\n    rx.redIAdd(t);\n    if (this.x.cmp(rx) === 0)\n      return true;\n  }\n};\n\n// Compatibility with BaseCurve\nPoint.prototype.toP = Point.prototype.normalize;\nPoint.prototype.mixedAdd = Point.prototype.add;\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic/curve/edwards.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic/curve/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic/curve/index.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar curve = exports;\n\ncurve.base = __webpack_require__(/*! ./base */ \"./node_modules/elliptic/lib/elliptic/curve/base.js\");\ncurve.short = __webpack_require__(/*! ./short */ \"./node_modules/elliptic/lib/elliptic/curve/short.js\");\ncurve.mont = __webpack_require__(/*! ./mont */ \"./node_modules/elliptic/lib/elliptic/curve/mont.js\");\ncurve.edwards = __webpack_require__(/*! ./edwards */ \"./node_modules/elliptic/lib/elliptic/curve/edwards.js\");\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic/curve/index.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic/curve/mont.js":
/*!**********************************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic/curve/mont.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/elliptic/node_modules/bn.js/lib/bn.js\");\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\nvar Base = __webpack_require__(/*! ./base */ \"./node_modules/elliptic/lib/elliptic/curve/base.js\");\n\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/elliptic/lib/elliptic/utils.js\");\n\nfunction MontCurve(conf) {\n  Base.call(this, 'mont', conf);\n\n  this.a = new BN(conf.a, 16).toRed(this.red);\n  this.b = new BN(conf.b, 16).toRed(this.red);\n  this.i4 = new BN(4).toRed(this.red).redInvm();\n  this.two = new BN(2).toRed(this.red);\n  this.a24 = this.i4.redMul(this.a.redAdd(this.two));\n}\ninherits(MontCurve, Base);\nmodule.exports = MontCurve;\n\nMontCurve.prototype.validate = function validate(point) {\n  var x = point.normalize().x;\n  var x2 = x.redSqr();\n  var rhs = x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);\n  var y = rhs.redSqrt();\n\n  return y.redSqr().cmp(rhs) === 0;\n};\n\nfunction Point(curve, x, z) {\n  Base.BasePoint.call(this, curve, 'projective');\n  if (x === null && z === null) {\n    this.x = this.curve.one;\n    this.z = this.curve.zero;\n  } else {\n    this.x = new BN(x, 16);\n    this.z = new BN(z, 16);\n    if (!this.x.red)\n      this.x = this.x.toRed(this.curve.red);\n    if (!this.z.red)\n      this.z = this.z.toRed(this.curve.red);\n  }\n}\ninherits(Point, Base.BasePoint);\n\nMontCurve.prototype.decodePoint = function decodePoint(bytes, enc) {\n  return this.point(utils.toArray(bytes, enc), 1);\n};\n\nMontCurve.prototype.point = function point(x, z) {\n  return new Point(this, x, z);\n};\n\nMontCurve.prototype.pointFromJSON = function pointFromJSON(obj) {\n  return Point.fromJSON(this, obj);\n};\n\nPoint.prototype.precompute = function precompute() {\n  // No-op\n};\n\nPoint.prototype._encode = function _encode() {\n  return this.getX().toArray('be', this.curve.p.byteLength());\n};\n\nPoint.fromJSON = function fromJSON(curve, obj) {\n  return new Point(curve, obj[0], obj[1] || curve.one);\n};\n\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) +\n      ' z: ' + this.z.fromRed().toString(16, 2) + '>';\n};\n\nPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.z.cmpn(0) === 0;\n};\n\nPoint.prototype.dbl = function dbl() {\n  // http://hyperelliptic.org/EFD/g1p/auto-montgom-xz.html#doubling-dbl-1987-m-3\n  // 2M + 2S + 4A\n\n  // A = X1 + Z1\n  var a = this.x.redAdd(this.z);\n  // AA = A^2\n  var aa = a.redSqr();\n  // B = X1 - Z1\n  var b = this.x.redSub(this.z);\n  // BB = B^2\n  var bb = b.redSqr();\n  // C = AA - BB\n  var c = aa.redSub(bb);\n  // X3 = AA * BB\n  var nx = aa.redMul(bb);\n  // Z3 = C * (BB + A24 * C)\n  var nz = c.redMul(bb.redAdd(this.curve.a24.redMul(c)));\n  return this.curve.point(nx, nz);\n};\n\nPoint.prototype.add = function add() {\n  throw new Error('Not supported on Montgomery curve');\n};\n\nPoint.prototype.diffAdd = function diffAdd(p, diff) {\n  // http://hyperelliptic.org/EFD/g1p/auto-montgom-xz.html#diffadd-dadd-1987-m-3\n  // 4M + 2S + 6A\n\n  // A = X2 + Z2\n  var a = this.x.redAdd(this.z);\n  // B = X2 - Z2\n  var b = this.x.redSub(this.z);\n  // C = X3 + Z3\n  var c = p.x.redAdd(p.z);\n  // D = X3 - Z3\n  var d = p.x.redSub(p.z);\n  // DA = D * A\n  var da = d.redMul(a);\n  // CB = C * B\n  var cb = c.redMul(b);\n  // X5 = Z1 * (DA + CB)^2\n  var nx = diff.z.redMul(da.redAdd(cb).redSqr());\n  // Z5 = X1 * (DA - CB)^2\n  var nz = diff.x.redMul(da.redISub(cb).redSqr());\n  return this.curve.point(nx, nz);\n};\n\nPoint.prototype.mul = function mul(k) {\n  var t = k.clone();\n  var a = this; // (N / 2) * Q + Q\n  var b = this.curve.point(null, null); // (N / 2) * Q\n  var c = this; // Q\n\n  for (var bits = []; t.cmpn(0) !== 0; t.iushrn(1))\n    bits.push(t.andln(1));\n\n  for (var i = bits.length - 1; i >= 0; i--) {\n    if (bits[i] === 0) {\n      // N * Q + Q = ((N / 2) * Q + Q)) + (N / 2) * Q\n      a = a.diffAdd(b, c);\n      // N * Q = 2 * ((N / 2) * Q + Q))\n      b = b.dbl();\n    } else {\n      // N * Q = ((N / 2) * Q + Q) + ((N / 2) * Q)\n      b = a.diffAdd(b, c);\n      // N * Q + Q = 2 * ((N / 2) * Q + Q)\n      a = a.dbl();\n    }\n  }\n  return b;\n};\n\nPoint.prototype.mulAdd = function mulAdd() {\n  throw new Error('Not supported on Montgomery curve');\n};\n\nPoint.prototype.jumlAdd = function jumlAdd() {\n  throw new Error('Not supported on Montgomery curve');\n};\n\nPoint.prototype.eq = function eq(other) {\n  return this.getX().cmp(other.getX()) === 0;\n};\n\nPoint.prototype.normalize = function normalize() {\n  this.x = this.x.redMul(this.z.redInvm());\n  this.z = this.curve.one;\n  return this;\n};\n\nPoint.prototype.getX = function getX() {\n  // Normalize coordinates\n  this.normalize();\n\n  return this.x.fromRed();\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic/curve/mont.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic/curve/short.js":
/*!***********************************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic/curve/short.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/elliptic/lib/elliptic/utils.js\");\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/elliptic/node_modules/bn.js/lib/bn.js\");\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\nvar Base = __webpack_require__(/*! ./base */ \"./node_modules/elliptic/lib/elliptic/curve/base.js\");\n\nvar assert = utils.assert;\n\nfunction ShortCurve(conf) {\n  Base.call(this, 'short', conf);\n\n  this.a = new BN(conf.a, 16).toRed(this.red);\n  this.b = new BN(conf.b, 16).toRed(this.red);\n  this.tinv = this.two.redInvm();\n\n  this.zeroA = this.a.fromRed().cmpn(0) === 0;\n  this.threeA = this.a.fromRed().sub(this.p).cmpn(-3) === 0;\n\n  // If the curve is endomorphic, precalculate beta and lambda\n  this.endo = this._getEndomorphism(conf);\n  this._endoWnafT1 = new Array(4);\n  this._endoWnafT2 = new Array(4);\n}\ninherits(ShortCurve, Base);\nmodule.exports = ShortCurve;\n\nShortCurve.prototype._getEndomorphism = function _getEndomorphism(conf) {\n  // No efficient endomorphism\n  if (!this.zeroA || !this.g || !this.n || this.p.modn(3) !== 1)\n    return;\n\n  // Compute beta and lambda, that lambda * P = (beta * Px; Py)\n  var beta;\n  var lambda;\n  if (conf.beta) {\n    beta = new BN(conf.beta, 16).toRed(this.red);\n  } else {\n    var betas = this._getEndoRoots(this.p);\n    // Choose the smallest beta\n    beta = betas[0].cmp(betas[1]) < 0 ? betas[0] : betas[1];\n    beta = beta.toRed(this.red);\n  }\n  if (conf.lambda) {\n    lambda = new BN(conf.lambda, 16);\n  } else {\n    // Choose the lambda that is matching selected beta\n    var lambdas = this._getEndoRoots(this.n);\n    if (this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta)) === 0) {\n      lambda = lambdas[0];\n    } else {\n      lambda = lambdas[1];\n      assert(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta)) === 0);\n    }\n  }\n\n  // Get basis vectors, used for balanced length-two representation\n  var basis;\n  if (conf.basis) {\n    basis = conf.basis.map(function(vec) {\n      return {\n        a: new BN(vec.a, 16),\n        b: new BN(vec.b, 16)\n      };\n    });\n  } else {\n    basis = this._getEndoBasis(lambda);\n  }\n\n  return {\n    beta: beta,\n    lambda: lambda,\n    basis: basis\n  };\n};\n\nShortCurve.prototype._getEndoRoots = function _getEndoRoots(num) {\n  // Find roots of for x^2 + x + 1 in F\n  // Root = (-1 +- Sqrt(-3)) / 2\n  //\n  var red = num === this.p ? this.red : BN.mont(num);\n  var tinv = new BN(2).toRed(red).redInvm();\n  var ntinv = tinv.redNeg();\n\n  var s = new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);\n\n  var l1 = ntinv.redAdd(s).fromRed();\n  var l2 = ntinv.redSub(s).fromRed();\n  return [ l1, l2 ];\n};\n\nShortCurve.prototype._getEndoBasis = function _getEndoBasis(lambda) {\n  // aprxSqrt >= sqrt(this.n)\n  var aprxSqrt = this.n.ushrn(Math.floor(this.n.bitLength() / 2));\n\n  // 3.74\n  // Run EGCD, until r(L + 1) < aprxSqrt\n  var u = lambda;\n  var v = this.n.clone();\n  var x1 = new BN(1);\n  var y1 = new BN(0);\n  var x2 = new BN(0);\n  var y2 = new BN(1);\n\n  // NOTE: all vectors are roots of: a + b * lambda = 0 (mod n)\n  var a0;\n  var b0;\n  // First vector\n  var a1;\n  var b1;\n  // Second vector\n  var a2;\n  var b2;\n\n  var prevR;\n  var i = 0;\n  var r;\n  var x;\n  while (u.cmpn(0) !== 0) {\n    var q = v.div(u);\n    r = v.sub(q.mul(u));\n    x = x2.sub(q.mul(x1));\n    var y = y2.sub(q.mul(y1));\n\n    if (!a1 && r.cmp(aprxSqrt) < 0) {\n      a0 = prevR.neg();\n      b0 = x1;\n      a1 = r.neg();\n      b1 = x;\n    } else if (a1 && ++i === 2) {\n      break;\n    }\n    prevR = r;\n\n    v = u;\n    u = r;\n    x2 = x1;\n    x1 = x;\n    y2 = y1;\n    y1 = y;\n  }\n  a2 = r.neg();\n  b2 = x;\n\n  var len1 = a1.sqr().add(b1.sqr());\n  var len2 = a2.sqr().add(b2.sqr());\n  if (len2.cmp(len1) >= 0) {\n    a2 = a0;\n    b2 = b0;\n  }\n\n  // Normalize signs\n  if (a1.negative) {\n    a1 = a1.neg();\n    b1 = b1.neg();\n  }\n  if (a2.negative) {\n    a2 = a2.neg();\n    b2 = b2.neg();\n  }\n\n  return [\n    { a: a1, b: b1 },\n    { a: a2, b: b2 }\n  ];\n};\n\nShortCurve.prototype._endoSplit = function _endoSplit(k) {\n  var basis = this.endo.basis;\n  var v1 = basis[0];\n  var v2 = basis[1];\n\n  var c1 = v2.b.mul(k).divRound(this.n);\n  var c2 = v1.b.neg().mul(k).divRound(this.n);\n\n  var p1 = c1.mul(v1.a);\n  var p2 = c2.mul(v2.a);\n  var q1 = c1.mul(v1.b);\n  var q2 = c2.mul(v2.b);\n\n  // Calculate answer\n  var k1 = k.sub(p1).sub(p2);\n  var k2 = q1.add(q2).neg();\n  return { k1: k1, k2: k2 };\n};\n\nShortCurve.prototype.pointFromX = function pointFromX(x, odd) {\n  x = new BN(x, 16);\n  if (!x.red)\n    x = x.toRed(this.red);\n\n  var y2 = x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);\n  var y = y2.redSqrt();\n  if (y.redSqr().redSub(y2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  // XXX Is there any way to tell if the number is odd without converting it\n  // to non-red form?\n  var isOdd = y.fromRed().isOdd();\n  if (odd && !isOdd || !odd && isOdd)\n    y = y.redNeg();\n\n  return this.point(x, y);\n};\n\nShortCurve.prototype.validate = function validate(point) {\n  if (point.inf)\n    return true;\n\n  var x = point.x;\n  var y = point.y;\n\n  var ax = this.a.redMul(x);\n  var rhs = x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);\n  return y.redSqr().redISub(rhs).cmpn(0) === 0;\n};\n\nShortCurve.prototype._endoWnafMulAdd =\n    function _endoWnafMulAdd(points, coeffs, jacobianResult) {\n  var npoints = this._endoWnafT1;\n  var ncoeffs = this._endoWnafT2;\n  for (var i = 0; i < points.length; i++) {\n    var split = this._endoSplit(coeffs[i]);\n    var p = points[i];\n    var beta = p._getBeta();\n\n    if (split.k1.negative) {\n      split.k1.ineg();\n      p = p.neg(true);\n    }\n    if (split.k2.negative) {\n      split.k2.ineg();\n      beta = beta.neg(true);\n    }\n\n    npoints[i * 2] = p;\n    npoints[i * 2 + 1] = beta;\n    ncoeffs[i * 2] = split.k1;\n    ncoeffs[i * 2 + 1] = split.k2;\n  }\n  var res = this._wnafMulAdd(1, npoints, ncoeffs, i * 2, jacobianResult);\n\n  // Clean-up references to points and coefficients\n  for (var j = 0; j < i * 2; j++) {\n    npoints[j] = null;\n    ncoeffs[j] = null;\n  }\n  return res;\n};\n\nfunction Point(curve, x, y, isRed) {\n  Base.BasePoint.call(this, curve, 'affine');\n  if (x === null && y === null) {\n    this.x = null;\n    this.y = null;\n    this.inf = true;\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    // Force redgomery representation when loading from JSON\n    if (isRed) {\n      this.x.forceRed(this.curve.red);\n      this.y.forceRed(this.curve.red);\n    }\n    if (!this.x.red)\n      this.x = this.x.toRed(this.curve.red);\n    if (!this.y.red)\n      this.y = this.y.toRed(this.curve.red);\n    this.inf = false;\n  }\n}\ninherits(Point, Base.BasePoint);\n\nShortCurve.prototype.point = function point(x, y, isRed) {\n  return new Point(this, x, y, isRed);\n};\n\nShortCurve.prototype.pointFromJSON = function pointFromJSON(obj, red) {\n  return Point.fromJSON(this, obj, red);\n};\n\nPoint.prototype._getBeta = function _getBeta() {\n  if (!this.curve.endo)\n    return;\n\n  var pre = this.precomputed;\n  if (pre && pre.beta)\n    return pre.beta;\n\n  var beta = this.curve.point(this.x.redMul(this.curve.endo.beta), this.y);\n  if (pre) {\n    var curve = this.curve;\n    var endoMul = function(p) {\n      return curve.point(p.x.redMul(curve.endo.beta), p.y);\n    };\n    pre.beta = beta;\n    beta.precomputed = {\n      beta: null,\n      naf: pre.naf && {\n        wnd: pre.naf.wnd,\n        points: pre.naf.points.map(endoMul)\n      },\n      doubles: pre.doubles && {\n        step: pre.doubles.step,\n        points: pre.doubles.points.map(endoMul)\n      }\n    };\n  }\n  return beta;\n};\n\nPoint.prototype.toJSON = function toJSON() {\n  if (!this.precomputed)\n    return [ this.x, this.y ];\n\n  return [ this.x, this.y, this.precomputed && {\n    doubles: this.precomputed.doubles && {\n      step: this.precomputed.doubles.step,\n      points: this.precomputed.doubles.points.slice(1)\n    },\n    naf: this.precomputed.naf && {\n      wnd: this.precomputed.naf.wnd,\n      points: this.precomputed.naf.points.slice(1)\n    }\n  } ];\n};\n\nPoint.fromJSON = function fromJSON(curve, obj, red) {\n  if (typeof obj === 'string')\n    obj = JSON.parse(obj);\n  var res = curve.point(obj[0], obj[1], red);\n  if (!obj[2])\n    return res;\n\n  function obj2point(obj) {\n    return curve.point(obj[0], obj[1], red);\n  }\n\n  var pre = obj[2];\n  res.precomputed = {\n    beta: null,\n    doubles: pre.doubles && {\n      step: pre.doubles.step,\n      points: [ res ].concat(pre.doubles.points.map(obj2point))\n    },\n    naf: pre.naf && {\n      wnd: pre.naf.wnd,\n      points: [ res ].concat(pre.naf.points.map(obj2point))\n    }\n  };\n  return res;\n};\n\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) +\n      ' y: ' + this.y.fromRed().toString(16, 2) + '>';\n};\n\nPoint.prototype.isInfinity = function isInfinity() {\n  return this.inf;\n};\n\nPoint.prototype.add = function add(p) {\n  // O + P = P\n  if (this.inf)\n    return p;\n\n  // P + O = P\n  if (p.inf)\n    return this;\n\n  // P + P = 2P\n  if (this.eq(p))\n    return this.dbl();\n\n  // P + (-P) = O\n  if (this.neg().eq(p))\n    return this.curve.point(null, null);\n\n  // P + Q = O\n  if (this.x.cmp(p.x) === 0)\n    return this.curve.point(null, null);\n\n  var c = this.y.redSub(p.y);\n  if (c.cmpn(0) !== 0)\n    c = c.redMul(this.x.redSub(p.x).redInvm());\n  var nx = c.redSqr().redISub(this.x).redISub(p.x);\n  var ny = c.redMul(this.x.redSub(nx)).redISub(this.y);\n  return this.curve.point(nx, ny);\n};\n\nPoint.prototype.dbl = function dbl() {\n  if (this.inf)\n    return this;\n\n  // 2P = O\n  var ys1 = this.y.redAdd(this.y);\n  if (ys1.cmpn(0) === 0)\n    return this.curve.point(null, null);\n\n  var a = this.curve.a;\n\n  var x2 = this.x.redSqr();\n  var dyinv = ys1.redInvm();\n  var c = x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);\n\n  var nx = c.redSqr().redISub(this.x.redAdd(this.x));\n  var ny = c.redMul(this.x.redSub(nx)).redISub(this.y);\n  return this.curve.point(nx, ny);\n};\n\nPoint.prototype.getX = function getX() {\n  return this.x.fromRed();\n};\n\nPoint.prototype.getY = function getY() {\n  return this.y.fromRed();\n};\n\nPoint.prototype.mul = function mul(k) {\n  k = new BN(k, 16);\n  if (this.isInfinity())\n    return this;\n  else if (this._hasDoubles(k))\n    return this.curve._fixedNafMul(this, k);\n  else if (this.curve.endo)\n    return this.curve._endoWnafMulAdd([ this ], [ k ]);\n  else\n    return this.curve._wnafMul(this, k);\n};\n\nPoint.prototype.mulAdd = function mulAdd(k1, p2, k2) {\n  var points = [ this, p2 ];\n  var coeffs = [ k1, k2 ];\n  if (this.curve.endo)\n    return this.curve._endoWnafMulAdd(points, coeffs);\n  else\n    return this.curve._wnafMulAdd(1, points, coeffs, 2);\n};\n\nPoint.prototype.jmulAdd = function jmulAdd(k1, p2, k2) {\n  var points = [ this, p2 ];\n  var coeffs = [ k1, k2 ];\n  if (this.curve.endo)\n    return this.curve._endoWnafMulAdd(points, coeffs, true);\n  else\n    return this.curve._wnafMulAdd(1, points, coeffs, 2, true);\n};\n\nPoint.prototype.eq = function eq(p) {\n  return this === p ||\n         this.inf === p.inf &&\n             (this.inf || this.x.cmp(p.x) === 0 && this.y.cmp(p.y) === 0);\n};\n\nPoint.prototype.neg = function neg(_precompute) {\n  if (this.inf)\n    return this;\n\n  var res = this.curve.point(this.x, this.y.redNeg());\n  if (_precompute && this.precomputed) {\n    var pre = this.precomputed;\n    var negate = function(p) {\n      return p.neg();\n    };\n    res.precomputed = {\n      naf: pre.naf && {\n        wnd: pre.naf.wnd,\n        points: pre.naf.points.map(negate)\n      },\n      doubles: pre.doubles && {\n        step: pre.doubles.step,\n        points: pre.doubles.points.map(negate)\n      }\n    };\n  }\n  return res;\n};\n\nPoint.prototype.toJ = function toJ() {\n  if (this.inf)\n    return this.curve.jpoint(null, null, null);\n\n  var res = this.curve.jpoint(this.x, this.y, this.curve.one);\n  return res;\n};\n\nfunction JPoint(curve, x, y, z) {\n  Base.BasePoint.call(this, curve, 'jacobian');\n  if (x === null && y === null && z === null) {\n    this.x = this.curve.one;\n    this.y = this.curve.one;\n    this.z = new BN(0);\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    this.z = new BN(z, 16);\n  }\n  if (!this.x.red)\n    this.x = this.x.toRed(this.curve.red);\n  if (!this.y.red)\n    this.y = this.y.toRed(this.curve.red);\n  if (!this.z.red)\n    this.z = this.z.toRed(this.curve.red);\n\n  this.zOne = this.z === this.curve.one;\n}\ninherits(JPoint, Base.BasePoint);\n\nShortCurve.prototype.jpoint = function jpoint(x, y, z) {\n  return new JPoint(this, x, y, z);\n};\n\nJPoint.prototype.toP = function toP() {\n  if (this.isInfinity())\n    return this.curve.point(null, null);\n\n  var zinv = this.z.redInvm();\n  var zinv2 = zinv.redSqr();\n  var ax = this.x.redMul(zinv2);\n  var ay = this.y.redMul(zinv2).redMul(zinv);\n\n  return this.curve.point(ax, ay);\n};\n\nJPoint.prototype.neg = function neg() {\n  return this.curve.jpoint(this.x, this.y.redNeg(), this.z);\n};\n\nJPoint.prototype.add = function add(p) {\n  // O + P = P\n  if (this.isInfinity())\n    return p;\n\n  // P + O = P\n  if (p.isInfinity())\n    return this;\n\n  // 12M + 4S + 7A\n  var pz2 = p.z.redSqr();\n  var z2 = this.z.redSqr();\n  var u1 = this.x.redMul(pz2);\n  var u2 = p.x.redMul(z2);\n  var s1 = this.y.redMul(pz2.redMul(p.z));\n  var s2 = p.y.redMul(z2.redMul(this.z));\n\n  var h = u1.redSub(u2);\n  var r = s1.redSub(s2);\n  if (h.cmpn(0) === 0) {\n    if (r.cmpn(0) !== 0)\n      return this.curve.jpoint(null, null, null);\n    else\n      return this.dbl();\n  }\n\n  var h2 = h.redSqr();\n  var h3 = h2.redMul(h);\n  var v = u1.redMul(h2);\n\n  var nx = r.redSqr().redIAdd(h3).redISub(v).redISub(v);\n  var ny = r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));\n  var nz = this.z.redMul(p.z).redMul(h);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.mixedAdd = function mixedAdd(p) {\n  // O + P = P\n  if (this.isInfinity())\n    return p.toJ();\n\n  // P + O = P\n  if (p.isInfinity())\n    return this;\n\n  // 8M + 3S + 7A\n  var z2 = this.z.redSqr();\n  var u1 = this.x;\n  var u2 = p.x.redMul(z2);\n  var s1 = this.y;\n  var s2 = p.y.redMul(z2).redMul(this.z);\n\n  var h = u1.redSub(u2);\n  var r = s1.redSub(s2);\n  if (h.cmpn(0) === 0) {\n    if (r.cmpn(0) !== 0)\n      return this.curve.jpoint(null, null, null);\n    else\n      return this.dbl();\n  }\n\n  var h2 = h.redSqr();\n  var h3 = h2.redMul(h);\n  var v = u1.redMul(h2);\n\n  var nx = r.redSqr().redIAdd(h3).redISub(v).redISub(v);\n  var ny = r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));\n  var nz = this.z.redMul(h);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.dblp = function dblp(pow) {\n  if (pow === 0)\n    return this;\n  if (this.isInfinity())\n    return this;\n  if (!pow)\n    return this.dbl();\n\n  if (this.curve.zeroA || this.curve.threeA) {\n    var r = this;\n    for (var i = 0; i < pow; i++)\n      r = r.dbl();\n    return r;\n  }\n\n  // 1M + 2S + 1A + N * (4S + 5M + 8A)\n  // N = 1 => 6M + 6S + 9A\n  var a = this.curve.a;\n  var tinv = this.curve.tinv;\n\n  var jx = this.x;\n  var jy = this.y;\n  var jz = this.z;\n  var jz4 = jz.redSqr().redSqr();\n\n  // Reuse results\n  var jyd = jy.redAdd(jy);\n  for (var i = 0; i < pow; i++) {\n    var jx2 = jx.redSqr();\n    var jyd2 = jyd.redSqr();\n    var jyd4 = jyd2.redSqr();\n    var c = jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));\n\n    var t1 = jx.redMul(jyd2);\n    var nx = c.redSqr().redISub(t1.redAdd(t1));\n    var t2 = t1.redISub(nx);\n    var dny = c.redMul(t2);\n    dny = dny.redIAdd(dny).redISub(jyd4);\n    var nz = jyd.redMul(jz);\n    if (i + 1 < pow)\n      jz4 = jz4.redMul(jyd4);\n\n    jx = nx;\n    jz = nz;\n    jyd = dny;\n  }\n\n  return this.curve.jpoint(jx, jyd.redMul(tinv), jz);\n};\n\nJPoint.prototype.dbl = function dbl() {\n  if (this.isInfinity())\n    return this;\n\n  if (this.curve.zeroA)\n    return this._zeroDbl();\n  else if (this.curve.threeA)\n    return this._threeDbl();\n  else\n    return this._dbl();\n};\n\nJPoint.prototype._zeroDbl = function _zeroDbl() {\n  var nx;\n  var ny;\n  var nz;\n  // Z = 1\n  if (this.zOne) {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html\n    //     #doubling-mdbl-2007-bl\n    // 1M + 5S + 14A\n\n    // XX = X1^2\n    var xx = this.x.redSqr();\n    // YY = Y1^2\n    var yy = this.y.redSqr();\n    // YYYY = YY^2\n    var yyyy = yy.redSqr();\n    // S = 2 * ((X1 + YY)^2 - XX - YYYY)\n    var s = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n    s = s.redIAdd(s);\n    // M = 3 * XX + a; a = 0\n    var m = xx.redAdd(xx).redIAdd(xx);\n    // T = M ^ 2 - 2*S\n    var t = m.redSqr().redISub(s).redISub(s);\n\n    // 8 * YYYY\n    var yyyy8 = yyyy.redIAdd(yyyy);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n\n    // X3 = T\n    nx = t;\n    // Y3 = M * (S - T) - 8 * YYYY\n    ny = m.redMul(s.redISub(t)).redISub(yyyy8);\n    // Z3 = 2*Y1\n    nz = this.y.redAdd(this.y);\n  } else {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html\n    //     #doubling-dbl-2009-l\n    // 2M + 5S + 13A\n\n    // A = X1^2\n    var a = this.x.redSqr();\n    // B = Y1^2\n    var b = this.y.redSqr();\n    // C = B^2\n    var c = b.redSqr();\n    // D = 2 * ((X1 + B)^2 - A - C)\n    var d = this.x.redAdd(b).redSqr().redISub(a).redISub(c);\n    d = d.redIAdd(d);\n    // E = 3 * A\n    var e = a.redAdd(a).redIAdd(a);\n    // F = E^2\n    var f = e.redSqr();\n\n    // 8 * C\n    var c8 = c.redIAdd(c);\n    c8 = c8.redIAdd(c8);\n    c8 = c8.redIAdd(c8);\n\n    // X3 = F - 2 * D\n    nx = f.redISub(d).redISub(d);\n    // Y3 = E * (D - X3) - 8 * C\n    ny = e.redMul(d.redISub(nx)).redISub(c8);\n    // Z3 = 2 * Y1 * Z1\n    nz = this.y.redMul(this.z);\n    nz = nz.redIAdd(nz);\n  }\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype._threeDbl = function _threeDbl() {\n  var nx;\n  var ny;\n  var nz;\n  // Z = 1\n  if (this.zOne) {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-3.html\n    //     #doubling-mdbl-2007-bl\n    // 1M + 5S + 15A\n\n    // XX = X1^2\n    var xx = this.x.redSqr();\n    // YY = Y1^2\n    var yy = this.y.redSqr();\n    // YYYY = YY^2\n    var yyyy = yy.redSqr();\n    // S = 2 * ((X1 + YY)^2 - XX - YYYY)\n    var s = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n    s = s.redIAdd(s);\n    // M = 3 * XX + a\n    var m = xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);\n    // T = M^2 - 2 * S\n    var t = m.redSqr().redISub(s).redISub(s);\n    // X3 = T\n    nx = t;\n    // Y3 = M * (S - T) - 8 * YYYY\n    var yyyy8 = yyyy.redIAdd(yyyy);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    ny = m.redMul(s.redISub(t)).redISub(yyyy8);\n    // Z3 = 2 * Y1\n    nz = this.y.redAdd(this.y);\n  } else {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-3.html#doubling-dbl-2001-b\n    // 3M + 5S\n\n    // delta = Z1^2\n    var delta = this.z.redSqr();\n    // gamma = Y1^2\n    var gamma = this.y.redSqr();\n    // beta = X1 * gamma\n    var beta = this.x.redMul(gamma);\n    // alpha = 3 * (X1 - delta) * (X1 + delta)\n    var alpha = this.x.redSub(delta).redMul(this.x.redAdd(delta));\n    alpha = alpha.redAdd(alpha).redIAdd(alpha);\n    // X3 = alpha^2 - 8 * beta\n    var beta4 = beta.redIAdd(beta);\n    beta4 = beta4.redIAdd(beta4);\n    var beta8 = beta4.redAdd(beta4);\n    nx = alpha.redSqr().redISub(beta8);\n    // Z3 = (Y1 + Z1)^2 - gamma - delta\n    nz = this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);\n    // Y3 = alpha * (4 * beta - X3) - 8 * gamma^2\n    var ggamma8 = gamma.redSqr();\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ny = alpha.redMul(beta4.redISub(nx)).redISub(ggamma8);\n  }\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype._dbl = function _dbl() {\n  var a = this.curve.a;\n\n  // 4M + 6S + 10A\n  var jx = this.x;\n  var jy = this.y;\n  var jz = this.z;\n  var jz4 = jz.redSqr().redSqr();\n\n  var jx2 = jx.redSqr();\n  var jy2 = jy.redSqr();\n\n  var c = jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));\n\n  var jxd4 = jx.redAdd(jx);\n  jxd4 = jxd4.redIAdd(jxd4);\n  var t1 = jxd4.redMul(jy2);\n  var nx = c.redSqr().redISub(t1.redAdd(t1));\n  var t2 = t1.redISub(nx);\n\n  var jyd8 = jy2.redSqr();\n  jyd8 = jyd8.redIAdd(jyd8);\n  jyd8 = jyd8.redIAdd(jyd8);\n  jyd8 = jyd8.redIAdd(jyd8);\n  var ny = c.redMul(t2).redISub(jyd8);\n  var nz = jy.redAdd(jy).redMul(jz);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.trpl = function trpl() {\n  if (!this.curve.zeroA)\n    return this.dbl().add(this);\n\n  // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html#tripling-tpl-2007-bl\n  // 5M + 10S + ...\n\n  // XX = X1^2\n  var xx = this.x.redSqr();\n  // YY = Y1^2\n  var yy = this.y.redSqr();\n  // ZZ = Z1^2\n  var zz = this.z.redSqr();\n  // YYYY = YY^2\n  var yyyy = yy.redSqr();\n  // M = 3 * XX + a * ZZ2; a = 0\n  var m = xx.redAdd(xx).redIAdd(xx);\n  // MM = M^2\n  var mm = m.redSqr();\n  // E = 6 * ((X1 + YY)^2 - XX - YYYY) - MM\n  var e = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n  e = e.redIAdd(e);\n  e = e.redAdd(e).redIAdd(e);\n  e = e.redISub(mm);\n  // EE = E^2\n  var ee = e.redSqr();\n  // T = 16*YYYY\n  var t = yyyy.redIAdd(yyyy);\n  t = t.redIAdd(t);\n  t = t.redIAdd(t);\n  t = t.redIAdd(t);\n  // U = (M + E)^2 - MM - EE - T\n  var u = m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);\n  // X3 = 4 * (X1 * EE - 4 * YY * U)\n  var yyu4 = yy.redMul(u);\n  yyu4 = yyu4.redIAdd(yyu4);\n  yyu4 = yyu4.redIAdd(yyu4);\n  var nx = this.x.redMul(ee).redISub(yyu4);\n  nx = nx.redIAdd(nx);\n  nx = nx.redIAdd(nx);\n  // Y3 = 8 * Y1 * (U * (T - U) - E * EE)\n  var ny = this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));\n  ny = ny.redIAdd(ny);\n  ny = ny.redIAdd(ny);\n  ny = ny.redIAdd(ny);\n  // Z3 = (Z1 + E)^2 - ZZ - EE\n  var nz = this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.mul = function mul(k, kbase) {\n  k = new BN(k, kbase);\n\n  return this.curve._wnafMul(this, k);\n};\n\nJPoint.prototype.eq = function eq(p) {\n  if (p.type === 'affine')\n    return this.eq(p.toJ());\n\n  if (this === p)\n    return true;\n\n  // x1 * z2^2 == x2 * z1^2\n  var z2 = this.z.redSqr();\n  var pz2 = p.z.redSqr();\n  if (this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0) !== 0)\n    return false;\n\n  // y1 * z2^3 == y2 * z1^3\n  var z3 = z2.redMul(this.z);\n  var pz3 = pz2.redMul(p.z);\n  return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0) === 0;\n};\n\nJPoint.prototype.eqXToP = function eqXToP(x) {\n  var zs = this.z.redSqr();\n  var rx = x.toRed(this.curve.red).redMul(zs);\n  if (this.x.cmp(rx) === 0)\n    return true;\n\n  var xc = x.clone();\n  var t = this.curve.redN.redMul(zs);\n  for (;;) {\n    xc.iadd(this.curve.n);\n    if (xc.cmp(this.curve.p) >= 0)\n      return false;\n\n    rx.redIAdd(t);\n    if (this.x.cmp(rx) === 0)\n      return true;\n  }\n};\n\nJPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC JPoint Infinity>';\n  return '<EC JPoint x: ' + this.x.toString(16, 2) +\n      ' y: ' + this.y.toString(16, 2) +\n      ' z: ' + this.z.toString(16, 2) + '>';\n};\n\nJPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.z.cmpn(0) === 0;\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic/curve/short.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic/curves.js":
/*!******************************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic/curves.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar curves = exports;\n\nvar hash = __webpack_require__(/*! hash.js */ \"./node_modules/hash.js/lib/hash.js\");\nvar curve = __webpack_require__(/*! ./curve */ \"./node_modules/elliptic/lib/elliptic/curve/index.js\");\nvar utils = __webpack_require__(/*! ./utils */ \"./node_modules/elliptic/lib/elliptic/utils.js\");\n\nvar assert = utils.assert;\n\nfunction PresetCurve(options) {\n  if (options.type === 'short')\n    this.curve = new curve.short(options);\n  else if (options.type === 'edwards')\n    this.curve = new curve.edwards(options);\n  else\n    this.curve = new curve.mont(options);\n  this.g = this.curve.g;\n  this.n = this.curve.n;\n  this.hash = options.hash;\n\n  assert(this.g.validate(), 'Invalid curve');\n  assert(this.g.mul(this.n).isInfinity(), 'Invalid curve, G*N != O');\n}\ncurves.PresetCurve = PresetCurve;\n\nfunction defineCurve(name, options) {\n  Object.defineProperty(curves, name, {\n    configurable: true,\n    enumerable: true,\n    get: function() {\n      var curve = new PresetCurve(options);\n      Object.defineProperty(curves, name, {\n        configurable: true,\n        enumerable: true,\n        value: curve\n      });\n      return curve;\n    }\n  });\n}\n\ndefineCurve('p192', {\n  type: 'short',\n  prime: 'p192',\n  p: 'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff',\n  a: 'ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc',\n  b: '64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1',\n  n: 'ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012',\n    '07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811'\n  ]\n});\n\ndefineCurve('p224', {\n  type: 'short',\n  prime: 'p224',\n  p: 'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001',\n  a: 'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe',\n  b: 'b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4',\n  n: 'ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    'b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21',\n    'bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34'\n  ]\n});\n\ndefineCurve('p256', {\n  type: 'short',\n  prime: null,\n  p: 'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff',\n  a: 'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc',\n  b: '5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b',\n  n: 'ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296',\n    '4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5'\n  ]\n});\n\ndefineCurve('p384', {\n  type: 'short',\n  prime: null,\n  p: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'fffffffe ffffffff 00000000 00000000 ffffffff',\n  a: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'fffffffe ffffffff 00000000 00000000 fffffffc',\n  b: 'b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f ' +\n     '5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef',\n  n: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 ' +\n     'f4372ddf 581a0db2 48b0a77a ecec196a ccc52973',\n  hash: hash.sha384,\n  gRed: false,\n  g: [\n    'aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 ' +\n    '5502f25d bf55296c 3a545e38 72760ab7',\n    '3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 ' +\n    '0a60b1ce 1d7e819d 7a431d7c 90ea0e5f'\n  ]\n});\n\ndefineCurve('p521', {\n  type: 'short',\n  prime: null,\n  p: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff',\n  a: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff fffffffc',\n  b: '00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b ' +\n     '99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd ' +\n     '3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00',\n  n: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 ' +\n     'f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409',\n  hash: hash.sha512,\n  gRed: false,\n  g: [\n    '000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 ' +\n    '053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 ' +\n    'a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66',\n    '00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 ' +\n    '579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 ' +\n    '3fad0761 353c7086 a272c240 88be9476 9fd16650'\n  ]\n});\n\ndefineCurve('curve25519', {\n  type: 'mont',\n  prime: 'p25519',\n  p: '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',\n  a: '76d06',\n  b: '1',\n  n: '1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '9'\n  ]\n});\n\ndefineCurve('ed25519', {\n  type: 'edwards',\n  prime: 'p25519',\n  p: '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',\n  a: '-1',\n  c: '1',\n  // -121665 * (121666^(-1)) (mod P)\n  d: '52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3',\n  n: '1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a',\n\n    // 4/5\n    '6666666666666666666666666666666666666666666666666666666666666658'\n  ]\n});\n\nvar pre;\ntry {\n  pre = __webpack_require__(/*! ./precomputed/secp256k1 */ \"./node_modules/elliptic/lib/elliptic/precomputed/secp256k1.js\");\n} catch (e) {\n  pre = undefined;\n}\n\ndefineCurve('secp256k1', {\n  type: 'short',\n  prime: 'k256',\n  p: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f',\n  a: '0',\n  b: '7',\n  n: 'ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141',\n  h: '1',\n  hash: hash.sha256,\n\n  // Precomputed endomorphism\n  beta: '7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee',\n  lambda: '5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72',\n  basis: [\n    {\n      a: '3086d221a7d46bcde86c90e49284eb15',\n      b: '-e4437ed6010e88286f547fa90abfe4c3'\n    },\n    {\n      a: '114ca50f7a8e2f3f657c1108d9d44cfd8',\n      b: '3086d221a7d46bcde86c90e49284eb15'\n    }\n  ],\n\n  gRed: false,\n  g: [\n    '79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798',\n    '483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8',\n    pre\n  ]\n});\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic/curves.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic/ec/index.js":
/*!********************************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic/ec/index.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/elliptic/node_modules/bn.js/lib/bn.js\");\nvar HmacDRBG = __webpack_require__(/*! hmac-drbg */ \"./node_modules/hmac-drbg/lib/hmac-drbg.js\");\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/elliptic/lib/elliptic/utils.js\");\nvar curves = __webpack_require__(/*! ../curves */ \"./node_modules/elliptic/lib/elliptic/curves.js\");\nvar rand = __webpack_require__(/*! brorand */ \"./node_modules/brorand/index.js\");\nvar assert = utils.assert;\n\nvar KeyPair = __webpack_require__(/*! ./key */ \"./node_modules/elliptic/lib/elliptic/ec/key.js\");\nvar Signature = __webpack_require__(/*! ./signature */ \"./node_modules/elliptic/lib/elliptic/ec/signature.js\");\n\nfunction EC(options) {\n  if (!(this instanceof EC))\n    return new EC(options);\n\n  // Shortcut `elliptic.ec(curve-name)`\n  if (typeof options === 'string') {\n    assert(curves.hasOwnProperty(options), 'Unknown curve ' + options);\n\n    options = curves[options];\n  }\n\n  // Shortcut for `elliptic.ec(elliptic.curves.curveName)`\n  if (options instanceof curves.PresetCurve)\n    options = { curve: options };\n\n  this.curve = options.curve.curve;\n  this.n = this.curve.n;\n  this.nh = this.n.ushrn(1);\n  this.g = this.curve.g;\n\n  // Point on curve\n  this.g = options.curve.g;\n  this.g.precompute(options.curve.n.bitLength() + 1);\n\n  // Hash for function for DRBG\n  this.hash = options.hash || options.curve.hash;\n}\nmodule.exports = EC;\n\nEC.prototype.keyPair = function keyPair(options) {\n  return new KeyPair(this, options);\n};\n\nEC.prototype.keyFromPrivate = function keyFromPrivate(priv, enc) {\n  return KeyPair.fromPrivate(this, priv, enc);\n};\n\nEC.prototype.keyFromPublic = function keyFromPublic(pub, enc) {\n  return KeyPair.fromPublic(this, pub, enc);\n};\n\nEC.prototype.genKeyPair = function genKeyPair(options) {\n  if (!options)\n    options = {};\n\n  // Instantiate Hmac_DRBG\n  var drbg = new HmacDRBG({\n    hash: this.hash,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8',\n    entropy: options.entropy || rand(this.hash.hmacStrength),\n    entropyEnc: options.entropy && options.entropyEnc || 'utf8',\n    nonce: this.n.toArray()\n  });\n\n  var bytes = this.n.byteLength();\n  var ns2 = this.n.sub(new BN(2));\n  do {\n    var priv = new BN(drbg.generate(bytes));\n    if (priv.cmp(ns2) > 0)\n      continue;\n\n    priv.iaddn(1);\n    return this.keyFromPrivate(priv);\n  } while (true);\n};\n\nEC.prototype._truncateToN = function truncateToN(msg, truncOnly) {\n  var delta = msg.byteLength() * 8 - this.n.bitLength();\n  if (delta > 0)\n    msg = msg.ushrn(delta);\n  if (!truncOnly && msg.cmp(this.n) >= 0)\n    return msg.sub(this.n);\n  else\n    return msg;\n};\n\nEC.prototype.sign = function sign(msg, key, enc, options) {\n  if (typeof enc === 'object') {\n    options = enc;\n    enc = null;\n  }\n  if (!options)\n    options = {};\n\n  key = this.keyFromPrivate(key, enc);\n  msg = this._truncateToN(new BN(msg, 16));\n\n  // Zero-extend key to provide enough entropy\n  var bytes = this.n.byteLength();\n  var bkey = key.getPrivate().toArray('be', bytes);\n\n  // Zero-extend nonce to have the same byte size as N\n  var nonce = msg.toArray('be', bytes);\n\n  // Instantiate Hmac_DRBG\n  var drbg = new HmacDRBG({\n    hash: this.hash,\n    entropy: bkey,\n    nonce: nonce,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8'\n  });\n\n  // Number of bytes to generate\n  var ns1 = this.n.sub(new BN(1));\n\n  for (var iter = 0; true; iter++) {\n    var k = options.k ?\n        options.k(iter) :\n        new BN(drbg.generate(this.n.byteLength()));\n    k = this._truncateToN(k, true);\n    if (k.cmpn(1) <= 0 || k.cmp(ns1) >= 0)\n      continue;\n\n    var kp = this.g.mul(k);\n    if (kp.isInfinity())\n      continue;\n\n    var kpX = kp.getX();\n    var r = kpX.umod(this.n);\n    if (r.cmpn(0) === 0)\n      continue;\n\n    var s = k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));\n    s = s.umod(this.n);\n    if (s.cmpn(0) === 0)\n      continue;\n\n    var recoveryParam = (kp.getY().isOdd() ? 1 : 0) |\n                        (kpX.cmp(r) !== 0 ? 2 : 0);\n\n    // Use complement of `s`, if it is > `n / 2`\n    if (options.canonical && s.cmp(this.nh) > 0) {\n      s = this.n.sub(s);\n      recoveryParam ^= 1;\n    }\n\n    return new Signature({ r: r, s: s, recoveryParam: recoveryParam });\n  }\n};\n\nEC.prototype.verify = function verify(msg, signature, key, enc) {\n  msg = this._truncateToN(new BN(msg, 16));\n  key = this.keyFromPublic(key, enc);\n  signature = new Signature(signature, 'hex');\n\n  // Perform primitive values validation\n  var r = signature.r;\n  var s = signature.s;\n  if (r.cmpn(1) < 0 || r.cmp(this.n) >= 0)\n    return false;\n  if (s.cmpn(1) < 0 || s.cmp(this.n) >= 0)\n    return false;\n\n  // Validate signature\n  var sinv = s.invm(this.n);\n  var u1 = sinv.mul(msg).umod(this.n);\n  var u2 = sinv.mul(r).umod(this.n);\n\n  if (!this.curve._maxwellTrick) {\n    var p = this.g.mulAdd(u1, key.getPublic(), u2);\n    if (p.isInfinity())\n      return false;\n\n    return p.getX().umod(this.n).cmp(r) === 0;\n  }\n\n  // NOTE: Greg Maxwell's trick, inspired by:\n  // https://git.io/vad3K\n\n  var p = this.g.jmulAdd(u1, key.getPublic(), u2);\n  if (p.isInfinity())\n    return false;\n\n  // Compare `p.x` of Jacobian point with `r`,\n  // this will do `p.x == r * p.z^2` instead of multiplying `p.x` by the\n  // inverse of `p.z^2`\n  return p.eqXToP(r);\n};\n\nEC.prototype.recoverPubKey = function(msg, signature, j, enc) {\n  assert((3 & j) === j, 'The recovery param is more than two bits');\n  signature = new Signature(signature, enc);\n\n  var n = this.n;\n  var e = new BN(msg);\n  var r = signature.r;\n  var s = signature.s;\n\n  // A set LSB signifies that the y-coordinate is odd\n  var isYOdd = j & 1;\n  var isSecondKey = j >> 1;\n  if (r.cmp(this.curve.p.umod(this.curve.n)) >= 0 && isSecondKey)\n    throw new Error('Unable to find sencond key candinate');\n\n  // 1.1. Let x = r + jn.\n  if (isSecondKey)\n    r = this.curve.pointFromX(r.add(this.curve.n), isYOdd);\n  else\n    r = this.curve.pointFromX(r, isYOdd);\n\n  var rInv = signature.r.invm(n);\n  var s1 = n.sub(e).mul(rInv).umod(n);\n  var s2 = s.mul(rInv).umod(n);\n\n  // 1.6.1 Compute Q = r^-1 (sR -  eG)\n  //               Q = r^-1 (sR + -eG)\n  return this.g.mulAdd(s1, r, s2);\n};\n\nEC.prototype.getKeyRecoveryParam = function(e, signature, Q, enc) {\n  signature = new Signature(signature, enc);\n  if (signature.recoveryParam !== null)\n    return signature.recoveryParam;\n\n  for (var i = 0; i < 4; i++) {\n    var Qprime;\n    try {\n      Qprime = this.recoverPubKey(e, signature, i);\n    } catch (e) {\n      continue;\n    }\n\n    if (Qprime.eq(Q))\n      return i;\n  }\n  throw new Error('Unable to find valid recovery factor');\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic/ec/index.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic/ec/key.js":
/*!******************************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic/ec/key.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/elliptic/node_modules/bn.js/lib/bn.js\");\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/elliptic/lib/elliptic/utils.js\");\nvar assert = utils.assert;\n\nfunction KeyPair(ec, options) {\n  this.ec = ec;\n  this.priv = null;\n  this.pub = null;\n\n  // KeyPair(ec, { priv: ..., pub: ... })\n  if (options.priv)\n    this._importPrivate(options.priv, options.privEnc);\n  if (options.pub)\n    this._importPublic(options.pub, options.pubEnc);\n}\nmodule.exports = KeyPair;\n\nKeyPair.fromPublic = function fromPublic(ec, pub, enc) {\n  if (pub instanceof KeyPair)\n    return pub;\n\n  return new KeyPair(ec, {\n    pub: pub,\n    pubEnc: enc\n  });\n};\n\nKeyPair.fromPrivate = function fromPrivate(ec, priv, enc) {\n  if (priv instanceof KeyPair)\n    return priv;\n\n  return new KeyPair(ec, {\n    priv: priv,\n    privEnc: enc\n  });\n};\n\nKeyPair.prototype.validate = function validate() {\n  var pub = this.getPublic();\n\n  if (pub.isInfinity())\n    return { result: false, reason: 'Invalid public key' };\n  if (!pub.validate())\n    return { result: false, reason: 'Public key is not a point' };\n  if (!pub.mul(this.ec.curve.n).isInfinity())\n    return { result: false, reason: 'Public key * N != O' };\n\n  return { result: true, reason: null };\n};\n\nKeyPair.prototype.getPublic = function getPublic(compact, enc) {\n  // compact is optional argument\n  if (typeof compact === 'string') {\n    enc = compact;\n    compact = null;\n  }\n\n  if (!this.pub)\n    this.pub = this.ec.g.mul(this.priv);\n\n  if (!enc)\n    return this.pub;\n\n  return this.pub.encode(enc, compact);\n};\n\nKeyPair.prototype.getPrivate = function getPrivate(enc) {\n  if (enc === 'hex')\n    return this.priv.toString(16, 2);\n  else\n    return this.priv;\n};\n\nKeyPair.prototype._importPrivate = function _importPrivate(key, enc) {\n  this.priv = new BN(key, enc || 16);\n\n  // Ensure that the priv won't be bigger than n, otherwise we may fail\n  // in fixed multiplication method\n  this.priv = this.priv.umod(this.ec.curve.n);\n};\n\nKeyPair.prototype._importPublic = function _importPublic(key, enc) {\n  if (key.x || key.y) {\n    // Montgomery points only have an `x` coordinate.\n    // Weierstrass/Edwards points on the other hand have both `x` and\n    // `y` coordinates.\n    if (this.ec.curve.type === 'mont') {\n      assert(key.x, 'Need x coordinate');\n    } else if (this.ec.curve.type === 'short' ||\n               this.ec.curve.type === 'edwards') {\n      assert(key.x && key.y, 'Need both x and y coordinate');\n    }\n    this.pub = this.ec.curve.point(key.x, key.y);\n    return;\n  }\n  this.pub = this.ec.curve.decodePoint(key, enc);\n};\n\n// ECDH\nKeyPair.prototype.derive = function derive(pub) {\n  return pub.mul(this.priv).getX();\n};\n\n// ECDSA\nKeyPair.prototype.sign = function sign(msg, enc, options) {\n  return this.ec.sign(msg, this, enc, options);\n};\n\nKeyPair.prototype.verify = function verify(msg, signature) {\n  return this.ec.verify(msg, signature, this);\n};\n\nKeyPair.prototype.inspect = function inspect() {\n  return '<Key priv: ' + (this.priv && this.priv.toString(16, 2)) +\n         ' pub: ' + (this.pub && this.pub.inspect()) + ' >';\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic/ec/key.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic/ec/signature.js":
/*!************************************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic/ec/signature.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/elliptic/node_modules/bn.js/lib/bn.js\");\n\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/elliptic/lib/elliptic/utils.js\");\nvar assert = utils.assert;\n\nfunction Signature(options, enc) {\n  if (options instanceof Signature)\n    return options;\n\n  if (this._importDER(options, enc))\n    return;\n\n  assert(options.r && options.s, 'Signature without r or s');\n  this.r = new BN(options.r, 16);\n  this.s = new BN(options.s, 16);\n  if (options.recoveryParam === undefined)\n    this.recoveryParam = null;\n  else\n    this.recoveryParam = options.recoveryParam;\n}\nmodule.exports = Signature;\n\nfunction Position() {\n  this.place = 0;\n}\n\nfunction getLength(buf, p) {\n  var initial = buf[p.place++];\n  if (!(initial & 0x80)) {\n    return initial;\n  }\n  var octetLen = initial & 0xf;\n\n  // Indefinite length or overflow\n  if (octetLen === 0 || octetLen > 4) {\n    return false;\n  }\n\n  var val = 0;\n  for (var i = 0, off = p.place; i < octetLen; i++, off++) {\n    val <<= 8;\n    val |= buf[off];\n    val >>>= 0;\n  }\n\n  // Leading zeroes\n  if (val <= 0x7f) {\n    return false;\n  }\n\n  p.place = off;\n  return val;\n}\n\nfunction rmPadding(buf) {\n  var i = 0;\n  var len = buf.length - 1;\n  while (!buf[i] && !(buf[i + 1] & 0x80) && i < len) {\n    i++;\n  }\n  if (i === 0) {\n    return buf;\n  }\n  return buf.slice(i);\n}\n\nSignature.prototype._importDER = function _importDER(data, enc) {\n  data = utils.toArray(data, enc);\n  var p = new Position();\n  if (data[p.place++] !== 0x30) {\n    return false;\n  }\n  var len = getLength(data, p);\n  if (len === false) {\n    return false;\n  }\n  if ((len + p.place) !== data.length) {\n    return false;\n  }\n  if (data[p.place++] !== 0x02) {\n    return false;\n  }\n  var rlen = getLength(data, p);\n  if (rlen === false) {\n    return false;\n  }\n  var r = data.slice(p.place, rlen + p.place);\n  p.place += rlen;\n  if (data[p.place++] !== 0x02) {\n    return false;\n  }\n  var slen = getLength(data, p);\n  if (slen === false) {\n    return false;\n  }\n  if (data.length !== slen + p.place) {\n    return false;\n  }\n  var s = data.slice(p.place, slen + p.place);\n  if (r[0] === 0) {\n    if (r[1] & 0x80) {\n      r = r.slice(1);\n    } else {\n      // Leading zeroes\n      return false;\n    }\n  }\n  if (s[0] === 0) {\n    if (s[1] & 0x80) {\n      s = s.slice(1);\n    } else {\n      // Leading zeroes\n      return false;\n    }\n  }\n\n  this.r = new BN(r);\n  this.s = new BN(s);\n  this.recoveryParam = null;\n\n  return true;\n};\n\nfunction constructLength(arr, len) {\n  if (len < 0x80) {\n    arr.push(len);\n    return;\n  }\n  var octets = 1 + (Math.log(len) / Math.LN2 >>> 3);\n  arr.push(octets | 0x80);\n  while (--octets) {\n    arr.push((len >>> (octets << 3)) & 0xff);\n  }\n  arr.push(len);\n}\n\nSignature.prototype.toDER = function toDER(enc) {\n  var r = this.r.toArray();\n  var s = this.s.toArray();\n\n  // Pad values\n  if (r[0] & 0x80)\n    r = [ 0 ].concat(r);\n  // Pad values\n  if (s[0] & 0x80)\n    s = [ 0 ].concat(s);\n\n  r = rmPadding(r);\n  s = rmPadding(s);\n\n  while (!s[0] && !(s[1] & 0x80)) {\n    s = s.slice(1);\n  }\n  var arr = [ 0x02 ];\n  constructLength(arr, r.length);\n  arr = arr.concat(r);\n  arr.push(0x02);\n  constructLength(arr, s.length);\n  var backHalf = arr.concat(s);\n  var res = [ 0x30 ];\n  constructLength(res, backHalf.length);\n  res = res.concat(backHalf);\n  return utils.encode(res, enc);\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic/ec/signature.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic/eddsa/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic/eddsa/index.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar hash = __webpack_require__(/*! hash.js */ \"./node_modules/hash.js/lib/hash.js\");\nvar curves = __webpack_require__(/*! ../curves */ \"./node_modules/elliptic/lib/elliptic/curves.js\");\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/elliptic/lib/elliptic/utils.js\");\nvar assert = utils.assert;\nvar parseBytes = utils.parseBytes;\nvar KeyPair = __webpack_require__(/*! ./key */ \"./node_modules/elliptic/lib/elliptic/eddsa/key.js\");\nvar Signature = __webpack_require__(/*! ./signature */ \"./node_modules/elliptic/lib/elliptic/eddsa/signature.js\");\n\nfunction EDDSA(curve) {\n  assert(curve === 'ed25519', 'only tested with ed25519 so far');\n\n  if (!(this instanceof EDDSA))\n    return new EDDSA(curve);\n\n  var curve = curves[curve].curve;\n  this.curve = curve;\n  this.g = curve.g;\n  this.g.precompute(curve.n.bitLength() + 1);\n\n  this.pointClass = curve.point().constructor;\n  this.encodingLength = Math.ceil(curve.n.bitLength() / 8);\n  this.hash = hash.sha512;\n}\n\nmodule.exports = EDDSA;\n\n/**\n* @param {Array|String} message - message bytes\n* @param {Array|String|KeyPair} secret - secret bytes or a keypair\n* @returns {Signature} - signature\n*/\nEDDSA.prototype.sign = function sign(message, secret) {\n  message = parseBytes(message);\n  var key = this.keyFromSecret(secret);\n  var r = this.hashInt(key.messagePrefix(), message);\n  var R = this.g.mul(r);\n  var Rencoded = this.encodePoint(R);\n  var s_ = this.hashInt(Rencoded, key.pubBytes(), message)\n               .mul(key.priv());\n  var S = r.add(s_).umod(this.curve.n);\n  return this.makeSignature({ R: R, S: S, Rencoded: Rencoded });\n};\n\n/**\n* @param {Array} message - message bytes\n* @param {Array|String|Signature} sig - sig bytes\n* @param {Array|String|Point|KeyPair} pub - public key\n* @returns {Boolean} - true if public key matches sig of message\n*/\nEDDSA.prototype.verify = function verify(message, sig, pub) {\n  message = parseBytes(message);\n  sig = this.makeSignature(sig);\n  var key = this.keyFromPublic(pub);\n  var h = this.hashInt(sig.Rencoded(), key.pubBytes(), message);\n  var SG = this.g.mul(sig.S());\n  var RplusAh = sig.R().add(key.pub().mul(h));\n  return RplusAh.eq(SG);\n};\n\nEDDSA.prototype.hashInt = function hashInt() {\n  var hash = this.hash();\n  for (var i = 0; i < arguments.length; i++)\n    hash.update(arguments[i]);\n  return utils.intFromLE(hash.digest()).umod(this.curve.n);\n};\n\nEDDSA.prototype.keyFromPublic = function keyFromPublic(pub) {\n  return KeyPair.fromPublic(this, pub);\n};\n\nEDDSA.prototype.keyFromSecret = function keyFromSecret(secret) {\n  return KeyPair.fromSecret(this, secret);\n};\n\nEDDSA.prototype.makeSignature = function makeSignature(sig) {\n  if (sig instanceof Signature)\n    return sig;\n  return new Signature(this, sig);\n};\n\n/**\n* * https://tools.ietf.org/html/draft-josefsson-eddsa-ed25519-03#section-5.2\n*\n* EDDSA defines methods for encoding and decoding points and integers. These are\n* helper convenience methods, that pass along to utility functions implied\n* parameters.\n*\n*/\nEDDSA.prototype.encodePoint = function encodePoint(point) {\n  var enc = point.getY().toArray('le', this.encodingLength);\n  enc[this.encodingLength - 1] |= point.getX().isOdd() ? 0x80 : 0;\n  return enc;\n};\n\nEDDSA.prototype.decodePoint = function decodePoint(bytes) {\n  bytes = utils.parseBytes(bytes);\n\n  var lastIx = bytes.length - 1;\n  var normed = bytes.slice(0, lastIx).concat(bytes[lastIx] & ~0x80);\n  var xIsOdd = (bytes[lastIx] & 0x80) !== 0;\n\n  var y = utils.intFromLE(normed);\n  return this.curve.pointFromY(y, xIsOdd);\n};\n\nEDDSA.prototype.encodeInt = function encodeInt(num) {\n  return num.toArray('le', this.encodingLength);\n};\n\nEDDSA.prototype.decodeInt = function decodeInt(bytes) {\n  return utils.intFromLE(bytes);\n};\n\nEDDSA.prototype.isPoint = function isPoint(val) {\n  return val instanceof this.pointClass;\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic/eddsa/index.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic/eddsa/key.js":
/*!*********************************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic/eddsa/key.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/elliptic/lib/elliptic/utils.js\");\nvar assert = utils.assert;\nvar parseBytes = utils.parseBytes;\nvar cachedProperty = utils.cachedProperty;\n\n/**\n* @param {EDDSA} eddsa - instance\n* @param {Object} params - public/private key parameters\n*\n* @param {Array<Byte>} [params.secret] - secret seed bytes\n* @param {Point} [params.pub] - public key point (aka `A` in eddsa terms)\n* @param {Array<Byte>} [params.pub] - public key point encoded as bytes\n*\n*/\nfunction KeyPair(eddsa, params) {\n  this.eddsa = eddsa;\n  this._secret = parseBytes(params.secret);\n  if (eddsa.isPoint(params.pub))\n    this._pub = params.pub;\n  else\n    this._pubBytes = parseBytes(params.pub);\n}\n\nKeyPair.fromPublic = function fromPublic(eddsa, pub) {\n  if (pub instanceof KeyPair)\n    return pub;\n  return new KeyPair(eddsa, { pub: pub });\n};\n\nKeyPair.fromSecret = function fromSecret(eddsa, secret) {\n  if (secret instanceof KeyPair)\n    return secret;\n  return new KeyPair(eddsa, { secret: secret });\n};\n\nKeyPair.prototype.secret = function secret() {\n  return this._secret;\n};\n\ncachedProperty(KeyPair, 'pubBytes', function pubBytes() {\n  return this.eddsa.encodePoint(this.pub());\n});\n\ncachedProperty(KeyPair, 'pub', function pub() {\n  if (this._pubBytes)\n    return this.eddsa.decodePoint(this._pubBytes);\n  return this.eddsa.g.mul(this.priv());\n});\n\ncachedProperty(KeyPair, 'privBytes', function privBytes() {\n  var eddsa = this.eddsa;\n  var hash = this.hash();\n  var lastIx = eddsa.encodingLength - 1;\n\n  var a = hash.slice(0, eddsa.encodingLength);\n  a[0] &= 248;\n  a[lastIx] &= 127;\n  a[lastIx] |= 64;\n\n  return a;\n});\n\ncachedProperty(KeyPair, 'priv', function priv() {\n  return this.eddsa.decodeInt(this.privBytes());\n});\n\ncachedProperty(KeyPair, 'hash', function hash() {\n  return this.eddsa.hash().update(this.secret()).digest();\n});\n\ncachedProperty(KeyPair, 'messagePrefix', function messagePrefix() {\n  return this.hash().slice(this.eddsa.encodingLength);\n});\n\nKeyPair.prototype.sign = function sign(message) {\n  assert(this._secret, 'KeyPair can only verify');\n  return this.eddsa.sign(message, this);\n};\n\nKeyPair.prototype.verify = function verify(message, sig) {\n  return this.eddsa.verify(message, sig, this);\n};\n\nKeyPair.prototype.getSecret = function getSecret(enc) {\n  assert(this._secret, 'KeyPair is public only');\n  return utils.encode(this.secret(), enc);\n};\n\nKeyPair.prototype.getPublic = function getPublic(enc) {\n  return utils.encode(this.pubBytes(), enc);\n};\n\nmodule.exports = KeyPair;\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic/eddsa/key.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic/eddsa/signature.js":
/*!***************************************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic/eddsa/signature.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/elliptic/node_modules/bn.js/lib/bn.js\");\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/elliptic/lib/elliptic/utils.js\");\nvar assert = utils.assert;\nvar cachedProperty = utils.cachedProperty;\nvar parseBytes = utils.parseBytes;\n\n/**\n* @param {EDDSA} eddsa - eddsa instance\n* @param {Array<Bytes>|Object} sig -\n* @param {Array<Bytes>|Point} [sig.R] - R point as Point or bytes\n* @param {Array<Bytes>|bn} [sig.S] - S scalar as bn or bytes\n* @param {Array<Bytes>} [sig.Rencoded] - R point encoded\n* @param {Array<Bytes>} [sig.Sencoded] - S scalar encoded\n*/\nfunction Signature(eddsa, sig) {\n  this.eddsa = eddsa;\n\n  if (typeof sig !== 'object')\n    sig = parseBytes(sig);\n\n  if (Array.isArray(sig)) {\n    sig = {\n      R: sig.slice(0, eddsa.encodingLength),\n      S: sig.slice(eddsa.encodingLength)\n    };\n  }\n\n  assert(sig.R && sig.S, 'Signature without R or S');\n\n  if (eddsa.isPoint(sig.R))\n    this._R = sig.R;\n  if (sig.S instanceof BN)\n    this._S = sig.S;\n\n  this._Rencoded = Array.isArray(sig.R) ? sig.R : sig.Rencoded;\n  this._Sencoded = Array.isArray(sig.S) ? sig.S : sig.Sencoded;\n}\n\ncachedProperty(Signature, 'S', function S() {\n  return this.eddsa.decodeInt(this.Sencoded());\n});\n\ncachedProperty(Signature, 'R', function R() {\n  return this.eddsa.decodePoint(this.Rencoded());\n});\n\ncachedProperty(Signature, 'Rencoded', function Rencoded() {\n  return this.eddsa.encodePoint(this.R());\n});\n\ncachedProperty(Signature, 'Sencoded', function Sencoded() {\n  return this.eddsa.encodeInt(this.S());\n});\n\nSignature.prototype.toBytes = function toBytes() {\n  return this.Rencoded().concat(this.Sencoded());\n};\n\nSignature.prototype.toHex = function toHex() {\n  return utils.encode(this.toBytes(), 'hex').toUpperCase();\n};\n\nmodule.exports = Signature;\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic/eddsa/signature.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic/precomputed/secp256k1.js":
/*!*********************************************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic/precomputed/secp256k1.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = {\n  doubles: {\n    step: 4,\n    points: [\n      [\n        'e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a',\n        'f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821'\n      ],\n      [\n        '8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508',\n        '11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf'\n      ],\n      [\n        '175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739',\n        'd3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695'\n      ],\n      [\n        '363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640',\n        '4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9'\n      ],\n      [\n        '8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c',\n        '4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36'\n      ],\n      [\n        '723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda',\n        '96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f'\n      ],\n      [\n        'eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa',\n        '5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999'\n      ],\n      [\n        '100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0',\n        'cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09'\n      ],\n      [\n        'e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d',\n        '9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d'\n      ],\n      [\n        'feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d',\n        'e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088'\n      ],\n      [\n        'da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1',\n        '9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d'\n      ],\n      [\n        '53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0',\n        '5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8'\n      ],\n      [\n        '8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047',\n        '10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a'\n      ],\n      [\n        '385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862',\n        '283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453'\n      ],\n      [\n        '6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7',\n        '7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160'\n      ],\n      [\n        '3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd',\n        '56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0'\n      ],\n      [\n        '85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83',\n        '7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6'\n      ],\n      [\n        '948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a',\n        '53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589'\n      ],\n      [\n        '6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8',\n        'bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17'\n      ],\n      [\n        'e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d',\n        '4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda'\n      ],\n      [\n        'e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725',\n        '7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd'\n      ],\n      [\n        '213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754',\n        '4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2'\n      ],\n      [\n        '4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c',\n        '17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6'\n      ],\n      [\n        'fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6',\n        '6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f'\n      ],\n      [\n        '76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39',\n        'c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01'\n      ],\n      [\n        'c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891',\n        '893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3'\n      ],\n      [\n        'd895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b',\n        'febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f'\n      ],\n      [\n        'b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03',\n        '2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7'\n      ],\n      [\n        'e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d',\n        'eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78'\n      ],\n      [\n        'a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070',\n        '7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1'\n      ],\n      [\n        '90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4',\n        'e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150'\n      ],\n      [\n        '8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da',\n        '662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82'\n      ],\n      [\n        'e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11',\n        '1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc'\n      ],\n      [\n        '8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e',\n        'efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b'\n      ],\n      [\n        'e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41',\n        '2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51'\n      ],\n      [\n        'b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef',\n        '67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45'\n      ],\n      [\n        'd68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8',\n        'db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120'\n      ],\n      [\n        '324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d',\n        '648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84'\n      ],\n      [\n        '4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96',\n        '35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d'\n      ],\n      [\n        '9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd',\n        'ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d'\n      ],\n      [\n        '6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5',\n        '9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8'\n      ],\n      [\n        'a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266',\n        '40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8'\n      ],\n      [\n        '7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71',\n        '34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac'\n      ],\n      [\n        '928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac',\n        'c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f'\n      ],\n      [\n        '85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751',\n        '1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962'\n      ],\n      [\n        'ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e',\n        '493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907'\n      ],\n      [\n        '827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241',\n        'c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec'\n      ],\n      [\n        'eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3',\n        'be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d'\n      ],\n      [\n        'e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f',\n        '4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414'\n      ],\n      [\n        '1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19',\n        'aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd'\n      ],\n      [\n        '146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be',\n        'b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0'\n      ],\n      [\n        'fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9',\n        '6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811'\n      ],\n      [\n        'da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2',\n        '8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1'\n      ],\n      [\n        'a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13',\n        '7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c'\n      ],\n      [\n        '174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c',\n        'ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73'\n      ],\n      [\n        '959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba',\n        '2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd'\n      ],\n      [\n        'd2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151',\n        'e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405'\n      ],\n      [\n        '64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073',\n        'd99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589'\n      ],\n      [\n        '8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458',\n        '38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e'\n      ],\n      [\n        '13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b',\n        '69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27'\n      ],\n      [\n        'bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366',\n        'd3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1'\n      ],\n      [\n        '8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa',\n        '40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482'\n      ],\n      [\n        '8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0',\n        '620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945'\n      ],\n      [\n        'dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787',\n        '7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573'\n      ],\n      [\n        'f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e',\n        'ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82'\n      ]\n    ]\n  },\n  naf: {\n    wnd: 7,\n    points: [\n      [\n        'f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9',\n        '388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672'\n      ],\n      [\n        '2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4',\n        'd8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6'\n      ],\n      [\n        '5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc',\n        '6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da'\n      ],\n      [\n        'acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe',\n        'cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37'\n      ],\n      [\n        '774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb',\n        'd984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b'\n      ],\n      [\n        'f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8',\n        'ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81'\n      ],\n      [\n        'd7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e',\n        '581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58'\n      ],\n      [\n        'defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34',\n        '4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77'\n      ],\n      [\n        '2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c',\n        '85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a'\n      ],\n      [\n        '352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5',\n        '321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c'\n      ],\n      [\n        '2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f',\n        '2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67'\n      ],\n      [\n        '9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714',\n        '73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402'\n      ],\n      [\n        'daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729',\n        'a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55'\n      ],\n      [\n        'c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db',\n        '2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482'\n      ],\n      [\n        '6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4',\n        'e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82'\n      ],\n      [\n        '1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5',\n        'b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396'\n      ],\n      [\n        '605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479',\n        '2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49'\n      ],\n      [\n        '62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d',\n        '80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf'\n      ],\n      [\n        '80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f',\n        '1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a'\n      ],\n      [\n        '7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb',\n        'd0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7'\n      ],\n      [\n        'd528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9',\n        'eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933'\n      ],\n      [\n        '49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963',\n        '758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a'\n      ],\n      [\n        '77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74',\n        '958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6'\n      ],\n      [\n        'f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530',\n        'e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37'\n      ],\n      [\n        '463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b',\n        '5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e'\n      ],\n      [\n        'f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247',\n        'cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6'\n      ],\n      [\n        'caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1',\n        'cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476'\n      ],\n      [\n        '2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120',\n        '4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40'\n      ],\n      [\n        '7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435',\n        '91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61'\n      ],\n      [\n        '754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18',\n        '673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683'\n      ],\n      [\n        'e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8',\n        '59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5'\n      ],\n      [\n        '186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb',\n        '3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b'\n      ],\n      [\n        'df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f',\n        '55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417'\n      ],\n      [\n        '5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143',\n        'efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868'\n      ],\n      [\n        '290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba',\n        'e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a'\n      ],\n      [\n        'af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45',\n        'f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6'\n      ],\n      [\n        '766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a',\n        '744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996'\n      ],\n      [\n        '59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e',\n        'c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e'\n      ],\n      [\n        'f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8',\n        'e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d'\n      ],\n      [\n        '7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c',\n        '30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2'\n      ],\n      [\n        '948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519',\n        'e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e'\n      ],\n      [\n        '7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab',\n        '100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437'\n      ],\n      [\n        '3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca',\n        'ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311'\n      ],\n      [\n        'd3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf',\n        '8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4'\n      ],\n      [\n        '1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610',\n        '68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575'\n      ],\n      [\n        '733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4',\n        'f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d'\n      ],\n      [\n        '15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c',\n        'd56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d'\n      ],\n      [\n        'a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940',\n        'edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629'\n      ],\n      [\n        'e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980',\n        'a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06'\n      ],\n      [\n        '311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3',\n        '66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374'\n      ],\n      [\n        '34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf',\n        '9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee'\n      ],\n      [\n        'f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63',\n        '4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1'\n      ],\n      [\n        'd7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448',\n        'fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b'\n      ],\n      [\n        '32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf',\n        '5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661'\n      ],\n      [\n        '7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5',\n        '8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6'\n      ],\n      [\n        'ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6',\n        '8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e'\n      ],\n      [\n        '16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5',\n        '5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d'\n      ],\n      [\n        'eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99',\n        'f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc'\n      ],\n      [\n        '78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51',\n        'f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4'\n      ],\n      [\n        '494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5',\n        '42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c'\n      ],\n      [\n        'a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5',\n        '204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b'\n      ],\n      [\n        'c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997',\n        '4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913'\n      ],\n      [\n        '841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881',\n        '73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154'\n      ],\n      [\n        '5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5',\n        '39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865'\n      ],\n      [\n        '36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66',\n        'd2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc'\n      ],\n      [\n        '336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726',\n        'ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224'\n      ],\n      [\n        '8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede',\n        '6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e'\n      ],\n      [\n        '1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94',\n        '60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6'\n      ],\n      [\n        '85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31',\n        '3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511'\n      ],\n      [\n        '29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51',\n        'b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b'\n      ],\n      [\n        'a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252',\n        'ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2'\n      ],\n      [\n        '4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5',\n        'cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c'\n      ],\n      [\n        'd24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b',\n        '6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3'\n      ],\n      [\n        'ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4',\n        '322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d'\n      ],\n      [\n        'af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f',\n        '6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700'\n      ],\n      [\n        'e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889',\n        '2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4'\n      ],\n      [\n        '591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246',\n        'b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196'\n      ],\n      [\n        '11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984',\n        '998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4'\n      ],\n      [\n        '3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a',\n        'b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257'\n      ],\n      [\n        'cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030',\n        'bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13'\n      ],\n      [\n        'c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197',\n        '6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096'\n      ],\n      [\n        'c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593',\n        'c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38'\n      ],\n      [\n        'a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef',\n        '21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f'\n      ],\n      [\n        '347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38',\n        '60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448'\n      ],\n      [\n        'da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a',\n        '49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a'\n      ],\n      [\n        'c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111',\n        '5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4'\n      ],\n      [\n        '4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502',\n        '7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437'\n      ],\n      [\n        '3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea',\n        'be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7'\n      ],\n      [\n        'cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26',\n        '8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d'\n      ],\n      [\n        'b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986',\n        '39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a'\n      ],\n      [\n        'd4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e',\n        '62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54'\n      ],\n      [\n        '48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4',\n        '25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77'\n      ],\n      [\n        'dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda',\n        'ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517'\n      ],\n      [\n        '6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859',\n        'cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10'\n      ],\n      [\n        'e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f',\n        'f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125'\n      ],\n      [\n        'eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c',\n        '6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e'\n      ],\n      [\n        '13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942',\n        'fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1'\n      ],\n      [\n        'ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a',\n        '1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2'\n      ],\n      [\n        'b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80',\n        '5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423'\n      ],\n      [\n        'ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d',\n        '438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8'\n      ],\n      [\n        '8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1',\n        'cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758'\n      ],\n      [\n        '52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63',\n        'c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375'\n      ],\n      [\n        'e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352',\n        '6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d'\n      ],\n      [\n        '7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193',\n        'ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec'\n      ],\n      [\n        '5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00',\n        '9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0'\n      ],\n      [\n        '32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58',\n        'ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c'\n      ],\n      [\n        'e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7',\n        'd3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4'\n      ],\n      [\n        '8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8',\n        'c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f'\n      ],\n      [\n        '4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e',\n        '67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649'\n      ],\n      [\n        '3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d',\n        'cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826'\n      ],\n      [\n        '674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b',\n        '299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5'\n      ],\n      [\n        'd32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f',\n        'f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87'\n      ],\n      [\n        '30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6',\n        '462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b'\n      ],\n      [\n        'be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297',\n        '62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc'\n      ],\n      [\n        '93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a',\n        '7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c'\n      ],\n      [\n        'b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c',\n        'ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f'\n      ],\n      [\n        'd5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52',\n        '4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a'\n      ],\n      [\n        'd3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb',\n        'bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46'\n      ],\n      [\n        '463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065',\n        'bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f'\n      ],\n      [\n        '7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917',\n        '603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03'\n      ],\n      [\n        '74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9',\n        'cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08'\n      ],\n      [\n        '30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3',\n        '553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8'\n      ],\n      [\n        '9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57',\n        '712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373'\n      ],\n      [\n        '176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66',\n        'ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3'\n      ],\n      [\n        '75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8',\n        '9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8'\n      ],\n      [\n        '809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721',\n        '9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1'\n      ],\n      [\n        '1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180',\n        '4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9'\n      ]\n    ]\n  }\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic/precomputed/secp256k1.js?");

/***/ }),

/***/ "./node_modules/elliptic/lib/elliptic/utils.js":
/*!*****************************************************!*\
  !*** ./node_modules/elliptic/lib/elliptic/utils.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = exports;\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/elliptic/node_modules/bn.js/lib/bn.js\");\nvar minAssert = __webpack_require__(/*! minimalistic-assert */ \"./node_modules/minimalistic-assert/index.js\");\nvar minUtils = __webpack_require__(/*! minimalistic-crypto-utils */ \"./node_modules/minimalistic-crypto-utils/lib/utils.js\");\n\nutils.assert = minAssert;\nutils.toArray = minUtils.toArray;\nutils.zero2 = minUtils.zero2;\nutils.toHex = minUtils.toHex;\nutils.encode = minUtils.encode;\n\n// Represent num in a w-NAF form\nfunction getNAF(num, w, bits) {\n  var naf = new Array(Math.max(num.bitLength(), bits) + 1);\n  naf.fill(0);\n\n  var ws = 1 << (w + 1);\n  var k = num.clone();\n\n  for (var i = 0; i < naf.length; i++) {\n    var z;\n    var mod = k.andln(ws - 1);\n    if (k.isOdd()) {\n      if (mod > (ws >> 1) - 1)\n        z = (ws >> 1) - mod;\n      else\n        z = mod;\n      k.isubn(z);\n    } else {\n      z = 0;\n    }\n\n    naf[i] = z;\n    k.iushrn(1);\n  }\n\n  return naf;\n}\nutils.getNAF = getNAF;\n\n// Represent k1, k2 in a Joint Sparse Form\nfunction getJSF(k1, k2) {\n  var jsf = [\n    [],\n    []\n  ];\n\n  k1 = k1.clone();\n  k2 = k2.clone();\n  var d1 = 0;\n  var d2 = 0;\n  while (k1.cmpn(-d1) > 0 || k2.cmpn(-d2) > 0) {\n\n    // First phase\n    var m14 = (k1.andln(3) + d1) & 3;\n    var m24 = (k2.andln(3) + d2) & 3;\n    if (m14 === 3)\n      m14 = -1;\n    if (m24 === 3)\n      m24 = -1;\n    var u1;\n    if ((m14 & 1) === 0) {\n      u1 = 0;\n    } else {\n      var m8 = (k1.andln(7) + d1) & 7;\n      if ((m8 === 3 || m8 === 5) && m24 === 2)\n        u1 = -m14;\n      else\n        u1 = m14;\n    }\n    jsf[0].push(u1);\n\n    var u2;\n    if ((m24 & 1) === 0) {\n      u2 = 0;\n    } else {\n      var m8 = (k2.andln(7) + d2) & 7;\n      if ((m8 === 3 || m8 === 5) && m14 === 2)\n        u2 = -m24;\n      else\n        u2 = m24;\n    }\n    jsf[1].push(u2);\n\n    // Second phase\n    if (2 * d1 === u1 + 1)\n      d1 = 1 - d1;\n    if (2 * d2 === u2 + 1)\n      d2 = 1 - d2;\n    k1.iushrn(1);\n    k2.iushrn(1);\n  }\n\n  return jsf;\n}\nutils.getJSF = getJSF;\n\nfunction cachedProperty(obj, name, computer) {\n  var key = '_' + name;\n  obj.prototype[name] = function cachedProperty() {\n    return this[key] !== undefined ? this[key] :\n           this[key] = computer.call(this);\n  };\n}\nutils.cachedProperty = cachedProperty;\n\nfunction parseBytes(bytes) {\n  return typeof bytes === 'string' ? utils.toArray(bytes, 'hex') :\n                                     bytes;\n}\nutils.parseBytes = parseBytes;\n\nfunction intFromLE(bytes) {\n  return new BN(bytes, 'hex', 'le');\n}\nutils.intFromLE = intFromLE;\n\n\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/lib/elliptic/utils.js?");

/***/ }),

/***/ "./node_modules/elliptic/node_modules/bn.js/lib/bn.js":
/*!************************************************************!*\
  !*** ./node_modules/elliptic/node_modules/bn.js/lib/bn.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(module) {(function (module, exports) {\r\n  'use strict';\r\n\r\n  // Utils\r\n  function assert (val, msg) {\r\n    if (!val) throw new Error(msg || 'Assertion failed');\r\n  }\r\n\r\n  // Could use `inherits` module, but don't want to move from single file\r\n  // architecture yet.\r\n  function inherits (ctor, superCtor) {\r\n    ctor.super_ = superCtor;\r\n    var TempCtor = function () {};\r\n    TempCtor.prototype = superCtor.prototype;\r\n    ctor.prototype = new TempCtor();\r\n    ctor.prototype.constructor = ctor;\r\n  }\r\n\r\n  // BN\r\n\r\n  function BN (number, base, endian) {\r\n    if (BN.isBN(number)) {\r\n      return number;\r\n    }\r\n\r\n    this.negative = 0;\r\n    this.words = null;\r\n    this.length = 0;\r\n\r\n    // Reduction context\r\n    this.red = null;\r\n\r\n    if (number !== null) {\r\n      if (base === 'le' || base === 'be') {\r\n        endian = base;\r\n        base = 10;\r\n      }\r\n\r\n      this._init(number || 0, base || 10, endian || 'be');\r\n    }\r\n  }\r\n  if (typeof module === 'object') {\r\n    module.exports = BN;\r\n  } else {\r\n    exports.BN = BN;\r\n  }\r\n\r\n  BN.BN = BN;\r\n  BN.wordSize = 26;\r\n\r\n  var Buffer;\r\n  try {\r\n    Buffer = __webpack_require__(/*! buffer */ 11).Buffer;\r\n  } catch (e) {\r\n  }\r\n\r\n  BN.isBN = function isBN (num) {\r\n    if (num instanceof BN) {\r\n      return true;\r\n    }\r\n\r\n    return num !== null && typeof num === 'object' &&\r\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\r\n  };\r\n\r\n  BN.max = function max (left, right) {\r\n    if (left.cmp(right) > 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.min = function min (left, right) {\r\n    if (left.cmp(right) < 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.prototype._init = function init (number, base, endian) {\r\n    if (typeof number === 'number') {\r\n      return this._initNumber(number, base, endian);\r\n    }\r\n\r\n    if (typeof number === 'object') {\r\n      return this._initArray(number, base, endian);\r\n    }\r\n\r\n    if (base === 'hex') {\r\n      base = 16;\r\n    }\r\n    assert(base === (base | 0) && base >= 2 && base <= 36);\r\n\r\n    number = number.toString().replace(/\\s+/g, '');\r\n    var start = 0;\r\n    if (number[0] === '-') {\r\n      start++;\r\n    }\r\n\r\n    if (base === 16) {\r\n      this._parseHex(number, start);\r\n    } else {\r\n      this._parseBase(number, base, start);\r\n    }\r\n\r\n    if (number[0] === '-') {\r\n      this.negative = 1;\r\n    }\r\n\r\n    this.strip();\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\r\n    if (number < 0) {\r\n      this.negative = 1;\r\n      number = -number;\r\n    }\r\n    if (number < 0x4000000) {\r\n      this.words = [ number & 0x3ffffff ];\r\n      this.length = 1;\r\n    } else if (number < 0x10000000000000) {\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff\r\n      ];\r\n      this.length = 2;\r\n    } else {\r\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff,\r\n        1\r\n      ];\r\n      this.length = 3;\r\n    }\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    // Reverse the bytes\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initArray = function _initArray (number, base, endian) {\r\n    // Perhaps a Uint8Array\r\n    assert(typeof number.length === 'number');\r\n    if (number.length <= 0) {\r\n      this.words = [ 0 ];\r\n      this.length = 1;\r\n      return this;\r\n    }\r\n\r\n    this.length = Math.ceil(number.length / 3);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    var off = 0;\r\n    if (endian === 'be') {\r\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\r\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    } else if (endian === 'le') {\r\n      for (i = 0, j = 0; i < number.length; i += 3) {\r\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    }\r\n    return this.strip();\r\n  };\r\n\r\n  function parseHex (str, start, end) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r <<= 4;\r\n\r\n      // 'a' - 'f'\r\n      if (c >= 49 && c <= 54) {\r\n        r |= c - 49 + 0xa;\r\n\r\n      // 'A' - 'F'\r\n      } else if (c >= 17 && c <= 22) {\r\n        r |= c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        r |= c & 0xf;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseHex = function _parseHex (number, start) {\r\n    // Create possibly bigger array to ensure that it fits the number\r\n    this.length = Math.ceil((number.length - start) / 6);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    // Scan 24-bit chunks and add them to the number\r\n    var off = 0;\r\n    for (i = number.length - 6, j = 0; i >= start; i -= 6) {\r\n      w = parseHex(number, i, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      // NOTE: `0x3fffff` is intentional here, 26bits max shift + 24bit hex limb\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n      off += 24;\r\n      if (off >= 26) {\r\n        off -= 26;\r\n        j++;\r\n      }\r\n    }\r\n    if (i + 6 !== start) {\r\n      w = parseHex(number, start, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n    }\r\n    this.strip();\r\n  };\r\n\r\n  function parseBase (str, start, end, mul) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r *= mul;\r\n\r\n      // 'a'\r\n      if (c >= 49) {\r\n        r += c - 49 + 0xa;\r\n\r\n      // 'A'\r\n      } else if (c >= 17) {\r\n        r += c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        r += c;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\r\n    // Initialize as zero\r\n    this.words = [ 0 ];\r\n    this.length = 1;\r\n\r\n    // Find length of limb in base\r\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\r\n      limbLen++;\r\n    }\r\n    limbLen--;\r\n    limbPow = (limbPow / base) | 0;\r\n\r\n    var total = number.length - start;\r\n    var mod = total % limbLen;\r\n    var end = Math.min(total, total - mod) + start;\r\n\r\n    var word = 0;\r\n    for (var i = start; i < end; i += limbLen) {\r\n      word = parseBase(number, i, i + limbLen, base);\r\n\r\n      this.imuln(limbPow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n\r\n    if (mod !== 0) {\r\n      var pow = 1;\r\n      word = parseBase(number, i, number.length, base);\r\n\r\n      for (i = 0; i < mod; i++) {\r\n        pow *= base;\r\n      }\r\n\r\n      this.imuln(pow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n  };\r\n\r\n  BN.prototype.copy = function copy (dest) {\r\n    dest.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      dest.words[i] = this.words[i];\r\n    }\r\n    dest.length = this.length;\r\n    dest.negative = this.negative;\r\n    dest.red = this.red;\r\n  };\r\n\r\n  BN.prototype.clone = function clone () {\r\n    var r = new BN(null);\r\n    this.copy(r);\r\n    return r;\r\n  };\r\n\r\n  BN.prototype._expand = function _expand (size) {\r\n    while (this.length < size) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  // Remove leading `0` from `this`\r\n  BN.prototype.strip = function strip () {\r\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\r\n      this.length--;\r\n    }\r\n    return this._normSign();\r\n  };\r\n\r\n  BN.prototype._normSign = function _normSign () {\r\n    // -0 = 0\r\n    if (this.length === 1 && this.words[0] === 0) {\r\n      this.negative = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.inspect = function inspect () {\r\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\r\n  };\r\n\r\n  /*\r\n\r\n  var zeros = [];\r\n  var groupSizes = [];\r\n  var groupBases = [];\r\n\r\n  var s = '';\r\n  var i = -1;\r\n  while (++i < BN.wordSize) {\r\n    zeros[i] = s;\r\n    s += '0';\r\n  }\r\n  groupSizes[0] = 0;\r\n  groupSizes[1] = 0;\r\n  groupBases[0] = 0;\r\n  groupBases[1] = 0;\r\n  var base = 2 - 1;\r\n  while (++base < 36 + 1) {\r\n    var groupSize = 0;\r\n    var groupBase = 1;\r\n    while (groupBase < (1 << BN.wordSize) / base) {\r\n      groupBase *= base;\r\n      groupSize += 1;\r\n    }\r\n    groupSizes[base] = groupSize;\r\n    groupBases[base] = groupBase;\r\n  }\r\n\r\n  */\r\n\r\n  var zeros = [\r\n    '',\r\n    '0',\r\n    '00',\r\n    '000',\r\n    '0000',\r\n    '00000',\r\n    '000000',\r\n    '0000000',\r\n    '00000000',\r\n    '000000000',\r\n    '0000000000',\r\n    '00000000000',\r\n    '000000000000',\r\n    '0000000000000',\r\n    '00000000000000',\r\n    '000000000000000',\r\n    '0000000000000000',\r\n    '00000000000000000',\r\n    '000000000000000000',\r\n    '0000000000000000000',\r\n    '00000000000000000000',\r\n    '000000000000000000000',\r\n    '0000000000000000000000',\r\n    '00000000000000000000000',\r\n    '000000000000000000000000',\r\n    '0000000000000000000000000'\r\n  ];\r\n\r\n  var groupSizes = [\r\n    0, 0,\r\n    25, 16, 12, 11, 10, 9, 8,\r\n    8, 7, 7, 7, 7, 6, 6,\r\n    6, 6, 6, 6, 6, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5\r\n  ];\r\n\r\n  var groupBases = [\r\n    0, 0,\r\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\r\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\r\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\r\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\r\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\r\n  ];\r\n\r\n  BN.prototype.toString = function toString (base, padding) {\r\n    base = base || 10;\r\n    padding = padding | 0 || 1;\r\n\r\n    var out;\r\n    if (base === 16 || base === 'hex') {\r\n      out = '';\r\n      var off = 0;\r\n      var carry = 0;\r\n      for (var i = 0; i < this.length; i++) {\r\n        var w = this.words[i];\r\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\r\n        carry = (w >>> (24 - off)) & 0xffffff;\r\n        if (carry !== 0 || i !== this.length - 1) {\r\n          out = zeros[6 - word.length] + word + out;\r\n        } else {\r\n          out = word + out;\r\n        }\r\n        off += 2;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          i--;\r\n        }\r\n      }\r\n      if (carry !== 0) {\r\n        out = carry.toString(16) + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    if (base === (base | 0) && base >= 2 && base <= 36) {\r\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\r\n      var groupSize = groupSizes[base];\r\n      // var groupBase = Math.pow(base, groupSize);\r\n      var groupBase = groupBases[base];\r\n      out = '';\r\n      var c = this.clone();\r\n      c.negative = 0;\r\n      while (!c.isZero()) {\r\n        var r = c.modn(groupBase).toString(base);\r\n        c = c.idivn(groupBase);\r\n\r\n        if (!c.isZero()) {\r\n          out = zeros[groupSize - r.length] + r + out;\r\n        } else {\r\n          out = r + out;\r\n        }\r\n      }\r\n      if (this.isZero()) {\r\n        out = '0' + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    assert(false, 'Base should be between 2 and 36');\r\n  };\r\n\r\n  BN.prototype.toNumber = function toNumber () {\r\n    var ret = this.words[0];\r\n    if (this.length === 2) {\r\n      ret += this.words[1] * 0x4000000;\r\n    } else if (this.length === 3 && this.words[2] === 0x01) {\r\n      // NOTE: at this stage it is known that the top bit is set\r\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\r\n    } else if (this.length > 2) {\r\n      assert(false, 'Number can only safely store up to 53 bits');\r\n    }\r\n    return (this.negative !== 0) ? -ret : ret;\r\n  };\r\n\r\n  BN.prototype.toJSON = function toJSON () {\r\n    return this.toString(16);\r\n  };\r\n\r\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\r\n    assert(typeof Buffer !== 'undefined');\r\n    return this.toArrayLike(Buffer, endian, length);\r\n  };\r\n\r\n  BN.prototype.toArray = function toArray (endian, length) {\r\n    return this.toArrayLike(Array, endian, length);\r\n  };\r\n\r\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\r\n    var byteLength = this.byteLength();\r\n    var reqLength = length || Math.max(1, byteLength);\r\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\r\n    assert(reqLength > 0, 'Requested array length <= 0');\r\n\r\n    this.strip();\r\n    var littleEndian = endian === 'le';\r\n    var res = new ArrayType(reqLength);\r\n\r\n    var b, i;\r\n    var q = this.clone();\r\n    if (!littleEndian) {\r\n      // Assume big-endian\r\n      for (i = 0; i < reqLength - byteLength; i++) {\r\n        res[i] = 0;\r\n      }\r\n\r\n      for (i = 0; !q.isZero(); i++) {\r\n        b = q.andln(0xff);\r\n        q.iushrn(8);\r\n\r\n        res[reqLength - i - 1] = b;\r\n      }\r\n    } else {\r\n      for (i = 0; !q.isZero(); i++) {\r\n        b = q.andln(0xff);\r\n        q.iushrn(8);\r\n\r\n        res[i] = b;\r\n      }\r\n\r\n      for (; i < reqLength; i++) {\r\n        res[i] = 0;\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  if (Math.clz32) {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      return 32 - Math.clz32(w);\r\n    };\r\n  } else {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      var t = w;\r\n      var r = 0;\r\n      if (t >= 0x1000) {\r\n        r += 13;\r\n        t >>>= 13;\r\n      }\r\n      if (t >= 0x40) {\r\n        r += 7;\r\n        t >>>= 7;\r\n      }\r\n      if (t >= 0x8) {\r\n        r += 4;\r\n        t >>>= 4;\r\n      }\r\n      if (t >= 0x02) {\r\n        r += 2;\r\n        t >>>= 2;\r\n      }\r\n      return r + t;\r\n    };\r\n  }\r\n\r\n  BN.prototype._zeroBits = function _zeroBits (w) {\r\n    // Short-cut\r\n    if (w === 0) return 26;\r\n\r\n    var t = w;\r\n    var r = 0;\r\n    if ((t & 0x1fff) === 0) {\r\n      r += 13;\r\n      t >>>= 13;\r\n    }\r\n    if ((t & 0x7f) === 0) {\r\n      r += 7;\r\n      t >>>= 7;\r\n    }\r\n    if ((t & 0xf) === 0) {\r\n      r += 4;\r\n      t >>>= 4;\r\n    }\r\n    if ((t & 0x3) === 0) {\r\n      r += 2;\r\n      t >>>= 2;\r\n    }\r\n    if ((t & 0x1) === 0) {\r\n      r++;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  // Return number of used bits in a BN\r\n  BN.prototype.bitLength = function bitLength () {\r\n    var w = this.words[this.length - 1];\r\n    var hi = this._countBits(w);\r\n    return (this.length - 1) * 26 + hi;\r\n  };\r\n\r\n  function toBitArray (num) {\r\n    var w = new Array(num.bitLength());\r\n\r\n    for (var bit = 0; bit < w.length; bit++) {\r\n      var off = (bit / 26) | 0;\r\n      var wbit = bit % 26;\r\n\r\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\r\n    }\r\n\r\n    return w;\r\n  }\r\n\r\n  // Number of trailing zero bits\r\n  BN.prototype.zeroBits = function zeroBits () {\r\n    if (this.isZero()) return 0;\r\n\r\n    var r = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var b = this._zeroBits(this.words[i]);\r\n      r += b;\r\n      if (b !== 26) break;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  BN.prototype.byteLength = function byteLength () {\r\n    return Math.ceil(this.bitLength() / 8);\r\n  };\r\n\r\n  BN.prototype.toTwos = function toTwos (width) {\r\n    if (this.negative !== 0) {\r\n      return this.abs().inotn(width).iaddn(1);\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.fromTwos = function fromTwos (width) {\r\n    if (this.testn(width - 1)) {\r\n      return this.notn(width).iaddn(1).ineg();\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.isNeg = function isNeg () {\r\n    return this.negative !== 0;\r\n  };\r\n\r\n  // Return negative clone of `this`\r\n  BN.prototype.neg = function neg () {\r\n    return this.clone().ineg();\r\n  };\r\n\r\n  BN.prototype.ineg = function ineg () {\r\n    if (!this.isZero()) {\r\n      this.negative ^= 1;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Or `num` with `this` in-place\r\n  BN.prototype.iuor = function iuor (num) {\r\n    while (this.length < num.length) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n\r\n    for (var i = 0; i < num.length; i++) {\r\n      this.words[i] = this.words[i] | num.words[i];\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ior = function ior (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuor(num);\r\n  };\r\n\r\n  // Or `num` with `this`\r\n  BN.prototype.or = function or (num) {\r\n    if (this.length > num.length) return this.clone().ior(num);\r\n    return num.clone().ior(this);\r\n  };\r\n\r\n  BN.prototype.uor = function uor (num) {\r\n    if (this.length > num.length) return this.clone().iuor(num);\r\n    return num.clone().iuor(this);\r\n  };\r\n\r\n  // And `num` with `this` in-place\r\n  BN.prototype.iuand = function iuand (num) {\r\n    // b = min-length(num, this)\r\n    var b;\r\n    if (this.length > num.length) {\r\n      b = num;\r\n    } else {\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = this.words[i] & num.words[i];\r\n    }\r\n\r\n    this.length = b.length;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.iand = function iand (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuand(num);\r\n  };\r\n\r\n  // And `num` with `this`\r\n  BN.prototype.and = function and (num) {\r\n    if (this.length > num.length) return this.clone().iand(num);\r\n    return num.clone().iand(this);\r\n  };\r\n\r\n  BN.prototype.uand = function uand (num) {\r\n    if (this.length > num.length) return this.clone().iuand(num);\r\n    return num.clone().iuand(this);\r\n  };\r\n\r\n  // Xor `num` with `this` in-place\r\n  BN.prototype.iuxor = function iuxor (num) {\r\n    // a.length > b.length\r\n    var a;\r\n    var b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = a.words[i] ^ b.words[i];\r\n    }\r\n\r\n    if (this !== a) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = a.length;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ixor = function ixor (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuxor(num);\r\n  };\r\n\r\n  // Xor `num` with `this`\r\n  BN.prototype.xor = function xor (num) {\r\n    if (this.length > num.length) return this.clone().ixor(num);\r\n    return num.clone().ixor(this);\r\n  };\r\n\r\n  BN.prototype.uxor = function uxor (num) {\r\n    if (this.length > num.length) return this.clone().iuxor(num);\r\n    return num.clone().iuxor(this);\r\n  };\r\n\r\n  // Not ``this`` with ``width`` bitwidth\r\n  BN.prototype.inotn = function inotn (width) {\r\n    assert(typeof width === 'number' && width >= 0);\r\n\r\n    var bytesNeeded = Math.ceil(width / 26) | 0;\r\n    var bitsLeft = width % 26;\r\n\r\n    // Extend the buffer with leading zeroes\r\n    this._expand(bytesNeeded);\r\n\r\n    if (bitsLeft > 0) {\r\n      bytesNeeded--;\r\n    }\r\n\r\n    // Handle complete words\r\n    for (var i = 0; i < bytesNeeded; i++) {\r\n      this.words[i] = ~this.words[i] & 0x3ffffff;\r\n    }\r\n\r\n    // Handle the residue\r\n    if (bitsLeft > 0) {\r\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\r\n    }\r\n\r\n    // And remove leading zeroes\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.notn = function notn (width) {\r\n    return this.clone().inotn(width);\r\n  };\r\n\r\n  // Set `bit` of `this`\r\n  BN.prototype.setn = function setn (bit, val) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n\r\n    var off = (bit / 26) | 0;\r\n    var wbit = bit % 26;\r\n\r\n    this._expand(off + 1);\r\n\r\n    if (val) {\r\n      this.words[off] = this.words[off] | (1 << wbit);\r\n    } else {\r\n      this.words[off] = this.words[off] & ~(1 << wbit);\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Add `num` to `this` in-place\r\n  BN.prototype.iadd = function iadd (num) {\r\n    var r;\r\n\r\n    // negative + positive\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      this.negative = 0;\r\n      r = this.isub(num);\r\n      this.negative ^= 1;\r\n      return this._normSign();\r\n\r\n    // positive + negative\r\n    } else if (this.negative === 0 && num.negative !== 0) {\r\n      num.negative = 0;\r\n      r = this.isub(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n    }\r\n\r\n    // a.length > b.length\r\n    var a, b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n\r\n    this.length = a.length;\r\n    if (carry !== 0) {\r\n      this.words[this.length] = carry;\r\n      this.length++;\r\n    // Copy the rest of the words\r\n    } else if (a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Add `num` to `this`\r\n  BN.prototype.add = function add (num) {\r\n    var res;\r\n    if (num.negative !== 0 && this.negative === 0) {\r\n      num.negative = 0;\r\n      res = this.sub(num);\r\n      num.negative ^= 1;\r\n      return res;\r\n    } else if (num.negative === 0 && this.negative !== 0) {\r\n      this.negative = 0;\r\n      res = num.sub(this);\r\n      this.negative = 1;\r\n      return res;\r\n    }\r\n\r\n    if (this.length > num.length) return this.clone().iadd(num);\r\n\r\n    return num.clone().iadd(this);\r\n  };\r\n\r\n  // Subtract `num` from `this` in-place\r\n  BN.prototype.isub = function isub (num) {\r\n    // this - (-num) = this + num\r\n    if (num.negative !== 0) {\r\n      num.negative = 0;\r\n      var r = this.iadd(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n\r\n    // -this - num = -(this + num)\r\n    } else if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iadd(num);\r\n      this.negative = 1;\r\n      return this._normSign();\r\n    }\r\n\r\n    // At this point both numbers are positive\r\n    var cmp = this.cmp(num);\r\n\r\n    // Optimization - zeroify\r\n    if (cmp === 0) {\r\n      this.negative = 0;\r\n      this.length = 1;\r\n      this.words[0] = 0;\r\n      return this;\r\n    }\r\n\r\n    // a > b\r\n    var a, b;\r\n    if (cmp > 0) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n\r\n    // Copy rest of the words\r\n    if (carry === 0 && i < a.length && a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = Math.max(this.length, i);\r\n\r\n    if (a !== this) {\r\n      this.negative = 1;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Subtract `num` from `this`\r\n  BN.prototype.sub = function sub (num) {\r\n    return this.clone().isub(num);\r\n  };\r\n\r\n  function smallMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    var len = (self.length + num.length) | 0;\r\n    out.length = len;\r\n    len = (len - 1) | 0;\r\n\r\n    // Peel one iteration (compiler can't do it, because of code complexity)\r\n    var a = self.words[0] | 0;\r\n    var b = num.words[0] | 0;\r\n    var r = a * b;\r\n\r\n    var lo = r & 0x3ffffff;\r\n    var carry = (r / 0x4000000) | 0;\r\n    out.words[0] = lo;\r\n\r\n    for (var k = 1; k < len; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = carry >>> 26;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = (k - j) | 0;\r\n        a = self.words[i] | 0;\r\n        b = num.words[j] | 0;\r\n        r = a * b + rword;\r\n        ncarry += (r / 0x4000000) | 0;\r\n        rword = r & 0x3ffffff;\r\n      }\r\n      out.words[k] = rword | 0;\r\n      carry = ncarry | 0;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry | 0;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out.strip();\r\n  }\r\n\r\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\r\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\r\n  // multiplication (like elliptic secp256k1).\r\n  var comb10MulTo = function comb10MulTo (self, num, out) {\r\n    var a = self.words;\r\n    var b = num.words;\r\n    var o = out.words;\r\n    var c = 0;\r\n    var lo;\r\n    var mid;\r\n    var hi;\r\n    var a0 = a[0] | 0;\r\n    var al0 = a0 & 0x1fff;\r\n    var ah0 = a0 >>> 13;\r\n    var a1 = a[1] | 0;\r\n    var al1 = a1 & 0x1fff;\r\n    var ah1 = a1 >>> 13;\r\n    var a2 = a[2] | 0;\r\n    var al2 = a2 & 0x1fff;\r\n    var ah2 = a2 >>> 13;\r\n    var a3 = a[3] | 0;\r\n    var al3 = a3 & 0x1fff;\r\n    var ah3 = a3 >>> 13;\r\n    var a4 = a[4] | 0;\r\n    var al4 = a4 & 0x1fff;\r\n    var ah4 = a4 >>> 13;\r\n    var a5 = a[5] | 0;\r\n    var al5 = a5 & 0x1fff;\r\n    var ah5 = a5 >>> 13;\r\n    var a6 = a[6] | 0;\r\n    var al6 = a6 & 0x1fff;\r\n    var ah6 = a6 >>> 13;\r\n    var a7 = a[7] | 0;\r\n    var al7 = a7 & 0x1fff;\r\n    var ah7 = a7 >>> 13;\r\n    var a8 = a[8] | 0;\r\n    var al8 = a8 & 0x1fff;\r\n    var ah8 = a8 >>> 13;\r\n    var a9 = a[9] | 0;\r\n    var al9 = a9 & 0x1fff;\r\n    var ah9 = a9 >>> 13;\r\n    var b0 = b[0] | 0;\r\n    var bl0 = b0 & 0x1fff;\r\n    var bh0 = b0 >>> 13;\r\n    var b1 = b[1] | 0;\r\n    var bl1 = b1 & 0x1fff;\r\n    var bh1 = b1 >>> 13;\r\n    var b2 = b[2] | 0;\r\n    var bl2 = b2 & 0x1fff;\r\n    var bh2 = b2 >>> 13;\r\n    var b3 = b[3] | 0;\r\n    var bl3 = b3 & 0x1fff;\r\n    var bh3 = b3 >>> 13;\r\n    var b4 = b[4] | 0;\r\n    var bl4 = b4 & 0x1fff;\r\n    var bh4 = b4 >>> 13;\r\n    var b5 = b[5] | 0;\r\n    var bl5 = b5 & 0x1fff;\r\n    var bh5 = b5 >>> 13;\r\n    var b6 = b[6] | 0;\r\n    var bl6 = b6 & 0x1fff;\r\n    var bh6 = b6 >>> 13;\r\n    var b7 = b[7] | 0;\r\n    var bl7 = b7 & 0x1fff;\r\n    var bh7 = b7 >>> 13;\r\n    var b8 = b[8] | 0;\r\n    var bl8 = b8 & 0x1fff;\r\n    var bh8 = b8 >>> 13;\r\n    var b9 = b[9] | 0;\r\n    var bl9 = b9 & 0x1fff;\r\n    var bh9 = b9 >>> 13;\r\n\r\n    out.negative = self.negative ^ num.negative;\r\n    out.length = 19;\r\n    /* k = 0 */\r\n    lo = Math.imul(al0, bl0);\r\n    mid = Math.imul(al0, bh0);\r\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\r\n    hi = Math.imul(ah0, bh0);\r\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\r\n    w0 &= 0x3ffffff;\r\n    /* k = 1 */\r\n    lo = Math.imul(al1, bl0);\r\n    mid = Math.imul(al1, bh0);\r\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\r\n    hi = Math.imul(ah1, bh0);\r\n    lo = (lo + Math.imul(al0, bl1)) | 0;\r\n    mid = (mid + Math.imul(al0, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\r\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\r\n    w1 &= 0x3ffffff;\r\n    /* k = 2 */\r\n    lo = Math.imul(al2, bl0);\r\n    mid = Math.imul(al2, bh0);\r\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\r\n    hi = Math.imul(ah2, bh0);\r\n    lo = (lo + Math.imul(al1, bl1)) | 0;\r\n    mid = (mid + Math.imul(al1, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\r\n    lo = (lo + Math.imul(al0, bl2)) | 0;\r\n    mid = (mid + Math.imul(al0, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\r\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\r\n    w2 &= 0x3ffffff;\r\n    /* k = 3 */\r\n    lo = Math.imul(al3, bl0);\r\n    mid = Math.imul(al3, bh0);\r\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\r\n    hi = Math.imul(ah3, bh0);\r\n    lo = (lo + Math.imul(al2, bl1)) | 0;\r\n    mid = (mid + Math.imul(al2, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\r\n    lo = (lo + Math.imul(al1, bl2)) | 0;\r\n    mid = (mid + Math.imul(al1, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\r\n    lo = (lo + Math.imul(al0, bl3)) | 0;\r\n    mid = (mid + Math.imul(al0, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\r\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\r\n    w3 &= 0x3ffffff;\r\n    /* k = 4 */\r\n    lo = Math.imul(al4, bl0);\r\n    mid = Math.imul(al4, bh0);\r\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\r\n    hi = Math.imul(ah4, bh0);\r\n    lo = (lo + Math.imul(al3, bl1)) | 0;\r\n    mid = (mid + Math.imul(al3, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\r\n    lo = (lo + Math.imul(al2, bl2)) | 0;\r\n    mid = (mid + Math.imul(al2, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\r\n    lo = (lo + Math.imul(al1, bl3)) | 0;\r\n    mid = (mid + Math.imul(al1, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\r\n    lo = (lo + Math.imul(al0, bl4)) | 0;\r\n    mid = (mid + Math.imul(al0, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\r\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\r\n    w4 &= 0x3ffffff;\r\n    /* k = 5 */\r\n    lo = Math.imul(al5, bl0);\r\n    mid = Math.imul(al5, bh0);\r\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\r\n    hi = Math.imul(ah5, bh0);\r\n    lo = (lo + Math.imul(al4, bl1)) | 0;\r\n    mid = (mid + Math.imul(al4, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\r\n    lo = (lo + Math.imul(al3, bl2)) | 0;\r\n    mid = (mid + Math.imul(al3, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\r\n    lo = (lo + Math.imul(al2, bl3)) | 0;\r\n    mid = (mid + Math.imul(al2, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\r\n    lo = (lo + Math.imul(al1, bl4)) | 0;\r\n    mid = (mid + Math.imul(al1, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\r\n    lo = (lo + Math.imul(al0, bl5)) | 0;\r\n    mid = (mid + Math.imul(al0, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\r\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\r\n    w5 &= 0x3ffffff;\r\n    /* k = 6 */\r\n    lo = Math.imul(al6, bl0);\r\n    mid = Math.imul(al6, bh0);\r\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\r\n    hi = Math.imul(ah6, bh0);\r\n    lo = (lo + Math.imul(al5, bl1)) | 0;\r\n    mid = (mid + Math.imul(al5, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\r\n    lo = (lo + Math.imul(al4, bl2)) | 0;\r\n    mid = (mid + Math.imul(al4, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\r\n    lo = (lo + Math.imul(al3, bl3)) | 0;\r\n    mid = (mid + Math.imul(al3, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\r\n    lo = (lo + Math.imul(al2, bl4)) | 0;\r\n    mid = (mid + Math.imul(al2, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\r\n    lo = (lo + Math.imul(al1, bl5)) | 0;\r\n    mid = (mid + Math.imul(al1, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\r\n    lo = (lo + Math.imul(al0, bl6)) | 0;\r\n    mid = (mid + Math.imul(al0, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\r\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\r\n    w6 &= 0x3ffffff;\r\n    /* k = 7 */\r\n    lo = Math.imul(al7, bl0);\r\n    mid = Math.imul(al7, bh0);\r\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\r\n    hi = Math.imul(ah7, bh0);\r\n    lo = (lo + Math.imul(al6, bl1)) | 0;\r\n    mid = (mid + Math.imul(al6, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\r\n    lo = (lo + Math.imul(al5, bl2)) | 0;\r\n    mid = (mid + Math.imul(al5, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\r\n    lo = (lo + Math.imul(al4, bl3)) | 0;\r\n    mid = (mid + Math.imul(al4, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\r\n    lo = (lo + Math.imul(al3, bl4)) | 0;\r\n    mid = (mid + Math.imul(al3, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\r\n    lo = (lo + Math.imul(al2, bl5)) | 0;\r\n    mid = (mid + Math.imul(al2, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\r\n    lo = (lo + Math.imul(al1, bl6)) | 0;\r\n    mid = (mid + Math.imul(al1, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\r\n    lo = (lo + Math.imul(al0, bl7)) | 0;\r\n    mid = (mid + Math.imul(al0, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\r\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\r\n    w7 &= 0x3ffffff;\r\n    /* k = 8 */\r\n    lo = Math.imul(al8, bl0);\r\n    mid = Math.imul(al8, bh0);\r\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\r\n    hi = Math.imul(ah8, bh0);\r\n    lo = (lo + Math.imul(al7, bl1)) | 0;\r\n    mid = (mid + Math.imul(al7, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\r\n    lo = (lo + Math.imul(al6, bl2)) | 0;\r\n    mid = (mid + Math.imul(al6, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\r\n    lo = (lo + Math.imul(al5, bl3)) | 0;\r\n    mid = (mid + Math.imul(al5, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\r\n    lo = (lo + Math.imul(al4, bl4)) | 0;\r\n    mid = (mid + Math.imul(al4, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\r\n    lo = (lo + Math.imul(al3, bl5)) | 0;\r\n    mid = (mid + Math.imul(al3, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\r\n    lo = (lo + Math.imul(al2, bl6)) | 0;\r\n    mid = (mid + Math.imul(al2, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\r\n    lo = (lo + Math.imul(al1, bl7)) | 0;\r\n    mid = (mid + Math.imul(al1, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\r\n    lo = (lo + Math.imul(al0, bl8)) | 0;\r\n    mid = (mid + Math.imul(al0, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\r\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\r\n    w8 &= 0x3ffffff;\r\n    /* k = 9 */\r\n    lo = Math.imul(al9, bl0);\r\n    mid = Math.imul(al9, bh0);\r\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\r\n    hi = Math.imul(ah9, bh0);\r\n    lo = (lo + Math.imul(al8, bl1)) | 0;\r\n    mid = (mid + Math.imul(al8, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\r\n    lo = (lo + Math.imul(al7, bl2)) | 0;\r\n    mid = (mid + Math.imul(al7, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\r\n    lo = (lo + Math.imul(al6, bl3)) | 0;\r\n    mid = (mid + Math.imul(al6, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\r\n    lo = (lo + Math.imul(al5, bl4)) | 0;\r\n    mid = (mid + Math.imul(al5, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\r\n    lo = (lo + Math.imul(al4, bl5)) | 0;\r\n    mid = (mid + Math.imul(al4, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\r\n    lo = (lo + Math.imul(al3, bl6)) | 0;\r\n    mid = (mid + Math.imul(al3, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\r\n    lo = (lo + Math.imul(al2, bl7)) | 0;\r\n    mid = (mid + Math.imul(al2, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\r\n    lo = (lo + Math.imul(al1, bl8)) | 0;\r\n    mid = (mid + Math.imul(al1, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\r\n    lo = (lo + Math.imul(al0, bl9)) | 0;\r\n    mid = (mid + Math.imul(al0, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\r\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\r\n    w9 &= 0x3ffffff;\r\n    /* k = 10 */\r\n    lo = Math.imul(al9, bl1);\r\n    mid = Math.imul(al9, bh1);\r\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\r\n    hi = Math.imul(ah9, bh1);\r\n    lo = (lo + Math.imul(al8, bl2)) | 0;\r\n    mid = (mid + Math.imul(al8, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\r\n    lo = (lo + Math.imul(al7, bl3)) | 0;\r\n    mid = (mid + Math.imul(al7, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\r\n    lo = (lo + Math.imul(al6, bl4)) | 0;\r\n    mid = (mid + Math.imul(al6, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\r\n    lo = (lo + Math.imul(al5, bl5)) | 0;\r\n    mid = (mid + Math.imul(al5, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\r\n    lo = (lo + Math.imul(al4, bl6)) | 0;\r\n    mid = (mid + Math.imul(al4, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\r\n    lo = (lo + Math.imul(al3, bl7)) | 0;\r\n    mid = (mid + Math.imul(al3, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\r\n    lo = (lo + Math.imul(al2, bl8)) | 0;\r\n    mid = (mid + Math.imul(al2, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\r\n    lo = (lo + Math.imul(al1, bl9)) | 0;\r\n    mid = (mid + Math.imul(al1, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\r\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\r\n    w10 &= 0x3ffffff;\r\n    /* k = 11 */\r\n    lo = Math.imul(al9, bl2);\r\n    mid = Math.imul(al9, bh2);\r\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\r\n    hi = Math.imul(ah9, bh2);\r\n    lo = (lo + Math.imul(al8, bl3)) | 0;\r\n    mid = (mid + Math.imul(al8, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\r\n    lo = (lo + Math.imul(al7, bl4)) | 0;\r\n    mid = (mid + Math.imul(al7, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\r\n    lo = (lo + Math.imul(al6, bl5)) | 0;\r\n    mid = (mid + Math.imul(al6, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\r\n    lo = (lo + Math.imul(al5, bl6)) | 0;\r\n    mid = (mid + Math.imul(al5, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\r\n    lo = (lo + Math.imul(al4, bl7)) | 0;\r\n    mid = (mid + Math.imul(al4, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\r\n    lo = (lo + Math.imul(al3, bl8)) | 0;\r\n    mid = (mid + Math.imul(al3, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\r\n    lo = (lo + Math.imul(al2, bl9)) | 0;\r\n    mid = (mid + Math.imul(al2, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\r\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\r\n    w11 &= 0x3ffffff;\r\n    /* k = 12 */\r\n    lo = Math.imul(al9, bl3);\r\n    mid = Math.imul(al9, bh3);\r\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\r\n    hi = Math.imul(ah9, bh3);\r\n    lo = (lo + Math.imul(al8, bl4)) | 0;\r\n    mid = (mid + Math.imul(al8, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\r\n    lo = (lo + Math.imul(al7, bl5)) | 0;\r\n    mid = (mid + Math.imul(al7, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\r\n    lo = (lo + Math.imul(al6, bl6)) | 0;\r\n    mid = (mid + Math.imul(al6, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\r\n    lo = (lo + Math.imul(al5, bl7)) | 0;\r\n    mid = (mid + Math.imul(al5, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\r\n    lo = (lo + Math.imul(al4, bl8)) | 0;\r\n    mid = (mid + Math.imul(al4, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\r\n    lo = (lo + Math.imul(al3, bl9)) | 0;\r\n    mid = (mid + Math.imul(al3, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\r\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\r\n    w12 &= 0x3ffffff;\r\n    /* k = 13 */\r\n    lo = Math.imul(al9, bl4);\r\n    mid = Math.imul(al9, bh4);\r\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\r\n    hi = Math.imul(ah9, bh4);\r\n    lo = (lo + Math.imul(al8, bl5)) | 0;\r\n    mid = (mid + Math.imul(al8, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\r\n    lo = (lo + Math.imul(al7, bl6)) | 0;\r\n    mid = (mid + Math.imul(al7, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\r\n    lo = (lo + Math.imul(al6, bl7)) | 0;\r\n    mid = (mid + Math.imul(al6, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\r\n    lo = (lo + Math.imul(al5, bl8)) | 0;\r\n    mid = (mid + Math.imul(al5, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\r\n    lo = (lo + Math.imul(al4, bl9)) | 0;\r\n    mid = (mid + Math.imul(al4, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\r\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\r\n    w13 &= 0x3ffffff;\r\n    /* k = 14 */\r\n    lo = Math.imul(al9, bl5);\r\n    mid = Math.imul(al9, bh5);\r\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\r\n    hi = Math.imul(ah9, bh5);\r\n    lo = (lo + Math.imul(al8, bl6)) | 0;\r\n    mid = (mid + Math.imul(al8, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\r\n    lo = (lo + Math.imul(al7, bl7)) | 0;\r\n    mid = (mid + Math.imul(al7, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\r\n    lo = (lo + Math.imul(al6, bl8)) | 0;\r\n    mid = (mid + Math.imul(al6, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\r\n    lo = (lo + Math.imul(al5, bl9)) | 0;\r\n    mid = (mid + Math.imul(al5, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\r\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\r\n    w14 &= 0x3ffffff;\r\n    /* k = 15 */\r\n    lo = Math.imul(al9, bl6);\r\n    mid = Math.imul(al9, bh6);\r\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\r\n    hi = Math.imul(ah9, bh6);\r\n    lo = (lo + Math.imul(al8, bl7)) | 0;\r\n    mid = (mid + Math.imul(al8, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\r\n    lo = (lo + Math.imul(al7, bl8)) | 0;\r\n    mid = (mid + Math.imul(al7, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\r\n    lo = (lo + Math.imul(al6, bl9)) | 0;\r\n    mid = (mid + Math.imul(al6, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\r\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\r\n    w15 &= 0x3ffffff;\r\n    /* k = 16 */\r\n    lo = Math.imul(al9, bl7);\r\n    mid = Math.imul(al9, bh7);\r\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\r\n    hi = Math.imul(ah9, bh7);\r\n    lo = (lo + Math.imul(al8, bl8)) | 0;\r\n    mid = (mid + Math.imul(al8, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\r\n    lo = (lo + Math.imul(al7, bl9)) | 0;\r\n    mid = (mid + Math.imul(al7, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\r\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\r\n    w16 &= 0x3ffffff;\r\n    /* k = 17 */\r\n    lo = Math.imul(al9, bl8);\r\n    mid = Math.imul(al9, bh8);\r\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\r\n    hi = Math.imul(ah9, bh8);\r\n    lo = (lo + Math.imul(al8, bl9)) | 0;\r\n    mid = (mid + Math.imul(al8, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\r\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\r\n    w17 &= 0x3ffffff;\r\n    /* k = 18 */\r\n    lo = Math.imul(al9, bl9);\r\n    mid = Math.imul(al9, bh9);\r\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\r\n    hi = Math.imul(ah9, bh9);\r\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\r\n    w18 &= 0x3ffffff;\r\n    o[0] = w0;\r\n    o[1] = w1;\r\n    o[2] = w2;\r\n    o[3] = w3;\r\n    o[4] = w4;\r\n    o[5] = w5;\r\n    o[6] = w6;\r\n    o[7] = w7;\r\n    o[8] = w8;\r\n    o[9] = w9;\r\n    o[10] = w10;\r\n    o[11] = w11;\r\n    o[12] = w12;\r\n    o[13] = w13;\r\n    o[14] = w14;\r\n    o[15] = w15;\r\n    o[16] = w16;\r\n    o[17] = w17;\r\n    o[18] = w18;\r\n    if (c !== 0) {\r\n      o[19] = c;\r\n      out.length++;\r\n    }\r\n    return out;\r\n  };\r\n\r\n  // Polyfill comb\r\n  if (!Math.imul) {\r\n    comb10MulTo = smallMulTo;\r\n  }\r\n\r\n  function bigMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    out.length = self.length + num.length;\r\n\r\n    var carry = 0;\r\n    var hncarry = 0;\r\n    for (var k = 0; k < out.length - 1; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = hncarry;\r\n      hncarry = 0;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = k - j;\r\n        var a = self.words[i] | 0;\r\n        var b = num.words[j] | 0;\r\n        var r = a * b;\r\n\r\n        var lo = r & 0x3ffffff;\r\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\r\n        lo = (lo + rword) | 0;\r\n        rword = lo & 0x3ffffff;\r\n        ncarry = (ncarry + (lo >>> 26)) | 0;\r\n\r\n        hncarry += ncarry >>> 26;\r\n        ncarry &= 0x3ffffff;\r\n      }\r\n      out.words[k] = rword;\r\n      carry = ncarry;\r\n      ncarry = hncarry;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out.strip();\r\n  }\r\n\r\n  function jumboMulTo (self, num, out) {\r\n    var fftm = new FFTM();\r\n    return fftm.mulp(self, num, out);\r\n  }\r\n\r\n  BN.prototype.mulTo = function mulTo (num, out) {\r\n    var res;\r\n    var len = this.length + num.length;\r\n    if (this.length === 10 && num.length === 10) {\r\n      res = comb10MulTo(this, num, out);\r\n    } else if (len < 63) {\r\n      res = smallMulTo(this, num, out);\r\n    } else if (len < 1024) {\r\n      res = bigMulTo(this, num, out);\r\n    } else {\r\n      res = jumboMulTo(this, num, out);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Cooley-Tukey algorithm for FFT\r\n  // slightly revisited to rely on looping instead of recursion\r\n\r\n  function FFTM (x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  FFTM.prototype.makeRBT = function makeRBT (N) {\r\n    var t = new Array(N);\r\n    var l = BN.prototype._countBits(N) - 1;\r\n    for (var i = 0; i < N; i++) {\r\n      t[i] = this.revBin(i, l, N);\r\n    }\r\n\r\n    return t;\r\n  };\r\n\r\n  // Returns binary-reversed representation of `x`\r\n  FFTM.prototype.revBin = function revBin (x, l, N) {\r\n    if (x === 0 || x === N - 1) return x;\r\n\r\n    var rb = 0;\r\n    for (var i = 0; i < l; i++) {\r\n      rb |= (x & 1) << (l - i - 1);\r\n      x >>= 1;\r\n    }\r\n\r\n    return rb;\r\n  };\r\n\r\n  // Performs \"tweedling\" phase, therefore 'emulating'\r\n  // behaviour of the recursive algorithm\r\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\r\n    for (var i = 0; i < N; i++) {\r\n      rtws[i] = rws[rbt[i]];\r\n      itws[i] = iws[rbt[i]];\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\r\n    this.permute(rbt, rws, iws, rtws, itws, N);\r\n\r\n    for (var s = 1; s < N; s <<= 1) {\r\n      var l = s << 1;\r\n\r\n      var rtwdf = Math.cos(2 * Math.PI / l);\r\n      var itwdf = Math.sin(2 * Math.PI / l);\r\n\r\n      for (var p = 0; p < N; p += l) {\r\n        var rtwdf_ = rtwdf;\r\n        var itwdf_ = itwdf;\r\n\r\n        for (var j = 0; j < s; j++) {\r\n          var re = rtws[p + j];\r\n          var ie = itws[p + j];\r\n\r\n          var ro = rtws[p + j + s];\r\n          var io = itws[p + j + s];\r\n\r\n          var rx = rtwdf_ * ro - itwdf_ * io;\r\n\r\n          io = rtwdf_ * io + itwdf_ * ro;\r\n          ro = rx;\r\n\r\n          rtws[p + j] = re + ro;\r\n          itws[p + j] = ie + io;\r\n\r\n          rtws[p + j + s] = re - ro;\r\n          itws[p + j + s] = ie - io;\r\n\r\n          /* jshint maxdepth : false */\r\n          if (j !== l) {\r\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\r\n\r\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\r\n            rtwdf_ = rx;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\r\n    var N = Math.max(m, n) | 1;\r\n    var odd = N & 1;\r\n    var i = 0;\r\n    for (N = N / 2 | 0; N; N = N >>> 1) {\r\n      i++;\r\n    }\r\n\r\n    return 1 << i + 1 + odd;\r\n  };\r\n\r\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\r\n    if (N <= 1) return;\r\n\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var t = rws[i];\r\n\r\n      rws[i] = rws[N - i - 1];\r\n      rws[N - i - 1] = t;\r\n\r\n      t = iws[i];\r\n\r\n      iws[i] = -iws[N - i - 1];\r\n      iws[N - i - 1] = -t;\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\r\n        Math.round(ws[2 * i] / N) +\r\n        carry;\r\n\r\n      ws[i] = w & 0x3ffffff;\r\n\r\n      if (w < 0x4000000) {\r\n        carry = 0;\r\n      } else {\r\n        carry = w / 0x4000000 | 0;\r\n      }\r\n    }\r\n\r\n    return ws;\r\n  };\r\n\r\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < len; i++) {\r\n      carry = carry + (ws[i] | 0);\r\n\r\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\r\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\r\n    }\r\n\r\n    // Pad with zeroes\r\n    for (i = 2 * len; i < N; ++i) {\r\n      rws[i] = 0;\r\n    }\r\n\r\n    assert(carry === 0);\r\n    assert((carry & ~0x1fff) === 0);\r\n  };\r\n\r\n  FFTM.prototype.stub = function stub (N) {\r\n    var ph = new Array(N);\r\n    for (var i = 0; i < N; i++) {\r\n      ph[i] = 0;\r\n    }\r\n\r\n    return ph;\r\n  };\r\n\r\n  FFTM.prototype.mulp = function mulp (x, y, out) {\r\n    var N = 2 * this.guessLen13b(x.length, y.length);\r\n\r\n    var rbt = this.makeRBT(N);\r\n\r\n    var _ = this.stub(N);\r\n\r\n    var rws = new Array(N);\r\n    var rwst = new Array(N);\r\n    var iwst = new Array(N);\r\n\r\n    var nrws = new Array(N);\r\n    var nrwst = new Array(N);\r\n    var niwst = new Array(N);\r\n\r\n    var rmws = out.words;\r\n    rmws.length = N;\r\n\r\n    this.convert13b(x.words, x.length, rws, N);\r\n    this.convert13b(y.words, y.length, nrws, N);\r\n\r\n    this.transform(rws, _, rwst, iwst, N, rbt);\r\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\r\n\r\n    for (var i = 0; i < N; i++) {\r\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\r\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\r\n      rwst[i] = rx;\r\n    }\r\n\r\n    this.conjugate(rwst, iwst, N);\r\n    this.transform(rwst, iwst, rmws, _, N, rbt);\r\n    this.conjugate(rmws, _, N);\r\n    this.normalize13b(rmws, N);\r\n\r\n    out.negative = x.negative ^ y.negative;\r\n    out.length = x.length + y.length;\r\n    return out.strip();\r\n  };\r\n\r\n  // Multiply `this` by `num`\r\n  BN.prototype.mul = function mul (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return this.mulTo(num, out);\r\n  };\r\n\r\n  // Multiply employing FFT\r\n  BN.prototype.mulf = function mulf (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return jumboMulTo(this, num, out);\r\n  };\r\n\r\n  // In-place Multiplication\r\n  BN.prototype.imul = function imul (num) {\r\n    return this.clone().mulTo(num, this);\r\n  };\r\n\r\n  BN.prototype.imuln = function imuln (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n\r\n    // Carry\r\n    var carry = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var w = (this.words[i] | 0) * num;\r\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\r\n      carry >>= 26;\r\n      carry += (w / 0x4000000) | 0;\r\n      // NOTE: lo is 27bit maximum\r\n      carry += lo >>> 26;\r\n      this.words[i] = lo & 0x3ffffff;\r\n    }\r\n\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.muln = function muln (num) {\r\n    return this.clone().imuln(num);\r\n  };\r\n\r\n  // `this` * `this`\r\n  BN.prototype.sqr = function sqr () {\r\n    return this.mul(this);\r\n  };\r\n\r\n  // `this` * `this` in-place\r\n  BN.prototype.isqr = function isqr () {\r\n    return this.imul(this.clone());\r\n  };\r\n\r\n  // Math.pow(`this`, `num`)\r\n  BN.prototype.pow = function pow (num) {\r\n    var w = toBitArray(num);\r\n    if (w.length === 0) return new BN(1);\r\n\r\n    // Skip leading zeroes\r\n    var res = this;\r\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\r\n      if (w[i] !== 0) break;\r\n    }\r\n\r\n    if (++i < w.length) {\r\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\r\n        if (w[i] === 0) continue;\r\n\r\n        res = res.mul(q);\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Shift-left in-place\r\n  BN.prototype.iushln = function iushln (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\r\n    var i;\r\n\r\n    if (r !== 0) {\r\n      var carry = 0;\r\n\r\n      for (i = 0; i < this.length; i++) {\r\n        var newCarry = this.words[i] & carryMask;\r\n        var c = ((this.words[i] | 0) - newCarry) << r;\r\n        this.words[i] = c | carry;\r\n        carry = newCarry >>> (26 - r);\r\n      }\r\n\r\n      if (carry) {\r\n        this.words[i] = carry;\r\n        this.length++;\r\n      }\r\n    }\r\n\r\n    if (s !== 0) {\r\n      for (i = this.length - 1; i >= 0; i--) {\r\n        this.words[i + s] = this.words[i];\r\n      }\r\n\r\n      for (i = 0; i < s; i++) {\r\n        this.words[i] = 0;\r\n      }\r\n\r\n      this.length += s;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ishln = function ishln (bits) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushln(bits);\r\n  };\r\n\r\n  // Shift-right in-place\r\n  // NOTE: `hint` is a lowest bit before trailing zeroes\r\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\r\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var h;\r\n    if (hint) {\r\n      h = (hint - (hint % 26)) / 26;\r\n    } else {\r\n      h = 0;\r\n    }\r\n\r\n    var r = bits % 26;\r\n    var s = Math.min((bits - r) / 26, this.length);\r\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n    var maskedWords = extended;\r\n\r\n    h -= s;\r\n    h = Math.max(0, h);\r\n\r\n    // Extended mode, copy masked part\r\n    if (maskedWords) {\r\n      for (var i = 0; i < s; i++) {\r\n        maskedWords.words[i] = this.words[i];\r\n      }\r\n      maskedWords.length = s;\r\n    }\r\n\r\n    if (s === 0) {\r\n      // No-op, we should not move anything at all\r\n    } else if (this.length > s) {\r\n      this.length -= s;\r\n      for (i = 0; i < this.length; i++) {\r\n        this.words[i] = this.words[i + s];\r\n      }\r\n    } else {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\r\n      var word = this.words[i] | 0;\r\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\r\n      carry = word & mask;\r\n    }\r\n\r\n    // Push carried bits as a mask\r\n    if (maskedWords && carry !== 0) {\r\n      maskedWords.words[maskedWords.length++] = carry;\r\n    }\r\n\r\n    if (this.length === 0) {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushrn(bits, hint, extended);\r\n  };\r\n\r\n  // Shift-left\r\n  BN.prototype.shln = function shln (bits) {\r\n    return this.clone().ishln(bits);\r\n  };\r\n\r\n  BN.prototype.ushln = function ushln (bits) {\r\n    return this.clone().iushln(bits);\r\n  };\r\n\r\n  // Shift-right\r\n  BN.prototype.shrn = function shrn (bits) {\r\n    return this.clone().ishrn(bits);\r\n  };\r\n\r\n  BN.prototype.ushrn = function ushrn (bits) {\r\n    return this.clone().iushrn(bits);\r\n  };\r\n\r\n  // Test if n bit is set\r\n  BN.prototype.testn = function testn (bit) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) return false;\r\n\r\n    // Check bit and return\r\n    var w = this.words[s];\r\n\r\n    return !!(w & q);\r\n  };\r\n\r\n  // Return only lowers bits of number (in-place)\r\n  BN.prototype.imaskn = function imaskn (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n\r\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\r\n\r\n    if (this.length <= s) {\r\n      return this;\r\n    }\r\n\r\n    if (r !== 0) {\r\n      s++;\r\n    }\r\n    this.length = Math.min(s, this.length);\r\n\r\n    if (r !== 0) {\r\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n      this.words[this.length - 1] &= mask;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Return only lowers bits of number\r\n  BN.prototype.maskn = function maskn (bits) {\r\n    return this.clone().imaskn(bits);\r\n  };\r\n\r\n  // Add plain number `num` to `this`\r\n  BN.prototype.iaddn = function iaddn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.isubn(-num);\r\n\r\n    // Possible sign change\r\n    if (this.negative !== 0) {\r\n      if (this.length === 1 && (this.words[0] | 0) < num) {\r\n        this.words[0] = num - (this.words[0] | 0);\r\n        this.negative = 0;\r\n        return this;\r\n      }\r\n\r\n      this.negative = 0;\r\n      this.isubn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    // Add without checks\r\n    return this._iaddn(num);\r\n  };\r\n\r\n  BN.prototype._iaddn = function _iaddn (num) {\r\n    this.words[0] += num;\r\n\r\n    // Carry\r\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\r\n      this.words[i] -= 0x4000000;\r\n      if (i === this.length - 1) {\r\n        this.words[i + 1] = 1;\r\n      } else {\r\n        this.words[i + 1]++;\r\n      }\r\n    }\r\n    this.length = Math.max(this.length, i + 1);\r\n\r\n    return this;\r\n  };\r\n\r\n  // Subtract plain number `num` from `this`\r\n  BN.prototype.isubn = function isubn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.iaddn(-num);\r\n\r\n    if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iaddn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    this.words[0] -= num;\r\n\r\n    if (this.length === 1 && this.words[0] < 0) {\r\n      this.words[0] = -this.words[0];\r\n      this.negative = 1;\r\n    } else {\r\n      // Carry\r\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\r\n        this.words[i] += 0x4000000;\r\n        this.words[i + 1] -= 1;\r\n      }\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.addn = function addn (num) {\r\n    return this.clone().iaddn(num);\r\n  };\r\n\r\n  BN.prototype.subn = function subn (num) {\r\n    return this.clone().isubn(num);\r\n  };\r\n\r\n  BN.prototype.iabs = function iabs () {\r\n    this.negative = 0;\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.abs = function abs () {\r\n    return this.clone().iabs();\r\n  };\r\n\r\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\r\n    var len = num.length + shift;\r\n    var i;\r\n\r\n    this._expand(len);\r\n\r\n    var w;\r\n    var carry = 0;\r\n    for (i = 0; i < num.length; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      var right = (num.words[i] | 0) * mul;\r\n      w -= right & 0x3ffffff;\r\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n    for (; i < this.length - shift; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n\r\n    if (carry === 0) return this.strip();\r\n\r\n    // Subtraction overflow\r\n    assert(carry === -1);\r\n    carry = 0;\r\n    for (i = 0; i < this.length; i++) {\r\n      w = -(this.words[i] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i] = w & 0x3ffffff;\r\n    }\r\n    this.negative = 1;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\r\n    var shift = this.length - num.length;\r\n\r\n    var a = this.clone();\r\n    var b = num;\r\n\r\n    // Normalize\r\n    var bhi = b.words[b.length - 1] | 0;\r\n    var bhiBits = this._countBits(bhi);\r\n    shift = 26 - bhiBits;\r\n    if (shift !== 0) {\r\n      b = b.ushln(shift);\r\n      a.iushln(shift);\r\n      bhi = b.words[b.length - 1] | 0;\r\n    }\r\n\r\n    // Initialize quotient\r\n    var m = a.length - b.length;\r\n    var q;\r\n\r\n    if (mode !== 'mod') {\r\n      q = new BN(null);\r\n      q.length = m + 1;\r\n      q.words = new Array(q.length);\r\n      for (var i = 0; i < q.length; i++) {\r\n        q.words[i] = 0;\r\n      }\r\n    }\r\n\r\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\r\n    if (diff.negative === 0) {\r\n      a = diff;\r\n      if (q) {\r\n        q.words[m] = 1;\r\n      }\r\n    }\r\n\r\n    for (var j = m - 1; j >= 0; j--) {\r\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\r\n        (a.words[b.length + j - 1] | 0);\r\n\r\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\r\n      // (0x7ffffff)\r\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\r\n\r\n      a._ishlnsubmul(b, qj, j);\r\n      while (a.negative !== 0) {\r\n        qj--;\r\n        a.negative = 0;\r\n        a._ishlnsubmul(b, 1, j);\r\n        if (!a.isZero()) {\r\n          a.negative ^= 1;\r\n        }\r\n      }\r\n      if (q) {\r\n        q.words[j] = qj;\r\n      }\r\n    }\r\n    if (q) {\r\n      q.strip();\r\n    }\r\n    a.strip();\r\n\r\n    // Denormalize\r\n    if (mode !== 'div' && shift !== 0) {\r\n      a.iushrn(shift);\r\n    }\r\n\r\n    return {\r\n      div: q || null,\r\n      mod: a\r\n    };\r\n  };\r\n\r\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\r\n  //       to `div` to request div only, or be absent to\r\n  //       request both div & mod\r\n  //       2) `positive` is true if unsigned mod is requested\r\n  BN.prototype.divmod = function divmod (num, mode, positive) {\r\n    assert(!num.isZero());\r\n\r\n    if (this.isZero()) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: new BN(0)\r\n      };\r\n    }\r\n\r\n    var div, mod, res;\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      res = this.neg().divmod(num, mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.iadd(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    if (this.negative === 0 && num.negative !== 0) {\r\n      res = this.divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: res.mod\r\n      };\r\n    }\r\n\r\n    if ((this.negative & num.negative) !== 0) {\r\n      res = this.neg().divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.isub(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: res.div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    // Both numbers are positive at this point\r\n\r\n    // Strip both numbers to approximate shift value\r\n    if (num.length > this.length || this.cmp(num) < 0) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: this\r\n      };\r\n    }\r\n\r\n    // Very short reduction\r\n    if (num.length === 1) {\r\n      if (mode === 'div') {\r\n        return {\r\n          div: this.divn(num.words[0]),\r\n          mod: null\r\n        };\r\n      }\r\n\r\n      if (mode === 'mod') {\r\n        return {\r\n          div: null,\r\n          mod: new BN(this.modn(num.words[0]))\r\n        };\r\n      }\r\n\r\n      return {\r\n        div: this.divn(num.words[0]),\r\n        mod: new BN(this.modn(num.words[0]))\r\n      };\r\n    }\r\n\r\n    return this._wordDiv(num, mode);\r\n  };\r\n\r\n  // Find `this` / `num`\r\n  BN.prototype.div = function div (num) {\r\n    return this.divmod(num, 'div', false).div;\r\n  };\r\n\r\n  // Find `this` % `num`\r\n  BN.prototype.mod = function mod (num) {\r\n    return this.divmod(num, 'mod', false).mod;\r\n  };\r\n\r\n  BN.prototype.umod = function umod (num) {\r\n    return this.divmod(num, 'mod', true).mod;\r\n  };\r\n\r\n  // Find Round(`this` / `num`)\r\n  BN.prototype.divRound = function divRound (num) {\r\n    var dm = this.divmod(num);\r\n\r\n    // Fast case - exact division\r\n    if (dm.mod.isZero()) return dm.div;\r\n\r\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\r\n\r\n    var half = num.ushrn(1);\r\n    var r2 = num.andln(1);\r\n    var cmp = mod.cmp(half);\r\n\r\n    // Round down\r\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\r\n\r\n    // Round up\r\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\r\n  };\r\n\r\n  BN.prototype.modn = function modn (num) {\r\n    assert(num <= 0x3ffffff);\r\n    var p = (1 << 26) % num;\r\n\r\n    var acc = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      acc = (p * acc + (this.words[i] | 0)) % num;\r\n    }\r\n\r\n    return acc;\r\n  };\r\n\r\n  // In-place division by number\r\n  BN.prototype.idivn = function idivn (num) {\r\n    assert(num <= 0x3ffffff);\r\n\r\n    var carry = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var w = (this.words[i] | 0) + carry * 0x4000000;\r\n      this.words[i] = (w / num) | 0;\r\n      carry = w % num;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.divn = function divn (num) {\r\n    return this.clone().idivn(num);\r\n  };\r\n\r\n  BN.prototype.egcd = function egcd (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var x = this;\r\n    var y = p.clone();\r\n\r\n    if (x.negative !== 0) {\r\n      x = x.umod(p);\r\n    } else {\r\n      x = x.clone();\r\n    }\r\n\r\n    // A * x + B * y = x\r\n    var A = new BN(1);\r\n    var B = new BN(0);\r\n\r\n    // C * x + D * y = y\r\n    var C = new BN(0);\r\n    var D = new BN(1);\r\n\r\n    var g = 0;\r\n\r\n    while (x.isEven() && y.isEven()) {\r\n      x.iushrn(1);\r\n      y.iushrn(1);\r\n      ++g;\r\n    }\r\n\r\n    var yp = y.clone();\r\n    var xp = x.clone();\r\n\r\n    while (!x.isZero()) {\r\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        x.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (A.isOdd() || B.isOdd()) {\r\n            A.iadd(yp);\r\n            B.isub(xp);\r\n          }\r\n\r\n          A.iushrn(1);\r\n          B.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        y.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (C.isOdd() || D.isOdd()) {\r\n            C.iadd(yp);\r\n            D.isub(xp);\r\n          }\r\n\r\n          C.iushrn(1);\r\n          D.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (x.cmp(y) >= 0) {\r\n        x.isub(y);\r\n        A.isub(C);\r\n        B.isub(D);\r\n      } else {\r\n        y.isub(x);\r\n        C.isub(A);\r\n        D.isub(B);\r\n      }\r\n    }\r\n\r\n    return {\r\n      a: C,\r\n      b: D,\r\n      gcd: y.iushln(g)\r\n    };\r\n  };\r\n\r\n  // This is reduced incarnation of the binary EEA\r\n  // above, designated to invert members of the\r\n  // _prime_ fields F(p) at a maximal speed\r\n  BN.prototype._invmp = function _invmp (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var a = this;\r\n    var b = p.clone();\r\n\r\n    if (a.negative !== 0) {\r\n      a = a.umod(p);\r\n    } else {\r\n      a = a.clone();\r\n    }\r\n\r\n    var x1 = new BN(1);\r\n    var x2 = new BN(0);\r\n\r\n    var delta = b.clone();\r\n\r\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\r\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        a.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (x1.isOdd()) {\r\n            x1.iadd(delta);\r\n          }\r\n\r\n          x1.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        b.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (x2.isOdd()) {\r\n            x2.iadd(delta);\r\n          }\r\n\r\n          x2.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (a.cmp(b) >= 0) {\r\n        a.isub(b);\r\n        x1.isub(x2);\r\n      } else {\r\n        b.isub(a);\r\n        x2.isub(x1);\r\n      }\r\n    }\r\n\r\n    var res;\r\n    if (a.cmpn(1) === 0) {\r\n      res = x1;\r\n    } else {\r\n      res = x2;\r\n    }\r\n\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(p);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gcd = function gcd (num) {\r\n    if (this.isZero()) return num.abs();\r\n    if (num.isZero()) return this.abs();\r\n\r\n    var a = this.clone();\r\n    var b = num.clone();\r\n    a.negative = 0;\r\n    b.negative = 0;\r\n\r\n    // Remove common factor of two\r\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\r\n      a.iushrn(1);\r\n      b.iushrn(1);\r\n    }\r\n\r\n    do {\r\n      while (a.isEven()) {\r\n        a.iushrn(1);\r\n      }\r\n      while (b.isEven()) {\r\n        b.iushrn(1);\r\n      }\r\n\r\n      var r = a.cmp(b);\r\n      if (r < 0) {\r\n        // Swap `a` and `b` to make `a` always bigger than `b`\r\n        var t = a;\r\n        a = b;\r\n        b = t;\r\n      } else if (r === 0 || b.cmpn(1) === 0) {\r\n        break;\r\n      }\r\n\r\n      a.isub(b);\r\n    } while (true);\r\n\r\n    return b.iushln(shift);\r\n  };\r\n\r\n  // Invert number in the field F(num)\r\n  BN.prototype.invm = function invm (num) {\r\n    return this.egcd(num).a.umod(num);\r\n  };\r\n\r\n  BN.prototype.isEven = function isEven () {\r\n    return (this.words[0] & 1) === 0;\r\n  };\r\n\r\n  BN.prototype.isOdd = function isOdd () {\r\n    return (this.words[0] & 1) === 1;\r\n  };\r\n\r\n  // And first word and num\r\n  BN.prototype.andln = function andln (num) {\r\n    return this.words[0] & num;\r\n  };\r\n\r\n  // Increment at the bit position in-line\r\n  BN.prototype.bincn = function bincn (bit) {\r\n    assert(typeof bit === 'number');\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) {\r\n      this._expand(s + 1);\r\n      this.words[s] |= q;\r\n      return this;\r\n    }\r\n\r\n    // Add bit and propagate, if needed\r\n    var carry = q;\r\n    for (var i = s; carry !== 0 && i < this.length; i++) {\r\n      var w = this.words[i] | 0;\r\n      w += carry;\r\n      carry = w >>> 26;\r\n      w &= 0x3ffffff;\r\n      this.words[i] = w;\r\n    }\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.isZero = function isZero () {\r\n    return this.length === 1 && this.words[0] === 0;\r\n  };\r\n\r\n  BN.prototype.cmpn = function cmpn (num) {\r\n    var negative = num < 0;\r\n\r\n    if (this.negative !== 0 && !negative) return -1;\r\n    if (this.negative === 0 && negative) return 1;\r\n\r\n    this.strip();\r\n\r\n    var res;\r\n    if (this.length > 1) {\r\n      res = 1;\r\n    } else {\r\n      if (negative) {\r\n        num = -num;\r\n      }\r\n\r\n      assert(num <= 0x3ffffff, 'Number is too big');\r\n\r\n      var w = this.words[0] | 0;\r\n      res = w === num ? 0 : w < num ? -1 : 1;\r\n    }\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Compare two numbers and return:\r\n  // 1 - if `this` > `num`\r\n  // 0 - if `this` == `num`\r\n  // -1 - if `this` < `num`\r\n  BN.prototype.cmp = function cmp (num) {\r\n    if (this.negative !== 0 && num.negative === 0) return -1;\r\n    if (this.negative === 0 && num.negative !== 0) return 1;\r\n\r\n    var res = this.ucmp(num);\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Unsigned comparison\r\n  BN.prototype.ucmp = function ucmp (num) {\r\n    // At this point both numbers have the same sign\r\n    if (this.length > num.length) return 1;\r\n    if (this.length < num.length) return -1;\r\n\r\n    var res = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var a = this.words[i] | 0;\r\n      var b = num.words[i] | 0;\r\n\r\n      if (a === b) continue;\r\n      if (a < b) {\r\n        res = -1;\r\n      } else if (a > b) {\r\n        res = 1;\r\n      }\r\n      break;\r\n    }\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gtn = function gtn (num) {\r\n    return this.cmpn(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gt = function gt (num) {\r\n    return this.cmp(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gten = function gten (num) {\r\n    return this.cmpn(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.gte = function gte (num) {\r\n    return this.cmp(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.ltn = function ltn (num) {\r\n    return this.cmpn(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lt = function lt (num) {\r\n    return this.cmp(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lten = function lten (num) {\r\n    return this.cmpn(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.lte = function lte (num) {\r\n    return this.cmp(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.eqn = function eqn (num) {\r\n    return this.cmpn(num) === 0;\r\n  };\r\n\r\n  BN.prototype.eq = function eq (num) {\r\n    return this.cmp(num) === 0;\r\n  };\r\n\r\n  //\r\n  // A reduce context, could be using montgomery or something better, depending\r\n  // on the `m` itself.\r\n  //\r\n  BN.red = function red (num) {\r\n    return new Red(num);\r\n  };\r\n\r\n  BN.prototype.toRed = function toRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    assert(this.negative === 0, 'red works only with positives');\r\n    return ctx.convertTo(this)._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.fromRed = function fromRed () {\r\n    assert(this.red, 'fromRed works only with numbers in reduction context');\r\n    return this.red.convertFrom(this);\r\n  };\r\n\r\n  BN.prototype._forceRed = function _forceRed (ctx) {\r\n    this.red = ctx;\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.forceRed = function forceRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    return this._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.redAdd = function redAdd (num) {\r\n    assert(this.red, 'redAdd works only with red numbers');\r\n    return this.red.add(this, num);\r\n  };\r\n\r\n  BN.prototype.redIAdd = function redIAdd (num) {\r\n    assert(this.red, 'redIAdd works only with red numbers');\r\n    return this.red.iadd(this, num);\r\n  };\r\n\r\n  BN.prototype.redSub = function redSub (num) {\r\n    assert(this.red, 'redSub works only with red numbers');\r\n    return this.red.sub(this, num);\r\n  };\r\n\r\n  BN.prototype.redISub = function redISub (num) {\r\n    assert(this.red, 'redISub works only with red numbers');\r\n    return this.red.isub(this, num);\r\n  };\r\n\r\n  BN.prototype.redShl = function redShl (num) {\r\n    assert(this.red, 'redShl works only with red numbers');\r\n    return this.red.shl(this, num);\r\n  };\r\n\r\n  BN.prototype.redMul = function redMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.mul(this, num);\r\n  };\r\n\r\n  BN.prototype.redIMul = function redIMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.imul(this, num);\r\n  };\r\n\r\n  BN.prototype.redSqr = function redSqr () {\r\n    assert(this.red, 'redSqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqr(this);\r\n  };\r\n\r\n  BN.prototype.redISqr = function redISqr () {\r\n    assert(this.red, 'redISqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.isqr(this);\r\n  };\r\n\r\n  // Square root over p\r\n  BN.prototype.redSqrt = function redSqrt () {\r\n    assert(this.red, 'redSqrt works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqrt(this);\r\n  };\r\n\r\n  BN.prototype.redInvm = function redInvm () {\r\n    assert(this.red, 'redInvm works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.invm(this);\r\n  };\r\n\r\n  // Return negative clone of `this` % `red modulo`\r\n  BN.prototype.redNeg = function redNeg () {\r\n    assert(this.red, 'redNeg works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.neg(this);\r\n  };\r\n\r\n  BN.prototype.redPow = function redPow (num) {\r\n    assert(this.red && !num.red, 'redPow(normalNum)');\r\n    this.red._verify1(this);\r\n    return this.red.pow(this, num);\r\n  };\r\n\r\n  // Prime numbers with efficient reduction\r\n  var primes = {\r\n    k256: null,\r\n    p224: null,\r\n    p192: null,\r\n    p25519: null\r\n  };\r\n\r\n  // Pseudo-Mersenne prime\r\n  function MPrime (name, p) {\r\n    // P = 2 ^ N - K\r\n    this.name = name;\r\n    this.p = new BN(p, 16);\r\n    this.n = this.p.bitLength();\r\n    this.k = new BN(1).iushln(this.n).isub(this.p);\r\n\r\n    this.tmp = this._tmp();\r\n  }\r\n\r\n  MPrime.prototype._tmp = function _tmp () {\r\n    var tmp = new BN(null);\r\n    tmp.words = new Array(Math.ceil(this.n / 13));\r\n    return tmp;\r\n  };\r\n\r\n  MPrime.prototype.ireduce = function ireduce (num) {\r\n    // Assumes that `num` is less than `P^2`\r\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\r\n    var r = num;\r\n    var rlen;\r\n\r\n    do {\r\n      this.split(r, this.tmp);\r\n      r = this.imulK(r);\r\n      r = r.iadd(this.tmp);\r\n      rlen = r.bitLength();\r\n    } while (rlen > this.n);\r\n\r\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\r\n    if (cmp === 0) {\r\n      r.words[0] = 0;\r\n      r.length = 1;\r\n    } else if (cmp > 0) {\r\n      r.isub(this.p);\r\n    } else {\r\n      if (r.strip !== undefined) {\r\n        // r is BN v4 instance\r\n        r.strip();\r\n      } else {\r\n        // r is BN v5 instance\r\n        r._strip();\r\n      }\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  MPrime.prototype.split = function split (input, out) {\r\n    input.iushrn(this.n, 0, out);\r\n  };\r\n\r\n  MPrime.prototype.imulK = function imulK (num) {\r\n    return num.imul(this.k);\r\n  };\r\n\r\n  function K256 () {\r\n    MPrime.call(\r\n      this,\r\n      'k256',\r\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\r\n  }\r\n  inherits(K256, MPrime);\r\n\r\n  K256.prototype.split = function split (input, output) {\r\n    // 256 = 9 * 26 + 22\r\n    var mask = 0x3fffff;\r\n\r\n    var outLen = Math.min(input.length, 9);\r\n    for (var i = 0; i < outLen; i++) {\r\n      output.words[i] = input.words[i];\r\n    }\r\n    output.length = outLen;\r\n\r\n    if (input.length <= 9) {\r\n      input.words[0] = 0;\r\n      input.length = 1;\r\n      return;\r\n    }\r\n\r\n    // Shift by 9 limbs\r\n    var prev = input.words[9];\r\n    output.words[output.length++] = prev & mask;\r\n\r\n    for (i = 10; i < input.length; i++) {\r\n      var next = input.words[i] | 0;\r\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\r\n      prev = next;\r\n    }\r\n    prev >>>= 22;\r\n    input.words[i - 10] = prev;\r\n    if (prev === 0 && input.length > 10) {\r\n      input.length -= 10;\r\n    } else {\r\n      input.length -= 9;\r\n    }\r\n  };\r\n\r\n  K256.prototype.imulK = function imulK (num) {\r\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\r\n    num.words[num.length] = 0;\r\n    num.words[num.length + 1] = 0;\r\n    num.length += 2;\r\n\r\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\r\n    var lo = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var w = num.words[i] | 0;\r\n      lo += w * 0x3d1;\r\n      num.words[i] = lo & 0x3ffffff;\r\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\r\n    }\r\n\r\n    // Fast length reduction\r\n    if (num.words[num.length - 1] === 0) {\r\n      num.length--;\r\n      if (num.words[num.length - 1] === 0) {\r\n        num.length--;\r\n      }\r\n    }\r\n    return num;\r\n  };\r\n\r\n  function P224 () {\r\n    MPrime.call(\r\n      this,\r\n      'p224',\r\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\r\n  }\r\n  inherits(P224, MPrime);\r\n\r\n  function P192 () {\r\n    MPrime.call(\r\n      this,\r\n      'p192',\r\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\r\n  }\r\n  inherits(P192, MPrime);\r\n\r\n  function P25519 () {\r\n    // 2 ^ 255 - 19\r\n    MPrime.call(\r\n      this,\r\n      '25519',\r\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\r\n  }\r\n  inherits(P25519, MPrime);\r\n\r\n  P25519.prototype.imulK = function imulK (num) {\r\n    // K = 0x13\r\n    var carry = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var hi = (num.words[i] | 0) * 0x13 + carry;\r\n      var lo = hi & 0x3ffffff;\r\n      hi >>>= 26;\r\n\r\n      num.words[i] = lo;\r\n      carry = hi;\r\n    }\r\n    if (carry !== 0) {\r\n      num.words[num.length++] = carry;\r\n    }\r\n    return num;\r\n  };\r\n\r\n  // Exported mostly for testing purposes, use plain name instead\r\n  BN._prime = function prime (name) {\r\n    // Cached version of prime\r\n    if (primes[name]) return primes[name];\r\n\r\n    var prime;\r\n    if (name === 'k256') {\r\n      prime = new K256();\r\n    } else if (name === 'p224') {\r\n      prime = new P224();\r\n    } else if (name === 'p192') {\r\n      prime = new P192();\r\n    } else if (name === 'p25519') {\r\n      prime = new P25519();\r\n    } else {\r\n      throw new Error('Unknown prime ' + name);\r\n    }\r\n    primes[name] = prime;\r\n\r\n    return prime;\r\n  };\r\n\r\n  //\r\n  // Base reduction engine\r\n  //\r\n  function Red (m) {\r\n    if (typeof m === 'string') {\r\n      var prime = BN._prime(m);\r\n      this.m = prime.p;\r\n      this.prime = prime;\r\n    } else {\r\n      assert(m.gtn(1), 'modulus must be greater than 1');\r\n      this.m = m;\r\n      this.prime = null;\r\n    }\r\n  }\r\n\r\n  Red.prototype._verify1 = function _verify1 (a) {\r\n    assert(a.negative === 0, 'red works only with positives');\r\n    assert(a.red, 'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype._verify2 = function _verify2 (a, b) {\r\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\r\n    assert(a.red && a.red === b.red,\r\n      'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype.imod = function imod (a) {\r\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\r\n    return a.umod(this.m)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.neg = function neg (a) {\r\n    if (a.isZero()) {\r\n      return a.clone();\r\n    }\r\n\r\n    return this.m.sub(a)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.add = function add (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.add(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.iadd = function iadd (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.iadd(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.sub = function sub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.sub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.isub = function isub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.isub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.shl = function shl (a, num) {\r\n    this._verify1(a);\r\n    return this.imod(a.ushln(num));\r\n  };\r\n\r\n  Red.prototype.imul = function imul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.imul(b));\r\n  };\r\n\r\n  Red.prototype.mul = function mul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.mul(b));\r\n  };\r\n\r\n  Red.prototype.isqr = function isqr (a) {\r\n    return this.imul(a, a.clone());\r\n  };\r\n\r\n  Red.prototype.sqr = function sqr (a) {\r\n    return this.mul(a, a);\r\n  };\r\n\r\n  Red.prototype.sqrt = function sqrt (a) {\r\n    if (a.isZero()) return a.clone();\r\n\r\n    var mod3 = this.m.andln(3);\r\n    assert(mod3 % 2 === 1);\r\n\r\n    // Fast case\r\n    if (mod3 === 3) {\r\n      var pow = this.m.add(new BN(1)).iushrn(2);\r\n      return this.pow(a, pow);\r\n    }\r\n\r\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\r\n    //\r\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\r\n    var q = this.m.subn(1);\r\n    var s = 0;\r\n    while (!q.isZero() && q.andln(1) === 0) {\r\n      s++;\r\n      q.iushrn(1);\r\n    }\r\n    assert(!q.isZero());\r\n\r\n    var one = new BN(1).toRed(this);\r\n    var nOne = one.redNeg();\r\n\r\n    // Find quadratic non-residue\r\n    // NOTE: Max is such because of generalized Riemann hypothesis.\r\n    var lpow = this.m.subn(1).iushrn(1);\r\n    var z = this.m.bitLength();\r\n    z = new BN(2 * z * z).toRed(this);\r\n\r\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\r\n      z.redIAdd(nOne);\r\n    }\r\n\r\n    var c = this.pow(z, q);\r\n    var r = this.pow(a, q.addn(1).iushrn(1));\r\n    var t = this.pow(a, q);\r\n    var m = s;\r\n    while (t.cmp(one) !== 0) {\r\n      var tmp = t;\r\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\r\n        tmp = tmp.redSqr();\r\n      }\r\n      assert(i < m);\r\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\r\n\r\n      r = r.redMul(b);\r\n      c = b.redSqr();\r\n      t = t.redMul(c);\r\n      m = i;\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  Red.prototype.invm = function invm (a) {\r\n    var inv = a._invmp(this.m);\r\n    if (inv.negative !== 0) {\r\n      inv.negative = 0;\r\n      return this.imod(inv).redNeg();\r\n    } else {\r\n      return this.imod(inv);\r\n    }\r\n  };\r\n\r\n  Red.prototype.pow = function pow (a, num) {\r\n    if (num.isZero()) return new BN(1).toRed(this);\r\n    if (num.cmpn(1) === 0) return a.clone();\r\n\r\n    var windowSize = 4;\r\n    var wnd = new Array(1 << windowSize);\r\n    wnd[0] = new BN(1).toRed(this);\r\n    wnd[1] = a;\r\n    for (var i = 2; i < wnd.length; i++) {\r\n      wnd[i] = this.mul(wnd[i - 1], a);\r\n    }\r\n\r\n    var res = wnd[0];\r\n    var current = 0;\r\n    var currentLen = 0;\r\n    var start = num.bitLength() % 26;\r\n    if (start === 0) {\r\n      start = 26;\r\n    }\r\n\r\n    for (i = num.length - 1; i >= 0; i--) {\r\n      var word = num.words[i];\r\n      for (var j = start - 1; j >= 0; j--) {\r\n        var bit = (word >> j) & 1;\r\n        if (res !== wnd[0]) {\r\n          res = this.sqr(res);\r\n        }\r\n\r\n        if (bit === 0 && current === 0) {\r\n          currentLen = 0;\r\n          continue;\r\n        }\r\n\r\n        current <<= 1;\r\n        current |= bit;\r\n        currentLen++;\r\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\r\n\r\n        res = this.mul(res, wnd[current]);\r\n        currentLen = 0;\r\n        current = 0;\r\n      }\r\n      start = 26;\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.convertTo = function convertTo (num) {\r\n    var r = num.umod(this.m);\r\n\r\n    return r === num ? r.clone() : r;\r\n  };\r\n\r\n  Red.prototype.convertFrom = function convertFrom (num) {\r\n    var res = num.clone();\r\n    res.red = null;\r\n    return res;\r\n  };\r\n\r\n  //\r\n  // Montgomery method engine\r\n  //\r\n\r\n  BN.mont = function mont (num) {\r\n    return new Mont(num);\r\n  };\r\n\r\n  function Mont (m) {\r\n    Red.call(this, m);\r\n\r\n    this.shift = this.m.bitLength();\r\n    if (this.shift % 26 !== 0) {\r\n      this.shift += 26 - (this.shift % 26);\r\n    }\r\n\r\n    this.r = new BN(1).iushln(this.shift);\r\n    this.r2 = this.imod(this.r.sqr());\r\n    this.rinv = this.r._invmp(this.m);\r\n\r\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\r\n    this.minv = this.minv.umod(this.r);\r\n    this.minv = this.r.sub(this.minv);\r\n  }\r\n  inherits(Mont, Red);\r\n\r\n  Mont.prototype.convertTo = function convertTo (num) {\r\n    return this.imod(num.ushln(this.shift));\r\n  };\r\n\r\n  Mont.prototype.convertFrom = function convertFrom (num) {\r\n    var r = this.imod(num.mul(this.rinv));\r\n    r.red = null;\r\n    return r;\r\n  };\r\n\r\n  Mont.prototype.imul = function imul (a, b) {\r\n    if (a.isZero() || b.isZero()) {\r\n      a.words[0] = 0;\r\n      a.length = 1;\r\n      return a;\r\n    }\r\n\r\n    var t = a.imul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.mul = function mul (a, b) {\r\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\r\n\r\n    var t = a.mul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.invm = function invm (a) {\r\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\r\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\r\n    return res._forceRed(this);\r\n  };\r\n})( false || module, this);\r\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/node_modules/bn.js/lib/bn.js?");

/***/ }),

/***/ "./node_modules/elliptic/package.json":
/*!********************************************!*\
  !*** ./node_modules/elliptic/package.json ***!
  \********************************************/
/*! exports provided: _from, _id, _inBundle, _integrity, _location, _phantomChildren, _requested, _requiredBy, _resolved, _shasum, _spec, _where, author, bugs, bundleDependencies, dependencies, deprecated, description, devDependencies, files, homepage, keywords, license, main, name, repository, scripts, version, default */
/***/ (function(module) {

eval("module.exports = JSON.parse(\"{\\\"_from\\\":\\\"elliptic@^6.5.3\\\",\\\"_id\\\":\\\"elliptic@6.5.3\\\",\\\"_inBundle\\\":false,\\\"_integrity\\\":\\\"sha512-IMqzv5wNQf+E6aHeIqATs0tOLeOTwj1QKbRcS3jBbYkl5oLAserA8yJTT7/VyHUYG91PRmPyeQDObKLPpeS4dw==\\\",\\\"_location\\\":\\\"/elliptic\\\",\\\"_phantomChildren\\\":{},\\\"_requested\\\":{\\\"type\\\":\\\"range\\\",\\\"registry\\\":true,\\\"raw\\\":\\\"elliptic@^6.5.3\\\",\\\"name\\\":\\\"elliptic\\\",\\\"escapedName\\\":\\\"elliptic\\\",\\\"rawSpec\\\":\\\"^6.5.3\\\",\\\"saveSpec\\\":null,\\\"fetchSpec\\\":\\\"^6.5.3\\\"},\\\"_requiredBy\\\":[\\\"/browserify-sign\\\",\\\"/create-ecdh\\\"],\\\"_resolved\\\":\\\"https://registry.npmjs.org/elliptic/-/elliptic-6.5.3.tgz\\\",\\\"_shasum\\\":\\\"cb59eb2efdaf73a0bd78ccd7015a62ad6e0f93d6\\\",\\\"_spec\\\":\\\"elliptic@^6.5.3\\\",\\\"_where\\\":\\\"G:\\\\\\\\YandexDisk\\\\\\\\sadrapid\\\\\\\\Construct 3\\\\\\\\Kongclicker 2\\\\\\\\source\\\\\\\\node_modules\\\\\\\\browserify-sign\\\",\\\"author\\\":{\\\"name\\\":\\\"Fedor Indutny\\\",\\\"email\\\":\\\"fedor@indutny.com\\\"},\\\"bugs\\\":{\\\"url\\\":\\\"https://github.com/indutny/elliptic/issues\\\"},\\\"bundleDependencies\\\":false,\\\"dependencies\\\":{\\\"bn.js\\\":\\\"^4.4.0\\\",\\\"brorand\\\":\\\"^1.0.1\\\",\\\"hash.js\\\":\\\"^1.0.0\\\",\\\"hmac-drbg\\\":\\\"^1.0.0\\\",\\\"inherits\\\":\\\"^2.0.1\\\",\\\"minimalistic-assert\\\":\\\"^1.0.0\\\",\\\"minimalistic-crypto-utils\\\":\\\"^1.0.0\\\"},\\\"deprecated\\\":false,\\\"description\\\":\\\"EC cryptography\\\",\\\"devDependencies\\\":{\\\"brfs\\\":\\\"^1.4.3\\\",\\\"coveralls\\\":\\\"^3.0.8\\\",\\\"grunt\\\":\\\"^1.0.4\\\",\\\"grunt-browserify\\\":\\\"^5.0.0\\\",\\\"grunt-cli\\\":\\\"^1.2.0\\\",\\\"grunt-contrib-connect\\\":\\\"^1.0.0\\\",\\\"grunt-contrib-copy\\\":\\\"^1.0.0\\\",\\\"grunt-contrib-uglify\\\":\\\"^1.0.1\\\",\\\"grunt-mocha-istanbul\\\":\\\"^3.0.1\\\",\\\"grunt-saucelabs\\\":\\\"^9.0.1\\\",\\\"istanbul\\\":\\\"^0.4.2\\\",\\\"jscs\\\":\\\"^3.0.7\\\",\\\"jshint\\\":\\\"^2.10.3\\\",\\\"mocha\\\":\\\"^6.2.2\\\"},\\\"files\\\":[\\\"lib\\\"],\\\"homepage\\\":\\\"https://github.com/indutny/elliptic\\\",\\\"keywords\\\":[\\\"EC\\\",\\\"Elliptic\\\",\\\"curve\\\",\\\"Cryptography\\\"],\\\"license\\\":\\\"MIT\\\",\\\"main\\\":\\\"lib/elliptic.js\\\",\\\"name\\\":\\\"elliptic\\\",\\\"repository\\\":{\\\"type\\\":\\\"git\\\",\\\"url\\\":\\\"git+ssh://git@github.com/indutny/elliptic.git\\\"},\\\"scripts\\\":{\\\"jscs\\\":\\\"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js\\\",\\\"jshint\\\":\\\"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js\\\",\\\"lint\\\":\\\"npm run jscs && npm run jshint\\\",\\\"test\\\":\\\"npm run lint && npm run unit\\\",\\\"unit\\\":\\\"istanbul test _mocha --reporter=spec test/index.js\\\",\\\"version\\\":\\\"grunt dist && git add dist/\\\"},\\\"version\\\":\\\"6.5.3\\\"}\");\n\n//# sourceURL=webpack://Game/./node_modules/elliptic/package.json?");

/***/ }),

/***/ "./node_modules/events/events.js":
/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function eventListener() {\n      if (errorListener !== undefined) {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n    var errorListener;\n\n    // Adding an error listener is not optional because\n    // if an error is thrown on an event emitter we cannot\n    // guarantee that the actual event we are waiting will\n    // be fired. The result could be a silent way to create\n    // memory or file descriptor leaks, which is something\n    // we should avoid.\n    if (name !== 'error') {\n      errorListener = function errorListener(err) {\n        emitter.removeListener(name, eventListener);\n        reject(err);\n      };\n\n      emitter.once('error', errorListener);\n    }\n\n    emitter.once(name, eventListener);\n  });\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/events/events.js?");

/***/ }),

/***/ "./node_modules/evp_bytestokey/index.js":
/*!**********************************************!*\
  !*** ./node_modules/evp_bytestokey/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\nvar MD5 = __webpack_require__(/*! md5.js */ \"./node_modules/md5.js/index.js\")\n\n/* eslint-disable camelcase */\nfunction EVP_BytesToKey (password, salt, keyBits, ivLen) {\n  if (!Buffer.isBuffer(password)) password = Buffer.from(password, 'binary')\n  if (salt) {\n    if (!Buffer.isBuffer(salt)) salt = Buffer.from(salt, 'binary')\n    if (salt.length !== 8) throw new RangeError('salt should be Buffer with 8 byte length')\n  }\n\n  var keyLen = keyBits / 8\n  var key = Buffer.alloc(keyLen)\n  var iv = Buffer.alloc(ivLen || 0)\n  var tmp = Buffer.alloc(0)\n\n  while (keyLen > 0 || ivLen > 0) {\n    var hash = new MD5()\n    hash.update(tmp)\n    hash.update(password)\n    if (salt) hash.update(salt)\n    tmp = hash.digest()\n\n    var used = 0\n\n    if (keyLen > 0) {\n      var keyStart = key.length - keyLen\n      used = Math.min(keyLen, tmp.length)\n      tmp.copy(key, keyStart, 0, used)\n      keyLen -= used\n    }\n\n    if (used < tmp.length && ivLen > 0) {\n      var ivStart = iv.length - ivLen\n      var length = Math.min(ivLen, tmp.length - used)\n      tmp.copy(iv, ivStart, used, used + length)\n      ivLen -= length\n    }\n  }\n\n  tmp.fill(0)\n  return { key: key, iv: iv }\n}\n\nmodule.exports = EVP_BytesToKey\n\n\n//# sourceURL=webpack://Game/./node_modules/evp_bytestokey/index.js?");

/***/ }),

/***/ "./node_modules/hash-base/index.js":
/*!*****************************************!*\
  !*** ./node_modules/hash-base/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/hash-base/node_modules/safe-buffer/index.js\").Buffer\nvar Transform = __webpack_require__(/*! readable-stream */ \"./node_modules/hash-base/node_modules/readable-stream/readable-browser.js\").Transform\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\n\nfunction throwIfNotStringOrBuffer (val, prefix) {\n  if (!Buffer.isBuffer(val) && typeof val !== 'string') {\n    throw new TypeError(prefix + ' must be a string or a buffer')\n  }\n}\n\nfunction HashBase (blockSize) {\n  Transform.call(this)\n\n  this._block = Buffer.allocUnsafe(blockSize)\n  this._blockSize = blockSize\n  this._blockOffset = 0\n  this._length = [0, 0, 0, 0]\n\n  this._finalized = false\n}\n\ninherits(HashBase, Transform)\n\nHashBase.prototype._transform = function (chunk, encoding, callback) {\n  var error = null\n  try {\n    this.update(chunk, encoding)\n  } catch (err) {\n    error = err\n  }\n\n  callback(error)\n}\n\nHashBase.prototype._flush = function (callback) {\n  var error = null\n  try {\n    this.push(this.digest())\n  } catch (err) {\n    error = err\n  }\n\n  callback(error)\n}\n\nHashBase.prototype.update = function (data, encoding) {\n  throwIfNotStringOrBuffer(data, 'Data')\n  if (this._finalized) throw new Error('Digest already called')\n  if (!Buffer.isBuffer(data)) data = Buffer.from(data, encoding)\n\n  // consume data\n  var block = this._block\n  var offset = 0\n  while (this._blockOffset + data.length - offset >= this._blockSize) {\n    for (var i = this._blockOffset; i < this._blockSize;) block[i++] = data[offset++]\n    this._update()\n    this._blockOffset = 0\n  }\n  while (offset < data.length) block[this._blockOffset++] = data[offset++]\n\n  // update length\n  for (var j = 0, carry = data.length * 8; carry > 0; ++j) {\n    this._length[j] += carry\n    carry = (this._length[j] / 0x0100000000) | 0\n    if (carry > 0) this._length[j] -= 0x0100000000 * carry\n  }\n\n  return this\n}\n\nHashBase.prototype._update = function () {\n  throw new Error('_update is not implemented')\n}\n\nHashBase.prototype.digest = function (encoding) {\n  if (this._finalized) throw new Error('Digest already called')\n  this._finalized = true\n\n  var digest = this._digest()\n  if (encoding !== undefined) digest = digest.toString(encoding)\n\n  // reset state\n  this._block.fill(0)\n  this._blockOffset = 0\n  for (var i = 0; i < 4; ++i) this._length[i] = 0\n\n  return digest\n}\n\nHashBase.prototype._digest = function () {\n  throw new Error('_digest is not implemented')\n}\n\nmodule.exports = HashBase\n\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/index.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/errors-browser.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/errors-browser.js ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar codes = {};\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n\n  var NodeError =\n  /*#__PURE__*/\n  function (_Base) {\n    _inheritsLoose(NodeError, _Base);\n\n    function NodeError(arg1, arg2, arg3) {\n      return _Base.call(this, getMessage(arg1, arg2, arg3)) || this;\n    }\n\n    return NodeError;\n  }(Base);\n\n  NodeError.prototype.name = Base.name;\n  NodeError.prototype.code = code;\n  codes[code] = NodeError;\n} // https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\n\n\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\n\n\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n\n\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n\n  return str.substring(this_len - search.length, this_len) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\n\n\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_INVALID_OPT_VALUE', function (name, value) {\n  return 'The value \"' + value + '\" is invalid for option \"' + name + '\"';\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  // determiner: 'must be' or 'must not be'\n  var determiner;\n\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  var msg;\n\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  }\n\n  msg += \". Received type \".concat(typeof actual);\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF');\ncreateErrorType('ERR_METHOD_NOT_IMPLEMENTED', function (name) {\n  return 'The ' + name + ' method is not implemented';\n});\ncreateErrorType('ERR_STREAM_PREMATURE_CLOSE', 'Premature close');\ncreateErrorType('ERR_STREAM_DESTROYED', function (name) {\n  return 'Cannot call ' + name + ' after a stream was destroyed';\n});\ncreateErrorType('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times');\ncreateErrorType('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable');\ncreateErrorType('ERR_STREAM_WRITE_AFTER_END', 'write after end');\ncreateErrorType('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError);\ncreateErrorType('ERR_UNKNOWN_ENCODING', function (arg) {\n  return 'Unknown encoding: ' + arg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event');\nmodule.exports.codes = codes;\n\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/errors-browser.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/lib/_stream_duplex.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/lib/_stream_duplex.js ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(process) {// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n/*<replacement>*/\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n\n  for (var key in obj) {\n    keys.push(key);\n  }\n\n  return keys;\n};\n/*</replacement>*/\n\n\nmodule.exports = Duplex;\n\nvar Readable = __webpack_require__(/*! ./_stream_readable */ \"./node_modules/hash-base/node_modules/readable-stream/lib/_stream_readable.js\");\n\nvar Writable = __webpack_require__(/*! ./_stream_writable */ \"./node_modules/hash-base/node_modules/readable-stream/lib/_stream_writable.js\");\n\n__webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")(Duplex, Readable);\n\n{\n  // Allow the keys array to be GC'ed.\n  var keys = objectKeys(Writable.prototype);\n\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n  Readable.call(this, options);\n  Writable.call(this, options);\n  this.allowHalfOpen = true;\n\n  if (options) {\n    if (options.readable === false) this.readable = false;\n    if (options.writable === false) this.writable = false;\n\n    if (options.allowHalfOpen === false) {\n      this.allowHalfOpen = false;\n      this.once('end', onend);\n    }\n  }\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n}); // the no-half-open enforcer\n\nfunction onend() {\n  // If the writable side ended, then we're ok.\n  if (this._writableState.ended) return; // no more data can be written.\n  // But allow more writes to happen in this tick.\n\n  process.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/lib/_stream_duplex.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/lib/_stream_passthrough.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/lib/_stream_passthrough.js ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n\nmodule.exports = PassThrough;\n\nvar Transform = __webpack_require__(/*! ./_stream_transform */ \"./node_modules/hash-base/node_modules/readable-stream/lib/_stream_transform.js\");\n\n__webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/lib/_stream_passthrough.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/lib/_stream_readable.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/lib/_stream_readable.js ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global, process) {// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\nmodule.exports = Readable;\n/*<replacement>*/\n\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n/*<replacement>*/\n\nvar EE = __webpack_require__(/*! events */ \"./node_modules/events/events.js\").EventEmitter;\n\nvar EElistenerCount = function EElistenerCount(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\n\n\nvar Stream = __webpack_require__(/*! ./internal/streams/stream */ \"./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/stream-browser.js\");\n/*</replacement>*/\n\n\nvar Buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\").Buffer;\n\nvar OurUint8Array = global.Uint8Array || function () {};\n\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\n\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n/*<replacement>*/\n\n\nvar debugUtil = __webpack_require__(/*! util */ 1);\n\nvar debug;\n\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function debug() {};\n}\n/*</replacement>*/\n\n\nvar BufferList = __webpack_require__(/*! ./internal/streams/buffer_list */ \"./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/buffer_list.js\");\n\nvar destroyImpl = __webpack_require__(/*! ./internal/streams/destroy */ \"./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/destroy.js\");\n\nvar _require = __webpack_require__(/*! ./internal/streams/state */ \"./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/state.js\"),\n    getHighWaterMark = _require.getHighWaterMark;\n\nvar _require$codes = __webpack_require__(/*! ../errors */ \"./node_modules/hash-base/node_modules/readable-stream/errors-browser.js\").codes,\n    ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n    ERR_STREAM_PUSH_AFTER_EOF = _require$codes.ERR_STREAM_PUSH_AFTER_EOF,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_STREAM_UNSHIFT_AFTER_END_EVENT = _require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT; // Lazy loaded to improve the startup performance.\n\n\nvar StringDecoder;\nvar createReadableStreamAsyncIterator;\nvar from;\n\n__webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")(Readable, Stream);\n\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn); // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (Array.isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream, isDuplex) {\n  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/hash-base/node_modules/readable-stream/lib/_stream_duplex.js\");\n  options = options || {}; // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex; // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode; // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n\n  this.highWaterMark = getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex); // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false; // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n\n  this.sync = true; // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n  this.paused = true; // Should close be emitted on destroy. Defaults to true.\n\n  this.emitClose = options.emitClose !== false; // Should .destroy() be called after 'end' (and potentially 'finish')\n\n  this.autoDestroy = !!options.autoDestroy; // has it been destroyed\n\n  this.destroyed = false; // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n\n  this.defaultEncoding = options.defaultEncoding || 'utf8'; // the number of writers that are awaiting a drain event in .pipe()s\n\n  this.awaitDrain = 0; // if true, a maybeReadMore has been scheduled\n\n  this.readingMore = false;\n  this.decoder = null;\n  this.encoding = null;\n\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = __webpack_require__(/*! string_decoder/ */ \"./node_modules/string_decoder/lib/string_decoder.js\").StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/hash-base/node_modules/readable-stream/lib/_stream_duplex.js\");\n  if (!(this instanceof Readable)) return new Readable(options); // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5\n\n  var isDuplex = this instanceof Duplex;\n  this._readableState = new ReadableState(options, this, isDuplex); // legacy\n\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined) {\n      return false;\n    }\n\n    return this._readableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._readableState.destroyed = value;\n  }\n});\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\n\nReadable.prototype._destroy = function (err, cb) {\n  cb(err);\n}; // Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\n\n\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n}; // Unshift should *always* be something directly out of read()\n\n\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  debug('readableAddChunk', chunk);\n  var state = stream._readableState;\n\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n\n    if (er) {\n      errorOrDestroy(stream, er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF());\n      } else if (state.destroyed) {\n        return false;\n      } else {\n        state.reading = false;\n\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n      maybeReadMore(stream, state);\n    }\n  } // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n\n\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    state.awaitDrain = 0;\n    stream.emit('data', chunk);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n    if (state.needReadable) emitReadable(stream);\n  }\n\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk);\n  }\n\n  return er;\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n}; // backwards compatibility.\n\n\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = __webpack_require__(/*! string_decoder/ */ \"./node_modules/string_decoder/lib/string_decoder.js\").StringDecoder;\n  var decoder = new StringDecoder(enc);\n  this._readableState.decoder = decoder; // If setEncoding(null), decoder.encoding equals utf8\n\n  this._readableState.encoding = this._readableState.decoder.encoding; // Iterate over current buffer to convert already stored Buffers:\n\n  var p = this._readableState.buffer.head;\n  var content = '';\n\n  while (p !== null) {\n    content += decoder.write(p.data);\n    p = p.next;\n  }\n\n  this._readableState.buffer.clear();\n\n  if (content !== '') this._readableState.buffer.push(content);\n  this._readableState.length = content.length;\n  return this;\n}; // Don't raise the hwm > 1GB\n\n\nvar MAX_HWM = 0x40000000;\n\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    // TODO(ronag): Throw ERR_VALUE_OUT_OF_RANGE.\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n\n  return n;\n} // This function is designed to be inlinable, so please take care when making\n// changes to the function body.\n\n\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  } // If we're asking for more than the current hwm, then raise the hwm.\n\n\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n; // Don't have enough\n\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n\n  return state.length;\n} // you can override either this method, or the async _read(n) below.\n\n\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n  if (n !== 0) state.emittedReadable = false; // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n\n  if (n === 0 && state.needReadable && ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state); // if we've ended, and we're now clear, then finish it up.\n\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  } // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n  // if we need a readable event, then we need to do some reading.\n\n\n  var doRead = state.needReadable;\n  debug('need readable', doRead); // if we currently have less than the highWaterMark, then also read some\n\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  } // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n\n\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true; // if the length is currently zero, then we *need* a readable event.\n\n    if (state.length === 0) state.needReadable = true; // call internal read method\n\n    this._read(state.highWaterMark);\n\n    state.sync = false; // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark;\n    n = 0;\n  } else {\n    state.length -= n;\n    state.awaitDrain = 0;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true; // If we tried to read() past the EOF, then emit end on the next tick.\n\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk');\n  if (state.ended) return;\n\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n\n  state.ended = true;\n\n  if (state.sync) {\n    // if we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call\n    emitReadable(stream);\n  } else {\n    // emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false;\n\n    if (!state.emittedReadable) {\n      state.emittedReadable = true;\n      emitReadable_(stream);\n    }\n  }\n} // Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\n\n\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  debug('emitReadable', state.needReadable, state.emittedReadable);\n  state.needReadable = false;\n\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    process.nextTick(emitReadable_, stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  var state = stream._readableState;\n  debug('emitReadable_', state.destroyed, state.length, state.ended);\n\n  if (!state.destroyed && (state.length || state.ended)) {\n    stream.emit('readable');\n    state.emittedReadable = false;\n  } // The stream needs another readable event if\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n\n\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark;\n  flow(stream);\n} // at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\n\n\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (!state.reading && !state.ended && (state.length < state.highWaterMark || state.flowing && state.length === 0)) {\n    var len = state.length;\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length) // didn't get any data, stop spinning.\n      break;\n  }\n\n  state.readingMore = false;\n} // abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\n\n\nReadable.prototype._read = function (n) {\n  errorOrDestroy(this, new ERR_METHOD_NOT_IMPLEMENTED('_read()'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) process.nextTick(endFn);else src.once('end', endFn);\n  dest.on('unpipe', onunpipe);\n\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  } // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n\n\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n  var cleanedUp = false;\n\n  function cleanup() {\n    debug('cleanup'); // cleanup event handlers once the pipe is broken\n\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n    cleanedUp = true; // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  src.on('data', ondata);\n\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    debug('dest.write', ret);\n\n    if (ret === false) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n      }\n\n      src.pause();\n    }\n  } // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n\n\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) errorOrDestroy(dest, er);\n  } // Make sure our error handler is attached before userland ones.\n\n\n  prependListener(dest, 'error', onerror); // Both close and finish should trigger unpipe, but only once.\n\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n\n  dest.once('close', onclose);\n\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  } // tell the dest that it's being piped to\n\n\n  dest.emit('pipe', src); // start the flow if it hasn't been started already.\n\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function pipeOnDrainFunctionResult() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = {\n    hasUnpiped: false\n  }; // if we're not piping anywhere, then do nothing.\n\n  if (state.pipesCount === 0) return this; // just one destination.  most common case.\n\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n    if (!dest) dest = state.pipes; // got a match.\n\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  } // slow case. multiple pipe destinations.\n\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, {\n        hasUnpiped: false\n      });\n    }\n\n    return this;\n  } // try to find the right one.\n\n\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n  dest.emit('unpipe', this, unpipeInfo);\n  return this;\n}; // set up data events if they are asked for\n// Ensure readable listeners eventually get something\n\n\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n  var state = this._readableState;\n\n  if (ev === 'data') {\n    // update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0; // Try start flowing on next tick if stream isn't explicitly paused\n\n    if (state.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.flowing = false;\n      state.emittedReadable = false;\n      debug('on readable', state.length, state.reading);\n\n      if (state.length) {\n        emitReadable(this);\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this);\n      }\n    }\n  }\n\n  return res;\n};\n\nReadable.prototype.addListener = Readable.prototype.on;\n\nReadable.prototype.removeListener = function (ev, fn) {\n  var res = Stream.prototype.removeListener.call(this, ev, fn);\n\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n\n  return res;\n};\n\nReadable.prototype.removeAllListeners = function (ev) {\n  var res = Stream.prototype.removeAllListeners.apply(this, arguments);\n\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n\n  return res;\n};\n\nfunction updateReadableListening(self) {\n  var state = self._readableState;\n  state.readableListening = self.listenerCount('readable') > 0;\n\n  if (state.resumeScheduled && !state.paused) {\n    // flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true; // crude way to check if we should resume\n  } else if (self.listenerCount('data') > 0) {\n    self.resume();\n  }\n}\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n} // pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\n\n\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n\n  if (!state.flowing) {\n    debug('resume'); // we flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume()\n\n    state.flowing = !state.readableListening;\n    resume(this, state);\n  }\n\n  state.paused = false;\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  debug('resume', state.reading);\n\n  if (!state.reading) {\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n\n  if (this._readableState.flowing !== false) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n\n  this._readableState.paused = true;\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n\n  while (state.flowing && stream.read() !== null) {\n    ;\n  }\n} // wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\n\n\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n  stream.on('end', function () {\n    debug('wrapped end');\n\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk); // don't skip over falsy values in objectMode\n\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  }); // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function methodWrap(method) {\n        return function methodWrapReturnFunction() {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  } // proxy certain important events.\n\n\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  } // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n\n\n  this._read = function (n) {\n    debug('wrapped _read', n);\n\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nif (typeof Symbol === 'function') {\n  Readable.prototype[Symbol.asyncIterator] = function () {\n    if (createReadableStreamAsyncIterator === undefined) {\n      createReadableStreamAsyncIterator = __webpack_require__(/*! ./internal/streams/async_iterator */ \"./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/async_iterator.js\");\n    }\n\n    return createReadableStreamAsyncIterator(this);\n  };\n}\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.highWaterMark;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState && this._readableState.buffer;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableFlowing', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.flowing;\n  },\n  set: function set(state) {\n    if (this._readableState) {\n      this._readableState.flowing = state;\n    }\n  }\n}); // exposed for testing purposes only.\n\nReadable._fromList = fromList;\nObject.defineProperty(Readable.prototype, 'readableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.length;\n  }\n}); // Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\n\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.first();else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = state.buffer.consume(n, state.decoder);\n  }\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n  debug('endReadable', state.endEmitted);\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length); // Check that we didn't get one last unshift.\n\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n\n    if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well\n      var wState = stream._writableState;\n\n      if (!wState || wState.autoDestroy && wState.finished) {\n        stream.destroy();\n      }\n    }\n  }\n}\n\nif (typeof Symbol === 'function') {\n  Readable.from = function (iterable, opts) {\n    if (from === undefined) {\n      from = __webpack_require__(/*! ./internal/streams/from */ \"./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/from-browser.js\");\n    }\n\n    return from(Readable, iterable, opts);\n  };\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n\n  return -1;\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! ./../../../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/lib/_stream_readable.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/lib/_stream_transform.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/lib/_stream_transform.js ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n\nmodule.exports = Transform;\n\nvar _require$codes = __webpack_require__(/*! ../errors */ \"./node_modules/hash-base/node_modules/readable-stream/errors-browser.js\").codes,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n    ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,\n    ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes.ERR_TRANSFORM_WITH_LENGTH_0;\n\nvar Duplex = __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/hash-base/node_modules/readable-stream/lib/_stream_duplex.js\");\n\n__webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n  var cb = ts.writecb;\n\n  if (cb === null) {\n    return this.emit('error', new ERR_MULTIPLE_CALLBACK());\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n  cb(er);\n  var rs = this._readableState;\n  rs.reading = false;\n\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n  Duplex.call(this, options);\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  }; // start out asking for a readable event once data is transformed.\n\n  this._readableState.needReadable = true; // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  } // When the writable side finishes, then flush out anything remaining.\n\n\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function' && !this._readableState.destroyed) {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n}; // This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\n\n\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n}; // Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\n\n\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && !ts.transforming) {\n    ts.transforming = true;\n\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data); // TODO(BridgeAR): Write a test for these two error cases\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n\n  if (stream._writableState.length) throw new ERR_TRANSFORM_WITH_LENGTH_0();\n  if (stream._transformState.transforming) throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();\n  return stream.push(null);\n}\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/lib/_stream_transform.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/lib/_stream_writable.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/lib/_stream_writable.js ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global, process) {// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n\nmodule.exports = Writable;\n/* <replacement> */\n\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n} // It seems a linked list but it is not\n// there will be only 2 of these for each stream\n\n\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\n\n\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n/*<replacement>*/\n\nvar internalUtil = {\n  deprecate: __webpack_require__(/*! util-deprecate */ \"./node_modules/util-deprecate/browser.js\")\n};\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Stream = __webpack_require__(/*! ./internal/streams/stream */ \"./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/stream-browser.js\");\n/*</replacement>*/\n\n\nvar Buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\").Buffer;\n\nvar OurUint8Array = global.Uint8Array || function () {};\n\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\n\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\nvar destroyImpl = __webpack_require__(/*! ./internal/streams/destroy */ \"./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/destroy.js\");\n\nvar _require = __webpack_require__(/*! ./internal/streams/state */ \"./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/state.js\"),\n    getHighWaterMark = _require.getHighWaterMark;\n\nvar _require$codes = __webpack_require__(/*! ../errors */ \"./node_modules/hash-base/node_modules/readable-stream/errors-browser.js\").codes,\n    ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n    ERR_STREAM_CANNOT_PIPE = _require$codes.ERR_STREAM_CANNOT_PIPE,\n    ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED,\n    ERR_STREAM_NULL_VALUES = _require$codes.ERR_STREAM_NULL_VALUES,\n    ERR_STREAM_WRITE_AFTER_END = _require$codes.ERR_STREAM_WRITE_AFTER_END,\n    ERR_UNKNOWN_ENCODING = _require$codes.ERR_UNKNOWN_ENCODING;\n\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\n\n__webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream, isDuplex) {\n  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/hash-base/node_modules/readable-stream/lib/_stream_duplex.js\");\n  options = options || {}; // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex; // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode; // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n\n  this.highWaterMark = getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex); // if _final has been called\n\n  this.finalCalled = false; // drain event flag.\n\n  this.needDrain = false; // at the start of calling end()\n\n  this.ending = false; // when end() has been called, and returned\n\n  this.ended = false; // when 'finish' is emitted\n\n  this.finished = false; // has it been destroyed\n\n  this.destroyed = false; // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode; // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n\n  this.defaultEncoding = options.defaultEncoding || 'utf8'; // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n\n  this.length = 0; // a flag to see when we're in the middle of a write.\n\n  this.writing = false; // when true all writes will be buffered until .uncork() call\n\n  this.corked = 0; // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n\n  this.sync = true; // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n\n  this.bufferProcessing = false; // the callback that's passed to _write(chunk,cb)\n\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  }; // the callback that the user supplies to write(chunk,encoding,cb)\n\n\n  this.writecb = null; // the amount that is being written when _write is called.\n\n  this.writelen = 0;\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null; // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n\n  this.pendingcb = 0; // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n\n  this.prefinished = false; // True if the error was already emitted and should not be thrown again\n\n  this.errorEmitted = false; // Should close be emitted on destroy. Defaults to true.\n\n  this.emitClose = options.emitClose !== false; // Should .destroy() be called after 'finish' (and potentially 'end')\n\n  this.autoDestroy = !!options.autoDestroy; // count buffered requests\n\n  this.bufferedRequestCount = 0; // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function writableStateBufferGetter() {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})(); // Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\n\n\nvar realHasInstance;\n\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function value(object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function realHasInstance(object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/hash-base/node_modules/readable-stream/lib/_stream_duplex.js\"); // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5\n\n  var isDuplex = this instanceof Duplex;\n  if (!isDuplex && !realHasInstance.call(Writable, this)) return new Writable(options);\n  this._writableState = new WritableState(options, this, isDuplex); // legacy.\n\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n    if (typeof options.writev === 'function') this._writev = options.writev;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n} // Otherwise people can pipe Writable streams, which is just wrong.\n\n\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE());\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new ERR_STREAM_WRITE_AFTER_END(); // TODO: defer error events consistently everywhere, not just the cb\n\n  errorOrDestroy(stream, er);\n  process.nextTick(cb, er);\n} // Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\n\n\nfunction validChunk(stream, state, chunk, cb) {\n  var er;\n\n  if (chunk === null) {\n    er = new ERR_STREAM_NULL_VALUES();\n  } else if (typeof chunk !== 'string' && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer'], chunk);\n  }\n\n  if (er) {\n    errorOrDestroy(stream, er);\n    process.nextTick(cb, er);\n    return false;\n  }\n\n  return true;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n  if (typeof cb !== 'function') cb = nop;\n  if (state.ending) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  this._writableState.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new ERR_UNKNOWN_ENCODING(encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nObject.defineProperty(Writable.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n}); // if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\n\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n\n  var len = state.objectMode ? 1 : chunk.length;\n  state.length += len;\n  var ret = state.length < state.highWaterMark; // we must ensure that previous needDrain will not be reset to false.\n\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'));else if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    process.nextTick(cb, er); // this can emit finish, and it will always happen\n    // after error\n\n    process.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er); // this can emit finish, but finish must\n    // always follow error\n\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n  if (typeof cb !== 'function') throw new ERR_MULTIPLE_CALLBACK();\n  onwriteStateUpdate(state);\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state) || stream.destroyed;\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      process.nextTick(afterWrite, stream, state, finished, cb);\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n} // Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\n\n\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n} // if there's something in the buffer waiting, then process it\n\n\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n    var count = 0;\n    var allBuffers = true;\n\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n\n    buffer.allBuffers = allBuffers;\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish); // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--; // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding); // .end() fully uncorks\n\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  } // ignore unnecessary end() calls.\n\n\n  if (!state.ending) endWritable(this, state, cb);\n  return this;\n};\n\nObject.defineProperty(Writable.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\n\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n\n    if (err) {\n      errorOrDestroy(stream, err);\n    }\n\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\n\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.pendingcb++;\n      state.finalCalled = true;\n      process.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n\n  if (need) {\n    prefinish(stream, state);\n\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n\n      if (state.autoDestroy) {\n        // In case of duplex streams we need a way to detect\n        // if the readable side is ready for autoDestroy as well\n        var rState = stream._readableState;\n\n        if (!rState || rState.autoDestroy && rState.endEmitted) {\n          stream.destroy();\n        }\n      }\n    }\n  }\n\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n\n  if (cb) {\n    if (state.finished) process.nextTick(cb);else stream.once('finish', cb);\n  }\n\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  } // reuse the free corkReq.\n\n\n  state.corkedRequestsFree.next = corkReq;\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._writableState === undefined) {\n      return false;\n    }\n\n    return this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._writableState.destroyed = value;\n  }\n});\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\n\nWritable.prototype._destroy = function (err, cb) {\n  cb(err);\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! ./../../../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/lib/_stream_writable.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/async_iterator.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/async_iterator.js ***!
  \****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(process) {\n\nvar _Object$setPrototypeO;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar finished = __webpack_require__(/*! ./end-of-stream */ \"./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/end-of-stream.js\");\n\nvar kLastResolve = Symbol('lastResolve');\nvar kLastReject = Symbol('lastReject');\nvar kError = Symbol('error');\nvar kEnded = Symbol('ended');\nvar kLastPromise = Symbol('lastPromise');\nvar kHandlePromise = Symbol('handlePromise');\nvar kStream = Symbol('stream');\n\nfunction createIterResult(value, done) {\n  return {\n    value: value,\n    done: done\n  };\n}\n\nfunction readAndResolve(iter) {\n  var resolve = iter[kLastResolve];\n\n  if (resolve !== null) {\n    var data = iter[kStream].read(); // we defer if data is null\n    // we can be expecting either 'end' or\n    // 'error'\n\n    if (data !== null) {\n      iter[kLastPromise] = null;\n      iter[kLastResolve] = null;\n      iter[kLastReject] = null;\n      resolve(createIterResult(data, false));\n    }\n  }\n}\n\nfunction onReadable(iter) {\n  // we wait for the next tick, because it might\n  // emit an error with process.nextTick\n  process.nextTick(readAndResolve, iter);\n}\n\nfunction wrapForNext(lastPromise, iter) {\n  return function (resolve, reject) {\n    lastPromise.then(function () {\n      if (iter[kEnded]) {\n        resolve(createIterResult(undefined, true));\n        return;\n      }\n\n      iter[kHandlePromise](resolve, reject);\n    }, reject);\n  };\n}\n\nvar AsyncIteratorPrototype = Object.getPrototypeOf(function () {});\nvar ReadableStreamAsyncIteratorPrototype = Object.setPrototypeOf((_Object$setPrototypeO = {\n  get stream() {\n    return this[kStream];\n  },\n\n  next: function next() {\n    var _this = this;\n\n    // if we have detected an error in the meanwhile\n    // reject straight away\n    var error = this[kError];\n\n    if (error !== null) {\n      return Promise.reject(error);\n    }\n\n    if (this[kEnded]) {\n      return Promise.resolve(createIterResult(undefined, true));\n    }\n\n    if (this[kStream].destroyed) {\n      // We need to defer via nextTick because if .destroy(err) is\n      // called, the error will be emitted via nextTick, and\n      // we cannot guarantee that there is no error lingering around\n      // waiting to be emitted.\n      return new Promise(function (resolve, reject) {\n        process.nextTick(function () {\n          if (_this[kError]) {\n            reject(_this[kError]);\n          } else {\n            resolve(createIterResult(undefined, true));\n          }\n        });\n      });\n    } // if we have multiple next() calls\n    // we will wait for the previous Promise to finish\n    // this logic is optimized to support for await loops,\n    // where next() is only called once at a time\n\n\n    var lastPromise = this[kLastPromise];\n    var promise;\n\n    if (lastPromise) {\n      promise = new Promise(wrapForNext(lastPromise, this));\n    } else {\n      // fast path needed to support multiple this.push()\n      // without triggering the next() queue\n      var data = this[kStream].read();\n\n      if (data !== null) {\n        return Promise.resolve(createIterResult(data, false));\n      }\n\n      promise = new Promise(this[kHandlePromise]);\n    }\n\n    this[kLastPromise] = promise;\n    return promise;\n  }\n}, _defineProperty(_Object$setPrototypeO, Symbol.asyncIterator, function () {\n  return this;\n}), _defineProperty(_Object$setPrototypeO, \"return\", function _return() {\n  var _this2 = this;\n\n  // destroy(err, cb) is a private API\n  // we can guarantee we have that here, because we control the\n  // Readable class this is attached to\n  return new Promise(function (resolve, reject) {\n    _this2[kStream].destroy(null, function (err) {\n      if (err) {\n        reject(err);\n        return;\n      }\n\n      resolve(createIterResult(undefined, true));\n    });\n  });\n}), _Object$setPrototypeO), AsyncIteratorPrototype);\n\nvar createReadableStreamAsyncIterator = function createReadableStreamAsyncIterator(stream) {\n  var _Object$create;\n\n  var iterator = Object.create(ReadableStreamAsyncIteratorPrototype, (_Object$create = {}, _defineProperty(_Object$create, kStream, {\n    value: stream,\n    writable: true\n  }), _defineProperty(_Object$create, kLastResolve, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kLastReject, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kError, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kEnded, {\n    value: stream._readableState.endEmitted,\n    writable: true\n  }), _defineProperty(_Object$create, kHandlePromise, {\n    value: function value(resolve, reject) {\n      var data = iterator[kStream].read();\n\n      if (data) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        resolve(createIterResult(data, false));\n      } else {\n        iterator[kLastResolve] = resolve;\n        iterator[kLastReject] = reject;\n      }\n    },\n    writable: true\n  }), _Object$create));\n  iterator[kLastPromise] = null;\n  finished(stream, function (err) {\n    if (err && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n      var reject = iterator[kLastReject]; // reject if we are waiting for data in the Promise\n      // returned by next() and store the error\n\n      if (reject !== null) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        reject(err);\n      }\n\n      iterator[kError] = err;\n      return;\n    }\n\n    var resolve = iterator[kLastResolve];\n\n    if (resolve !== null) {\n      iterator[kLastPromise] = null;\n      iterator[kLastResolve] = null;\n      iterator[kLastReject] = null;\n      resolve(createIterResult(undefined, true));\n    }\n\n    iterator[kEnded] = true;\n  });\n  stream.on('readable', onReadable.bind(null, iterator));\n  return iterator;\n};\n\nmodule.exports = createReadableStreamAsyncIterator;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/async_iterator.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/buffer_list.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/buffer_list.js ***!
  \*************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar _require = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\"),\n    Buffer = _require.Buffer;\n\nvar _require2 = __webpack_require__(/*! util */ 2),\n    inspect = _require2.inspect;\n\nvar custom = inspect && inspect.custom || 'inspect';\n\nfunction copyBuffer(src, target, offset) {\n  Buffer.prototype.copy.call(src, target, offset);\n}\n\nmodule.exports =\n/*#__PURE__*/\nfunction () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  _createClass(BufferList, [{\n    key: \"push\",\n    value: function push(v) {\n      var entry = {\n        data: v,\n        next: null\n      };\n      if (this.length > 0) this.tail.next = entry;else this.head = entry;\n      this.tail = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"unshift\",\n    value: function unshift(v) {\n      var entry = {\n        data: v,\n        next: this.head\n      };\n      if (this.length === 0) this.tail = entry;\n      this.head = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      if (this.length === 0) return;\n      var ret = this.head.data;\n      if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n      --this.length;\n      return ret;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.head = this.tail = null;\n      this.length = 0;\n    }\n  }, {\n    key: \"join\",\n    value: function join(s) {\n      if (this.length === 0) return '';\n      var p = this.head;\n      var ret = '' + p.data;\n\n      while (p = p.next) {\n        ret += s + p.data;\n      }\n\n      return ret;\n    }\n  }, {\n    key: \"concat\",\n    value: function concat(n) {\n      if (this.length === 0) return Buffer.alloc(0);\n      var ret = Buffer.allocUnsafe(n >>> 0);\n      var p = this.head;\n      var i = 0;\n\n      while (p) {\n        copyBuffer(p.data, ret, i);\n        i += p.data.length;\n        p = p.next;\n      }\n\n      return ret;\n    } // Consumes a specified amount of bytes or characters from the buffered data.\n\n  }, {\n    key: \"consume\",\n    value: function consume(n, hasStrings) {\n      var ret;\n\n      if (n < this.head.data.length) {\n        // `slice` is the same for buffers and strings.\n        ret = this.head.data.slice(0, n);\n        this.head.data = this.head.data.slice(n);\n      } else if (n === this.head.data.length) {\n        // First chunk is a perfect match.\n        ret = this.shift();\n      } else {\n        // Result spans more than one buffer.\n        ret = hasStrings ? this._getString(n) : this._getBuffer(n);\n      }\n\n      return ret;\n    }\n  }, {\n    key: \"first\",\n    value: function first() {\n      return this.head.data;\n    } // Consumes a specified amount of characters from the buffered data.\n\n  }, {\n    key: \"_getString\",\n    value: function _getString(n) {\n      var p = this.head;\n      var c = 1;\n      var ret = p.data;\n      n -= ret.length;\n\n      while (p = p.next) {\n        var str = p.data;\n        var nb = n > str.length ? str.length : n;\n        if (nb === str.length) ret += str;else ret += str.slice(0, n);\n        n -= nb;\n\n        if (n === 0) {\n          if (nb === str.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = str.slice(nb);\n          }\n\n          break;\n        }\n\n        ++c;\n      }\n\n      this.length -= c;\n      return ret;\n    } // Consumes a specified amount of bytes from the buffered data.\n\n  }, {\n    key: \"_getBuffer\",\n    value: function _getBuffer(n) {\n      var ret = Buffer.allocUnsafe(n);\n      var p = this.head;\n      var c = 1;\n      p.data.copy(ret);\n      n -= p.data.length;\n\n      while (p = p.next) {\n        var buf = p.data;\n        var nb = n > buf.length ? buf.length : n;\n        buf.copy(ret, ret.length - n, 0, nb);\n        n -= nb;\n\n        if (n === 0) {\n          if (nb === buf.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = buf.slice(nb);\n          }\n\n          break;\n        }\n\n        ++c;\n      }\n\n      this.length -= c;\n      return ret;\n    } // Make sure the linked list only shows the minimal necessary information.\n\n  }, {\n    key: custom,\n    value: function value(_, options) {\n      return inspect(this, _objectSpread({}, options, {\n        // Only inspect one level.\n        depth: 0,\n        // It should not recurse.\n        customInspect: false\n      }));\n    }\n  }]);\n\n  return BufferList;\n}();\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/buffer_list.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/destroy.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/destroy.js ***!
  \*********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(process) { // undocumented cb() API, needed for core, not for public API\n\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err) {\n      if (!this._writableState) {\n        process.nextTick(emitErrorNT, this, err);\n      } else if (!this._writableState.errorEmitted) {\n        this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorNT, this, err);\n      }\n    }\n\n    return this;\n  } // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  } // if this is a duplex stream mark the writable part as destroyed as well\n\n\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      if (!_this._writableState) {\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else if (!_this._writableState.errorEmitted) {\n        _this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else {\n        process.nextTick(emitCloseNT, _this);\n      }\n    } else if (cb) {\n      process.nextTick(emitCloseNT, _this);\n      cb(err);\n    } else {\n      process.nextTick(emitCloseNT, _this);\n    }\n  });\n\n  return this;\n}\n\nfunction emitErrorAndCloseNT(self, err) {\n  emitErrorNT(self, err);\n  emitCloseNT(self);\n}\n\nfunction emitCloseNT(self) {\n  if (self._writableState && !self._writableState.emitClose) return;\n  if (self._readableState && !self._readableState.emitClose) return;\n  self.emit('close');\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nfunction errorOrDestroy(stream, err) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n  var rState = stream._readableState;\n  var wState = stream._writableState;\n  if (rState && rState.autoDestroy || wState && wState.autoDestroy) stream.destroy(err);else stream.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy,\n  errorOrDestroy: errorOrDestroy\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/destroy.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/end-of-stream.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/end-of-stream.js ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n\n\nvar ERR_STREAM_PREMATURE_CLOSE = __webpack_require__(/*! ../../../errors */ \"./node_modules/hash-base/node_modules/readable-stream/errors-browser.js\").codes.ERR_STREAM_PREMATURE_CLOSE;\n\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    callback.apply(this, args);\n  };\n}\n\nfunction noop() {}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction eos(stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n\n  var onlegacyfinish = function onlegacyfinish() {\n    if (!stream.writable) onfinish();\n  };\n\n  var writableEnded = stream._writableState && stream._writableState.finished;\n\n  var onfinish = function onfinish() {\n    writable = false;\n    writableEnded = true;\n    if (!readable) callback.call(stream);\n  };\n\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\n\n  var onend = function onend() {\n    readable = false;\n    readableEnded = true;\n    if (!writable) callback.call(stream);\n  };\n\n  var onerror = function onerror(err) {\n    callback.call(stream, err);\n  };\n\n  var onclose = function onclose() {\n    var err;\n\n    if (readable && !readableEnded) {\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n\n    if (writable && !writableEnded) {\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n  };\n\n  var onrequest = function onrequest() {\n    stream.req.on('finish', onfinish);\n  };\n\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !stream._writableState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n}\n\nmodule.exports = eos;\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/end-of-stream.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/from-browser.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/from-browser.js ***!
  \**************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function () {\n  throw new Error('Readable.from is not available in the browser')\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/from-browser.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/pipeline.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/pipeline.js ***!
  \**********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n\nvar eos;\n\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback.apply(void 0, arguments);\n  };\n}\n\nvar _require$codes = __webpack_require__(/*! ../../../errors */ \"./node_modules/hash-base/node_modules/readable-stream/errors-browser.js\").codes,\n    ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n    ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\n\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  var closed = false;\n  stream.on('close', function () {\n    closed = true;\n  });\n  if (eos === undefined) eos = __webpack_require__(/*! ./end-of-stream */ \"./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/end-of-stream.js\");\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, function (err) {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  var destroyed = false;\n  return function (err) {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true; // request.destroy just do .end - .abort is what we want\n\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\n\nfunction call(fn) {\n  fn();\n}\n\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\n\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\n\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n\n  var callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n\n  var error;\n  var destroys = streams.map(function (stream, i) {\n    var reading = i < streams.length - 1;\n    var writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\n\nmodule.exports = pipeline;\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/pipeline.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/state.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/state.js ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar ERR_INVALID_OPT_VALUE = __webpack_require__(/*! ../../../errors */ \"./node_modules/hash-base/node_modules/readable-stream/errors-browser.js\").codes.ERR_INVALID_OPT_VALUE;\n\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;\n}\n\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  var hwm = highWaterMarkFrom(options, isDuplex, duplexKey);\n\n  if (hwm != null) {\n    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {\n      var name = isDuplex ? duplexKey : 'highWaterMark';\n      throw new ERR_INVALID_OPT_VALUE(name, hwm);\n    }\n\n    return Math.floor(hwm);\n  } // Default value\n\n\n  return state.objectMode ? 16 : 16 * 1024;\n}\n\nmodule.exports = {\n  getHighWaterMark: getHighWaterMark\n};\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/state.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/stream-browser.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/stream-browser.js ***!
  \****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! events */ \"./node_modules/events/events.js\").EventEmitter;\n\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/stream-browser.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/readable-stream/readable-browser.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/readable-stream/readable-browser.js ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("exports = module.exports = __webpack_require__(/*! ./lib/_stream_readable.js */ \"./node_modules/hash-base/node_modules/readable-stream/lib/_stream_readable.js\");\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = __webpack_require__(/*! ./lib/_stream_writable.js */ \"./node_modules/hash-base/node_modules/readable-stream/lib/_stream_writable.js\");\nexports.Duplex = __webpack_require__(/*! ./lib/_stream_duplex.js */ \"./node_modules/hash-base/node_modules/readable-stream/lib/_stream_duplex.js\");\nexports.Transform = __webpack_require__(/*! ./lib/_stream_transform.js */ \"./node_modules/hash-base/node_modules/readable-stream/lib/_stream_transform.js\");\nexports.PassThrough = __webpack_require__(/*! ./lib/_stream_passthrough.js */ \"./node_modules/hash-base/node_modules/readable-stream/lib/_stream_passthrough.js\");\nexports.finished = __webpack_require__(/*! ./lib/internal/streams/end-of-stream.js */ \"./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/end-of-stream.js\");\nexports.pipeline = __webpack_require__(/*! ./lib/internal/streams/pipeline.js */ \"./node_modules/hash-base/node_modules/readable-stream/lib/internal/streams/pipeline.js\");\n\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/readable-stream/readable-browser.js?");

/***/ }),

/***/ "./node_modules/hash-base/node_modules/safe-buffer/index.js":
/*!******************************************************************!*\
  !*** ./node_modules/hash-base/node_modules/safe-buffer/index.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\r\n/* eslint-disable node/no-deprecated-api */\r\nvar buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\")\r\nvar Buffer = buffer.Buffer\r\n\r\n// alternative to using Object.keys for old browsers\r\nfunction copyProps (src, dst) {\r\n  for (var key in src) {\r\n    dst[key] = src[key]\r\n  }\r\n}\r\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\r\n  module.exports = buffer\r\n} else {\r\n  // Copy properties from require('buffer')\r\n  copyProps(buffer, exports)\r\n  exports.Buffer = SafeBuffer\r\n}\r\n\r\nfunction SafeBuffer (arg, encodingOrOffset, length) {\r\n  return Buffer(arg, encodingOrOffset, length)\r\n}\r\n\r\nSafeBuffer.prototype = Object.create(Buffer.prototype)\r\n\r\n// Copy static methods from Buffer\r\ncopyProps(Buffer, SafeBuffer)\r\n\r\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\r\n  if (typeof arg === 'number') {\r\n    throw new TypeError('Argument must not be a number')\r\n  }\r\n  return Buffer(arg, encodingOrOffset, length)\r\n}\r\n\r\nSafeBuffer.alloc = function (size, fill, encoding) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  var buf = Buffer(size)\r\n  if (fill !== undefined) {\r\n    if (typeof encoding === 'string') {\r\n      buf.fill(fill, encoding)\r\n    } else {\r\n      buf.fill(fill)\r\n    }\r\n  } else {\r\n    buf.fill(0)\r\n  }\r\n  return buf\r\n}\r\n\r\nSafeBuffer.allocUnsafe = function (size) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  return Buffer(size)\r\n}\r\n\r\nSafeBuffer.allocUnsafeSlow = function (size) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  return buffer.SlowBuffer(size)\r\n}\r\n\n\n//# sourceURL=webpack://Game/./node_modules/hash-base/node_modules/safe-buffer/index.js?");

/***/ }),

/***/ "./node_modules/hash.js/lib/hash.js":
/*!******************************************!*\
  !*** ./node_modules/hash.js/lib/hash.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var hash = exports;\n\nhash.utils = __webpack_require__(/*! ./hash/utils */ \"./node_modules/hash.js/lib/hash/utils.js\");\nhash.common = __webpack_require__(/*! ./hash/common */ \"./node_modules/hash.js/lib/hash/common.js\");\nhash.sha = __webpack_require__(/*! ./hash/sha */ \"./node_modules/hash.js/lib/hash/sha.js\");\nhash.ripemd = __webpack_require__(/*! ./hash/ripemd */ \"./node_modules/hash.js/lib/hash/ripemd.js\");\nhash.hmac = __webpack_require__(/*! ./hash/hmac */ \"./node_modules/hash.js/lib/hash/hmac.js\");\n\n// Proxy hash functions to the main object\nhash.sha1 = hash.sha.sha1;\nhash.sha256 = hash.sha.sha256;\nhash.sha224 = hash.sha.sha224;\nhash.sha384 = hash.sha.sha384;\nhash.sha512 = hash.sha.sha512;\nhash.ripemd160 = hash.ripemd.ripemd160;\n\n\n//# sourceURL=webpack://Game/./node_modules/hash.js/lib/hash.js?");

/***/ }),

/***/ "./node_modules/hash.js/lib/hash/common.js":
/*!*************************************************!*\
  !*** ./node_modules/hash.js/lib/hash/common.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./utils */ \"./node_modules/hash.js/lib/hash/utils.js\");\nvar assert = __webpack_require__(/*! minimalistic-assert */ \"./node_modules/minimalistic-assert/index.js\");\n\nfunction BlockHash() {\n  this.pending = null;\n  this.pendingTotal = 0;\n  this.blockSize = this.constructor.blockSize;\n  this.outSize = this.constructor.outSize;\n  this.hmacStrength = this.constructor.hmacStrength;\n  this.padLength = this.constructor.padLength / 8;\n  this.endian = 'big';\n\n  this._delta8 = this.blockSize / 8;\n  this._delta32 = this.blockSize / 32;\n}\nexports.BlockHash = BlockHash;\n\nBlockHash.prototype.update = function update(msg, enc) {\n  // Convert message to array, pad it, and join into 32bit blocks\n  msg = utils.toArray(msg, enc);\n  if (!this.pending)\n    this.pending = msg;\n  else\n    this.pending = this.pending.concat(msg);\n  this.pendingTotal += msg.length;\n\n  // Enough data, try updating\n  if (this.pending.length >= this._delta8) {\n    msg = this.pending;\n\n    // Process pending data in blocks\n    var r = msg.length % this._delta8;\n    this.pending = msg.slice(msg.length - r, msg.length);\n    if (this.pending.length === 0)\n      this.pending = null;\n\n    msg = utils.join32(msg, 0, msg.length - r, this.endian);\n    for (var i = 0; i < msg.length; i += this._delta32)\n      this._update(msg, i, i + this._delta32);\n  }\n\n  return this;\n};\n\nBlockHash.prototype.digest = function digest(enc) {\n  this.update(this._pad());\n  assert(this.pending === null);\n\n  return this._digest(enc);\n};\n\nBlockHash.prototype._pad = function pad() {\n  var len = this.pendingTotal;\n  var bytes = this._delta8;\n  var k = bytes - ((len + this.padLength) % bytes);\n  var res = new Array(k + this.padLength);\n  res[0] = 0x80;\n  for (var i = 1; i < k; i++)\n    res[i] = 0;\n\n  // Append length\n  len <<= 3;\n  if (this.endian === 'big') {\n    for (var t = 8; t < this.padLength; t++)\n      res[i++] = 0;\n\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = (len >>> 24) & 0xff;\n    res[i++] = (len >>> 16) & 0xff;\n    res[i++] = (len >>> 8) & 0xff;\n    res[i++] = len & 0xff;\n  } else {\n    res[i++] = len & 0xff;\n    res[i++] = (len >>> 8) & 0xff;\n    res[i++] = (len >>> 16) & 0xff;\n    res[i++] = (len >>> 24) & 0xff;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n\n    for (t = 8; t < this.padLength; t++)\n      res[i++] = 0;\n  }\n\n  return res;\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/hash.js/lib/hash/common.js?");

/***/ }),

/***/ "./node_modules/hash.js/lib/hash/hmac.js":
/*!***********************************************!*\
  !*** ./node_modules/hash.js/lib/hash/hmac.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./utils */ \"./node_modules/hash.js/lib/hash/utils.js\");\nvar assert = __webpack_require__(/*! minimalistic-assert */ \"./node_modules/minimalistic-assert/index.js\");\n\nfunction Hmac(hash, key, enc) {\n  if (!(this instanceof Hmac))\n    return new Hmac(hash, key, enc);\n  this.Hash = hash;\n  this.blockSize = hash.blockSize / 8;\n  this.outSize = hash.outSize / 8;\n  this.inner = null;\n  this.outer = null;\n\n  this._init(utils.toArray(key, enc));\n}\nmodule.exports = Hmac;\n\nHmac.prototype._init = function init(key) {\n  // Shorten key, if needed\n  if (key.length > this.blockSize)\n    key = new this.Hash().update(key).digest();\n  assert(key.length <= this.blockSize);\n\n  // Add padding to key\n  for (var i = key.length; i < this.blockSize; i++)\n    key.push(0);\n\n  for (i = 0; i < key.length; i++)\n    key[i] ^= 0x36;\n  this.inner = new this.Hash().update(key);\n\n  // 0x36 ^ 0x5c = 0x6a\n  for (i = 0; i < key.length; i++)\n    key[i] ^= 0x6a;\n  this.outer = new this.Hash().update(key);\n};\n\nHmac.prototype.update = function update(msg, enc) {\n  this.inner.update(msg, enc);\n  return this;\n};\n\nHmac.prototype.digest = function digest(enc) {\n  this.outer.update(this.inner.digest());\n  return this.outer.digest(enc);\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/hash.js/lib/hash/hmac.js?");

/***/ }),

/***/ "./node_modules/hash.js/lib/hash/ripemd.js":
/*!*************************************************!*\
  !*** ./node_modules/hash.js/lib/hash/ripemd.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ./utils */ \"./node_modules/hash.js/lib/hash/utils.js\");\nvar common = __webpack_require__(/*! ./common */ \"./node_modules/hash.js/lib/hash/common.js\");\n\nvar rotl32 = utils.rotl32;\nvar sum32 = utils.sum32;\nvar sum32_3 = utils.sum32_3;\nvar sum32_4 = utils.sum32_4;\nvar BlockHash = common.BlockHash;\n\nfunction RIPEMD160() {\n  if (!(this instanceof RIPEMD160))\n    return new RIPEMD160();\n\n  BlockHash.call(this);\n\n  this.h = [ 0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0 ];\n  this.endian = 'little';\n}\nutils.inherits(RIPEMD160, BlockHash);\nexports.ripemd160 = RIPEMD160;\n\nRIPEMD160.blockSize = 512;\nRIPEMD160.outSize = 160;\nRIPEMD160.hmacStrength = 192;\nRIPEMD160.padLength = 64;\n\nRIPEMD160.prototype._update = function update(msg, start) {\n  var A = this.h[0];\n  var B = this.h[1];\n  var C = this.h[2];\n  var D = this.h[3];\n  var E = this.h[4];\n  var Ah = A;\n  var Bh = B;\n  var Ch = C;\n  var Dh = D;\n  var Eh = E;\n  for (var j = 0; j < 80; j++) {\n    var T = sum32(\n      rotl32(\n        sum32_4(A, f(j, B, C, D), msg[r[j] + start], K(j)),\n        s[j]),\n      E);\n    A = E;\n    E = D;\n    D = rotl32(C, 10);\n    C = B;\n    B = T;\n    T = sum32(\n      rotl32(\n        sum32_4(Ah, f(79 - j, Bh, Ch, Dh), msg[rh[j] + start], Kh(j)),\n        sh[j]),\n      Eh);\n    Ah = Eh;\n    Eh = Dh;\n    Dh = rotl32(Ch, 10);\n    Ch = Bh;\n    Bh = T;\n  }\n  T = sum32_3(this.h[1], C, Dh);\n  this.h[1] = sum32_3(this.h[2], D, Eh);\n  this.h[2] = sum32_3(this.h[3], E, Ah);\n  this.h[3] = sum32_3(this.h[4], A, Bh);\n  this.h[4] = sum32_3(this.h[0], B, Ch);\n  this.h[0] = T;\n};\n\nRIPEMD160.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'little');\n  else\n    return utils.split32(this.h, 'little');\n};\n\nfunction f(j, x, y, z) {\n  if (j <= 15)\n    return x ^ y ^ z;\n  else if (j <= 31)\n    return (x & y) | ((~x) & z);\n  else if (j <= 47)\n    return (x | (~y)) ^ z;\n  else if (j <= 63)\n    return (x & z) | (y & (~z));\n  else\n    return x ^ (y | (~z));\n}\n\nfunction K(j) {\n  if (j <= 15)\n    return 0x00000000;\n  else if (j <= 31)\n    return 0x5a827999;\n  else if (j <= 47)\n    return 0x6ed9eba1;\n  else if (j <= 63)\n    return 0x8f1bbcdc;\n  else\n    return 0xa953fd4e;\n}\n\nfunction Kh(j) {\n  if (j <= 15)\n    return 0x50a28be6;\n  else if (j <= 31)\n    return 0x5c4dd124;\n  else if (j <= 47)\n    return 0x6d703ef3;\n  else if (j <= 63)\n    return 0x7a6d76e9;\n  else\n    return 0x00000000;\n}\n\nvar r = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n  7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8,\n  3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12,\n  1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2,\n  4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13\n];\n\nvar rh = [\n  5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12,\n  6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2,\n  15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13,\n  8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14,\n  12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11\n];\n\nvar s = [\n  11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8,\n  7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12,\n  11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5,\n  11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12,\n  9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6\n];\n\nvar sh = [\n  8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6,\n  9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11,\n  9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5,\n  15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8,\n  8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11\n];\n\n\n//# sourceURL=webpack://Game/./node_modules/hash.js/lib/hash/ripemd.js?");

/***/ }),

/***/ "./node_modules/hash.js/lib/hash/sha.js":
/*!**********************************************!*\
  !*** ./node_modules/hash.js/lib/hash/sha.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nexports.sha1 = __webpack_require__(/*! ./sha/1 */ \"./node_modules/hash.js/lib/hash/sha/1.js\");\nexports.sha224 = __webpack_require__(/*! ./sha/224 */ \"./node_modules/hash.js/lib/hash/sha/224.js\");\nexports.sha256 = __webpack_require__(/*! ./sha/256 */ \"./node_modules/hash.js/lib/hash/sha/256.js\");\nexports.sha384 = __webpack_require__(/*! ./sha/384 */ \"./node_modules/hash.js/lib/hash/sha/384.js\");\nexports.sha512 = __webpack_require__(/*! ./sha/512 */ \"./node_modules/hash.js/lib/hash/sha/512.js\");\n\n\n//# sourceURL=webpack://Game/./node_modules/hash.js/lib/hash/sha.js?");

/***/ }),

/***/ "./node_modules/hash.js/lib/hash/sha/1.js":
/*!************************************************!*\
  !*** ./node_modules/hash.js/lib/hash/sha/1.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/hash.js/lib/hash/utils.js\");\nvar common = __webpack_require__(/*! ../common */ \"./node_modules/hash.js/lib/hash/common.js\");\nvar shaCommon = __webpack_require__(/*! ./common */ \"./node_modules/hash.js/lib/hash/sha/common.js\");\n\nvar rotl32 = utils.rotl32;\nvar sum32 = utils.sum32;\nvar sum32_5 = utils.sum32_5;\nvar ft_1 = shaCommon.ft_1;\nvar BlockHash = common.BlockHash;\n\nvar sha1_K = [\n  0x5A827999, 0x6ED9EBA1,\n  0x8F1BBCDC, 0xCA62C1D6\n];\n\nfunction SHA1() {\n  if (!(this instanceof SHA1))\n    return new SHA1();\n\n  BlockHash.call(this);\n  this.h = [\n    0x67452301, 0xefcdab89, 0x98badcfe,\n    0x10325476, 0xc3d2e1f0 ];\n  this.W = new Array(80);\n}\n\nutils.inherits(SHA1, BlockHash);\nmodule.exports = SHA1;\n\nSHA1.blockSize = 512;\nSHA1.outSize = 160;\nSHA1.hmacStrength = 80;\nSHA1.padLength = 64;\n\nSHA1.prototype._update = function _update(msg, start) {\n  var W = this.W;\n\n  for (var i = 0; i < 16; i++)\n    W[i] = msg[start + i];\n\n  for(; i < W.length; i++)\n    W[i] = rotl32(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1);\n\n  var a = this.h[0];\n  var b = this.h[1];\n  var c = this.h[2];\n  var d = this.h[3];\n  var e = this.h[4];\n\n  for (i = 0; i < W.length; i++) {\n    var s = ~~(i / 20);\n    var t = sum32_5(rotl32(a, 5), ft_1(s, b, c, d), e, W[i], sha1_K[s]);\n    e = d;\n    d = c;\n    c = rotl32(b, 30);\n    b = a;\n    a = t;\n  }\n\n  this.h[0] = sum32(this.h[0], a);\n  this.h[1] = sum32(this.h[1], b);\n  this.h[2] = sum32(this.h[2], c);\n  this.h[3] = sum32(this.h[3], d);\n  this.h[4] = sum32(this.h[4], e);\n};\n\nSHA1.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/hash.js/lib/hash/sha/1.js?");

/***/ }),

/***/ "./node_modules/hash.js/lib/hash/sha/224.js":
/*!**************************************************!*\
  !*** ./node_modules/hash.js/lib/hash/sha/224.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/hash.js/lib/hash/utils.js\");\nvar SHA256 = __webpack_require__(/*! ./256 */ \"./node_modules/hash.js/lib/hash/sha/256.js\");\n\nfunction SHA224() {\n  if (!(this instanceof SHA224))\n    return new SHA224();\n\n  SHA256.call(this);\n  this.h = [\n    0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939,\n    0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4 ];\n}\nutils.inherits(SHA224, SHA256);\nmodule.exports = SHA224;\n\nSHA224.blockSize = 512;\nSHA224.outSize = 224;\nSHA224.hmacStrength = 192;\nSHA224.padLength = 64;\n\nSHA224.prototype._digest = function digest(enc) {\n  // Just truncate output\n  if (enc === 'hex')\n    return utils.toHex32(this.h.slice(0, 7), 'big');\n  else\n    return utils.split32(this.h.slice(0, 7), 'big');\n};\n\n\n\n//# sourceURL=webpack://Game/./node_modules/hash.js/lib/hash/sha/224.js?");

/***/ }),

/***/ "./node_modules/hash.js/lib/hash/sha/256.js":
/*!**************************************************!*\
  !*** ./node_modules/hash.js/lib/hash/sha/256.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/hash.js/lib/hash/utils.js\");\nvar common = __webpack_require__(/*! ../common */ \"./node_modules/hash.js/lib/hash/common.js\");\nvar shaCommon = __webpack_require__(/*! ./common */ \"./node_modules/hash.js/lib/hash/sha/common.js\");\nvar assert = __webpack_require__(/*! minimalistic-assert */ \"./node_modules/minimalistic-assert/index.js\");\n\nvar sum32 = utils.sum32;\nvar sum32_4 = utils.sum32_4;\nvar sum32_5 = utils.sum32_5;\nvar ch32 = shaCommon.ch32;\nvar maj32 = shaCommon.maj32;\nvar s0_256 = shaCommon.s0_256;\nvar s1_256 = shaCommon.s1_256;\nvar g0_256 = shaCommon.g0_256;\nvar g1_256 = shaCommon.g1_256;\n\nvar BlockHash = common.BlockHash;\n\nvar sha256_K = [\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5,\n  0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,\n  0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,\n  0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7,\n  0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,\n  0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3,\n  0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5,\n  0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,\n  0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n];\n\nfunction SHA256() {\n  if (!(this instanceof SHA256))\n    return new SHA256();\n\n  BlockHash.call(this);\n  this.h = [\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a,\n    0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n  ];\n  this.k = sha256_K;\n  this.W = new Array(64);\n}\nutils.inherits(SHA256, BlockHash);\nmodule.exports = SHA256;\n\nSHA256.blockSize = 512;\nSHA256.outSize = 256;\nSHA256.hmacStrength = 192;\nSHA256.padLength = 64;\n\nSHA256.prototype._update = function _update(msg, start) {\n  var W = this.W;\n\n  for (var i = 0; i < 16; i++)\n    W[i] = msg[start + i];\n  for (; i < W.length; i++)\n    W[i] = sum32_4(g1_256(W[i - 2]), W[i - 7], g0_256(W[i - 15]), W[i - 16]);\n\n  var a = this.h[0];\n  var b = this.h[1];\n  var c = this.h[2];\n  var d = this.h[3];\n  var e = this.h[4];\n  var f = this.h[5];\n  var g = this.h[6];\n  var h = this.h[7];\n\n  assert(this.k.length === W.length);\n  for (i = 0; i < W.length; i++) {\n    var T1 = sum32_5(h, s1_256(e), ch32(e, f, g), this.k[i], W[i]);\n    var T2 = sum32(s0_256(a), maj32(a, b, c));\n    h = g;\n    g = f;\n    f = e;\n    e = sum32(d, T1);\n    d = c;\n    c = b;\n    b = a;\n    a = sum32(T1, T2);\n  }\n\n  this.h[0] = sum32(this.h[0], a);\n  this.h[1] = sum32(this.h[1], b);\n  this.h[2] = sum32(this.h[2], c);\n  this.h[3] = sum32(this.h[3], d);\n  this.h[4] = sum32(this.h[4], e);\n  this.h[5] = sum32(this.h[5], f);\n  this.h[6] = sum32(this.h[6], g);\n  this.h[7] = sum32(this.h[7], h);\n};\n\nSHA256.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/hash.js/lib/hash/sha/256.js?");

/***/ }),

/***/ "./node_modules/hash.js/lib/hash/sha/384.js":
/*!**************************************************!*\
  !*** ./node_modules/hash.js/lib/hash/sha/384.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/hash.js/lib/hash/utils.js\");\n\nvar SHA512 = __webpack_require__(/*! ./512 */ \"./node_modules/hash.js/lib/hash/sha/512.js\");\n\nfunction SHA384() {\n  if (!(this instanceof SHA384))\n    return new SHA384();\n\n  SHA512.call(this);\n  this.h = [\n    0xcbbb9d5d, 0xc1059ed8,\n    0x629a292a, 0x367cd507,\n    0x9159015a, 0x3070dd17,\n    0x152fecd8, 0xf70e5939,\n    0x67332667, 0xffc00b31,\n    0x8eb44a87, 0x68581511,\n    0xdb0c2e0d, 0x64f98fa7,\n    0x47b5481d, 0xbefa4fa4 ];\n}\nutils.inherits(SHA384, SHA512);\nmodule.exports = SHA384;\n\nSHA384.blockSize = 1024;\nSHA384.outSize = 384;\nSHA384.hmacStrength = 192;\nSHA384.padLength = 128;\n\nSHA384.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h.slice(0, 12), 'big');\n  else\n    return utils.split32(this.h.slice(0, 12), 'big');\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/hash.js/lib/hash/sha/384.js?");

/***/ }),

/***/ "./node_modules/hash.js/lib/hash/sha/512.js":
/*!**************************************************!*\
  !*** ./node_modules/hash.js/lib/hash/sha/512.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/hash.js/lib/hash/utils.js\");\nvar common = __webpack_require__(/*! ../common */ \"./node_modules/hash.js/lib/hash/common.js\");\nvar assert = __webpack_require__(/*! minimalistic-assert */ \"./node_modules/minimalistic-assert/index.js\");\n\nvar rotr64_hi = utils.rotr64_hi;\nvar rotr64_lo = utils.rotr64_lo;\nvar shr64_hi = utils.shr64_hi;\nvar shr64_lo = utils.shr64_lo;\nvar sum64 = utils.sum64;\nvar sum64_hi = utils.sum64_hi;\nvar sum64_lo = utils.sum64_lo;\nvar sum64_4_hi = utils.sum64_4_hi;\nvar sum64_4_lo = utils.sum64_4_lo;\nvar sum64_5_hi = utils.sum64_5_hi;\nvar sum64_5_lo = utils.sum64_5_lo;\n\nvar BlockHash = common.BlockHash;\n\nvar sha512_K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n];\n\nfunction SHA512() {\n  if (!(this instanceof SHA512))\n    return new SHA512();\n\n  BlockHash.call(this);\n  this.h = [\n    0x6a09e667, 0xf3bcc908,\n    0xbb67ae85, 0x84caa73b,\n    0x3c6ef372, 0xfe94f82b,\n    0xa54ff53a, 0x5f1d36f1,\n    0x510e527f, 0xade682d1,\n    0x9b05688c, 0x2b3e6c1f,\n    0x1f83d9ab, 0xfb41bd6b,\n    0x5be0cd19, 0x137e2179 ];\n  this.k = sha512_K;\n  this.W = new Array(160);\n}\nutils.inherits(SHA512, BlockHash);\nmodule.exports = SHA512;\n\nSHA512.blockSize = 1024;\nSHA512.outSize = 512;\nSHA512.hmacStrength = 192;\nSHA512.padLength = 128;\n\nSHA512.prototype._prepareBlock = function _prepareBlock(msg, start) {\n  var W = this.W;\n\n  // 32 x 32bit words\n  for (var i = 0; i < 32; i++)\n    W[i] = msg[start + i];\n  for (; i < W.length; i += 2) {\n    var c0_hi = g1_512_hi(W[i - 4], W[i - 3]);  // i - 2\n    var c0_lo = g1_512_lo(W[i - 4], W[i - 3]);\n    var c1_hi = W[i - 14];  // i - 7\n    var c1_lo = W[i - 13];\n    var c2_hi = g0_512_hi(W[i - 30], W[i - 29]);  // i - 15\n    var c2_lo = g0_512_lo(W[i - 30], W[i - 29]);\n    var c3_hi = W[i - 32];  // i - 16\n    var c3_lo = W[i - 31];\n\n    W[i] = sum64_4_hi(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo);\n    W[i + 1] = sum64_4_lo(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo);\n  }\n};\n\nSHA512.prototype._update = function _update(msg, start) {\n  this._prepareBlock(msg, start);\n\n  var W = this.W;\n\n  var ah = this.h[0];\n  var al = this.h[1];\n  var bh = this.h[2];\n  var bl = this.h[3];\n  var ch = this.h[4];\n  var cl = this.h[5];\n  var dh = this.h[6];\n  var dl = this.h[7];\n  var eh = this.h[8];\n  var el = this.h[9];\n  var fh = this.h[10];\n  var fl = this.h[11];\n  var gh = this.h[12];\n  var gl = this.h[13];\n  var hh = this.h[14];\n  var hl = this.h[15];\n\n  assert(this.k.length === W.length);\n  for (var i = 0; i < W.length; i += 2) {\n    var c0_hi = hh;\n    var c0_lo = hl;\n    var c1_hi = s1_512_hi(eh, el);\n    var c1_lo = s1_512_lo(eh, el);\n    var c2_hi = ch64_hi(eh, el, fh, fl, gh, gl);\n    var c2_lo = ch64_lo(eh, el, fh, fl, gh, gl);\n    var c3_hi = this.k[i];\n    var c3_lo = this.k[i + 1];\n    var c4_hi = W[i];\n    var c4_lo = W[i + 1];\n\n    var T1_hi = sum64_5_hi(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo,\n      c4_hi, c4_lo);\n    var T1_lo = sum64_5_lo(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo,\n      c4_hi, c4_lo);\n\n    c0_hi = s0_512_hi(ah, al);\n    c0_lo = s0_512_lo(ah, al);\n    c1_hi = maj64_hi(ah, al, bh, bl, ch, cl);\n    c1_lo = maj64_lo(ah, al, bh, bl, ch, cl);\n\n    var T2_hi = sum64_hi(c0_hi, c0_lo, c1_hi, c1_lo);\n    var T2_lo = sum64_lo(c0_hi, c0_lo, c1_hi, c1_lo);\n\n    hh = gh;\n    hl = gl;\n\n    gh = fh;\n    gl = fl;\n\n    fh = eh;\n    fl = el;\n\n    eh = sum64_hi(dh, dl, T1_hi, T1_lo);\n    el = sum64_lo(dl, dl, T1_hi, T1_lo);\n\n    dh = ch;\n    dl = cl;\n\n    ch = bh;\n    cl = bl;\n\n    bh = ah;\n    bl = al;\n\n    ah = sum64_hi(T1_hi, T1_lo, T2_hi, T2_lo);\n    al = sum64_lo(T1_hi, T1_lo, T2_hi, T2_lo);\n  }\n\n  sum64(this.h, 0, ah, al);\n  sum64(this.h, 2, bh, bl);\n  sum64(this.h, 4, ch, cl);\n  sum64(this.h, 6, dh, dl);\n  sum64(this.h, 8, eh, el);\n  sum64(this.h, 10, fh, fl);\n  sum64(this.h, 12, gh, gl);\n  sum64(this.h, 14, hh, hl);\n};\n\nSHA512.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n\nfunction ch64_hi(xh, xl, yh, yl, zh) {\n  var r = (xh & yh) ^ ((~xh) & zh);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction ch64_lo(xh, xl, yh, yl, zh, zl) {\n  var r = (xl & yl) ^ ((~xl) & zl);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction maj64_hi(xh, xl, yh, yl, zh) {\n  var r = (xh & yh) ^ (xh & zh) ^ (yh & zh);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction maj64_lo(xh, xl, yh, yl, zh, zl) {\n  var r = (xl & yl) ^ (xl & zl) ^ (yl & zl);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s0_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 28);\n  var c1_hi = rotr64_hi(xl, xh, 2);  // 34\n  var c2_hi = rotr64_hi(xl, xh, 7);  // 39\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s0_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 28);\n  var c1_lo = rotr64_lo(xl, xh, 2);  // 34\n  var c2_lo = rotr64_lo(xl, xh, 7);  // 39\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s1_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 14);\n  var c1_hi = rotr64_hi(xh, xl, 18);\n  var c2_hi = rotr64_hi(xl, xh, 9);  // 41\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s1_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 14);\n  var c1_lo = rotr64_lo(xh, xl, 18);\n  var c2_lo = rotr64_lo(xl, xh, 9);  // 41\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g0_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 1);\n  var c1_hi = rotr64_hi(xh, xl, 8);\n  var c2_hi = shr64_hi(xh, xl, 7);\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g0_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 1);\n  var c1_lo = rotr64_lo(xh, xl, 8);\n  var c2_lo = shr64_lo(xh, xl, 7);\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g1_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 19);\n  var c1_hi = rotr64_hi(xl, xh, 29);  // 61\n  var c2_hi = shr64_hi(xh, xl, 6);\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g1_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 19);\n  var c1_lo = rotr64_lo(xl, xh, 29);  // 61\n  var c2_lo = shr64_lo(xh, xl, 6);\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/hash.js/lib/hash/sha/512.js?");

/***/ }),

/***/ "./node_modules/hash.js/lib/hash/sha/common.js":
/*!*****************************************************!*\
  !*** ./node_modules/hash.js/lib/hash/sha/common.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = __webpack_require__(/*! ../utils */ \"./node_modules/hash.js/lib/hash/utils.js\");\nvar rotr32 = utils.rotr32;\n\nfunction ft_1(s, x, y, z) {\n  if (s === 0)\n    return ch32(x, y, z);\n  if (s === 1 || s === 3)\n    return p32(x, y, z);\n  if (s === 2)\n    return maj32(x, y, z);\n}\nexports.ft_1 = ft_1;\n\nfunction ch32(x, y, z) {\n  return (x & y) ^ ((~x) & z);\n}\nexports.ch32 = ch32;\n\nfunction maj32(x, y, z) {\n  return (x & y) ^ (x & z) ^ (y & z);\n}\nexports.maj32 = maj32;\n\nfunction p32(x, y, z) {\n  return x ^ y ^ z;\n}\nexports.p32 = p32;\n\nfunction s0_256(x) {\n  return rotr32(x, 2) ^ rotr32(x, 13) ^ rotr32(x, 22);\n}\nexports.s0_256 = s0_256;\n\nfunction s1_256(x) {\n  return rotr32(x, 6) ^ rotr32(x, 11) ^ rotr32(x, 25);\n}\nexports.s1_256 = s1_256;\n\nfunction g0_256(x) {\n  return rotr32(x, 7) ^ rotr32(x, 18) ^ (x >>> 3);\n}\nexports.g0_256 = g0_256;\n\nfunction g1_256(x) {\n  return rotr32(x, 17) ^ rotr32(x, 19) ^ (x >>> 10);\n}\nexports.g1_256 = g1_256;\n\n\n//# sourceURL=webpack://Game/./node_modules/hash.js/lib/hash/sha/common.js?");

/***/ }),

/***/ "./node_modules/hash.js/lib/hash/utils.js":
/*!************************************************!*\
  !*** ./node_modules/hash.js/lib/hash/utils.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar assert = __webpack_require__(/*! minimalistic-assert */ \"./node_modules/minimalistic-assert/index.js\");\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n\nexports.inherits = inherits;\n\nfunction isSurrogatePair(msg, i) {\n  if ((msg.charCodeAt(i) & 0xFC00) !== 0xD800) {\n    return false;\n  }\n  if (i < 0 || i + 1 >= msg.length) {\n    return false;\n  }\n  return (msg.charCodeAt(i + 1) & 0xFC00) === 0xDC00;\n}\n\nfunction toArray(msg, enc) {\n  if (Array.isArray(msg))\n    return msg.slice();\n  if (!msg)\n    return [];\n  var res = [];\n  if (typeof msg === 'string') {\n    if (!enc) {\n      // Inspired by stringToUtf8ByteArray() in closure-library by Google\n      // https://github.com/google/closure-library/blob/8598d87242af59aac233270742c8984e2b2bdbe0/closure/goog/crypt/crypt.js#L117-L143\n      // Apache License 2.0\n      // https://github.com/google/closure-library/blob/master/LICENSE\n      var p = 0;\n      for (var i = 0; i < msg.length; i++) {\n        var c = msg.charCodeAt(i);\n        if (c < 128) {\n          res[p++] = c;\n        } else if (c < 2048) {\n          res[p++] = (c >> 6) | 192;\n          res[p++] = (c & 63) | 128;\n        } else if (isSurrogatePair(msg, i)) {\n          c = 0x10000 + ((c & 0x03FF) << 10) + (msg.charCodeAt(++i) & 0x03FF);\n          res[p++] = (c >> 18) | 240;\n          res[p++] = ((c >> 12) & 63) | 128;\n          res[p++] = ((c >> 6) & 63) | 128;\n          res[p++] = (c & 63) | 128;\n        } else {\n          res[p++] = (c >> 12) | 224;\n          res[p++] = ((c >> 6) & 63) | 128;\n          res[p++] = (c & 63) | 128;\n        }\n      }\n    } else if (enc === 'hex') {\n      msg = msg.replace(/[^a-z0-9]+/ig, '');\n      if (msg.length % 2 !== 0)\n        msg = '0' + msg;\n      for (i = 0; i < msg.length; i += 2)\n        res.push(parseInt(msg[i] + msg[i + 1], 16));\n    }\n  } else {\n    for (i = 0; i < msg.length; i++)\n      res[i] = msg[i] | 0;\n  }\n  return res;\n}\nexports.toArray = toArray;\n\nfunction toHex(msg) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++)\n    res += zero2(msg[i].toString(16));\n  return res;\n}\nexports.toHex = toHex;\n\nfunction htonl(w) {\n  var res = (w >>> 24) |\n            ((w >>> 8) & 0xff00) |\n            ((w << 8) & 0xff0000) |\n            ((w & 0xff) << 24);\n  return res >>> 0;\n}\nexports.htonl = htonl;\n\nfunction toHex32(msg, endian) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++) {\n    var w = msg[i];\n    if (endian === 'little')\n      w = htonl(w);\n    res += zero8(w.toString(16));\n  }\n  return res;\n}\nexports.toHex32 = toHex32;\n\nfunction zero2(word) {\n  if (word.length === 1)\n    return '0' + word;\n  else\n    return word;\n}\nexports.zero2 = zero2;\n\nfunction zero8(word) {\n  if (word.length === 7)\n    return '0' + word;\n  else if (word.length === 6)\n    return '00' + word;\n  else if (word.length === 5)\n    return '000' + word;\n  else if (word.length === 4)\n    return '0000' + word;\n  else if (word.length === 3)\n    return '00000' + word;\n  else if (word.length === 2)\n    return '000000' + word;\n  else if (word.length === 1)\n    return '0000000' + word;\n  else\n    return word;\n}\nexports.zero8 = zero8;\n\nfunction join32(msg, start, end, endian) {\n  var len = end - start;\n  assert(len % 4 === 0);\n  var res = new Array(len / 4);\n  for (var i = 0, k = start; i < res.length; i++, k += 4) {\n    var w;\n    if (endian === 'big')\n      w = (msg[k] << 24) | (msg[k + 1] << 16) | (msg[k + 2] << 8) | msg[k + 3];\n    else\n      w = (msg[k + 3] << 24) | (msg[k + 2] << 16) | (msg[k + 1] << 8) | msg[k];\n    res[i] = w >>> 0;\n  }\n  return res;\n}\nexports.join32 = join32;\n\nfunction split32(msg, endian) {\n  var res = new Array(msg.length * 4);\n  for (var i = 0, k = 0; i < msg.length; i++, k += 4) {\n    var m = msg[i];\n    if (endian === 'big') {\n      res[k] = m >>> 24;\n      res[k + 1] = (m >>> 16) & 0xff;\n      res[k + 2] = (m >>> 8) & 0xff;\n      res[k + 3] = m & 0xff;\n    } else {\n      res[k + 3] = m >>> 24;\n      res[k + 2] = (m >>> 16) & 0xff;\n      res[k + 1] = (m >>> 8) & 0xff;\n      res[k] = m & 0xff;\n    }\n  }\n  return res;\n}\nexports.split32 = split32;\n\nfunction rotr32(w, b) {\n  return (w >>> b) | (w << (32 - b));\n}\nexports.rotr32 = rotr32;\n\nfunction rotl32(w, b) {\n  return (w << b) | (w >>> (32 - b));\n}\nexports.rotl32 = rotl32;\n\nfunction sum32(a, b) {\n  return (a + b) >>> 0;\n}\nexports.sum32 = sum32;\n\nfunction sum32_3(a, b, c) {\n  return (a + b + c) >>> 0;\n}\nexports.sum32_3 = sum32_3;\n\nfunction sum32_4(a, b, c, d) {\n  return (a + b + c + d) >>> 0;\n}\nexports.sum32_4 = sum32_4;\n\nfunction sum32_5(a, b, c, d, e) {\n  return (a + b + c + d + e) >>> 0;\n}\nexports.sum32_5 = sum32_5;\n\nfunction sum64(buf, pos, ah, al) {\n  var bh = buf[pos];\n  var bl = buf[pos + 1];\n\n  var lo = (al + bl) >>> 0;\n  var hi = (lo < al ? 1 : 0) + ah + bh;\n  buf[pos] = hi >>> 0;\n  buf[pos + 1] = lo;\n}\nexports.sum64 = sum64;\n\nfunction sum64_hi(ah, al, bh, bl) {\n  var lo = (al + bl) >>> 0;\n  var hi = (lo < al ? 1 : 0) + ah + bh;\n  return hi >>> 0;\n}\nexports.sum64_hi = sum64_hi;\n\nfunction sum64_lo(ah, al, bh, bl) {\n  var lo = al + bl;\n  return lo >>> 0;\n}\nexports.sum64_lo = sum64_lo;\n\nfunction sum64_4_hi(ah, al, bh, bl, ch, cl, dh, dl) {\n  var carry = 0;\n  var lo = al;\n  lo = (lo + bl) >>> 0;\n  carry += lo < al ? 1 : 0;\n  lo = (lo + cl) >>> 0;\n  carry += lo < cl ? 1 : 0;\n  lo = (lo + dl) >>> 0;\n  carry += lo < dl ? 1 : 0;\n\n  var hi = ah + bh + ch + dh + carry;\n  return hi >>> 0;\n}\nexports.sum64_4_hi = sum64_4_hi;\n\nfunction sum64_4_lo(ah, al, bh, bl, ch, cl, dh, dl) {\n  var lo = al + bl + cl + dl;\n  return lo >>> 0;\n}\nexports.sum64_4_lo = sum64_4_lo;\n\nfunction sum64_5_hi(ah, al, bh, bl, ch, cl, dh, dl, eh, el) {\n  var carry = 0;\n  var lo = al;\n  lo = (lo + bl) >>> 0;\n  carry += lo < al ? 1 : 0;\n  lo = (lo + cl) >>> 0;\n  carry += lo < cl ? 1 : 0;\n  lo = (lo + dl) >>> 0;\n  carry += lo < dl ? 1 : 0;\n  lo = (lo + el) >>> 0;\n  carry += lo < el ? 1 : 0;\n\n  var hi = ah + bh + ch + dh + eh + carry;\n  return hi >>> 0;\n}\nexports.sum64_5_hi = sum64_5_hi;\n\nfunction sum64_5_lo(ah, al, bh, bl, ch, cl, dh, dl, eh, el) {\n  var lo = al + bl + cl + dl + el;\n\n  return lo >>> 0;\n}\nexports.sum64_5_lo = sum64_5_lo;\n\nfunction rotr64_hi(ah, al, num) {\n  var r = (al << (32 - num)) | (ah >>> num);\n  return r >>> 0;\n}\nexports.rotr64_hi = rotr64_hi;\n\nfunction rotr64_lo(ah, al, num) {\n  var r = (ah << (32 - num)) | (al >>> num);\n  return r >>> 0;\n}\nexports.rotr64_lo = rotr64_lo;\n\nfunction shr64_hi(ah, al, num) {\n  return ah >>> num;\n}\nexports.shr64_hi = shr64_hi;\n\nfunction shr64_lo(ah, al, num) {\n  var r = (ah << (32 - num)) | (al >>> num);\n  return r >>> 0;\n}\nexports.shr64_lo = shr64_lo;\n\n\n//# sourceURL=webpack://Game/./node_modules/hash.js/lib/hash/utils.js?");

/***/ }),

/***/ "./node_modules/hmac-drbg/lib/hmac-drbg.js":
/*!*************************************************!*\
  !*** ./node_modules/hmac-drbg/lib/hmac-drbg.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar hash = __webpack_require__(/*! hash.js */ \"./node_modules/hash.js/lib/hash.js\");\nvar utils = __webpack_require__(/*! minimalistic-crypto-utils */ \"./node_modules/minimalistic-crypto-utils/lib/utils.js\");\nvar assert = __webpack_require__(/*! minimalistic-assert */ \"./node_modules/minimalistic-assert/index.js\");\n\nfunction HmacDRBG(options) {\n  if (!(this instanceof HmacDRBG))\n    return new HmacDRBG(options);\n  this.hash = options.hash;\n  this.predResist = !!options.predResist;\n\n  this.outLen = this.hash.outSize;\n  this.minEntropy = options.minEntropy || this.hash.hmacStrength;\n\n  this._reseed = null;\n  this.reseedInterval = null;\n  this.K = null;\n  this.V = null;\n\n  var entropy = utils.toArray(options.entropy, options.entropyEnc || 'hex');\n  var nonce = utils.toArray(options.nonce, options.nonceEnc || 'hex');\n  var pers = utils.toArray(options.pers, options.persEnc || 'hex');\n  assert(entropy.length >= (this.minEntropy / 8),\n         'Not enough entropy. Minimum is: ' + this.minEntropy + ' bits');\n  this._init(entropy, nonce, pers);\n}\nmodule.exports = HmacDRBG;\n\nHmacDRBG.prototype._init = function init(entropy, nonce, pers) {\n  var seed = entropy.concat(nonce).concat(pers);\n\n  this.K = new Array(this.outLen / 8);\n  this.V = new Array(this.outLen / 8);\n  for (var i = 0; i < this.V.length; i++) {\n    this.K[i] = 0x00;\n    this.V[i] = 0x01;\n  }\n\n  this._update(seed);\n  this._reseed = 1;\n  this.reseedInterval = 0x1000000000000;  // 2^48\n};\n\nHmacDRBG.prototype._hmac = function hmac() {\n  return new hash.hmac(this.hash, this.K);\n};\n\nHmacDRBG.prototype._update = function update(seed) {\n  var kmac = this._hmac()\n                 .update(this.V)\n                 .update([ 0x00 ]);\n  if (seed)\n    kmac = kmac.update(seed);\n  this.K = kmac.digest();\n  this.V = this._hmac().update(this.V).digest();\n  if (!seed)\n    return;\n\n  this.K = this._hmac()\n               .update(this.V)\n               .update([ 0x01 ])\n               .update(seed)\n               .digest();\n  this.V = this._hmac().update(this.V).digest();\n};\n\nHmacDRBG.prototype.reseed = function reseed(entropy, entropyEnc, add, addEnc) {\n  // Optional entropy enc\n  if (typeof entropyEnc !== 'string') {\n    addEnc = add;\n    add = entropyEnc;\n    entropyEnc = null;\n  }\n\n  entropy = utils.toArray(entropy, entropyEnc);\n  add = utils.toArray(add, addEnc);\n\n  assert(entropy.length >= (this.minEntropy / 8),\n         'Not enough entropy. Minimum is: ' + this.minEntropy + ' bits');\n\n  this._update(entropy.concat(add || []));\n  this._reseed = 1;\n};\n\nHmacDRBG.prototype.generate = function generate(len, enc, add, addEnc) {\n  if (this._reseed > this.reseedInterval)\n    throw new Error('Reseed is required');\n\n  // Optional encoding\n  if (typeof enc !== 'string') {\n    addEnc = add;\n    add = enc;\n    enc = null;\n  }\n\n  // Optional additional data\n  if (add) {\n    add = utils.toArray(add, addEnc || 'hex');\n    this._update(add);\n  }\n\n  var temp = [];\n  while (temp.length < len) {\n    this.V = this._hmac().update(this.V).digest();\n    temp = temp.concat(this.V);\n  }\n\n  var res = temp.slice(0, len);\n  this._update(add);\n  this._reseed++;\n  return utils.encode(res, enc);\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/hmac-drbg/lib/hmac-drbg.js?");

/***/ }),

/***/ "./node_modules/ieee754/index.js":
/*!***************************************!*\
  !*** ./node_modules/ieee754/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/ieee754/index.js?");

/***/ }),

/***/ "./node_modules/inherits/inherits_browser.js":
/*!***************************************************!*\
  !*** ./node_modules/inherits/inherits_browser.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/inherits/inherits_browser.js?");

/***/ }),

/***/ "./node_modules/isarray/index.js":
/*!***************************************!*\
  !*** ./node_modules/isarray/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/isarray/index.js?");

/***/ }),

/***/ "./node_modules/js-file-download/file-download.js":
/*!********************************************************!*\
  !*** ./node_modules/js-file-download/file-download.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function(data, filename, mime, bom) {\n    var blobData = (typeof bom !== 'undefined') ? [bom, data] : [data]\n    var blob = new Blob(blobData, {type: mime || 'application/octet-stream'});\n    if (typeof window.navigator.msSaveBlob !== 'undefined') {\n        // IE workaround for \"HTML7007: One or more blob URLs were\n        // revoked by closing the blob for which they were created.\n        // These URLs will no longer resolve as the data backing\n        // the URL has been freed.\"\n        window.navigator.msSaveBlob(blob, filename);\n    }\n    else {\n        var blobURL = (window.URL && window.URL.createObjectURL) ? window.URL.createObjectURL(blob) : window.webkitURL.createObjectURL(blob);\n        var tempLink = document.createElement('a');\n        tempLink.style.display = 'none';\n        tempLink.href = blobURL;\n        tempLink.setAttribute('download', filename);\n\n        // Safari thinks _blank anchor are pop ups. We only want to set _blank\n        // target if the browser does not support the HTML5 download attribute.\n        // This allows you to download files in desktop safari if pop up blocking\n        // is enabled.\n        if (typeof tempLink.download === 'undefined') {\n            tempLink.setAttribute('target', '_blank');\n        }\n\n        document.body.appendChild(tempLink);\n        tempLink.click();\n\n        // Fixes \"webkit blob resource error 1\"\n        setTimeout(function() {\n            document.body.removeChild(tempLink);\n            window.URL.revokeObjectURL(blobURL);\n        }, 200)\n    }\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/js-file-download/file-download.js?");

/***/ }),

/***/ "./node_modules/lz-string/libs/lz-string.js":
/*!**************************************************!*\
  !*** ./node_modules/lz-string/libs/lz-string.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_RESULT__;// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\nvar LZString = (function() {\n\n// private property\nvar f = String.fromCharCode;\nvar keyStrBase64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nvar keyStrUriSafe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\";\nvar baseReverseDic = {};\n\nfunction getBaseValue(alphabet, character) {\n  if (!baseReverseDic[alphabet]) {\n    baseReverseDic[alphabet] = {};\n    for (var i=0 ; i<alphabet.length ; i++) {\n      baseReverseDic[alphabet][alphabet.charAt(i)] = i;\n    }\n  }\n  return baseReverseDic[alphabet][character];\n}\n\nvar LZString = {\n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var res = LZString._compress(input, 6, function(a){return keyStrBase64.charAt(a);});\n    switch (res.length % 4) { // To produce valid Base64\n    default: // When could this happen ?\n    case 0 : return res;\n    case 1 : return res+\"===\";\n    case 2 : return res+\"==\";\n    case 3 : return res+\"=\";\n    }\n  },\n\n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrBase64, input.charAt(index)); });\n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 15, function(a){return f(a+32);}) + \" \";\n  },\n\n  decompressFromUTF16: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 16384, function(index) { return compressed.charCodeAt(index) - 32; });\n  },\n\n  //compress into uint8array (UCS-2 big endian format)\n  compressToUint8Array: function (uncompressed) {\n    var compressed = LZString.compress(uncompressed);\n    var buf=new Uint8Array(compressed.length*2); // 2 bytes per character\n\n    for (var i=0, TotalLen=compressed.length; i<TotalLen; i++) {\n      var current_value = compressed.charCodeAt(i);\n      buf[i*2] = current_value >>> 8;\n      buf[i*2+1] = current_value % 256;\n    }\n    return buf;\n  },\n\n  //decompress from uint8array (UCS-2 big endian format)\n  decompressFromUint8Array:function (compressed) {\n    if (compressed===null || compressed===undefined){\n        return LZString.decompress(compressed);\n    } else {\n        var buf=new Array(compressed.length/2); // 2 bytes per character\n        for (var i=0, TotalLen=buf.length; i<TotalLen; i++) {\n          buf[i]=compressed[i*2]*256+compressed[i*2+1];\n        }\n\n        var result = [];\n        buf.forEach(function (c) {\n          result.push(f(c));\n        });\n        return LZString.decompress(result.join(''));\n\n    }\n\n  },\n\n\n  //compress into a string that is already URI encoded\n  compressToEncodedURIComponent: function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 6, function(a){return keyStrUriSafe.charAt(a);});\n  },\n\n  //decompress from an output of compressToEncodedURIComponent\n  decompressFromEncodedURIComponent:function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    input = input.replace(/ /g, \"+\");\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrUriSafe, input.charAt(index)); });\n  },\n\n  compress: function (uncompressed) {\n    return LZString._compress(uncompressed, 16, function(a){return f(a);});\n  },\n  _compress: function (uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data=[],\n        context_data_val=0,\n        context_data_position=0,\n        ii;\n\n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n\n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position ==bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n\n\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n\n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == bitsPerChar-1) {\n            context_data_position = 0;\n            context_data.push(getCharFromInt(context_data_val));\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n\n\n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n\n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data_position = 0;\n        context_data.push(getCharFromInt(context_data_val));\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n\n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data.push(getCharFromInt(context_data_val));\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data.join('');\n  },\n\n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 32768, function(index) { return compressed.charCodeAt(index); });\n  },\n\n  _decompress: function (length, resetValue, getNextValue) {\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = [],\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        data = {val:getNextValue(0), position:resetValue, index:1};\n\n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n\n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = resetValue;\n        data.val = getNextValue(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n\n    switch (next = bits) {\n      case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2:\n        return \"\";\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n      if (data.index > length) {\n        return \"\";\n      }\n\n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = resetValue;\n          data.val = getNextValue(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2:\n          return result.join('');\n      }\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result.push(entry);\n\n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n\n      w = entry;\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n    }\n  }\n};\n  return LZString;\n})();\n\nif (true) {\n  !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () { return LZString; }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n} else {}\n\n\n//# sourceURL=webpack://Game/./node_modules/lz-string/libs/lz-string.js?");

/***/ }),

/***/ "./node_modules/md5.js/index.js":
/*!**************************************!*\
  !*** ./node_modules/md5.js/index.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\nvar HashBase = __webpack_require__(/*! hash-base */ \"./node_modules/hash-base/index.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nvar ARRAY16 = new Array(16)\n\nfunction MD5 () {\n  HashBase.call(this, 64)\n\n  // state\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n}\n\ninherits(MD5, HashBase)\n\nMD5.prototype._update = function () {\n  var M = ARRAY16\n  for (var i = 0; i < 16; ++i) M[i] = this._block.readInt32LE(i * 4)\n\n  var a = this._a\n  var b = this._b\n  var c = this._c\n  var d = this._d\n\n  a = fnF(a, b, c, d, M[0], 0xd76aa478, 7)\n  d = fnF(d, a, b, c, M[1], 0xe8c7b756, 12)\n  c = fnF(c, d, a, b, M[2], 0x242070db, 17)\n  b = fnF(b, c, d, a, M[3], 0xc1bdceee, 22)\n  a = fnF(a, b, c, d, M[4], 0xf57c0faf, 7)\n  d = fnF(d, a, b, c, M[5], 0x4787c62a, 12)\n  c = fnF(c, d, a, b, M[6], 0xa8304613, 17)\n  b = fnF(b, c, d, a, M[7], 0xfd469501, 22)\n  a = fnF(a, b, c, d, M[8], 0x698098d8, 7)\n  d = fnF(d, a, b, c, M[9], 0x8b44f7af, 12)\n  c = fnF(c, d, a, b, M[10], 0xffff5bb1, 17)\n  b = fnF(b, c, d, a, M[11], 0x895cd7be, 22)\n  a = fnF(a, b, c, d, M[12], 0x6b901122, 7)\n  d = fnF(d, a, b, c, M[13], 0xfd987193, 12)\n  c = fnF(c, d, a, b, M[14], 0xa679438e, 17)\n  b = fnF(b, c, d, a, M[15], 0x49b40821, 22)\n\n  a = fnG(a, b, c, d, M[1], 0xf61e2562, 5)\n  d = fnG(d, a, b, c, M[6], 0xc040b340, 9)\n  c = fnG(c, d, a, b, M[11], 0x265e5a51, 14)\n  b = fnG(b, c, d, a, M[0], 0xe9b6c7aa, 20)\n  a = fnG(a, b, c, d, M[5], 0xd62f105d, 5)\n  d = fnG(d, a, b, c, M[10], 0x02441453, 9)\n  c = fnG(c, d, a, b, M[15], 0xd8a1e681, 14)\n  b = fnG(b, c, d, a, M[4], 0xe7d3fbc8, 20)\n  a = fnG(a, b, c, d, M[9], 0x21e1cde6, 5)\n  d = fnG(d, a, b, c, M[14], 0xc33707d6, 9)\n  c = fnG(c, d, a, b, M[3], 0xf4d50d87, 14)\n  b = fnG(b, c, d, a, M[8], 0x455a14ed, 20)\n  a = fnG(a, b, c, d, M[13], 0xa9e3e905, 5)\n  d = fnG(d, a, b, c, M[2], 0xfcefa3f8, 9)\n  c = fnG(c, d, a, b, M[7], 0x676f02d9, 14)\n  b = fnG(b, c, d, a, M[12], 0x8d2a4c8a, 20)\n\n  a = fnH(a, b, c, d, M[5], 0xfffa3942, 4)\n  d = fnH(d, a, b, c, M[8], 0x8771f681, 11)\n  c = fnH(c, d, a, b, M[11], 0x6d9d6122, 16)\n  b = fnH(b, c, d, a, M[14], 0xfde5380c, 23)\n  a = fnH(a, b, c, d, M[1], 0xa4beea44, 4)\n  d = fnH(d, a, b, c, M[4], 0x4bdecfa9, 11)\n  c = fnH(c, d, a, b, M[7], 0xf6bb4b60, 16)\n  b = fnH(b, c, d, a, M[10], 0xbebfbc70, 23)\n  a = fnH(a, b, c, d, M[13], 0x289b7ec6, 4)\n  d = fnH(d, a, b, c, M[0], 0xeaa127fa, 11)\n  c = fnH(c, d, a, b, M[3], 0xd4ef3085, 16)\n  b = fnH(b, c, d, a, M[6], 0x04881d05, 23)\n  a = fnH(a, b, c, d, M[9], 0xd9d4d039, 4)\n  d = fnH(d, a, b, c, M[12], 0xe6db99e5, 11)\n  c = fnH(c, d, a, b, M[15], 0x1fa27cf8, 16)\n  b = fnH(b, c, d, a, M[2], 0xc4ac5665, 23)\n\n  a = fnI(a, b, c, d, M[0], 0xf4292244, 6)\n  d = fnI(d, a, b, c, M[7], 0x432aff97, 10)\n  c = fnI(c, d, a, b, M[14], 0xab9423a7, 15)\n  b = fnI(b, c, d, a, M[5], 0xfc93a039, 21)\n  a = fnI(a, b, c, d, M[12], 0x655b59c3, 6)\n  d = fnI(d, a, b, c, M[3], 0x8f0ccc92, 10)\n  c = fnI(c, d, a, b, M[10], 0xffeff47d, 15)\n  b = fnI(b, c, d, a, M[1], 0x85845dd1, 21)\n  a = fnI(a, b, c, d, M[8], 0x6fa87e4f, 6)\n  d = fnI(d, a, b, c, M[15], 0xfe2ce6e0, 10)\n  c = fnI(c, d, a, b, M[6], 0xa3014314, 15)\n  b = fnI(b, c, d, a, M[13], 0x4e0811a1, 21)\n  a = fnI(a, b, c, d, M[4], 0xf7537e82, 6)\n  d = fnI(d, a, b, c, M[11], 0xbd3af235, 10)\n  c = fnI(c, d, a, b, M[2], 0x2ad7d2bb, 15)\n  b = fnI(b, c, d, a, M[9], 0xeb86d391, 21)\n\n  this._a = (this._a + a) | 0\n  this._b = (this._b + b) | 0\n  this._c = (this._c + c) | 0\n  this._d = (this._d + d) | 0\n}\n\nMD5.prototype._digest = function () {\n  // create padding and handle blocks\n  this._block[this._blockOffset++] = 0x80\n  if (this._blockOffset > 56) {\n    this._block.fill(0, this._blockOffset, 64)\n    this._update()\n    this._blockOffset = 0\n  }\n\n  this._block.fill(0, this._blockOffset, 56)\n  this._block.writeUInt32LE(this._length[0], 56)\n  this._block.writeUInt32LE(this._length[1], 60)\n  this._update()\n\n  // produce result\n  var buffer = Buffer.allocUnsafe(16)\n  buffer.writeInt32LE(this._a, 0)\n  buffer.writeInt32LE(this._b, 4)\n  buffer.writeInt32LE(this._c, 8)\n  buffer.writeInt32LE(this._d, 12)\n  return buffer\n}\n\nfunction rotl (x, n) {\n  return (x << n) | (x >>> (32 - n))\n}\n\nfunction fnF (a, b, c, d, m, k, s) {\n  return (rotl((a + ((b & c) | ((~b) & d)) + m + k) | 0, s) + b) | 0\n}\n\nfunction fnG (a, b, c, d, m, k, s) {\n  return (rotl((a + ((b & d) | (c & (~d))) + m + k) | 0, s) + b) | 0\n}\n\nfunction fnH (a, b, c, d, m, k, s) {\n  return (rotl((a + (b ^ c ^ d) + m + k) | 0, s) + b) | 0\n}\n\nfunction fnI (a, b, c, d, m, k, s) {\n  return (rotl((a + ((c ^ (b | (~d)))) + m + k) | 0, s) + b) | 0\n}\n\nmodule.exports = MD5\n\n\n//# sourceURL=webpack://Game/./node_modules/md5.js/index.js?");

/***/ }),

/***/ "./node_modules/miller-rabin/lib/mr.js":
/*!*********************************************!*\
  !*** ./node_modules/miller-rabin/lib/mr.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var bn = __webpack_require__(/*! bn.js */ \"./node_modules/miller-rabin/node_modules/bn.js/lib/bn.js\");\nvar brorand = __webpack_require__(/*! brorand */ \"./node_modules/brorand/index.js\");\n\nfunction MillerRabin(rand) {\n  this.rand = rand || new brorand.Rand();\n}\nmodule.exports = MillerRabin;\n\nMillerRabin.create = function create(rand) {\n  return new MillerRabin(rand);\n};\n\nMillerRabin.prototype._randbelow = function _randbelow(n) {\n  var len = n.bitLength();\n  var min_bytes = Math.ceil(len / 8);\n\n  // Generage random bytes until a number less than n is found.\n  // This ensures that 0..n-1 have an equal probability of being selected.\n  do\n    var a = new bn(this.rand.generate(min_bytes));\n  while (a.cmp(n) >= 0);\n\n  return a;\n};\n\nMillerRabin.prototype._randrange = function _randrange(start, stop) {\n  // Generate a random number greater than or equal to start and less than stop.\n  var size = stop.sub(start);\n  return start.add(this._randbelow(size));\n};\n\nMillerRabin.prototype.test = function test(n, k, cb) {\n  var len = n.bitLength();\n  var red = bn.mont(n);\n  var rone = new bn(1).toRed(red);\n\n  if (!k)\n    k = Math.max(1, (len / 48) | 0);\n\n  // Find d and s, (n - 1) = (2 ^ s) * d;\n  var n1 = n.subn(1);\n  for (var s = 0; !n1.testn(s); s++) {}\n  var d = n.shrn(s);\n\n  var rn1 = n1.toRed(red);\n\n  var prime = true;\n  for (; k > 0; k--) {\n    var a = this._randrange(new bn(2), n1);\n    if (cb)\n      cb(a);\n\n    var x = a.toRed(red).redPow(d);\n    if (x.cmp(rone) === 0 || x.cmp(rn1) === 0)\n      continue;\n\n    for (var i = 1; i < s; i++) {\n      x = x.redSqr();\n\n      if (x.cmp(rone) === 0)\n        return false;\n      if (x.cmp(rn1) === 0)\n        break;\n    }\n\n    if (i === s)\n      return false;\n  }\n\n  return prime;\n};\n\nMillerRabin.prototype.getDivisor = function getDivisor(n, k) {\n  var len = n.bitLength();\n  var red = bn.mont(n);\n  var rone = new bn(1).toRed(red);\n\n  if (!k)\n    k = Math.max(1, (len / 48) | 0);\n\n  // Find d and s, (n - 1) = (2 ^ s) * d;\n  var n1 = n.subn(1);\n  for (var s = 0; !n1.testn(s); s++) {}\n  var d = n.shrn(s);\n\n  var rn1 = n1.toRed(red);\n\n  for (; k > 0; k--) {\n    var a = this._randrange(new bn(2), n1);\n\n    var g = n.gcd(a);\n    if (g.cmpn(1) !== 0)\n      return g;\n\n    var x = a.toRed(red).redPow(d);\n    if (x.cmp(rone) === 0 || x.cmp(rn1) === 0)\n      continue;\n\n    for (var i = 1; i < s; i++) {\n      x = x.redSqr();\n\n      if (x.cmp(rone) === 0)\n        return x.fromRed().subn(1).gcd(n);\n      if (x.cmp(rn1) === 0)\n        break;\n    }\n\n    if (i === s) {\n      x = x.redSqr();\n      return x.fromRed().subn(1).gcd(n);\n    }\n  }\n\n  return false;\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/miller-rabin/lib/mr.js?");

/***/ }),

/***/ "./node_modules/miller-rabin/node_modules/bn.js/lib/bn.js":
/*!****************************************************************!*\
  !*** ./node_modules/miller-rabin/node_modules/bn.js/lib/bn.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(module) {(function (module, exports) {\r\n  'use strict';\r\n\r\n  // Utils\r\n  function assert (val, msg) {\r\n    if (!val) throw new Error(msg || 'Assertion failed');\r\n  }\r\n\r\n  // Could use `inherits` module, but don't want to move from single file\r\n  // architecture yet.\r\n  function inherits (ctor, superCtor) {\r\n    ctor.super_ = superCtor;\r\n    var TempCtor = function () {};\r\n    TempCtor.prototype = superCtor.prototype;\r\n    ctor.prototype = new TempCtor();\r\n    ctor.prototype.constructor = ctor;\r\n  }\r\n\r\n  // BN\r\n\r\n  function BN (number, base, endian) {\r\n    if (BN.isBN(number)) {\r\n      return number;\r\n    }\r\n\r\n    this.negative = 0;\r\n    this.words = null;\r\n    this.length = 0;\r\n\r\n    // Reduction context\r\n    this.red = null;\r\n\r\n    if (number !== null) {\r\n      if (base === 'le' || base === 'be') {\r\n        endian = base;\r\n        base = 10;\r\n      }\r\n\r\n      this._init(number || 0, base || 10, endian || 'be');\r\n    }\r\n  }\r\n  if (typeof module === 'object') {\r\n    module.exports = BN;\r\n  } else {\r\n    exports.BN = BN;\r\n  }\r\n\r\n  BN.BN = BN;\r\n  BN.wordSize = 26;\r\n\r\n  var Buffer;\r\n  try {\r\n    Buffer = __webpack_require__(/*! buffer */ 6).Buffer;\r\n  } catch (e) {\r\n  }\r\n\r\n  BN.isBN = function isBN (num) {\r\n    if (num instanceof BN) {\r\n      return true;\r\n    }\r\n\r\n    return num !== null && typeof num === 'object' &&\r\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\r\n  };\r\n\r\n  BN.max = function max (left, right) {\r\n    if (left.cmp(right) > 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.min = function min (left, right) {\r\n    if (left.cmp(right) < 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.prototype._init = function init (number, base, endian) {\r\n    if (typeof number === 'number') {\r\n      return this._initNumber(number, base, endian);\r\n    }\r\n\r\n    if (typeof number === 'object') {\r\n      return this._initArray(number, base, endian);\r\n    }\r\n\r\n    if (base === 'hex') {\r\n      base = 16;\r\n    }\r\n    assert(base === (base | 0) && base >= 2 && base <= 36);\r\n\r\n    number = number.toString().replace(/\\s+/g, '');\r\n    var start = 0;\r\n    if (number[0] === '-') {\r\n      start++;\r\n    }\r\n\r\n    if (base === 16) {\r\n      this._parseHex(number, start);\r\n    } else {\r\n      this._parseBase(number, base, start);\r\n    }\r\n\r\n    if (number[0] === '-') {\r\n      this.negative = 1;\r\n    }\r\n\r\n    this.strip();\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\r\n    if (number < 0) {\r\n      this.negative = 1;\r\n      number = -number;\r\n    }\r\n    if (number < 0x4000000) {\r\n      this.words = [ number & 0x3ffffff ];\r\n      this.length = 1;\r\n    } else if (number < 0x10000000000000) {\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff\r\n      ];\r\n      this.length = 2;\r\n    } else {\r\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff,\r\n        1\r\n      ];\r\n      this.length = 3;\r\n    }\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    // Reverse the bytes\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initArray = function _initArray (number, base, endian) {\r\n    // Perhaps a Uint8Array\r\n    assert(typeof number.length === 'number');\r\n    if (number.length <= 0) {\r\n      this.words = [ 0 ];\r\n      this.length = 1;\r\n      return this;\r\n    }\r\n\r\n    this.length = Math.ceil(number.length / 3);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    var off = 0;\r\n    if (endian === 'be') {\r\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\r\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    } else if (endian === 'le') {\r\n      for (i = 0, j = 0; i < number.length; i += 3) {\r\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    }\r\n    return this.strip();\r\n  };\r\n\r\n  function parseHex (str, start, end) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r <<= 4;\r\n\r\n      // 'a' - 'f'\r\n      if (c >= 49 && c <= 54) {\r\n        r |= c - 49 + 0xa;\r\n\r\n      // 'A' - 'F'\r\n      } else if (c >= 17 && c <= 22) {\r\n        r |= c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        r |= c & 0xf;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseHex = function _parseHex (number, start) {\r\n    // Create possibly bigger array to ensure that it fits the number\r\n    this.length = Math.ceil((number.length - start) / 6);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    // Scan 24-bit chunks and add them to the number\r\n    var off = 0;\r\n    for (i = number.length - 6, j = 0; i >= start; i -= 6) {\r\n      w = parseHex(number, i, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      // NOTE: `0x3fffff` is intentional here, 26bits max shift + 24bit hex limb\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n      off += 24;\r\n      if (off >= 26) {\r\n        off -= 26;\r\n        j++;\r\n      }\r\n    }\r\n    if (i + 6 !== start) {\r\n      w = parseHex(number, start, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n    }\r\n    this.strip();\r\n  };\r\n\r\n  function parseBase (str, start, end, mul) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r *= mul;\r\n\r\n      // 'a'\r\n      if (c >= 49) {\r\n        r += c - 49 + 0xa;\r\n\r\n      // 'A'\r\n      } else if (c >= 17) {\r\n        r += c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        r += c;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\r\n    // Initialize as zero\r\n    this.words = [ 0 ];\r\n    this.length = 1;\r\n\r\n    // Find length of limb in base\r\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\r\n      limbLen++;\r\n    }\r\n    limbLen--;\r\n    limbPow = (limbPow / base) | 0;\r\n\r\n    var total = number.length - start;\r\n    var mod = total % limbLen;\r\n    var end = Math.min(total, total - mod) + start;\r\n\r\n    var word = 0;\r\n    for (var i = start; i < end; i += limbLen) {\r\n      word = parseBase(number, i, i + limbLen, base);\r\n\r\n      this.imuln(limbPow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n\r\n    if (mod !== 0) {\r\n      var pow = 1;\r\n      word = parseBase(number, i, number.length, base);\r\n\r\n      for (i = 0; i < mod; i++) {\r\n        pow *= base;\r\n      }\r\n\r\n      this.imuln(pow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n  };\r\n\r\n  BN.prototype.copy = function copy (dest) {\r\n    dest.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      dest.words[i] = this.words[i];\r\n    }\r\n    dest.length = this.length;\r\n    dest.negative = this.negative;\r\n    dest.red = this.red;\r\n  };\r\n\r\n  BN.prototype.clone = function clone () {\r\n    var r = new BN(null);\r\n    this.copy(r);\r\n    return r;\r\n  };\r\n\r\n  BN.prototype._expand = function _expand (size) {\r\n    while (this.length < size) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  // Remove leading `0` from `this`\r\n  BN.prototype.strip = function strip () {\r\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\r\n      this.length--;\r\n    }\r\n    return this._normSign();\r\n  };\r\n\r\n  BN.prototype._normSign = function _normSign () {\r\n    // -0 = 0\r\n    if (this.length === 1 && this.words[0] === 0) {\r\n      this.negative = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.inspect = function inspect () {\r\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\r\n  };\r\n\r\n  /*\r\n\r\n  var zeros = [];\r\n  var groupSizes = [];\r\n  var groupBases = [];\r\n\r\n  var s = '';\r\n  var i = -1;\r\n  while (++i < BN.wordSize) {\r\n    zeros[i] = s;\r\n    s += '0';\r\n  }\r\n  groupSizes[0] = 0;\r\n  groupSizes[1] = 0;\r\n  groupBases[0] = 0;\r\n  groupBases[1] = 0;\r\n  var base = 2 - 1;\r\n  while (++base < 36 + 1) {\r\n    var groupSize = 0;\r\n    var groupBase = 1;\r\n    while (groupBase < (1 << BN.wordSize) / base) {\r\n      groupBase *= base;\r\n      groupSize += 1;\r\n    }\r\n    groupSizes[base] = groupSize;\r\n    groupBases[base] = groupBase;\r\n  }\r\n\r\n  */\r\n\r\n  var zeros = [\r\n    '',\r\n    '0',\r\n    '00',\r\n    '000',\r\n    '0000',\r\n    '00000',\r\n    '000000',\r\n    '0000000',\r\n    '00000000',\r\n    '000000000',\r\n    '0000000000',\r\n    '00000000000',\r\n    '000000000000',\r\n    '0000000000000',\r\n    '00000000000000',\r\n    '000000000000000',\r\n    '0000000000000000',\r\n    '00000000000000000',\r\n    '000000000000000000',\r\n    '0000000000000000000',\r\n    '00000000000000000000',\r\n    '000000000000000000000',\r\n    '0000000000000000000000',\r\n    '00000000000000000000000',\r\n    '000000000000000000000000',\r\n    '0000000000000000000000000'\r\n  ];\r\n\r\n  var groupSizes = [\r\n    0, 0,\r\n    25, 16, 12, 11, 10, 9, 8,\r\n    8, 7, 7, 7, 7, 6, 6,\r\n    6, 6, 6, 6, 6, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5\r\n  ];\r\n\r\n  var groupBases = [\r\n    0, 0,\r\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\r\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\r\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\r\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\r\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\r\n  ];\r\n\r\n  BN.prototype.toString = function toString (base, padding) {\r\n    base = base || 10;\r\n    padding = padding | 0 || 1;\r\n\r\n    var out;\r\n    if (base === 16 || base === 'hex') {\r\n      out = '';\r\n      var off = 0;\r\n      var carry = 0;\r\n      for (var i = 0; i < this.length; i++) {\r\n        var w = this.words[i];\r\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\r\n        carry = (w >>> (24 - off)) & 0xffffff;\r\n        if (carry !== 0 || i !== this.length - 1) {\r\n          out = zeros[6 - word.length] + word + out;\r\n        } else {\r\n          out = word + out;\r\n        }\r\n        off += 2;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          i--;\r\n        }\r\n      }\r\n      if (carry !== 0) {\r\n        out = carry.toString(16) + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    if (base === (base | 0) && base >= 2 && base <= 36) {\r\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\r\n      var groupSize = groupSizes[base];\r\n      // var groupBase = Math.pow(base, groupSize);\r\n      var groupBase = groupBases[base];\r\n      out = '';\r\n      var c = this.clone();\r\n      c.negative = 0;\r\n      while (!c.isZero()) {\r\n        var r = c.modn(groupBase).toString(base);\r\n        c = c.idivn(groupBase);\r\n\r\n        if (!c.isZero()) {\r\n          out = zeros[groupSize - r.length] + r + out;\r\n        } else {\r\n          out = r + out;\r\n        }\r\n      }\r\n      if (this.isZero()) {\r\n        out = '0' + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    assert(false, 'Base should be between 2 and 36');\r\n  };\r\n\r\n  BN.prototype.toNumber = function toNumber () {\r\n    var ret = this.words[0];\r\n    if (this.length === 2) {\r\n      ret += this.words[1] * 0x4000000;\r\n    } else if (this.length === 3 && this.words[2] === 0x01) {\r\n      // NOTE: at this stage it is known that the top bit is set\r\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\r\n    } else if (this.length > 2) {\r\n      assert(false, 'Number can only safely store up to 53 bits');\r\n    }\r\n    return (this.negative !== 0) ? -ret : ret;\r\n  };\r\n\r\n  BN.prototype.toJSON = function toJSON () {\r\n    return this.toString(16);\r\n  };\r\n\r\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\r\n    assert(typeof Buffer !== 'undefined');\r\n    return this.toArrayLike(Buffer, endian, length);\r\n  };\r\n\r\n  BN.prototype.toArray = function toArray (endian, length) {\r\n    return this.toArrayLike(Array, endian, length);\r\n  };\r\n\r\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\r\n    var byteLength = this.byteLength();\r\n    var reqLength = length || Math.max(1, byteLength);\r\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\r\n    assert(reqLength > 0, 'Requested array length <= 0');\r\n\r\n    this.strip();\r\n    var littleEndian = endian === 'le';\r\n    var res = new ArrayType(reqLength);\r\n\r\n    var b, i;\r\n    var q = this.clone();\r\n    if (!littleEndian) {\r\n      // Assume big-endian\r\n      for (i = 0; i < reqLength - byteLength; i++) {\r\n        res[i] = 0;\r\n      }\r\n\r\n      for (i = 0; !q.isZero(); i++) {\r\n        b = q.andln(0xff);\r\n        q.iushrn(8);\r\n\r\n        res[reqLength - i - 1] = b;\r\n      }\r\n    } else {\r\n      for (i = 0; !q.isZero(); i++) {\r\n        b = q.andln(0xff);\r\n        q.iushrn(8);\r\n\r\n        res[i] = b;\r\n      }\r\n\r\n      for (; i < reqLength; i++) {\r\n        res[i] = 0;\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  if (Math.clz32) {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      return 32 - Math.clz32(w);\r\n    };\r\n  } else {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      var t = w;\r\n      var r = 0;\r\n      if (t >= 0x1000) {\r\n        r += 13;\r\n        t >>>= 13;\r\n      }\r\n      if (t >= 0x40) {\r\n        r += 7;\r\n        t >>>= 7;\r\n      }\r\n      if (t >= 0x8) {\r\n        r += 4;\r\n        t >>>= 4;\r\n      }\r\n      if (t >= 0x02) {\r\n        r += 2;\r\n        t >>>= 2;\r\n      }\r\n      return r + t;\r\n    };\r\n  }\r\n\r\n  BN.prototype._zeroBits = function _zeroBits (w) {\r\n    // Short-cut\r\n    if (w === 0) return 26;\r\n\r\n    var t = w;\r\n    var r = 0;\r\n    if ((t & 0x1fff) === 0) {\r\n      r += 13;\r\n      t >>>= 13;\r\n    }\r\n    if ((t & 0x7f) === 0) {\r\n      r += 7;\r\n      t >>>= 7;\r\n    }\r\n    if ((t & 0xf) === 0) {\r\n      r += 4;\r\n      t >>>= 4;\r\n    }\r\n    if ((t & 0x3) === 0) {\r\n      r += 2;\r\n      t >>>= 2;\r\n    }\r\n    if ((t & 0x1) === 0) {\r\n      r++;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  // Return number of used bits in a BN\r\n  BN.prototype.bitLength = function bitLength () {\r\n    var w = this.words[this.length - 1];\r\n    var hi = this._countBits(w);\r\n    return (this.length - 1) * 26 + hi;\r\n  };\r\n\r\n  function toBitArray (num) {\r\n    var w = new Array(num.bitLength());\r\n\r\n    for (var bit = 0; bit < w.length; bit++) {\r\n      var off = (bit / 26) | 0;\r\n      var wbit = bit % 26;\r\n\r\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\r\n    }\r\n\r\n    return w;\r\n  }\r\n\r\n  // Number of trailing zero bits\r\n  BN.prototype.zeroBits = function zeroBits () {\r\n    if (this.isZero()) return 0;\r\n\r\n    var r = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var b = this._zeroBits(this.words[i]);\r\n      r += b;\r\n      if (b !== 26) break;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  BN.prototype.byteLength = function byteLength () {\r\n    return Math.ceil(this.bitLength() / 8);\r\n  };\r\n\r\n  BN.prototype.toTwos = function toTwos (width) {\r\n    if (this.negative !== 0) {\r\n      return this.abs().inotn(width).iaddn(1);\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.fromTwos = function fromTwos (width) {\r\n    if (this.testn(width - 1)) {\r\n      return this.notn(width).iaddn(1).ineg();\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.isNeg = function isNeg () {\r\n    return this.negative !== 0;\r\n  };\r\n\r\n  // Return negative clone of `this`\r\n  BN.prototype.neg = function neg () {\r\n    return this.clone().ineg();\r\n  };\r\n\r\n  BN.prototype.ineg = function ineg () {\r\n    if (!this.isZero()) {\r\n      this.negative ^= 1;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Or `num` with `this` in-place\r\n  BN.prototype.iuor = function iuor (num) {\r\n    while (this.length < num.length) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n\r\n    for (var i = 0; i < num.length; i++) {\r\n      this.words[i] = this.words[i] | num.words[i];\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ior = function ior (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuor(num);\r\n  };\r\n\r\n  // Or `num` with `this`\r\n  BN.prototype.or = function or (num) {\r\n    if (this.length > num.length) return this.clone().ior(num);\r\n    return num.clone().ior(this);\r\n  };\r\n\r\n  BN.prototype.uor = function uor (num) {\r\n    if (this.length > num.length) return this.clone().iuor(num);\r\n    return num.clone().iuor(this);\r\n  };\r\n\r\n  // And `num` with `this` in-place\r\n  BN.prototype.iuand = function iuand (num) {\r\n    // b = min-length(num, this)\r\n    var b;\r\n    if (this.length > num.length) {\r\n      b = num;\r\n    } else {\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = this.words[i] & num.words[i];\r\n    }\r\n\r\n    this.length = b.length;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.iand = function iand (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuand(num);\r\n  };\r\n\r\n  // And `num` with `this`\r\n  BN.prototype.and = function and (num) {\r\n    if (this.length > num.length) return this.clone().iand(num);\r\n    return num.clone().iand(this);\r\n  };\r\n\r\n  BN.prototype.uand = function uand (num) {\r\n    if (this.length > num.length) return this.clone().iuand(num);\r\n    return num.clone().iuand(this);\r\n  };\r\n\r\n  // Xor `num` with `this` in-place\r\n  BN.prototype.iuxor = function iuxor (num) {\r\n    // a.length > b.length\r\n    var a;\r\n    var b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = a.words[i] ^ b.words[i];\r\n    }\r\n\r\n    if (this !== a) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = a.length;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ixor = function ixor (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuxor(num);\r\n  };\r\n\r\n  // Xor `num` with `this`\r\n  BN.prototype.xor = function xor (num) {\r\n    if (this.length > num.length) return this.clone().ixor(num);\r\n    return num.clone().ixor(this);\r\n  };\r\n\r\n  BN.prototype.uxor = function uxor (num) {\r\n    if (this.length > num.length) return this.clone().iuxor(num);\r\n    return num.clone().iuxor(this);\r\n  };\r\n\r\n  // Not ``this`` with ``width`` bitwidth\r\n  BN.prototype.inotn = function inotn (width) {\r\n    assert(typeof width === 'number' && width >= 0);\r\n\r\n    var bytesNeeded = Math.ceil(width / 26) | 0;\r\n    var bitsLeft = width % 26;\r\n\r\n    // Extend the buffer with leading zeroes\r\n    this._expand(bytesNeeded);\r\n\r\n    if (bitsLeft > 0) {\r\n      bytesNeeded--;\r\n    }\r\n\r\n    // Handle complete words\r\n    for (var i = 0; i < bytesNeeded; i++) {\r\n      this.words[i] = ~this.words[i] & 0x3ffffff;\r\n    }\r\n\r\n    // Handle the residue\r\n    if (bitsLeft > 0) {\r\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\r\n    }\r\n\r\n    // And remove leading zeroes\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.notn = function notn (width) {\r\n    return this.clone().inotn(width);\r\n  };\r\n\r\n  // Set `bit` of `this`\r\n  BN.prototype.setn = function setn (bit, val) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n\r\n    var off = (bit / 26) | 0;\r\n    var wbit = bit % 26;\r\n\r\n    this._expand(off + 1);\r\n\r\n    if (val) {\r\n      this.words[off] = this.words[off] | (1 << wbit);\r\n    } else {\r\n      this.words[off] = this.words[off] & ~(1 << wbit);\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Add `num` to `this` in-place\r\n  BN.prototype.iadd = function iadd (num) {\r\n    var r;\r\n\r\n    // negative + positive\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      this.negative = 0;\r\n      r = this.isub(num);\r\n      this.negative ^= 1;\r\n      return this._normSign();\r\n\r\n    // positive + negative\r\n    } else if (this.negative === 0 && num.negative !== 0) {\r\n      num.negative = 0;\r\n      r = this.isub(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n    }\r\n\r\n    // a.length > b.length\r\n    var a, b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n\r\n    this.length = a.length;\r\n    if (carry !== 0) {\r\n      this.words[this.length] = carry;\r\n      this.length++;\r\n    // Copy the rest of the words\r\n    } else if (a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Add `num` to `this`\r\n  BN.prototype.add = function add (num) {\r\n    var res;\r\n    if (num.negative !== 0 && this.negative === 0) {\r\n      num.negative = 0;\r\n      res = this.sub(num);\r\n      num.negative ^= 1;\r\n      return res;\r\n    } else if (num.negative === 0 && this.negative !== 0) {\r\n      this.negative = 0;\r\n      res = num.sub(this);\r\n      this.negative = 1;\r\n      return res;\r\n    }\r\n\r\n    if (this.length > num.length) return this.clone().iadd(num);\r\n\r\n    return num.clone().iadd(this);\r\n  };\r\n\r\n  // Subtract `num` from `this` in-place\r\n  BN.prototype.isub = function isub (num) {\r\n    // this - (-num) = this + num\r\n    if (num.negative !== 0) {\r\n      num.negative = 0;\r\n      var r = this.iadd(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n\r\n    // -this - num = -(this + num)\r\n    } else if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iadd(num);\r\n      this.negative = 1;\r\n      return this._normSign();\r\n    }\r\n\r\n    // At this point both numbers are positive\r\n    var cmp = this.cmp(num);\r\n\r\n    // Optimization - zeroify\r\n    if (cmp === 0) {\r\n      this.negative = 0;\r\n      this.length = 1;\r\n      this.words[0] = 0;\r\n      return this;\r\n    }\r\n\r\n    // a > b\r\n    var a, b;\r\n    if (cmp > 0) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n\r\n    // Copy rest of the words\r\n    if (carry === 0 && i < a.length && a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = Math.max(this.length, i);\r\n\r\n    if (a !== this) {\r\n      this.negative = 1;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Subtract `num` from `this`\r\n  BN.prototype.sub = function sub (num) {\r\n    return this.clone().isub(num);\r\n  };\r\n\r\n  function smallMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    var len = (self.length + num.length) | 0;\r\n    out.length = len;\r\n    len = (len - 1) | 0;\r\n\r\n    // Peel one iteration (compiler can't do it, because of code complexity)\r\n    var a = self.words[0] | 0;\r\n    var b = num.words[0] | 0;\r\n    var r = a * b;\r\n\r\n    var lo = r & 0x3ffffff;\r\n    var carry = (r / 0x4000000) | 0;\r\n    out.words[0] = lo;\r\n\r\n    for (var k = 1; k < len; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = carry >>> 26;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = (k - j) | 0;\r\n        a = self.words[i] | 0;\r\n        b = num.words[j] | 0;\r\n        r = a * b + rword;\r\n        ncarry += (r / 0x4000000) | 0;\r\n        rword = r & 0x3ffffff;\r\n      }\r\n      out.words[k] = rword | 0;\r\n      carry = ncarry | 0;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry | 0;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out.strip();\r\n  }\r\n\r\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\r\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\r\n  // multiplication (like elliptic secp256k1).\r\n  var comb10MulTo = function comb10MulTo (self, num, out) {\r\n    var a = self.words;\r\n    var b = num.words;\r\n    var o = out.words;\r\n    var c = 0;\r\n    var lo;\r\n    var mid;\r\n    var hi;\r\n    var a0 = a[0] | 0;\r\n    var al0 = a0 & 0x1fff;\r\n    var ah0 = a0 >>> 13;\r\n    var a1 = a[1] | 0;\r\n    var al1 = a1 & 0x1fff;\r\n    var ah1 = a1 >>> 13;\r\n    var a2 = a[2] | 0;\r\n    var al2 = a2 & 0x1fff;\r\n    var ah2 = a2 >>> 13;\r\n    var a3 = a[3] | 0;\r\n    var al3 = a3 & 0x1fff;\r\n    var ah3 = a3 >>> 13;\r\n    var a4 = a[4] | 0;\r\n    var al4 = a4 & 0x1fff;\r\n    var ah4 = a4 >>> 13;\r\n    var a5 = a[5] | 0;\r\n    var al5 = a5 & 0x1fff;\r\n    var ah5 = a5 >>> 13;\r\n    var a6 = a[6] | 0;\r\n    var al6 = a6 & 0x1fff;\r\n    var ah6 = a6 >>> 13;\r\n    var a7 = a[7] | 0;\r\n    var al7 = a7 & 0x1fff;\r\n    var ah7 = a7 >>> 13;\r\n    var a8 = a[8] | 0;\r\n    var al8 = a8 & 0x1fff;\r\n    var ah8 = a8 >>> 13;\r\n    var a9 = a[9] | 0;\r\n    var al9 = a9 & 0x1fff;\r\n    var ah9 = a9 >>> 13;\r\n    var b0 = b[0] | 0;\r\n    var bl0 = b0 & 0x1fff;\r\n    var bh0 = b0 >>> 13;\r\n    var b1 = b[1] | 0;\r\n    var bl1 = b1 & 0x1fff;\r\n    var bh1 = b1 >>> 13;\r\n    var b2 = b[2] | 0;\r\n    var bl2 = b2 & 0x1fff;\r\n    var bh2 = b2 >>> 13;\r\n    var b3 = b[3] | 0;\r\n    var bl3 = b3 & 0x1fff;\r\n    var bh3 = b3 >>> 13;\r\n    var b4 = b[4] | 0;\r\n    var bl4 = b4 & 0x1fff;\r\n    var bh4 = b4 >>> 13;\r\n    var b5 = b[5] | 0;\r\n    var bl5 = b5 & 0x1fff;\r\n    var bh5 = b5 >>> 13;\r\n    var b6 = b[6] | 0;\r\n    var bl6 = b6 & 0x1fff;\r\n    var bh6 = b6 >>> 13;\r\n    var b7 = b[7] | 0;\r\n    var bl7 = b7 & 0x1fff;\r\n    var bh7 = b7 >>> 13;\r\n    var b8 = b[8] | 0;\r\n    var bl8 = b8 & 0x1fff;\r\n    var bh8 = b8 >>> 13;\r\n    var b9 = b[9] | 0;\r\n    var bl9 = b9 & 0x1fff;\r\n    var bh9 = b9 >>> 13;\r\n\r\n    out.negative = self.negative ^ num.negative;\r\n    out.length = 19;\r\n    /* k = 0 */\r\n    lo = Math.imul(al0, bl0);\r\n    mid = Math.imul(al0, bh0);\r\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\r\n    hi = Math.imul(ah0, bh0);\r\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\r\n    w0 &= 0x3ffffff;\r\n    /* k = 1 */\r\n    lo = Math.imul(al1, bl0);\r\n    mid = Math.imul(al1, bh0);\r\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\r\n    hi = Math.imul(ah1, bh0);\r\n    lo = (lo + Math.imul(al0, bl1)) | 0;\r\n    mid = (mid + Math.imul(al0, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\r\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\r\n    w1 &= 0x3ffffff;\r\n    /* k = 2 */\r\n    lo = Math.imul(al2, bl0);\r\n    mid = Math.imul(al2, bh0);\r\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\r\n    hi = Math.imul(ah2, bh0);\r\n    lo = (lo + Math.imul(al1, bl1)) | 0;\r\n    mid = (mid + Math.imul(al1, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\r\n    lo = (lo + Math.imul(al0, bl2)) | 0;\r\n    mid = (mid + Math.imul(al0, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\r\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\r\n    w2 &= 0x3ffffff;\r\n    /* k = 3 */\r\n    lo = Math.imul(al3, bl0);\r\n    mid = Math.imul(al3, bh0);\r\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\r\n    hi = Math.imul(ah3, bh0);\r\n    lo = (lo + Math.imul(al2, bl1)) | 0;\r\n    mid = (mid + Math.imul(al2, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\r\n    lo = (lo + Math.imul(al1, bl2)) | 0;\r\n    mid = (mid + Math.imul(al1, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\r\n    lo = (lo + Math.imul(al0, bl3)) | 0;\r\n    mid = (mid + Math.imul(al0, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\r\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\r\n    w3 &= 0x3ffffff;\r\n    /* k = 4 */\r\n    lo = Math.imul(al4, bl0);\r\n    mid = Math.imul(al4, bh0);\r\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\r\n    hi = Math.imul(ah4, bh0);\r\n    lo = (lo + Math.imul(al3, bl1)) | 0;\r\n    mid = (mid + Math.imul(al3, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\r\n    lo = (lo + Math.imul(al2, bl2)) | 0;\r\n    mid = (mid + Math.imul(al2, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\r\n    lo = (lo + Math.imul(al1, bl3)) | 0;\r\n    mid = (mid + Math.imul(al1, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\r\n    lo = (lo + Math.imul(al0, bl4)) | 0;\r\n    mid = (mid + Math.imul(al0, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\r\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\r\n    w4 &= 0x3ffffff;\r\n    /* k = 5 */\r\n    lo = Math.imul(al5, bl0);\r\n    mid = Math.imul(al5, bh0);\r\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\r\n    hi = Math.imul(ah5, bh0);\r\n    lo = (lo + Math.imul(al4, bl1)) | 0;\r\n    mid = (mid + Math.imul(al4, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\r\n    lo = (lo + Math.imul(al3, bl2)) | 0;\r\n    mid = (mid + Math.imul(al3, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\r\n    lo = (lo + Math.imul(al2, bl3)) | 0;\r\n    mid = (mid + Math.imul(al2, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\r\n    lo = (lo + Math.imul(al1, bl4)) | 0;\r\n    mid = (mid + Math.imul(al1, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\r\n    lo = (lo + Math.imul(al0, bl5)) | 0;\r\n    mid = (mid + Math.imul(al0, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\r\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\r\n    w5 &= 0x3ffffff;\r\n    /* k = 6 */\r\n    lo = Math.imul(al6, bl0);\r\n    mid = Math.imul(al6, bh0);\r\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\r\n    hi = Math.imul(ah6, bh0);\r\n    lo = (lo + Math.imul(al5, bl1)) | 0;\r\n    mid = (mid + Math.imul(al5, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\r\n    lo = (lo + Math.imul(al4, bl2)) | 0;\r\n    mid = (mid + Math.imul(al4, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\r\n    lo = (lo + Math.imul(al3, bl3)) | 0;\r\n    mid = (mid + Math.imul(al3, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\r\n    lo = (lo + Math.imul(al2, bl4)) | 0;\r\n    mid = (mid + Math.imul(al2, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\r\n    lo = (lo + Math.imul(al1, bl5)) | 0;\r\n    mid = (mid + Math.imul(al1, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\r\n    lo = (lo + Math.imul(al0, bl6)) | 0;\r\n    mid = (mid + Math.imul(al0, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\r\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\r\n    w6 &= 0x3ffffff;\r\n    /* k = 7 */\r\n    lo = Math.imul(al7, bl0);\r\n    mid = Math.imul(al7, bh0);\r\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\r\n    hi = Math.imul(ah7, bh0);\r\n    lo = (lo + Math.imul(al6, bl1)) | 0;\r\n    mid = (mid + Math.imul(al6, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\r\n    lo = (lo + Math.imul(al5, bl2)) | 0;\r\n    mid = (mid + Math.imul(al5, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\r\n    lo = (lo + Math.imul(al4, bl3)) | 0;\r\n    mid = (mid + Math.imul(al4, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\r\n    lo = (lo + Math.imul(al3, bl4)) | 0;\r\n    mid = (mid + Math.imul(al3, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\r\n    lo = (lo + Math.imul(al2, bl5)) | 0;\r\n    mid = (mid + Math.imul(al2, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\r\n    lo = (lo + Math.imul(al1, bl6)) | 0;\r\n    mid = (mid + Math.imul(al1, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\r\n    lo = (lo + Math.imul(al0, bl7)) | 0;\r\n    mid = (mid + Math.imul(al0, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\r\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\r\n    w7 &= 0x3ffffff;\r\n    /* k = 8 */\r\n    lo = Math.imul(al8, bl0);\r\n    mid = Math.imul(al8, bh0);\r\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\r\n    hi = Math.imul(ah8, bh0);\r\n    lo = (lo + Math.imul(al7, bl1)) | 0;\r\n    mid = (mid + Math.imul(al7, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\r\n    lo = (lo + Math.imul(al6, bl2)) | 0;\r\n    mid = (mid + Math.imul(al6, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\r\n    lo = (lo + Math.imul(al5, bl3)) | 0;\r\n    mid = (mid + Math.imul(al5, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\r\n    lo = (lo + Math.imul(al4, bl4)) | 0;\r\n    mid = (mid + Math.imul(al4, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\r\n    lo = (lo + Math.imul(al3, bl5)) | 0;\r\n    mid = (mid + Math.imul(al3, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\r\n    lo = (lo + Math.imul(al2, bl6)) | 0;\r\n    mid = (mid + Math.imul(al2, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\r\n    lo = (lo + Math.imul(al1, bl7)) | 0;\r\n    mid = (mid + Math.imul(al1, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\r\n    lo = (lo + Math.imul(al0, bl8)) | 0;\r\n    mid = (mid + Math.imul(al0, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\r\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\r\n    w8 &= 0x3ffffff;\r\n    /* k = 9 */\r\n    lo = Math.imul(al9, bl0);\r\n    mid = Math.imul(al9, bh0);\r\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\r\n    hi = Math.imul(ah9, bh0);\r\n    lo = (lo + Math.imul(al8, bl1)) | 0;\r\n    mid = (mid + Math.imul(al8, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\r\n    lo = (lo + Math.imul(al7, bl2)) | 0;\r\n    mid = (mid + Math.imul(al7, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\r\n    lo = (lo + Math.imul(al6, bl3)) | 0;\r\n    mid = (mid + Math.imul(al6, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\r\n    lo = (lo + Math.imul(al5, bl4)) | 0;\r\n    mid = (mid + Math.imul(al5, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\r\n    lo = (lo + Math.imul(al4, bl5)) | 0;\r\n    mid = (mid + Math.imul(al4, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\r\n    lo = (lo + Math.imul(al3, bl6)) | 0;\r\n    mid = (mid + Math.imul(al3, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\r\n    lo = (lo + Math.imul(al2, bl7)) | 0;\r\n    mid = (mid + Math.imul(al2, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\r\n    lo = (lo + Math.imul(al1, bl8)) | 0;\r\n    mid = (mid + Math.imul(al1, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\r\n    lo = (lo + Math.imul(al0, bl9)) | 0;\r\n    mid = (mid + Math.imul(al0, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\r\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\r\n    w9 &= 0x3ffffff;\r\n    /* k = 10 */\r\n    lo = Math.imul(al9, bl1);\r\n    mid = Math.imul(al9, bh1);\r\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\r\n    hi = Math.imul(ah9, bh1);\r\n    lo = (lo + Math.imul(al8, bl2)) | 0;\r\n    mid = (mid + Math.imul(al8, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\r\n    lo = (lo + Math.imul(al7, bl3)) | 0;\r\n    mid = (mid + Math.imul(al7, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\r\n    lo = (lo + Math.imul(al6, bl4)) | 0;\r\n    mid = (mid + Math.imul(al6, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\r\n    lo = (lo + Math.imul(al5, bl5)) | 0;\r\n    mid = (mid + Math.imul(al5, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\r\n    lo = (lo + Math.imul(al4, bl6)) | 0;\r\n    mid = (mid + Math.imul(al4, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\r\n    lo = (lo + Math.imul(al3, bl7)) | 0;\r\n    mid = (mid + Math.imul(al3, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\r\n    lo = (lo + Math.imul(al2, bl8)) | 0;\r\n    mid = (mid + Math.imul(al2, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\r\n    lo = (lo + Math.imul(al1, bl9)) | 0;\r\n    mid = (mid + Math.imul(al1, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\r\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\r\n    w10 &= 0x3ffffff;\r\n    /* k = 11 */\r\n    lo = Math.imul(al9, bl2);\r\n    mid = Math.imul(al9, bh2);\r\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\r\n    hi = Math.imul(ah9, bh2);\r\n    lo = (lo + Math.imul(al8, bl3)) | 0;\r\n    mid = (mid + Math.imul(al8, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\r\n    lo = (lo + Math.imul(al7, bl4)) | 0;\r\n    mid = (mid + Math.imul(al7, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\r\n    lo = (lo + Math.imul(al6, bl5)) | 0;\r\n    mid = (mid + Math.imul(al6, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\r\n    lo = (lo + Math.imul(al5, bl6)) | 0;\r\n    mid = (mid + Math.imul(al5, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\r\n    lo = (lo + Math.imul(al4, bl7)) | 0;\r\n    mid = (mid + Math.imul(al4, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\r\n    lo = (lo + Math.imul(al3, bl8)) | 0;\r\n    mid = (mid + Math.imul(al3, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\r\n    lo = (lo + Math.imul(al2, bl9)) | 0;\r\n    mid = (mid + Math.imul(al2, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\r\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\r\n    w11 &= 0x3ffffff;\r\n    /* k = 12 */\r\n    lo = Math.imul(al9, bl3);\r\n    mid = Math.imul(al9, bh3);\r\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\r\n    hi = Math.imul(ah9, bh3);\r\n    lo = (lo + Math.imul(al8, bl4)) | 0;\r\n    mid = (mid + Math.imul(al8, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\r\n    lo = (lo + Math.imul(al7, bl5)) | 0;\r\n    mid = (mid + Math.imul(al7, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\r\n    lo = (lo + Math.imul(al6, bl6)) | 0;\r\n    mid = (mid + Math.imul(al6, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\r\n    lo = (lo + Math.imul(al5, bl7)) | 0;\r\n    mid = (mid + Math.imul(al5, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\r\n    lo = (lo + Math.imul(al4, bl8)) | 0;\r\n    mid = (mid + Math.imul(al4, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\r\n    lo = (lo + Math.imul(al3, bl9)) | 0;\r\n    mid = (mid + Math.imul(al3, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\r\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\r\n    w12 &= 0x3ffffff;\r\n    /* k = 13 */\r\n    lo = Math.imul(al9, bl4);\r\n    mid = Math.imul(al9, bh4);\r\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\r\n    hi = Math.imul(ah9, bh4);\r\n    lo = (lo + Math.imul(al8, bl5)) | 0;\r\n    mid = (mid + Math.imul(al8, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\r\n    lo = (lo + Math.imul(al7, bl6)) | 0;\r\n    mid = (mid + Math.imul(al7, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\r\n    lo = (lo + Math.imul(al6, bl7)) | 0;\r\n    mid = (mid + Math.imul(al6, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\r\n    lo = (lo + Math.imul(al5, bl8)) | 0;\r\n    mid = (mid + Math.imul(al5, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\r\n    lo = (lo + Math.imul(al4, bl9)) | 0;\r\n    mid = (mid + Math.imul(al4, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\r\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\r\n    w13 &= 0x3ffffff;\r\n    /* k = 14 */\r\n    lo = Math.imul(al9, bl5);\r\n    mid = Math.imul(al9, bh5);\r\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\r\n    hi = Math.imul(ah9, bh5);\r\n    lo = (lo + Math.imul(al8, bl6)) | 0;\r\n    mid = (mid + Math.imul(al8, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\r\n    lo = (lo + Math.imul(al7, bl7)) | 0;\r\n    mid = (mid + Math.imul(al7, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\r\n    lo = (lo + Math.imul(al6, bl8)) | 0;\r\n    mid = (mid + Math.imul(al6, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\r\n    lo = (lo + Math.imul(al5, bl9)) | 0;\r\n    mid = (mid + Math.imul(al5, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\r\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\r\n    w14 &= 0x3ffffff;\r\n    /* k = 15 */\r\n    lo = Math.imul(al9, bl6);\r\n    mid = Math.imul(al9, bh6);\r\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\r\n    hi = Math.imul(ah9, bh6);\r\n    lo = (lo + Math.imul(al8, bl7)) | 0;\r\n    mid = (mid + Math.imul(al8, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\r\n    lo = (lo + Math.imul(al7, bl8)) | 0;\r\n    mid = (mid + Math.imul(al7, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\r\n    lo = (lo + Math.imul(al6, bl9)) | 0;\r\n    mid = (mid + Math.imul(al6, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\r\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\r\n    w15 &= 0x3ffffff;\r\n    /* k = 16 */\r\n    lo = Math.imul(al9, bl7);\r\n    mid = Math.imul(al9, bh7);\r\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\r\n    hi = Math.imul(ah9, bh7);\r\n    lo = (lo + Math.imul(al8, bl8)) | 0;\r\n    mid = (mid + Math.imul(al8, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\r\n    lo = (lo + Math.imul(al7, bl9)) | 0;\r\n    mid = (mid + Math.imul(al7, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\r\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\r\n    w16 &= 0x3ffffff;\r\n    /* k = 17 */\r\n    lo = Math.imul(al9, bl8);\r\n    mid = Math.imul(al9, bh8);\r\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\r\n    hi = Math.imul(ah9, bh8);\r\n    lo = (lo + Math.imul(al8, bl9)) | 0;\r\n    mid = (mid + Math.imul(al8, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\r\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\r\n    w17 &= 0x3ffffff;\r\n    /* k = 18 */\r\n    lo = Math.imul(al9, bl9);\r\n    mid = Math.imul(al9, bh9);\r\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\r\n    hi = Math.imul(ah9, bh9);\r\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\r\n    w18 &= 0x3ffffff;\r\n    o[0] = w0;\r\n    o[1] = w1;\r\n    o[2] = w2;\r\n    o[3] = w3;\r\n    o[4] = w4;\r\n    o[5] = w5;\r\n    o[6] = w6;\r\n    o[7] = w7;\r\n    o[8] = w8;\r\n    o[9] = w9;\r\n    o[10] = w10;\r\n    o[11] = w11;\r\n    o[12] = w12;\r\n    o[13] = w13;\r\n    o[14] = w14;\r\n    o[15] = w15;\r\n    o[16] = w16;\r\n    o[17] = w17;\r\n    o[18] = w18;\r\n    if (c !== 0) {\r\n      o[19] = c;\r\n      out.length++;\r\n    }\r\n    return out;\r\n  };\r\n\r\n  // Polyfill comb\r\n  if (!Math.imul) {\r\n    comb10MulTo = smallMulTo;\r\n  }\r\n\r\n  function bigMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    out.length = self.length + num.length;\r\n\r\n    var carry = 0;\r\n    var hncarry = 0;\r\n    for (var k = 0; k < out.length - 1; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = hncarry;\r\n      hncarry = 0;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = k - j;\r\n        var a = self.words[i] | 0;\r\n        var b = num.words[j] | 0;\r\n        var r = a * b;\r\n\r\n        var lo = r & 0x3ffffff;\r\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\r\n        lo = (lo + rword) | 0;\r\n        rword = lo & 0x3ffffff;\r\n        ncarry = (ncarry + (lo >>> 26)) | 0;\r\n\r\n        hncarry += ncarry >>> 26;\r\n        ncarry &= 0x3ffffff;\r\n      }\r\n      out.words[k] = rword;\r\n      carry = ncarry;\r\n      ncarry = hncarry;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out.strip();\r\n  }\r\n\r\n  function jumboMulTo (self, num, out) {\r\n    var fftm = new FFTM();\r\n    return fftm.mulp(self, num, out);\r\n  }\r\n\r\n  BN.prototype.mulTo = function mulTo (num, out) {\r\n    var res;\r\n    var len = this.length + num.length;\r\n    if (this.length === 10 && num.length === 10) {\r\n      res = comb10MulTo(this, num, out);\r\n    } else if (len < 63) {\r\n      res = smallMulTo(this, num, out);\r\n    } else if (len < 1024) {\r\n      res = bigMulTo(this, num, out);\r\n    } else {\r\n      res = jumboMulTo(this, num, out);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Cooley-Tukey algorithm for FFT\r\n  // slightly revisited to rely on looping instead of recursion\r\n\r\n  function FFTM (x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  FFTM.prototype.makeRBT = function makeRBT (N) {\r\n    var t = new Array(N);\r\n    var l = BN.prototype._countBits(N) - 1;\r\n    for (var i = 0; i < N; i++) {\r\n      t[i] = this.revBin(i, l, N);\r\n    }\r\n\r\n    return t;\r\n  };\r\n\r\n  // Returns binary-reversed representation of `x`\r\n  FFTM.prototype.revBin = function revBin (x, l, N) {\r\n    if (x === 0 || x === N - 1) return x;\r\n\r\n    var rb = 0;\r\n    for (var i = 0; i < l; i++) {\r\n      rb |= (x & 1) << (l - i - 1);\r\n      x >>= 1;\r\n    }\r\n\r\n    return rb;\r\n  };\r\n\r\n  // Performs \"tweedling\" phase, therefore 'emulating'\r\n  // behaviour of the recursive algorithm\r\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\r\n    for (var i = 0; i < N; i++) {\r\n      rtws[i] = rws[rbt[i]];\r\n      itws[i] = iws[rbt[i]];\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\r\n    this.permute(rbt, rws, iws, rtws, itws, N);\r\n\r\n    for (var s = 1; s < N; s <<= 1) {\r\n      var l = s << 1;\r\n\r\n      var rtwdf = Math.cos(2 * Math.PI / l);\r\n      var itwdf = Math.sin(2 * Math.PI / l);\r\n\r\n      for (var p = 0; p < N; p += l) {\r\n        var rtwdf_ = rtwdf;\r\n        var itwdf_ = itwdf;\r\n\r\n        for (var j = 0; j < s; j++) {\r\n          var re = rtws[p + j];\r\n          var ie = itws[p + j];\r\n\r\n          var ro = rtws[p + j + s];\r\n          var io = itws[p + j + s];\r\n\r\n          var rx = rtwdf_ * ro - itwdf_ * io;\r\n\r\n          io = rtwdf_ * io + itwdf_ * ro;\r\n          ro = rx;\r\n\r\n          rtws[p + j] = re + ro;\r\n          itws[p + j] = ie + io;\r\n\r\n          rtws[p + j + s] = re - ro;\r\n          itws[p + j + s] = ie - io;\r\n\r\n          /* jshint maxdepth : false */\r\n          if (j !== l) {\r\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\r\n\r\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\r\n            rtwdf_ = rx;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\r\n    var N = Math.max(m, n) | 1;\r\n    var odd = N & 1;\r\n    var i = 0;\r\n    for (N = N / 2 | 0; N; N = N >>> 1) {\r\n      i++;\r\n    }\r\n\r\n    return 1 << i + 1 + odd;\r\n  };\r\n\r\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\r\n    if (N <= 1) return;\r\n\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var t = rws[i];\r\n\r\n      rws[i] = rws[N - i - 1];\r\n      rws[N - i - 1] = t;\r\n\r\n      t = iws[i];\r\n\r\n      iws[i] = -iws[N - i - 1];\r\n      iws[N - i - 1] = -t;\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\r\n        Math.round(ws[2 * i] / N) +\r\n        carry;\r\n\r\n      ws[i] = w & 0x3ffffff;\r\n\r\n      if (w < 0x4000000) {\r\n        carry = 0;\r\n      } else {\r\n        carry = w / 0x4000000 | 0;\r\n      }\r\n    }\r\n\r\n    return ws;\r\n  };\r\n\r\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < len; i++) {\r\n      carry = carry + (ws[i] | 0);\r\n\r\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\r\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\r\n    }\r\n\r\n    // Pad with zeroes\r\n    for (i = 2 * len; i < N; ++i) {\r\n      rws[i] = 0;\r\n    }\r\n\r\n    assert(carry === 0);\r\n    assert((carry & ~0x1fff) === 0);\r\n  };\r\n\r\n  FFTM.prototype.stub = function stub (N) {\r\n    var ph = new Array(N);\r\n    for (var i = 0; i < N; i++) {\r\n      ph[i] = 0;\r\n    }\r\n\r\n    return ph;\r\n  };\r\n\r\n  FFTM.prototype.mulp = function mulp (x, y, out) {\r\n    var N = 2 * this.guessLen13b(x.length, y.length);\r\n\r\n    var rbt = this.makeRBT(N);\r\n\r\n    var _ = this.stub(N);\r\n\r\n    var rws = new Array(N);\r\n    var rwst = new Array(N);\r\n    var iwst = new Array(N);\r\n\r\n    var nrws = new Array(N);\r\n    var nrwst = new Array(N);\r\n    var niwst = new Array(N);\r\n\r\n    var rmws = out.words;\r\n    rmws.length = N;\r\n\r\n    this.convert13b(x.words, x.length, rws, N);\r\n    this.convert13b(y.words, y.length, nrws, N);\r\n\r\n    this.transform(rws, _, rwst, iwst, N, rbt);\r\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\r\n\r\n    for (var i = 0; i < N; i++) {\r\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\r\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\r\n      rwst[i] = rx;\r\n    }\r\n\r\n    this.conjugate(rwst, iwst, N);\r\n    this.transform(rwst, iwst, rmws, _, N, rbt);\r\n    this.conjugate(rmws, _, N);\r\n    this.normalize13b(rmws, N);\r\n\r\n    out.negative = x.negative ^ y.negative;\r\n    out.length = x.length + y.length;\r\n    return out.strip();\r\n  };\r\n\r\n  // Multiply `this` by `num`\r\n  BN.prototype.mul = function mul (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return this.mulTo(num, out);\r\n  };\r\n\r\n  // Multiply employing FFT\r\n  BN.prototype.mulf = function mulf (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return jumboMulTo(this, num, out);\r\n  };\r\n\r\n  // In-place Multiplication\r\n  BN.prototype.imul = function imul (num) {\r\n    return this.clone().mulTo(num, this);\r\n  };\r\n\r\n  BN.prototype.imuln = function imuln (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n\r\n    // Carry\r\n    var carry = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var w = (this.words[i] | 0) * num;\r\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\r\n      carry >>= 26;\r\n      carry += (w / 0x4000000) | 0;\r\n      // NOTE: lo is 27bit maximum\r\n      carry += lo >>> 26;\r\n      this.words[i] = lo & 0x3ffffff;\r\n    }\r\n\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.muln = function muln (num) {\r\n    return this.clone().imuln(num);\r\n  };\r\n\r\n  // `this` * `this`\r\n  BN.prototype.sqr = function sqr () {\r\n    return this.mul(this);\r\n  };\r\n\r\n  // `this` * `this` in-place\r\n  BN.prototype.isqr = function isqr () {\r\n    return this.imul(this.clone());\r\n  };\r\n\r\n  // Math.pow(`this`, `num`)\r\n  BN.prototype.pow = function pow (num) {\r\n    var w = toBitArray(num);\r\n    if (w.length === 0) return new BN(1);\r\n\r\n    // Skip leading zeroes\r\n    var res = this;\r\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\r\n      if (w[i] !== 0) break;\r\n    }\r\n\r\n    if (++i < w.length) {\r\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\r\n        if (w[i] === 0) continue;\r\n\r\n        res = res.mul(q);\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Shift-left in-place\r\n  BN.prototype.iushln = function iushln (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\r\n    var i;\r\n\r\n    if (r !== 0) {\r\n      var carry = 0;\r\n\r\n      for (i = 0; i < this.length; i++) {\r\n        var newCarry = this.words[i] & carryMask;\r\n        var c = ((this.words[i] | 0) - newCarry) << r;\r\n        this.words[i] = c | carry;\r\n        carry = newCarry >>> (26 - r);\r\n      }\r\n\r\n      if (carry) {\r\n        this.words[i] = carry;\r\n        this.length++;\r\n      }\r\n    }\r\n\r\n    if (s !== 0) {\r\n      for (i = this.length - 1; i >= 0; i--) {\r\n        this.words[i + s] = this.words[i];\r\n      }\r\n\r\n      for (i = 0; i < s; i++) {\r\n        this.words[i] = 0;\r\n      }\r\n\r\n      this.length += s;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ishln = function ishln (bits) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushln(bits);\r\n  };\r\n\r\n  // Shift-right in-place\r\n  // NOTE: `hint` is a lowest bit before trailing zeroes\r\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\r\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var h;\r\n    if (hint) {\r\n      h = (hint - (hint % 26)) / 26;\r\n    } else {\r\n      h = 0;\r\n    }\r\n\r\n    var r = bits % 26;\r\n    var s = Math.min((bits - r) / 26, this.length);\r\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n    var maskedWords = extended;\r\n\r\n    h -= s;\r\n    h = Math.max(0, h);\r\n\r\n    // Extended mode, copy masked part\r\n    if (maskedWords) {\r\n      for (var i = 0; i < s; i++) {\r\n        maskedWords.words[i] = this.words[i];\r\n      }\r\n      maskedWords.length = s;\r\n    }\r\n\r\n    if (s === 0) {\r\n      // No-op, we should not move anything at all\r\n    } else if (this.length > s) {\r\n      this.length -= s;\r\n      for (i = 0; i < this.length; i++) {\r\n        this.words[i] = this.words[i + s];\r\n      }\r\n    } else {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\r\n      var word = this.words[i] | 0;\r\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\r\n      carry = word & mask;\r\n    }\r\n\r\n    // Push carried bits as a mask\r\n    if (maskedWords && carry !== 0) {\r\n      maskedWords.words[maskedWords.length++] = carry;\r\n    }\r\n\r\n    if (this.length === 0) {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushrn(bits, hint, extended);\r\n  };\r\n\r\n  // Shift-left\r\n  BN.prototype.shln = function shln (bits) {\r\n    return this.clone().ishln(bits);\r\n  };\r\n\r\n  BN.prototype.ushln = function ushln (bits) {\r\n    return this.clone().iushln(bits);\r\n  };\r\n\r\n  // Shift-right\r\n  BN.prototype.shrn = function shrn (bits) {\r\n    return this.clone().ishrn(bits);\r\n  };\r\n\r\n  BN.prototype.ushrn = function ushrn (bits) {\r\n    return this.clone().iushrn(bits);\r\n  };\r\n\r\n  // Test if n bit is set\r\n  BN.prototype.testn = function testn (bit) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) return false;\r\n\r\n    // Check bit and return\r\n    var w = this.words[s];\r\n\r\n    return !!(w & q);\r\n  };\r\n\r\n  // Return only lowers bits of number (in-place)\r\n  BN.prototype.imaskn = function imaskn (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n\r\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\r\n\r\n    if (this.length <= s) {\r\n      return this;\r\n    }\r\n\r\n    if (r !== 0) {\r\n      s++;\r\n    }\r\n    this.length = Math.min(s, this.length);\r\n\r\n    if (r !== 0) {\r\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n      this.words[this.length - 1] &= mask;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Return only lowers bits of number\r\n  BN.prototype.maskn = function maskn (bits) {\r\n    return this.clone().imaskn(bits);\r\n  };\r\n\r\n  // Add plain number `num` to `this`\r\n  BN.prototype.iaddn = function iaddn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.isubn(-num);\r\n\r\n    // Possible sign change\r\n    if (this.negative !== 0) {\r\n      if (this.length === 1 && (this.words[0] | 0) < num) {\r\n        this.words[0] = num - (this.words[0] | 0);\r\n        this.negative = 0;\r\n        return this;\r\n      }\r\n\r\n      this.negative = 0;\r\n      this.isubn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    // Add without checks\r\n    return this._iaddn(num);\r\n  };\r\n\r\n  BN.prototype._iaddn = function _iaddn (num) {\r\n    this.words[0] += num;\r\n\r\n    // Carry\r\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\r\n      this.words[i] -= 0x4000000;\r\n      if (i === this.length - 1) {\r\n        this.words[i + 1] = 1;\r\n      } else {\r\n        this.words[i + 1]++;\r\n      }\r\n    }\r\n    this.length = Math.max(this.length, i + 1);\r\n\r\n    return this;\r\n  };\r\n\r\n  // Subtract plain number `num` from `this`\r\n  BN.prototype.isubn = function isubn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.iaddn(-num);\r\n\r\n    if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iaddn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    this.words[0] -= num;\r\n\r\n    if (this.length === 1 && this.words[0] < 0) {\r\n      this.words[0] = -this.words[0];\r\n      this.negative = 1;\r\n    } else {\r\n      // Carry\r\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\r\n        this.words[i] += 0x4000000;\r\n        this.words[i + 1] -= 1;\r\n      }\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.addn = function addn (num) {\r\n    return this.clone().iaddn(num);\r\n  };\r\n\r\n  BN.prototype.subn = function subn (num) {\r\n    return this.clone().isubn(num);\r\n  };\r\n\r\n  BN.prototype.iabs = function iabs () {\r\n    this.negative = 0;\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.abs = function abs () {\r\n    return this.clone().iabs();\r\n  };\r\n\r\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\r\n    var len = num.length + shift;\r\n    var i;\r\n\r\n    this._expand(len);\r\n\r\n    var w;\r\n    var carry = 0;\r\n    for (i = 0; i < num.length; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      var right = (num.words[i] | 0) * mul;\r\n      w -= right & 0x3ffffff;\r\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n    for (; i < this.length - shift; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n\r\n    if (carry === 0) return this.strip();\r\n\r\n    // Subtraction overflow\r\n    assert(carry === -1);\r\n    carry = 0;\r\n    for (i = 0; i < this.length; i++) {\r\n      w = -(this.words[i] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i] = w & 0x3ffffff;\r\n    }\r\n    this.negative = 1;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\r\n    var shift = this.length - num.length;\r\n\r\n    var a = this.clone();\r\n    var b = num;\r\n\r\n    // Normalize\r\n    var bhi = b.words[b.length - 1] | 0;\r\n    var bhiBits = this._countBits(bhi);\r\n    shift = 26 - bhiBits;\r\n    if (shift !== 0) {\r\n      b = b.ushln(shift);\r\n      a.iushln(shift);\r\n      bhi = b.words[b.length - 1] | 0;\r\n    }\r\n\r\n    // Initialize quotient\r\n    var m = a.length - b.length;\r\n    var q;\r\n\r\n    if (mode !== 'mod') {\r\n      q = new BN(null);\r\n      q.length = m + 1;\r\n      q.words = new Array(q.length);\r\n      for (var i = 0; i < q.length; i++) {\r\n        q.words[i] = 0;\r\n      }\r\n    }\r\n\r\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\r\n    if (diff.negative === 0) {\r\n      a = diff;\r\n      if (q) {\r\n        q.words[m] = 1;\r\n      }\r\n    }\r\n\r\n    for (var j = m - 1; j >= 0; j--) {\r\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\r\n        (a.words[b.length + j - 1] | 0);\r\n\r\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\r\n      // (0x7ffffff)\r\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\r\n\r\n      a._ishlnsubmul(b, qj, j);\r\n      while (a.negative !== 0) {\r\n        qj--;\r\n        a.negative = 0;\r\n        a._ishlnsubmul(b, 1, j);\r\n        if (!a.isZero()) {\r\n          a.negative ^= 1;\r\n        }\r\n      }\r\n      if (q) {\r\n        q.words[j] = qj;\r\n      }\r\n    }\r\n    if (q) {\r\n      q.strip();\r\n    }\r\n    a.strip();\r\n\r\n    // Denormalize\r\n    if (mode !== 'div' && shift !== 0) {\r\n      a.iushrn(shift);\r\n    }\r\n\r\n    return {\r\n      div: q || null,\r\n      mod: a\r\n    };\r\n  };\r\n\r\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\r\n  //       to `div` to request div only, or be absent to\r\n  //       request both div & mod\r\n  //       2) `positive` is true if unsigned mod is requested\r\n  BN.prototype.divmod = function divmod (num, mode, positive) {\r\n    assert(!num.isZero());\r\n\r\n    if (this.isZero()) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: new BN(0)\r\n      };\r\n    }\r\n\r\n    var div, mod, res;\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      res = this.neg().divmod(num, mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.iadd(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    if (this.negative === 0 && num.negative !== 0) {\r\n      res = this.divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: res.mod\r\n      };\r\n    }\r\n\r\n    if ((this.negative & num.negative) !== 0) {\r\n      res = this.neg().divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.isub(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: res.div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    // Both numbers are positive at this point\r\n\r\n    // Strip both numbers to approximate shift value\r\n    if (num.length > this.length || this.cmp(num) < 0) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: this\r\n      };\r\n    }\r\n\r\n    // Very short reduction\r\n    if (num.length === 1) {\r\n      if (mode === 'div') {\r\n        return {\r\n          div: this.divn(num.words[0]),\r\n          mod: null\r\n        };\r\n      }\r\n\r\n      if (mode === 'mod') {\r\n        return {\r\n          div: null,\r\n          mod: new BN(this.modn(num.words[0]))\r\n        };\r\n      }\r\n\r\n      return {\r\n        div: this.divn(num.words[0]),\r\n        mod: new BN(this.modn(num.words[0]))\r\n      };\r\n    }\r\n\r\n    return this._wordDiv(num, mode);\r\n  };\r\n\r\n  // Find `this` / `num`\r\n  BN.prototype.div = function div (num) {\r\n    return this.divmod(num, 'div', false).div;\r\n  };\r\n\r\n  // Find `this` % `num`\r\n  BN.prototype.mod = function mod (num) {\r\n    return this.divmod(num, 'mod', false).mod;\r\n  };\r\n\r\n  BN.prototype.umod = function umod (num) {\r\n    return this.divmod(num, 'mod', true).mod;\r\n  };\r\n\r\n  // Find Round(`this` / `num`)\r\n  BN.prototype.divRound = function divRound (num) {\r\n    var dm = this.divmod(num);\r\n\r\n    // Fast case - exact division\r\n    if (dm.mod.isZero()) return dm.div;\r\n\r\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\r\n\r\n    var half = num.ushrn(1);\r\n    var r2 = num.andln(1);\r\n    var cmp = mod.cmp(half);\r\n\r\n    // Round down\r\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\r\n\r\n    // Round up\r\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\r\n  };\r\n\r\n  BN.prototype.modn = function modn (num) {\r\n    assert(num <= 0x3ffffff);\r\n    var p = (1 << 26) % num;\r\n\r\n    var acc = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      acc = (p * acc + (this.words[i] | 0)) % num;\r\n    }\r\n\r\n    return acc;\r\n  };\r\n\r\n  // In-place division by number\r\n  BN.prototype.idivn = function idivn (num) {\r\n    assert(num <= 0x3ffffff);\r\n\r\n    var carry = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var w = (this.words[i] | 0) + carry * 0x4000000;\r\n      this.words[i] = (w / num) | 0;\r\n      carry = w % num;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.divn = function divn (num) {\r\n    return this.clone().idivn(num);\r\n  };\r\n\r\n  BN.prototype.egcd = function egcd (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var x = this;\r\n    var y = p.clone();\r\n\r\n    if (x.negative !== 0) {\r\n      x = x.umod(p);\r\n    } else {\r\n      x = x.clone();\r\n    }\r\n\r\n    // A * x + B * y = x\r\n    var A = new BN(1);\r\n    var B = new BN(0);\r\n\r\n    // C * x + D * y = y\r\n    var C = new BN(0);\r\n    var D = new BN(1);\r\n\r\n    var g = 0;\r\n\r\n    while (x.isEven() && y.isEven()) {\r\n      x.iushrn(1);\r\n      y.iushrn(1);\r\n      ++g;\r\n    }\r\n\r\n    var yp = y.clone();\r\n    var xp = x.clone();\r\n\r\n    while (!x.isZero()) {\r\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        x.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (A.isOdd() || B.isOdd()) {\r\n            A.iadd(yp);\r\n            B.isub(xp);\r\n          }\r\n\r\n          A.iushrn(1);\r\n          B.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        y.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (C.isOdd() || D.isOdd()) {\r\n            C.iadd(yp);\r\n            D.isub(xp);\r\n          }\r\n\r\n          C.iushrn(1);\r\n          D.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (x.cmp(y) >= 0) {\r\n        x.isub(y);\r\n        A.isub(C);\r\n        B.isub(D);\r\n      } else {\r\n        y.isub(x);\r\n        C.isub(A);\r\n        D.isub(B);\r\n      }\r\n    }\r\n\r\n    return {\r\n      a: C,\r\n      b: D,\r\n      gcd: y.iushln(g)\r\n    };\r\n  };\r\n\r\n  // This is reduced incarnation of the binary EEA\r\n  // above, designated to invert members of the\r\n  // _prime_ fields F(p) at a maximal speed\r\n  BN.prototype._invmp = function _invmp (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var a = this;\r\n    var b = p.clone();\r\n\r\n    if (a.negative !== 0) {\r\n      a = a.umod(p);\r\n    } else {\r\n      a = a.clone();\r\n    }\r\n\r\n    var x1 = new BN(1);\r\n    var x2 = new BN(0);\r\n\r\n    var delta = b.clone();\r\n\r\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\r\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        a.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (x1.isOdd()) {\r\n            x1.iadd(delta);\r\n          }\r\n\r\n          x1.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        b.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (x2.isOdd()) {\r\n            x2.iadd(delta);\r\n          }\r\n\r\n          x2.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (a.cmp(b) >= 0) {\r\n        a.isub(b);\r\n        x1.isub(x2);\r\n      } else {\r\n        b.isub(a);\r\n        x2.isub(x1);\r\n      }\r\n    }\r\n\r\n    var res;\r\n    if (a.cmpn(1) === 0) {\r\n      res = x1;\r\n    } else {\r\n      res = x2;\r\n    }\r\n\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(p);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gcd = function gcd (num) {\r\n    if (this.isZero()) return num.abs();\r\n    if (num.isZero()) return this.abs();\r\n\r\n    var a = this.clone();\r\n    var b = num.clone();\r\n    a.negative = 0;\r\n    b.negative = 0;\r\n\r\n    // Remove common factor of two\r\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\r\n      a.iushrn(1);\r\n      b.iushrn(1);\r\n    }\r\n\r\n    do {\r\n      while (a.isEven()) {\r\n        a.iushrn(1);\r\n      }\r\n      while (b.isEven()) {\r\n        b.iushrn(1);\r\n      }\r\n\r\n      var r = a.cmp(b);\r\n      if (r < 0) {\r\n        // Swap `a` and `b` to make `a` always bigger than `b`\r\n        var t = a;\r\n        a = b;\r\n        b = t;\r\n      } else if (r === 0 || b.cmpn(1) === 0) {\r\n        break;\r\n      }\r\n\r\n      a.isub(b);\r\n    } while (true);\r\n\r\n    return b.iushln(shift);\r\n  };\r\n\r\n  // Invert number in the field F(num)\r\n  BN.prototype.invm = function invm (num) {\r\n    return this.egcd(num).a.umod(num);\r\n  };\r\n\r\n  BN.prototype.isEven = function isEven () {\r\n    return (this.words[0] & 1) === 0;\r\n  };\r\n\r\n  BN.prototype.isOdd = function isOdd () {\r\n    return (this.words[0] & 1) === 1;\r\n  };\r\n\r\n  // And first word and num\r\n  BN.prototype.andln = function andln (num) {\r\n    return this.words[0] & num;\r\n  };\r\n\r\n  // Increment at the bit position in-line\r\n  BN.prototype.bincn = function bincn (bit) {\r\n    assert(typeof bit === 'number');\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) {\r\n      this._expand(s + 1);\r\n      this.words[s] |= q;\r\n      return this;\r\n    }\r\n\r\n    // Add bit and propagate, if needed\r\n    var carry = q;\r\n    for (var i = s; carry !== 0 && i < this.length; i++) {\r\n      var w = this.words[i] | 0;\r\n      w += carry;\r\n      carry = w >>> 26;\r\n      w &= 0x3ffffff;\r\n      this.words[i] = w;\r\n    }\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.isZero = function isZero () {\r\n    return this.length === 1 && this.words[0] === 0;\r\n  };\r\n\r\n  BN.prototype.cmpn = function cmpn (num) {\r\n    var negative = num < 0;\r\n\r\n    if (this.negative !== 0 && !negative) return -1;\r\n    if (this.negative === 0 && negative) return 1;\r\n\r\n    this.strip();\r\n\r\n    var res;\r\n    if (this.length > 1) {\r\n      res = 1;\r\n    } else {\r\n      if (negative) {\r\n        num = -num;\r\n      }\r\n\r\n      assert(num <= 0x3ffffff, 'Number is too big');\r\n\r\n      var w = this.words[0] | 0;\r\n      res = w === num ? 0 : w < num ? -1 : 1;\r\n    }\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Compare two numbers and return:\r\n  // 1 - if `this` > `num`\r\n  // 0 - if `this` == `num`\r\n  // -1 - if `this` < `num`\r\n  BN.prototype.cmp = function cmp (num) {\r\n    if (this.negative !== 0 && num.negative === 0) return -1;\r\n    if (this.negative === 0 && num.negative !== 0) return 1;\r\n\r\n    var res = this.ucmp(num);\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Unsigned comparison\r\n  BN.prototype.ucmp = function ucmp (num) {\r\n    // At this point both numbers have the same sign\r\n    if (this.length > num.length) return 1;\r\n    if (this.length < num.length) return -1;\r\n\r\n    var res = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var a = this.words[i] | 0;\r\n      var b = num.words[i] | 0;\r\n\r\n      if (a === b) continue;\r\n      if (a < b) {\r\n        res = -1;\r\n      } else if (a > b) {\r\n        res = 1;\r\n      }\r\n      break;\r\n    }\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gtn = function gtn (num) {\r\n    return this.cmpn(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gt = function gt (num) {\r\n    return this.cmp(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gten = function gten (num) {\r\n    return this.cmpn(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.gte = function gte (num) {\r\n    return this.cmp(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.ltn = function ltn (num) {\r\n    return this.cmpn(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lt = function lt (num) {\r\n    return this.cmp(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lten = function lten (num) {\r\n    return this.cmpn(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.lte = function lte (num) {\r\n    return this.cmp(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.eqn = function eqn (num) {\r\n    return this.cmpn(num) === 0;\r\n  };\r\n\r\n  BN.prototype.eq = function eq (num) {\r\n    return this.cmp(num) === 0;\r\n  };\r\n\r\n  //\r\n  // A reduce context, could be using montgomery or something better, depending\r\n  // on the `m` itself.\r\n  //\r\n  BN.red = function red (num) {\r\n    return new Red(num);\r\n  };\r\n\r\n  BN.prototype.toRed = function toRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    assert(this.negative === 0, 'red works only with positives');\r\n    return ctx.convertTo(this)._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.fromRed = function fromRed () {\r\n    assert(this.red, 'fromRed works only with numbers in reduction context');\r\n    return this.red.convertFrom(this);\r\n  };\r\n\r\n  BN.prototype._forceRed = function _forceRed (ctx) {\r\n    this.red = ctx;\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.forceRed = function forceRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    return this._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.redAdd = function redAdd (num) {\r\n    assert(this.red, 'redAdd works only with red numbers');\r\n    return this.red.add(this, num);\r\n  };\r\n\r\n  BN.prototype.redIAdd = function redIAdd (num) {\r\n    assert(this.red, 'redIAdd works only with red numbers');\r\n    return this.red.iadd(this, num);\r\n  };\r\n\r\n  BN.prototype.redSub = function redSub (num) {\r\n    assert(this.red, 'redSub works only with red numbers');\r\n    return this.red.sub(this, num);\r\n  };\r\n\r\n  BN.prototype.redISub = function redISub (num) {\r\n    assert(this.red, 'redISub works only with red numbers');\r\n    return this.red.isub(this, num);\r\n  };\r\n\r\n  BN.prototype.redShl = function redShl (num) {\r\n    assert(this.red, 'redShl works only with red numbers');\r\n    return this.red.shl(this, num);\r\n  };\r\n\r\n  BN.prototype.redMul = function redMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.mul(this, num);\r\n  };\r\n\r\n  BN.prototype.redIMul = function redIMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.imul(this, num);\r\n  };\r\n\r\n  BN.prototype.redSqr = function redSqr () {\r\n    assert(this.red, 'redSqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqr(this);\r\n  };\r\n\r\n  BN.prototype.redISqr = function redISqr () {\r\n    assert(this.red, 'redISqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.isqr(this);\r\n  };\r\n\r\n  // Square root over p\r\n  BN.prototype.redSqrt = function redSqrt () {\r\n    assert(this.red, 'redSqrt works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqrt(this);\r\n  };\r\n\r\n  BN.prototype.redInvm = function redInvm () {\r\n    assert(this.red, 'redInvm works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.invm(this);\r\n  };\r\n\r\n  // Return negative clone of `this` % `red modulo`\r\n  BN.prototype.redNeg = function redNeg () {\r\n    assert(this.red, 'redNeg works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.neg(this);\r\n  };\r\n\r\n  BN.prototype.redPow = function redPow (num) {\r\n    assert(this.red && !num.red, 'redPow(normalNum)');\r\n    this.red._verify1(this);\r\n    return this.red.pow(this, num);\r\n  };\r\n\r\n  // Prime numbers with efficient reduction\r\n  var primes = {\r\n    k256: null,\r\n    p224: null,\r\n    p192: null,\r\n    p25519: null\r\n  };\r\n\r\n  // Pseudo-Mersenne prime\r\n  function MPrime (name, p) {\r\n    // P = 2 ^ N - K\r\n    this.name = name;\r\n    this.p = new BN(p, 16);\r\n    this.n = this.p.bitLength();\r\n    this.k = new BN(1).iushln(this.n).isub(this.p);\r\n\r\n    this.tmp = this._tmp();\r\n  }\r\n\r\n  MPrime.prototype._tmp = function _tmp () {\r\n    var tmp = new BN(null);\r\n    tmp.words = new Array(Math.ceil(this.n / 13));\r\n    return tmp;\r\n  };\r\n\r\n  MPrime.prototype.ireduce = function ireduce (num) {\r\n    // Assumes that `num` is less than `P^2`\r\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\r\n    var r = num;\r\n    var rlen;\r\n\r\n    do {\r\n      this.split(r, this.tmp);\r\n      r = this.imulK(r);\r\n      r = r.iadd(this.tmp);\r\n      rlen = r.bitLength();\r\n    } while (rlen > this.n);\r\n\r\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\r\n    if (cmp === 0) {\r\n      r.words[0] = 0;\r\n      r.length = 1;\r\n    } else if (cmp > 0) {\r\n      r.isub(this.p);\r\n    } else {\r\n      if (r.strip !== undefined) {\r\n        // r is BN v4 instance\r\n        r.strip();\r\n      } else {\r\n        // r is BN v5 instance\r\n        r._strip();\r\n      }\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  MPrime.prototype.split = function split (input, out) {\r\n    input.iushrn(this.n, 0, out);\r\n  };\r\n\r\n  MPrime.prototype.imulK = function imulK (num) {\r\n    return num.imul(this.k);\r\n  };\r\n\r\n  function K256 () {\r\n    MPrime.call(\r\n      this,\r\n      'k256',\r\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\r\n  }\r\n  inherits(K256, MPrime);\r\n\r\n  K256.prototype.split = function split (input, output) {\r\n    // 256 = 9 * 26 + 22\r\n    var mask = 0x3fffff;\r\n\r\n    var outLen = Math.min(input.length, 9);\r\n    for (var i = 0; i < outLen; i++) {\r\n      output.words[i] = input.words[i];\r\n    }\r\n    output.length = outLen;\r\n\r\n    if (input.length <= 9) {\r\n      input.words[0] = 0;\r\n      input.length = 1;\r\n      return;\r\n    }\r\n\r\n    // Shift by 9 limbs\r\n    var prev = input.words[9];\r\n    output.words[output.length++] = prev & mask;\r\n\r\n    for (i = 10; i < input.length; i++) {\r\n      var next = input.words[i] | 0;\r\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\r\n      prev = next;\r\n    }\r\n    prev >>>= 22;\r\n    input.words[i - 10] = prev;\r\n    if (prev === 0 && input.length > 10) {\r\n      input.length -= 10;\r\n    } else {\r\n      input.length -= 9;\r\n    }\r\n  };\r\n\r\n  K256.prototype.imulK = function imulK (num) {\r\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\r\n    num.words[num.length] = 0;\r\n    num.words[num.length + 1] = 0;\r\n    num.length += 2;\r\n\r\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\r\n    var lo = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var w = num.words[i] | 0;\r\n      lo += w * 0x3d1;\r\n      num.words[i] = lo & 0x3ffffff;\r\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\r\n    }\r\n\r\n    // Fast length reduction\r\n    if (num.words[num.length - 1] === 0) {\r\n      num.length--;\r\n      if (num.words[num.length - 1] === 0) {\r\n        num.length--;\r\n      }\r\n    }\r\n    return num;\r\n  };\r\n\r\n  function P224 () {\r\n    MPrime.call(\r\n      this,\r\n      'p224',\r\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\r\n  }\r\n  inherits(P224, MPrime);\r\n\r\n  function P192 () {\r\n    MPrime.call(\r\n      this,\r\n      'p192',\r\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\r\n  }\r\n  inherits(P192, MPrime);\r\n\r\n  function P25519 () {\r\n    // 2 ^ 255 - 19\r\n    MPrime.call(\r\n      this,\r\n      '25519',\r\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\r\n  }\r\n  inherits(P25519, MPrime);\r\n\r\n  P25519.prototype.imulK = function imulK (num) {\r\n    // K = 0x13\r\n    var carry = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var hi = (num.words[i] | 0) * 0x13 + carry;\r\n      var lo = hi & 0x3ffffff;\r\n      hi >>>= 26;\r\n\r\n      num.words[i] = lo;\r\n      carry = hi;\r\n    }\r\n    if (carry !== 0) {\r\n      num.words[num.length++] = carry;\r\n    }\r\n    return num;\r\n  };\r\n\r\n  // Exported mostly for testing purposes, use plain name instead\r\n  BN._prime = function prime (name) {\r\n    // Cached version of prime\r\n    if (primes[name]) return primes[name];\r\n\r\n    var prime;\r\n    if (name === 'k256') {\r\n      prime = new K256();\r\n    } else if (name === 'p224') {\r\n      prime = new P224();\r\n    } else if (name === 'p192') {\r\n      prime = new P192();\r\n    } else if (name === 'p25519') {\r\n      prime = new P25519();\r\n    } else {\r\n      throw new Error('Unknown prime ' + name);\r\n    }\r\n    primes[name] = prime;\r\n\r\n    return prime;\r\n  };\r\n\r\n  //\r\n  // Base reduction engine\r\n  //\r\n  function Red (m) {\r\n    if (typeof m === 'string') {\r\n      var prime = BN._prime(m);\r\n      this.m = prime.p;\r\n      this.prime = prime;\r\n    } else {\r\n      assert(m.gtn(1), 'modulus must be greater than 1');\r\n      this.m = m;\r\n      this.prime = null;\r\n    }\r\n  }\r\n\r\n  Red.prototype._verify1 = function _verify1 (a) {\r\n    assert(a.negative === 0, 'red works only with positives');\r\n    assert(a.red, 'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype._verify2 = function _verify2 (a, b) {\r\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\r\n    assert(a.red && a.red === b.red,\r\n      'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype.imod = function imod (a) {\r\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\r\n    return a.umod(this.m)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.neg = function neg (a) {\r\n    if (a.isZero()) {\r\n      return a.clone();\r\n    }\r\n\r\n    return this.m.sub(a)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.add = function add (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.add(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.iadd = function iadd (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.iadd(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.sub = function sub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.sub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.isub = function isub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.isub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.shl = function shl (a, num) {\r\n    this._verify1(a);\r\n    return this.imod(a.ushln(num));\r\n  };\r\n\r\n  Red.prototype.imul = function imul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.imul(b));\r\n  };\r\n\r\n  Red.prototype.mul = function mul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.mul(b));\r\n  };\r\n\r\n  Red.prototype.isqr = function isqr (a) {\r\n    return this.imul(a, a.clone());\r\n  };\r\n\r\n  Red.prototype.sqr = function sqr (a) {\r\n    return this.mul(a, a);\r\n  };\r\n\r\n  Red.prototype.sqrt = function sqrt (a) {\r\n    if (a.isZero()) return a.clone();\r\n\r\n    var mod3 = this.m.andln(3);\r\n    assert(mod3 % 2 === 1);\r\n\r\n    // Fast case\r\n    if (mod3 === 3) {\r\n      var pow = this.m.add(new BN(1)).iushrn(2);\r\n      return this.pow(a, pow);\r\n    }\r\n\r\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\r\n    //\r\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\r\n    var q = this.m.subn(1);\r\n    var s = 0;\r\n    while (!q.isZero() && q.andln(1) === 0) {\r\n      s++;\r\n      q.iushrn(1);\r\n    }\r\n    assert(!q.isZero());\r\n\r\n    var one = new BN(1).toRed(this);\r\n    var nOne = one.redNeg();\r\n\r\n    // Find quadratic non-residue\r\n    // NOTE: Max is such because of generalized Riemann hypothesis.\r\n    var lpow = this.m.subn(1).iushrn(1);\r\n    var z = this.m.bitLength();\r\n    z = new BN(2 * z * z).toRed(this);\r\n\r\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\r\n      z.redIAdd(nOne);\r\n    }\r\n\r\n    var c = this.pow(z, q);\r\n    var r = this.pow(a, q.addn(1).iushrn(1));\r\n    var t = this.pow(a, q);\r\n    var m = s;\r\n    while (t.cmp(one) !== 0) {\r\n      var tmp = t;\r\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\r\n        tmp = tmp.redSqr();\r\n      }\r\n      assert(i < m);\r\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\r\n\r\n      r = r.redMul(b);\r\n      c = b.redSqr();\r\n      t = t.redMul(c);\r\n      m = i;\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  Red.prototype.invm = function invm (a) {\r\n    var inv = a._invmp(this.m);\r\n    if (inv.negative !== 0) {\r\n      inv.negative = 0;\r\n      return this.imod(inv).redNeg();\r\n    } else {\r\n      return this.imod(inv);\r\n    }\r\n  };\r\n\r\n  Red.prototype.pow = function pow (a, num) {\r\n    if (num.isZero()) return new BN(1).toRed(this);\r\n    if (num.cmpn(1) === 0) return a.clone();\r\n\r\n    var windowSize = 4;\r\n    var wnd = new Array(1 << windowSize);\r\n    wnd[0] = new BN(1).toRed(this);\r\n    wnd[1] = a;\r\n    for (var i = 2; i < wnd.length; i++) {\r\n      wnd[i] = this.mul(wnd[i - 1], a);\r\n    }\r\n\r\n    var res = wnd[0];\r\n    var current = 0;\r\n    var currentLen = 0;\r\n    var start = num.bitLength() % 26;\r\n    if (start === 0) {\r\n      start = 26;\r\n    }\r\n\r\n    for (i = num.length - 1; i >= 0; i--) {\r\n      var word = num.words[i];\r\n      for (var j = start - 1; j >= 0; j--) {\r\n        var bit = (word >> j) & 1;\r\n        if (res !== wnd[0]) {\r\n          res = this.sqr(res);\r\n        }\r\n\r\n        if (bit === 0 && current === 0) {\r\n          currentLen = 0;\r\n          continue;\r\n        }\r\n\r\n        current <<= 1;\r\n        current |= bit;\r\n        currentLen++;\r\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\r\n\r\n        res = this.mul(res, wnd[current]);\r\n        currentLen = 0;\r\n        current = 0;\r\n      }\r\n      start = 26;\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.convertTo = function convertTo (num) {\r\n    var r = num.umod(this.m);\r\n\r\n    return r === num ? r.clone() : r;\r\n  };\r\n\r\n  Red.prototype.convertFrom = function convertFrom (num) {\r\n    var res = num.clone();\r\n    res.red = null;\r\n    return res;\r\n  };\r\n\r\n  //\r\n  // Montgomery method engine\r\n  //\r\n\r\n  BN.mont = function mont (num) {\r\n    return new Mont(num);\r\n  };\r\n\r\n  function Mont (m) {\r\n    Red.call(this, m);\r\n\r\n    this.shift = this.m.bitLength();\r\n    if (this.shift % 26 !== 0) {\r\n      this.shift += 26 - (this.shift % 26);\r\n    }\r\n\r\n    this.r = new BN(1).iushln(this.shift);\r\n    this.r2 = this.imod(this.r.sqr());\r\n    this.rinv = this.r._invmp(this.m);\r\n\r\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\r\n    this.minv = this.minv.umod(this.r);\r\n    this.minv = this.r.sub(this.minv);\r\n  }\r\n  inherits(Mont, Red);\r\n\r\n  Mont.prototype.convertTo = function convertTo (num) {\r\n    return this.imod(num.ushln(this.shift));\r\n  };\r\n\r\n  Mont.prototype.convertFrom = function convertFrom (num) {\r\n    var r = this.imod(num.mul(this.rinv));\r\n    r.red = null;\r\n    return r;\r\n  };\r\n\r\n  Mont.prototype.imul = function imul (a, b) {\r\n    if (a.isZero() || b.isZero()) {\r\n      a.words[0] = 0;\r\n      a.length = 1;\r\n      return a;\r\n    }\r\n\r\n    var t = a.imul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.mul = function mul (a, b) {\r\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\r\n\r\n    var t = a.mul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.invm = function invm (a) {\r\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\r\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\r\n    return res._forceRed(this);\r\n  };\r\n})( false || module, this);\r\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack://Game/./node_modules/miller-rabin/node_modules/bn.js/lib/bn.js?");

/***/ }),

/***/ "./node_modules/minimalistic-assert/index.js":
/*!***************************************************!*\
  !*** ./node_modules/minimalistic-assert/index.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = assert;\n\nfunction assert(val, msg) {\n  if (!val)\n    throw new Error(msg || 'Assertion failed');\n}\n\nassert.equal = function assertEqual(l, r, msg) {\n  if (l != r)\n    throw new Error(msg || ('Assertion failed: ' + l + ' != ' + r));\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/minimalistic-assert/index.js?");

/***/ }),

/***/ "./node_modules/minimalistic-crypto-utils/lib/utils.js":
/*!*************************************************************!*\
  !*** ./node_modules/minimalistic-crypto-utils/lib/utils.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar utils = exports;\n\nfunction toArray(msg, enc) {\n  if (Array.isArray(msg))\n    return msg.slice();\n  if (!msg)\n    return [];\n  var res = [];\n  if (typeof msg !== 'string') {\n    for (var i = 0; i < msg.length; i++)\n      res[i] = msg[i] | 0;\n    return res;\n  }\n  if (enc === 'hex') {\n    msg = msg.replace(/[^a-z0-9]+/ig, '');\n    if (msg.length % 2 !== 0)\n      msg = '0' + msg;\n    for (var i = 0; i < msg.length; i += 2)\n      res.push(parseInt(msg[i] + msg[i + 1], 16));\n  } else {\n    for (var i = 0; i < msg.length; i++) {\n      var c = msg.charCodeAt(i);\n      var hi = c >> 8;\n      var lo = c & 0xff;\n      if (hi)\n        res.push(hi, lo);\n      else\n        res.push(lo);\n    }\n  }\n  return res;\n}\nutils.toArray = toArray;\n\nfunction zero2(word) {\n  if (word.length === 1)\n    return '0' + word;\n  else\n    return word;\n}\nutils.zero2 = zero2;\n\nfunction toHex(msg) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++)\n    res += zero2(msg[i].toString(16));\n  return res;\n}\nutils.toHex = toHex;\n\nutils.encode = function encode(arr, enc) {\n  if (enc === 'hex')\n    return toHex(arr);\n  else\n    return arr;\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/minimalistic-crypto-utils/lib/utils.js?");

/***/ }),

/***/ "./node_modules/pad-end/index.js":
/*!***************************************!*\
  !*** ./node_modules/pad-end/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nmodule.exports = function (string, maxLength, fillString) {\n\n  if (string == null || maxLength == null) {\n    return string;\n  }\n\n  var result    = String(string);\n  var targetLen = typeof maxLength === 'number'\n    ? maxLength\n    : parseInt(maxLength, 10);\n\n  if (isNaN(targetLen) || !isFinite(targetLen)) {\n    return result;\n  }\n\n\n  var length = result.length;\n  if (length >= targetLen) {\n    return result;\n  }\n\n\n  var filled = fillString == null ? '' : String(fillString);\n  if (filled === '') {\n    filled = ' ';\n  }\n\n\n  var fillLen = targetLen - length;\n\n  while (filled.length < fillLen) {\n    filled += filled;\n  }\n\n  var truncated = filled.length > fillLen ? filled.substr(0, fillLen) : filled;\n\n  return result + truncated;\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/pad-end/index.js?");

/***/ }),

/***/ "./node_modules/parse-asn1/aesid.json":
/*!********************************************!*\
  !*** ./node_modules/parse-asn1/aesid.json ***!
  \********************************************/
/*! exports provided: 2.16.840.1.101.3.4.1.1, 2.16.840.1.101.3.4.1.2, 2.16.840.1.101.3.4.1.3, 2.16.840.1.101.3.4.1.4, 2.16.840.1.101.3.4.1.21, 2.16.840.1.101.3.4.1.22, 2.16.840.1.101.3.4.1.23, 2.16.840.1.101.3.4.1.24, 2.16.840.1.101.3.4.1.41, 2.16.840.1.101.3.4.1.42, 2.16.840.1.101.3.4.1.43, 2.16.840.1.101.3.4.1.44, default */
/***/ (function(module) {

eval("module.exports = JSON.parse(\"{\\\"2.16.840.1.101.3.4.1.1\\\":\\\"aes-128-ecb\\\",\\\"2.16.840.1.101.3.4.1.2\\\":\\\"aes-128-cbc\\\",\\\"2.16.840.1.101.3.4.1.3\\\":\\\"aes-128-ofb\\\",\\\"2.16.840.1.101.3.4.1.4\\\":\\\"aes-128-cfb\\\",\\\"2.16.840.1.101.3.4.1.21\\\":\\\"aes-192-ecb\\\",\\\"2.16.840.1.101.3.4.1.22\\\":\\\"aes-192-cbc\\\",\\\"2.16.840.1.101.3.4.1.23\\\":\\\"aes-192-ofb\\\",\\\"2.16.840.1.101.3.4.1.24\\\":\\\"aes-192-cfb\\\",\\\"2.16.840.1.101.3.4.1.41\\\":\\\"aes-256-ecb\\\",\\\"2.16.840.1.101.3.4.1.42\\\":\\\"aes-256-cbc\\\",\\\"2.16.840.1.101.3.4.1.43\\\":\\\"aes-256-ofb\\\",\\\"2.16.840.1.101.3.4.1.44\\\":\\\"aes-256-cfb\\\"}\");\n\n//# sourceURL=webpack://Game/./node_modules/parse-asn1/aesid.json?");

/***/ }),

/***/ "./node_modules/parse-asn1/asn1.js":
/*!*****************************************!*\
  !*** ./node_modules/parse-asn1/asn1.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// from https://github.com/indutny/self-signed/blob/gh-pages/lib/asn1.js\n// Fedor, you are amazing.\n\n\nvar asn1 = __webpack_require__(/*! asn1.js */ \"./node_modules/asn1.js/lib/asn1.js\")\n\nexports.certificate = __webpack_require__(/*! ./certificate */ \"./node_modules/parse-asn1/certificate.js\")\n\nvar RSAPrivateKey = asn1.define('RSAPrivateKey', function () {\n  this.seq().obj(\n    this.key('version').int(),\n    this.key('modulus').int(),\n    this.key('publicExponent').int(),\n    this.key('privateExponent').int(),\n    this.key('prime1').int(),\n    this.key('prime2').int(),\n    this.key('exponent1').int(),\n    this.key('exponent2').int(),\n    this.key('coefficient').int()\n  )\n})\nexports.RSAPrivateKey = RSAPrivateKey\n\nvar RSAPublicKey = asn1.define('RSAPublicKey', function () {\n  this.seq().obj(\n    this.key('modulus').int(),\n    this.key('publicExponent').int()\n  )\n})\nexports.RSAPublicKey = RSAPublicKey\n\nvar PublicKey = asn1.define('SubjectPublicKeyInfo', function () {\n  this.seq().obj(\n    this.key('algorithm').use(AlgorithmIdentifier),\n    this.key('subjectPublicKey').bitstr()\n  )\n})\nexports.PublicKey = PublicKey\n\nvar AlgorithmIdentifier = asn1.define('AlgorithmIdentifier', function () {\n  this.seq().obj(\n    this.key('algorithm').objid(),\n    this.key('none').null_().optional(),\n    this.key('curve').objid().optional(),\n    this.key('params').seq().obj(\n      this.key('p').int(),\n      this.key('q').int(),\n      this.key('g').int()\n    ).optional()\n  )\n})\n\nvar PrivateKeyInfo = asn1.define('PrivateKeyInfo', function () {\n  this.seq().obj(\n    this.key('version').int(),\n    this.key('algorithm').use(AlgorithmIdentifier),\n    this.key('subjectPrivateKey').octstr()\n  )\n})\nexports.PrivateKey = PrivateKeyInfo\nvar EncryptedPrivateKeyInfo = asn1.define('EncryptedPrivateKeyInfo', function () {\n  this.seq().obj(\n    this.key('algorithm').seq().obj(\n      this.key('id').objid(),\n      this.key('decrypt').seq().obj(\n        this.key('kde').seq().obj(\n          this.key('id').objid(),\n          this.key('kdeparams').seq().obj(\n            this.key('salt').octstr(),\n            this.key('iters').int()\n          )\n        ),\n        this.key('cipher').seq().obj(\n          this.key('algo').objid(),\n          this.key('iv').octstr()\n        )\n      )\n    ),\n    this.key('subjectPrivateKey').octstr()\n  )\n})\n\nexports.EncryptedPrivateKey = EncryptedPrivateKeyInfo\n\nvar DSAPrivateKey = asn1.define('DSAPrivateKey', function () {\n  this.seq().obj(\n    this.key('version').int(),\n    this.key('p').int(),\n    this.key('q').int(),\n    this.key('g').int(),\n    this.key('pub_key').int(),\n    this.key('priv_key').int()\n  )\n})\nexports.DSAPrivateKey = DSAPrivateKey\n\nexports.DSAparam = asn1.define('DSAparam', function () {\n  this.int()\n})\n\nvar ECPrivateKey = asn1.define('ECPrivateKey', function () {\n  this.seq().obj(\n    this.key('version').int(),\n    this.key('privateKey').octstr(),\n    this.key('parameters').optional().explicit(0).use(ECParameters),\n    this.key('publicKey').optional().explicit(1).bitstr()\n  )\n})\nexports.ECPrivateKey = ECPrivateKey\n\nvar ECParameters = asn1.define('ECParameters', function () {\n  this.choice({\n    namedCurve: this.objid()\n  })\n})\n\nexports.signature = asn1.define('signature', function () {\n  this.seq().obj(\n    this.key('r').int(),\n    this.key('s').int()\n  )\n})\n\n\n//# sourceURL=webpack://Game/./node_modules/parse-asn1/asn1.js?");

/***/ }),

/***/ "./node_modules/parse-asn1/certificate.js":
/*!************************************************!*\
  !*** ./node_modules/parse-asn1/certificate.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// from https://github.com/Rantanen/node-dtls/blob/25a7dc861bda38cfeac93a723500eea4f0ac2e86/Certificate.js\n// thanks to @Rantanen\n\n\n\nvar asn = __webpack_require__(/*! asn1.js */ \"./node_modules/asn1.js/lib/asn1.js\")\n\nvar Time = asn.define('Time', function () {\n  this.choice({\n    utcTime: this.utctime(),\n    generalTime: this.gentime()\n  })\n})\n\nvar AttributeTypeValue = asn.define('AttributeTypeValue', function () {\n  this.seq().obj(\n    this.key('type').objid(),\n    this.key('value').any()\n  )\n})\n\nvar AlgorithmIdentifier = asn.define('AlgorithmIdentifier', function () {\n  this.seq().obj(\n    this.key('algorithm').objid(),\n    this.key('parameters').optional(),\n    this.key('curve').objid().optional()\n  )\n})\n\nvar SubjectPublicKeyInfo = asn.define('SubjectPublicKeyInfo', function () {\n  this.seq().obj(\n    this.key('algorithm').use(AlgorithmIdentifier),\n    this.key('subjectPublicKey').bitstr()\n  )\n})\n\nvar RelativeDistinguishedName = asn.define('RelativeDistinguishedName', function () {\n  this.setof(AttributeTypeValue)\n})\n\nvar RDNSequence = asn.define('RDNSequence', function () {\n  this.seqof(RelativeDistinguishedName)\n})\n\nvar Name = asn.define('Name', function () {\n  this.choice({\n    rdnSequence: this.use(RDNSequence)\n  })\n})\n\nvar Validity = asn.define('Validity', function () {\n  this.seq().obj(\n    this.key('notBefore').use(Time),\n    this.key('notAfter').use(Time)\n  )\n})\n\nvar Extension = asn.define('Extension', function () {\n  this.seq().obj(\n    this.key('extnID').objid(),\n    this.key('critical').bool().def(false),\n    this.key('extnValue').octstr()\n  )\n})\n\nvar TBSCertificate = asn.define('TBSCertificate', function () {\n  this.seq().obj(\n    this.key('version').explicit(0).int().optional(),\n    this.key('serialNumber').int(),\n    this.key('signature').use(AlgorithmIdentifier),\n    this.key('issuer').use(Name),\n    this.key('validity').use(Validity),\n    this.key('subject').use(Name),\n    this.key('subjectPublicKeyInfo').use(SubjectPublicKeyInfo),\n    this.key('issuerUniqueID').implicit(1).bitstr().optional(),\n    this.key('subjectUniqueID').implicit(2).bitstr().optional(),\n    this.key('extensions').explicit(3).seqof(Extension).optional()\n  )\n})\n\nvar X509Certificate = asn.define('X509Certificate', function () {\n  this.seq().obj(\n    this.key('tbsCertificate').use(TBSCertificate),\n    this.key('signatureAlgorithm').use(AlgorithmIdentifier),\n    this.key('signatureValue').bitstr()\n  )\n})\n\nmodule.exports = X509Certificate\n\n\n//# sourceURL=webpack://Game/./node_modules/parse-asn1/certificate.js?");

/***/ }),

/***/ "./node_modules/parse-asn1/fixProc.js":
/*!********************************************!*\
  !*** ./node_modules/parse-asn1/fixProc.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// adapted from https://github.com/apatil/pemstrip\nvar findProc = /Proc-Type: 4,ENCRYPTED[\\n\\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\\n\\r]+([0-9A-z\\n\\r+/=]+)[\\n\\r]+/m\nvar startRegex = /^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m\nvar fullRegex = /^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\\n\\r+/=]+)-----END \\1-----$/m\nvar evp = __webpack_require__(/*! evp_bytestokey */ \"./node_modules/evp_bytestokey/index.js\")\nvar ciphers = __webpack_require__(/*! browserify-aes */ \"./node_modules/browserify-aes/browser.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\nmodule.exports = function (okey, password) {\n  var key = okey.toString()\n  var match = key.match(findProc)\n  var decrypted\n  if (!match) {\n    var match2 = key.match(fullRegex)\n    decrypted = Buffer.from(match2[2].replace(/[\\r\\n]/g, ''), 'base64')\n  } else {\n    var suite = 'aes' + match[1]\n    var iv = Buffer.from(match[2], 'hex')\n    var cipherText = Buffer.from(match[3].replace(/[\\r\\n]/g, ''), 'base64')\n    var cipherKey = evp(password, iv.slice(0, 8), parseInt(match[1], 10)).key\n    var out = []\n    var cipher = ciphers.createDecipheriv(suite, cipherKey, iv)\n    out.push(cipher.update(cipherText))\n    out.push(cipher.final())\n    decrypted = Buffer.concat(out)\n  }\n  var tag = key.match(startRegex)[1]\n  return {\n    tag: tag,\n    data: decrypted\n  }\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/parse-asn1/fixProc.js?");

/***/ }),

/***/ "./node_modules/parse-asn1/index.js":
/*!******************************************!*\
  !*** ./node_modules/parse-asn1/index.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var asn1 = __webpack_require__(/*! ./asn1 */ \"./node_modules/parse-asn1/asn1.js\")\nvar aesid = __webpack_require__(/*! ./aesid.json */ \"./node_modules/parse-asn1/aesid.json\")\nvar fixProc = __webpack_require__(/*! ./fixProc */ \"./node_modules/parse-asn1/fixProc.js\")\nvar ciphers = __webpack_require__(/*! browserify-aes */ \"./node_modules/browserify-aes/browser.js\")\nvar compat = __webpack_require__(/*! pbkdf2 */ \"./node_modules/pbkdf2/browser.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\nmodule.exports = parseKeys\n\nfunction parseKeys (buffer) {\n  var password\n  if (typeof buffer === 'object' && !Buffer.isBuffer(buffer)) {\n    password = buffer.passphrase\n    buffer = buffer.key\n  }\n  if (typeof buffer === 'string') {\n    buffer = Buffer.from(buffer)\n  }\n\n  var stripped = fixProc(buffer, password)\n\n  var type = stripped.tag\n  var data = stripped.data\n  var subtype, ndata\n  switch (type) {\n    case 'CERTIFICATE':\n      ndata = asn1.certificate.decode(data, 'der').tbsCertificate.subjectPublicKeyInfo\n      // falls through\n    case 'PUBLIC KEY':\n      if (!ndata) {\n        ndata = asn1.PublicKey.decode(data, 'der')\n      }\n      subtype = ndata.algorithm.algorithm.join('.')\n      switch (subtype) {\n        case '1.2.840.113549.1.1.1':\n          return asn1.RSAPublicKey.decode(ndata.subjectPublicKey.data, 'der')\n        case '1.2.840.10045.2.1':\n          ndata.subjectPrivateKey = ndata.subjectPublicKey\n          return {\n            type: 'ec',\n            data: ndata\n          }\n        case '1.2.840.10040.4.1':\n          ndata.algorithm.params.pub_key = asn1.DSAparam.decode(ndata.subjectPublicKey.data, 'der')\n          return {\n            type: 'dsa',\n            data: ndata.algorithm.params\n          }\n        default: throw new Error('unknown key id ' + subtype)\n      }\n      // throw new Error('unknown key type ' + type)\n    case 'ENCRYPTED PRIVATE KEY':\n      data = asn1.EncryptedPrivateKey.decode(data, 'der')\n      data = decrypt(data, password)\n      // falls through\n    case 'PRIVATE KEY':\n      ndata = asn1.PrivateKey.decode(data, 'der')\n      subtype = ndata.algorithm.algorithm.join('.')\n      switch (subtype) {\n        case '1.2.840.113549.1.1.1':\n          return asn1.RSAPrivateKey.decode(ndata.subjectPrivateKey, 'der')\n        case '1.2.840.10045.2.1':\n          return {\n            curve: ndata.algorithm.curve,\n            privateKey: asn1.ECPrivateKey.decode(ndata.subjectPrivateKey, 'der').privateKey\n          }\n        case '1.2.840.10040.4.1':\n          ndata.algorithm.params.priv_key = asn1.DSAparam.decode(ndata.subjectPrivateKey, 'der')\n          return {\n            type: 'dsa',\n            params: ndata.algorithm.params\n          }\n        default: throw new Error('unknown key id ' + subtype)\n      }\n      // throw new Error('unknown key type ' + type)\n    case 'RSA PUBLIC KEY':\n      return asn1.RSAPublicKey.decode(data, 'der')\n    case 'RSA PRIVATE KEY':\n      return asn1.RSAPrivateKey.decode(data, 'der')\n    case 'DSA PRIVATE KEY':\n      return {\n        type: 'dsa',\n        params: asn1.DSAPrivateKey.decode(data, 'der')\n      }\n    case 'EC PRIVATE KEY':\n      data = asn1.ECPrivateKey.decode(data, 'der')\n      return {\n        curve: data.parameters.value,\n        privateKey: data.privateKey\n      }\n    default: throw new Error('unknown key type ' + type)\n  }\n}\nparseKeys.signature = asn1.signature\nfunction decrypt (data, password) {\n  var salt = data.algorithm.decrypt.kde.kdeparams.salt\n  var iters = parseInt(data.algorithm.decrypt.kde.kdeparams.iters.toString(), 10)\n  var algo = aesid[data.algorithm.decrypt.cipher.algo.join('.')]\n  var iv = data.algorithm.decrypt.cipher.iv\n  var cipherText = data.subjectPrivateKey\n  var keylen = parseInt(algo.split('-')[1], 10) / 8\n  var key = compat.pbkdf2Sync(password, salt, iters, keylen, 'sha1')\n  var cipher = ciphers.createDecipheriv(algo, key, iv)\n  var out = []\n  out.push(cipher.update(cipherText))\n  out.push(cipher.final())\n  return Buffer.concat(out)\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/parse-asn1/index.js?");

/***/ }),

/***/ "./node_modules/pbkdf2/browser.js":
/*!****************************************!*\
  !*** ./node_modules/pbkdf2/browser.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("exports.pbkdf2 = __webpack_require__(/*! ./lib/async */ \"./node_modules/pbkdf2/lib/async.js\")\nexports.pbkdf2Sync = __webpack_require__(/*! ./lib/sync */ \"./node_modules/pbkdf2/lib/sync-browser.js\")\n\n\n//# sourceURL=webpack://Game/./node_modules/pbkdf2/browser.js?");

/***/ }),

/***/ "./node_modules/pbkdf2/lib/async.js":
/*!******************************************!*\
  !*** ./node_modules/pbkdf2/lib/async.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global, process) {var Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nvar checkParameters = __webpack_require__(/*! ./precondition */ \"./node_modules/pbkdf2/lib/precondition.js\")\nvar defaultEncoding = __webpack_require__(/*! ./default-encoding */ \"./node_modules/pbkdf2/lib/default-encoding.js\")\nvar sync = __webpack_require__(/*! ./sync */ \"./node_modules/pbkdf2/lib/sync-browser.js\")\nvar toBuffer = __webpack_require__(/*! ./to-buffer */ \"./node_modules/pbkdf2/lib/to-buffer.js\")\n\nvar ZERO_BUF\nvar subtle = global.crypto && global.crypto.subtle\nvar toBrowser = {\n  sha: 'SHA-1',\n  'sha-1': 'SHA-1',\n  sha1: 'SHA-1',\n  sha256: 'SHA-256',\n  'sha-256': 'SHA-256',\n  sha384: 'SHA-384',\n  'sha-384': 'SHA-384',\n  'sha-512': 'SHA-512',\n  sha512: 'SHA-512'\n}\nvar checks = []\nfunction checkNative (algo) {\n  if (global.process && !global.process.browser) {\n    return Promise.resolve(false)\n  }\n  if (!subtle || !subtle.importKey || !subtle.deriveBits) {\n    return Promise.resolve(false)\n  }\n  if (checks[algo] !== undefined) {\n    return checks[algo]\n  }\n  ZERO_BUF = ZERO_BUF || Buffer.alloc(8)\n  var prom = browserPbkdf2(ZERO_BUF, ZERO_BUF, 10, 128, algo)\n    .then(function () {\n      return true\n    }).catch(function () {\n      return false\n    })\n  checks[algo] = prom\n  return prom\n}\n\nfunction browserPbkdf2 (password, salt, iterations, length, algo) {\n  return subtle.importKey(\n    'raw', password, { name: 'PBKDF2' }, false, ['deriveBits']\n  ).then(function (key) {\n    return subtle.deriveBits({\n      name: 'PBKDF2',\n      salt: salt,\n      iterations: iterations,\n      hash: {\n        name: algo\n      }\n    }, key, length << 3)\n  }).then(function (res) {\n    return Buffer.from(res)\n  })\n}\n\nfunction resolvePromise (promise, callback) {\n  promise.then(function (out) {\n    process.nextTick(function () {\n      callback(null, out)\n    })\n  }, function (e) {\n    process.nextTick(function () {\n      callback(e)\n    })\n  })\n}\nmodule.exports = function (password, salt, iterations, keylen, digest, callback) {\n  if (typeof digest === 'function') {\n    callback = digest\n    digest = undefined\n  }\n\n  digest = digest || 'sha1'\n  var algo = toBrowser[digest.toLowerCase()]\n\n  if (!algo || typeof global.Promise !== 'function') {\n    return process.nextTick(function () {\n      var out\n      try {\n        out = sync(password, salt, iterations, keylen, digest)\n      } catch (e) {\n        return callback(e)\n      }\n      callback(null, out)\n    })\n  }\n\n  checkParameters(iterations, keylen)\n  password = toBuffer(password, defaultEncoding, 'Password')\n  salt = toBuffer(salt, defaultEncoding, 'Salt')\n  if (typeof callback !== 'function') throw new Error('No callback provided to pbkdf2')\n\n  resolvePromise(checkNative(algo).then(function (resp) {\n    if (resp) return browserPbkdf2(password, salt, iterations, keylen, algo)\n\n    return sync(password, salt, iterations, keylen, digest)\n  }), callback)\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! ./../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/pbkdf2/lib/async.js?");

/***/ }),

/***/ "./node_modules/pbkdf2/lib/default-encoding.js":
/*!*****************************************************!*\
  !*** ./node_modules/pbkdf2/lib/default-encoding.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(process) {var defaultEncoding\n/* istanbul ignore next */\nif (process.browser) {\n  defaultEncoding = 'utf-8'\n} else if (process.version) {\n  var pVersionMajor = parseInt(process.version.split('.')[0].slice(1), 10)\n\n  defaultEncoding = pVersionMajor >= 6 ? 'utf-8' : 'binary'\n} else {\n  defaultEncoding = 'utf-8'\n}\nmodule.exports = defaultEncoding\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/pbkdf2/lib/default-encoding.js?");

/***/ }),

/***/ "./node_modules/pbkdf2/lib/precondition.js":
/*!*************************************************!*\
  !*** ./node_modules/pbkdf2/lib/precondition.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var MAX_ALLOC = Math.pow(2, 30) - 1 // default in iojs\n\nmodule.exports = function (iterations, keylen) {\n  if (typeof iterations !== 'number') {\n    throw new TypeError('Iterations not a number')\n  }\n\n  if (iterations < 0) {\n    throw new TypeError('Bad iterations')\n  }\n\n  if (typeof keylen !== 'number') {\n    throw new TypeError('Key length not a number')\n  }\n\n  if (keylen < 0 || keylen > MAX_ALLOC || keylen !== keylen) { /* eslint no-self-compare: 0 */\n    throw new TypeError('Bad key length')\n  }\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/pbkdf2/lib/precondition.js?");

/***/ }),

/***/ "./node_modules/pbkdf2/lib/sync-browser.js":
/*!*************************************************!*\
  !*** ./node_modules/pbkdf2/lib/sync-browser.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var md5 = __webpack_require__(/*! create-hash/md5 */ \"./node_modules/create-hash/md5.js\")\nvar RIPEMD160 = __webpack_require__(/*! ripemd160 */ \"./node_modules/ripemd160/index.js\")\nvar sha = __webpack_require__(/*! sha.js */ \"./node_modules/sha.js/index.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nvar checkParameters = __webpack_require__(/*! ./precondition */ \"./node_modules/pbkdf2/lib/precondition.js\")\nvar defaultEncoding = __webpack_require__(/*! ./default-encoding */ \"./node_modules/pbkdf2/lib/default-encoding.js\")\nvar toBuffer = __webpack_require__(/*! ./to-buffer */ \"./node_modules/pbkdf2/lib/to-buffer.js\")\n\nvar ZEROS = Buffer.alloc(128)\nvar sizes = {\n  md5: 16,\n  sha1: 20,\n  sha224: 28,\n  sha256: 32,\n  sha384: 48,\n  sha512: 64,\n  rmd160: 20,\n  ripemd160: 20\n}\n\nfunction Hmac (alg, key, saltLen) {\n  var hash = getDigest(alg)\n  var blocksize = (alg === 'sha512' || alg === 'sha384') ? 128 : 64\n\n  if (key.length > blocksize) {\n    key = hash(key)\n  } else if (key.length < blocksize) {\n    key = Buffer.concat([key, ZEROS], blocksize)\n  }\n\n  var ipad = Buffer.allocUnsafe(blocksize + sizes[alg])\n  var opad = Buffer.allocUnsafe(blocksize + sizes[alg])\n  for (var i = 0; i < blocksize; i++) {\n    ipad[i] = key[i] ^ 0x36\n    opad[i] = key[i] ^ 0x5C\n  }\n\n  var ipad1 = Buffer.allocUnsafe(blocksize + saltLen + 4)\n  ipad.copy(ipad1, 0, 0, blocksize)\n  this.ipad1 = ipad1\n  this.ipad2 = ipad\n  this.opad = opad\n  this.alg = alg\n  this.blocksize = blocksize\n  this.hash = hash\n  this.size = sizes[alg]\n}\n\nHmac.prototype.run = function (data, ipad) {\n  data.copy(ipad, this.blocksize)\n  var h = this.hash(ipad)\n  h.copy(this.opad, this.blocksize)\n  return this.hash(this.opad)\n}\n\nfunction getDigest (alg) {\n  function shaFunc (data) {\n    return sha(alg).update(data).digest()\n  }\n  function rmd160Func (data) {\n    return new RIPEMD160().update(data).digest()\n  }\n\n  if (alg === 'rmd160' || alg === 'ripemd160') return rmd160Func\n  if (alg === 'md5') return md5\n  return shaFunc\n}\n\nfunction pbkdf2 (password, salt, iterations, keylen, digest) {\n  checkParameters(iterations, keylen)\n  password = toBuffer(password, defaultEncoding, 'Password')\n  salt = toBuffer(salt, defaultEncoding, 'Salt')\n\n  digest = digest || 'sha1'\n\n  var hmac = new Hmac(digest, password, salt.length)\n\n  var DK = Buffer.allocUnsafe(keylen)\n  var block1 = Buffer.allocUnsafe(salt.length + 4)\n  salt.copy(block1, 0, 0, salt.length)\n\n  var destPos = 0\n  var hLen = sizes[digest]\n  var l = Math.ceil(keylen / hLen)\n\n  for (var i = 1; i <= l; i++) {\n    block1.writeUInt32BE(i, salt.length)\n\n    var T = hmac.run(block1, hmac.ipad1)\n    var U = T\n\n    for (var j = 1; j < iterations; j++) {\n      U = hmac.run(U, hmac.ipad2)\n      for (var k = 0; k < hLen; k++) T[k] ^= U[k]\n    }\n\n    T.copy(DK, destPos)\n    destPos += hLen\n  }\n\n  return DK\n}\n\nmodule.exports = pbkdf2\n\n\n//# sourceURL=webpack://Game/./node_modules/pbkdf2/lib/sync-browser.js?");

/***/ }),

/***/ "./node_modules/pbkdf2/lib/to-buffer.js":
/*!**********************************************!*\
  !*** ./node_modules/pbkdf2/lib/to-buffer.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nmodule.exports = function (thing, encoding, name) {\n  if (Buffer.isBuffer(thing)) {\n    return thing\n  } else if (typeof thing === 'string') {\n    return Buffer.from(thing, encoding)\n  } else if (ArrayBuffer.isView(thing)) {\n    return Buffer.from(thing.buffer)\n  } else {\n    throw new TypeError(name + ' must be a string, a Buffer, a typed array or a DataView')\n  }\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/pbkdf2/lib/to-buffer.js?");

/***/ }),

/***/ "./node_modules/process-nextick-args/index.js":
/*!****************************************************!*\
  !*** ./node_modules/process-nextick-args/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(process) {\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/process-nextick-args/index.js?");

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n//# sourceURL=webpack://Game/./node_modules/process/browser.js?");

/***/ }),

/***/ "./node_modules/public-encrypt/browser.js":
/*!************************************************!*\
  !*** ./node_modules/public-encrypt/browser.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("exports.publicEncrypt = __webpack_require__(/*! ./publicEncrypt */ \"./node_modules/public-encrypt/publicEncrypt.js\")\nexports.privateDecrypt = __webpack_require__(/*! ./privateDecrypt */ \"./node_modules/public-encrypt/privateDecrypt.js\")\n\nexports.privateEncrypt = function privateEncrypt (key, buf) {\n  return exports.publicEncrypt(key, buf, true)\n}\n\nexports.publicDecrypt = function publicDecrypt (key, buf) {\n  return exports.privateDecrypt(key, buf, true)\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/public-encrypt/browser.js?");

/***/ }),

/***/ "./node_modules/public-encrypt/mgf.js":
/*!********************************************!*\
  !*** ./node_modules/public-encrypt/mgf.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var createHash = __webpack_require__(/*! create-hash */ \"./node_modules/create-hash/browser.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nmodule.exports = function (seed, len) {\n  var t = Buffer.alloc(0)\n  var i = 0\n  var c\n  while (t.length < len) {\n    c = i2ops(i++)\n    t = Buffer.concat([t, createHash('sha1').update(seed).update(c).digest()])\n  }\n  return t.slice(0, len)\n}\n\nfunction i2ops (c) {\n  var out = Buffer.allocUnsafe(4)\n  out.writeUInt32BE(c, 0)\n  return out\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/public-encrypt/mgf.js?");

/***/ }),

/***/ "./node_modules/public-encrypt/node_modules/bn.js/lib/bn.js":
/*!******************************************************************!*\
  !*** ./node_modules/public-encrypt/node_modules/bn.js/lib/bn.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(module) {(function (module, exports) {\r\n  'use strict';\r\n\r\n  // Utils\r\n  function assert (val, msg) {\r\n    if (!val) throw new Error(msg || 'Assertion failed');\r\n  }\r\n\r\n  // Could use `inherits` module, but don't want to move from single file\r\n  // architecture yet.\r\n  function inherits (ctor, superCtor) {\r\n    ctor.super_ = superCtor;\r\n    var TempCtor = function () {};\r\n    TempCtor.prototype = superCtor.prototype;\r\n    ctor.prototype = new TempCtor();\r\n    ctor.prototype.constructor = ctor;\r\n  }\r\n\r\n  // BN\r\n\r\n  function BN (number, base, endian) {\r\n    if (BN.isBN(number)) {\r\n      return number;\r\n    }\r\n\r\n    this.negative = 0;\r\n    this.words = null;\r\n    this.length = 0;\r\n\r\n    // Reduction context\r\n    this.red = null;\r\n\r\n    if (number !== null) {\r\n      if (base === 'le' || base === 'be') {\r\n        endian = base;\r\n        base = 10;\r\n      }\r\n\r\n      this._init(number || 0, base || 10, endian || 'be');\r\n    }\r\n  }\r\n  if (typeof module === 'object') {\r\n    module.exports = BN;\r\n  } else {\r\n    exports.BN = BN;\r\n  }\r\n\r\n  BN.BN = BN;\r\n  BN.wordSize = 26;\r\n\r\n  var Buffer;\r\n  try {\r\n    Buffer = __webpack_require__(/*! buffer */ 15).Buffer;\r\n  } catch (e) {\r\n  }\r\n\r\n  BN.isBN = function isBN (num) {\r\n    if (num instanceof BN) {\r\n      return true;\r\n    }\r\n\r\n    return num !== null && typeof num === 'object' &&\r\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\r\n  };\r\n\r\n  BN.max = function max (left, right) {\r\n    if (left.cmp(right) > 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.min = function min (left, right) {\r\n    if (left.cmp(right) < 0) return left;\r\n    return right;\r\n  };\r\n\r\n  BN.prototype._init = function init (number, base, endian) {\r\n    if (typeof number === 'number') {\r\n      return this._initNumber(number, base, endian);\r\n    }\r\n\r\n    if (typeof number === 'object') {\r\n      return this._initArray(number, base, endian);\r\n    }\r\n\r\n    if (base === 'hex') {\r\n      base = 16;\r\n    }\r\n    assert(base === (base | 0) && base >= 2 && base <= 36);\r\n\r\n    number = number.toString().replace(/\\s+/g, '');\r\n    var start = 0;\r\n    if (number[0] === '-') {\r\n      start++;\r\n    }\r\n\r\n    if (base === 16) {\r\n      this._parseHex(number, start);\r\n    } else {\r\n      this._parseBase(number, base, start);\r\n    }\r\n\r\n    if (number[0] === '-') {\r\n      this.negative = 1;\r\n    }\r\n\r\n    this.strip();\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\r\n    if (number < 0) {\r\n      this.negative = 1;\r\n      number = -number;\r\n    }\r\n    if (number < 0x4000000) {\r\n      this.words = [ number & 0x3ffffff ];\r\n      this.length = 1;\r\n    } else if (number < 0x10000000000000) {\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff\r\n      ];\r\n      this.length = 2;\r\n    } else {\r\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\r\n      this.words = [\r\n        number & 0x3ffffff,\r\n        (number / 0x4000000) & 0x3ffffff,\r\n        1\r\n      ];\r\n      this.length = 3;\r\n    }\r\n\r\n    if (endian !== 'le') return;\r\n\r\n    // Reverse the bytes\r\n    this._initArray(this.toArray(), base, endian);\r\n  };\r\n\r\n  BN.prototype._initArray = function _initArray (number, base, endian) {\r\n    // Perhaps a Uint8Array\r\n    assert(typeof number.length === 'number');\r\n    if (number.length <= 0) {\r\n      this.words = [ 0 ];\r\n      this.length = 1;\r\n      return this;\r\n    }\r\n\r\n    this.length = Math.ceil(number.length / 3);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    var off = 0;\r\n    if (endian === 'be') {\r\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\r\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    } else if (endian === 'le') {\r\n      for (i = 0, j = 0; i < number.length; i += 3) {\r\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\r\n        this.words[j] |= (w << off) & 0x3ffffff;\r\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\r\n        off += 24;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          j++;\r\n        }\r\n      }\r\n    }\r\n    return this.strip();\r\n  };\r\n\r\n  function parseHex (str, start, end) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r <<= 4;\r\n\r\n      // 'a' - 'f'\r\n      if (c >= 49 && c <= 54) {\r\n        r |= c - 49 + 0xa;\r\n\r\n      // 'A' - 'F'\r\n      } else if (c >= 17 && c <= 22) {\r\n        r |= c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        r |= c & 0xf;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseHex = function _parseHex (number, start) {\r\n    // Create possibly bigger array to ensure that it fits the number\r\n    this.length = Math.ceil((number.length - start) / 6);\r\n    this.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      this.words[i] = 0;\r\n    }\r\n\r\n    var j, w;\r\n    // Scan 24-bit chunks and add them to the number\r\n    var off = 0;\r\n    for (i = number.length - 6, j = 0; i >= start; i -= 6) {\r\n      w = parseHex(number, i, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      // NOTE: `0x3fffff` is intentional here, 26bits max shift + 24bit hex limb\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n      off += 24;\r\n      if (off >= 26) {\r\n        off -= 26;\r\n        j++;\r\n      }\r\n    }\r\n    if (i + 6 !== start) {\r\n      w = parseHex(number, start, i + 6);\r\n      this.words[j] |= (w << off) & 0x3ffffff;\r\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\r\n    }\r\n    this.strip();\r\n  };\r\n\r\n  function parseBase (str, start, end, mul) {\r\n    var r = 0;\r\n    var len = Math.min(str.length, end);\r\n    for (var i = start; i < len; i++) {\r\n      var c = str.charCodeAt(i) - 48;\r\n\r\n      r *= mul;\r\n\r\n      // 'a'\r\n      if (c >= 49) {\r\n        r += c - 49 + 0xa;\r\n\r\n      // 'A'\r\n      } else if (c >= 17) {\r\n        r += c - 17 + 0xa;\r\n\r\n      // '0' - '9'\r\n      } else {\r\n        r += c;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\r\n    // Initialize as zero\r\n    this.words = [ 0 ];\r\n    this.length = 1;\r\n\r\n    // Find length of limb in base\r\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\r\n      limbLen++;\r\n    }\r\n    limbLen--;\r\n    limbPow = (limbPow / base) | 0;\r\n\r\n    var total = number.length - start;\r\n    var mod = total % limbLen;\r\n    var end = Math.min(total, total - mod) + start;\r\n\r\n    var word = 0;\r\n    for (var i = start; i < end; i += limbLen) {\r\n      word = parseBase(number, i, i + limbLen, base);\r\n\r\n      this.imuln(limbPow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n\r\n    if (mod !== 0) {\r\n      var pow = 1;\r\n      word = parseBase(number, i, number.length, base);\r\n\r\n      for (i = 0; i < mod; i++) {\r\n        pow *= base;\r\n      }\r\n\r\n      this.imuln(pow);\r\n      if (this.words[0] + word < 0x4000000) {\r\n        this.words[0] += word;\r\n      } else {\r\n        this._iaddn(word);\r\n      }\r\n    }\r\n  };\r\n\r\n  BN.prototype.copy = function copy (dest) {\r\n    dest.words = new Array(this.length);\r\n    for (var i = 0; i < this.length; i++) {\r\n      dest.words[i] = this.words[i];\r\n    }\r\n    dest.length = this.length;\r\n    dest.negative = this.negative;\r\n    dest.red = this.red;\r\n  };\r\n\r\n  BN.prototype.clone = function clone () {\r\n    var r = new BN(null);\r\n    this.copy(r);\r\n    return r;\r\n  };\r\n\r\n  BN.prototype._expand = function _expand (size) {\r\n    while (this.length < size) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  // Remove leading `0` from `this`\r\n  BN.prototype.strip = function strip () {\r\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\r\n      this.length--;\r\n    }\r\n    return this._normSign();\r\n  };\r\n\r\n  BN.prototype._normSign = function _normSign () {\r\n    // -0 = 0\r\n    if (this.length === 1 && this.words[0] === 0) {\r\n      this.negative = 0;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.inspect = function inspect () {\r\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\r\n  };\r\n\r\n  /*\r\n\r\n  var zeros = [];\r\n  var groupSizes = [];\r\n  var groupBases = [];\r\n\r\n  var s = '';\r\n  var i = -1;\r\n  while (++i < BN.wordSize) {\r\n    zeros[i] = s;\r\n    s += '0';\r\n  }\r\n  groupSizes[0] = 0;\r\n  groupSizes[1] = 0;\r\n  groupBases[0] = 0;\r\n  groupBases[1] = 0;\r\n  var base = 2 - 1;\r\n  while (++base < 36 + 1) {\r\n    var groupSize = 0;\r\n    var groupBase = 1;\r\n    while (groupBase < (1 << BN.wordSize) / base) {\r\n      groupBase *= base;\r\n      groupSize += 1;\r\n    }\r\n    groupSizes[base] = groupSize;\r\n    groupBases[base] = groupBase;\r\n  }\r\n\r\n  */\r\n\r\n  var zeros = [\r\n    '',\r\n    '0',\r\n    '00',\r\n    '000',\r\n    '0000',\r\n    '00000',\r\n    '000000',\r\n    '0000000',\r\n    '00000000',\r\n    '000000000',\r\n    '0000000000',\r\n    '00000000000',\r\n    '000000000000',\r\n    '0000000000000',\r\n    '00000000000000',\r\n    '000000000000000',\r\n    '0000000000000000',\r\n    '00000000000000000',\r\n    '000000000000000000',\r\n    '0000000000000000000',\r\n    '00000000000000000000',\r\n    '000000000000000000000',\r\n    '0000000000000000000000',\r\n    '00000000000000000000000',\r\n    '000000000000000000000000',\r\n    '0000000000000000000000000'\r\n  ];\r\n\r\n  var groupSizes = [\r\n    0, 0,\r\n    25, 16, 12, 11, 10, 9, 8,\r\n    8, 7, 7, 7, 7, 6, 6,\r\n    6, 6, 6, 6, 6, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5,\r\n    5, 5, 5, 5, 5, 5, 5\r\n  ];\r\n\r\n  var groupBases = [\r\n    0, 0,\r\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\r\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\r\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\r\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\r\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\r\n  ];\r\n\r\n  BN.prototype.toString = function toString (base, padding) {\r\n    base = base || 10;\r\n    padding = padding | 0 || 1;\r\n\r\n    var out;\r\n    if (base === 16 || base === 'hex') {\r\n      out = '';\r\n      var off = 0;\r\n      var carry = 0;\r\n      for (var i = 0; i < this.length; i++) {\r\n        var w = this.words[i];\r\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\r\n        carry = (w >>> (24 - off)) & 0xffffff;\r\n        if (carry !== 0 || i !== this.length - 1) {\r\n          out = zeros[6 - word.length] + word + out;\r\n        } else {\r\n          out = word + out;\r\n        }\r\n        off += 2;\r\n        if (off >= 26) {\r\n          off -= 26;\r\n          i--;\r\n        }\r\n      }\r\n      if (carry !== 0) {\r\n        out = carry.toString(16) + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    if (base === (base | 0) && base >= 2 && base <= 36) {\r\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\r\n      var groupSize = groupSizes[base];\r\n      // var groupBase = Math.pow(base, groupSize);\r\n      var groupBase = groupBases[base];\r\n      out = '';\r\n      var c = this.clone();\r\n      c.negative = 0;\r\n      while (!c.isZero()) {\r\n        var r = c.modn(groupBase).toString(base);\r\n        c = c.idivn(groupBase);\r\n\r\n        if (!c.isZero()) {\r\n          out = zeros[groupSize - r.length] + r + out;\r\n        } else {\r\n          out = r + out;\r\n        }\r\n      }\r\n      if (this.isZero()) {\r\n        out = '0' + out;\r\n      }\r\n      while (out.length % padding !== 0) {\r\n        out = '0' + out;\r\n      }\r\n      if (this.negative !== 0) {\r\n        out = '-' + out;\r\n      }\r\n      return out;\r\n    }\r\n\r\n    assert(false, 'Base should be between 2 and 36');\r\n  };\r\n\r\n  BN.prototype.toNumber = function toNumber () {\r\n    var ret = this.words[0];\r\n    if (this.length === 2) {\r\n      ret += this.words[1] * 0x4000000;\r\n    } else if (this.length === 3 && this.words[2] === 0x01) {\r\n      // NOTE: at this stage it is known that the top bit is set\r\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\r\n    } else if (this.length > 2) {\r\n      assert(false, 'Number can only safely store up to 53 bits');\r\n    }\r\n    return (this.negative !== 0) ? -ret : ret;\r\n  };\r\n\r\n  BN.prototype.toJSON = function toJSON () {\r\n    return this.toString(16);\r\n  };\r\n\r\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\r\n    assert(typeof Buffer !== 'undefined');\r\n    return this.toArrayLike(Buffer, endian, length);\r\n  };\r\n\r\n  BN.prototype.toArray = function toArray (endian, length) {\r\n    return this.toArrayLike(Array, endian, length);\r\n  };\r\n\r\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\r\n    var byteLength = this.byteLength();\r\n    var reqLength = length || Math.max(1, byteLength);\r\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\r\n    assert(reqLength > 0, 'Requested array length <= 0');\r\n\r\n    this.strip();\r\n    var littleEndian = endian === 'le';\r\n    var res = new ArrayType(reqLength);\r\n\r\n    var b, i;\r\n    var q = this.clone();\r\n    if (!littleEndian) {\r\n      // Assume big-endian\r\n      for (i = 0; i < reqLength - byteLength; i++) {\r\n        res[i] = 0;\r\n      }\r\n\r\n      for (i = 0; !q.isZero(); i++) {\r\n        b = q.andln(0xff);\r\n        q.iushrn(8);\r\n\r\n        res[reqLength - i - 1] = b;\r\n      }\r\n    } else {\r\n      for (i = 0; !q.isZero(); i++) {\r\n        b = q.andln(0xff);\r\n        q.iushrn(8);\r\n\r\n        res[i] = b;\r\n      }\r\n\r\n      for (; i < reqLength; i++) {\r\n        res[i] = 0;\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  if (Math.clz32) {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      return 32 - Math.clz32(w);\r\n    };\r\n  } else {\r\n    BN.prototype._countBits = function _countBits (w) {\r\n      var t = w;\r\n      var r = 0;\r\n      if (t >= 0x1000) {\r\n        r += 13;\r\n        t >>>= 13;\r\n      }\r\n      if (t >= 0x40) {\r\n        r += 7;\r\n        t >>>= 7;\r\n      }\r\n      if (t >= 0x8) {\r\n        r += 4;\r\n        t >>>= 4;\r\n      }\r\n      if (t >= 0x02) {\r\n        r += 2;\r\n        t >>>= 2;\r\n      }\r\n      return r + t;\r\n    };\r\n  }\r\n\r\n  BN.prototype._zeroBits = function _zeroBits (w) {\r\n    // Short-cut\r\n    if (w === 0) return 26;\r\n\r\n    var t = w;\r\n    var r = 0;\r\n    if ((t & 0x1fff) === 0) {\r\n      r += 13;\r\n      t >>>= 13;\r\n    }\r\n    if ((t & 0x7f) === 0) {\r\n      r += 7;\r\n      t >>>= 7;\r\n    }\r\n    if ((t & 0xf) === 0) {\r\n      r += 4;\r\n      t >>>= 4;\r\n    }\r\n    if ((t & 0x3) === 0) {\r\n      r += 2;\r\n      t >>>= 2;\r\n    }\r\n    if ((t & 0x1) === 0) {\r\n      r++;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  // Return number of used bits in a BN\r\n  BN.prototype.bitLength = function bitLength () {\r\n    var w = this.words[this.length - 1];\r\n    var hi = this._countBits(w);\r\n    return (this.length - 1) * 26 + hi;\r\n  };\r\n\r\n  function toBitArray (num) {\r\n    var w = new Array(num.bitLength());\r\n\r\n    for (var bit = 0; bit < w.length; bit++) {\r\n      var off = (bit / 26) | 0;\r\n      var wbit = bit % 26;\r\n\r\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\r\n    }\r\n\r\n    return w;\r\n  }\r\n\r\n  // Number of trailing zero bits\r\n  BN.prototype.zeroBits = function zeroBits () {\r\n    if (this.isZero()) return 0;\r\n\r\n    var r = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var b = this._zeroBits(this.words[i]);\r\n      r += b;\r\n      if (b !== 26) break;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  BN.prototype.byteLength = function byteLength () {\r\n    return Math.ceil(this.bitLength() / 8);\r\n  };\r\n\r\n  BN.prototype.toTwos = function toTwos (width) {\r\n    if (this.negative !== 0) {\r\n      return this.abs().inotn(width).iaddn(1);\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.fromTwos = function fromTwos (width) {\r\n    if (this.testn(width - 1)) {\r\n      return this.notn(width).iaddn(1).ineg();\r\n    }\r\n    return this.clone();\r\n  };\r\n\r\n  BN.prototype.isNeg = function isNeg () {\r\n    return this.negative !== 0;\r\n  };\r\n\r\n  // Return negative clone of `this`\r\n  BN.prototype.neg = function neg () {\r\n    return this.clone().ineg();\r\n  };\r\n\r\n  BN.prototype.ineg = function ineg () {\r\n    if (!this.isZero()) {\r\n      this.negative ^= 1;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Or `num` with `this` in-place\r\n  BN.prototype.iuor = function iuor (num) {\r\n    while (this.length < num.length) {\r\n      this.words[this.length++] = 0;\r\n    }\r\n\r\n    for (var i = 0; i < num.length; i++) {\r\n      this.words[i] = this.words[i] | num.words[i];\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ior = function ior (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuor(num);\r\n  };\r\n\r\n  // Or `num` with `this`\r\n  BN.prototype.or = function or (num) {\r\n    if (this.length > num.length) return this.clone().ior(num);\r\n    return num.clone().ior(this);\r\n  };\r\n\r\n  BN.prototype.uor = function uor (num) {\r\n    if (this.length > num.length) return this.clone().iuor(num);\r\n    return num.clone().iuor(this);\r\n  };\r\n\r\n  // And `num` with `this` in-place\r\n  BN.prototype.iuand = function iuand (num) {\r\n    // b = min-length(num, this)\r\n    var b;\r\n    if (this.length > num.length) {\r\n      b = num;\r\n    } else {\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = this.words[i] & num.words[i];\r\n    }\r\n\r\n    this.length = b.length;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.iand = function iand (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuand(num);\r\n  };\r\n\r\n  // And `num` with `this`\r\n  BN.prototype.and = function and (num) {\r\n    if (this.length > num.length) return this.clone().iand(num);\r\n    return num.clone().iand(this);\r\n  };\r\n\r\n  BN.prototype.uand = function uand (num) {\r\n    if (this.length > num.length) return this.clone().iuand(num);\r\n    return num.clone().iuand(this);\r\n  };\r\n\r\n  // Xor `num` with `this` in-place\r\n  BN.prototype.iuxor = function iuxor (num) {\r\n    // a.length > b.length\r\n    var a;\r\n    var b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    for (var i = 0; i < b.length; i++) {\r\n      this.words[i] = a.words[i] ^ b.words[i];\r\n    }\r\n\r\n    if (this !== a) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = a.length;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ixor = function ixor (num) {\r\n    assert((this.negative | num.negative) === 0);\r\n    return this.iuxor(num);\r\n  };\r\n\r\n  // Xor `num` with `this`\r\n  BN.prototype.xor = function xor (num) {\r\n    if (this.length > num.length) return this.clone().ixor(num);\r\n    return num.clone().ixor(this);\r\n  };\r\n\r\n  BN.prototype.uxor = function uxor (num) {\r\n    if (this.length > num.length) return this.clone().iuxor(num);\r\n    return num.clone().iuxor(this);\r\n  };\r\n\r\n  // Not ``this`` with ``width`` bitwidth\r\n  BN.prototype.inotn = function inotn (width) {\r\n    assert(typeof width === 'number' && width >= 0);\r\n\r\n    var bytesNeeded = Math.ceil(width / 26) | 0;\r\n    var bitsLeft = width % 26;\r\n\r\n    // Extend the buffer with leading zeroes\r\n    this._expand(bytesNeeded);\r\n\r\n    if (bitsLeft > 0) {\r\n      bytesNeeded--;\r\n    }\r\n\r\n    // Handle complete words\r\n    for (var i = 0; i < bytesNeeded; i++) {\r\n      this.words[i] = ~this.words[i] & 0x3ffffff;\r\n    }\r\n\r\n    // Handle the residue\r\n    if (bitsLeft > 0) {\r\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\r\n    }\r\n\r\n    // And remove leading zeroes\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.notn = function notn (width) {\r\n    return this.clone().inotn(width);\r\n  };\r\n\r\n  // Set `bit` of `this`\r\n  BN.prototype.setn = function setn (bit, val) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n\r\n    var off = (bit / 26) | 0;\r\n    var wbit = bit % 26;\r\n\r\n    this._expand(off + 1);\r\n\r\n    if (val) {\r\n      this.words[off] = this.words[off] | (1 << wbit);\r\n    } else {\r\n      this.words[off] = this.words[off] & ~(1 << wbit);\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Add `num` to `this` in-place\r\n  BN.prototype.iadd = function iadd (num) {\r\n    var r;\r\n\r\n    // negative + positive\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      this.negative = 0;\r\n      r = this.isub(num);\r\n      this.negative ^= 1;\r\n      return this._normSign();\r\n\r\n    // positive + negative\r\n    } else if (this.negative === 0 && num.negative !== 0) {\r\n      num.negative = 0;\r\n      r = this.isub(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n    }\r\n\r\n    // a.length > b.length\r\n    var a, b;\r\n    if (this.length > num.length) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      this.words[i] = r & 0x3ffffff;\r\n      carry = r >>> 26;\r\n    }\r\n\r\n    this.length = a.length;\r\n    if (carry !== 0) {\r\n      this.words[this.length] = carry;\r\n      this.length++;\r\n    // Copy the rest of the words\r\n    } else if (a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  // Add `num` to `this`\r\n  BN.prototype.add = function add (num) {\r\n    var res;\r\n    if (num.negative !== 0 && this.negative === 0) {\r\n      num.negative = 0;\r\n      res = this.sub(num);\r\n      num.negative ^= 1;\r\n      return res;\r\n    } else if (num.negative === 0 && this.negative !== 0) {\r\n      this.negative = 0;\r\n      res = num.sub(this);\r\n      this.negative = 1;\r\n      return res;\r\n    }\r\n\r\n    if (this.length > num.length) return this.clone().iadd(num);\r\n\r\n    return num.clone().iadd(this);\r\n  };\r\n\r\n  // Subtract `num` from `this` in-place\r\n  BN.prototype.isub = function isub (num) {\r\n    // this - (-num) = this + num\r\n    if (num.negative !== 0) {\r\n      num.negative = 0;\r\n      var r = this.iadd(num);\r\n      num.negative = 1;\r\n      return r._normSign();\r\n\r\n    // -this - num = -(this + num)\r\n    } else if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iadd(num);\r\n      this.negative = 1;\r\n      return this._normSign();\r\n    }\r\n\r\n    // At this point both numbers are positive\r\n    var cmp = this.cmp(num);\r\n\r\n    // Optimization - zeroify\r\n    if (cmp === 0) {\r\n      this.negative = 0;\r\n      this.length = 1;\r\n      this.words[0] = 0;\r\n      return this;\r\n    }\r\n\r\n    // a > b\r\n    var a, b;\r\n    if (cmp > 0) {\r\n      a = this;\r\n      b = num;\r\n    } else {\r\n      a = num;\r\n      b = this;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (var i = 0; i < b.length; i++) {\r\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n    for (; carry !== 0 && i < a.length; i++) {\r\n      r = (a.words[i] | 0) + carry;\r\n      carry = r >> 26;\r\n      this.words[i] = r & 0x3ffffff;\r\n    }\r\n\r\n    // Copy rest of the words\r\n    if (carry === 0 && i < a.length && a !== this) {\r\n      for (; i < a.length; i++) {\r\n        this.words[i] = a.words[i];\r\n      }\r\n    }\r\n\r\n    this.length = Math.max(this.length, i);\r\n\r\n    if (a !== this) {\r\n      this.negative = 1;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Subtract `num` from `this`\r\n  BN.prototype.sub = function sub (num) {\r\n    return this.clone().isub(num);\r\n  };\r\n\r\n  function smallMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    var len = (self.length + num.length) | 0;\r\n    out.length = len;\r\n    len = (len - 1) | 0;\r\n\r\n    // Peel one iteration (compiler can't do it, because of code complexity)\r\n    var a = self.words[0] | 0;\r\n    var b = num.words[0] | 0;\r\n    var r = a * b;\r\n\r\n    var lo = r & 0x3ffffff;\r\n    var carry = (r / 0x4000000) | 0;\r\n    out.words[0] = lo;\r\n\r\n    for (var k = 1; k < len; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = carry >>> 26;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = (k - j) | 0;\r\n        a = self.words[i] | 0;\r\n        b = num.words[j] | 0;\r\n        r = a * b + rword;\r\n        ncarry += (r / 0x4000000) | 0;\r\n        rword = r & 0x3ffffff;\r\n      }\r\n      out.words[k] = rword | 0;\r\n      carry = ncarry | 0;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry | 0;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out.strip();\r\n  }\r\n\r\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\r\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\r\n  // multiplication (like elliptic secp256k1).\r\n  var comb10MulTo = function comb10MulTo (self, num, out) {\r\n    var a = self.words;\r\n    var b = num.words;\r\n    var o = out.words;\r\n    var c = 0;\r\n    var lo;\r\n    var mid;\r\n    var hi;\r\n    var a0 = a[0] | 0;\r\n    var al0 = a0 & 0x1fff;\r\n    var ah0 = a0 >>> 13;\r\n    var a1 = a[1] | 0;\r\n    var al1 = a1 & 0x1fff;\r\n    var ah1 = a1 >>> 13;\r\n    var a2 = a[2] | 0;\r\n    var al2 = a2 & 0x1fff;\r\n    var ah2 = a2 >>> 13;\r\n    var a3 = a[3] | 0;\r\n    var al3 = a3 & 0x1fff;\r\n    var ah3 = a3 >>> 13;\r\n    var a4 = a[4] | 0;\r\n    var al4 = a4 & 0x1fff;\r\n    var ah4 = a4 >>> 13;\r\n    var a5 = a[5] | 0;\r\n    var al5 = a5 & 0x1fff;\r\n    var ah5 = a5 >>> 13;\r\n    var a6 = a[6] | 0;\r\n    var al6 = a6 & 0x1fff;\r\n    var ah6 = a6 >>> 13;\r\n    var a7 = a[7] | 0;\r\n    var al7 = a7 & 0x1fff;\r\n    var ah7 = a7 >>> 13;\r\n    var a8 = a[8] | 0;\r\n    var al8 = a8 & 0x1fff;\r\n    var ah8 = a8 >>> 13;\r\n    var a9 = a[9] | 0;\r\n    var al9 = a9 & 0x1fff;\r\n    var ah9 = a9 >>> 13;\r\n    var b0 = b[0] | 0;\r\n    var bl0 = b0 & 0x1fff;\r\n    var bh0 = b0 >>> 13;\r\n    var b1 = b[1] | 0;\r\n    var bl1 = b1 & 0x1fff;\r\n    var bh1 = b1 >>> 13;\r\n    var b2 = b[2] | 0;\r\n    var bl2 = b2 & 0x1fff;\r\n    var bh2 = b2 >>> 13;\r\n    var b3 = b[3] | 0;\r\n    var bl3 = b3 & 0x1fff;\r\n    var bh3 = b3 >>> 13;\r\n    var b4 = b[4] | 0;\r\n    var bl4 = b4 & 0x1fff;\r\n    var bh4 = b4 >>> 13;\r\n    var b5 = b[5] | 0;\r\n    var bl5 = b5 & 0x1fff;\r\n    var bh5 = b5 >>> 13;\r\n    var b6 = b[6] | 0;\r\n    var bl6 = b6 & 0x1fff;\r\n    var bh6 = b6 >>> 13;\r\n    var b7 = b[7] | 0;\r\n    var bl7 = b7 & 0x1fff;\r\n    var bh7 = b7 >>> 13;\r\n    var b8 = b[8] | 0;\r\n    var bl8 = b8 & 0x1fff;\r\n    var bh8 = b8 >>> 13;\r\n    var b9 = b[9] | 0;\r\n    var bl9 = b9 & 0x1fff;\r\n    var bh9 = b9 >>> 13;\r\n\r\n    out.negative = self.negative ^ num.negative;\r\n    out.length = 19;\r\n    /* k = 0 */\r\n    lo = Math.imul(al0, bl0);\r\n    mid = Math.imul(al0, bh0);\r\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\r\n    hi = Math.imul(ah0, bh0);\r\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\r\n    w0 &= 0x3ffffff;\r\n    /* k = 1 */\r\n    lo = Math.imul(al1, bl0);\r\n    mid = Math.imul(al1, bh0);\r\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\r\n    hi = Math.imul(ah1, bh0);\r\n    lo = (lo + Math.imul(al0, bl1)) | 0;\r\n    mid = (mid + Math.imul(al0, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\r\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\r\n    w1 &= 0x3ffffff;\r\n    /* k = 2 */\r\n    lo = Math.imul(al2, bl0);\r\n    mid = Math.imul(al2, bh0);\r\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\r\n    hi = Math.imul(ah2, bh0);\r\n    lo = (lo + Math.imul(al1, bl1)) | 0;\r\n    mid = (mid + Math.imul(al1, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\r\n    lo = (lo + Math.imul(al0, bl2)) | 0;\r\n    mid = (mid + Math.imul(al0, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\r\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\r\n    w2 &= 0x3ffffff;\r\n    /* k = 3 */\r\n    lo = Math.imul(al3, bl0);\r\n    mid = Math.imul(al3, bh0);\r\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\r\n    hi = Math.imul(ah3, bh0);\r\n    lo = (lo + Math.imul(al2, bl1)) | 0;\r\n    mid = (mid + Math.imul(al2, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\r\n    lo = (lo + Math.imul(al1, bl2)) | 0;\r\n    mid = (mid + Math.imul(al1, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\r\n    lo = (lo + Math.imul(al0, bl3)) | 0;\r\n    mid = (mid + Math.imul(al0, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\r\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\r\n    w3 &= 0x3ffffff;\r\n    /* k = 4 */\r\n    lo = Math.imul(al4, bl0);\r\n    mid = Math.imul(al4, bh0);\r\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\r\n    hi = Math.imul(ah4, bh0);\r\n    lo = (lo + Math.imul(al3, bl1)) | 0;\r\n    mid = (mid + Math.imul(al3, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\r\n    lo = (lo + Math.imul(al2, bl2)) | 0;\r\n    mid = (mid + Math.imul(al2, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\r\n    lo = (lo + Math.imul(al1, bl3)) | 0;\r\n    mid = (mid + Math.imul(al1, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\r\n    lo = (lo + Math.imul(al0, bl4)) | 0;\r\n    mid = (mid + Math.imul(al0, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\r\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\r\n    w4 &= 0x3ffffff;\r\n    /* k = 5 */\r\n    lo = Math.imul(al5, bl0);\r\n    mid = Math.imul(al5, bh0);\r\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\r\n    hi = Math.imul(ah5, bh0);\r\n    lo = (lo + Math.imul(al4, bl1)) | 0;\r\n    mid = (mid + Math.imul(al4, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\r\n    lo = (lo + Math.imul(al3, bl2)) | 0;\r\n    mid = (mid + Math.imul(al3, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\r\n    lo = (lo + Math.imul(al2, bl3)) | 0;\r\n    mid = (mid + Math.imul(al2, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\r\n    lo = (lo + Math.imul(al1, bl4)) | 0;\r\n    mid = (mid + Math.imul(al1, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\r\n    lo = (lo + Math.imul(al0, bl5)) | 0;\r\n    mid = (mid + Math.imul(al0, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\r\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\r\n    w5 &= 0x3ffffff;\r\n    /* k = 6 */\r\n    lo = Math.imul(al6, bl0);\r\n    mid = Math.imul(al6, bh0);\r\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\r\n    hi = Math.imul(ah6, bh0);\r\n    lo = (lo + Math.imul(al5, bl1)) | 0;\r\n    mid = (mid + Math.imul(al5, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\r\n    lo = (lo + Math.imul(al4, bl2)) | 0;\r\n    mid = (mid + Math.imul(al4, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\r\n    lo = (lo + Math.imul(al3, bl3)) | 0;\r\n    mid = (mid + Math.imul(al3, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\r\n    lo = (lo + Math.imul(al2, bl4)) | 0;\r\n    mid = (mid + Math.imul(al2, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\r\n    lo = (lo + Math.imul(al1, bl5)) | 0;\r\n    mid = (mid + Math.imul(al1, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\r\n    lo = (lo + Math.imul(al0, bl6)) | 0;\r\n    mid = (mid + Math.imul(al0, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\r\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\r\n    w6 &= 0x3ffffff;\r\n    /* k = 7 */\r\n    lo = Math.imul(al7, bl0);\r\n    mid = Math.imul(al7, bh0);\r\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\r\n    hi = Math.imul(ah7, bh0);\r\n    lo = (lo + Math.imul(al6, bl1)) | 0;\r\n    mid = (mid + Math.imul(al6, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\r\n    lo = (lo + Math.imul(al5, bl2)) | 0;\r\n    mid = (mid + Math.imul(al5, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\r\n    lo = (lo + Math.imul(al4, bl3)) | 0;\r\n    mid = (mid + Math.imul(al4, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\r\n    lo = (lo + Math.imul(al3, bl4)) | 0;\r\n    mid = (mid + Math.imul(al3, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\r\n    lo = (lo + Math.imul(al2, bl5)) | 0;\r\n    mid = (mid + Math.imul(al2, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\r\n    lo = (lo + Math.imul(al1, bl6)) | 0;\r\n    mid = (mid + Math.imul(al1, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\r\n    lo = (lo + Math.imul(al0, bl7)) | 0;\r\n    mid = (mid + Math.imul(al0, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\r\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\r\n    w7 &= 0x3ffffff;\r\n    /* k = 8 */\r\n    lo = Math.imul(al8, bl0);\r\n    mid = Math.imul(al8, bh0);\r\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\r\n    hi = Math.imul(ah8, bh0);\r\n    lo = (lo + Math.imul(al7, bl1)) | 0;\r\n    mid = (mid + Math.imul(al7, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\r\n    lo = (lo + Math.imul(al6, bl2)) | 0;\r\n    mid = (mid + Math.imul(al6, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\r\n    lo = (lo + Math.imul(al5, bl3)) | 0;\r\n    mid = (mid + Math.imul(al5, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\r\n    lo = (lo + Math.imul(al4, bl4)) | 0;\r\n    mid = (mid + Math.imul(al4, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\r\n    lo = (lo + Math.imul(al3, bl5)) | 0;\r\n    mid = (mid + Math.imul(al3, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\r\n    lo = (lo + Math.imul(al2, bl6)) | 0;\r\n    mid = (mid + Math.imul(al2, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\r\n    lo = (lo + Math.imul(al1, bl7)) | 0;\r\n    mid = (mid + Math.imul(al1, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\r\n    lo = (lo + Math.imul(al0, bl8)) | 0;\r\n    mid = (mid + Math.imul(al0, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\r\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\r\n    w8 &= 0x3ffffff;\r\n    /* k = 9 */\r\n    lo = Math.imul(al9, bl0);\r\n    mid = Math.imul(al9, bh0);\r\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\r\n    hi = Math.imul(ah9, bh0);\r\n    lo = (lo + Math.imul(al8, bl1)) | 0;\r\n    mid = (mid + Math.imul(al8, bh1)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\r\n    lo = (lo + Math.imul(al7, bl2)) | 0;\r\n    mid = (mid + Math.imul(al7, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\r\n    lo = (lo + Math.imul(al6, bl3)) | 0;\r\n    mid = (mid + Math.imul(al6, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\r\n    lo = (lo + Math.imul(al5, bl4)) | 0;\r\n    mid = (mid + Math.imul(al5, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\r\n    lo = (lo + Math.imul(al4, bl5)) | 0;\r\n    mid = (mid + Math.imul(al4, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\r\n    lo = (lo + Math.imul(al3, bl6)) | 0;\r\n    mid = (mid + Math.imul(al3, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\r\n    lo = (lo + Math.imul(al2, bl7)) | 0;\r\n    mid = (mid + Math.imul(al2, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\r\n    lo = (lo + Math.imul(al1, bl8)) | 0;\r\n    mid = (mid + Math.imul(al1, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\r\n    lo = (lo + Math.imul(al0, bl9)) | 0;\r\n    mid = (mid + Math.imul(al0, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\r\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\r\n    w9 &= 0x3ffffff;\r\n    /* k = 10 */\r\n    lo = Math.imul(al9, bl1);\r\n    mid = Math.imul(al9, bh1);\r\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\r\n    hi = Math.imul(ah9, bh1);\r\n    lo = (lo + Math.imul(al8, bl2)) | 0;\r\n    mid = (mid + Math.imul(al8, bh2)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\r\n    lo = (lo + Math.imul(al7, bl3)) | 0;\r\n    mid = (mid + Math.imul(al7, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\r\n    lo = (lo + Math.imul(al6, bl4)) | 0;\r\n    mid = (mid + Math.imul(al6, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\r\n    lo = (lo + Math.imul(al5, bl5)) | 0;\r\n    mid = (mid + Math.imul(al5, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\r\n    lo = (lo + Math.imul(al4, bl6)) | 0;\r\n    mid = (mid + Math.imul(al4, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\r\n    lo = (lo + Math.imul(al3, bl7)) | 0;\r\n    mid = (mid + Math.imul(al3, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\r\n    lo = (lo + Math.imul(al2, bl8)) | 0;\r\n    mid = (mid + Math.imul(al2, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\r\n    lo = (lo + Math.imul(al1, bl9)) | 0;\r\n    mid = (mid + Math.imul(al1, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\r\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\r\n    w10 &= 0x3ffffff;\r\n    /* k = 11 */\r\n    lo = Math.imul(al9, bl2);\r\n    mid = Math.imul(al9, bh2);\r\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\r\n    hi = Math.imul(ah9, bh2);\r\n    lo = (lo + Math.imul(al8, bl3)) | 0;\r\n    mid = (mid + Math.imul(al8, bh3)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\r\n    lo = (lo + Math.imul(al7, bl4)) | 0;\r\n    mid = (mid + Math.imul(al7, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\r\n    lo = (lo + Math.imul(al6, bl5)) | 0;\r\n    mid = (mid + Math.imul(al6, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\r\n    lo = (lo + Math.imul(al5, bl6)) | 0;\r\n    mid = (mid + Math.imul(al5, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\r\n    lo = (lo + Math.imul(al4, bl7)) | 0;\r\n    mid = (mid + Math.imul(al4, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\r\n    lo = (lo + Math.imul(al3, bl8)) | 0;\r\n    mid = (mid + Math.imul(al3, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\r\n    lo = (lo + Math.imul(al2, bl9)) | 0;\r\n    mid = (mid + Math.imul(al2, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\r\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\r\n    w11 &= 0x3ffffff;\r\n    /* k = 12 */\r\n    lo = Math.imul(al9, bl3);\r\n    mid = Math.imul(al9, bh3);\r\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\r\n    hi = Math.imul(ah9, bh3);\r\n    lo = (lo + Math.imul(al8, bl4)) | 0;\r\n    mid = (mid + Math.imul(al8, bh4)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\r\n    lo = (lo + Math.imul(al7, bl5)) | 0;\r\n    mid = (mid + Math.imul(al7, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\r\n    lo = (lo + Math.imul(al6, bl6)) | 0;\r\n    mid = (mid + Math.imul(al6, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\r\n    lo = (lo + Math.imul(al5, bl7)) | 0;\r\n    mid = (mid + Math.imul(al5, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\r\n    lo = (lo + Math.imul(al4, bl8)) | 0;\r\n    mid = (mid + Math.imul(al4, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\r\n    lo = (lo + Math.imul(al3, bl9)) | 0;\r\n    mid = (mid + Math.imul(al3, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\r\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\r\n    w12 &= 0x3ffffff;\r\n    /* k = 13 */\r\n    lo = Math.imul(al9, bl4);\r\n    mid = Math.imul(al9, bh4);\r\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\r\n    hi = Math.imul(ah9, bh4);\r\n    lo = (lo + Math.imul(al8, bl5)) | 0;\r\n    mid = (mid + Math.imul(al8, bh5)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\r\n    lo = (lo + Math.imul(al7, bl6)) | 0;\r\n    mid = (mid + Math.imul(al7, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\r\n    lo = (lo + Math.imul(al6, bl7)) | 0;\r\n    mid = (mid + Math.imul(al6, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\r\n    lo = (lo + Math.imul(al5, bl8)) | 0;\r\n    mid = (mid + Math.imul(al5, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\r\n    lo = (lo + Math.imul(al4, bl9)) | 0;\r\n    mid = (mid + Math.imul(al4, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\r\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\r\n    w13 &= 0x3ffffff;\r\n    /* k = 14 */\r\n    lo = Math.imul(al9, bl5);\r\n    mid = Math.imul(al9, bh5);\r\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\r\n    hi = Math.imul(ah9, bh5);\r\n    lo = (lo + Math.imul(al8, bl6)) | 0;\r\n    mid = (mid + Math.imul(al8, bh6)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\r\n    lo = (lo + Math.imul(al7, bl7)) | 0;\r\n    mid = (mid + Math.imul(al7, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\r\n    lo = (lo + Math.imul(al6, bl8)) | 0;\r\n    mid = (mid + Math.imul(al6, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\r\n    lo = (lo + Math.imul(al5, bl9)) | 0;\r\n    mid = (mid + Math.imul(al5, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\r\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\r\n    w14 &= 0x3ffffff;\r\n    /* k = 15 */\r\n    lo = Math.imul(al9, bl6);\r\n    mid = Math.imul(al9, bh6);\r\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\r\n    hi = Math.imul(ah9, bh6);\r\n    lo = (lo + Math.imul(al8, bl7)) | 0;\r\n    mid = (mid + Math.imul(al8, bh7)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\r\n    lo = (lo + Math.imul(al7, bl8)) | 0;\r\n    mid = (mid + Math.imul(al7, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\r\n    lo = (lo + Math.imul(al6, bl9)) | 0;\r\n    mid = (mid + Math.imul(al6, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\r\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\r\n    w15 &= 0x3ffffff;\r\n    /* k = 16 */\r\n    lo = Math.imul(al9, bl7);\r\n    mid = Math.imul(al9, bh7);\r\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\r\n    hi = Math.imul(ah9, bh7);\r\n    lo = (lo + Math.imul(al8, bl8)) | 0;\r\n    mid = (mid + Math.imul(al8, bh8)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\r\n    lo = (lo + Math.imul(al7, bl9)) | 0;\r\n    mid = (mid + Math.imul(al7, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\r\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\r\n    w16 &= 0x3ffffff;\r\n    /* k = 17 */\r\n    lo = Math.imul(al9, bl8);\r\n    mid = Math.imul(al9, bh8);\r\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\r\n    hi = Math.imul(ah9, bh8);\r\n    lo = (lo + Math.imul(al8, bl9)) | 0;\r\n    mid = (mid + Math.imul(al8, bh9)) | 0;\r\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\r\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\r\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\r\n    w17 &= 0x3ffffff;\r\n    /* k = 18 */\r\n    lo = Math.imul(al9, bl9);\r\n    mid = Math.imul(al9, bh9);\r\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\r\n    hi = Math.imul(ah9, bh9);\r\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\r\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\r\n    w18 &= 0x3ffffff;\r\n    o[0] = w0;\r\n    o[1] = w1;\r\n    o[2] = w2;\r\n    o[3] = w3;\r\n    o[4] = w4;\r\n    o[5] = w5;\r\n    o[6] = w6;\r\n    o[7] = w7;\r\n    o[8] = w8;\r\n    o[9] = w9;\r\n    o[10] = w10;\r\n    o[11] = w11;\r\n    o[12] = w12;\r\n    o[13] = w13;\r\n    o[14] = w14;\r\n    o[15] = w15;\r\n    o[16] = w16;\r\n    o[17] = w17;\r\n    o[18] = w18;\r\n    if (c !== 0) {\r\n      o[19] = c;\r\n      out.length++;\r\n    }\r\n    return out;\r\n  };\r\n\r\n  // Polyfill comb\r\n  if (!Math.imul) {\r\n    comb10MulTo = smallMulTo;\r\n  }\r\n\r\n  function bigMulTo (self, num, out) {\r\n    out.negative = num.negative ^ self.negative;\r\n    out.length = self.length + num.length;\r\n\r\n    var carry = 0;\r\n    var hncarry = 0;\r\n    for (var k = 0; k < out.length - 1; k++) {\r\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\r\n      // note that ncarry could be >= 0x3ffffff\r\n      var ncarry = hncarry;\r\n      hncarry = 0;\r\n      var rword = carry & 0x3ffffff;\r\n      var maxJ = Math.min(k, num.length - 1);\r\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\r\n        var i = k - j;\r\n        var a = self.words[i] | 0;\r\n        var b = num.words[j] | 0;\r\n        var r = a * b;\r\n\r\n        var lo = r & 0x3ffffff;\r\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\r\n        lo = (lo + rword) | 0;\r\n        rword = lo & 0x3ffffff;\r\n        ncarry = (ncarry + (lo >>> 26)) | 0;\r\n\r\n        hncarry += ncarry >>> 26;\r\n        ncarry &= 0x3ffffff;\r\n      }\r\n      out.words[k] = rword;\r\n      carry = ncarry;\r\n      ncarry = hncarry;\r\n    }\r\n    if (carry !== 0) {\r\n      out.words[k] = carry;\r\n    } else {\r\n      out.length--;\r\n    }\r\n\r\n    return out.strip();\r\n  }\r\n\r\n  function jumboMulTo (self, num, out) {\r\n    var fftm = new FFTM();\r\n    return fftm.mulp(self, num, out);\r\n  }\r\n\r\n  BN.prototype.mulTo = function mulTo (num, out) {\r\n    var res;\r\n    var len = this.length + num.length;\r\n    if (this.length === 10 && num.length === 10) {\r\n      res = comb10MulTo(this, num, out);\r\n    } else if (len < 63) {\r\n      res = smallMulTo(this, num, out);\r\n    } else if (len < 1024) {\r\n      res = bigMulTo(this, num, out);\r\n    } else {\r\n      res = jumboMulTo(this, num, out);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Cooley-Tukey algorithm for FFT\r\n  // slightly revisited to rely on looping instead of recursion\r\n\r\n  function FFTM (x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  FFTM.prototype.makeRBT = function makeRBT (N) {\r\n    var t = new Array(N);\r\n    var l = BN.prototype._countBits(N) - 1;\r\n    for (var i = 0; i < N; i++) {\r\n      t[i] = this.revBin(i, l, N);\r\n    }\r\n\r\n    return t;\r\n  };\r\n\r\n  // Returns binary-reversed representation of `x`\r\n  FFTM.prototype.revBin = function revBin (x, l, N) {\r\n    if (x === 0 || x === N - 1) return x;\r\n\r\n    var rb = 0;\r\n    for (var i = 0; i < l; i++) {\r\n      rb |= (x & 1) << (l - i - 1);\r\n      x >>= 1;\r\n    }\r\n\r\n    return rb;\r\n  };\r\n\r\n  // Performs \"tweedling\" phase, therefore 'emulating'\r\n  // behaviour of the recursive algorithm\r\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\r\n    for (var i = 0; i < N; i++) {\r\n      rtws[i] = rws[rbt[i]];\r\n      itws[i] = iws[rbt[i]];\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\r\n    this.permute(rbt, rws, iws, rtws, itws, N);\r\n\r\n    for (var s = 1; s < N; s <<= 1) {\r\n      var l = s << 1;\r\n\r\n      var rtwdf = Math.cos(2 * Math.PI / l);\r\n      var itwdf = Math.sin(2 * Math.PI / l);\r\n\r\n      for (var p = 0; p < N; p += l) {\r\n        var rtwdf_ = rtwdf;\r\n        var itwdf_ = itwdf;\r\n\r\n        for (var j = 0; j < s; j++) {\r\n          var re = rtws[p + j];\r\n          var ie = itws[p + j];\r\n\r\n          var ro = rtws[p + j + s];\r\n          var io = itws[p + j + s];\r\n\r\n          var rx = rtwdf_ * ro - itwdf_ * io;\r\n\r\n          io = rtwdf_ * io + itwdf_ * ro;\r\n          ro = rx;\r\n\r\n          rtws[p + j] = re + ro;\r\n          itws[p + j] = ie + io;\r\n\r\n          rtws[p + j + s] = re - ro;\r\n          itws[p + j + s] = ie - io;\r\n\r\n          /* jshint maxdepth : false */\r\n          if (j !== l) {\r\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\r\n\r\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\r\n            rtwdf_ = rx;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\r\n    var N = Math.max(m, n) | 1;\r\n    var odd = N & 1;\r\n    var i = 0;\r\n    for (N = N / 2 | 0; N; N = N >>> 1) {\r\n      i++;\r\n    }\r\n\r\n    return 1 << i + 1 + odd;\r\n  };\r\n\r\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\r\n    if (N <= 1) return;\r\n\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var t = rws[i];\r\n\r\n      rws[i] = rws[N - i - 1];\r\n      rws[N - i - 1] = t;\r\n\r\n      t = iws[i];\r\n\r\n      iws[i] = -iws[N - i - 1];\r\n      iws[N - i - 1] = -t;\r\n    }\r\n  };\r\n\r\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < N / 2; i++) {\r\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\r\n        Math.round(ws[2 * i] / N) +\r\n        carry;\r\n\r\n      ws[i] = w & 0x3ffffff;\r\n\r\n      if (w < 0x4000000) {\r\n        carry = 0;\r\n      } else {\r\n        carry = w / 0x4000000 | 0;\r\n      }\r\n    }\r\n\r\n    return ws;\r\n  };\r\n\r\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\r\n    var carry = 0;\r\n    for (var i = 0; i < len; i++) {\r\n      carry = carry + (ws[i] | 0);\r\n\r\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\r\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\r\n    }\r\n\r\n    // Pad with zeroes\r\n    for (i = 2 * len; i < N; ++i) {\r\n      rws[i] = 0;\r\n    }\r\n\r\n    assert(carry === 0);\r\n    assert((carry & ~0x1fff) === 0);\r\n  };\r\n\r\n  FFTM.prototype.stub = function stub (N) {\r\n    var ph = new Array(N);\r\n    for (var i = 0; i < N; i++) {\r\n      ph[i] = 0;\r\n    }\r\n\r\n    return ph;\r\n  };\r\n\r\n  FFTM.prototype.mulp = function mulp (x, y, out) {\r\n    var N = 2 * this.guessLen13b(x.length, y.length);\r\n\r\n    var rbt = this.makeRBT(N);\r\n\r\n    var _ = this.stub(N);\r\n\r\n    var rws = new Array(N);\r\n    var rwst = new Array(N);\r\n    var iwst = new Array(N);\r\n\r\n    var nrws = new Array(N);\r\n    var nrwst = new Array(N);\r\n    var niwst = new Array(N);\r\n\r\n    var rmws = out.words;\r\n    rmws.length = N;\r\n\r\n    this.convert13b(x.words, x.length, rws, N);\r\n    this.convert13b(y.words, y.length, nrws, N);\r\n\r\n    this.transform(rws, _, rwst, iwst, N, rbt);\r\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\r\n\r\n    for (var i = 0; i < N; i++) {\r\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\r\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\r\n      rwst[i] = rx;\r\n    }\r\n\r\n    this.conjugate(rwst, iwst, N);\r\n    this.transform(rwst, iwst, rmws, _, N, rbt);\r\n    this.conjugate(rmws, _, N);\r\n    this.normalize13b(rmws, N);\r\n\r\n    out.negative = x.negative ^ y.negative;\r\n    out.length = x.length + y.length;\r\n    return out.strip();\r\n  };\r\n\r\n  // Multiply `this` by `num`\r\n  BN.prototype.mul = function mul (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return this.mulTo(num, out);\r\n  };\r\n\r\n  // Multiply employing FFT\r\n  BN.prototype.mulf = function mulf (num) {\r\n    var out = new BN(null);\r\n    out.words = new Array(this.length + num.length);\r\n    return jumboMulTo(this, num, out);\r\n  };\r\n\r\n  // In-place Multiplication\r\n  BN.prototype.imul = function imul (num) {\r\n    return this.clone().mulTo(num, this);\r\n  };\r\n\r\n  BN.prototype.imuln = function imuln (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n\r\n    // Carry\r\n    var carry = 0;\r\n    for (var i = 0; i < this.length; i++) {\r\n      var w = (this.words[i] | 0) * num;\r\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\r\n      carry >>= 26;\r\n      carry += (w / 0x4000000) | 0;\r\n      // NOTE: lo is 27bit maximum\r\n      carry += lo >>> 26;\r\n      this.words[i] = lo & 0x3ffffff;\r\n    }\r\n\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.muln = function muln (num) {\r\n    return this.clone().imuln(num);\r\n  };\r\n\r\n  // `this` * `this`\r\n  BN.prototype.sqr = function sqr () {\r\n    return this.mul(this);\r\n  };\r\n\r\n  // `this` * `this` in-place\r\n  BN.prototype.isqr = function isqr () {\r\n    return this.imul(this.clone());\r\n  };\r\n\r\n  // Math.pow(`this`, `num`)\r\n  BN.prototype.pow = function pow (num) {\r\n    var w = toBitArray(num);\r\n    if (w.length === 0) return new BN(1);\r\n\r\n    // Skip leading zeroes\r\n    var res = this;\r\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\r\n      if (w[i] !== 0) break;\r\n    }\r\n\r\n    if (++i < w.length) {\r\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\r\n        if (w[i] === 0) continue;\r\n\r\n        res = res.mul(q);\r\n      }\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  // Shift-left in-place\r\n  BN.prototype.iushln = function iushln (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\r\n    var i;\r\n\r\n    if (r !== 0) {\r\n      var carry = 0;\r\n\r\n      for (i = 0; i < this.length; i++) {\r\n        var newCarry = this.words[i] & carryMask;\r\n        var c = ((this.words[i] | 0) - newCarry) << r;\r\n        this.words[i] = c | carry;\r\n        carry = newCarry >>> (26 - r);\r\n      }\r\n\r\n      if (carry) {\r\n        this.words[i] = carry;\r\n        this.length++;\r\n      }\r\n    }\r\n\r\n    if (s !== 0) {\r\n      for (i = this.length - 1; i >= 0; i--) {\r\n        this.words[i + s] = this.words[i];\r\n      }\r\n\r\n      for (i = 0; i < s; i++) {\r\n        this.words[i] = 0;\r\n      }\r\n\r\n      this.length += s;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ishln = function ishln (bits) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushln(bits);\r\n  };\r\n\r\n  // Shift-right in-place\r\n  // NOTE: `hint` is a lowest bit before trailing zeroes\r\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\r\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var h;\r\n    if (hint) {\r\n      h = (hint - (hint % 26)) / 26;\r\n    } else {\r\n      h = 0;\r\n    }\r\n\r\n    var r = bits % 26;\r\n    var s = Math.min((bits - r) / 26, this.length);\r\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n    var maskedWords = extended;\r\n\r\n    h -= s;\r\n    h = Math.max(0, h);\r\n\r\n    // Extended mode, copy masked part\r\n    if (maskedWords) {\r\n      for (var i = 0; i < s; i++) {\r\n        maskedWords.words[i] = this.words[i];\r\n      }\r\n      maskedWords.length = s;\r\n    }\r\n\r\n    if (s === 0) {\r\n      // No-op, we should not move anything at all\r\n    } else if (this.length > s) {\r\n      this.length -= s;\r\n      for (i = 0; i < this.length; i++) {\r\n        this.words[i] = this.words[i + s];\r\n      }\r\n    } else {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    var carry = 0;\r\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\r\n      var word = this.words[i] | 0;\r\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\r\n      carry = word & mask;\r\n    }\r\n\r\n    // Push carried bits as a mask\r\n    if (maskedWords && carry !== 0) {\r\n      maskedWords.words[maskedWords.length++] = carry;\r\n    }\r\n\r\n    if (this.length === 0) {\r\n      this.words[0] = 0;\r\n      this.length = 1;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\r\n    // TODO(indutny): implement me\r\n    assert(this.negative === 0);\r\n    return this.iushrn(bits, hint, extended);\r\n  };\r\n\r\n  // Shift-left\r\n  BN.prototype.shln = function shln (bits) {\r\n    return this.clone().ishln(bits);\r\n  };\r\n\r\n  BN.prototype.ushln = function ushln (bits) {\r\n    return this.clone().iushln(bits);\r\n  };\r\n\r\n  // Shift-right\r\n  BN.prototype.shrn = function shrn (bits) {\r\n    return this.clone().ishrn(bits);\r\n  };\r\n\r\n  BN.prototype.ushrn = function ushrn (bits) {\r\n    return this.clone().iushrn(bits);\r\n  };\r\n\r\n  // Test if n bit is set\r\n  BN.prototype.testn = function testn (bit) {\r\n    assert(typeof bit === 'number' && bit >= 0);\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) return false;\r\n\r\n    // Check bit and return\r\n    var w = this.words[s];\r\n\r\n    return !!(w & q);\r\n  };\r\n\r\n  // Return only lowers bits of number (in-place)\r\n  BN.prototype.imaskn = function imaskn (bits) {\r\n    assert(typeof bits === 'number' && bits >= 0);\r\n    var r = bits % 26;\r\n    var s = (bits - r) / 26;\r\n\r\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\r\n\r\n    if (this.length <= s) {\r\n      return this;\r\n    }\r\n\r\n    if (r !== 0) {\r\n      s++;\r\n    }\r\n    this.length = Math.min(s, this.length);\r\n\r\n    if (r !== 0) {\r\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\r\n      this.words[this.length - 1] &= mask;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  // Return only lowers bits of number\r\n  BN.prototype.maskn = function maskn (bits) {\r\n    return this.clone().imaskn(bits);\r\n  };\r\n\r\n  // Add plain number `num` to `this`\r\n  BN.prototype.iaddn = function iaddn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.isubn(-num);\r\n\r\n    // Possible sign change\r\n    if (this.negative !== 0) {\r\n      if (this.length === 1 && (this.words[0] | 0) < num) {\r\n        this.words[0] = num - (this.words[0] | 0);\r\n        this.negative = 0;\r\n        return this;\r\n      }\r\n\r\n      this.negative = 0;\r\n      this.isubn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    // Add without checks\r\n    return this._iaddn(num);\r\n  };\r\n\r\n  BN.prototype._iaddn = function _iaddn (num) {\r\n    this.words[0] += num;\r\n\r\n    // Carry\r\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\r\n      this.words[i] -= 0x4000000;\r\n      if (i === this.length - 1) {\r\n        this.words[i + 1] = 1;\r\n      } else {\r\n        this.words[i + 1]++;\r\n      }\r\n    }\r\n    this.length = Math.max(this.length, i + 1);\r\n\r\n    return this;\r\n  };\r\n\r\n  // Subtract plain number `num` from `this`\r\n  BN.prototype.isubn = function isubn (num) {\r\n    assert(typeof num === 'number');\r\n    assert(num < 0x4000000);\r\n    if (num < 0) return this.iaddn(-num);\r\n\r\n    if (this.negative !== 0) {\r\n      this.negative = 0;\r\n      this.iaddn(num);\r\n      this.negative = 1;\r\n      return this;\r\n    }\r\n\r\n    this.words[0] -= num;\r\n\r\n    if (this.length === 1 && this.words[0] < 0) {\r\n      this.words[0] = -this.words[0];\r\n      this.negative = 1;\r\n    } else {\r\n      // Carry\r\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\r\n        this.words[i] += 0x4000000;\r\n        this.words[i + 1] -= 1;\r\n      }\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.addn = function addn (num) {\r\n    return this.clone().iaddn(num);\r\n  };\r\n\r\n  BN.prototype.subn = function subn (num) {\r\n    return this.clone().isubn(num);\r\n  };\r\n\r\n  BN.prototype.iabs = function iabs () {\r\n    this.negative = 0;\r\n\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.abs = function abs () {\r\n    return this.clone().iabs();\r\n  };\r\n\r\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\r\n    var len = num.length + shift;\r\n    var i;\r\n\r\n    this._expand(len);\r\n\r\n    var w;\r\n    var carry = 0;\r\n    for (i = 0; i < num.length; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      var right = (num.words[i] | 0) * mul;\r\n      w -= right & 0x3ffffff;\r\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n    for (; i < this.length - shift; i++) {\r\n      w = (this.words[i + shift] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i + shift] = w & 0x3ffffff;\r\n    }\r\n\r\n    if (carry === 0) return this.strip();\r\n\r\n    // Subtraction overflow\r\n    assert(carry === -1);\r\n    carry = 0;\r\n    for (i = 0; i < this.length; i++) {\r\n      w = -(this.words[i] | 0) + carry;\r\n      carry = w >> 26;\r\n      this.words[i] = w & 0x3ffffff;\r\n    }\r\n    this.negative = 1;\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\r\n    var shift = this.length - num.length;\r\n\r\n    var a = this.clone();\r\n    var b = num;\r\n\r\n    // Normalize\r\n    var bhi = b.words[b.length - 1] | 0;\r\n    var bhiBits = this._countBits(bhi);\r\n    shift = 26 - bhiBits;\r\n    if (shift !== 0) {\r\n      b = b.ushln(shift);\r\n      a.iushln(shift);\r\n      bhi = b.words[b.length - 1] | 0;\r\n    }\r\n\r\n    // Initialize quotient\r\n    var m = a.length - b.length;\r\n    var q;\r\n\r\n    if (mode !== 'mod') {\r\n      q = new BN(null);\r\n      q.length = m + 1;\r\n      q.words = new Array(q.length);\r\n      for (var i = 0; i < q.length; i++) {\r\n        q.words[i] = 0;\r\n      }\r\n    }\r\n\r\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\r\n    if (diff.negative === 0) {\r\n      a = diff;\r\n      if (q) {\r\n        q.words[m] = 1;\r\n      }\r\n    }\r\n\r\n    for (var j = m - 1; j >= 0; j--) {\r\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\r\n        (a.words[b.length + j - 1] | 0);\r\n\r\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\r\n      // (0x7ffffff)\r\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\r\n\r\n      a._ishlnsubmul(b, qj, j);\r\n      while (a.negative !== 0) {\r\n        qj--;\r\n        a.negative = 0;\r\n        a._ishlnsubmul(b, 1, j);\r\n        if (!a.isZero()) {\r\n          a.negative ^= 1;\r\n        }\r\n      }\r\n      if (q) {\r\n        q.words[j] = qj;\r\n      }\r\n    }\r\n    if (q) {\r\n      q.strip();\r\n    }\r\n    a.strip();\r\n\r\n    // Denormalize\r\n    if (mode !== 'div' && shift !== 0) {\r\n      a.iushrn(shift);\r\n    }\r\n\r\n    return {\r\n      div: q || null,\r\n      mod: a\r\n    };\r\n  };\r\n\r\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\r\n  //       to `div` to request div only, or be absent to\r\n  //       request both div & mod\r\n  //       2) `positive` is true if unsigned mod is requested\r\n  BN.prototype.divmod = function divmod (num, mode, positive) {\r\n    assert(!num.isZero());\r\n\r\n    if (this.isZero()) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: new BN(0)\r\n      };\r\n    }\r\n\r\n    var div, mod, res;\r\n    if (this.negative !== 0 && num.negative === 0) {\r\n      res = this.neg().divmod(num, mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.iadd(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    if (this.negative === 0 && num.negative !== 0) {\r\n      res = this.divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'mod') {\r\n        div = res.div.neg();\r\n      }\r\n\r\n      return {\r\n        div: div,\r\n        mod: res.mod\r\n      };\r\n    }\r\n\r\n    if ((this.negative & num.negative) !== 0) {\r\n      res = this.neg().divmod(num.neg(), mode);\r\n\r\n      if (mode !== 'div') {\r\n        mod = res.mod.neg();\r\n        if (positive && mod.negative !== 0) {\r\n          mod.isub(num);\r\n        }\r\n      }\r\n\r\n      return {\r\n        div: res.div,\r\n        mod: mod\r\n      };\r\n    }\r\n\r\n    // Both numbers are positive at this point\r\n\r\n    // Strip both numbers to approximate shift value\r\n    if (num.length > this.length || this.cmp(num) < 0) {\r\n      return {\r\n        div: new BN(0),\r\n        mod: this\r\n      };\r\n    }\r\n\r\n    // Very short reduction\r\n    if (num.length === 1) {\r\n      if (mode === 'div') {\r\n        return {\r\n          div: this.divn(num.words[0]),\r\n          mod: null\r\n        };\r\n      }\r\n\r\n      if (mode === 'mod') {\r\n        return {\r\n          div: null,\r\n          mod: new BN(this.modn(num.words[0]))\r\n        };\r\n      }\r\n\r\n      return {\r\n        div: this.divn(num.words[0]),\r\n        mod: new BN(this.modn(num.words[0]))\r\n      };\r\n    }\r\n\r\n    return this._wordDiv(num, mode);\r\n  };\r\n\r\n  // Find `this` / `num`\r\n  BN.prototype.div = function div (num) {\r\n    return this.divmod(num, 'div', false).div;\r\n  };\r\n\r\n  // Find `this` % `num`\r\n  BN.prototype.mod = function mod (num) {\r\n    return this.divmod(num, 'mod', false).mod;\r\n  };\r\n\r\n  BN.prototype.umod = function umod (num) {\r\n    return this.divmod(num, 'mod', true).mod;\r\n  };\r\n\r\n  // Find Round(`this` / `num`)\r\n  BN.prototype.divRound = function divRound (num) {\r\n    var dm = this.divmod(num);\r\n\r\n    // Fast case - exact division\r\n    if (dm.mod.isZero()) return dm.div;\r\n\r\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\r\n\r\n    var half = num.ushrn(1);\r\n    var r2 = num.andln(1);\r\n    var cmp = mod.cmp(half);\r\n\r\n    // Round down\r\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\r\n\r\n    // Round up\r\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\r\n  };\r\n\r\n  BN.prototype.modn = function modn (num) {\r\n    assert(num <= 0x3ffffff);\r\n    var p = (1 << 26) % num;\r\n\r\n    var acc = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      acc = (p * acc + (this.words[i] | 0)) % num;\r\n    }\r\n\r\n    return acc;\r\n  };\r\n\r\n  // In-place division by number\r\n  BN.prototype.idivn = function idivn (num) {\r\n    assert(num <= 0x3ffffff);\r\n\r\n    var carry = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var w = (this.words[i] | 0) + carry * 0x4000000;\r\n      this.words[i] = (w / num) | 0;\r\n      carry = w % num;\r\n    }\r\n\r\n    return this.strip();\r\n  };\r\n\r\n  BN.prototype.divn = function divn (num) {\r\n    return this.clone().idivn(num);\r\n  };\r\n\r\n  BN.prototype.egcd = function egcd (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var x = this;\r\n    var y = p.clone();\r\n\r\n    if (x.negative !== 0) {\r\n      x = x.umod(p);\r\n    } else {\r\n      x = x.clone();\r\n    }\r\n\r\n    // A * x + B * y = x\r\n    var A = new BN(1);\r\n    var B = new BN(0);\r\n\r\n    // C * x + D * y = y\r\n    var C = new BN(0);\r\n    var D = new BN(1);\r\n\r\n    var g = 0;\r\n\r\n    while (x.isEven() && y.isEven()) {\r\n      x.iushrn(1);\r\n      y.iushrn(1);\r\n      ++g;\r\n    }\r\n\r\n    var yp = y.clone();\r\n    var xp = x.clone();\r\n\r\n    while (!x.isZero()) {\r\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        x.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (A.isOdd() || B.isOdd()) {\r\n            A.iadd(yp);\r\n            B.isub(xp);\r\n          }\r\n\r\n          A.iushrn(1);\r\n          B.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        y.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (C.isOdd() || D.isOdd()) {\r\n            C.iadd(yp);\r\n            D.isub(xp);\r\n          }\r\n\r\n          C.iushrn(1);\r\n          D.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (x.cmp(y) >= 0) {\r\n        x.isub(y);\r\n        A.isub(C);\r\n        B.isub(D);\r\n      } else {\r\n        y.isub(x);\r\n        C.isub(A);\r\n        D.isub(B);\r\n      }\r\n    }\r\n\r\n    return {\r\n      a: C,\r\n      b: D,\r\n      gcd: y.iushln(g)\r\n    };\r\n  };\r\n\r\n  // This is reduced incarnation of the binary EEA\r\n  // above, designated to invert members of the\r\n  // _prime_ fields F(p) at a maximal speed\r\n  BN.prototype._invmp = function _invmp (p) {\r\n    assert(p.negative === 0);\r\n    assert(!p.isZero());\r\n\r\n    var a = this;\r\n    var b = p.clone();\r\n\r\n    if (a.negative !== 0) {\r\n      a = a.umod(p);\r\n    } else {\r\n      a = a.clone();\r\n    }\r\n\r\n    var x1 = new BN(1);\r\n    var x2 = new BN(0);\r\n\r\n    var delta = b.clone();\r\n\r\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\r\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\r\n      if (i > 0) {\r\n        a.iushrn(i);\r\n        while (i-- > 0) {\r\n          if (x1.isOdd()) {\r\n            x1.iadd(delta);\r\n          }\r\n\r\n          x1.iushrn(1);\r\n        }\r\n      }\r\n\r\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\r\n      if (j > 0) {\r\n        b.iushrn(j);\r\n        while (j-- > 0) {\r\n          if (x2.isOdd()) {\r\n            x2.iadd(delta);\r\n          }\r\n\r\n          x2.iushrn(1);\r\n        }\r\n      }\r\n\r\n      if (a.cmp(b) >= 0) {\r\n        a.isub(b);\r\n        x1.isub(x2);\r\n      } else {\r\n        b.isub(a);\r\n        x2.isub(x1);\r\n      }\r\n    }\r\n\r\n    var res;\r\n    if (a.cmpn(1) === 0) {\r\n      res = x1;\r\n    } else {\r\n      res = x2;\r\n    }\r\n\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(p);\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gcd = function gcd (num) {\r\n    if (this.isZero()) return num.abs();\r\n    if (num.isZero()) return this.abs();\r\n\r\n    var a = this.clone();\r\n    var b = num.clone();\r\n    a.negative = 0;\r\n    b.negative = 0;\r\n\r\n    // Remove common factor of two\r\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\r\n      a.iushrn(1);\r\n      b.iushrn(1);\r\n    }\r\n\r\n    do {\r\n      while (a.isEven()) {\r\n        a.iushrn(1);\r\n      }\r\n      while (b.isEven()) {\r\n        b.iushrn(1);\r\n      }\r\n\r\n      var r = a.cmp(b);\r\n      if (r < 0) {\r\n        // Swap `a` and `b` to make `a` always bigger than `b`\r\n        var t = a;\r\n        a = b;\r\n        b = t;\r\n      } else if (r === 0 || b.cmpn(1) === 0) {\r\n        break;\r\n      }\r\n\r\n      a.isub(b);\r\n    } while (true);\r\n\r\n    return b.iushln(shift);\r\n  };\r\n\r\n  // Invert number in the field F(num)\r\n  BN.prototype.invm = function invm (num) {\r\n    return this.egcd(num).a.umod(num);\r\n  };\r\n\r\n  BN.prototype.isEven = function isEven () {\r\n    return (this.words[0] & 1) === 0;\r\n  };\r\n\r\n  BN.prototype.isOdd = function isOdd () {\r\n    return (this.words[0] & 1) === 1;\r\n  };\r\n\r\n  // And first word and num\r\n  BN.prototype.andln = function andln (num) {\r\n    return this.words[0] & num;\r\n  };\r\n\r\n  // Increment at the bit position in-line\r\n  BN.prototype.bincn = function bincn (bit) {\r\n    assert(typeof bit === 'number');\r\n    var r = bit % 26;\r\n    var s = (bit - r) / 26;\r\n    var q = 1 << r;\r\n\r\n    // Fast case: bit is much higher than all existing words\r\n    if (this.length <= s) {\r\n      this._expand(s + 1);\r\n      this.words[s] |= q;\r\n      return this;\r\n    }\r\n\r\n    // Add bit and propagate, if needed\r\n    var carry = q;\r\n    for (var i = s; carry !== 0 && i < this.length; i++) {\r\n      var w = this.words[i] | 0;\r\n      w += carry;\r\n      carry = w >>> 26;\r\n      w &= 0x3ffffff;\r\n      this.words[i] = w;\r\n    }\r\n    if (carry !== 0) {\r\n      this.words[i] = carry;\r\n      this.length++;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.isZero = function isZero () {\r\n    return this.length === 1 && this.words[0] === 0;\r\n  };\r\n\r\n  BN.prototype.cmpn = function cmpn (num) {\r\n    var negative = num < 0;\r\n\r\n    if (this.negative !== 0 && !negative) return -1;\r\n    if (this.negative === 0 && negative) return 1;\r\n\r\n    this.strip();\r\n\r\n    var res;\r\n    if (this.length > 1) {\r\n      res = 1;\r\n    } else {\r\n      if (negative) {\r\n        num = -num;\r\n      }\r\n\r\n      assert(num <= 0x3ffffff, 'Number is too big');\r\n\r\n      var w = this.words[0] | 0;\r\n      res = w === num ? 0 : w < num ? -1 : 1;\r\n    }\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Compare two numbers and return:\r\n  // 1 - if `this` > `num`\r\n  // 0 - if `this` == `num`\r\n  // -1 - if `this` < `num`\r\n  BN.prototype.cmp = function cmp (num) {\r\n    if (this.negative !== 0 && num.negative === 0) return -1;\r\n    if (this.negative === 0 && num.negative !== 0) return 1;\r\n\r\n    var res = this.ucmp(num);\r\n    if (this.negative !== 0) return -res | 0;\r\n    return res;\r\n  };\r\n\r\n  // Unsigned comparison\r\n  BN.prototype.ucmp = function ucmp (num) {\r\n    // At this point both numbers have the same sign\r\n    if (this.length > num.length) return 1;\r\n    if (this.length < num.length) return -1;\r\n\r\n    var res = 0;\r\n    for (var i = this.length - 1; i >= 0; i--) {\r\n      var a = this.words[i] | 0;\r\n      var b = num.words[i] | 0;\r\n\r\n      if (a === b) continue;\r\n      if (a < b) {\r\n        res = -1;\r\n      } else if (a > b) {\r\n        res = 1;\r\n      }\r\n      break;\r\n    }\r\n    return res;\r\n  };\r\n\r\n  BN.prototype.gtn = function gtn (num) {\r\n    return this.cmpn(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gt = function gt (num) {\r\n    return this.cmp(num) === 1;\r\n  };\r\n\r\n  BN.prototype.gten = function gten (num) {\r\n    return this.cmpn(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.gte = function gte (num) {\r\n    return this.cmp(num) >= 0;\r\n  };\r\n\r\n  BN.prototype.ltn = function ltn (num) {\r\n    return this.cmpn(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lt = function lt (num) {\r\n    return this.cmp(num) === -1;\r\n  };\r\n\r\n  BN.prototype.lten = function lten (num) {\r\n    return this.cmpn(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.lte = function lte (num) {\r\n    return this.cmp(num) <= 0;\r\n  };\r\n\r\n  BN.prototype.eqn = function eqn (num) {\r\n    return this.cmpn(num) === 0;\r\n  };\r\n\r\n  BN.prototype.eq = function eq (num) {\r\n    return this.cmp(num) === 0;\r\n  };\r\n\r\n  //\r\n  // A reduce context, could be using montgomery or something better, depending\r\n  // on the `m` itself.\r\n  //\r\n  BN.red = function red (num) {\r\n    return new Red(num);\r\n  };\r\n\r\n  BN.prototype.toRed = function toRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    assert(this.negative === 0, 'red works only with positives');\r\n    return ctx.convertTo(this)._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.fromRed = function fromRed () {\r\n    assert(this.red, 'fromRed works only with numbers in reduction context');\r\n    return this.red.convertFrom(this);\r\n  };\r\n\r\n  BN.prototype._forceRed = function _forceRed (ctx) {\r\n    this.red = ctx;\r\n    return this;\r\n  };\r\n\r\n  BN.prototype.forceRed = function forceRed (ctx) {\r\n    assert(!this.red, 'Already a number in reduction context');\r\n    return this._forceRed(ctx);\r\n  };\r\n\r\n  BN.prototype.redAdd = function redAdd (num) {\r\n    assert(this.red, 'redAdd works only with red numbers');\r\n    return this.red.add(this, num);\r\n  };\r\n\r\n  BN.prototype.redIAdd = function redIAdd (num) {\r\n    assert(this.red, 'redIAdd works only with red numbers');\r\n    return this.red.iadd(this, num);\r\n  };\r\n\r\n  BN.prototype.redSub = function redSub (num) {\r\n    assert(this.red, 'redSub works only with red numbers');\r\n    return this.red.sub(this, num);\r\n  };\r\n\r\n  BN.prototype.redISub = function redISub (num) {\r\n    assert(this.red, 'redISub works only with red numbers');\r\n    return this.red.isub(this, num);\r\n  };\r\n\r\n  BN.prototype.redShl = function redShl (num) {\r\n    assert(this.red, 'redShl works only with red numbers');\r\n    return this.red.shl(this, num);\r\n  };\r\n\r\n  BN.prototype.redMul = function redMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.mul(this, num);\r\n  };\r\n\r\n  BN.prototype.redIMul = function redIMul (num) {\r\n    assert(this.red, 'redMul works only with red numbers');\r\n    this.red._verify2(this, num);\r\n    return this.red.imul(this, num);\r\n  };\r\n\r\n  BN.prototype.redSqr = function redSqr () {\r\n    assert(this.red, 'redSqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqr(this);\r\n  };\r\n\r\n  BN.prototype.redISqr = function redISqr () {\r\n    assert(this.red, 'redISqr works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.isqr(this);\r\n  };\r\n\r\n  // Square root over p\r\n  BN.prototype.redSqrt = function redSqrt () {\r\n    assert(this.red, 'redSqrt works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.sqrt(this);\r\n  };\r\n\r\n  BN.prototype.redInvm = function redInvm () {\r\n    assert(this.red, 'redInvm works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.invm(this);\r\n  };\r\n\r\n  // Return negative clone of `this` % `red modulo`\r\n  BN.prototype.redNeg = function redNeg () {\r\n    assert(this.red, 'redNeg works only with red numbers');\r\n    this.red._verify1(this);\r\n    return this.red.neg(this);\r\n  };\r\n\r\n  BN.prototype.redPow = function redPow (num) {\r\n    assert(this.red && !num.red, 'redPow(normalNum)');\r\n    this.red._verify1(this);\r\n    return this.red.pow(this, num);\r\n  };\r\n\r\n  // Prime numbers with efficient reduction\r\n  var primes = {\r\n    k256: null,\r\n    p224: null,\r\n    p192: null,\r\n    p25519: null\r\n  };\r\n\r\n  // Pseudo-Mersenne prime\r\n  function MPrime (name, p) {\r\n    // P = 2 ^ N - K\r\n    this.name = name;\r\n    this.p = new BN(p, 16);\r\n    this.n = this.p.bitLength();\r\n    this.k = new BN(1).iushln(this.n).isub(this.p);\r\n\r\n    this.tmp = this._tmp();\r\n  }\r\n\r\n  MPrime.prototype._tmp = function _tmp () {\r\n    var tmp = new BN(null);\r\n    tmp.words = new Array(Math.ceil(this.n / 13));\r\n    return tmp;\r\n  };\r\n\r\n  MPrime.prototype.ireduce = function ireduce (num) {\r\n    // Assumes that `num` is less than `P^2`\r\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\r\n    var r = num;\r\n    var rlen;\r\n\r\n    do {\r\n      this.split(r, this.tmp);\r\n      r = this.imulK(r);\r\n      r = r.iadd(this.tmp);\r\n      rlen = r.bitLength();\r\n    } while (rlen > this.n);\r\n\r\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\r\n    if (cmp === 0) {\r\n      r.words[0] = 0;\r\n      r.length = 1;\r\n    } else if (cmp > 0) {\r\n      r.isub(this.p);\r\n    } else {\r\n      if (r.strip !== undefined) {\r\n        // r is BN v4 instance\r\n        r.strip();\r\n      } else {\r\n        // r is BN v5 instance\r\n        r._strip();\r\n      }\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  MPrime.prototype.split = function split (input, out) {\r\n    input.iushrn(this.n, 0, out);\r\n  };\r\n\r\n  MPrime.prototype.imulK = function imulK (num) {\r\n    return num.imul(this.k);\r\n  };\r\n\r\n  function K256 () {\r\n    MPrime.call(\r\n      this,\r\n      'k256',\r\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\r\n  }\r\n  inherits(K256, MPrime);\r\n\r\n  K256.prototype.split = function split (input, output) {\r\n    // 256 = 9 * 26 + 22\r\n    var mask = 0x3fffff;\r\n\r\n    var outLen = Math.min(input.length, 9);\r\n    for (var i = 0; i < outLen; i++) {\r\n      output.words[i] = input.words[i];\r\n    }\r\n    output.length = outLen;\r\n\r\n    if (input.length <= 9) {\r\n      input.words[0] = 0;\r\n      input.length = 1;\r\n      return;\r\n    }\r\n\r\n    // Shift by 9 limbs\r\n    var prev = input.words[9];\r\n    output.words[output.length++] = prev & mask;\r\n\r\n    for (i = 10; i < input.length; i++) {\r\n      var next = input.words[i] | 0;\r\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\r\n      prev = next;\r\n    }\r\n    prev >>>= 22;\r\n    input.words[i - 10] = prev;\r\n    if (prev === 0 && input.length > 10) {\r\n      input.length -= 10;\r\n    } else {\r\n      input.length -= 9;\r\n    }\r\n  };\r\n\r\n  K256.prototype.imulK = function imulK (num) {\r\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\r\n    num.words[num.length] = 0;\r\n    num.words[num.length + 1] = 0;\r\n    num.length += 2;\r\n\r\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\r\n    var lo = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var w = num.words[i] | 0;\r\n      lo += w * 0x3d1;\r\n      num.words[i] = lo & 0x3ffffff;\r\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\r\n    }\r\n\r\n    // Fast length reduction\r\n    if (num.words[num.length - 1] === 0) {\r\n      num.length--;\r\n      if (num.words[num.length - 1] === 0) {\r\n        num.length--;\r\n      }\r\n    }\r\n    return num;\r\n  };\r\n\r\n  function P224 () {\r\n    MPrime.call(\r\n      this,\r\n      'p224',\r\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\r\n  }\r\n  inherits(P224, MPrime);\r\n\r\n  function P192 () {\r\n    MPrime.call(\r\n      this,\r\n      'p192',\r\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\r\n  }\r\n  inherits(P192, MPrime);\r\n\r\n  function P25519 () {\r\n    // 2 ^ 255 - 19\r\n    MPrime.call(\r\n      this,\r\n      '25519',\r\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\r\n  }\r\n  inherits(P25519, MPrime);\r\n\r\n  P25519.prototype.imulK = function imulK (num) {\r\n    // K = 0x13\r\n    var carry = 0;\r\n    for (var i = 0; i < num.length; i++) {\r\n      var hi = (num.words[i] | 0) * 0x13 + carry;\r\n      var lo = hi & 0x3ffffff;\r\n      hi >>>= 26;\r\n\r\n      num.words[i] = lo;\r\n      carry = hi;\r\n    }\r\n    if (carry !== 0) {\r\n      num.words[num.length++] = carry;\r\n    }\r\n    return num;\r\n  };\r\n\r\n  // Exported mostly for testing purposes, use plain name instead\r\n  BN._prime = function prime (name) {\r\n    // Cached version of prime\r\n    if (primes[name]) return primes[name];\r\n\r\n    var prime;\r\n    if (name === 'k256') {\r\n      prime = new K256();\r\n    } else if (name === 'p224') {\r\n      prime = new P224();\r\n    } else if (name === 'p192') {\r\n      prime = new P192();\r\n    } else if (name === 'p25519') {\r\n      prime = new P25519();\r\n    } else {\r\n      throw new Error('Unknown prime ' + name);\r\n    }\r\n    primes[name] = prime;\r\n\r\n    return prime;\r\n  };\r\n\r\n  //\r\n  // Base reduction engine\r\n  //\r\n  function Red (m) {\r\n    if (typeof m === 'string') {\r\n      var prime = BN._prime(m);\r\n      this.m = prime.p;\r\n      this.prime = prime;\r\n    } else {\r\n      assert(m.gtn(1), 'modulus must be greater than 1');\r\n      this.m = m;\r\n      this.prime = null;\r\n    }\r\n  }\r\n\r\n  Red.prototype._verify1 = function _verify1 (a) {\r\n    assert(a.negative === 0, 'red works only with positives');\r\n    assert(a.red, 'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype._verify2 = function _verify2 (a, b) {\r\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\r\n    assert(a.red && a.red === b.red,\r\n      'red works only with red numbers');\r\n  };\r\n\r\n  Red.prototype.imod = function imod (a) {\r\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\r\n    return a.umod(this.m)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.neg = function neg (a) {\r\n    if (a.isZero()) {\r\n      return a.clone();\r\n    }\r\n\r\n    return this.m.sub(a)._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.add = function add (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.add(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.iadd = function iadd (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.iadd(b);\r\n    if (res.cmp(this.m) >= 0) {\r\n      res.isub(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.sub = function sub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.sub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Red.prototype.isub = function isub (a, b) {\r\n    this._verify2(a, b);\r\n\r\n    var res = a.isub(b);\r\n    if (res.cmpn(0) < 0) {\r\n      res.iadd(this.m);\r\n    }\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.shl = function shl (a, num) {\r\n    this._verify1(a);\r\n    return this.imod(a.ushln(num));\r\n  };\r\n\r\n  Red.prototype.imul = function imul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.imul(b));\r\n  };\r\n\r\n  Red.prototype.mul = function mul (a, b) {\r\n    this._verify2(a, b);\r\n    return this.imod(a.mul(b));\r\n  };\r\n\r\n  Red.prototype.isqr = function isqr (a) {\r\n    return this.imul(a, a.clone());\r\n  };\r\n\r\n  Red.prototype.sqr = function sqr (a) {\r\n    return this.mul(a, a);\r\n  };\r\n\r\n  Red.prototype.sqrt = function sqrt (a) {\r\n    if (a.isZero()) return a.clone();\r\n\r\n    var mod3 = this.m.andln(3);\r\n    assert(mod3 % 2 === 1);\r\n\r\n    // Fast case\r\n    if (mod3 === 3) {\r\n      var pow = this.m.add(new BN(1)).iushrn(2);\r\n      return this.pow(a, pow);\r\n    }\r\n\r\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\r\n    //\r\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\r\n    var q = this.m.subn(1);\r\n    var s = 0;\r\n    while (!q.isZero() && q.andln(1) === 0) {\r\n      s++;\r\n      q.iushrn(1);\r\n    }\r\n    assert(!q.isZero());\r\n\r\n    var one = new BN(1).toRed(this);\r\n    var nOne = one.redNeg();\r\n\r\n    // Find quadratic non-residue\r\n    // NOTE: Max is such because of generalized Riemann hypothesis.\r\n    var lpow = this.m.subn(1).iushrn(1);\r\n    var z = this.m.bitLength();\r\n    z = new BN(2 * z * z).toRed(this);\r\n\r\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\r\n      z.redIAdd(nOne);\r\n    }\r\n\r\n    var c = this.pow(z, q);\r\n    var r = this.pow(a, q.addn(1).iushrn(1));\r\n    var t = this.pow(a, q);\r\n    var m = s;\r\n    while (t.cmp(one) !== 0) {\r\n      var tmp = t;\r\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\r\n        tmp = tmp.redSqr();\r\n      }\r\n      assert(i < m);\r\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\r\n\r\n      r = r.redMul(b);\r\n      c = b.redSqr();\r\n      t = t.redMul(c);\r\n      m = i;\r\n    }\r\n\r\n    return r;\r\n  };\r\n\r\n  Red.prototype.invm = function invm (a) {\r\n    var inv = a._invmp(this.m);\r\n    if (inv.negative !== 0) {\r\n      inv.negative = 0;\r\n      return this.imod(inv).redNeg();\r\n    } else {\r\n      return this.imod(inv);\r\n    }\r\n  };\r\n\r\n  Red.prototype.pow = function pow (a, num) {\r\n    if (num.isZero()) return new BN(1).toRed(this);\r\n    if (num.cmpn(1) === 0) return a.clone();\r\n\r\n    var windowSize = 4;\r\n    var wnd = new Array(1 << windowSize);\r\n    wnd[0] = new BN(1).toRed(this);\r\n    wnd[1] = a;\r\n    for (var i = 2; i < wnd.length; i++) {\r\n      wnd[i] = this.mul(wnd[i - 1], a);\r\n    }\r\n\r\n    var res = wnd[0];\r\n    var current = 0;\r\n    var currentLen = 0;\r\n    var start = num.bitLength() % 26;\r\n    if (start === 0) {\r\n      start = 26;\r\n    }\r\n\r\n    for (i = num.length - 1; i >= 0; i--) {\r\n      var word = num.words[i];\r\n      for (var j = start - 1; j >= 0; j--) {\r\n        var bit = (word >> j) & 1;\r\n        if (res !== wnd[0]) {\r\n          res = this.sqr(res);\r\n        }\r\n\r\n        if (bit === 0 && current === 0) {\r\n          currentLen = 0;\r\n          continue;\r\n        }\r\n\r\n        current <<= 1;\r\n        current |= bit;\r\n        currentLen++;\r\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\r\n\r\n        res = this.mul(res, wnd[current]);\r\n        currentLen = 0;\r\n        current = 0;\r\n      }\r\n      start = 26;\r\n    }\r\n\r\n    return res;\r\n  };\r\n\r\n  Red.prototype.convertTo = function convertTo (num) {\r\n    var r = num.umod(this.m);\r\n\r\n    return r === num ? r.clone() : r;\r\n  };\r\n\r\n  Red.prototype.convertFrom = function convertFrom (num) {\r\n    var res = num.clone();\r\n    res.red = null;\r\n    return res;\r\n  };\r\n\r\n  //\r\n  // Montgomery method engine\r\n  //\r\n\r\n  BN.mont = function mont (num) {\r\n    return new Mont(num);\r\n  };\r\n\r\n  function Mont (m) {\r\n    Red.call(this, m);\r\n\r\n    this.shift = this.m.bitLength();\r\n    if (this.shift % 26 !== 0) {\r\n      this.shift += 26 - (this.shift % 26);\r\n    }\r\n\r\n    this.r = new BN(1).iushln(this.shift);\r\n    this.r2 = this.imod(this.r.sqr());\r\n    this.rinv = this.r._invmp(this.m);\r\n\r\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\r\n    this.minv = this.minv.umod(this.r);\r\n    this.minv = this.r.sub(this.minv);\r\n  }\r\n  inherits(Mont, Red);\r\n\r\n  Mont.prototype.convertTo = function convertTo (num) {\r\n    return this.imod(num.ushln(this.shift));\r\n  };\r\n\r\n  Mont.prototype.convertFrom = function convertFrom (num) {\r\n    var r = this.imod(num.mul(this.rinv));\r\n    r.red = null;\r\n    return r;\r\n  };\r\n\r\n  Mont.prototype.imul = function imul (a, b) {\r\n    if (a.isZero() || b.isZero()) {\r\n      a.words[0] = 0;\r\n      a.length = 1;\r\n      return a;\r\n    }\r\n\r\n    var t = a.imul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.mul = function mul (a, b) {\r\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\r\n\r\n    var t = a.mul(b);\r\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\r\n    var u = t.isub(c).iushrn(this.shift);\r\n    var res = u;\r\n    if (u.cmp(this.m) >= 0) {\r\n      res = u.isub(this.m);\r\n    } else if (u.cmpn(0) < 0) {\r\n      res = u.iadd(this.m);\r\n    }\r\n\r\n    return res._forceRed(this);\r\n  };\r\n\r\n  Mont.prototype.invm = function invm (a) {\r\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\r\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\r\n    return res._forceRed(this);\r\n  };\r\n})( false || module, this);\r\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))\n\n//# sourceURL=webpack://Game/./node_modules/public-encrypt/node_modules/bn.js/lib/bn.js?");

/***/ }),

/***/ "./node_modules/public-encrypt/privateDecrypt.js":
/*!*******************************************************!*\
  !*** ./node_modules/public-encrypt/privateDecrypt.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var parseKeys = __webpack_require__(/*! parse-asn1 */ \"./node_modules/parse-asn1/index.js\")\nvar mgf = __webpack_require__(/*! ./mgf */ \"./node_modules/public-encrypt/mgf.js\")\nvar xor = __webpack_require__(/*! ./xor */ \"./node_modules/public-encrypt/xor.js\")\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/public-encrypt/node_modules/bn.js/lib/bn.js\")\nvar crt = __webpack_require__(/*! browserify-rsa */ \"./node_modules/browserify-rsa/index.js\")\nvar createHash = __webpack_require__(/*! create-hash */ \"./node_modules/create-hash/browser.js\")\nvar withPublic = __webpack_require__(/*! ./withPublic */ \"./node_modules/public-encrypt/withPublic.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nmodule.exports = function privateDecrypt (privateKey, enc, reverse) {\n  var padding\n  if (privateKey.padding) {\n    padding = privateKey.padding\n  } else if (reverse) {\n    padding = 1\n  } else {\n    padding = 4\n  }\n\n  var key = parseKeys(privateKey)\n  var k = key.modulus.byteLength()\n  if (enc.length > k || new BN(enc).cmp(key.modulus) >= 0) {\n    throw new Error('decryption error')\n  }\n  var msg\n  if (reverse) {\n    msg = withPublic(new BN(enc), key)\n  } else {\n    msg = crt(enc, key)\n  }\n  var zBuffer = Buffer.alloc(k - msg.length)\n  msg = Buffer.concat([zBuffer, msg], k)\n  if (padding === 4) {\n    return oaep(key, msg)\n  } else if (padding === 1) {\n    return pkcs1(key, msg, reverse)\n  } else if (padding === 3) {\n    return msg\n  } else {\n    throw new Error('unknown padding')\n  }\n}\n\nfunction oaep (key, msg) {\n  var k = key.modulus.byteLength()\n  var iHash = createHash('sha1').update(Buffer.alloc(0)).digest()\n  var hLen = iHash.length\n  if (msg[0] !== 0) {\n    throw new Error('decryption error')\n  }\n  var maskedSeed = msg.slice(1, hLen + 1)\n  var maskedDb = msg.slice(hLen + 1)\n  var seed = xor(maskedSeed, mgf(maskedDb, hLen))\n  var db = xor(maskedDb, mgf(seed, k - hLen - 1))\n  if (compare(iHash, db.slice(0, hLen))) {\n    throw new Error('decryption error')\n  }\n  var i = hLen\n  while (db[i] === 0) {\n    i++\n  }\n  if (db[i++] !== 1) {\n    throw new Error('decryption error')\n  }\n  return db.slice(i)\n}\n\nfunction pkcs1 (key, msg, reverse) {\n  var p1 = msg.slice(0, 2)\n  var i = 2\n  var status = 0\n  while (msg[i++] !== 0) {\n    if (i >= msg.length) {\n      status++\n      break\n    }\n  }\n  var ps = msg.slice(2, i - 1)\n\n  if ((p1.toString('hex') !== '0002' && !reverse) || (p1.toString('hex') !== '0001' && reverse)) {\n    status++\n  }\n  if (ps.length < 8) {\n    status++\n  }\n  if (status) {\n    throw new Error('decryption error')\n  }\n  return msg.slice(i)\n}\nfunction compare (a, b) {\n  a = Buffer.from(a)\n  b = Buffer.from(b)\n  var dif = 0\n  var len = a.length\n  if (a.length !== b.length) {\n    dif++\n    len = Math.min(a.length, b.length)\n  }\n  var i = -1\n  while (++i < len) {\n    dif += (a[i] ^ b[i])\n  }\n  return dif\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/public-encrypt/privateDecrypt.js?");

/***/ }),

/***/ "./node_modules/public-encrypt/publicEncrypt.js":
/*!******************************************************!*\
  !*** ./node_modules/public-encrypt/publicEncrypt.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var parseKeys = __webpack_require__(/*! parse-asn1 */ \"./node_modules/parse-asn1/index.js\")\nvar randomBytes = __webpack_require__(/*! randombytes */ \"./node_modules/randombytes/browser.js\")\nvar createHash = __webpack_require__(/*! create-hash */ \"./node_modules/create-hash/browser.js\")\nvar mgf = __webpack_require__(/*! ./mgf */ \"./node_modules/public-encrypt/mgf.js\")\nvar xor = __webpack_require__(/*! ./xor */ \"./node_modules/public-encrypt/xor.js\")\nvar BN = __webpack_require__(/*! bn.js */ \"./node_modules/public-encrypt/node_modules/bn.js/lib/bn.js\")\nvar withPublic = __webpack_require__(/*! ./withPublic */ \"./node_modules/public-encrypt/withPublic.js\")\nvar crt = __webpack_require__(/*! browserify-rsa */ \"./node_modules/browserify-rsa/index.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nmodule.exports = function publicEncrypt (publicKey, msg, reverse) {\n  var padding\n  if (publicKey.padding) {\n    padding = publicKey.padding\n  } else if (reverse) {\n    padding = 1\n  } else {\n    padding = 4\n  }\n  var key = parseKeys(publicKey)\n  var paddedMsg\n  if (padding === 4) {\n    paddedMsg = oaep(key, msg)\n  } else if (padding === 1) {\n    paddedMsg = pkcs1(key, msg, reverse)\n  } else if (padding === 3) {\n    paddedMsg = new BN(msg)\n    if (paddedMsg.cmp(key.modulus) >= 0) {\n      throw new Error('data too long for modulus')\n    }\n  } else {\n    throw new Error('unknown padding')\n  }\n  if (reverse) {\n    return crt(paddedMsg, key)\n  } else {\n    return withPublic(paddedMsg, key)\n  }\n}\n\nfunction oaep (key, msg) {\n  var k = key.modulus.byteLength()\n  var mLen = msg.length\n  var iHash = createHash('sha1').update(Buffer.alloc(0)).digest()\n  var hLen = iHash.length\n  var hLen2 = 2 * hLen\n  if (mLen > k - hLen2 - 2) {\n    throw new Error('message too long')\n  }\n  var ps = Buffer.alloc(k - mLen - hLen2 - 2)\n  var dblen = k - hLen - 1\n  var seed = randomBytes(hLen)\n  var maskedDb = xor(Buffer.concat([iHash, ps, Buffer.alloc(1, 1), msg], dblen), mgf(seed, dblen))\n  var maskedSeed = xor(seed, mgf(maskedDb, hLen))\n  return new BN(Buffer.concat([Buffer.alloc(1), maskedSeed, maskedDb], k))\n}\nfunction pkcs1 (key, msg, reverse) {\n  var mLen = msg.length\n  var k = key.modulus.byteLength()\n  if (mLen > k - 11) {\n    throw new Error('message too long')\n  }\n  var ps\n  if (reverse) {\n    ps = Buffer.alloc(k - mLen - 3, 0xff)\n  } else {\n    ps = nonZero(k - mLen - 3)\n  }\n  return new BN(Buffer.concat([Buffer.from([0, reverse ? 1 : 2]), ps, Buffer.alloc(1), msg], k))\n}\nfunction nonZero (len) {\n  var out = Buffer.allocUnsafe(len)\n  var i = 0\n  var cache = randomBytes(len * 2)\n  var cur = 0\n  var num\n  while (i < len) {\n    if (cur === cache.length) {\n      cache = randomBytes(len * 2)\n      cur = 0\n    }\n    num = cache[cur++]\n    if (num) {\n      out[i++] = num\n    }\n  }\n  return out\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/public-encrypt/publicEncrypt.js?");

/***/ }),

/***/ "./node_modules/public-encrypt/withPublic.js":
/*!***************************************************!*\
  !*** ./node_modules/public-encrypt/withPublic.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var BN = __webpack_require__(/*! bn.js */ \"./node_modules/public-encrypt/node_modules/bn.js/lib/bn.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nfunction withPublic (paddedMsg, key) {\n  return Buffer.from(paddedMsg\n    .toRed(BN.mont(key.modulus))\n    .redPow(new BN(key.publicExponent))\n    .fromRed()\n    .toArray())\n}\n\nmodule.exports = withPublic\n\n\n//# sourceURL=webpack://Game/./node_modules/public-encrypt/withPublic.js?");

/***/ }),

/***/ "./node_modules/public-encrypt/xor.js":
/*!********************************************!*\
  !*** ./node_modules/public-encrypt/xor.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function xor (a, b) {\n  var len = a.length\n  var i = -1\n  while (++i < len) {\n    a[i] ^= b[i]\n  }\n  return a\n}\n\n\n//# sourceURL=webpack://Game/./node_modules/public-encrypt/xor.js?");

/***/ }),

/***/ "./node_modules/random-js/dist/random-js.esm.js":
/*!******************************************************!*\
  !*** ./node_modules/random-js/dist/random-js.esm.js ***!
  \******************************************************/
/*! exports provided: Random, browserCrypto, nativeMath, MersenneTwister19937, nodeCrypto, bool, date, dice, die, hex, int32, int53, int53Full, integer, pick, picker, real, realZeroToOneExclusive, realZeroToOneInclusive, sample, shuffle, string, uint32, uint53, uint53Full, uuid4, createEntropy */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Random\", function() { return Random; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"browserCrypto\", function() { return browserCrypto; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"nativeMath\", function() { return nativeMath; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MersenneTwister19937\", function() { return MersenneTwister19937; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"nodeCrypto\", function() { return nodeCrypto; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"bool\", function() { return bool; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"date\", function() { return date; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"dice\", function() { return dice; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"die\", function() { return die; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hex\", function() { return hex; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"int32\", function() { return int32; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"int53\", function() { return int53; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"int53Full\", function() { return int53Full; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"integer\", function() { return integer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"pick\", function() { return pick; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"picker\", function() { return picker; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"real\", function() { return real; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"realZeroToOneExclusive\", function() { return realZeroToOneExclusive; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"realZeroToOneInclusive\", function() { return realZeroToOneInclusive; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sample\", function() { return sample; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shuffle\", function() { return shuffle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"string\", function() { return string; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"uint32\", function() { return uint32; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"uint53\", function() { return uint53; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"uint53Full\", function() { return uint53Full; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"uuid4\", function() { return uuid4; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createEntropy\", function() { return createEntropy; });\nconst SMALLEST_UNSAFE_INTEGER = 0x20000000000000;\r\nconst LARGEST_SAFE_INTEGER = SMALLEST_UNSAFE_INTEGER - 1;\r\nconst UINT32_MAX = -1 >>> 0;\r\nconst UINT32_SIZE = UINT32_MAX + 1;\r\nconst INT32_SIZE = UINT32_SIZE / 2;\r\nconst INT32_MAX = INT32_SIZE - 1;\r\nconst UINT21_SIZE = 1 << 21;\r\nconst UINT21_MAX = UINT21_SIZE - 1;\n\n/**\r\n * Returns a value within [-0x80000000, 0x7fffffff]\r\n */\r\nfunction int32(engine) {\r\n    return engine.next() | 0;\r\n}\n\nfunction add(distribution, addend) {\r\n    if (addend === 0) {\r\n        return distribution;\r\n    }\r\n    else {\r\n        return engine => distribution(engine) + addend;\r\n    }\r\n}\n\n/**\r\n * Returns a value within [-0x20000000000000, 0x1fffffffffffff]\r\n */\r\nfunction int53(engine) {\r\n    const high = engine.next() | 0;\r\n    const low = engine.next() >>> 0;\r\n    return ((high & UINT21_MAX) * UINT32_SIZE +\r\n        low +\r\n        (high & UINT21_SIZE ? -SMALLEST_UNSAFE_INTEGER : 0));\r\n}\n\n/**\r\n * Returns a value within [-0x20000000000000, 0x20000000000000]\r\n */\r\nfunction int53Full(engine) {\r\n    while (true) {\r\n        const high = engine.next() | 0;\r\n        if (high & 0x400000) {\r\n            if ((high & 0x7fffff) === 0x400000 && (engine.next() | 0) === 0) {\r\n                return SMALLEST_UNSAFE_INTEGER;\r\n            }\r\n        }\r\n        else {\r\n            const low = engine.next() >>> 0;\r\n            return ((high & UINT21_MAX) * UINT32_SIZE +\r\n                low +\r\n                (high & UINT21_SIZE ? -SMALLEST_UNSAFE_INTEGER : 0));\r\n        }\r\n    }\r\n}\n\n/**\r\n * Returns a value within [0, 0xffffffff]\r\n */\r\nfunction uint32(engine) {\r\n    return engine.next() >>> 0;\r\n}\n\n/**\r\n * Returns a value within [0, 0x1fffffffffffff]\r\n */\r\nfunction uint53(engine) {\r\n    const high = engine.next() & UINT21_MAX;\r\n    const low = engine.next() >>> 0;\r\n    return high * UINT32_SIZE + low;\r\n}\n\n/**\r\n * Returns a value within [0, 0x20000000000000]\r\n */\r\nfunction uint53Full(engine) {\r\n    while (true) {\r\n        const high = engine.next() | 0;\r\n        if (high & UINT21_SIZE) {\r\n            if ((high & UINT21_MAX) === 0 && (engine.next() | 0) === 0) {\r\n                return SMALLEST_UNSAFE_INTEGER;\r\n            }\r\n        }\r\n        else {\r\n            const low = engine.next() >>> 0;\r\n            return (high & UINT21_MAX) * UINT32_SIZE + low;\r\n        }\r\n    }\r\n}\n\nfunction isPowerOfTwoMinusOne(value) {\r\n    return ((value + 1) & value) === 0;\r\n}\r\nfunction bitmask(masking) {\r\n    return (engine) => engine.next() & masking;\r\n}\r\nfunction downscaleToLoopCheckedRange(range) {\r\n    const extendedRange = range + 1;\r\n    const maximum = extendedRange * Math.floor(UINT32_SIZE / extendedRange);\r\n    return engine => {\r\n        let value = 0;\r\n        do {\r\n            value = engine.next() >>> 0;\r\n        } while (value >= maximum);\r\n        return value % extendedRange;\r\n    };\r\n}\r\nfunction downscaleToRange(range) {\r\n    if (isPowerOfTwoMinusOne(range)) {\r\n        return bitmask(range);\r\n    }\r\n    else {\r\n        return downscaleToLoopCheckedRange(range);\r\n    }\r\n}\r\nfunction isEvenlyDivisibleByMaxInt32(value) {\r\n    return (value | 0) === 0;\r\n}\r\nfunction upscaleWithHighMasking(masking) {\r\n    return engine => {\r\n        const high = engine.next() & masking;\r\n        const low = engine.next() >>> 0;\r\n        return high * UINT32_SIZE + low;\r\n    };\r\n}\r\nfunction upscaleToLoopCheckedRange(extendedRange) {\r\n    const maximum = extendedRange * Math.floor(SMALLEST_UNSAFE_INTEGER / extendedRange);\r\n    return engine => {\r\n        let ret = 0;\r\n        do {\r\n            const high = engine.next() & UINT21_MAX;\r\n            const low = engine.next() >>> 0;\r\n            ret = high * UINT32_SIZE + low;\r\n        } while (ret >= maximum);\r\n        return ret % extendedRange;\r\n    };\r\n}\r\nfunction upscaleWithinU53(range) {\r\n    const extendedRange = range + 1;\r\n    if (isEvenlyDivisibleByMaxInt32(extendedRange)) {\r\n        const highRange = ((extendedRange / UINT32_SIZE) | 0) - 1;\r\n        if (isPowerOfTwoMinusOne(highRange)) {\r\n            return upscaleWithHighMasking(highRange);\r\n        }\r\n    }\r\n    return upscaleToLoopCheckedRange(extendedRange);\r\n}\r\nfunction upscaleWithinI53AndLoopCheck(min, max) {\r\n    return engine => {\r\n        let ret = 0;\r\n        do {\r\n            const high = engine.next() | 0;\r\n            const low = engine.next() >>> 0;\r\n            ret =\r\n                (high & UINT21_MAX) * UINT32_SIZE +\r\n                    low +\r\n                    (high & UINT21_SIZE ? -SMALLEST_UNSAFE_INTEGER : 0);\r\n        } while (ret < min || ret > max);\r\n        return ret;\r\n    };\r\n}\r\n/**\r\n * Returns a Distribution to return a value within [min, max]\r\n * @param min The minimum integer value, inclusive. No less than -0x20000000000000.\r\n * @param max The maximum integer value, inclusive. No greater than 0x20000000000000.\r\n */\r\nfunction integer(min, max) {\r\n    min = Math.floor(min);\r\n    max = Math.floor(max);\r\n    if (min < -SMALLEST_UNSAFE_INTEGER || !isFinite(min)) {\r\n        throw new RangeError(`Expected min to be at least ${-SMALLEST_UNSAFE_INTEGER}`);\r\n    }\r\n    else if (max > SMALLEST_UNSAFE_INTEGER || !isFinite(max)) {\r\n        throw new RangeError(`Expected max to be at most ${SMALLEST_UNSAFE_INTEGER}`);\r\n    }\r\n    const range = max - min;\r\n    if (range <= 0 || !isFinite(range)) {\r\n        return () => min;\r\n    }\r\n    else if (range === UINT32_MAX) {\r\n        if (min === 0) {\r\n            return uint32;\r\n        }\r\n        else {\r\n            return add(int32, min + INT32_SIZE);\r\n        }\r\n    }\r\n    else if (range < UINT32_MAX) {\r\n        return add(downscaleToRange(range), min);\r\n    }\r\n    else if (range === LARGEST_SAFE_INTEGER) {\r\n        return add(uint53, min);\r\n    }\r\n    else if (range < LARGEST_SAFE_INTEGER) {\r\n        return add(upscaleWithinU53(range), min);\r\n    }\r\n    else if (max - 1 - min === LARGEST_SAFE_INTEGER) {\r\n        return add(uint53Full, min);\r\n    }\r\n    else if (min === -SMALLEST_UNSAFE_INTEGER &&\r\n        max === SMALLEST_UNSAFE_INTEGER) {\r\n        return int53Full;\r\n    }\r\n    else if (min === -SMALLEST_UNSAFE_INTEGER && max === LARGEST_SAFE_INTEGER) {\r\n        return int53;\r\n    }\r\n    else if (min === -LARGEST_SAFE_INTEGER && max === SMALLEST_UNSAFE_INTEGER) {\r\n        return add(int53, 1);\r\n    }\r\n    else if (max === SMALLEST_UNSAFE_INTEGER) {\r\n        return add(upscaleWithinI53AndLoopCheck(min - 1, max - 1), 1);\r\n    }\r\n    else {\r\n        return upscaleWithinI53AndLoopCheck(min, max);\r\n    }\r\n}\n\nfunction isLeastBitTrue(engine) {\r\n    return (engine.next() & 1) === 1;\r\n}\r\nfunction lessThan(distribution, value) {\r\n    return engine => distribution(engine) < value;\r\n}\r\nfunction probability(percentage) {\r\n    if (percentage <= 0) {\r\n        return () => false;\r\n    }\r\n    else if (percentage >= 1) {\r\n        return () => true;\r\n    }\r\n    else {\r\n        const scaled = percentage * UINT32_SIZE;\r\n        if (scaled % 1 === 0) {\r\n            return lessThan(int32, (scaled - INT32_SIZE) | 0);\r\n        }\r\n        else {\r\n            return lessThan(uint53, Math.round(percentage * SMALLEST_UNSAFE_INTEGER));\r\n        }\r\n    }\r\n}\r\nfunction bool(numerator, denominator) {\r\n    if (denominator == null) {\r\n        if (numerator == null) {\r\n            return isLeastBitTrue;\r\n        }\r\n        return probability(numerator);\r\n    }\r\n    else {\r\n        if (numerator <= 0) {\r\n            return () => false;\r\n        }\r\n        else if (numerator >= denominator) {\r\n            return () => true;\r\n        }\r\n        return lessThan(integer(0, denominator - 1), numerator);\r\n    }\r\n}\n\n/**\r\n * Returns a Distribution that returns a random `Date` within the inclusive\r\n * range of [`start`, `end`].\r\n * @param start The minimum `Date`\r\n * @param end The maximum `Date`\r\n */\r\nfunction date(start, end) {\r\n    const distribution = integer(+start, +end);\r\n    return engine => new Date(distribution(engine));\r\n}\n\n/**\r\n * Returns a Distribution to return a value within [1, sideCount]\r\n * @param sideCount The number of sides of the die\r\n */\r\nfunction die(sideCount) {\r\n    return integer(1, sideCount);\r\n}\n\n/**\r\n * Returns a distribution that returns an array of length `dieCount` of values\r\n * within [1, `sideCount`]\r\n * @param sideCount The number of sides of each die\r\n * @param dieCount The number of dice\r\n */\r\nfunction dice(sideCount, dieCount) {\r\n    const distribution = die(sideCount);\r\n    return engine => {\r\n        const result = [];\r\n        for (let i = 0; i < dieCount; ++i) {\r\n            result.push(distribution(engine));\r\n        }\r\n        return result;\r\n    };\r\n}\n\n// tslint:disable:unified-signatures\r\n// has 2**x chars, for faster uniform distribution\r\nconst DEFAULT_STRING_POOL = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-\";\r\nfunction string(pool = DEFAULT_STRING_POOL) {\r\n    const poolLength = pool.length;\r\n    if (!poolLength) {\r\n        throw new Error(\"Expected pool not to be an empty string\");\r\n    }\r\n    const distribution = integer(0, poolLength - 1);\r\n    return (engine, length) => {\r\n        let result = \"\";\r\n        for (let i = 0; i < length; ++i) {\r\n            const j = distribution(engine);\r\n            result += pool.charAt(j);\r\n        }\r\n        return result;\r\n    };\r\n}\n\nconst LOWER_HEX_POOL = \"0123456789abcdef\";\r\nconst lowerHex = string(LOWER_HEX_POOL);\r\nconst upperHex = string(LOWER_HEX_POOL.toUpperCase());\r\n/**\r\n * Returns a Distribution that returns a random string comprised of numbers\r\n * or the characters `abcdef` (or `ABCDEF`) of length `length`.\r\n * @param length Length of the result string\r\n * @param uppercase Whether the string should use `ABCDEF` instead of `abcdef`\r\n */\r\nfunction hex(uppercase) {\r\n    if (uppercase) {\r\n        return upperHex;\r\n    }\r\n    else {\r\n        return lowerHex;\r\n    }\r\n}\n\nfunction convertSliceArgument(value, length) {\r\n    if (value < 0) {\r\n        return Math.max(value + length, 0);\r\n    }\r\n    else {\r\n        return Math.min(value, length);\r\n    }\r\n}\n\nfunction toInteger(value) {\r\n    const num = +value;\r\n    if (num < 0) {\r\n        return Math.ceil(num);\r\n    }\r\n    else {\r\n        return Math.floor(num);\r\n    }\r\n}\n\n/**\r\n * Returns a random value within the provided `source` within the sliced\r\n * bounds of `begin` and `end`.\r\n * @param source an array of items to pick from\r\n * @param begin the beginning slice index (defaults to `0`)\r\n * @param end the ending slice index (defaults to `source.length`)\r\n */\r\nfunction pick(engine, source, begin, end) {\r\n    const length = source.length;\r\n    if (length === 0) {\r\n        throw new RangeError(\"Cannot pick from an empty array\");\r\n    }\r\n    const start = begin == null ? 0 : convertSliceArgument(toInteger(begin), length);\r\n    const finish = end === void 0 ? length : convertSliceArgument(toInteger(end), length);\r\n    if (start >= finish) {\r\n        throw new RangeError(`Cannot pick between bounds ${start} and ${finish}`);\r\n    }\r\n    const distribution = integer(start, finish - 1);\r\n    return source[distribution(engine)];\r\n}\n\nfunction multiply(distribution, multiplier) {\r\n    if (multiplier === 1) {\r\n        return distribution;\r\n    }\r\n    else if (multiplier === 0) {\r\n        return () => 0;\r\n    }\r\n    else {\r\n        return engine => distribution(engine) * multiplier;\r\n    }\r\n}\n\n/**\r\n * Returns a floating-point value within [0.0, 1.0)\r\n */\r\nfunction realZeroToOneExclusive(engine) {\r\n    return uint53(engine) / SMALLEST_UNSAFE_INTEGER;\r\n}\n\n/**\r\n * Returns a floating-point value within [0.0, 1.0]\r\n */\r\nfunction realZeroToOneInclusive(engine) {\r\n    return uint53Full(engine) / SMALLEST_UNSAFE_INTEGER;\r\n}\n\n/**\r\n * Returns a floating-point value within [min, max) or [min, max]\r\n * @param min The minimum floating-point value, inclusive.\r\n * @param max The maximum floating-point value.\r\n * @param inclusive If true, `max` will be inclusive.\r\n */\r\nfunction real(min, max, inclusive = false) {\r\n    if (!isFinite(min)) {\r\n        throw new RangeError(\"Expected min to be a finite number\");\r\n    }\r\n    else if (!isFinite(max)) {\r\n        throw new RangeError(\"Expected max to be a finite number\");\r\n    }\r\n    return add(multiply(inclusive ? realZeroToOneInclusive : realZeroToOneExclusive, max - min), min);\r\n}\n\nconst sliceArray = Array.prototype.slice;\n\n/**\r\n * Shuffles an array in-place\r\n * @param engine The Engine to use when choosing random values\r\n * @param array The array to shuffle\r\n * @param downTo minimum index to shuffle. Only used internally.\r\n */\r\nfunction shuffle(engine, array, downTo = 0) {\r\n    const length = array.length;\r\n    if (length) {\r\n        for (let i = (length - 1) >>> 0; i > downTo; --i) {\r\n            const distribution = integer(0, i);\r\n            const j = distribution(engine);\r\n            if (i !== j) {\r\n                const tmp = array[i];\r\n                array[i] = array[j];\r\n                array[j] = tmp;\r\n            }\r\n        }\r\n    }\r\n    return array;\r\n}\n\n/**\r\n * From the population array, produce an array with sampleSize elements that\r\n * are randomly chosen without repeats.\r\n * @param engine The Engine to use when choosing random values\r\n * @param population An array that has items to choose a sample from\r\n * @param sampleSize The size of the result array\r\n */\r\nfunction sample(engine, population, sampleSize) {\r\n    if (sampleSize < 0 ||\r\n        sampleSize > population.length ||\r\n        !isFinite(sampleSize)) {\r\n        throw new RangeError(\"Expected sampleSize to be within 0 and the length of the population\");\r\n    }\r\n    if (sampleSize === 0) {\r\n        return [];\r\n    }\r\n    const clone = sliceArray.call(population);\r\n    const length = clone.length;\r\n    if (length === sampleSize) {\r\n        return shuffle(engine, clone, 0);\r\n    }\r\n    const tailLength = length - sampleSize;\r\n    return shuffle(engine, clone, tailLength - 1).slice(tailLength);\r\n}\n\nconst stringRepeat = (() => {\r\n    try {\r\n        if (\"x\".repeat(3) === \"xxx\") {\r\n            return (pattern, count) => pattern.repeat(count);\r\n        }\r\n    }\r\n    catch (_) {\r\n        // nothing to do here\r\n    }\r\n    return (pattern, count) => {\r\n        let result = \"\";\r\n        while (count > 0) {\r\n            if (count & 1) {\r\n                result += pattern;\r\n            }\r\n            count >>= 1;\r\n            pattern += pattern;\r\n        }\r\n        return result;\r\n    };\r\n})();\n\nfunction zeroPad(text, zeroCount) {\r\n    return stringRepeat(\"0\", zeroCount - text.length) + text;\r\n}\r\n/**\r\n * Returns a Universally Unique Identifier Version 4.\r\n *\r\n * See http://en.wikipedia.org/wiki/Universally_unique_identifier\r\n */\r\nfunction uuid4(engine) {\r\n    const a = engine.next() >>> 0;\r\n    const b = engine.next() | 0;\r\n    const c = engine.next() | 0;\r\n    const d = engine.next() >>> 0;\r\n    return (zeroPad(a.toString(16), 8) +\r\n        \"-\" +\r\n        zeroPad((b & 0xffff).toString(16), 4) +\r\n        \"-\" +\r\n        zeroPad((((b >> 4) & 0x0fff) | 0x4000).toString(16), 4) +\r\n        \"-\" +\r\n        zeroPad(((c & 0x3fff) | 0x8000).toString(16), 4) +\r\n        \"-\" +\r\n        zeroPad(((c >> 4) & 0xffff).toString(16), 4) +\r\n        zeroPad(d.toString(16), 8));\r\n}\n\n/**\r\n * An int32-producing Engine that uses `Math.random()`\r\n */\r\nconst nativeMath = {\r\n    next() {\r\n        return (Math.random() * UINT32_SIZE) | 0;\r\n    }\r\n};\n\n// tslint:disable:unified-signatures\r\n/**\r\n * A wrapper around an Engine that provides easy-to-use methods for\r\n * producing values based on known distributions\r\n */\r\nclass Random {\r\n    /**\r\n     * Creates a new Random wrapper\r\n     * @param engine The engine to use (defaults to a `Math.random`-based implementation)\r\n     */\r\n    constructor(engine = nativeMath) {\r\n        this.engine = engine;\r\n    }\r\n    /**\r\n     * Returns a value within [-0x80000000, 0x7fffffff]\r\n     */\r\n    int32() {\r\n        return int32(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [0, 0xffffffff]\r\n     */\r\n    uint32() {\r\n        return uint32(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [0, 0x1fffffffffffff]\r\n     */\r\n    uint53() {\r\n        return uint53(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [0, 0x20000000000000]\r\n     */\r\n    uint53Full() {\r\n        return uint53Full(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [-0x20000000000000, 0x1fffffffffffff]\r\n     */\r\n    int53() {\r\n        return int53(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [-0x20000000000000, 0x20000000000000]\r\n     */\r\n    int53Full() {\r\n        return int53Full(this.engine);\r\n    }\r\n    /**\r\n     * Returns a value within [min, max]\r\n     * @param min The minimum integer value, inclusive. No less than -0x20000000000000.\r\n     * @param max The maximum integer value, inclusive. No greater than 0x20000000000000.\r\n     */\r\n    integer(min, max) {\r\n        return integer(min, max)(this.engine);\r\n    }\r\n    /**\r\n     * Returns a floating-point value within [0.0, 1.0]\r\n     */\r\n    realZeroToOneInclusive() {\r\n        return realZeroToOneInclusive(this.engine);\r\n    }\r\n    /**\r\n     * Returns a floating-point value within [0.0, 1.0)\r\n     */\r\n    realZeroToOneExclusive() {\r\n        return realZeroToOneExclusive(this.engine);\r\n    }\r\n    /**\r\n     * Returns a floating-point value within [min, max) or [min, max]\r\n     * @param min The minimum floating-point value, inclusive.\r\n     * @param max The maximum floating-point value.\r\n     * @param inclusive If true, `max` will be inclusive.\r\n     */\r\n    real(min, max, inclusive = false) {\r\n        return real(min, max, inclusive)(this.engine);\r\n    }\r\n    bool(numerator, denominator) {\r\n        return bool(numerator, denominator)(this.engine);\r\n    }\r\n    /**\r\n     * Return a random value within the provided `source` within the sliced\r\n     * bounds of `begin` and `end`.\r\n     * @param source an array of items to pick from\r\n     * @param begin the beginning slice index (defaults to `0`)\r\n     * @param end the ending slice index (defaults to `source.length`)\r\n     */\r\n    pick(source, begin, end) {\r\n        return pick(this.engine, source, begin, end);\r\n    }\r\n    /**\r\n     * Shuffles an array in-place\r\n     * @param array The array to shuffle\r\n     */\r\n    shuffle(array) {\r\n        return shuffle(this.engine, array);\r\n    }\r\n    /**\r\n     * From the population array, returns an array with sampleSize elements that\r\n     * are randomly chosen without repeats.\r\n     * @param population An array that has items to choose a sample from\r\n     * @param sampleSize The size of the result array\r\n     */\r\n    sample(population, sampleSize) {\r\n        return sample(this.engine, population, sampleSize);\r\n    }\r\n    /**\r\n     * Returns a value within [1, sideCount]\r\n     * @param sideCount The number of sides of the die\r\n     */\r\n    die(sideCount) {\r\n        return die(sideCount)(this.engine);\r\n    }\r\n    /**\r\n     * Returns an array of length `dieCount` of values within [1, sideCount]\r\n     * @param sideCount The number of sides of each die\r\n     * @param dieCount The number of dice\r\n     */\r\n    dice(sideCount, dieCount) {\r\n        return dice(sideCount, dieCount)(this.engine);\r\n    }\r\n    /**\r\n     * Returns a Universally Unique Identifier Version 4.\r\n     *\r\n     * See http://en.wikipedia.org/wiki/Universally_unique_identifier\r\n     */\r\n    uuid4() {\r\n        return uuid4(this.engine);\r\n    }\r\n    string(length, pool) {\r\n        return string(pool)(this.engine, length);\r\n    }\r\n    /**\r\n     * Returns a random string comprised of numbers or the characters `abcdef`\r\n     * (or `ABCDEF`) of length `length`.\r\n     * @param length Length of the result string\r\n     * @param uppercase Whether the string should use `ABCDEF` instead of `abcdef`\r\n     */\r\n    hex(length, uppercase) {\r\n        return hex(uppercase)(this.engine, length);\r\n    }\r\n    /**\r\n     * Returns a random `Date` within the inclusive range of [`start`, `end`].\r\n     * @param start The minimum `Date`\r\n     * @param end The maximum `Date`\r\n     */\r\n    date(start, end) {\r\n        return date(start, end)(this.engine);\r\n    }\r\n}\n\n/**\r\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array\r\n */\r\nconst I32Array = (() => {\r\n    try {\r\n        const buffer = new ArrayBuffer(4);\r\n        const view = new Int32Array(buffer);\r\n        view[0] = INT32_SIZE;\r\n        if (view[0] === -INT32_SIZE) {\r\n            return Int32Array;\r\n        }\r\n    }\r\n    catch (_) {\r\n        // nothing to do here\r\n    }\r\n    return Array;\r\n})();\n\nlet data = null;\r\nconst COUNT = 128;\r\nlet index = COUNT;\r\n/**\r\n * An Engine that relies on the globally-available `crypto.getRandomValues`,\r\n * which is typically available in modern browsers.\r\n *\r\n * See https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues\r\n *\r\n * If unavailable or otherwise non-functioning, then `browserCrypto` will\r\n * likely `throw` on the first call to `next()`.\r\n */\r\nconst browserCrypto = {\r\n    next() {\r\n        if (index >= COUNT) {\r\n            if (data === null) {\r\n                data = new I32Array(COUNT);\r\n            }\r\n            crypto.getRandomValues(data);\r\n            index = 0;\r\n        }\r\n        return data[index++] | 0;\r\n    }\r\n};\n\n/**\r\n * Returns an array of random int32 values, based on current time\r\n * and a random number engine\r\n *\r\n * @param engine an Engine to pull random values from, default `nativeMath`\r\n * @param length the length of the Array, minimum 1, default 16\r\n */\r\nfunction createEntropy(engine = nativeMath, length = 16) {\r\n    const array = [];\r\n    array.push(new Date().getTime() | 0);\r\n    for (let i = 1; i < length; ++i) {\r\n        array[i] = engine.next() | 0;\r\n    }\r\n    return array;\r\n}\n\n/**\r\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/imul\r\n */\r\nconst imul = (() => {\r\n    try {\r\n        if (Math.imul(UINT32_MAX, 5) === -5) {\r\n            return Math.imul;\r\n        }\r\n    }\r\n    catch (_) {\r\n        // nothing to do here\r\n    }\r\n    const UINT16_MAX = 0xffff;\r\n    return (a, b) => {\r\n        const ah = (a >>> 16) & UINT16_MAX;\r\n        const al = a & UINT16_MAX;\r\n        const bh = (b >>> 16) & UINT16_MAX;\r\n        const bl = b & UINT16_MAX;\r\n        // the shift by 0 fixes the sign on the high part\r\n        // the final |0 converts the unsigned value into a signed value\r\n        return (al * bl + (((ah * bl + al * bh) << 16) >>> 0)) | 0;\r\n    };\r\n})();\n\nconst ARRAY_SIZE = 624;\r\nconst ARRAY_MAX = ARRAY_SIZE - 1;\r\nconst M = 397;\r\nconst ARRAY_SIZE_MINUS_M = ARRAY_SIZE - M;\r\nconst A = 0x9908b0df;\r\n/**\r\n * An Engine that is a pseudorandom number generator using the Mersenne\r\n * Twister algorithm based on the prime 2**19937 − 1\r\n *\r\n * See http://en.wikipedia.org/wiki/Mersenne_twister\r\n */\r\nclass MersenneTwister19937 {\r\n    /**\r\n     * MersenneTwister19937 should not be instantiated directly.\r\n     * Instead, use the static methods `seed`, `seedWithArray`, or `autoSeed`.\r\n     */\r\n    constructor() {\r\n        this.data = new I32Array(ARRAY_SIZE);\r\n        this.index = 0; // integer within [0, 624]\r\n        this.uses = 0;\r\n    }\r\n    /**\r\n     * Returns a MersenneTwister19937 seeded with an initial int32 value\r\n     * @param initial the initial seed value\r\n     */\r\n    static seed(initial) {\r\n        return new MersenneTwister19937().seed(initial);\r\n    }\r\n    /**\r\n     * Returns a MersenneTwister19937 seeded with zero or more int32 values\r\n     * @param source A series of int32 values\r\n     */\r\n    static seedWithArray(source) {\r\n        return new MersenneTwister19937().seedWithArray(source);\r\n    }\r\n    /**\r\n     * Returns a MersenneTwister19937 seeded with the current time and\r\n     * a series of natively-generated random values\r\n     */\r\n    static autoSeed() {\r\n        return MersenneTwister19937.seedWithArray(createEntropy());\r\n    }\r\n    /**\r\n     * Returns the next int32 value of the sequence\r\n     */\r\n    next() {\r\n        if ((this.index | 0) >= ARRAY_SIZE) {\r\n            refreshData(this.data);\r\n            this.index = 0;\r\n        }\r\n        const value = this.data[this.index];\r\n        this.index = (this.index + 1) | 0;\r\n        this.uses += 1;\r\n        return temper(value) | 0;\r\n    }\r\n    /**\r\n     * Returns the number of times that the Engine has been used.\r\n     *\r\n     * This can be provided to an unused MersenneTwister19937 with the same\r\n     * seed, bringing it to the exact point that was left off.\r\n     */\r\n    getUseCount() {\r\n        return this.uses;\r\n    }\r\n    /**\r\n     * Discards one or more items from the engine\r\n     * @param count The count of items to discard\r\n     */\r\n    discard(count) {\r\n        if (count <= 0) {\r\n            return this;\r\n        }\r\n        this.uses += count;\r\n        if ((this.index | 0) >= ARRAY_SIZE) {\r\n            refreshData(this.data);\r\n            this.index = 0;\r\n        }\r\n        while (count + this.index > ARRAY_SIZE) {\r\n            count -= ARRAY_SIZE - this.index;\r\n            refreshData(this.data);\r\n            this.index = 0;\r\n        }\r\n        this.index = (this.index + count) | 0;\r\n        return this;\r\n    }\r\n    seed(initial) {\r\n        let previous = 0;\r\n        this.data[0] = previous = initial | 0;\r\n        for (let i = 1; i < ARRAY_SIZE; i = (i + 1) | 0) {\r\n            this.data[i] = previous =\r\n                (imul(previous ^ (previous >>> 30), 0x6c078965) + i) | 0;\r\n        }\r\n        this.index = ARRAY_SIZE;\r\n        this.uses = 0;\r\n        return this;\r\n    }\r\n    seedWithArray(source) {\r\n        this.seed(0x012bd6aa);\r\n        seedWithArray(this.data, source);\r\n        return this;\r\n    }\r\n}\r\nfunction refreshData(data) {\r\n    let k = 0;\r\n    let tmp = 0;\r\n    for (; (k | 0) < ARRAY_SIZE_MINUS_M; k = (k + 1) | 0) {\r\n        tmp = (data[k] & INT32_SIZE) | (data[(k + 1) | 0] & INT32_MAX);\r\n        data[k] = data[(k + M) | 0] ^ (tmp >>> 1) ^ (tmp & 0x1 ? A : 0);\r\n    }\r\n    for (; (k | 0) < ARRAY_MAX; k = (k + 1) | 0) {\r\n        tmp = (data[k] & INT32_SIZE) | (data[(k + 1) | 0] & INT32_MAX);\r\n        data[k] =\r\n            data[(k - ARRAY_SIZE_MINUS_M) | 0] ^ (tmp >>> 1) ^ (tmp & 0x1 ? A : 0);\r\n    }\r\n    tmp = (data[ARRAY_MAX] & INT32_SIZE) | (data[0] & INT32_MAX);\r\n    data[ARRAY_MAX] = data[M - 1] ^ (tmp >>> 1) ^ (tmp & 0x1 ? A : 0);\r\n}\r\nfunction temper(value) {\r\n    value ^= value >>> 11;\r\n    value ^= (value << 7) & 0x9d2c5680;\r\n    value ^= (value << 15) & 0xefc60000;\r\n    return value ^ (value >>> 18);\r\n}\r\nfunction seedWithArray(data, source) {\r\n    let i = 1;\r\n    let j = 0;\r\n    const sourceLength = source.length;\r\n    let k = Math.max(sourceLength, ARRAY_SIZE) | 0;\r\n    let previous = data[0] | 0;\r\n    for (; (k | 0) > 0; --k) {\r\n        data[i] = previous =\r\n            ((data[i] ^ imul(previous ^ (previous >>> 30), 0x0019660d)) +\r\n                (source[j] | 0) +\r\n                (j | 0)) |\r\n                0;\r\n        i = (i + 1) | 0;\r\n        ++j;\r\n        if ((i | 0) > ARRAY_MAX) {\r\n            data[0] = data[ARRAY_MAX];\r\n            i = 1;\r\n        }\r\n        if (j >= sourceLength) {\r\n            j = 0;\r\n        }\r\n    }\r\n    for (k = ARRAY_MAX; (k | 0) > 0; --k) {\r\n        data[i] = previous =\r\n            ((data[i] ^ imul(previous ^ (previous >>> 30), 0x5d588b65)) - i) | 0;\r\n        i = (i + 1) | 0;\r\n        if ((i | 0) > ARRAY_MAX) {\r\n            data[0] = data[ARRAY_MAX];\r\n            i = 1;\r\n        }\r\n    }\r\n    data[0] = INT32_SIZE;\r\n}\n\nlet data$1 = null;\r\nconst COUNT$1 = 128;\r\nlet index$1 = COUNT$1;\r\n/**\r\n * An Engine that relies on the node-available\r\n * `require('crypto').randomBytes`, which has been available since 0.58.\r\n *\r\n * See https://nodejs.org/api/crypto.html#crypto_crypto_randombytes_size_callback\r\n *\r\n * If unavailable or otherwise non-functioning, then `nodeCrypto` will\r\n * likely `throw` on the first call to `next()`.\r\n */\r\nconst nodeCrypto = {\r\n    next() {\r\n        if (index$1 >= COUNT$1) {\r\n            data$1 = new Int32Array(new Int8Array(__webpack_require__(/*! crypto */ \"./node_modules/crypto-browserify/index.js\").randomBytes(4 * COUNT$1)).buffer);\r\n            index$1 = 0;\r\n        }\r\n        return data$1[index$1++] | 0;\r\n    }\r\n};\n\n/**\r\n * Returns a Distribution to random value within the provided `source`\r\n * within the sliced bounds of `begin` and `end`.\r\n * @param source an array of items to pick from\r\n * @param begin the beginning slice index (defaults to `0`)\r\n * @param end the ending slice index (defaults to `source.length`)\r\n */\r\nfunction picker(source, begin, end) {\r\n    const clone = sliceArray.call(source, begin, end);\r\n    if (clone.length === 0) {\r\n        throw new RangeError(`Cannot pick from a source with no items`);\r\n    }\r\n    const distribution = integer(0, clone.length - 1);\r\n    return engine => clone[distribution(engine)];\r\n}\n\n\n//# sourceMappingURL=random-js.esm.js.map\n\n\n//# sourceURL=webpack://Game/./node_modules/random-js/dist/random-js.esm.js?");

/***/ }),

/***/ "./node_modules/randombytes/browser.js":
/*!*********************************************!*\
  !*** ./node_modules/randombytes/browser.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global, process) {\n\n// limit of Crypto.getRandomValues()\n// https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues\nvar MAX_BYTES = 65536\n\n// Node supports requesting up to this number of bytes\n// https://github.com/nodejs/node/blob/master/lib/internal/crypto/random.js#L48\nvar MAX_UINT32 = 4294967295\n\nfunction oldBrowser () {\n  throw new Error('Secure random number generation is not supported by this browser.\\nUse Chrome, Firefox or Internet Explorer 11')\n}\n\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\nvar crypto = global.crypto || global.msCrypto\n\nif (crypto && crypto.getRandomValues) {\n  module.exports = randomBytes\n} else {\n  module.exports = oldBrowser\n}\n\nfunction randomBytes (size, cb) {\n  // phantomjs needs to throw\n  if (size > MAX_UINT32) throw new RangeError('requested too many random bytes')\n\n  var bytes = Buffer.allocUnsafe(size)\n\n  if (size > 0) {  // getRandomValues fails on IE if size == 0\n    if (size > MAX_BYTES) { // this is the max bytes crypto.getRandomValues\n      // can do at once see https://developer.mozilla.org/en-US/docs/Web/API/window.crypto.getRandomValues\n      for (var generated = 0; generated < size; generated += MAX_BYTES) {\n        // buffer.slice automatically checks if the end is past the end of\n        // the buffer so we don't have to here\n        crypto.getRandomValues(bytes.slice(generated, generated + MAX_BYTES))\n      }\n    } else {\n      crypto.getRandomValues(bytes)\n    }\n  }\n\n  if (typeof cb === 'function') {\n    return process.nextTick(function () {\n      cb(null, bytes)\n    })\n  }\n\n  return bytes\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! ./../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/randombytes/browser.js?");

/***/ }),

/***/ "./node_modules/randomfill/browser.js":
/*!********************************************!*\
  !*** ./node_modules/randomfill/browser.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global, process) {\n\nfunction oldBrowser () {\n  throw new Error('secure random number generation not supported by this browser\\nuse chrome, FireFox or Internet Explorer 11')\n}\nvar safeBuffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\")\nvar randombytes = __webpack_require__(/*! randombytes */ \"./node_modules/randombytes/browser.js\")\nvar Buffer = safeBuffer.Buffer\nvar kBufferMaxLength = safeBuffer.kMaxLength\nvar crypto = global.crypto || global.msCrypto\nvar kMaxUint32 = Math.pow(2, 32) - 1\nfunction assertOffset (offset, length) {\n  if (typeof offset !== 'number' || offset !== offset) { // eslint-disable-line no-self-compare\n    throw new TypeError('offset must be a number')\n  }\n\n  if (offset > kMaxUint32 || offset < 0) {\n    throw new TypeError('offset must be a uint32')\n  }\n\n  if (offset > kBufferMaxLength || offset > length) {\n    throw new RangeError('offset out of range')\n  }\n}\n\nfunction assertSize (size, offset, length) {\n  if (typeof size !== 'number' || size !== size) { // eslint-disable-line no-self-compare\n    throw new TypeError('size must be a number')\n  }\n\n  if (size > kMaxUint32 || size < 0) {\n    throw new TypeError('size must be a uint32')\n  }\n\n  if (size + offset > length || size > kBufferMaxLength) {\n    throw new RangeError('buffer too small')\n  }\n}\nif ((crypto && crypto.getRandomValues) || !process.browser) {\n  exports.randomFill = randomFill\n  exports.randomFillSync = randomFillSync\n} else {\n  exports.randomFill = oldBrowser\n  exports.randomFillSync = oldBrowser\n}\nfunction randomFill (buf, offset, size, cb) {\n  if (!Buffer.isBuffer(buf) && !(buf instanceof global.Uint8Array)) {\n    throw new TypeError('\"buf\" argument must be a Buffer or Uint8Array')\n  }\n\n  if (typeof offset === 'function') {\n    cb = offset\n    offset = 0\n    size = buf.length\n  } else if (typeof size === 'function') {\n    cb = size\n    size = buf.length - offset\n  } else if (typeof cb !== 'function') {\n    throw new TypeError('\"cb\" argument must be a function')\n  }\n  assertOffset(offset, buf.length)\n  assertSize(size, offset, buf.length)\n  return actualFill(buf, offset, size, cb)\n}\n\nfunction actualFill (buf, offset, size, cb) {\n  if (process.browser) {\n    var ourBuf = buf.buffer\n    var uint = new Uint8Array(ourBuf, offset, size)\n    crypto.getRandomValues(uint)\n    if (cb) {\n      process.nextTick(function () {\n        cb(null, buf)\n      })\n      return\n    }\n    return buf\n  }\n  if (cb) {\n    randombytes(size, function (err, bytes) {\n      if (err) {\n        return cb(err)\n      }\n      bytes.copy(buf, offset)\n      cb(null, buf)\n    })\n    return\n  }\n  var bytes = randombytes(size)\n  bytes.copy(buf, offset)\n  return buf\n}\nfunction randomFillSync (buf, offset, size) {\n  if (typeof offset === 'undefined') {\n    offset = 0\n  }\n  if (!Buffer.isBuffer(buf) && !(buf instanceof global.Uint8Array)) {\n    throw new TypeError('\"buf\" argument must be a Buffer or Uint8Array')\n  }\n\n  assertOffset(offset, buf.length)\n\n  if (size === undefined) size = buf.length - offset\n\n  assertSize(size, offset, buf.length)\n\n  return actualFill(buf, offset, size)\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! ./../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/randomfill/browser.js?");

/***/ }),

/***/ "./node_modules/readable-stream/duplex-browser.js":
/*!********************************************************!*\
  !*** ./node_modules/readable-stream/duplex-browser.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! ./lib/_stream_duplex.js */ \"./node_modules/readable-stream/lib/_stream_duplex.js\");\n\n\n//# sourceURL=webpack://Game/./node_modules/readable-stream/duplex-browser.js?");

/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_duplex.js":
/*!************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_duplex.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n\n\n/*<replacement>*/\n\nvar pna = __webpack_require__(/*! process-nextick-args */ \"./node_modules/process-nextick-args/index.js\");\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = Object.create(__webpack_require__(/*! core-util-is */ \"./node_modules/core-util-is/lib/util.js\"));\nutil.inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n/*</replacement>*/\n\nvar Readable = __webpack_require__(/*! ./_stream_readable */ \"./node_modules/readable-stream/lib/_stream_readable.js\");\nvar Writable = __webpack_require__(/*! ./_stream_writable */ \"./node_modules/readable-stream/lib/_stream_writable.js\");\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};\n\n//# sourceURL=webpack://Game/./node_modules/readable-stream/lib/_stream_duplex.js?");

/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_passthrough.js":
/*!*****************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_passthrough.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n\n\nmodule.exports = PassThrough;\n\nvar Transform = __webpack_require__(/*! ./_stream_transform */ \"./node_modules/readable-stream/lib/_stream_transform.js\");\n\n/*<replacement>*/\nvar util = Object.create(__webpack_require__(/*! core-util-is */ \"./node_modules/core-util-is/lib/util.js\"));\nutil.inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};\n\n//# sourceURL=webpack://Game/./node_modules/readable-stream/lib/_stream_passthrough.js?");

/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_readable.js":
/*!**************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_readable.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global, process) {// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\n/*<replacement>*/\n\nvar pna = __webpack_require__(/*! process-nextick-args */ \"./node_modules/process-nextick-args/index.js\");\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = __webpack_require__(/*! isarray */ \"./node_modules/isarray/index.js\");\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = __webpack_require__(/*! events */ \"./node_modules/events/events.js\").EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = __webpack_require__(/*! ./internal/streams/stream */ \"./node_modules/readable-stream/lib/internal/streams/stream-browser.js\");\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = Object.create(__webpack_require__(/*! core-util-is */ \"./node_modules/core-util-is/lib/util.js\"));\nutil.inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = __webpack_require__(/*! util */ 3);\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = __webpack_require__(/*! ./internal/streams/BufferList */ \"./node_modules/readable-stream/lib/internal/streams/BufferList.js\");\nvar destroyImpl = __webpack_require__(/*! ./internal/streams/destroy */ \"./node_modules/readable-stream/lib/internal/streams/destroy.js\");\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/readable-stream/lib/_stream_duplex.js\");\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = __webpack_require__(/*! string_decoder/ */ \"./node_modules/string_decoder/lib/string_decoder.js\").StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/readable-stream/lib/_stream_duplex.js\");\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = __webpack_require__(/*! string_decoder/ */ \"./node_modules/string_decoder/lib/string_decoder.js\").StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! ./../../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/readable-stream/lib/_stream_readable.js?");

/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_transform.js":
/*!***************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_transform.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n\n\nmodule.exports = Transform;\n\nvar Duplex = __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/readable-stream/lib/_stream_duplex.js\");\n\n/*<replacement>*/\nvar util = Object.create(__webpack_require__(/*! core-util-is */ \"./node_modules/core-util-is/lib/util.js\"));\nutil.inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}\n\n//# sourceURL=webpack://Game/./node_modules/readable-stream/lib/_stream_transform.js?");

/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_writable.js":
/*!**************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_writable.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(process, setImmediate, global) {// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n\n\n/*<replacement>*/\n\nvar pna = __webpack_require__(/*! process-nextick-args */ \"./node_modules/process-nextick-args/index.js\");\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = Object.create(__webpack_require__(/*! core-util-is */ \"./node_modules/core-util-is/lib/util.js\"));\nutil.inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: __webpack_require__(/*! util-deprecate */ \"./node_modules/util-deprecate/browser.js\")\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = __webpack_require__(/*! ./internal/streams/stream */ \"./node_modules/readable-stream/lib/internal/streams/stream-browser.js\");\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = __webpack_require__(/*! ./internal/streams/destroy */ \"./node_modules/readable-stream/lib/internal/streams/destroy.js\");\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/readable-stream/lib/_stream_duplex.js\");\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ \"./node_modules/readable-stream/lib/_stream_duplex.js\");\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../process/browser.js */ \"./node_modules/process/browser.js\"), __webpack_require__(/*! ./../../timers-browserify/main.js */ \"./node_modules/timers-browserify/main.js\").setImmediate, __webpack_require__(/*! ./../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/readable-stream/lib/_stream_writable.js?");

/***/ }),

/***/ "./node_modules/readable-stream/lib/internal/streams/BufferList.js":
/*!*************************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/BufferList.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer;\nvar util = __webpack_require__(/*! util */ 4);\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}\n\n//# sourceURL=webpack://Game/./node_modules/readable-stream/lib/internal/streams/BufferList.js?");

/***/ }),

/***/ "./node_modules/readable-stream/lib/internal/streams/destroy.js":
/*!**********************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/destroy.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/*<replacement>*/\n\nvar pna = __webpack_require__(/*! process-nextick-args */ \"./node_modules/process-nextick-args/index.js\");\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      pna.nextTick(emitErrorNT, this, err);\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      pna.nextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};\n\n//# sourceURL=webpack://Game/./node_modules/readable-stream/lib/internal/streams/destroy.js?");

/***/ }),

/***/ "./node_modules/readable-stream/lib/internal/streams/stream-browser.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/stream-browser.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! events */ \"./node_modules/events/events.js\").EventEmitter;\n\n\n//# sourceURL=webpack://Game/./node_modules/readable-stream/lib/internal/streams/stream-browser.js?");

/***/ }),

/***/ "./node_modules/readable-stream/passthrough.js":
/*!*****************************************************!*\
  !*** ./node_modules/readable-stream/passthrough.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! ./readable */ \"./node_modules/readable-stream/readable-browser.js\").PassThrough\n\n\n//# sourceURL=webpack://Game/./node_modules/readable-stream/passthrough.js?");

/***/ }),

/***/ "./node_modules/readable-stream/readable-browser.js":
/*!**********************************************************!*\
  !*** ./node_modules/readable-stream/readable-browser.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("exports = module.exports = __webpack_require__(/*! ./lib/_stream_readable.js */ \"./node_modules/readable-stream/lib/_stream_readable.js\");\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = __webpack_require__(/*! ./lib/_stream_writable.js */ \"./node_modules/readable-stream/lib/_stream_writable.js\");\nexports.Duplex = __webpack_require__(/*! ./lib/_stream_duplex.js */ \"./node_modules/readable-stream/lib/_stream_duplex.js\");\nexports.Transform = __webpack_require__(/*! ./lib/_stream_transform.js */ \"./node_modules/readable-stream/lib/_stream_transform.js\");\nexports.PassThrough = __webpack_require__(/*! ./lib/_stream_passthrough.js */ \"./node_modules/readable-stream/lib/_stream_passthrough.js\");\n\n\n//# sourceURL=webpack://Game/./node_modules/readable-stream/readable-browser.js?");

/***/ }),

/***/ "./node_modules/readable-stream/transform.js":
/*!***************************************************!*\
  !*** ./node_modules/readable-stream/transform.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! ./readable */ \"./node_modules/readable-stream/readable-browser.js\").Transform\n\n\n//# sourceURL=webpack://Game/./node_modules/readable-stream/transform.js?");

/***/ }),

/***/ "./node_modules/readable-stream/writable-browser.js":
/*!**********************************************************!*\
  !*** ./node_modules/readable-stream/writable-browser.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! ./lib/_stream_writable.js */ \"./node_modules/readable-stream/lib/_stream_writable.js\");\n\n\n//# sourceURL=webpack://Game/./node_modules/readable-stream/writable-browser.js?");

/***/ }),

/***/ "./node_modules/reflect-metadata/Reflect.js":
/*!**************************************************!*\
  !*** ./node_modules/reflect-metadata/Reflect.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(process, global) {/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122 § 4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../process/browser.js */ \"./node_modules/process/browser.js\"), __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/reflect-metadata/Reflect.js?");

/***/ }),

/***/ "./node_modules/ripemd160/index.js":
/*!*****************************************!*\
  !*** ./node_modules/ripemd160/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar Buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\").Buffer\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\nvar HashBase = __webpack_require__(/*! hash-base */ \"./node_modules/hash-base/index.js\")\n\nvar ARRAY16 = new Array(16)\n\nvar zl = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n  7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8,\n  3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12,\n  1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2,\n  4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13\n]\n\nvar zr = [\n  5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12,\n  6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2,\n  15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13,\n  8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14,\n  12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11\n]\n\nvar sl = [\n  11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8,\n  7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12,\n  11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5,\n  11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12,\n  9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6\n]\n\nvar sr = [\n  8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6,\n  9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11,\n  9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5,\n  15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8,\n  8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11\n]\n\nvar hl = [0x00000000, 0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xa953fd4e]\nvar hr = [0x50a28be6, 0x5c4dd124, 0x6d703ef3, 0x7a6d76e9, 0x00000000]\n\nfunction RIPEMD160 () {\n  HashBase.call(this, 64)\n\n  // state\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n  this._e = 0xc3d2e1f0\n}\n\ninherits(RIPEMD160, HashBase)\n\nRIPEMD160.prototype._update = function () {\n  var words = ARRAY16\n  for (var j = 0; j < 16; ++j) words[j] = this._block.readInt32LE(j * 4)\n\n  var al = this._a | 0\n  var bl = this._b | 0\n  var cl = this._c | 0\n  var dl = this._d | 0\n  var el = this._e | 0\n\n  var ar = this._a | 0\n  var br = this._b | 0\n  var cr = this._c | 0\n  var dr = this._d | 0\n  var er = this._e | 0\n\n  // computation\n  for (var i = 0; i < 80; i += 1) {\n    var tl\n    var tr\n    if (i < 16) {\n      tl = fn1(al, bl, cl, dl, el, words[zl[i]], hl[0], sl[i])\n      tr = fn5(ar, br, cr, dr, er, words[zr[i]], hr[0], sr[i])\n    } else if (i < 32) {\n      tl = fn2(al, bl, cl, dl, el, words[zl[i]], hl[1], sl[i])\n      tr = fn4(ar, br, cr, dr, er, words[zr[i]], hr[1], sr[i])\n    } else if (i < 48) {\n      tl = fn3(al, bl, cl, dl, el, words[zl[i]], hl[2], sl[i])\n      tr = fn3(ar, br, cr, dr, er, words[zr[i]], hr[2], sr[i])\n    } else if (i < 64) {\n      tl = fn4(al, bl, cl, dl, el, words[zl[i]], hl[3], sl[i])\n      tr = fn2(ar, br, cr, dr, er, words[zr[i]], hr[3], sr[i])\n    } else { // if (i<80) {\n      tl = fn5(al, bl, cl, dl, el, words[zl[i]], hl[4], sl[i])\n      tr = fn1(ar, br, cr, dr, er, words[zr[i]], hr[4], sr[i])\n    }\n\n    al = el\n    el = dl\n    dl = rotl(cl, 10)\n    cl = bl\n    bl = tl\n\n    ar = er\n    er = dr\n    dr = rotl(cr, 10)\n    cr = br\n    br = tr\n  }\n\n  // update state\n  var t = (this._b + cl + dr) | 0\n  this._b = (this._c + dl + er) | 0\n  this._c = (this._d + el + ar) | 0\n  this._d = (this._e + al + br) | 0\n  this._e = (this._a + bl + cr) | 0\n  this._a = t\n}\n\nRIPEMD160.prototype._digest = function () {\n  // create padding and handle blocks\n  this._block[this._blockOffset++] = 0x80\n  if (this._blockOffset > 56) {\n    this._block.fill(0, this._blockOffset, 64)\n    this._update()\n    this._blockOffset = 0\n  }\n\n  this._block.fill(0, this._blockOffset, 56)\n  this._block.writeUInt32LE(this._length[0], 56)\n  this._block.writeUInt32LE(this._length[1], 60)\n  this._update()\n\n  // produce result\n  var buffer = Buffer.alloc ? Buffer.alloc(20) : new Buffer(20)\n  buffer.writeInt32LE(this._a, 0)\n  buffer.writeInt32LE(this._b, 4)\n  buffer.writeInt32LE(this._c, 8)\n  buffer.writeInt32LE(this._d, 12)\n  buffer.writeInt32LE(this._e, 16)\n  return buffer\n}\n\nfunction rotl (x, n) {\n  return (x << n) | (x >>> (32 - n))\n}\n\nfunction fn1 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + (b ^ c ^ d) + m + k) | 0, s) + e) | 0\n}\n\nfunction fn2 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + ((b & c) | ((~b) & d)) + m + k) | 0, s) + e) | 0\n}\n\nfunction fn3 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + ((b | (~c)) ^ d) + m + k) | 0, s) + e) | 0\n}\n\nfunction fn4 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + ((b & d) | (c & (~d))) + m + k) | 0, s) + e) | 0\n}\n\nfunction fn5 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + (b ^ (c | (~d))) + m + k) | 0, s) + e) | 0\n}\n\nmodule.exports = RIPEMD160\n\n\n//# sourceURL=webpack://Game/./node_modules/ripemd160/index.js?");

/***/ }),

/***/ "./node_modules/safe-buffer/index.js":
/*!*******************************************!*\
  !*** ./node_modules/safe-buffer/index.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* eslint-disable node/no-deprecated-api */\r\nvar buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\")\r\nvar Buffer = buffer.Buffer\r\n\r\n// alternative to using Object.keys for old browsers\r\nfunction copyProps (src, dst) {\r\n  for (var key in src) {\r\n    dst[key] = src[key]\r\n  }\r\n}\r\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\r\n  module.exports = buffer\r\n} else {\r\n  // Copy properties from require('buffer')\r\n  copyProps(buffer, exports)\r\n  exports.Buffer = SafeBuffer\r\n}\r\n\r\nfunction SafeBuffer (arg, encodingOrOffset, length) {\r\n  return Buffer(arg, encodingOrOffset, length)\r\n}\r\n\r\n// Copy static methods from Buffer\r\ncopyProps(Buffer, SafeBuffer)\r\n\r\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\r\n  if (typeof arg === 'number') {\r\n    throw new TypeError('Argument must not be a number')\r\n  }\r\n  return Buffer(arg, encodingOrOffset, length)\r\n}\r\n\r\nSafeBuffer.alloc = function (size, fill, encoding) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  var buf = Buffer(size)\r\n  if (fill !== undefined) {\r\n    if (typeof encoding === 'string') {\r\n      buf.fill(fill, encoding)\r\n    } else {\r\n      buf.fill(fill)\r\n    }\r\n  } else {\r\n    buf.fill(0)\r\n  }\r\n  return buf\r\n}\r\n\r\nSafeBuffer.allocUnsafe = function (size) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  return Buffer(size)\r\n}\r\n\r\nSafeBuffer.allocUnsafeSlow = function (size) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  return buffer.SlowBuffer(size)\r\n}\r\n\n\n//# sourceURL=webpack://Game/./node_modules/safe-buffer/index.js?");

/***/ }),

/***/ "./node_modules/safer-buffer/safer.js":
/*!********************************************!*\
  !*** ./node_modules/safer-buffer/safer.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(process) {/* eslint-disable node/no-deprecated-api */\n\n\n\nvar buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\")\nvar Buffer = buffer.Buffer\n\nvar safer = {}\n\nvar key\n\nfor (key in buffer) {\n  if (!buffer.hasOwnProperty(key)) continue\n  if (key === 'SlowBuffer' || key === 'Buffer') continue\n  safer[key] = buffer[key]\n}\n\nvar Safer = safer.Buffer = {}\nfor (key in Buffer) {\n  if (!Buffer.hasOwnProperty(key)) continue\n  if (key === 'allocUnsafe' || key === 'allocUnsafeSlow') continue\n  Safer[key] = Buffer[key]\n}\n\nsafer.Buffer.prototype = Buffer.prototype\n\nif (!Safer.from || Safer.from === Uint8Array.from) {\n  Safer.from = function (value, encodingOrOffset, length) {\n    if (typeof value === 'number') {\n      throw new TypeError('The \"value\" argument must not be of type number. Received type ' + typeof value)\n    }\n    if (value && typeof value.length === 'undefined') {\n      throw new TypeError('The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type ' + typeof value)\n    }\n    return Buffer(value, encodingOrOffset, length)\n  }\n}\n\nif (!Safer.alloc) {\n  Safer.alloc = function (size, fill, encoding) {\n    if (typeof size !== 'number') {\n      throw new TypeError('The \"size\" argument must be of type number. Received type ' + typeof size)\n    }\n    if (size < 0 || size >= 2 * (1 << 30)) {\n      throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n    }\n    var buf = Buffer(size)\n    if (!fill || fill.length === 0) {\n      buf.fill(0)\n    } else if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n    return buf\n  }\n}\n\nif (!safer.kStringMaxLength) {\n  try {\n    safer.kStringMaxLength = process.binding('buffer').kStringMaxLength\n  } catch (e) {\n    // we can't determine kStringMaxLength in environments where process.binding\n    // is unsupported, so let's not set it\n  }\n}\n\nif (!safer.constants) {\n  safer.constants = {\n    MAX_LENGTH: safer.kMaxLength\n  }\n  if (safer.kStringMaxLength) {\n    safer.constants.MAX_STRING_LENGTH = safer.kStringMaxLength\n  }\n}\n\nmodule.exports = safer\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/safer-buffer/safer.js?");

/***/ }),

/***/ "./node_modules/setimmediate/setImmediate.js":
/*!***************************************************!*\
  !*** ./node_modules/setimmediate/setImmediate.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\"), __webpack_require__(/*! ./../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/setimmediate/setImmediate.js?");

/***/ }),

/***/ "./node_modules/sha.js/hash.js":
/*!*************************************!*\
  !*** ./node_modules/sha.js/hash.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\n// prototype class for hash functions\nfunction Hash (blockSize, finalSize) {\n  this._block = Buffer.alloc(blockSize)\n  this._finalSize = finalSize\n  this._blockSize = blockSize\n  this._len = 0\n}\n\nHash.prototype.update = function (data, enc) {\n  if (typeof data === 'string') {\n    enc = enc || 'utf8'\n    data = Buffer.from(data, enc)\n  }\n\n  var block = this._block\n  var blockSize = this._blockSize\n  var length = data.length\n  var accum = this._len\n\n  for (var offset = 0; offset < length;) {\n    var assigned = accum % blockSize\n    var remainder = Math.min(length - offset, blockSize - assigned)\n\n    for (var i = 0; i < remainder; i++) {\n      block[assigned + i] = data[offset + i]\n    }\n\n    accum += remainder\n    offset += remainder\n\n    if ((accum % blockSize) === 0) {\n      this._update(block)\n    }\n  }\n\n  this._len += length\n  return this\n}\n\nHash.prototype.digest = function (enc) {\n  var rem = this._len % this._blockSize\n\n  this._block[rem] = 0x80\n\n  // zero (rem + 1) trailing bits, where (rem + 1) is the smallest\n  // non-negative solution to the equation (length + 1 + (rem + 1)) === finalSize mod blockSize\n  this._block.fill(0, rem + 1)\n\n  if (rem >= this._finalSize) {\n    this._update(this._block)\n    this._block.fill(0)\n  }\n\n  var bits = this._len * 8\n\n  // uint32\n  if (bits <= 0xffffffff) {\n    this._block.writeUInt32BE(bits, this._blockSize - 4)\n\n  // uint64\n  } else {\n    var lowBits = (bits & 0xffffffff) >>> 0\n    var highBits = (bits - lowBits) / 0x100000000\n\n    this._block.writeUInt32BE(highBits, this._blockSize - 8)\n    this._block.writeUInt32BE(lowBits, this._blockSize - 4)\n  }\n\n  this._update(this._block)\n  var hash = this._hash()\n\n  return enc ? hash.toString(enc) : hash\n}\n\nHash.prototype._update = function () {\n  throw new Error('_update must be implemented by subclass')\n}\n\nmodule.exports = Hash\n\n\n//# sourceURL=webpack://Game/./node_modules/sha.js/hash.js?");

/***/ }),

/***/ "./node_modules/sha.js/index.js":
/*!**************************************!*\
  !*** ./node_modules/sha.js/index.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var exports = module.exports = function SHA (algorithm) {\n  algorithm = algorithm.toLowerCase()\n\n  var Algorithm = exports[algorithm]\n  if (!Algorithm) throw new Error(algorithm + ' is not supported (we accept pull requests)')\n\n  return new Algorithm()\n}\n\nexports.sha = __webpack_require__(/*! ./sha */ \"./node_modules/sha.js/sha.js\")\nexports.sha1 = __webpack_require__(/*! ./sha1 */ \"./node_modules/sha.js/sha1.js\")\nexports.sha224 = __webpack_require__(/*! ./sha224 */ \"./node_modules/sha.js/sha224.js\")\nexports.sha256 = __webpack_require__(/*! ./sha256 */ \"./node_modules/sha.js/sha256.js\")\nexports.sha384 = __webpack_require__(/*! ./sha384 */ \"./node_modules/sha.js/sha384.js\")\nexports.sha512 = __webpack_require__(/*! ./sha512 */ \"./node_modules/sha.js/sha512.js\")\n\n\n//# sourceURL=webpack://Game/./node_modules/sha.js/index.js?");

/***/ }),

/***/ "./node_modules/sha.js/sha.js":
/*!************************************!*\
  !*** ./node_modules/sha.js/sha.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-0, as defined\n * in FIPS PUB 180-1\n * This source code is derived from sha1.js of the same repository.\n * The difference between SHA-0 and SHA-1 is just a bitwise rotate left\n * operation was added.\n */\n\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\nvar Hash = __webpack_require__(/*! ./hash */ \"./node_modules/sha.js/hash.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nvar K = [\n  0x5a827999, 0x6ed9eba1, 0x8f1bbcdc | 0, 0xca62c1d6 | 0\n]\n\nvar W = new Array(80)\n\nfunction Sha () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha, Hash)\n\nSha.prototype.init = function () {\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n  this._e = 0xc3d2e1f0\n\n  return this\n}\n\nfunction rotl5 (num) {\n  return (num << 5) | (num >>> 27)\n}\n\nfunction rotl30 (num) {\n  return (num << 30) | (num >>> 2)\n}\n\nfunction ft (s, b, c, d) {\n  if (s === 0) return (b & c) | ((~b) & d)\n  if (s === 2) return (b & c) | (b & d) | (c & d)\n  return b ^ c ^ d\n}\n\nSha.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 80; ++i) W[i] = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16]\n\n  for (var j = 0; j < 80; ++j) {\n    var s = ~~(j / 20)\n    var t = (rotl5(a) + ft(s, b, c, d) + e + W[j] + K[s]) | 0\n\n    e = d\n    d = c\n    c = rotl30(b)\n    b = a\n    a = t\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n}\n\nSha.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(20)\n\n  H.writeInt32BE(this._a | 0, 0)\n  H.writeInt32BE(this._b | 0, 4)\n  H.writeInt32BE(this._c | 0, 8)\n  H.writeInt32BE(this._d | 0, 12)\n  H.writeInt32BE(this._e | 0, 16)\n\n  return H\n}\n\nmodule.exports = Sha\n\n\n//# sourceURL=webpack://Game/./node_modules/sha.js/sha.js?");

/***/ }),

/***/ "./node_modules/sha.js/sha1.js":
/*!*************************************!*\
  !*** ./node_modules/sha.js/sha1.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n * in FIPS PUB 180-1\n * Version 2.1a Copyright Paul Johnston 2000 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for details.\n */\n\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\nvar Hash = __webpack_require__(/*! ./hash */ \"./node_modules/sha.js/hash.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nvar K = [\n  0x5a827999, 0x6ed9eba1, 0x8f1bbcdc | 0, 0xca62c1d6 | 0\n]\n\nvar W = new Array(80)\n\nfunction Sha1 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha1, Hash)\n\nSha1.prototype.init = function () {\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n  this._e = 0xc3d2e1f0\n\n  return this\n}\n\nfunction rotl1 (num) {\n  return (num << 1) | (num >>> 31)\n}\n\nfunction rotl5 (num) {\n  return (num << 5) | (num >>> 27)\n}\n\nfunction rotl30 (num) {\n  return (num << 30) | (num >>> 2)\n}\n\nfunction ft (s, b, c, d) {\n  if (s === 0) return (b & c) | ((~b) & d)\n  if (s === 2) return (b & c) | (b & d) | (c & d)\n  return b ^ c ^ d\n}\n\nSha1.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 80; ++i) W[i] = rotl1(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16])\n\n  for (var j = 0; j < 80; ++j) {\n    var s = ~~(j / 20)\n    var t = (rotl5(a) + ft(s, b, c, d) + e + W[j] + K[s]) | 0\n\n    e = d\n    d = c\n    c = rotl30(b)\n    b = a\n    a = t\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n}\n\nSha1.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(20)\n\n  H.writeInt32BE(this._a | 0, 0)\n  H.writeInt32BE(this._b | 0, 4)\n  H.writeInt32BE(this._c | 0, 8)\n  H.writeInt32BE(this._d | 0, 12)\n  H.writeInt32BE(this._e | 0, 16)\n\n  return H\n}\n\nmodule.exports = Sha1\n\n\n//# sourceURL=webpack://Game/./node_modules/sha.js/sha1.js?");

/***/ }),

/***/ "./node_modules/sha.js/sha224.js":
/*!***************************************!*\
  !*** ./node_modules/sha.js/sha224.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined\n * in FIPS 180-2\n * Version 2.2-beta Copyright Angel Marin, Paul Johnston 2000 - 2009.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n *\n */\n\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\nvar Sha256 = __webpack_require__(/*! ./sha256 */ \"./node_modules/sha.js/sha256.js\")\nvar Hash = __webpack_require__(/*! ./hash */ \"./node_modules/sha.js/hash.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nvar W = new Array(64)\n\nfunction Sha224 () {\n  this.init()\n\n  this._w = W // new Array(64)\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha224, Sha256)\n\nSha224.prototype.init = function () {\n  this._a = 0xc1059ed8\n  this._b = 0x367cd507\n  this._c = 0x3070dd17\n  this._d = 0xf70e5939\n  this._e = 0xffc00b31\n  this._f = 0x68581511\n  this._g = 0x64f98fa7\n  this._h = 0xbefa4fa4\n\n  return this\n}\n\nSha224.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(28)\n\n  H.writeInt32BE(this._a, 0)\n  H.writeInt32BE(this._b, 4)\n  H.writeInt32BE(this._c, 8)\n  H.writeInt32BE(this._d, 12)\n  H.writeInt32BE(this._e, 16)\n  H.writeInt32BE(this._f, 20)\n  H.writeInt32BE(this._g, 24)\n\n  return H\n}\n\nmodule.exports = Sha224\n\n\n//# sourceURL=webpack://Game/./node_modules/sha.js/sha224.js?");

/***/ }),

/***/ "./node_modules/sha.js/sha256.js":
/*!***************************************!*\
  !*** ./node_modules/sha.js/sha256.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined\n * in FIPS 180-2\n * Version 2.2-beta Copyright Angel Marin, Paul Johnston 2000 - 2009.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n *\n */\n\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\nvar Hash = __webpack_require__(/*! ./hash */ \"./node_modules/sha.js/hash.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nvar K = [\n  0x428A2F98, 0x71374491, 0xB5C0FBCF, 0xE9B5DBA5,\n  0x3956C25B, 0x59F111F1, 0x923F82A4, 0xAB1C5ED5,\n  0xD807AA98, 0x12835B01, 0x243185BE, 0x550C7DC3,\n  0x72BE5D74, 0x80DEB1FE, 0x9BDC06A7, 0xC19BF174,\n  0xE49B69C1, 0xEFBE4786, 0x0FC19DC6, 0x240CA1CC,\n  0x2DE92C6F, 0x4A7484AA, 0x5CB0A9DC, 0x76F988DA,\n  0x983E5152, 0xA831C66D, 0xB00327C8, 0xBF597FC7,\n  0xC6E00BF3, 0xD5A79147, 0x06CA6351, 0x14292967,\n  0x27B70A85, 0x2E1B2138, 0x4D2C6DFC, 0x53380D13,\n  0x650A7354, 0x766A0ABB, 0x81C2C92E, 0x92722C85,\n  0xA2BFE8A1, 0xA81A664B, 0xC24B8B70, 0xC76C51A3,\n  0xD192E819, 0xD6990624, 0xF40E3585, 0x106AA070,\n  0x19A4C116, 0x1E376C08, 0x2748774C, 0x34B0BCB5,\n  0x391C0CB3, 0x4ED8AA4A, 0x5B9CCA4F, 0x682E6FF3,\n  0x748F82EE, 0x78A5636F, 0x84C87814, 0x8CC70208,\n  0x90BEFFFA, 0xA4506CEB, 0xBEF9A3F7, 0xC67178F2\n]\n\nvar W = new Array(64)\n\nfunction Sha256 () {\n  this.init()\n\n  this._w = W // new Array(64)\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha256, Hash)\n\nSha256.prototype.init = function () {\n  this._a = 0x6a09e667\n  this._b = 0xbb67ae85\n  this._c = 0x3c6ef372\n  this._d = 0xa54ff53a\n  this._e = 0x510e527f\n  this._f = 0x9b05688c\n  this._g = 0x1f83d9ab\n  this._h = 0x5be0cd19\n\n  return this\n}\n\nfunction ch (x, y, z) {\n  return z ^ (x & (y ^ z))\n}\n\nfunction maj (x, y, z) {\n  return (x & y) | (z & (x | y))\n}\n\nfunction sigma0 (x) {\n  return (x >>> 2 | x << 30) ^ (x >>> 13 | x << 19) ^ (x >>> 22 | x << 10)\n}\n\nfunction sigma1 (x) {\n  return (x >>> 6 | x << 26) ^ (x >>> 11 | x << 21) ^ (x >>> 25 | x << 7)\n}\n\nfunction gamma0 (x) {\n  return (x >>> 7 | x << 25) ^ (x >>> 18 | x << 14) ^ (x >>> 3)\n}\n\nfunction gamma1 (x) {\n  return (x >>> 17 | x << 15) ^ (x >>> 19 | x << 13) ^ (x >>> 10)\n}\n\nSha256.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n  var f = this._f | 0\n  var g = this._g | 0\n  var h = this._h | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 64; ++i) W[i] = (gamma1(W[i - 2]) + W[i - 7] + gamma0(W[i - 15]) + W[i - 16]) | 0\n\n  for (var j = 0; j < 64; ++j) {\n    var T1 = (h + sigma1(e) + ch(e, f, g) + K[j] + W[j]) | 0\n    var T2 = (sigma0(a) + maj(a, b, c)) | 0\n\n    h = g\n    g = f\n    f = e\n    e = (d + T1) | 0\n    d = c\n    c = b\n    b = a\n    a = (T1 + T2) | 0\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n  this._f = (f + this._f) | 0\n  this._g = (g + this._g) | 0\n  this._h = (h + this._h) | 0\n}\n\nSha256.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(32)\n\n  H.writeInt32BE(this._a, 0)\n  H.writeInt32BE(this._b, 4)\n  H.writeInt32BE(this._c, 8)\n  H.writeInt32BE(this._d, 12)\n  H.writeInt32BE(this._e, 16)\n  H.writeInt32BE(this._f, 20)\n  H.writeInt32BE(this._g, 24)\n  H.writeInt32BE(this._h, 28)\n\n  return H\n}\n\nmodule.exports = Sha256\n\n\n//# sourceURL=webpack://Game/./node_modules/sha.js/sha256.js?");

/***/ }),

/***/ "./node_modules/sha.js/sha384.js":
/*!***************************************!*\
  !*** ./node_modules/sha.js/sha384.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\nvar SHA512 = __webpack_require__(/*! ./sha512 */ \"./node_modules/sha.js/sha512.js\")\nvar Hash = __webpack_require__(/*! ./hash */ \"./node_modules/sha.js/hash.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nvar W = new Array(160)\n\nfunction Sha384 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 128, 112)\n}\n\ninherits(Sha384, SHA512)\n\nSha384.prototype.init = function () {\n  this._ah = 0xcbbb9d5d\n  this._bh = 0x629a292a\n  this._ch = 0x9159015a\n  this._dh = 0x152fecd8\n  this._eh = 0x67332667\n  this._fh = 0x8eb44a87\n  this._gh = 0xdb0c2e0d\n  this._hh = 0x47b5481d\n\n  this._al = 0xc1059ed8\n  this._bl = 0x367cd507\n  this._cl = 0x3070dd17\n  this._dl = 0xf70e5939\n  this._el = 0xffc00b31\n  this._fl = 0x68581511\n  this._gl = 0x64f98fa7\n  this._hl = 0xbefa4fa4\n\n  return this\n}\n\nSha384.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(48)\n\n  function writeInt64BE (h, l, offset) {\n    H.writeInt32BE(h, offset)\n    H.writeInt32BE(l, offset + 4)\n  }\n\n  writeInt64BE(this._ah, this._al, 0)\n  writeInt64BE(this._bh, this._bl, 8)\n  writeInt64BE(this._ch, this._cl, 16)\n  writeInt64BE(this._dh, this._dl, 24)\n  writeInt64BE(this._eh, this._el, 32)\n  writeInt64BE(this._fh, this._fl, 40)\n\n  return H\n}\n\nmodule.exports = Sha384\n\n\n//# sourceURL=webpack://Game/./node_modules/sha.js/sha384.js?");

/***/ }),

/***/ "./node_modules/sha.js/sha512.js":
/*!***************************************!*\
  !*** ./node_modules/sha.js/sha512.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\")\nvar Hash = __webpack_require__(/*! ./hash */ \"./node_modules/sha.js/hash.js\")\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer\n\nvar K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n]\n\nvar W = new Array(160)\n\nfunction Sha512 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 128, 112)\n}\n\ninherits(Sha512, Hash)\n\nSha512.prototype.init = function () {\n  this._ah = 0x6a09e667\n  this._bh = 0xbb67ae85\n  this._ch = 0x3c6ef372\n  this._dh = 0xa54ff53a\n  this._eh = 0x510e527f\n  this._fh = 0x9b05688c\n  this._gh = 0x1f83d9ab\n  this._hh = 0x5be0cd19\n\n  this._al = 0xf3bcc908\n  this._bl = 0x84caa73b\n  this._cl = 0xfe94f82b\n  this._dl = 0x5f1d36f1\n  this._el = 0xade682d1\n  this._fl = 0x2b3e6c1f\n  this._gl = 0xfb41bd6b\n  this._hl = 0x137e2179\n\n  return this\n}\n\nfunction Ch (x, y, z) {\n  return z ^ (x & (y ^ z))\n}\n\nfunction maj (x, y, z) {\n  return (x & y) | (z & (x | y))\n}\n\nfunction sigma0 (x, xl) {\n  return (x >>> 28 | xl << 4) ^ (xl >>> 2 | x << 30) ^ (xl >>> 7 | x << 25)\n}\n\nfunction sigma1 (x, xl) {\n  return (x >>> 14 | xl << 18) ^ (x >>> 18 | xl << 14) ^ (xl >>> 9 | x << 23)\n}\n\nfunction Gamma0 (x, xl) {\n  return (x >>> 1 | xl << 31) ^ (x >>> 8 | xl << 24) ^ (x >>> 7)\n}\n\nfunction Gamma0l (x, xl) {\n  return (x >>> 1 | xl << 31) ^ (x >>> 8 | xl << 24) ^ (x >>> 7 | xl << 25)\n}\n\nfunction Gamma1 (x, xl) {\n  return (x >>> 19 | xl << 13) ^ (xl >>> 29 | x << 3) ^ (x >>> 6)\n}\n\nfunction Gamma1l (x, xl) {\n  return (x >>> 19 | xl << 13) ^ (xl >>> 29 | x << 3) ^ (x >>> 6 | xl << 26)\n}\n\nfunction getCarry (a, b) {\n  return (a >>> 0) < (b >>> 0) ? 1 : 0\n}\n\nSha512.prototype._update = function (M) {\n  var W = this._w\n\n  var ah = this._ah | 0\n  var bh = this._bh | 0\n  var ch = this._ch | 0\n  var dh = this._dh | 0\n  var eh = this._eh | 0\n  var fh = this._fh | 0\n  var gh = this._gh | 0\n  var hh = this._hh | 0\n\n  var al = this._al | 0\n  var bl = this._bl | 0\n  var cl = this._cl | 0\n  var dl = this._dl | 0\n  var el = this._el | 0\n  var fl = this._fl | 0\n  var gl = this._gl | 0\n  var hl = this._hl | 0\n\n  for (var i = 0; i < 32; i += 2) {\n    W[i] = M.readInt32BE(i * 4)\n    W[i + 1] = M.readInt32BE(i * 4 + 4)\n  }\n  for (; i < 160; i += 2) {\n    var xh = W[i - 15 * 2]\n    var xl = W[i - 15 * 2 + 1]\n    var gamma0 = Gamma0(xh, xl)\n    var gamma0l = Gamma0l(xl, xh)\n\n    xh = W[i - 2 * 2]\n    xl = W[i - 2 * 2 + 1]\n    var gamma1 = Gamma1(xh, xl)\n    var gamma1l = Gamma1l(xl, xh)\n\n    // W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16]\n    var Wi7h = W[i - 7 * 2]\n    var Wi7l = W[i - 7 * 2 + 1]\n\n    var Wi16h = W[i - 16 * 2]\n    var Wi16l = W[i - 16 * 2 + 1]\n\n    var Wil = (gamma0l + Wi7l) | 0\n    var Wih = (gamma0 + Wi7h + getCarry(Wil, gamma0l)) | 0\n    Wil = (Wil + gamma1l) | 0\n    Wih = (Wih + gamma1 + getCarry(Wil, gamma1l)) | 0\n    Wil = (Wil + Wi16l) | 0\n    Wih = (Wih + Wi16h + getCarry(Wil, Wi16l)) | 0\n\n    W[i] = Wih\n    W[i + 1] = Wil\n  }\n\n  for (var j = 0; j < 160; j += 2) {\n    Wih = W[j]\n    Wil = W[j + 1]\n\n    var majh = maj(ah, bh, ch)\n    var majl = maj(al, bl, cl)\n\n    var sigma0h = sigma0(ah, al)\n    var sigma0l = sigma0(al, ah)\n    var sigma1h = sigma1(eh, el)\n    var sigma1l = sigma1(el, eh)\n\n    // t1 = h + sigma1 + ch + K[j] + W[j]\n    var Kih = K[j]\n    var Kil = K[j + 1]\n\n    var chh = Ch(eh, fh, gh)\n    var chl = Ch(el, fl, gl)\n\n    var t1l = (hl + sigma1l) | 0\n    var t1h = (hh + sigma1h + getCarry(t1l, hl)) | 0\n    t1l = (t1l + chl) | 0\n    t1h = (t1h + chh + getCarry(t1l, chl)) | 0\n    t1l = (t1l + Kil) | 0\n    t1h = (t1h + Kih + getCarry(t1l, Kil)) | 0\n    t1l = (t1l + Wil) | 0\n    t1h = (t1h + Wih + getCarry(t1l, Wil)) | 0\n\n    // t2 = sigma0 + maj\n    var t2l = (sigma0l + majl) | 0\n    var t2h = (sigma0h + majh + getCarry(t2l, sigma0l)) | 0\n\n    hh = gh\n    hl = gl\n    gh = fh\n    gl = fl\n    fh = eh\n    fl = el\n    el = (dl + t1l) | 0\n    eh = (dh + t1h + getCarry(el, dl)) | 0\n    dh = ch\n    dl = cl\n    ch = bh\n    cl = bl\n    bh = ah\n    bl = al\n    al = (t1l + t2l) | 0\n    ah = (t1h + t2h + getCarry(al, t1l)) | 0\n  }\n\n  this._al = (this._al + al) | 0\n  this._bl = (this._bl + bl) | 0\n  this._cl = (this._cl + cl) | 0\n  this._dl = (this._dl + dl) | 0\n  this._el = (this._el + el) | 0\n  this._fl = (this._fl + fl) | 0\n  this._gl = (this._gl + gl) | 0\n  this._hl = (this._hl + hl) | 0\n\n  this._ah = (this._ah + ah + getCarry(this._al, al)) | 0\n  this._bh = (this._bh + bh + getCarry(this._bl, bl)) | 0\n  this._ch = (this._ch + ch + getCarry(this._cl, cl)) | 0\n  this._dh = (this._dh + dh + getCarry(this._dl, dl)) | 0\n  this._eh = (this._eh + eh + getCarry(this._el, el)) | 0\n  this._fh = (this._fh + fh + getCarry(this._fl, fl)) | 0\n  this._gh = (this._gh + gh + getCarry(this._gl, gl)) | 0\n  this._hh = (this._hh + hh + getCarry(this._hl, hl)) | 0\n}\n\nSha512.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(64)\n\n  function writeInt64BE (h, l, offset) {\n    H.writeInt32BE(h, offset)\n    H.writeInt32BE(l, offset + 4)\n  }\n\n  writeInt64BE(this._ah, this._al, 0)\n  writeInt64BE(this._bh, this._bl, 8)\n  writeInt64BE(this._ch, this._cl, 16)\n  writeInt64BE(this._dh, this._dl, 24)\n  writeInt64BE(this._eh, this._el, 32)\n  writeInt64BE(this._fh, this._fl, 40)\n  writeInt64BE(this._gh, this._gl, 48)\n  writeInt64BE(this._hh, this._hl, 56)\n\n  return H\n}\n\nmodule.exports = Sha512\n\n\n//# sourceURL=webpack://Game/./node_modules/sha.js/sha512.js?");

/***/ }),

/***/ "./node_modules/stream-browserify/index.js":
/*!*************************************************!*\
  !*** ./node_modules/stream-browserify/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Stream;\n\nvar EE = __webpack_require__(/*! events */ \"./node_modules/events/events.js\").EventEmitter;\nvar inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n\ninherits(Stream, EE);\nStream.Readable = __webpack_require__(/*! readable-stream/readable.js */ \"./node_modules/readable-stream/readable-browser.js\");\nStream.Writable = __webpack_require__(/*! readable-stream/writable.js */ \"./node_modules/readable-stream/writable-browser.js\");\nStream.Duplex = __webpack_require__(/*! readable-stream/duplex.js */ \"./node_modules/readable-stream/duplex-browser.js\");\nStream.Transform = __webpack_require__(/*! readable-stream/transform.js */ \"./node_modules/readable-stream/transform.js\");\nStream.PassThrough = __webpack_require__(/*! readable-stream/passthrough.js */ \"./node_modules/readable-stream/passthrough.js\");\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\n\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n\n\n//# sourceURL=webpack://Game/./node_modules/stream-browserify/index.js?");

/***/ }),

/***/ "./node_modules/string_decoder/lib/string_decoder.js":
/*!***********************************************************!*\
  !*** ./node_modules/string_decoder/lib/string_decoder.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\n/*<replacement>*/\n\nvar Buffer = __webpack_require__(/*! safe-buffer */ \"./node_modules/safe-buffer/index.js\").Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}\n\n//# sourceURL=webpack://Game/./node_modules/string_decoder/lib/string_decoder.js?");

/***/ }),

/***/ "./node_modules/timers-browserify/main.js":
/*!************************************************!*\
  !*** ./node_modules/timers-browserify/main.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\n__webpack_require__(/*! setimmediate */ \"./node_modules/setimmediate/setImmediate.js\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/timers-browserify/main.js?");

/***/ }),

/***/ "./node_modules/util-deprecate/browser.js":
/*!************************************************!*\
  !*** ./node_modules/util-deprecate/browser.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n//# sourceURL=webpack://Game/./node_modules/util-deprecate/browser.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n//# sourceURL=webpack://Game/(webpack)/buildin/global.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/module.js":
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n//# sourceURL=webpack://Game/(webpack)/buildin/module.js?");

/***/ }),

/***/ "./src/content/content.ts":
/*!********************************!*\
  !*** ./src/content/content.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OnContentInitiatedOrGameLoaded = exports.SetupUIForScrolling = exports.InitContent = exports.ViewID = exports.SystemData = exports.Content = exports.Managers = exports.ModuleManager = exports.TimerStorage = exports.UIStorage = exports.ContentStorage = exports.RNG = void 0;\r\nvar viewManager_1 = __webpack_require__(/*! ../game/managers/viewManager */ \"./src/game/managers/viewManager.ts\");\r\nvar fightManager_1 = __webpack_require__(/*! ../game/managers/fightManager */ \"./src/game/managers/fightManager.ts\");\r\nvar objectStorage_1 = __webpack_require__(/*! ../data/objectStorage */ \"./src/data/objectStorage.ts\");\r\nvar vector2_1 = __webpack_require__(/*! ../data/vector2 */ \"./src/data/vector2.ts\");\r\nvar random_js_1 = __webpack_require__(/*! random-js */ \"./node_modules/random-js/dist/random-js.esm.js\");\r\nvar game_1 = __webpack_require__(/*! ../game */ \"./src/game.ts\");\r\nvar contentManager_1 = __webpack_require__(/*! ./contentManager */ \"./src/content/contentManager.ts\");\r\nvar scrollbar_1 = __webpack_require__(/*! ../../javascript/construct3/c3ObjectUtils/gameUI/scrollbar */ \"./javascript/construct3/c3ObjectUtils/gameUI/scrollbar.ts\");\r\nvar utilsGUI_1 = __webpack_require__(/*! ../../javascript/construct3/c3ObjectUtils/utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar overlay_1 = __webpack_require__(/*! ../../javascript/construct3/c3ObjectUtils/gameUI/overlay */ \"./javascript/construct3/c3ObjectUtils/gameUI/overlay.ts\");\r\nvar main_1 = __webpack_require__(/*! ../../javascript/construct3/main */ \"./javascript/construct3/main.js\");\r\nvar view_1 = __webpack_require__(/*! ../../javascript/construct3/c3ObjectUtils/gameUI/view */ \"./javascript/construct3/c3ObjectUtils/gameUI/view.ts\");\r\nvar buildManager_1 = __webpack_require__(/*! ../game/managers/buildManager */ \"./src/game/managers/buildManager.ts\");\r\nvar overlayMessage_1 = __webpack_require__(/*! ../ui/overlayMessage */ \"./src/ui/overlayMessage.ts\");\r\nvar utilsMath_1 = __webpack_require__(/*! ../utils/utilsMath */ \"./src/utils/utilsMath.ts\");\r\nvar kongregate_1 = __webpack_require__(/*! ../../javascript/kongregate/kongregate */ \"./javascript/kongregate/kongregate.ts\");\r\n// System content info\r\n//todo type\r\nexports.SystemData = {\r\n    IsContentLoaded: false,\r\n    IsThemesInitiated: false,\r\n    IsAutoSaveEnabledC3: false,\r\n    IsGameCrashed: false,\r\n    /* About: If there is some overlay, all  */\r\n    IsShowingOverlay: false,\r\n    CurrentOverlay: {\r\n        Theme: \"\",\r\n        InputTheme: \"\" //OverlayMessageButton\r\n    },\r\n    Settings: {\r\n        ShowNotifications: true,\r\n        ShowMonsterAward: true,\r\n    },\r\n    Debug: {\r\n        Bot: {\r\n            Enabled: false,\r\n            Toggle: function (enabled) {\r\n                exports.Content.Timers.Debug.Bot.Toggle(enabled);\r\n                exports.SystemData.Debug.Bot.Enabled = enabled;\r\n            }\r\n        },\r\n    },\r\n    PerformanceStats: {\r\n        ToggleThemeCalls: 0,\r\n    }\r\n};\r\n//todo NPM: remove unused packages (merge, aes, time...)\r\n//todo разобраться в том, как сделать разные конфигурации билда,\r\n// чтобы при билде в релиз удалялись коменты и использоваться минифаер\r\n//todo Make Switch class. [UPD: i guess Unlock class is what i wanted?]\r\n//todo im not sure i need ClassID this in ObjectStorageItem\r\n//todo !!! start to use Generic IDType in all classes! GameObject for e.g.!\r\n//todo convert to class\r\nvar ViewID;\r\n(function (ViewID) {\r\n    //# Overlays #\r\n    ViewID[\"TopOverlay\"] = \"TopOverlay\";\r\n    ViewID[\"BottomOverlay\"] = \"BottomOverlay\";\r\n    ViewID[\"UnlocksOverlay\"] = \"UnlocksOverlay\";\r\n    ViewID[\"GameFieldOverlay\"] = \"GameFieldOverlay\";\r\n    ViewID[\"BuildingsOverlay\"] = \"BuildingsOverlay\";\r\n    //# Rebirth #\r\n    ViewID[\"RebirthOverlay\"] = \"RebirthOverlay\";\r\n    ViewID[\"RebirthMonstersOverlay\"] = \"RebirthMonstersOverlay\";\r\n    ViewID[\"RebirthTurretsOverlay\"] = \"RebirthTurretsOverlay\";\r\n    ViewID[\"RebirthBuildingsOverlay\"] = \"RebirthBuildingsOverlay\";\r\n    ViewID[\"RebirthMain\"] = \"Rebirth.Main\";\r\n    ViewID[\"RebirthBasicMonster\"] = \"Rebirth.BasicMonster\";\r\n    ViewID[\"RebirthArmoredMonster\"] = \"Rebirth.ArmoredMonster\";\r\n    ViewID[\"RebirthFastMonster\"] = \"Rebirth.FastMonster\";\r\n    ViewID[\"RebirthBasicTurret\"] = \"Rebirth.BasicTurret\";\r\n    ViewID[\"RebirthLaserTurret\"] = \"Rebirth.LaserTurret\";\r\n    ViewID[\"RebirthRailTurret\"] = \"Rebirth.RailTurret\";\r\n    ViewID[\"RebirthSpikes\"] = \"Rebirth.Spikes\";\r\n    //# Menus #\r\n    ViewID[\"Menu\"] = \"Menu\";\r\n    ViewID[\"Unlocks\"] = \"Unlocks\";\r\n    ViewID[\"BuildMode\"] = \"BuildMode\";\r\n    ViewID[\"Buildings\"] = \"Buildings\";\r\n    ViewID[\"Credits\"] = \"Credits\";\r\n    ViewID[\"Statistics\"] = \"Statistics\";\r\n    ViewID[\"Settings\"] = \"Settings\";\r\n    //# Monsters #\r\n    ViewID[\"MonstersOverlay\"] = \"MonstersOverlay\";\r\n    ViewID[\"BasicMonster\"] = \"BasicMonster\";\r\n    ViewID[\"ArmoredMonster\"] = \"ArmoredMonster\";\r\n    ViewID[\"FastMonster\"] = \"FastMonster\";\r\n    //# Turrets #\r\n    ViewID[\"TurretsOverlay\"] = \"TurretsOverlay\";\r\n    ViewID[\"BasicTurret\"] = \"BasicTurret\";\r\n    ViewID[\"LaserTurret\"] = \"LaserTurret\";\r\n    ViewID[\"RailTurret\"] = \"RailTurret\";\r\n    //# Buildings #\r\n    ViewID[\"Spikes\"] = \"Spikes\";\r\n})(ViewID = exports.ViewID || (exports.ViewID = {}));\r\nfunction InitContent() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var randomEngine, _i, _a, module_1, gameField;\r\n        return __generator(this, function (_b) {\r\n            randomEngine = random_js_1.MersenneTwister19937.autoSeed();\r\n            exports.RNG = new random_js_1.Random(randomEngine);\r\n            exports.ContentStorage = new objectStorage_1.ObjectStorage();\r\n            exports.TimerStorage = new objectStorage_1.ObjectStorage();\r\n            exports.UIStorage = new objectStorage_1.ObjectStorage([], true);\r\n            exports.ModuleManager = new objectStorage_1.ObjectStorage();\r\n            exports.Content = new contentManager_1.ContentManager(exports.ModuleManager);\r\n            //todo make RebirthManager instead, and move all this stuff there\r\n            //todo auto-update wallet icon?\r\n            //todo специальная система, которая перед началом игры пробежится по всем необходимым объектам для UI,\r\n            // и скажет каких не хватает (сразу всех), а то так не удобно по одному смотря эксепшены фиксить\r\n            //todo make on-runtime tests for modules as much as i can\r\n            // Loading modules\r\n            {\r\n                for (_i = 0, _a = exports.ModuleManager.Items; _i < _a.length; _i++) {\r\n                    module_1 = _a[_i];\r\n                    module_1.Get();\r\n                }\r\n            }\r\n            gameField = {\r\n                MonsterSize: new vector2_1.Vector2(120, 120),\r\n                StartPosition: new vector2_1.Vector2(120, 240),\r\n                EndPosition: new vector2_1.Vector2(720, 1560),\r\n                MonsterSpawnPosition: new vector2_1.Vector2(-40, 540),\r\n            };\r\n            exports.Managers = {\r\n                Views: new viewManager_1.ViewManager(ViewID.Menu, exports.UIStorage.GetAllItemsOfType(view_1.View), exports.UIStorage.GetAllItemsOfType(overlay_1.Overlay)),\r\n                Fight: new fightManager_1.FightManager(exports.ContentStorage, gameField),\r\n                Build: new buildManager_1.BuildManager(exports.Content.Turrets.Basic.BuildInfo)\r\n            };\r\n            console.log('[Content::Init] finished!');\r\n            return [2 /*return*/];\r\n        });\r\n    });\r\n}\r\nexports.InitContent = InitContent;\r\n//todo ещё можно было бы придумать что-то типо стейтмашины, с системой перехода между разными состояниями\r\n//todo специальная система, которая перед началом игры пробежится по всем необходимым объектам для UI,\r\nfunction SetupUIForScrolling() {\r\n    var count = 0;\r\n    for (var _i = 0, _a = utilsGUI_1.GetAll(); _i < _a.length; _i++) {\r\n        var item = _a[_i];\r\n        item.c_baseX = item.x;\r\n        item.c_baseY = item.y;\r\n        item.c_baseRect = item.getBoundingBox();\r\n        count++;\r\n    }\r\n    console.log(\"[OnContentInitiatedOrGameLoaded] Base position set for \" + count + \" objects!\");\r\n}\r\nexports.SetupUIForScrolling = SetupUIForScrolling;\r\nfunction OnContentInitiatedOrGameLoaded(_isGameLoaded) {\r\n    if (_isGameLoaded === void 0) { _isGameLoaded = false; }\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var _i, _a, item, loadID, _b, _c, scrollbar, _d, _e, overlay, version, value, values, music, sound, customCursor, gameNameColor, unlocks;\r\n        return __generator(this, function (_f) {\r\n            switch (_f.label) {\r\n                case 0: return [4 /*yield*/, main_1.Construct3.callFunction(\"DoTick\")];\r\n                case 1:\r\n                    _f.sent();\r\n                    main_1.Construct3.globalVars.IsGameLoading = 0;\r\n                    for (_i = 0, _a = __spreadArrays(exports.ContentStorage.Items, exports.TimerStorage.Items); _i < _a.length; _i++) {\r\n                        item = _a[_i];\r\n                        item.OnContentInitiatedOrGameLoaded();\r\n                    }\r\n                    exports.Managers.Fight.OnContentInitiatedOrGameLoaded();\r\n                    game_1.SaveManager.LoadID++;\r\n                    loadID = game_1.SaveManager.LoadID;\r\n                    // Я сохраняю LoadID, чтобы удостовериться, что когда будет выполняться отложенный евент,\r\n                    // игра находится всё в том же состоянии, потому что если LoadID не сходится,\r\n                    // значит уже началась другая процедура загрузки\r\n                    if (loadID != game_1.SaveManager.LoadID) {\r\n                        console.log(\"LoadID is outdated (another game init happened). Canceling OnGameFullyLoaded event\");\r\n                        return [2 /*return*/];\r\n                    }\r\n                    if (exports.SystemData.IsGameCrashed) {\r\n                        console.log(\"An error occurred. Canceling OnGameFullyLoaded event\");\r\n                        return [2 /*return*/];\r\n                    }\r\n                    // UI\r\n                    {\r\n                        SetupUIForScrolling();\r\n                        // Tight stuff\r\n                        for (_b = 0, _c = exports.UIStorage.GetAllItemsOfType(scrollbar_1.Scrollbar); _b < _c.length; _b++) {\r\n                            scrollbar = _c[_b];\r\n                            scrollbar.UpdateAllElementsData();\r\n                            scrollbar.UpdateVisibleElementsData();\r\n                            scrollbar.Update();\r\n                        }\r\n                        for (_d = 0, _e = exports.UIStorage.GetAllItemsOfType(overlay_1.Overlay); _d < _e.length; _d++) {\r\n                            overlay = _e[_d];\r\n                            overlay.SetupElements();\r\n                        }\r\n                        // End of tight stuff\r\n                    }\r\n                    exports.SystemData.IsContentLoaded = true;\r\n                    exports.Managers.Fight.OnGameFullyLoaded();\r\n                    exports.Managers.Views.UpdateCamera();\r\n                    main_1.Construct3.callFunction(\"ToggleLoadingOverlay\", false);\r\n                    exports.Content.Timers.System.SaveGame.Start();\r\n                    game_1.SmartUIUpdate();\r\n                    if (game_1.BUILD_MODE == \"Release\") {\r\n                        game_1.OnReleaseGameInitiated();\r\n                    }\r\n                    else {\r\n                        game_1.OnPreviewGameInitiated();\r\n                    }\r\n                    version = exports.Content.System.Version;\r\n                    utilsGUI_1.SetText(\"VersionInfo\", \"Version: [color=#67f5b0][font=KumbhSans-Bold]\" + version.Current + \"[/font][/color] \"\r\n                        + (\"(\" + version.LastUpdateDateText + \")\"));\r\n                    value = exports.Content.Settings.System.Notation.Value;\r\n                    values = exports.Content.Settings.System.Notation.Validator.Values;\r\n                    main_1.Construct3.callFunction(\"SetNotationList\", values.join(\", \"), values.indexOf(value));\r\n                    music = exports.Content.Settings.Audio.MusicVolume;\r\n                    main_1.Construct3.callFunction(\"UpdateSliderBar\", \"MusicVolume\", music.Value, music.Validator.Interval.Min, music.Validator.Interval.Max);\r\n                    main_1.Construct3.globalVars.MusicVolume = music.Value;\r\n                    main_1.Construct3.callFunction(\"UpdateAudioVolume\", \"Music\", music.Value, music.Validator.Interval.Min);\r\n                    sound = exports.Content.Settings.Audio.SoundVolume;\r\n                    main_1.Construct3.callFunction(\"UpdateSliderBar\", \"SoundVolume\", sound.Value, sound.Validator.Interval.Min, sound.Validator.Interval.Max);\r\n                    main_1.Construct3.globalVars.SoundsVolume = sound.Value;\r\n                    main_1.Construct3.callFunction(\"UpdateAudioVolume\", \"Sound\", sound.Value, sound.Validator.Interval.Min);\r\n                    customCursor = exports.Content.Settings.System.CustomCursor;\r\n                    main_1.Construct3.callFunction(\"UpdateCheckbox\", \"CustomCursor\", customCursor.Value);\r\n                    //# CONTENT LOAD FINISHED #\r\n                    return [4 /*yield*/, main_1.Construct3.callFunction(\"DoTick\")];\r\n                case 2:\r\n                    //# CONTENT LOAD FINISHED #\r\n                    _f.sent();\r\n                    main_1.Construct3.callFunction(\"OnContentLoaded\");\r\n                    console.log('[Event::OnContentInitiatedOrGameLoaded] finished');\r\n                    if (!exports.Content.System.Notifications.IsTutorialShown.Value && game_1.BUILD_MODE != \"Preview\") {\r\n                        gameNameColor = \"#aa5eff\";\r\n                        unlocks = \"#e8c23a\";\r\n                        overlayMessage_1.ShowOverlayMessage({\r\n                            Title: \"Welcome!\",\r\n                            Text: \"Hey, glad to see you here!\\n Welcome to the beta test of [color=#aa5eff][font=KumbhSans-Bold]DualForce Idle![/font][/color]\\n\\n\"\r\n                                + \"In short about this game, it's Idle + Tower Defense, and you control both sides.\",\r\n                            Icon: {\r\n                                Animation: \"Markup\",\r\n                                Frame: 2,\r\n                            },\r\n                            Button: {\r\n                                //bug color is not set\r\n                                Text: \"Got it!\",\r\n                                Color: utilsMath_1.HexToRGB255(\"#e33b3b\"),\r\n                            }\r\n                        });\r\n                        overlayMessage_1.ShowOverlayMessage({\r\n                            Title: \"Instructions!\",\r\n                            Text: \"Oh, I almost forgot about tutorial!\\n First, go to the \"\r\n                                + \"[color=#e8c23a][font=KumbhSans-Bold]Unlocks[/font][/color] menu and get your first monster.\"\r\n                                + \"\\n\\nGood luck!\",\r\n                            Icon: {\r\n                                Animation: \"Markup\",\r\n                                Frame: 2,\r\n                            },\r\n                            Button: {\r\n                                //bug color is not set\r\n                                Text: \"Got it!\",\r\n                                Color: utilsMath_1.HexToRGB255(\"#e33b3b\"),\r\n                            }\r\n                        });\r\n                        exports.Content.System.Notifications.IsTutorialShown.Value = true;\r\n                    }\r\n                    if (kongregate_1.KongregateData.ApiLoaded) {\r\n                        console.log(\"KongAPI loaded, starting timer\");\r\n                        exports.Content.Timers.System.KongStats.Start();\r\n                    }\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.OnContentInitiatedOrGameLoaded = OnContentInitiatedOrGameLoaded;\r\n//+ \"\\n\\nAnd then try to click right in his face!\\n\"\r\n\n\n//# sourceURL=webpack://Game/./src/content/content.ts?");

/***/ }),

/***/ "./src/content/contentManager.ts":
/*!***************************************!*\
  !*** ./src/content/contentManager.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ContentManager = void 0;\r\nvar content_1 = __webpack_require__(/*! ./content */ \"./src/content/content.ts\");\r\nvar initMonsters_1 = __webpack_require__(/*! ./modules/monsters/initMonsters */ \"./src/content/modules/monsters/initMonsters.ts\");\r\nvar initTurrets_1 = __webpack_require__(/*! ./modules/turrets/initTurrets */ \"./src/content/modules/turrets/initTurrets.ts\");\r\nvar initRebirth_1 = __webpack_require__(/*! ./modules/rebirth/initRebirth */ \"./src/content/modules/rebirth/initRebirth.ts\");\r\nvar initViews_1 = __webpack_require__(/*! ./modules/ui/initViews */ \"./src/content/modules/ui/initViews.ts\");\r\nvar initScrollbars_1 = __webpack_require__(/*! ./modules/ui/initScrollbars */ \"./src/content/modules/ui/initScrollbars.ts\");\r\nvar initOverlays_1 = __webpack_require__(/*! ./modules/ui/initOverlays */ \"./src/content/modules/ui/initOverlays.ts\");\r\nvar initWallets_1 = __webpack_require__(/*! ./modules/data/initWallets */ \"./src/content/modules/data/initWallets.ts\");\r\nvar initStats_1 = __webpack_require__(/*! ./modules/data/initStats */ \"./src/content/modules/data/initStats.ts\");\r\nvar initTimers_1 = __webpack_require__(/*! ./modules/data/initTimers */ \"./src/content/modules/data/initTimers.ts\");\r\nvar initSettings_1 = __webpack_require__(/*! ./modules/data/initSettings */ \"./src/content/modules/data/initSettings.ts\");\r\nvar initBuildings_1 = __webpack_require__(/*! ./modules/buildings/initBuildings */ \"./src/content/modules/buildings/initBuildings.ts\");\r\nvar initStatistics_1 = __webpack_require__(/*! ./modules/data/initStatistics */ \"./src/content/modules/data/initStatistics.ts\");\r\nvar initSystem_1 = __webpack_require__(/*! ./modules/data/initSystem */ \"./src/content/modules/data/initSystem.ts\");\r\nvar ContentManager = /** @class */ (function () {\r\n    function ContentManager(Storage) {\r\n        this.Storage = Storage;\r\n        this.System = initSystem_1.InitSystem(Storage, content_1.ContentStorage);\r\n        this.Wallets = initWallets_1.InitWallets(Storage, content_1.ContentStorage);\r\n        this.Stats = initStats_1.InitStats(Storage, content_1.ContentStorage);\r\n        this.Timers = initTimers_1.InitTimers(Storage, content_1.ContentStorage);\r\n        this.Settings = initSettings_1.InitSettings(Storage, content_1.ContentStorage);\r\n        this.Monsters = initMonsters_1.InitMonsters(Storage, content_1.ContentStorage);\r\n        this.Turrets = initTurrets_1.InitTurrets(Storage, content_1.ContentStorage);\r\n        this.Buildings = initBuildings_1.InitBuildings(Storage, content_1.ContentStorage);\r\n        this.Rebirth = initRebirth_1.InitRebirth(Storage, content_1.ContentStorage);\r\n        this.Views = initViews_1.InitViews(Storage, content_1.UIStorage);\r\n        this.Scrollbars = initScrollbars_1.InitScrollbars(Storage, content_1.UIStorage);\r\n        this.Overlays = initOverlays_1.InitOverlays(Storage, content_1.UIStorage);\r\n        this.Statistics = initStatistics_1.InitStatistics(Storage, content_1.ContentStorage);\r\n    }\r\n    return ContentManager;\r\n}());\r\nexports.ContentManager = ContentManager;\r\n\n\n//# sourceURL=webpack://Game/./src/content/contentManager.ts?");

/***/ }),

/***/ "./src/content/contentTypes.ts":
/*!*************************************!*\
  !*** ./src/content/contentTypes.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GetTypeList = void 0;\r\nvar stat_1 = __webpack_require__(/*! ../game/gameObjects/stat */ \"./src/game/gameObjects/stat.ts\");\r\nvar wallet_1 = __webpack_require__(/*! ../game/gameObjects/wallet */ \"./src/game/gameObjects/wallet.ts\");\r\nvar setting_1 = __webpack_require__(/*! ../game/gameObjects/setting */ \"./src/game/gameObjects/setting.ts\");\r\nvar timer_1 = __webpack_require__(/*! ../data/timer */ \"./src/data/timer.ts\");\r\nvar idler_1 = __webpack_require__(/*! ../game/gameObjects/idler */ \"./src/game/gameObjects/idler.ts\");\r\nvar points_1 = __webpack_require__(/*! ../game/gameObjects/points */ \"./src/game/gameObjects/points.ts\");\r\nvar price_1 = __webpack_require__(/*! ../game/gameObjects/price */ \"./src/game/gameObjects/price.ts\");\r\nvar upgrade_1 = __webpack_require__(/*! ../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar unlock_1 = __webpack_require__(/*! ../data/unlock */ \"./src/data/unlock.ts\");\r\nvar monster_1 = __webpack_require__(/*! ../game/fighting/monster */ \"./src/game/fighting/monster.ts\");\r\nvar turret_1 = __webpack_require__(/*! ../game/fighting/turret */ \"./src/game/fighting/turret.ts\");\r\nvar float_1 = __webpack_require__(/*! ../data/math/float */ \"./src/data/math/float.ts\");\r\nvar buildManager_1 = __webpack_require__(/*! ../game/managers/buildManager */ \"./src/game/managers/buildManager.ts\");\r\nvar turretInstance_1 = __webpack_require__(/*! ../game/fighting/buildings/turretInstance */ \"./src/game/fighting/buildings/turretInstance.ts\");\r\nvar spikes_1 = __webpack_require__(/*! ../game/fighting/buildings/spikes */ \"./src/game/fighting/buildings/spikes.ts\");\r\nvar container_1 = __webpack_require__(/*! ../game/gameObjects/container */ \"./src/game/gameObjects/container.ts\");\r\nvar time_1 = __webpack_require__(/*! ../data/time */ \"./src/data/time.ts\");\r\nfunction GetTypeList() {\r\n    return [idler_1.Idler, points_1.Points, price_1.Price, setting_1.Setting, stat_1.Stat, timer_1.Timer, upgrade_1.Upgrade, wallet_1.Wallet, unlock_1.Unlock, upgrade_1.UnlockUpgrade,\r\n        monster_1.Monster, turret_1.Turret, turretInstance_1.TurretInstance, spikes_1.Spikes, spikes_1.SpikesInstance, float_1.GameFloat, buildManager_1.BuildInfo, container_1.Container,\r\n        time_1.Time,\r\n    ];\r\n}\r\nexports.GetTypeList = GetTypeList;\r\n// Game content\r\n//todo maybe bake Setting<StrictType, RawType[string, number, bool, ..]> for SetAnyValue() function\r\n//todo Notation: Setting<number>,\r\n//todo make class ContentContainer, with function for checking all items for null\r\n\n\n//# sourceURL=webpack://Game/./src/content/contentTypes.ts?");

/***/ }),

/***/ "./src/content/modules/buildings/initBuildings.ts":
/*!********************************************************!*\
  !*** ./src/content/modules/buildings/initBuildings.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UpgradeOnBuyBuilding = exports.OnBuildingDestroyed = exports.OnBuildingCreated = exports.InitBuildings = void 0;\r\nvar gameObject_1 = __webpack_require__(/*! ../../../game/gameObject */ \"./src/game/gameObject.ts\");\r\nvar spikesContent_1 = __webpack_require__(/*! ./spikesContent */ \"./src/content/modules/buildings/spikesContent.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\nvar upgradeOnBuyEvent_1 = __webpack_require__(/*! ../../../game/gameObjects/upgrade/upgradeOnBuyEvent */ \"./src/game/gameObjects/upgrade/upgradeOnBuyEvent.ts\");\r\nfunction InitBuildings(moduleStorage, content) {\r\n    return {\r\n        Spikes: new spikesContent_1.SpikesContent(moduleStorage, content),\r\n    };\r\n}\r\nexports.InitBuildings = InitBuildings;\r\n//todo make it universal (base Building class?)\r\n//todo DO I ACTUALLY NEED THIS? THE STUFF CAN BE DONE IN FightManager.CreateBuilding(). Not now, at least\r\nfunction OnBuildingCreated(buildingName, position, uid) {\r\n    if (content_1.SystemData.IsContentLoaded) {\r\n        switch (buildingName) {\r\n            // case BuildingName.Spikes: {\r\n            //     Content.Buildings.Spikes.Entity.Instances.AddItem(new SpikesInstance(uid, position));\r\n            //     break;\r\n            // }\r\n        }\r\n    }\r\n}\r\nexports.OnBuildingCreated = OnBuildingCreated;\r\nfunction OnBuildingDestroyed(buildingName, uid) {\r\n    var _a;\r\n    if (content_1.SystemData.IsContentLoaded) {\r\n        switch (buildingName) {\r\n            case gameObject_1.BuildingName.Spikes: {\r\n                var spikes = content_1.Content.Buildings.Spikes;\r\n                var id = (_a = spikes.Entity.Instances.Items.find(function (item) { return item.UID == uid; })) === null || _a === void 0 ? void 0 : _a.ID;\r\n                if (id != undefined) {\r\n                    spikes.Entity.Instances.RemoveItem(id);\r\n                }\r\n                else {\r\n                    throw new Error(\"Instance with UID: '\" + uid + \"' was not found\");\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.OnBuildingDestroyed = OnBuildingDestroyed;\r\nvar UpgradeOnBuyBuilding = /** @class */ (function (_super) {\r\n    __extends(UpgradeOnBuyBuilding, _super);\r\n    function UpgradeOnBuyBuilding(BuildingID) {\r\n        var _this = _super.call(this) || this;\r\n        _this.BuildingID = BuildingID;\r\n        return _this;\r\n    }\r\n    UpgradeOnBuyBuilding.prototype.Trigger = function (_upgrade, _count, _spent) {\r\n        content_1.Managers.Fight.UpdateBuilding(this.BuildingID);\r\n    };\r\n    return UpgradeOnBuyBuilding;\r\n}(upgradeOnBuyEvent_1.UpgradeOnBuyEvent));\r\nexports.UpgradeOnBuyBuilding = UpgradeOnBuyBuilding;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/buildings/initBuildings.ts?");

/***/ }),

/***/ "./src/content/modules/buildings/spikesContent.ts":
/*!********************************************************!*\
  !*** ./src/content/modules/buildings/spikesContent.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SpikesContent = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar upgrade_1 = __webpack_require__(/*! ../../../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\nvar unlock_1 = __webpack_require__(/*! ../../../data/unlock */ \"./src/data/unlock.ts\");\r\nvar priceArray_1 = __webpack_require__(/*! ../../../data/priceArray */ \"./src/data/priceArray.ts\");\r\nvar price_1 = __webpack_require__(/*! ../../../game/gameObjects/price */ \"./src/game/gameObjects/price.ts\");\r\nvar progressionCalculator_1 = __webpack_require__(/*! ../../../data/math/valueCalcs/progressionCalculator */ \"./src/data/math/valueCalcs/progressionCalculator.ts\");\r\nvar progression_1 = __webpack_require__(/*! ../../../data/math/progression */ \"./src/data/math/progression.ts\");\r\nvar gameObject_1 = __webpack_require__(/*! ../../../game/gameObject */ \"./src/game/gameObject.ts\");\r\nvar buildManager_1 = __webpack_require__(/*! ../../../game/managers/buildManager */ \"./src/game/managers/buildManager.ts\");\r\nvar spikes_1 = __webpack_require__(/*! ../../../game/fighting/buildings/spikes */ \"./src/game/fighting/buildings/spikes.ts\");\r\nvar container_1 = __webpack_require__(/*! ../../../game/gameObjects/container */ \"./src/game/gameObjects/container.ts\");\r\nvar fightManager_1 = __webpack_require__(/*! ../../../game/managers/fightManager */ \"./src/game/managers/fightManager.ts\");\r\nvar initBuildings_1 = __webpack_require__(/*! ./initBuildings */ \"./src/content/modules/buildings/initBuildings.ts\");\r\nvar tweakArray_1 = __webpack_require__(/*! ../../../game/tweakArray */ \"./src/game/tweakArray.ts\");\r\nvar tweak_1 = __webpack_require__(/*! ../../../game/tweak */ \"./src/game/tweak.ts\");\r\nvar level_1 = __webpack_require__(/*! ../../../data/game/level */ \"./src/data/game/level.ts\");\r\nvar uiBuilder_1 = __webpack_require__(/*! ../../../../javascript/construct3/c3ObjectUtils/uiBuilder */ \"./javascript/construct3/c3ObjectUtils/uiBuilder.ts\");\r\nvar gui_1 = __webpack_require__(/*! ../../../ui/gui */ \"./src/ui/gui.ts\");\r\nvar SpikesContent = /** @class */ (function () {\r\n    function SpikesContent(ModuleStorage, ContentStorage) {\r\n        var _this = this;\r\n        this.ModuleStorage = ModuleStorage;\r\n        this.ContentStorage = ContentStorage;\r\n        var id = \"Spikes\";\r\n        this.system = new contentModule_1.ContentModule(this.ModuleStorage, id + \".System\", function () { return ({\r\n            IsNotificationShown: new container_1.Container(_this.ContentStorage, id + \".System.IsNotificationShown\", false),\r\n            IsBuildModeShown: new container_1.Container(_this.ContentStorage, id + \".System.IsBuildModeShown\", false),\r\n            IsEverUnlocked: new container_1.Container(_this.ContentStorage, id + \".System.IsEverUnlocked\", false),\r\n        }); });\r\n        this.profile = new contentModule_1.ContentModule(this.ModuleStorage, id + \".Profile\", function () {\r\n            return new spikes_1.Spikes(_this.ContentStorage, content_1.Content.Turrets.Basic.Unlock, 0, 0.5, 0, 0, 3000, 10, 0.8, 2000, 1);\r\n        });\r\n        this.unlock = new contentModule_1.ContentModule(this.ModuleStorage, id + \".Unlock\", function () {\r\n            return new unlock_1.Unlock(_this.ContentStorage, \"Unlock::\" + id, false, new fightManager_1.OnSpikesUnlocked());\r\n        });\r\n        //todo unlock with researches instead\r\n        this.unlockPurchase = new contentModule_1.ContentModule(this.ModuleStorage, id + \".UnlockPurchase\", function () {\r\n            return new upgrade_1.UnlockUpgrade(_this.ContentStorage, id + \".UnlockPurchase\", content_1.Content.Buildings.Spikes.Unlock, new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 15000, 0, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical)),\r\n            ]));\r\n        });\r\n        this.buildInfo = new contentModule_1.ContentModule(this.ModuleStorage, id + \".BuildInfo\", function () {\r\n            return new buildManager_1.BuildInfo(_this.ContentStorage, \"BuildInfo::\" + id, id, \"Building\", \"OnGrass\", new buildManager_1.CanBuildBuilding(gameObject_1.BuildingName.Spikes));\r\n        });\r\n        this.upgrades = new contentModule_1.ContentModule(this.ModuleStorage, id + \".Upgrades\", function () { return ({\r\n            Damage: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Damage\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 200), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 10000, 1.8, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Damage::Damage\", false, 0.5, 0.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Buildings.Spikes.Entity.HealthDamage)\r\n            ]), new initBuildings_1.UpgradeOnBuyBuilding(gameObject_1.BuildingName.Spikes), true),\r\n            ReloadTime: new upgrade_1.Upgrade(_this.ContentStorage, id + \".ReloadTime\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 50), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 15000, 1.9, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".ReloadTime::ReloadTime\", false, 50, 50, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionMinus(), content_1.Content.Buildings.Spikes.Entity.ReloadTimeMS)\r\n            ]), new initBuildings_1.UpgradeOnBuyBuilding(gameObject_1.BuildingName.Spikes)),\r\n            HealthBasedDamage: new upgrade_1.Upgrade(_this.ContentStorage, id + \".HealthBasedDamage\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 50), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 20000, 1.9, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".HealthBasedDamage\", false, 1, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Buildings.Spikes.Entity.HealthBasedDamagePercent)\r\n            ]), new initBuildings_1.UpgradeOnBuyBuilding(gameObject_1.BuildingName.Spikes)),\r\n            StunChance: new upgrade_1.Upgrade(_this.ContentStorage, id + \".StunChance\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 15), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 30000, 1.85, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".StunChance\", false, 5, 5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Buildings.Spikes.Entity.StunChance)\r\n            ]), new initBuildings_1.UpgradeOnBuyBuilding(gameObject_1.BuildingName.Spikes)),\r\n            StunDuration: new upgrade_1.Upgrade(_this.ContentStorage, id + \".StunDuration\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 25), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 40000, 1.9, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".StunDuration\", false, 200, 200, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Buildings.Spikes.Entity.StunDurationMS)\r\n            ]), new initBuildings_1.UpgradeOnBuyBuilding(gameObject_1.BuildingName.Spikes)),\r\n            StunSpeedMP: new upgrade_1.Upgrade(_this.ContentStorage, id + \".StunSpeedMP\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 10), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 70000, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".StunSpeedMP\", false, 0.05, 0.05, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionMinus(), content_1.Content.Buildings.Spikes.Entity.StunSpeedMP)\r\n            ]), new initBuildings_1.UpgradeOnBuyBuilding(gameObject_1.BuildingName.Spikes)),\r\n        }); });\r\n    }\r\n    SpikesContent.prototype.InitUI = function () {\r\n        //# Damage #\r\n        uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Building.Spikes.Damage\"), content_1.Content.Buildings.Spikes.Upgrades.Damage, \"#934848\", \"Health damage\", [\"Damage\"]);\r\n        //# ReloadTime #\r\n        uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Building.Spikes.ReloadTime\"), content_1.Content.Buildings.Spikes.Upgrades.ReloadTime, \"#519e5e\", \"Reload duration\", [\"Duration\"]);\r\n        //# HealthBasedDamage #\r\n        uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Building.Spikes.HealthBasedDamage\"), content_1.Content.Buildings.Spikes.Upgrades.HealthBasedDamage, \"#8d3d52\", \"HP based damage\", [\"% of HP\"]);\r\n        //# StunChance #\r\n        uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Building.Spikes.StunChance\"), content_1.Content.Buildings.Spikes.Upgrades.StunChance, \"#4b9564\", \"Stun chance\", [\"Chance\"]);\r\n        //# StunDuration #\r\n        uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Building.Spikes.StunDuration\"), content_1.Content.Buildings.Spikes.Upgrades.StunDuration, \"#3d8e94\", \"Stun duration\", [\"Duration\"]);\r\n        //# StunSpeedMP #\r\n        uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Building.Spikes.StunSpeedMP\"), content_1.Content.Buildings.Spikes.Upgrades.StunSpeedMP, \"#236099\", \"Stun slowdown\", [\"Slowdown\"]);\r\n    };\r\n    Object.defineProperty(SpikesContent.prototype, \"System\", {\r\n        get: function () {\r\n            return this.system.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SpikesContent.prototype, \"Entity\", {\r\n        get: function () {\r\n            return this.profile.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SpikesContent.prototype, \"Unlock\", {\r\n        get: function () {\r\n            return this.unlock.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SpikesContent.prototype, \"UnlockPurchase\", {\r\n        get: function () {\r\n            return this.unlockPurchase.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SpikesContent.prototype, \"BuildInfo\", {\r\n        get: function () {\r\n            return this.buildInfo.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SpikesContent.prototype, \"Upgrades\", {\r\n        get: function () {\r\n            return this.upgrades.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return SpikesContent;\r\n}());\r\nexports.SpikesContent = SpikesContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/buildings/spikesContent.ts?");

/***/ }),

/***/ "./src/content/modules/data/initSettings.ts":
/*!**************************************************!*\
  !*** ./src/content/modules/data/initSettings.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AllSettingsContent = exports.InitSettings = void 0;\r\nvar setting_1 = __webpack_require__(/*! ../../../game/gameObjects/setting */ \"./src/game/gameObjects/setting.ts\");\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar vector2_1 = __webpack_require__(/*! ../../../data/vector2 */ \"./src/data/vector2.ts\");\r\nvar game_1 = __webpack_require__(/*! ../../../game */ \"./src/game.ts\");\r\nvar container_1 = __webpack_require__(/*! ../../../game/gameObjects/container */ \"./src/game/gameObjects/container.ts\");\r\nfunction InitSettings(moduleStorage, content) {\r\n    return new AllSettingsContent(moduleStorage, content);\r\n}\r\nexports.InitSettings = InitSettings;\r\nvar AllSettingsContent = /** @class */ (function () {\r\n    function AllSettingsContent(ModuleStorage, ContentStorage) {\r\n        this.ModuleStorage = ModuleStorage;\r\n        this.ContentStorage = ContentStorage;\r\n        this.system = new contentModule_1.ContentModule(ModuleStorage, \"Settings.Upgrades\", function () { return ({\r\n            BuyCount: new setting_1.Setting(ContentStorage, 'BuyCount', 1, new setting_1.ArrayValidator([1, 5, 10, 25, 100, 1000, \"Max\"])),\r\n            Notation: new setting_1.Setting(ContentStorage, 'Notation', \"Letter\", new setting_1.ArrayValidator([\"Letter\", \"Scientific\"])),\r\n            CustomCursor: new container_1.Container(ContentStorage, 'System.CustomCursor', true),\r\n        }); });\r\n        this.audio = new contentModule_1.ContentModule(ModuleStorage, \"Settings.Audio\", function () { return ({\r\n            MusicVolume: new setting_1.Setting(ContentStorage, 'MusicVolume', -25, new setting_1.IntervalValidator(new vector2_1.Interval(-50, 15)), function (setting, value) {\r\n                game_1.Construct3.globalVars.MusicVolume = value;\r\n                game_1.Construct3.callFunction(\"UpdateAudioVolume\", \"Music\", value, setting.Validator.Interval.Min);\r\n            }),\r\n            SoundVolume: new setting_1.Setting(ContentStorage, 'SoundVolume', -5, new setting_1.IntervalValidator(new vector2_1.Interval(-50, 15)), function (setting, value) {\r\n                game_1.Construct3.globalVars.SoundsVolume = value;\r\n                game_1.Construct3.callFunction(\"UpdateAudioVolume\", \"Sound\", value, setting.Validator.Interval.Min);\r\n            }),\r\n        }); });\r\n        //todo SaveInterval\r\n    }\r\n    Object.defineProperty(AllSettingsContent.prototype, \"System\", {\r\n        get: function () {\r\n            return this.system.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllSettingsContent.prototype, \"Audio\", {\r\n        get: function () {\r\n            return this.audio.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return AllSettingsContent;\r\n}());\r\nexports.AllSettingsContent = AllSettingsContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/data/initSettings.ts?");

/***/ }),

/***/ "./src/content/modules/data/initStatistics.ts":
/*!****************************************************!*\
  !*** ./src/content/modules/data/initStatistics.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AllStatisticsContent = exports.InitStatistics = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar time_1 = __webpack_require__(/*! ../../../data/time */ \"./src/data/time.ts\");\r\nvar timer_1 = __webpack_require__(/*! ../../../data/timer */ \"./src/data/timer.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\nvar float_1 = __webpack_require__(/*! ../../../data/math/float */ \"./src/data/math/float.ts\");\r\nvar main_1 = __webpack_require__(/*! ../../../../javascript/construct3/main */ \"./javascript/construct3/main.js\");\r\nvar container_1 = __webpack_require__(/*! ../../../game/gameObjects/container */ \"./src/game/gameObjects/container.ts\");\r\nfunction InitStatistics(moduleStorage, content) {\r\n    return new AllStatisticsContent(moduleStorage, content);\r\n}\r\nexports.InitStatistics = InitStatistics;\r\nvar AllStatisticsContent = /** @class */ (function () {\r\n    function AllStatisticsContent(//todo give structure of storages (TimerStorage, UIStorage, ...)\r\n    ModuleStorage, ContentStorage) {\r\n        this.ModuleStorage = ModuleStorage;\r\n        this.ContentStorage = ContentStorage;\r\n        var contentID = \"Statistics\";\r\n        var systemID = contentID + \".System\";\r\n        this.system = new contentModule_1.ContentModule(ModuleStorage, systemID, function () { return ({\r\n            LastWallTime: new Date(),\r\n            LastGameTime: main_1.Construct3.gameTime * 1000,\r\n        }); });\r\n        var timeID = contentID + \".Time\";\r\n        this.time = new contentModule_1.ContentModule(ModuleStorage, timeID, function () { return ({\r\n            StartedPlaying: new container_1.Container(ContentStorage, timeID + \".StartedPlaying\", new Date(), container_1.DateContainer),\r\n            TimePlayed: new container_1.Container(ContentStorage, timeID + \".TimePlayed\", new time_1.Time(), container_1.TimeContainer),\r\n            InGameTimePlayed: new container_1.Container(ContentStorage, timeID + \".InGameTimePlayed\", new time_1.Time(), container_1.TimeContainer),\r\n        }); });\r\n        var gameplayID = contentID + \".Gameplay\";\r\n        this.gameplay = new contentModule_1.ContentModule(ModuleStorage, gameplayID, function () { return ({\r\n            TotalClicks: new container_1.Container(ContentStorage, gameplayID + \".TotalClicks\", 0),\r\n            TotalClickDamage: new container_1.Container(ContentStorage, gameplayID + \".TotalClickDamage\", new float_1.Float(0), container_1.FloatContainer),\r\n            ClickKills: new container_1.Container(ContentStorage, gameplayID + \".ClickKills\", 0),\r\n        }); });\r\n        var timersID = contentID + \".Timers\";\r\n        this.timers = new contentModule_1.ContentModule(ModuleStorage, timersID, function () { return ({\r\n            StatisticsUpdate: new timer_1.Timer(content_1.TimerStorage, timersID + \".StatisticsUpdate\", new time_1.Time(0, 0, 1), 1, true, true, {\r\n                OnEvent: function () {\r\n                    //# Wall Time #\r\n                    {\r\n                        var currentTime = new Date();\r\n                        var lastWallTime = content_1.Content.Statistics.System.LastWallTime;\r\n                        var diffMS = Math.abs(currentTime.getTime() - lastWallTime.getTime());\r\n                        content_1.Content.Statistics.Time.TimePlayed.Value.Add(new time_1.Time(0, 0, 0, diffMS));\r\n                        content_1.Content.Statistics.System.LastWallTime = currentTime;\r\n                    }\r\n                    //# InGame Time #\r\n                    {\r\n                        var currentTime = main_1.Construct3.gameTime * 1000;\r\n                        var lastGameTime = content_1.Content.Statistics.System.LastGameTime;\r\n                        var diffMS = Math.abs(currentTime - lastGameTime);\r\n                        content_1.Content.Statistics.Time.InGameTimePlayed.Value.Add(new time_1.Time(0, 0, 0, diffMS));\r\n                        content_1.Content.Statistics.System.LastGameTime = currentTime;\r\n                    }\r\n                }\r\n            })\r\n        }); });\r\n    }\r\n    Object.defineProperty(AllStatisticsContent.prototype, \"System\", {\r\n        get: function () {\r\n            return this.system.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllStatisticsContent.prototype, \"Time\", {\r\n        get: function () {\r\n            return this.time.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllStatisticsContent.prototype, \"Gameplay\", {\r\n        get: function () {\r\n            return this.gameplay.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllStatisticsContent.prototype, \"Timers\", {\r\n        get: function () {\r\n            return this.timers.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return AllStatisticsContent;\r\n}());\r\nexports.AllStatisticsContent = AllStatisticsContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/data/initStatistics.ts?");

/***/ }),

/***/ "./src/content/modules/data/initStats.ts":
/*!***********************************************!*\
  !*** ./src/content/modules/data/initStats.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AllStatsContent = exports.InitStats = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar gameData_1 = __webpack_require__(/*! ../../../data/game/gameData */ \"./src/data/game/gameData.ts\");\r\nvar stat_1 = __webpack_require__(/*! ../../../game/gameObjects/stat */ \"./src/game/gameObjects/stat.ts\");\r\nfunction InitStats(moduleStorage, content) {\r\n    //todo надо короче разделить логически статстику (объекты Stat), и геймплейные значения (GameData)\r\n    return new AllStatsContent(moduleStorage, content);\r\n}\r\nexports.InitStats = InitStats;\r\nvar AllStatsContent = /** @class */ (function () {\r\n    function AllStatsContent(ModuleStorage, ContentStorage) {\r\n        this.ModuleStorage = ModuleStorage;\r\n        this.ContentStorage = ContentStorage;\r\n        this.game = new contentModule_1.ContentModule(ModuleStorage, \"Stats.Game\", function () { return ({\r\n            StartCoins: new gameData_1.GameData(\"StartCoins\", 0.1),\r\n        }); });\r\n        this.coins = new contentModule_1.ContentModule(ModuleStorage, \"Stats.Coins\", function () { return ({\r\n            CollectedBeforeRebirth: new stat_1.Stat(ContentStorage, \"Coins.CollectedBeforeRebirth\", 0),\r\n        }); });\r\n    }\r\n    Object.defineProperty(AllStatsContent.prototype, \"Game\", {\r\n        get: function () {\r\n            return this.game.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllStatsContent.prototype, \"Coins\", {\r\n        get: function () {\r\n            return this.coins.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return AllStatsContent;\r\n}());\r\nexports.AllStatsContent = AllStatsContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/data/initStats.ts?");

/***/ }),

/***/ "./src/content/modules/data/initSystem.ts":
/*!************************************************!*\
  !*** ./src/content/modules/data/initSystem.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n//todo здесь хранить инфу о версиях (первой, текущей) и прочую системную лабуду\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AllSystemContent = exports.InitSystem = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar container_1 = __webpack_require__(/*! ../../../game/gameObjects/container */ \"./src/game/gameObjects/container.ts\");\r\nfunction InitSystem(moduleStorage, content) {\r\n    //todo надо короче разделить логически статстику (объекты Stat), и геймплейные значения (GameData)\r\n    return new AllSystemContent(moduleStorage, content);\r\n}\r\nexports.InitSystem = InitSystem;\r\nvar AllSystemContent = /** @class */ (function () {\r\n    function AllSystemContent(ModuleStorage, ContentStorage) {\r\n        var _this = this;\r\n        this.ModuleStorage = ModuleStorage;\r\n        this.ContentStorage = ContentStorage;\r\n        var id = \"System\";\r\n        //todo CompareVersion, parseFloat(\"0.3.5\".replaceAll('.','')) == 35\r\n        var CURRENT_VERSION = \"0.4.5\";\r\n        this.notifications = new contentModule_1.ContentModule(ModuleStorage, id + \".Notifications\", function () { return ({\r\n            IsTutorialShown: new container_1.Container(_this.ContentStorage, id + \".Notifications.IsTutorialShown\", false),\r\n            IsMonsterTutorialShown: new container_1.Container(_this.ContentStorage, id + \".Notifications.IsMonsterTutorialShown\", false),\r\n            IsTurretTutorialShown: new container_1.Container(_this.ContentStorage, id + \".Notifications.IsTurretTutorialShown\", false),\r\n            IsShieldTutorialShown: new container_1.Container(_this.ContentStorage, id + \".Notifications.IsShieldTutorialShown\", false),\r\n        }); });\r\n        this.version = new contentModule_1.ContentModule(ModuleStorage, id + \".Version\", function () { return ({\r\n            Current: CURRENT_VERSION,\r\n            FirstPlayed: new container_1.Container(_this.ContentStorage, id + \".Version.FirstPlayed\", CURRENT_VERSION),\r\n            LastUpdateDateText: \"December 18, 2020\",\r\n        }); });\r\n    }\r\n    Object.defineProperty(AllSystemContent.prototype, \"Notifications\", {\r\n        get: function () {\r\n            return this.notifications.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllSystemContent.prototype, \"Version\", {\r\n        get: function () {\r\n            return this.version.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return AllSystemContent;\r\n}());\r\nexports.AllSystemContent = AllSystemContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/data/initSystem.ts?");

/***/ }),

/***/ "./src/content/modules/data/initTimers.ts":
/*!************************************************!*\
  !*** ./src/content/modules/data/initTimers.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AllTimersContent = exports.InitTimers = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar timer_1 = __webpack_require__(/*! ../../../data/timer */ \"./src/data/timer.ts\");\r\nvar time_1 = __webpack_require__(/*! ../../../data/time */ \"./src/data/time.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\nvar utilsObjects_1 = __webpack_require__(/*! ../../../utils/utilsObjects */ \"./src/utils/utilsObjects.ts\");\r\nvar main_1 = __webpack_require__(/*! ../../../../javascript/construct3/main */ \"./javascript/construct3/main.js\");\r\nvar upgrade_1 = __webpack_require__(/*! ../../../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar game_1 = __webpack_require__(/*! ../../../game */ \"./src/game.ts\");\r\nvar kongregate_1 = __webpack_require__(/*! ../../../../javascript/kongregate/kongregate */ \"./javascript/kongregate/kongregate.ts\");\r\nvar overlayMessage_1 = __webpack_require__(/*! ../../../ui/overlayMessage */ \"./src/ui/overlayMessage.ts\");\r\nvar utilsMath_1 = __webpack_require__(/*! ../../../utils/utilsMath */ \"./src/utils/utilsMath.ts\");\r\nvar utilsText_1 = __webpack_require__(/*! ../../../utils/utilsText */ \"./src/utils/utilsText.ts\");\r\nvar container_1 = __webpack_require__(/*! ../../../game/gameObjects/container */ \"./src/game/gameObjects/container.ts\");\r\nvar turret_1 = __webpack_require__(/*! ../../../game/fighting/turret */ \"./src/game/fighting/turret.ts\");\r\nvar monster_1 = __webpack_require__(/*! ../../../game/fighting/monster */ \"./src/game/fighting/monster.ts\");\r\nvar utilsRandom_1 = __webpack_require__(/*! ../../../utils/utilsRandom */ \"./src/utils/utilsRandom.ts\");\r\nfunction InitTimers(storage, content) {\r\n    //todo TimerEvents.SaveGame(args)???\r\n    return new AllTimersContent(storage, content);\r\n}\r\nexports.InitTimers = InitTimers;\r\nvar AllTimersContent = /** @class */ (function () {\r\n    function AllTimersContent(ModuleStorage, ContentStorage) {\r\n        this.ModuleStorage = ModuleStorage;\r\n        this.ContentStorage = ContentStorage;\r\n        this.game = new contentModule_1.ContentModule(ModuleStorage, \"Timers.Game\", function () { return ({\r\n            MonsterSpawn: new timer_1.Timer(content_1.TimerStorage, \"Timers.Game.MonsterSpawn\", new time_1.Time(0, 0, 3, 0), 1, false, false, new timer_1.MonsterSpawnTimerEvent(), false),\r\n        }); });\r\n        this.system = new contentModule_1.ContentModule(ModuleStorage, \"Timers.System\", function () { return ({\r\n            SaveGame: new timer_1.Timer(content_1.TimerStorage, \"Timers.System.SaveGame\", new time_1.Time(0, 0, 5, 0), 1, false, true, new timer_1.SaveGameTimerEvent()),\r\n            LastUnfocusTime: new container_1.Container(ContentStorage, \"Timers.System.LastUnfocusTime\", new Date(), container_1.DateContainer),\r\n            UnfocusTimeHappened: false,\r\n            UnfocusTime: new timer_1.Timer(content_1.TimerStorage, \"Timers.System.UnfocusTime\", new time_1.Time(0, 0, 1, 0), 1, true, true, {\r\n                OnEvent: function () {\r\n                    var lastTime = content_1.Content.Timers.System.LastUnfocusTime.Value;\r\n                    var elapsedTime = new time_1.Time(0, 0, 0, new Date().getTime() - lastTime.getTime());\r\n                    var basicElapsedTime = elapsedTime;\r\n                    content_1.Content.Timers.System.UnfocusTimeHappened = true;\r\n                    content_1.Content.Timers.System.LastUnfocusTime.Value = new Date();\r\n                    var maxOfflineHours = 12;\r\n                    var maxOfflineTimeReached = false;\r\n                    if (elapsedTime.TotalHours.IsMore(maxOfflineHours)) {\r\n                        //elapsedTime = new Time(maxOfflineHours);\r\n                        //maxOfflineTimeReached = true;\r\n                    }\r\n                    //todo всё таки проще будет считать средний доход, причём брать больше времени, если возможно,\r\n                    // просто брать весь заработок за 10 минут, рассчитать сколько в секунду, и умножить на офлайн время\r\n                    if (elapsedTime.TotalSeconds.IsMore(20)) {\r\n                        //let elapsedTime = new Time(24);\r\n                        //todo Offline gains statistics\r\n                        //todo consider instant spawn\r\n                        var universalOrHealthDamage = new game_1.Float(0);\r\n                        //let shieldsDamage = new Float(0);\r\n                        //# Turrets / Buildings dmg/sec #\r\n                        for (var _i = 0, _a = __spreadArrays(utilsObjects_1.ValuesOf(ContentStorage.GetAllItemsOfType(turret_1.Turret)), [\r\n                            content_1.Content.Buildings.Spikes.Entity,\r\n                        ]); _i < _a.length; _i++) {\r\n                            var building = _a[_i];\r\n                            var damage = game_1.Float.Plus(building.Damage.Value, building.HealthDamage.Value);\r\n                            var damagePerSec = damage\r\n                                .Times(building.Instances.Length)\r\n                                .Divide(building.ReloadTimeMS.Value.Divide(1000));\r\n                            if (damagePerSec.IsMore(0)) {\r\n                                universalOrHealthDamage = universalOrHealthDamage.Plus(damagePerSec);\r\n                                console.log(\"[OfflineTime] \" + building.ID + \": dealt \" + utilsText_1.GetNumberText(damagePerSec) + \" damage\");\r\n                            }\r\n                        }\r\n                        if (universalOrHealthDamage.IsEqual(0))\r\n                            return;\r\n                        //# Monsters killed #\r\n                        var activeMonsters = ContentStorage.GetAllItemsOfType(monster_1.Monster)\r\n                            .filter(function (monster) {\r\n                            return monster.Unlock.IsUnlocked\r\n                                && monster.GetContent().System.IsEnabled.Value;\r\n                        });\r\n                        var eachMonsterTimeSec = elapsedTime.TotalSeconds.Divide(activeMonsters.length);\r\n                        var totalCoins = new game_1.Float();\r\n                        var totalRP = new game_1.Float();\r\n                        for (var _b = 0, activeMonsters_1 = activeMonsters; _b < activeMonsters_1.length; _b++) {\r\n                            var monster = activeMonsters_1[_b];\r\n                            var totalHealth = game_1.Float.Plus(monster.Health.Value, monster.Shield.Value);\r\n                            var killTime = totalHealth.Divide(universalOrHealthDamage);\r\n                            var monsterLifeCycle = monster.SpawnTimeMS.Value.Divide(1000)\r\n                                .Plus(killTime);\r\n                            var killed = eachMonsterTimeSec.Divide(monsterLifeCycle).Floor();\r\n                            var reward = killed.Times(monster.Reward.ValueData.Value);\r\n                            console.log(\"[OfflineTime] \" + monster.ID + \" killed \" + killed);\r\n                            totalCoins = totalCoins.Plus(reward);\r\n                            console.log(\"[OfflineTime] \" + monster.ID + \": \" + utilsText_1.GetNumberText(reward) + \" Coins\");\r\n                            if (monster.RPDropChance.Value.IsMore(0)) {\r\n                                var RPDropCount = utilsRandom_1.Random.Utils.BoolCount(monster.RPDropChance.Value, killed);\r\n                                var rpDrop = game_1.Float.Times(RPDropCount, monster.RPDropValue.Value);\r\n                                totalRP = totalRP.Plus(rpDrop);\r\n                                console.log(\"[OfflineTime] \" + monster.ID + \": \" + utilsText_1.GetNumberText(rpDrop) + \" RP\");\r\n                            }\r\n                        }\r\n                        var offlineGainMultiplier = 1;\r\n                        if (elapsedTime.TotalMinutes.IsLess(15)) {\r\n                            offlineGainMultiplier = 1;\r\n                        }\r\n                        else if (elapsedTime.TotalMinutes.IsLess(30)) {\r\n                            offlineGainMultiplier = 0.9;\r\n                        }\r\n                        else if (elapsedTime.TotalMinutes.IsLess(120)) {\r\n                            offlineGainMultiplier = 0.8;\r\n                        }\r\n                        else if (elapsedTime.TotalMinutes.IsLess(360)) {\r\n                            offlineGainMultiplier = 0.7;\r\n                        }\r\n                        else if (elapsedTime.TotalHours.IsLess(12)) {\r\n                            offlineGainMultiplier = 0.6;\r\n                        }\r\n                        else {\r\n                            offlineGainMultiplier = 0.5;\r\n                        }\r\n                        console.log(\"Offline gain multiplier: \" + offlineGainMultiplier);\r\n                        var multipliedCoins = totalCoins.Times(offlineGainMultiplier);\r\n                        content_1.Content.Wallets.Coins.Add(multipliedCoins);\r\n                        var multipliedRP = new game_1.Float(0);\r\n                        if (totalRP.IsMore(0)) {\r\n                            multipliedRP = totalRP.Times(offlineGainMultiplier);\r\n                            content_1.Content.Rebirth.Stats.NonRebirthAward.Value\r\n                                = game_1.Float.Plus(content_1.Content.Rebirth.Stats.NonRebirthAward.Value, multipliedRP);\r\n                        }\r\n                        var title = content_1.Content.Timers.System.UnfocusTimeHappened\r\n                            ? \"Background\" : \"Offline\";\r\n                        var text = content_1.Content.Timers.System.UnfocusTimeHappened\r\n                            ? \"Game was in background\" : \"You was offline\";\r\n                        var maxText = maxOfflineTimeReached\r\n                            ? \"\\n(Max offline time reached: \" + maxOfflineHours + \"h)\" : \"\";\r\n                        overlayMessage_1.ShowOverlayMessage({\r\n                            Title: title + \" progress\",\r\n                            Text: text + \" for \" + utilsText_1.GetTimeText(basicElapsedTime)\r\n                                + (\"\\n\\nDuring this time, you earned [color=#fded0f]\" + utilsText_1.GetNumberText(multipliedCoins) + \" Coins[/color]!\")\r\n                                + (multipliedRP.IsMore(0) ? \"\\nMonsters dropped [color=#4ad674]\" + utilsText_1.GetNumberText(multipliedRP) + \" RP[/color]!\" : \"\")\r\n                                + (\"\\n\" + maxText),\r\n                            Icon: {\r\n                                Animation: \"Wallets\",\r\n                                Frame: 0,\r\n                            },\r\n                            Button: {\r\n                                Text: \"Cool\",\r\n                                Color: utilsMath_1.HexToRGB255(\"#e33b3b\"),\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }),\r\n            KongStats: new timer_1.Timer(content_1.TimerStorage, \"Timers.System.KongStats\", new time_1.Time(0, 1, 0, 0), 1, false, true, {\r\n                OnEvent: function () {\r\n                    try {\r\n                        if (kongregate_1.KongregateData.ApiLoaded && content_1.SystemData.IsContentLoaded) {\r\n                            kongregate_1.KongregateManager.stats.submit(\"Total Coins\", content_1.Content.Wallets.Coins.Statistics.TotalCollected.AsNumber);\r\n                            kongregate_1.KongregateManager.stats.submit(\"Total RP\", content_1.Content.Wallets.RebirthPoints.Statistics.TotalCollected.AsNumber);\r\n                            kongregate_1.KongregateManager.stats.submit(\"Rebirths\", content_1.Content.Rebirth.Stats.HappenedCount.Value.AsNumber);\r\n                            kongregate_1.KongregateManager.stats.submit(\"Time Played\", content_1.Content.Statistics.Time.TimePlayed.Value.TotalMinutes.AsNumber);\r\n                            kongregate_1.KongregateManager.stats.submit(\"Gunshot Total Damage\", content_1.Content.Turrets.Basic.Entity.Statistics.DamageDealt.AsNumber);\r\n                            kongregate_1.KongregateManager.stats.submit(\"Lasergun Total Damage\", content_1.Content.Turrets.Laser.Entity.Statistics.DamageDealt.AsNumber);\r\n                            kongregate_1.KongregateManager.stats.submit(\"Spikes Total Damage\", content_1.Content.Buildings.Spikes.Entity.Statistics.DamageDealt.AsNumber);\r\n                            kongregate_1.KongregateManager.stats.submit(\"Click Kills\", content_1.Content.Statistics.Gameplay.ClickKills.Value);\r\n                            kongregate_1.KongregateManager.stats.submit(\"Bally Total Coins\", content_1.Content.Monsters.Basic.Entity.Statistics.TotalCoinsMade.AsNumber);\r\n                            kongregate_1.KongregateManager.stats.submit(\"Rockster Total Coins\", content_1.Content.Monsters.Armored.Entity.Statistics.TotalCoinsMade.AsNumber);\r\n                            kongregate_1.KongregateManager.stats.submit(\"Total Clicks\", content_1.Content.Statistics.Gameplay.TotalClicks.Value);\r\n                            kongregate_1.KongregateManager.stats.submit(\"Gunshot Max Count\", content_1.Content.Turrets.Basic.Entity.Count.Value.AsNumber);\r\n                            kongregate_1.KongregateManager.stats.submit(\"Spikes Max Count\", content_1.Content.Buildings.Spikes.Entity.Count.Value.AsNumber);\r\n                            kongregate_1.KongregateManager.stats.submit(\"Lasergun Max Count\", content_1.Content.Turrets.Laser.Entity.Count.Value.AsNumber);\r\n                        }\r\n                    }\r\n                    catch (e) {\r\n                        console.log(\"KongStats updating error: \" + e.name + \"\\nIt says: '\" + e.message + \"'!\");\r\n                    }\r\n                }\r\n            }),\r\n        }); });\r\n        this.debug = new contentModule_1.ContentModule(ModuleStorage, \"Timers.Debug\", function () { return ({\r\n            Bot: new timer_1.Timer(content_1.TimerStorage, \"Timers.Debug.Bot\", new time_1.Time(0, 0, 2, 0), 1, false, true, {\r\n                OnEvent: function () {\r\n                    if (game_1.BUILD_MODE != \"Preview\" || !content_1.SystemData.Debug.Bot.Enabled)\r\n                        return;\r\n                    var GetUpgrades = function (items) {\r\n                        var upgrades = [];\r\n                        utilsObjects_1.ValuesOf(items).forEach(function (item) {\r\n                            if (item.Unlock.IsUnlocked) {\r\n                                // @ts-ignore\r\n                                upgrades.push.apply(upgrades, utilsObjects_1.ValuesOf(item.Upgrades));\r\n                            }\r\n                        });\r\n                        return upgrades;\r\n                    };\r\n                    // const upgrades = [\r\n                    //     ...GetUpgrades(ValuesOf(Content.Turrets)),\r\n                    //     ...GetUpgrades(ValuesOf(Content.Buildings)),\r\n                    //     ...GetUpgrades(ValuesOf(Content.Monsters))];\r\n                    var upgrades = ContentStorage.GetAllItemsOfType(upgrade_1.Upgrade);\r\n                    content_1.RNG.shuffle(upgrades);\r\n                    for (var _i = 0, upgrades_1 = upgrades; _i < upgrades_1.length; _i++) {\r\n                        var upgrade = upgrades_1[_i];\r\n                        if (upgrade.IsCanBuy(1)) {\r\n                            upgrade.Buy(1);\r\n                        }\r\n                    }\r\n                    // ValuesOf(Content.Turrets).forEach((turret) => {\r\n                    //     if (turret.Unlock.IsUnlocked) {\r\n                    //         for (const upgrade of ValuesOf(turret.Upgrades)) {\r\n                    //             if (upgrade.IsCanBuy(1)) {\r\n                    //                 upgrade.Buy(1);\r\n                    //             }\r\n                    //         }\r\n                    //     }\r\n                    // });\r\n                    //\r\n                    // ValuesOf(Content.Monsters).forEach((monster) => {\r\n                    //     if (monster.Unlock.IsUnlocked) {\r\n                    //         for (const upgrade of ValuesOf(monster.Upgrades)) {\r\n                    //             if (upgrade.IsCanBuy(1)) {\r\n                    //                 upgrade.Buy(1);\r\n                    //             }\r\n                    //         }\r\n                    //     }\r\n                    // })\r\n                    var doClickDamage = content_1.RNG.bool(0.75);\r\n                    if (doClickDamage) {\r\n                        var monsters = main_1.Construct3.objects.Monster.getAllInstances();\r\n                        if (monsters.length > 0) {\r\n                            main_1.Construct3.callFunction(\"DoClickDamage\", content_1.RNG.pick(monsters).uid);\r\n                        }\r\n                    }\r\n                }\r\n            }),\r\n        }); });\r\n    }\r\n    Object.defineProperty(AllTimersContent.prototype, \"Game\", {\r\n        get: function () {\r\n            return this.game.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllTimersContent.prototype, \"System\", {\r\n        get: function () {\r\n            return this.system.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllTimersContent.prototype, \"Debug\", {\r\n        get: function () {\r\n            return this.debug.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return AllTimersContent;\r\n}());\r\nexports.AllTimersContent = AllTimersContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/data/initTimers.ts?");

/***/ }),

/***/ "./src/content/modules/data/initWallets.ts":
/*!*************************************************!*\
  !*** ./src/content/modules/data/initWallets.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AllWalletsContent = exports.InitWallets = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar wallet_1 = __webpack_require__(/*! ../../../game/gameObjects/wallet */ \"./src/game/gameObjects/wallet.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\nfunction InitWallets(storage, content) {\r\n    return new AllWalletsContent(storage, content);\r\n}\r\nexports.InitWallets = InitWallets;\r\nvar AllWalletsContent = /** @class */ (function () {\r\n    function AllWalletsContent(ModuleStorage, ContentStorage) {\r\n        this.ModuleStorage = ModuleStorage;\r\n        this.ContentStorage = ContentStorage;\r\n        this.wallets = new contentModule_1.ContentModule(ModuleStorage, \"Wallets\", function () { return ({\r\n            Coins: new wallet_1.Wallet(ContentStorage, 'Coins', content_1.Content.Stats.Game.StartCoins.Value, function (_valueBefore, _valueAfter, diff) {\r\n                if (diff.IsMore(0)) {\r\n                    content_1.Content.Stats.Coins.CollectedBeforeRebirth.Add(diff);\r\n                    content_1.Content.Rebirth.Stats.NextPointProgress.AddPoints(diff);\r\n                }\r\n            }),\r\n            RebirthPoints: new wallet_1.Wallet(ContentStorage, 'RebirthPoints', 0)\r\n        }); });\r\n    }\r\n    Object.defineProperty(AllWalletsContent.prototype, \"Coins\", {\r\n        get: function () {\r\n            return this.wallets.Get().Coins;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllWalletsContent.prototype, \"RebirthPoints\", {\r\n        get: function () {\r\n            return this.wallets.Get().RebirthPoints;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return AllWalletsContent;\r\n}());\r\nexports.AllWalletsContent = AllWalletsContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/data/initWallets.ts?");

/***/ }),

/***/ "./src/content/modules/monsters/armoredMonsterContent.ts":
/*!***************************************************************!*\
  !*** ./src/content/modules/monsters/armoredMonsterContent.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ArmoredMonsterContent = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\nvar unlock_1 = __webpack_require__(/*! ../../../data/unlock */ \"./src/data/unlock.ts\");\r\nvar fightManager_1 = __webpack_require__(/*! ../../../game/managers/fightManager */ \"./src/game/managers/fightManager.ts\");\r\nvar upgrade_1 = __webpack_require__(/*! ../../../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar monster_1 = __webpack_require__(/*! ../../../game/fighting/monster */ \"./src/game/fighting/monster.ts\");\r\nvar reward_1 = __webpack_require__(/*! ../../../data/game/reward */ \"./src/data/game/reward.ts\");\r\nvar priceArray_1 = __webpack_require__(/*! ../../../data/priceArray */ \"./src/data/priceArray.ts\");\r\nvar price_1 = __webpack_require__(/*! ../../../game/gameObjects/price */ \"./src/game/gameObjects/price.ts\");\r\nvar progressionCalculator_1 = __webpack_require__(/*! ../../../data/math/valueCalcs/progressionCalculator */ \"./src/data/math/valueCalcs/progressionCalculator.ts\");\r\nvar progression_1 = __webpack_require__(/*! ../../../data/math/progression */ \"./src/data/math/progression.ts\");\r\nvar level_1 = __webpack_require__(/*! ../../../data/game/level */ \"./src/data/game/level.ts\");\r\nvar tweakArray_1 = __webpack_require__(/*! ../../../game/tweakArray */ \"./src/game/tweakArray.ts\");\r\nvar tweak_1 = __webpack_require__(/*! ../../../game/tweak */ \"./src/game/tweak.ts\");\r\nvar container_1 = __webpack_require__(/*! ../../../game/gameObjects/container */ \"./src/game/gameObjects/container.ts\");\r\nvar uiBuilder_1 = __webpack_require__(/*! ../../../../javascript/construct3/c3ObjectUtils/uiBuilder */ \"./javascript/construct3/c3ObjectUtils/uiBuilder.ts\");\r\nvar gui_1 = __webpack_require__(/*! ../../../ui/gui */ \"./src/ui/gui.ts\");\r\nvar ArmoredMonsterContent = /** @class */ (function () {\r\n    function ArmoredMonsterContent(Storage, ContentStorage) {\r\n        var _this = this;\r\n        this.Storage = Storage;\r\n        this.ContentStorage = ContentStorage;\r\n        var id = \"ArmoredMonster\";\r\n        this.system = new contentModule_1.ContentModule(this.Storage, id + \".System\", function () { return ({\r\n            IsNotificationShown: new container_1.Container(_this.ContentStorage, id + \".System.IsNotificationShown\", false),\r\n            IsEverUnlocked: new container_1.Container(_this.ContentStorage, id + \".System.IsEverUnlocked\", false),\r\n            IsEnabled: new container_1.Container(_this.ContentStorage, id + \".System.IsEnabled\", true)\r\n        }); });\r\n        this.profile = new contentModule_1.ContentModule(this.Storage, id + \".Profile\", function () {\r\n            return new monster_1.Monster(_this.ContentStorage, \"\" + id, content_1.Content.Monsters.Armored.Unlock, new reward_1.Reward(content_1.Content.Wallets.Coins, 1250), 100, 30, 7500, 1, 10, 0, 5, 2500, 0, 0, 1, 2, 0);\r\n        });\r\n        this.unlock = new contentModule_1.ContentModule(this.Storage, id + \".Unlock\", function () {\r\n            return new unlock_1.Unlock(_this.ContentStorage, \"Unlock::\" + id, false, new fightManager_1.OnArmoredMonsterUnlocked());\r\n        });\r\n        this.unlockPurchase = new contentModule_1.ContentModule(this.Storage, id + \".UnlockPurchase\", function () {\r\n            return new upgrade_1.UnlockUpgrade(_this.ContentStorage, id + \".UnlockPurchase\", content_1.Content.Monsters.Armored.Unlock, new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 2500, 0, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical)),\r\n            ]));\r\n        });\r\n        this.upgrades = new contentModule_1.ContentModule(this.Storage, id + \".Upgrades\", function () { return ({\r\n            Health: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Health\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 100), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 2000, 1.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Health::Health\", false, 25, 25, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Armored.Entity.Health),\r\n                new tweak_1.Tweak(id + \".Health::Reward\", false, 500, 500, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Armored.Entity.Reward.ValueData)\r\n            ]), undefined, true),\r\n            Speed: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Speed\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 50), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 5000, 2.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Speed::Speed\", false, 10, 10, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Armored.Entity.Speed),\r\n                new tweak_1.Tweak(id + \".Speed::Reward\", false, 500, 500, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Armored.Entity.Reward.ValueData)\r\n            ])),\r\n            SpawnTime: new upgrade_1.Upgrade(_this.ContentStorage, id + \".SpawnTime\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 50), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 7500, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".SpawnTime::SpawnTime\", false, 125, 125, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionMinus(), content_1.Content.Monsters.Armored.Entity.SpawnTimeMS)\r\n            ])),\r\n            Count: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Count\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 20), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 10000, 3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Count::Count\", false, 1, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Armored.Entity.MaxCount)\r\n            ])),\r\n            InstantSpawnChance: new upgrade_1.Upgrade(_this.ContentStorage, id + \".InstantSpawnChance\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 15), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 20000, 2.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".InstantSpawnChance::Chance\", false, 5, 5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Armored.Entity.InstantSpawnChance),\r\n                new tweak_1.Tweak(id + \".InstantSpawnChance::Reward\", false, 1000, 1000, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Armored.Entity.Reward.ValueData)\r\n            ])),\r\n            Shield: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Shield\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 15), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 400000, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Shield::Shield\", false, 200, 200, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Armored.Entity.Shield),\r\n                new tweak_1.Tweak(id + \".Shield::Reward\", false, 5000, 5000, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Armored.Entity.Reward.ValueData)\r\n            ])),\r\n        }); });\r\n    }\r\n    ArmoredMonsterContent.prototype.InitUI = function () {\r\n        var monster = this.Entity;\r\n        var upgrades = this.Upgrades;\r\n        {\r\n            //# Upgrades: Health #\r\n            var upgrade = upgrades.Health;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.Health\"), upgrade, \"#519e5e\", \"Health\", [\"Health\", \"Reward\"]);\r\n        }\r\n        {\r\n            //# Upgrades: Speed #\r\n            var upgrade = upgrades.Speed;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.Speed\"), upgrade, \"#5581af\", \"Speed\", [\"Speed\", \"Reward\"]);\r\n        }\r\n        {\r\n            //# Upgrades: SpawnTime #\r\n            var upgrade = upgrades.SpawnTime;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.SpawnTime\"), upgrade, \"#89833e\", \"Spawn duration\", [\"Duration\"]);\r\n        }\r\n        {\r\n            //# Upgrades: Count #\r\n            var upgrade = upgrades.Count;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.Count\"), upgrade, \"#4c8a9a\", \"Max count\", [\"Count\"]);\r\n        }\r\n        {\r\n            //# Upgrades: InstantSpawnChance #\r\n            var upgrade = upgrades.InstantSpawnChance;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.InstantSpawnChance\"), upgrade, \"#814f9c\", \"Instant spawn chance\", [\"Chance\", \"Reward\"]);\r\n        }\r\n        {\r\n            //# Upgrades: Shield #\r\n            var upgrade = upgrades.Shield;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.Shield\"), upgrade, \"#4b7fd2\", \"Shield\", [\"Shield\", \"Reward\"]);\r\n        }\r\n    };\r\n    Object.defineProperty(ArmoredMonsterContent.prototype, \"System\", {\r\n        get: function () {\r\n            return this.system.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ArmoredMonsterContent.prototype, \"Entity\", {\r\n        get: function () {\r\n            return this.profile.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ArmoredMonsterContent.prototype, \"Unlock\", {\r\n        get: function () {\r\n            return this.unlock.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ArmoredMonsterContent.prototype, \"UnlockPurchase\", {\r\n        get: function () {\r\n            return this.unlockPurchase.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ArmoredMonsterContent.prototype, \"Upgrades\", {\r\n        get: function () {\r\n            return this.upgrades.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ArmoredMonsterContent;\r\n}());\r\nexports.ArmoredMonsterContent = ArmoredMonsterContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/monsters/armoredMonsterContent.ts?");

/***/ }),

/***/ "./src/content/modules/monsters/basicMonsterContent.ts":
/*!*************************************************************!*\
  !*** ./src/content/modules/monsters/basicMonsterContent.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BasicMonsterContent = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar monster_1 = __webpack_require__(/*! ../../../game/fighting/monster */ \"./src/game/fighting/monster.ts\");\r\nvar upgrade_1 = __webpack_require__(/*! ../../../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\nvar reward_1 = __webpack_require__(/*! ../../../data/game/reward */ \"./src/data/game/reward.ts\");\r\nvar unlock_1 = __webpack_require__(/*! ../../../data/unlock */ \"./src/data/unlock.ts\");\r\nvar priceArray_1 = __webpack_require__(/*! ../../../data/priceArray */ \"./src/data/priceArray.ts\");\r\nvar price_1 = __webpack_require__(/*! ../../../game/gameObjects/price */ \"./src/game/gameObjects/price.ts\");\r\nvar progressionCalculator_1 = __webpack_require__(/*! ../../../data/math/valueCalcs/progressionCalculator */ \"./src/data/math/valueCalcs/progressionCalculator.ts\");\r\nvar progression_1 = __webpack_require__(/*! ../../../data/math/progression */ \"./src/data/math/progression.ts\");\r\nvar level_1 = __webpack_require__(/*! ../../../data/game/level */ \"./src/data/game/level.ts\");\r\nvar tweakArray_1 = __webpack_require__(/*! ../../../game/tweakArray */ \"./src/game/tweakArray.ts\");\r\nvar tweak_1 = __webpack_require__(/*! ../../../game/tweak */ \"./src/game/tweak.ts\");\r\nvar fightManager_1 = __webpack_require__(/*! ../../../game/managers/fightManager */ \"./src/game/managers/fightManager.ts\");\r\nvar container_1 = __webpack_require__(/*! ../../../game/gameObjects/container */ \"./src/game/gameObjects/container.ts\");\r\nvar uiBuilder_1 = __webpack_require__(/*! ../../../../javascript/construct3/c3ObjectUtils/uiBuilder */ \"./javascript/construct3/c3ObjectUtils/uiBuilder.ts\");\r\nvar gui_1 = __webpack_require__(/*! ../../../ui/gui */ \"./src/ui/gui.ts\");\r\nvar BasicMonsterContent = /** @class */ (function () {\r\n    function BasicMonsterContent(Storage, ContentStorage) {\r\n        var _this = this;\r\n        this.Storage = Storage;\r\n        this.ContentStorage = ContentStorage;\r\n        var id = \"BasicMonster\";\r\n        this.system = new contentModule_1.ContentModule(this.Storage, id + \".System\", function () { return ({\r\n            IsEverUnlocked: new container_1.Container(_this.ContentStorage, id + \".System.IsEverUnlocked\", false),\r\n            IsEnabled: new container_1.Container(_this.ContentStorage, id + \".System.IsEnabled\", true),\r\n        }); });\r\n        this.profile = new contentModule_1.ContentModule(this.Storage, id + \".Profile\", function () {\r\n            return new monster_1.Monster(_this.ContentStorage, \"\" + id, content_1.Content.Monsters.Basic.Unlock, new reward_1.Reward(content_1.Content.Wallets.Coins, 0.1), 0.5, 70, 3000, 1, 0.1, 0, 10, 750, 0, 0, 1, 2, 0);\r\n        });\r\n        this.unlock = new contentModule_1.ContentModule(this.Storage, id + \".Unlock\", function () {\r\n            return new unlock_1.Unlock(_this.ContentStorage, \"Unlock::\" + id, false, new fightManager_1.OnBasicMonsterUnlocked());\r\n        });\r\n        this.unlockPurchase = new contentModule_1.ContentModule(this.Storage, id + \".UnlockPurchase\", function () {\r\n            return new upgrade_1.UnlockUpgrade(_this.ContentStorage, id + \".UnlockPurchase\", content_1.Content.Monsters.Basic.Unlock, new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 0.1, 0, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical)),\r\n            ]), true);\r\n        });\r\n        this.upgrades = new contentModule_1.ContentModule(this.Storage, id + \".Upgrades\", function () { return ({\r\n            Health: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Health\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 5000), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 0.2, 1.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Health::Health\", false, 0.1, 0.1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Basic.Entity.Health),\r\n                new tweak_1.Tweak(id + \".Health::Reward\", false, 0.2, 0.2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Basic.Entity.Reward.ValueData)\r\n            ]), undefined, true),\r\n            Speed: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Speed\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 50), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 1.5, 2.7, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Speed::Speed\", false, 15, 15, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Basic.Entity.Speed),\r\n                new tweak_1.Tweak(id + \".Speed::Reward\", false, 0.4, 0.4, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Basic.Entity.Reward.ValueData)\r\n            ])),\r\n            Count: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Count\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 20), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 5, 3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Count::Count\", false, 1, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Basic.Entity.MaxCount)\r\n            ])),\r\n            SpawnTime: new upgrade_1.Upgrade(_this.ContentStorage, id + \".SpawnTime\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 20), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 10, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".SpawnTime::SpawnTime\", false, 75, 75, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionMinus(), content_1.Content.Monsters.Basic.Entity.SpawnTimeMS)\r\n            ])),\r\n            InstantSpawnChance: new upgrade_1.Upgrade(_this.ContentStorage, id + \".InstantSpawnChance\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 15), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 100, 2.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".InstantSpawnChance::Chance\", false, 5, 5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Basic.Entity.InstantSpawnChance),\r\n                new tweak_1.Tweak(id + \".InstantSpawnChance::Reward\", false, 1, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Basic.Entity.Reward.ValueData)\r\n            ])),\r\n            //todo show notfication when unlocked maybe?\r\n            Shield: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Shield\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 15), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 250000, 1.8, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Shield::Shield\", false, 5, 5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Basic.Entity.Shield),\r\n                new tweak_1.Tweak(id + \".Shield::Reward\", false, 7, 7, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Basic.Entity.Reward.ValueData)\r\n            ])),\r\n        }); });\r\n    }\r\n    BasicMonsterContent.prototype.InitUI = function () {\r\n        var monster = this.Entity;\r\n        var upgrades = this.Upgrades;\r\n        {\r\n            //# Upgrades: InstantSpawnChance #\r\n            var upgrade = upgrades.InstantSpawnChance;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.InstantSpawnChance\"), upgrade, \"#814f9c\", \"Instant spawn chance\", [\"Chance\", \"Reward\"]);\r\n        }\r\n        {\r\n            //# Upgrades: Shield #\r\n            var upgrade = upgrades.Shield;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.Shield\"), upgrade, \"#4b7fd2\", \"Shield\", [\"Shield\", \"Reward\"]);\r\n        }\r\n    };\r\n    Object.defineProperty(BasicMonsterContent.prototype, \"System\", {\r\n        get: function () {\r\n            return this.system.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BasicMonsterContent.prototype, \"Entity\", {\r\n        get: function () {\r\n            return this.profile.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BasicMonsterContent.prototype, \"Unlock\", {\r\n        get: function () {\r\n            return this.unlock.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BasicMonsterContent.prototype, \"UnlockPurchase\", {\r\n        get: function () {\r\n            return this.unlockPurchase.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BasicMonsterContent.prototype, \"Upgrades\", {\r\n        get: function () {\r\n            return this.upgrades.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return BasicMonsterContent;\r\n}());\r\nexports.BasicMonsterContent = BasicMonsterContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/monsters/basicMonsterContent.ts?");

/***/ }),

/***/ "./src/content/modules/monsters/fastMonsterContent.ts":
/*!************************************************************!*\
  !*** ./src/content/modules/monsters/fastMonsterContent.ts ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FastMonsterContent = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar monster_1 = __webpack_require__(/*! ../../../game/fighting/monster */ \"./src/game/fighting/monster.ts\");\r\nvar upgrade_1 = __webpack_require__(/*! ../../../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\nvar reward_1 = __webpack_require__(/*! ../../../data/game/reward */ \"./src/data/game/reward.ts\");\r\nvar unlock_1 = __webpack_require__(/*! ../../../data/unlock */ \"./src/data/unlock.ts\");\r\nvar priceArray_1 = __webpack_require__(/*! ../../../data/priceArray */ \"./src/data/priceArray.ts\");\r\nvar price_1 = __webpack_require__(/*! ../../../game/gameObjects/price */ \"./src/game/gameObjects/price.ts\");\r\nvar progressionCalculator_1 = __webpack_require__(/*! ../../../data/math/valueCalcs/progressionCalculator */ \"./src/data/math/valueCalcs/progressionCalculator.ts\");\r\nvar progression_1 = __webpack_require__(/*! ../../../data/math/progression */ \"./src/data/math/progression.ts\");\r\nvar level_1 = __webpack_require__(/*! ../../../data/game/level */ \"./src/data/game/level.ts\");\r\nvar tweakArray_1 = __webpack_require__(/*! ../../../game/tweakArray */ \"./src/game/tweakArray.ts\");\r\nvar tweak_1 = __webpack_require__(/*! ../../../game/tweak */ \"./src/game/tweak.ts\");\r\nvar fightManager_1 = __webpack_require__(/*! ../../../game/managers/fightManager */ \"./src/game/managers/fightManager.ts\");\r\nvar container_1 = __webpack_require__(/*! ../../../game/gameObjects/container */ \"./src/game/gameObjects/container.ts\");\r\nvar uiBuilder_1 = __webpack_require__(/*! ../../../../javascript/construct3/c3ObjectUtils/uiBuilder */ \"./javascript/construct3/c3ObjectUtils/uiBuilder.ts\");\r\nvar gui_1 = __webpack_require__(/*! ../../../ui/gui */ \"./src/ui/gui.ts\");\r\nvar FastMonsterContent = /** @class */ (function () {\r\n    function FastMonsterContent(Storage, ContentStorage) {\r\n        var _this = this;\r\n        this.Storage = Storage;\r\n        this.ContentStorage = ContentStorage;\r\n        var id = \"FastMonster\";\r\n        this.system = new contentModule_1.ContentModule(this.Storage, id + \".System\", function () { return ({\r\n            IsEverUnlocked: new container_1.Container(_this.ContentStorage, id + \".System.IsEverUnlocked\", false),\r\n            IsNotificationShown: new container_1.Container(_this.ContentStorage, id + \".System.IsNotificationShown\", false),\r\n            IsEnabled: new container_1.Container(_this.ContentStorage, id + \".System.IsEnabled\", true),\r\n        }); });\r\n        this.profile = new contentModule_1.ContentModule(this.Storage, id + \".Profile\", function () {\r\n            return new monster_1.Monster(_this.ContentStorage, \"\" + id, content_1.Content.Monsters.Fast.Unlock, new reward_1.Reward(content_1.Content.Wallets.RebirthPoints, 10), 50, 185, 10000, 1, 1, 100, 1, 5000, 10, 0, 0.9, 2, 0);\r\n        });\r\n        this.unlock = new contentModule_1.ContentModule(this.Storage, id + \".Unlock\", function () {\r\n            return new unlock_1.Unlock(_this.ContentStorage, \"Unlock::\" + id, false, new fightManager_1.OnFastMonsterUnlocked());\r\n        });\r\n        this.unlockPurchase = new contentModule_1.ContentModule(this.Storage, id + \".UnlockPurchase\", function () {\r\n            return new upgrade_1.UnlockUpgrade(_this.ContentStorage, id + \".UnlockPurchase\", content_1.Content.Monsters.Fast.Unlock, new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 1000000, 0, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical)),\r\n            ]), true);\r\n        });\r\n        this.upgrades = new contentModule_1.ContentModule(this.Storage, id + \".Upgrades\", function () { return ({\r\n            Health: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Health\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 5000), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 500000, 1.7, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Health::Health\", false, 20, 20, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Fast.Entity.Health),\r\n                new tweak_1.Tweak(id + \".Health::Reward\", false, 5, 5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Fast.Entity.Reward.ValueData)\r\n            ]), undefined, true),\r\n            Speed: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Speed\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 25), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 750000, 1.9, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Speed::Speed\", false, 40, 40, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Fast.Entity.Speed),\r\n                new tweak_1.Tweak(id + \".Speed::Reward\", false, 10, 10, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Fast.Entity.Reward.ValueData)\r\n            ])),\r\n            SpawnTime: new upgrade_1.Upgrade(_this.ContentStorage, id + \".SpawnTime\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 30), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 900000, 1.8, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".SpawnTime\", false, 75, 75, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionMinus(), content_1.Content.Monsters.Fast.Entity.SpawnTimeMS)\r\n            ])),\r\n            Count: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Count\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 20), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 1250000, 3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Count\", false, 1, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Fast.Entity.MaxCount)\r\n            ])),\r\n            Reward: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Reward\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 100), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 1500000, 2.2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Reward\", false, 10, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Fast.Entity.Reward.ValueData),\r\n            ])),\r\n            DodgeChance: new upgrade_1.Upgrade(_this.ContentStorage, id + \".DodgeChance\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 15), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 1500000, 2.2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".DodgeChance::Chance\", false, 5, 5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Fast.Entity.DodgeChance),\r\n                new tweak_1.Tweak(id + \".DodgeChance::Reward\", false, 2, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Fast.Entity.Reward.ValueData)\r\n            ])),\r\n            DamageReductionMP: new upgrade_1.Upgrade(_this.ContentStorage, id + \".DamageReductionMP\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 15), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 2000000, 2.3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".DamageReductionMP::MP\", false, 0.01, 0.01, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionMinus(), content_1.Content.Monsters.Fast.Entity.DamageReductionMP),\r\n                new tweak_1.Tweak(id + \".DamageReductionMP::Reward\", false, 7, 7, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Fast.Entity.Reward.ValueData)\r\n            ])),\r\n            InstantSpawnChance: new upgrade_1.Upgrade(_this.ContentStorage, id + \".InstantSpawnChance\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 15), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 2500000, 3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".InstantSpawnChance::Chance\", false, 5, 5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Basic.Entity.InstantSpawnChance),\r\n                new tweak_1.Tweak(id + \".InstantSpawnChance::Reward\", false, 10, 10, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Fast.Entity.Reward.ValueData)\r\n            ])),\r\n        }); });\r\n    }\r\n    FastMonsterContent.prototype.InitUI = function () {\r\n        var monster = this.Entity;\r\n        var upgrades = this.Upgrades;\r\n        {\r\n            {\r\n                //# Upgrades: Health #\r\n                var upgrade = upgrades.Health;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.Health\"), upgrade, \"#519e5e\", \"Health\", [\"Health\", \"Reward\"]);\r\n            }\r\n            {\r\n                //# Upgrades: Speed #\r\n                var upgrade = upgrades.Speed;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.Speed\"), upgrade, \"#5581af\", \"Speed\", [\"Speed\", \"Reward\"]);\r\n            }\r\n            {\r\n                //# Upgrades: SpawnTime #\r\n                var upgrade = upgrades.SpawnTime;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.SpawnTime\"), upgrade, \"#89833e\", \"Spawn duration\", [\"Duration\"]);\r\n            }\r\n            {\r\n                //# Upgrades: Count #\r\n                var upgrade = upgrades.Count;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.Count\"), upgrade, \"#4c8a9a\", \"Count\", [\"Count\"]);\r\n            }\r\n            {\r\n                //# Upgrades: InstantSpawnChance #\r\n                var upgrade = upgrades.InstantSpawnChance;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.InstantSpawnChance\"), upgrade, \"#814f9c\", \"Instant pawn chance\", [\"Health\", \"Reward\"]);\r\n            }\r\n            {\r\n                //# Upgrades: DodgeChance #\r\n                var upgrade = upgrades.DodgeChance;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.DodgeChance\"), upgrade, \"#3d858a\", \"Dodge chance\", [\"Chance\", \"Reward\"]);\r\n            }\r\n            {\r\n                //# Upgrades: DamageReductionMP #\r\n                var upgrade = upgrades.DamageReductionMP;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.DamageReduction\"), upgrade, \"#a24e4e\", \"All damage mp\", [\"Health\", \"Reward\"]);\r\n            }\r\n            {\r\n                //# Upgrades: Reward #\r\n                var upgrade = upgrades.Reward;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(monster.ID + \".Upgrades.Reward\"), upgrade, \"#519e5e\", \"Reward\", [\"RP\"]);\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(FastMonsterContent.prototype, \"System\", {\r\n        get: function () {\r\n            return this.system.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FastMonsterContent.prototype, \"Entity\", {\r\n        get: function () {\r\n            return this.profile.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FastMonsterContent.prototype, \"Unlock\", {\r\n        get: function () {\r\n            return this.unlock.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FastMonsterContent.prototype, \"UnlockPurchase\", {\r\n        get: function () {\r\n            return this.unlockPurchase.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FastMonsterContent.prototype, \"Upgrades\", {\r\n        get: function () {\r\n            return this.upgrades.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return FastMonsterContent;\r\n}());\r\nexports.FastMonsterContent = FastMonsterContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/monsters/fastMonsterContent.ts?");

/***/ }),

/***/ "./src/content/modules/monsters/initMonsters.ts":
/*!******************************************************!*\
  !*** ./src/content/modules/monsters/initMonsters.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InitMonsters = void 0;\r\nvar basicMonsterContent_1 = __webpack_require__(/*! ./basicMonsterContent */ \"./src/content/modules/monsters/basicMonsterContent.ts\");\r\nvar armoredMonsterContent_1 = __webpack_require__(/*! ./armoredMonsterContent */ \"./src/content/modules/monsters/armoredMonsterContent.ts\");\r\nvar fastMonsterContent_1 = __webpack_require__(/*! ./fastMonsterContent */ \"./src/content/modules/monsters/fastMonsterContent.ts\");\r\nfunction InitMonsters(storage, content) {\r\n    return {\r\n        Basic: new basicMonsterContent_1.BasicMonsterContent(storage, content),\r\n        Armored: new armoredMonsterContent_1.ArmoredMonsterContent(storage, content),\r\n        Fast: new fastMonsterContent_1.FastMonsterContent(storage, content),\r\n    };\r\n}\r\nexports.InitMonsters = InitMonsters;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/monsters/initMonsters.ts?");

/***/ }),

/***/ "./src/content/modules/rebirth/initRebirth.ts":
/*!****************************************************!*\
  !*** ./src/content/modules/rebirth/initRebirth.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InitRebirth = void 0;\r\nvar rebirthContent_1 = __webpack_require__(/*! ./rebirthContent */ \"./src/content/modules/rebirth/rebirthContent.ts\");\r\nfunction InitRebirth(storage, content) {\r\n    return new rebirthContent_1.RebirthContent(storage, content);\r\n}\r\nexports.InitRebirth = InitRebirth;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/rebirth/initRebirth.ts?");

/***/ }),

/***/ "./src/content/modules/rebirth/rebirthContent.ts":
/*!*******************************************************!*\
  !*** ./src/content/modules/rebirth/rebirthContent.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RebirthContent = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar upgrade_1 = __webpack_require__(/*! ../../../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar gameData_1 = __webpack_require__(/*! ../../../data/game/gameData */ \"./src/data/game/gameData.ts\");\r\nvar points_1 = __webpack_require__(/*! ../../../game/gameObjects/points */ \"./src/game/gameObjects/points.ts\");\r\nvar float_1 = __webpack_require__(/*! ../../../data/math/float */ \"./src/data/math/float.ts\");\r\nvar level_1 = __webpack_require__(/*! ../../../data/game/level */ \"./src/data/game/level.ts\");\r\nvar progressionCalculator_1 = __webpack_require__(/*! ../../../data/math/valueCalcs/progressionCalculator */ \"./src/data/math/valueCalcs/progressionCalculator.ts\");\r\nvar progression_1 = __webpack_require__(/*! ../../../data/math/progression */ \"./src/data/math/progression.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\nvar priceArray_1 = __webpack_require__(/*! ../../../data/priceArray */ \"./src/data/priceArray.ts\");\r\nvar price_1 = __webpack_require__(/*! ../../../game/gameObjects/price */ \"./src/game/gameObjects/price.ts\");\r\nvar tweakArray_1 = __webpack_require__(/*! ../../../game/tweakArray */ \"./src/game/tweakArray.ts\");\r\nvar tweak_1 = __webpack_require__(/*! ../../../game/tweak */ \"./src/game/tweak.ts\");\r\nvar gameObject_1 = __webpack_require__(/*! ../../../game/gameObject */ \"./src/game/gameObject.ts\");\r\nvar initTurrets_1 = __webpack_require__(/*! ../turrets/initTurrets */ \"./src/content/modules/turrets/initTurrets.ts\");\r\nvar utilsObjects_1 = __webpack_require__(/*! ../../../utils/utilsObjects */ \"./src/utils/utilsObjects.ts\");\r\nvar themeUnlocks_1 = __webpack_require__(/*! ../../themeUnlocks */ \"./src/content/themeUnlocks.ts\");\r\nvar monster_1 = __webpack_require__(/*! ../../../game/fighting/monster */ \"./src/game/fighting/monster.ts\");\r\nvar container_1 = __webpack_require__(/*! ../../../game/gameObjects/container */ \"./src/game/gameObjects/container.ts\");\r\nvar uiBuilder_1 = __webpack_require__(/*! ../../../../javascript/construct3/c3ObjectUtils/uiBuilder */ \"./javascript/construct3/c3ObjectUtils/uiBuilder.ts\");\r\nvar gui_1 = __webpack_require__(/*! ../../../ui/gui */ \"./src/ui/gui.ts\");\r\nvar initBuildings_1 = __webpack_require__(/*! ../buildings/initBuildings */ \"./src/content/modules/buildings/initBuildings.ts\");\r\nvar utilsGUI_1 = __webpack_require__(/*! ../../../../javascript/construct3/c3ObjectUtils/utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar game_1 = __webpack_require__(/*! ../../../game */ \"./src/game.ts\");\r\nvar RebirthContent = /** @class */ (function () {\r\n    function RebirthContent(ModuleStorage, ContentStorage) {\r\n        var _this = this;\r\n        this.ModuleStorage = ModuleStorage;\r\n        this.ContentStorage = ContentStorage;\r\n        var moduleId = \"Rebirth\";\r\n        //# STATS #\r\n        {\r\n            var id_1 = moduleId + \".Stats\";\r\n            this.stats = new contentModule_1.ContentModule(this.ModuleStorage, id_1, function () { return ({\r\n                IsNotificationShow: new container_1.Container(ContentStorage, id_1 + \".IsNotificationShow\", false),\r\n                PointsPerLevel: new gameData_1.GameData(id_1 + \".PointsPerLevel\", 0.1),\r\n                NextPointProgress: new points_1.Points(_this.ContentStorage, id_1 + \".NextPointProgress\", new level_1.Level(0, null), 0, 40, 0.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), function (levels) {\r\n                    if (content_1.SystemData.IsContentLoaded) {\r\n                        var value = content_1.Content.Rebirth.Stats.PointsPerLevel.Value.Times(levels);\r\n                        content_1.Content.Rebirth.Stats.RebirthAward.Value\r\n                            = float_1.Float.Plus(content_1.Content.Rebirth.Stats.RebirthAward.Value, value);\r\n                    }\r\n                }),\r\n                RebirthAwardMP: new gameData_1.GameData(id_1 + \".RebirthAwardMP\", 1),\r\n                RebirthAward: new container_1.Container(_this.ContentStorage, id_1 + \".RebirthAward\", new float_1.Float(0), container_1.FloatContainer),\r\n                NonRebirthAward: new container_1.Container(_this.ContentStorage, id_1 + \".NonRebirthAward\", new float_1.Float(0), container_1.FloatContainer),\r\n                HappenedCount: new float_1.GameFloat(_this.ContentStorage, id_1 + \".HappenedCount\", 0),\r\n                TotalRPMade: new float_1.GameFloat(_this.ContentStorage, id_1 + \".TotalRPMade\", 0),\r\n                LastRebirth: new container_1.Container(_this.ContentStorage, id_1 + \".LastRebirth\", new Date(), container_1.DateContainer),\r\n            }); });\r\n        }\r\n        //# MAIN #\r\n        {\r\n            var id_2 = moduleId + \".Main\";\r\n            this.main = new contentModule_1.ContentModule(this.ModuleStorage, id_2, function () { return ({\r\n                StartCoinBonus: new upgrade_1.Upgrade(_this.ContentStorage, id_2 + \".StartCoinBonus\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 100), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 0.1, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_2 + \".StartCoinBonus\", false, 10, 1.85, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical), new tweak_1.TweakFunctionPlus(), content_1.Content.Stats.Game.StartCoins)\r\n                ]), undefined, true),\r\n                RPPerLevel: new upgrade_1.Upgrade(_this.ContentStorage, id_2 + \".RPPerLevel\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 20), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 0.5, 2.1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_2 + \".RPPerLevel\", false, 0.05, 0.05, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Rebirth.Stats.PointsPerLevel)\r\n                ]), undefined, true),\r\n                RPRewardMP: new upgrade_1.Upgrade(_this.ContentStorage, id_2 + \".RPRewardMP\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 10), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 50, 2.2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_2 + \".RPRewardMP\", false, 1.5, 0.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionTimes(), content_1.Content.Rebirth.Stats.RebirthAwardMP)\r\n                ]), undefined, false),\r\n            }); });\r\n        }\r\n        //# MONSTERS #\r\n        {\r\n            var id_3 = moduleId + \".BasicMonster\";\r\n            this.basicMonster = new contentModule_1.ContentModule(this.ModuleStorage, id_3, function () { return ({\r\n                Count: new upgrade_1.Upgrade(_this.ContentStorage, id_3 + \".Count\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 10), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 0.25, 3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_3 + \".Count\", false, 1, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Basic.Entity.MaxCount)\r\n                ]), undefined, true),\r\n                Reward: new upgrade_1.Upgrade(_this.ContentStorage, id_3 + \".Reward\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 20), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 0.2, 2.3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_3 + \".Reward\", false, 25, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical), new tweak_1.TweakFunctionWithPercent(), content_1.Content.Monsters.Basic.Entity.Reward.ValueData)\r\n                ]), undefined, true),\r\n                RPDropChance: new upgrade_1.Upgrade(_this.ContentStorage, id_3 + \".RPDropChance\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 20), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 20, 2.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_3 + \".RPDropChance\", false, 2.5, 2.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Basic.Entity.RPDropChance)\r\n                ])),\r\n                RPDropValue: new upgrade_1.Upgrade(_this.ContentStorage, id_3 + \".RPDropValue\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 20), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 40, 3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_3 + \".RPDropValue\", false, 0.1, 1.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Basic.Entity.RPDropValue)\r\n                ])),\r\n            }); });\r\n        }\r\n        {\r\n            var id_4 = moduleId + \".ArmoredMonster\";\r\n            this.armoredMonster = new contentModule_1.ContentModule(this.ModuleStorage, id_4, function () { return ({\r\n                Reward: new upgrade_1.Upgrade(_this.ContentStorage, id_4 + \".Reward\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 20), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 25, 3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_4 + \".Reward\", false, 100, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical), new tweak_1.TweakFunctionWithPercent(), content_1.Content.Monsters.Armored.Entity.Reward.ValueData)\r\n                ]), undefined, true),\r\n                RPDropChance: new upgrade_1.Upgrade(_this.ContentStorage, id_4 + \".RPDropChance\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 20), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 100, 2.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_4 + \".RPDropChance\", false, 2.5, 2.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Armored.Entity.RPDropChance)\r\n                ])),\r\n                RPDropValue: new upgrade_1.Upgrade(_this.ContentStorage, id_4 + \".RPDropValue\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 20), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 150, 3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_4 + \".RPDropValue\", false, 10, 1.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical), new tweak_1.TweakFunctionPlus(), content_1.Content.Monsters.Armored.Entity.RPDropValue)\r\n                ])),\r\n            }); });\r\n        }\r\n        {\r\n            var id_5 = moduleId + \".FastMonster\";\r\n            this.fastMonster = new contentModule_1.ContentModule(this.ModuleStorage, id_5, function () { return ({\r\n                Reward: new upgrade_1.Upgrade(_this.ContentStorage, id_5 + \".Reward\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 20), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 25, 3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_5 + \".Reward\", false, 25, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical), new tweak_1.TweakFunctionWithPercent(), content_1.Content.Monsters.Fast.Entity.Reward.ValueData)\r\n                ]), undefined, true),\r\n            }); });\r\n        }\r\n        //# TURRETS #\r\n        {\r\n            var id_6 = moduleId + \".BasicTurret\";\r\n            this.basicTurret = new contentModule_1.ContentModule(this.ModuleStorage, id_6, function () { return ({\r\n                Count: new upgrade_1.Upgrade(_this.ContentStorage, id_6 + \".Count\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 10), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 2, 5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_6 + \".Count\", false, 1, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Basic.Entity.Count)\r\n                ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Basic.Entity), true),\r\n            }); });\r\n        }\r\n        {\r\n            var id_7 = moduleId + \".LaserTurret\";\r\n            this.laserTurret = new contentModule_1.ContentModule(this.ModuleStorage, id_7, function () { return ({\r\n                Count: new upgrade_1.Upgrade(_this.ContentStorage, id_7 + \".Count\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 10), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 500, 5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_7 + \".Count\", false, 1, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Laser.Entity.Count)\r\n                ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Laser.Entity), true),\r\n            }); });\r\n        }\r\n        {\r\n            var id_8 = moduleId + \".RailTurret\";\r\n            this.railTurret = new contentModule_1.ContentModule(this.ModuleStorage, id_8, function () { return ({\r\n                Count: new upgrade_1.Upgrade(_this.ContentStorage, id_8 + \".Count\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 10), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 2500, 5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_8 + \".Count\", false, 1, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Rail.Entity.Count)\r\n                ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Rail.Entity), true),\r\n            }); });\r\n        }\r\n        {\r\n            var id_9 = moduleId + \".Spikes\";\r\n            this.spikes = new contentModule_1.ContentModule(this.ModuleStorage, id_9, function () { return ({\r\n                Count: new upgrade_1.Upgrade(_this.ContentStorage, id_9 + \".Count\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 10), new priceArray_1.PriceArray([\r\n                    new price_1.Price(content_1.Content.Wallets.RebirthPoints, 100, 4, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n                ]), new tweakArray_1.TweakArray([\r\n                    new tweak_1.Tweak(id_9 + \".Count\", false, 1, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Buildings.Spikes.Entity.Count)\r\n                ]), new initBuildings_1.UpgradeOnBuyBuilding(gameObject_1.BuildingName.Spikes), true),\r\n            }); });\r\n        }\r\n    }\r\n    RebirthContent.prototype.InitUI = function () {\r\n        //# Main #\r\n        {\r\n            var upgrades = content_1.Content.Rebirth.Main;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.Main.StartCoins\"), upgrades.StartCoinBonus, \"#89833e\", \"Start Coins\", [\"Coins\"]);\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.Main.RPValue\"), upgrades.RPPerLevel, \"#4b9564\", \"RP per level\", [\"RP Value\"]);\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.Main.RPRewardMP\"), upgrades.RPRewardMP, \"#4b9564\", \"Rebirth award MP\", [\"RP Value\"]);\r\n        }\r\n        //# MONSTERS MONSTERS MONSTERS MONSTERS#\r\n        {\r\n            //# Basic #\r\n            {\r\n                var upgrades = content_1.Content.Rebirth.BasicMonster;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.BasicMonster.Reward\"), upgrades.Reward, \"#89833e\", \"Reward\", [\"Coins\"]);\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.BasicMonster.Count\"), upgrades.Count, \"#4c8a9a\", \"Start count\", [\"Count\"]);\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.BasicMonster.RPDropChance\"), upgrades.RPDropChance, \"#4b9564\", \"RP drop chance\", [\"Chance\"]);\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.BasicMonster.RPDropValue\"), upgrades.RPDropValue, \"#4b9564\", \"RP drop value\", [\"RP\"]);\r\n            }\r\n            //# Armored #\r\n            {\r\n                var upgrades = content_1.Content.Rebirth.ArmoredMonster;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.ArmoredMonster.Reward\"), upgrades.Reward, \"#89833e\", \"Reward\", [\"Coins\"]);\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.ArmoredMonster.RPDropChance\"), upgrades.RPDropChance, \"#4b9564\", \"RP drop chance\", [\"Chance\"]);\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.ArmoredMonster.RPDropValue\"), upgrades.RPDropValue, \"#4b9564\", \"RP drop value\", [\"RP\"]);\r\n            }\r\n            //# Fast #\r\n            {\r\n                var upgrades = content_1.Content.Rebirth.FastMonster;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.FastMonster.Reward\"), upgrades.Reward, \"#89833e\", \"Reward\", [\"RP\"]);\r\n            }\r\n        }\r\n        //# TURRETS TURRETS TURRETS TURRETS#\r\n        {\r\n            //# Basic #\r\n            {\r\n                var upgrades = content_1.Content.Rebirth.BasicTurret;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.BasicTurret.Count\"), upgrades.Count, \"#636cb0\", \"Max count\", [\"Count\"]);\r\n            }\r\n            //# Laser #\r\n            {\r\n                var upgrades = content_1.Content.Rebirth.LaserTurret;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.LaserTurret.Count\"), upgrades.Count, \"#636cb0\", \"Max count\", [\"Count\"]);\r\n            }\r\n            //# Rail #\r\n            {\r\n                var upgrades = content_1.Content.Rebirth.RailTurret;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.RailTurret.Count\"), upgrades.Count, \"#636cb0\", \"Max count\", [\"Count\"]);\r\n            }\r\n        }\r\n        //# Spikes #\r\n        {\r\n            var upgrades = content_1.Content.Rebirth.Spikes;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Rebirth.Spikes.Count\"), upgrades.Count, \"#636cb0\", \"Max count\", [\"Count\"]);\r\n        }\r\n    };\r\n    Object.defineProperty(RebirthContent.prototype, \"Stats\", {\r\n        get: function () {\r\n            return this.stats.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RebirthContent.prototype, \"Main\", {\r\n        get: function () {\r\n            return this.main.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RebirthContent.prototype, \"BasicMonster\", {\r\n        //# Monsters #\r\n        get: function () {\r\n            return this.basicMonster.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RebirthContent.prototype, \"ArmoredMonster\", {\r\n        get: function () {\r\n            return this.armoredMonster.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RebirthContent.prototype, \"FastMonster\", {\r\n        get: function () {\r\n            return this.fastMonster.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RebirthContent.prototype, \"BasicTurret\", {\r\n        //# Turrets #\r\n        get: function () {\r\n            return this.basicTurret.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RebirthContent.prototype, \"LaserTurret\", {\r\n        get: function () {\r\n            return this.laserTurret.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RebirthContent.prototype, \"RailTurret\", {\r\n        get: function () {\r\n            return this.railTurret.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RebirthContent.prototype, \"Spikes\", {\r\n        //# Buildings #\r\n        get: function () {\r\n            return this.spikes.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RebirthContent.prototype, \"CurrentRebirthAward\", {\r\n        get: function () {\r\n            var award = float_1.Float.Plus(content_1.Content.Rebirth.Stats.RebirthAward.Value, content_1.Content.Rebirth.Stats.NonRebirthAward.Value);\r\n            award = award.Times(content_1.Content.Rebirth.Stats.RebirthAwardMP.Value);\r\n            return award;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    RebirthContent.prototype.Activate = function () {\r\n        game_1.StopwatchStart('WholeRebirth');\r\n        //# As we destroy monster when rebirth, we dont want to show award popups for them #\r\n        var showMonsterAwardBefore = content_1.SystemData.Settings.ShowMonsterAward;\r\n        content_1.SystemData.Settings.ShowMonsterAward = false;\r\n        //# Wallets #\r\n        var award = this.CurrentRebirthAward;\r\n        content_1.Content.Wallets.RebirthPoints.Add(award);\r\n        content_1.Content.Rebirth.Stats.RebirthAward.Value = new float_1.Float(0);\r\n        content_1.Content.Rebirth.Stats.NonRebirthAward.Value = new float_1.Float(0);\r\n        content_1.Content.Wallets.Coins.Reset();\r\n        content_1.Content.Wallets.Coins.Set(content_1.Content.Stats.Game.StartCoins.Value);\r\n        //# Statistics #\r\n        content_1.Content.Rebirth.Stats.HappenedCount.Value = content_1.Content.Rebirth.Stats.HappenedCount.Plus(1);\r\n        content_1.Content.Rebirth.Stats.TotalRPMade.Value = float_1.Float.Plus(content_1.Content.Rebirth.Stats.TotalRPMade, award);\r\n        content_1.Content.Rebirth.Stats.LastRebirth.Value = new Date();\r\n        game_1.StopwatchStart('ResetUpgrades');\r\n        //# Reset all Monster/Turrets coin upgrades and UnlockPurchases to reset stats and unlocks #\r\n        for (var _i = 0, _a = __spreadArrays(utilsObjects_1.ValuesOf(content_1.Content.Monsters.Basic.Upgrades), utilsObjects_1.ValuesOf(content_1.Content.Monsters.Armored.Upgrades), utilsObjects_1.ValuesOf(content_1.Content.Turrets.Basic.Upgrades), utilsObjects_1.ValuesOf(content_1.Content.Turrets.Laser.Upgrades), utilsObjects_1.ValuesOf(content_1.Content.Buildings.Spikes.Upgrades)); _i < _a.length; _i++) {\r\n            var upgrade = _a[_i];\r\n            upgrade.Reset();\r\n        }\r\n        game_1.StopwatchStop('ResetUpgrades');\r\n        //# Reset themes #\r\n        game_1.StopwatchStart('InitThemeUnlocks');\r\n        themeUnlocks_1.InitThemeUnlocks();\r\n        game_1.StopwatchStop('InitThemeUnlocks');\r\n        //# Reset monster spawn timer and current spawn data #\r\n        content_1.Content.Timers.Game.MonsterSpawn.ResetData();\r\n        content_1.Managers.Fight.ResetSpawn();\r\n        //# Destroy monster instances #\r\n        for (var _b = 0, _c = content_1.ContentStorage.GetAllItemsOfType(monster_1.Monster); _b < _c.length; _b++) {\r\n            var monster = _c[_b];\r\n            monster.DestroyAllInstances();\r\n        }\r\n        //# Re-enable menus #\r\n        game_1.StopwatchStart('ReEnableMenus');\r\n        content_1.Content.Turrets.Basic.Unlock.Toggle(true);\r\n        content_1.Content.Turrets.Laser.Unlock.Toggle(content_1.Content.Turrets.Laser.Unlock.IsUnlocked);\r\n        content_1.Content.Monsters.Basic.Unlock.Toggle(true);\r\n        content_1.Content.Monsters.Armored.Unlock.Toggle(content_1.Content.Monsters.Armored.Unlock.IsUnlocked);\r\n        content_1.Content.Buildings.Spikes.Unlock.Toggle(content_1.Content.Buildings.Spikes.Unlock.IsUnlocked);\r\n        game_1.StopwatchStop('ReEnableMenus');\r\n        //# As we reset turret upgrades, we need to update our instances #\r\n        content_1.Managers.Fight.UpdateTurrets();\r\n        //# Reset settings back to previous values #\r\n        content_1.SystemData.Settings.ShowMonsterAward = showMonsterAwardBefore;\r\n        game_1.StopwatchStart('UpdateThemeUnlocks');\r\n        //# Update themes to get all changes we made before #\r\n        themeUnlocks_1.UpdateThemeUnlocks();\r\n        game_1.StopwatchStop('UpdateThemeUnlocks');\r\n        utilsGUI_1.ToggleSelector(\"BuildModeBuilding\", \"BasicTurret\");\r\n        game_1.StopwatchStop('WholeRebirth');\r\n    };\r\n    return RebirthContent;\r\n}());\r\nexports.RebirthContent = RebirthContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/rebirth/rebirthContent.ts?");

/***/ }),

/***/ "./src/content/modules/turrets/basicTurretContent.ts":
/*!***********************************************************!*\
  !*** ./src/content/modules/turrets/basicTurretContent.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BasicTurretContent = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar upgrade_1 = __webpack_require__(/*! ../../../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\nvar unlock_1 = __webpack_require__(/*! ../../../data/unlock */ \"./src/data/unlock.ts\");\r\nvar priceArray_1 = __webpack_require__(/*! ../../../data/priceArray */ \"./src/data/priceArray.ts\");\r\nvar price_1 = __webpack_require__(/*! ../../../game/gameObjects/price */ \"./src/game/gameObjects/price.ts\");\r\nvar progressionCalculator_1 = __webpack_require__(/*! ../../../data/math/valueCalcs/progressionCalculator */ \"./src/data/math/valueCalcs/progressionCalculator.ts\");\r\nvar progression_1 = __webpack_require__(/*! ../../../data/math/progression */ \"./src/data/math/progression.ts\");\r\nvar level_1 = __webpack_require__(/*! ../../../data/game/level */ \"./src/data/game/level.ts\");\r\nvar tweakArray_1 = __webpack_require__(/*! ../../../game/tweakArray */ \"./src/game/tweakArray.ts\");\r\nvar tweak_1 = __webpack_require__(/*! ../../../game/tweak */ \"./src/game/tweak.ts\");\r\nvar fightManager_1 = __webpack_require__(/*! ../../../game/managers/fightManager */ \"./src/game/managers/fightManager.ts\");\r\nvar turret_1 = __webpack_require__(/*! ../../../game/fighting/turret */ \"./src/game/fighting/turret.ts\");\r\nvar buildManager_1 = __webpack_require__(/*! ../../../game/managers/buildManager */ \"./src/game/managers/buildManager.ts\");\r\nvar initTurrets_1 = __webpack_require__(/*! ./initTurrets */ \"./src/content/modules/turrets/initTurrets.ts\");\r\nvar container_1 = __webpack_require__(/*! ../../../game/gameObjects/container */ \"./src/game/gameObjects/container.ts\");\r\nvar uiBuilder_1 = __webpack_require__(/*! ../../../../javascript/construct3/c3ObjectUtils/uiBuilder */ \"./javascript/construct3/c3ObjectUtils/uiBuilder.ts\");\r\nvar gui_1 = __webpack_require__(/*! ../../../ui/gui */ \"./src/ui/gui.ts\");\r\nvar BasicTurretContent = /** @class */ (function () {\r\n    function BasicTurretContent(ModuleStorage, ContentStorage) {\r\n        var _this = this;\r\n        this.ModuleStorage = ModuleStorage;\r\n        this.ContentStorage = ContentStorage;\r\n        var id = \"BasicTurret\";\r\n        this.system = new contentModule_1.ContentModule(this.ModuleStorage, id + \".System\", function () { return ({\r\n            IsBuildModeShown: new container_1.Container(_this.ContentStorage, id + \".System.IsBuildModeShown\", false),\r\n            IsEverUnlocked: new container_1.Container(_this.ContentStorage, id + \".System.IsEverUnlocked\", false),\r\n        }); });\r\n        this.profile = new contentModule_1.ContentModule(this.ModuleStorage, id + \".Profile\", function () {\r\n            return new turret_1.Turret(_this.ContentStorage, \"\" + id, content_1.Content.Turrets.Basic.Unlock, 0.1, 0, 0, 1000, 40, 400, 250, 0, 3, 1, 1);\r\n        });\r\n        this.unlock = new contentModule_1.ContentModule(this.ModuleStorage, id + \".Unlock\", function () {\r\n            return new unlock_1.Unlock(_this.ContentStorage, \"Unlock::\" + id, false, new fightManager_1.OnBasicTurretUnlocked());\r\n        });\r\n        this.unlockPurchase = new contentModule_1.ContentModule(this.ModuleStorage, id + \".UnlockPurchase\", function () {\r\n            return new upgrade_1.UnlockUpgrade(_this.ContentStorage, id + \".UnlockPurchase\", content_1.Content.Turrets.Basic.Unlock, new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 0.1, 0, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical)),\r\n            ]));\r\n        });\r\n        this.buildInfo = new contentModule_1.ContentModule(this.ModuleStorage, id + \".BuildInfo\", function () {\r\n            return new buildManager_1.BuildInfo(_this.ContentStorage, \"BuildInfo::\" + id, id, \"Turret\", \"OnWall\", new buildManager_1.CanBuildTurret(content_1.Content.Turrets.Basic.Entity));\r\n        });\r\n        this.upgrades = new contentModule_1.ContentModule(this.ModuleStorage, id + \".Upgrades\", function () { return ({\r\n            Damage: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Damage\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 200), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 1.75, 1.8, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Damage::Damage\", false, 0.1, 0.1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Basic.Entity.Damage)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Basic.Entity), true),\r\n            RotationSpeed: new upgrade_1.Upgrade(_this.ContentStorage, id + \".RotationSpeed\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 75), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 5, 1.8, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".RotationSpeed::RotationSpeed\", false, 2.5, 2.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Basic.Entity.RotateSpeed)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Basic.Entity)),\r\n            BulletSpeed: new upgrade_1.Upgrade(_this.ContentStorage, id + \".BulletSpeed\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 15), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 15, 2.1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".BulletSpeed::BulletSpeed\", false, 100, 100, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Basic.Entity.BulletSpeed)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Basic.Entity)),\r\n            ReloadTime: new upgrade_1.Upgrade(_this.ContentStorage, id + \".ReloadTime\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 50), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 10, 2.25, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".ReloadTime::ReloadTime\", false, 10, 10, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionMinus(), content_1.Content.Turrets.Basic.Entity.ReloadTimeMS)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Basic.Entity)),\r\n            Range: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Range\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 50), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 7, 1.85, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Range::Range\", false, 10, 10, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Basic.Entity.Range)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Basic.Entity)),\r\n            CriticalChance: new upgrade_1.Upgrade(_this.ContentStorage, id + \".CriticalChance\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 15), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 25000, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".CriticalChance\", false, 5, 5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Basic.Entity.CriticalDamageChance)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Basic.Entity)),\r\n            CriticalMP: new upgrade_1.Upgrade(_this.ContentStorage, id + \".CriticalMP\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 25), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 50000, 2.2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".CriticalMP\", false, 1, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Basic.Entity.CriticalDamageMP)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Basic.Entity)),\r\n        }); });\r\n    }\r\n    BasicTurretContent.prototype.InitUI = function () {\r\n        var turret = this.Entity;\r\n        var upgrades = this.Upgrades;\r\n        {\r\n            {\r\n                //# Upgrades: CriticalChance #\r\n                var upgrade = upgrades.CriticalChance;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(turret.ID + \".Upgrades.CriticalChance\"), upgrade, \"#814f9c\", \"Critical chance\", [\"Chance\"]);\r\n            }\r\n            {\r\n                //# Upgrades: CriticalMP #\r\n                var upgrade = upgrades.CriticalMP;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(turret.ID + \".Upgrades.CriticalMP\"), upgrade, \"#a24e4e\", \"Critical multiplier\", [\"Multiplier\"]);\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(BasicTurretContent.prototype, \"System\", {\r\n        get: function () {\r\n            return this.system.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BasicTurretContent.prototype, \"Entity\", {\r\n        get: function () {\r\n            return this.profile.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BasicTurretContent.prototype, \"Unlock\", {\r\n        get: function () {\r\n            return this.unlock.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BasicTurretContent.prototype, \"UnlockPurchase\", {\r\n        get: function () {\r\n            return this.unlockPurchase.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BasicTurretContent.prototype, \"BuildInfo\", {\r\n        get: function () {\r\n            return this.buildInfo.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BasicTurretContent.prototype, \"Upgrades\", {\r\n        get: function () {\r\n            return this.upgrades.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return BasicTurretContent;\r\n}());\r\nexports.BasicTurretContent = BasicTurretContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/turrets/basicTurretContent.ts?");

/***/ }),

/***/ "./src/content/modules/turrets/initTurrets.ts":
/*!****************************************************!*\
  !*** ./src/content/modules/turrets/initTurrets.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UpgradeOnBuyTurret = exports.InitTurrets = void 0;\r\nvar basicTurretContent_1 = __webpack_require__(/*! ./basicTurretContent */ \"./src/content/modules/turrets/basicTurretContent.ts\");\r\nvar laserTurretContent_1 = __webpack_require__(/*! ./laserTurretContent */ \"./src/content/modules/turrets/laserTurretContent.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar turret_1 = __webpack_require__(/*! ../../../game/fighting/turret */ \"./src/game/fighting/turret.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\nvar upgradeOnBuyEvent_1 = __webpack_require__(/*! ../../../game/gameObjects/upgrade/upgradeOnBuyEvent */ \"./src/game/gameObjects/upgrade/upgradeOnBuyEvent.ts\");\r\nvar railTurretContent_1 = __webpack_require__(/*! ./railTurretContent */ \"./src/content/modules/turrets/railTurretContent.ts\");\r\nfunction InitTurrets(storage, content) {\r\n    return {\r\n        Basic: new basicTurretContent_1.BasicTurretContent(storage, content),\r\n        Laser: new laserTurretContent_1.LaserTurretContent(storage, content),\r\n        Rail: new railTurretContent_1.RailTurretContent(storage, content),\r\n    };\r\n}\r\nexports.InitTurrets = InitTurrets;\r\nvar UpgradeOnBuyTurret = /** @class */ (function (_super) {\r\n    __extends(UpgradeOnBuyTurret, _super);\r\n    function UpgradeOnBuyTurret(turret) {\r\n        var _this = _super.call(this) || this;\r\n        _this.turret = turret;\r\n        return _this;\r\n    }\r\n    UpgradeOnBuyTurret.prototype.Trigger = function (_upgrade, _count, _spent) {\r\n        content_1.Managers.Fight.UpdateTurret(this.turret);\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return turret_1.Turret; })\r\n    ], UpgradeOnBuyTurret.prototype, \"turret\", void 0);\r\n    return UpgradeOnBuyTurret;\r\n}(upgradeOnBuyEvent_1.UpgradeOnBuyEvent));\r\nexports.UpgradeOnBuyTurret = UpgradeOnBuyTurret;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/turrets/initTurrets.ts?");

/***/ }),

/***/ "./src/content/modules/turrets/laserTurretContent.ts":
/*!***********************************************************!*\
  !*** ./src/content/modules/turrets/laserTurretContent.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LaserTurretContent = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar upgrade_1 = __webpack_require__(/*! ../../../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\nvar unlock_1 = __webpack_require__(/*! ../../../data/unlock */ \"./src/data/unlock.ts\");\r\nvar priceArray_1 = __webpack_require__(/*! ../../../data/priceArray */ \"./src/data/priceArray.ts\");\r\nvar price_1 = __webpack_require__(/*! ../../../game/gameObjects/price */ \"./src/game/gameObjects/price.ts\");\r\nvar progressionCalculator_1 = __webpack_require__(/*! ../../../data/math/valueCalcs/progressionCalculator */ \"./src/data/math/valueCalcs/progressionCalculator.ts\");\r\nvar progression_1 = __webpack_require__(/*! ../../../data/math/progression */ \"./src/data/math/progression.ts\");\r\nvar fightManager_1 = __webpack_require__(/*! ../../../game/managers/fightManager */ \"./src/game/managers/fightManager.ts\");\r\nvar turret_1 = __webpack_require__(/*! ../../../game/fighting/turret */ \"./src/game/fighting/turret.ts\");\r\nvar buildManager_1 = __webpack_require__(/*! ../../../game/managers/buildManager */ \"./src/game/managers/buildManager.ts\");\r\nvar container_1 = __webpack_require__(/*! ../../../game/gameObjects/container */ \"./src/game/gameObjects/container.ts\");\r\nvar level_1 = __webpack_require__(/*! ../../../data/game/level */ \"./src/data/game/level.ts\");\r\nvar tweakArray_1 = __webpack_require__(/*! ../../../game/tweakArray */ \"./src/game/tweakArray.ts\");\r\nvar tweak_1 = __webpack_require__(/*! ../../../game/tweak */ \"./src/game/tweak.ts\");\r\nvar initTurrets_1 = __webpack_require__(/*! ./initTurrets */ \"./src/content/modules/turrets/initTurrets.ts\");\r\nvar uiBuilder_1 = __webpack_require__(/*! ../../../../javascript/construct3/c3ObjectUtils/uiBuilder */ \"./javascript/construct3/c3ObjectUtils/uiBuilder.ts\");\r\nvar gui_1 = __webpack_require__(/*! ../../../ui/gui */ \"./src/ui/gui.ts\");\r\nvar LaserTurretContent = /** @class */ (function () {\r\n    function LaserTurretContent(ModuleStorage, ContentStorage) {\r\n        var _this = this;\r\n        this.ModuleStorage = ModuleStorage;\r\n        this.ContentStorage = ContentStorage;\r\n        var id = \"LaserTurret\";\r\n        this.system = new contentModule_1.ContentModule(this.ModuleStorage, id + \".System\", function () { return ({\r\n            IsNotificationShown: new container_1.Container(_this.ContentStorage, id + \".System.IsNotificationShown\", false),\r\n            IsBuildModeShown: new container_1.Container(_this.ContentStorage, id + \".System.IsBuildModeShown\", false),\r\n            IsEverUnlocked: new container_1.Container(_this.ContentStorage, id + \".System.IsEverUnlocked\", false),\r\n        }); });\r\n        this.profile = new contentModule_1.ContentModule(this.ModuleStorage, id + \".Profile\", function () {\r\n            return new turret_1.Turret(_this.ContentStorage, \"\" + id, content_1.Content.Turrets.Laser.Unlock, 1, 0, 0, 250, 200, 1000, 180, 0, 3, 1, 1);\r\n        });\r\n        this.unlock = new contentModule_1.ContentModule(this.ModuleStorage, id + \".Unlock\", function () {\r\n            return new unlock_1.Unlock(_this.ContentStorage, \"Unlock::\" + id, false, new fightManager_1.OnLaserTurretUnlocked());\r\n        });\r\n        this.unlockPurchase = new contentModule_1.ContentModule(this.ModuleStorage, id + \".UnlockPurchase\", function () {\r\n            return new upgrade_1.UnlockUpgrade(_this.ContentStorage, id + \".UnlockPurchase\", content_1.Content.Turrets.Laser.Unlock, new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 150000, 0, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical)),\r\n            ]));\r\n        });\r\n        this.buildInfo = new contentModule_1.ContentModule(this.ModuleStorage, id + \".BuildInfo\", function () {\r\n            return new buildManager_1.BuildInfo(_this.ContentStorage, \"BuildInfo::\" + id, id, \"Turret\", \"OnWall\", new buildManager_1.CanBuildTurret(content_1.Content.Turrets.Laser.Entity));\r\n        });\r\n        this.upgrades = new contentModule_1.ContentModule(this.ModuleStorage, id + \".Upgrades\", function () { return ({\r\n            Damage: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Damage\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 200), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 85000, 2.3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Damage::Damage\", false, 0.5, 0.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Laser.Entity.Damage)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Laser.Entity), true),\r\n            RotationSpeed: new upgrade_1.Upgrade(_this.ContentStorage, id + \".RotationSpeed\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 15), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 150000, 3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".RotationSpeed::RotationSpeed\", false, 10, 10, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Laser.Entity.RotateSpeed)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Laser.Entity)),\r\n            ReloadTime: new upgrade_1.Upgrade(_this.ContentStorage, id + \".ReloadTime\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 10), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 200000, 2.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".ReloadTime::ReloadTime\", false, 10, 10, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionMinus(), content_1.Content.Turrets.Laser.Entity.ReloadTimeMS)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Laser.Entity)),\r\n            Range: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Range\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 20), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 125000, 2.2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Range::Range\", false, 25, 25, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Laser.Entity.Range)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Laser.Entity)),\r\n            CriticalChance: new upgrade_1.Upgrade(_this.ContentStorage, id + \".CriticalChance\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 15), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 750000, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".CriticalChance\", false, 2, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Laser.Entity.CriticalDamageChance)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Laser.Entity)),\r\n            CriticalMP: new upgrade_1.Upgrade(_this.ContentStorage, id + \".CriticalMP\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 25), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 1000000, 2.2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".CriticalMP\", false, 0.1, 0.1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Laser.Entity.CriticalDamageMP)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Laser.Entity)),\r\n            ShieldDamage: new upgrade_1.Upgrade(_this.ContentStorage, id + \".ShieldDamage\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 15), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 200000, 2.3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".ShieldDamage::ShieldDamage\", false, 1, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Laser.Entity.ShieldDamage)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Laser.Entity)),\r\n        }); });\r\n    }\r\n    LaserTurretContent.prototype.InitUI = function () {\r\n        var turret = this.Entity;\r\n        var upgrades = this.Upgrades;\r\n        {\r\n            //# Upgrades: Damage #\r\n            var upgrade = upgrades.Damage;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Turrets.\" + turret.ID + \".Damage\"), upgrade, \"#a24e4e\", \"Damage\", [\"Damage\"]);\r\n        }\r\n        {\r\n            //# Upgrades: RotationSpeed #\r\n            var upgrade = upgrades.RotationSpeed;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Turrets.\" + turret.ID + \".RotationSpeed\"), upgrade, \"#3d858a\", \"Rotation speed\", [\"Rotation\"]);\r\n        }\r\n        {\r\n            //# Upgrades: Range #\r\n            var upgrade = upgrades.Range;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Turrets.\" + turret.ID + \".Range\"), upgrade, \"#47905f\", \"Attack range\", [\"Range\"]);\r\n        }\r\n        {\r\n            //# Upgrades: ReloadTime #\r\n            var upgrade = upgrades.ReloadTime;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(\"Turrets.\" + turret.ID + \".ReloadTime\"), upgrade, \"#918930\", \"Reload duration\", [\"Duration\"]);\r\n        }\r\n        {\r\n            //# Upgrades: CriticalChance #\r\n            var upgrade = upgrades.CriticalChance;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(turret.ID + \".Upgrades.CriticalChance\"), upgrade, \"#814f9c\", \"Critical chance\", [\"Chance\"]);\r\n        }\r\n        {\r\n            //# Upgrades: CriticalMP #\r\n            var upgrade = upgrades.CriticalMP;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(turret.ID + \".Upgrades.CriticalMP\"), upgrade, \"#a24e4e\", \"Critical multiplier\", [\"Multiplier\"]);\r\n        }\r\n        {\r\n            //# Upgrades: ShieldDamage #\r\n            var upgrade = upgrades.ShieldDamage;\r\n            uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(turret.ID + \".Upgrades.ShieldDamage\"), upgrade, \"#2e79af\", \"Shield damage\", [\"Damage\"]);\r\n        }\r\n    };\r\n    Object.defineProperty(LaserTurretContent.prototype, \"System\", {\r\n        get: function () {\r\n            return this.system.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LaserTurretContent.prototype, \"Entity\", {\r\n        get: function () {\r\n            return this.profile.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LaserTurretContent.prototype, \"Unlock\", {\r\n        get: function () {\r\n            return this.unlock.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LaserTurretContent.prototype, \"UnlockPurchase\", {\r\n        get: function () {\r\n            return this.unlockPurchase.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LaserTurretContent.prototype, \"BuildInfo\", {\r\n        get: function () {\r\n            return this.buildInfo.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LaserTurretContent.prototype, \"Upgrades\", {\r\n        get: function () {\r\n            return this.upgrades.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return LaserTurretContent;\r\n}());\r\nexports.LaserTurretContent = LaserTurretContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/turrets/laserTurretContent.ts?");

/***/ }),

/***/ "./src/content/modules/turrets/railTurretContent.ts":
/*!**********************************************************!*\
  !*** ./src/content/modules/turrets/railTurretContent.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RailTurretContent = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar upgrade_1 = __webpack_require__(/*! ../../../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\nvar unlock_1 = __webpack_require__(/*! ../../../data/unlock */ \"./src/data/unlock.ts\");\r\nvar priceArray_1 = __webpack_require__(/*! ../../../data/priceArray */ \"./src/data/priceArray.ts\");\r\nvar price_1 = __webpack_require__(/*! ../../../game/gameObjects/price */ \"./src/game/gameObjects/price.ts\");\r\nvar progressionCalculator_1 = __webpack_require__(/*! ../../../data/math/valueCalcs/progressionCalculator */ \"./src/data/math/valueCalcs/progressionCalculator.ts\");\r\nvar progression_1 = __webpack_require__(/*! ../../../data/math/progression */ \"./src/data/math/progression.ts\");\r\nvar level_1 = __webpack_require__(/*! ../../../data/game/level */ \"./src/data/game/level.ts\");\r\nvar tweakArray_1 = __webpack_require__(/*! ../../../game/tweakArray */ \"./src/game/tweakArray.ts\");\r\nvar tweak_1 = __webpack_require__(/*! ../../../game/tweak */ \"./src/game/tweak.ts\");\r\nvar fightManager_1 = __webpack_require__(/*! ../../../game/managers/fightManager */ \"./src/game/managers/fightManager.ts\");\r\nvar turret_1 = __webpack_require__(/*! ../../../game/fighting/turret */ \"./src/game/fighting/turret.ts\");\r\nvar buildManager_1 = __webpack_require__(/*! ../../../game/managers/buildManager */ \"./src/game/managers/buildManager.ts\");\r\nvar initTurrets_1 = __webpack_require__(/*! ./initTurrets */ \"./src/content/modules/turrets/initTurrets.ts\");\r\nvar container_1 = __webpack_require__(/*! ../../../game/gameObjects/container */ \"./src/game/gameObjects/container.ts\");\r\nvar uiBuilder_1 = __webpack_require__(/*! ../../../../javascript/construct3/c3ObjectUtils/uiBuilder */ \"./javascript/construct3/c3ObjectUtils/uiBuilder.ts\");\r\nvar gui_1 = __webpack_require__(/*! ../../../ui/gui */ \"./src/ui/gui.ts\");\r\nvar RailTurretContent = /** @class */ (function () {\r\n    function RailTurretContent(ModuleStorage, ContentStorage) {\r\n        var _this = this;\r\n        this.ModuleStorage = ModuleStorage;\r\n        this.ContentStorage = ContentStorage;\r\n        var id = \"RailTurret\";\r\n        this.system = new contentModule_1.ContentModule(this.ModuleStorage, id + \".System\", function () { return ({\r\n            IsBuildModeShown: new container_1.Container(_this.ContentStorage, id + \".System.IsBuildModeShown\", false),\r\n            IsEverUnlocked: new container_1.Container(_this.ContentStorage, id + \".System.IsEverUnlocked\", false),\r\n            IsNotificationShown: new container_1.Container(_this.ContentStorage, id + \".System.IsNotificationShown\", false),\r\n        }); });\r\n        this.profile = new contentModule_1.ContentModule(this.ModuleStorage, id + \".Profile\", function () {\r\n            return new turret_1.Turret(_this.ContentStorage, \"\" + id, content_1.Content.Turrets.Rail.Unlock, 5, 0, 0, 2500, 40, 400, 150, 0, 3, 1, 1);\r\n        });\r\n        this.unlock = new contentModule_1.ContentModule(this.ModuleStorage, id + \".Unlock\", function () {\r\n            return new unlock_1.Unlock(_this.ContentStorage, \"Unlock::\" + id, false, new fightManager_1.OnRailTurretUnlocked());\r\n        });\r\n        this.unlockPurchase = new contentModule_1.ContentModule(this.ModuleStorage, id + \".UnlockPurchase\", function () {\r\n            return new upgrade_1.UnlockUpgrade(_this.ContentStorage, id + \".UnlockPurchase\", content_1.Content.Turrets.Rail.Unlock, new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 10000000, 0, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical)),\r\n            ]));\r\n        });\r\n        this.buildInfo = new contentModule_1.ContentModule(this.ModuleStorage, id + \".BuildInfo\", function () {\r\n            return new buildManager_1.BuildInfo(_this.ContentStorage, \"BuildInfo::\" + id, id, \"Turret\", \"OnWall\", new buildManager_1.CanBuildTurret(content_1.Content.Turrets.Rail.Entity));\r\n        });\r\n        this.upgrades = new contentModule_1.ContentModule(this.ModuleStorage, id + \".Upgrades\", function () { return ({\r\n            Damage: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Damage\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 200), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 2500000, 2.2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Damage\", false, 5, 5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Rail.Entity.Damage)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Rail.Entity), true),\r\n            ReloadTime: new upgrade_1.Upgrade(_this.ContentStorage, id + \".ReloadTime\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 15), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 4000000, 2.4, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".ReloadTime\", false, 75, 75, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionMinus(), content_1.Content.Turrets.Rail.Entity.ReloadTimeMS)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Rail.Entity)),\r\n            Range: new upgrade_1.Upgrade(_this.ContentStorage, id + \".Range\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 25), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 3500000, 2.3, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".Range\", false, 20, 20, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Rail.Entity.Range)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Rail.Entity)),\r\n            HealthDamage: new upgrade_1.Upgrade(_this.ContentStorage, id + \".HealthDamage\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 25), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 5000000, 2.2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".HealthDamage\", false, 5, 5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Rail.Entity.HealthDamage)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Rail.Entity)),\r\n            HitsPerShot: new upgrade_1.Upgrade(_this.ContentStorage, id + \".HitsPerShot\", content_1.Content.Settings.System.BuyCount, new level_1.Level(0, 5), new priceArray_1.PriceArray([\r\n                new price_1.Price(content_1.Content.Wallets.Coins, 10000000, 3.5, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical)),\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak(id + \".HitsPerShot\", false, 1, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), content_1.Content.Turrets.Rail.Entity.HitsPerShot)\r\n            ]), new initTurrets_1.UpgradeOnBuyTurret(content_1.Content.Turrets.Rail.Entity)),\r\n        }); });\r\n    }\r\n    RailTurretContent.prototype.InitUI = function () {\r\n        var turret = this.Entity;\r\n        var upgrades = this.Upgrades;\r\n        {\r\n            {\r\n                //# Upgrades: Damage #\r\n                var upgrade = upgrades.Damage;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(turret.ID + \".Upgrades.Damage\"), upgrade, \"#a24e4e\", \"Damage\", [\"Damage\"]);\r\n            }\r\n            {\r\n                //# Upgrades: ReloadTime #\r\n                var upgrade = upgrades.ReloadTime;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(turret.ID + \".Upgrades.ReloadTime\"), upgrade, \"#918930\", \"Reload duration\", [\"Duration\"]);\r\n            }\r\n            {\r\n                //# Upgrades: Range #\r\n                var upgrade = upgrades.Range;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(turret.ID + \".Upgrades.Range\"), upgrade, \"#47905f\", \"Range\", [\"Range\"]);\r\n            }\r\n            {\r\n                //# Upgrades: HealthDamage #\r\n                var upgrade = upgrades.HealthDamage;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(turret.ID + \".Upgrades.HealthDamage\"), upgrade, \"#954678\", \"Health damage\", [\"Damage\"]);\r\n            }\r\n            {\r\n                //# Upgrades: HitsPerShot #\r\n                var upgrade = upgrades.HitsPerShot;\r\n                uiBuilder_1.CreateUpgradeUI(gui_1.GetUpgradePos(turret.ID + \".Upgrades.HitsPerShot\"), upgrade, \"#8442aa\", \"Hits per shot\", [\"Hits\"]);\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(RailTurretContent.prototype, \"System\", {\r\n        get: function () {\r\n            return this.system.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RailTurretContent.prototype, \"Entity\", {\r\n        get: function () {\r\n            return this.profile.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RailTurretContent.prototype, \"Unlock\", {\r\n        get: function () {\r\n            return this.unlock.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RailTurretContent.prototype, \"UnlockPurchase\", {\r\n        get: function () {\r\n            return this.unlockPurchase.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RailTurretContent.prototype, \"BuildInfo\", {\r\n        get: function () {\r\n            return this.buildInfo.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RailTurretContent.prototype, \"Upgrades\", {\r\n        get: function () {\r\n            return this.upgrades.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return RailTurretContent;\r\n}());\r\nexports.RailTurretContent = RailTurretContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/turrets/railTurretContent.ts?");

/***/ }),

/***/ "./src/content/modules/ui/initOverlays.ts":
/*!************************************************!*\
  !*** ./src/content/modules/ui/initOverlays.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AllOverlaysContent = exports.InitOverlays = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar overlay_1 = __webpack_require__(/*! ../../../../javascript/construct3/c3ObjectUtils/gameUI/overlay */ \"./javascript/construct3/c3ObjectUtils/gameUI/overlay.ts\");\r\nvar view_1 = __webpack_require__(/*! ../../../../javascript/construct3/c3ObjectUtils/gameUI/view */ \"./javascript/construct3/c3ObjectUtils/gameUI/view.ts\");\r\nvar utilsObjects_1 = __webpack_require__(/*! ../../../utils/utilsObjects */ \"./src/utils/utilsObjects.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\nvar vector2_1 = __webpack_require__(/*! ../../../data/vector2 */ \"./src/data/vector2.ts\");\r\nfunction InitOverlays(storage, content) {\r\n    return new AllOverlaysContent(storage, content);\r\n}\r\nexports.InitOverlays = InitOverlays;\r\nvar AllOverlaysContent = /** @class */ (function () {\r\n    function AllOverlaysContent(ModuleStorage, ContentStorage) {\r\n        this.ModuleStorage = ModuleStorage;\r\n        this.ContentStorage = ContentStorage;\r\n        var screenSize = new vector2_1.Vector2(2880, 1920);\r\n        this.ui = new contentModule_1.ContentModule(ModuleStorage, \"Overlays.UI\", function () { return ({\r\n            TopOverlay: new overlay_1.Overlay(content_1.UIStorage, \"TopOverlay\", screenSize, content_1.Content.Views.Overlays.Top, content_1.UIStorage.GetAllItemsOfType(view_1.View)),\r\n            BottomOverlay: new overlay_1.Overlay(content_1.UIStorage, \"BottomOverlay\", screenSize, content_1.Content.Views.Overlays.Bottom, __spreadArrays(utilsObjects_1.ValuesOf(content_1.Content.Views.Monsters), utilsObjects_1.ValuesOf(content_1.Content.Views.Turrets), utilsObjects_1.ValuesOf(content_1.Content.Views.Buildings), [\r\n                content_1.Content.Views.Rebirth.Main\r\n            ], utilsObjects_1.ValuesOf(content_1.Content.Views.Rebirth.Monsters), utilsObjects_1.ValuesOf(content_1.Content.Views.Rebirth.Turrets), utilsObjects_1.ValuesOf(content_1.Content.Views.Rebirth.Buildings))),\r\n        }); });\r\n        this.game = new contentModule_1.ContentModule(ModuleStorage, \"Overlays.Game\", function () { return ({\r\n            //# Gameplay Overlays #\r\n            GameFieldOverlay: new overlay_1.Overlay(content_1.UIStorage, \"GameFieldOverlay\", screenSize, content_1.Content.Views.Overlays.GameField, content_1.UIStorage.GetAllItemsOfType(view_1.View)),\r\n            //# Unlocks Overlays #\r\n            UnlocksOverlay: new overlay_1.Overlay(content_1.UIStorage, \"UnlocksOverlay\", screenSize, content_1.Content.Views.Overlays.UnlocksOverlay, [content_1.Content.Views.Menus.Unlocks]),\r\n            //# Rebirth Overlays #\r\n            RebirthOverlay: new overlay_1.Overlay(content_1.UIStorage, \"RebirthOverlay\", screenSize, content_1.Content.Views.Overlays.RebirthOverlay, __spreadArrays([\r\n                content_1.Content.Views.Rebirth.Main\r\n            ], utilsObjects_1.ValuesOf(content_1.Content.Views.Rebirth.Turrets), utilsObjects_1.ValuesOf(content_1.Content.Views.Rebirth.Monsters), utilsObjects_1.ValuesOf(content_1.Content.Views.Rebirth.Buildings))),\r\n            RebirthMonstersOverlay: new overlay_1.Overlay(content_1.UIStorage, \"RebirthMonstersOverlay\", screenSize, content_1.Content.Views.Overlays.RebirthMonstersOverlay, __spreadArrays(utilsObjects_1.ValuesOf(content_1.Content.Views.Rebirth.Monsters))),\r\n            RebirthTurretsOverlay: new overlay_1.Overlay(content_1.UIStorage, \"RebirthTurretsOverlay\", screenSize, content_1.Content.Views.Overlays.RebirthTurretsOverlay, __spreadArrays(utilsObjects_1.ValuesOf(content_1.Content.Views.Rebirth.Turrets))),\r\n            RebirthBuildingsOverlay: new overlay_1.Overlay(content_1.UIStorage, \"RebirthBuildingsOverlay\", screenSize, content_1.Content.Views.Overlays.RebirthBuildingsOverlay, __spreadArrays(utilsObjects_1.ValuesOf(content_1.Content.Views.Rebirth.Buildings))),\r\n            //# Monsters Overlays #\r\n            MonstersOverlay: new overlay_1.Overlay(content_1.UIStorage, \"MonstersOverlay\", screenSize, content_1.Content.Views.Overlays.MonstersOverlay, __spreadArrays(utilsObjects_1.ValuesOf(content_1.Content.Views.Monsters))),\r\n            //# Turrets Overlays #\r\n            TurretsOverlay: new overlay_1.Overlay(content_1.UIStorage, \"TurretsOverlay\", screenSize, content_1.Content.Views.Overlays.TurretsOverlay, __spreadArrays(utilsObjects_1.ValuesOf(content_1.Content.Views.Turrets))),\r\n            //# Buildings Overlays #\r\n            BuildingsOverlay: new overlay_1.Overlay(content_1.UIStorage, \"BuildingsOverlay\", screenSize, content_1.Content.Views.Overlays.BuildingsOverlay, __spreadArrays(utilsObjects_1.ValuesOf(content_1.Content.Views.Buildings))),\r\n        }); });\r\n    }\r\n    Object.defineProperty(AllOverlaysContent.prototype, \"UI\", {\r\n        get: function () {\r\n            return this.ui.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllOverlaysContent.prototype, \"Game\", {\r\n        get: function () {\r\n            return this.game.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return AllOverlaysContent;\r\n}());\r\nexports.AllOverlaysContent = AllOverlaysContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/ui/initOverlays.ts?");

/***/ }),

/***/ "./src/content/modules/ui/initScrollbars.ts":
/*!**************************************************!*\
  !*** ./src/content/modules/ui/initScrollbars.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InitScrollbars = void 0;\r\nvar scrollbar_1 = __webpack_require__(/*! ../../../../javascript/construct3/c3ObjectUtils/gameUI/scrollbar */ \"./javascript/construct3/c3ObjectUtils/gameUI/scrollbar.ts\");\r\nvar vector2_1 = __webpack_require__(/*! ../../../data/vector2 */ \"./src/data/vector2.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\n//todo combine with views?\r\n//todo viewID is not so convenient, you know\r\nfunction InitScrollbars(storage, content) {\r\n    return {\r\n        Menus: {\r\n            Unlocks: new scrollbar_1.Scrollbar(content, content_1.ViewID.Unlocks, new DOMRect(3760, 11860, 1840, 5000), new vector2_1.Size(1840, 1580)),\r\n            Settings: new scrollbar_1.Scrollbar(content, content_1.ViewID.Settings, new DOMRect(12400, 11840, 1880, 5000), new vector2_1.Size(1880, 1580)),\r\n            Statistics: new scrollbar_1.Scrollbar(content, content_1.ViewID.Statistics, new DOMRect(18160, 11860, 1880, 5000), new vector2_1.Size(1880, 1580)),\r\n        },\r\n        Monsters: {\r\n            Basic: new scrollbar_1.Scrollbar(content, content_1.ViewID.BasicMonster, new DOMRect(3760, 340, 1800, 5000), new vector2_1.Size(1860, 1400)),\r\n            Armored: new scrollbar_1.Scrollbar(content, content_1.ViewID.ArmoredMonster, new DOMRect(6640, 340, 1800, 5000), new vector2_1.Size(1860, 1400)),\r\n            Fast: new scrollbar_1.Scrollbar(content, content_1.ViewID.FastMonster, new DOMRect(9520, 340, 1800, 5000), new vector2_1.Size(1860, 1400)),\r\n        },\r\n        Turrets: {\r\n            Basic: new scrollbar_1.Scrollbar(content, content_1.ViewID.BasicTurret, new DOMRect(3760, 6100, 1800, 5000), new vector2_1.Size(1860, 1400)),\r\n            Laser: new scrollbar_1.Scrollbar(content, content_1.ViewID.LaserTurret, new DOMRect(6640, 6100, 1800, 5000), new vector2_1.Size(1860, 1400)),\r\n            Rail: new scrollbar_1.Scrollbar(content, content_1.ViewID.RailTurret, new DOMRect(9520, 6100, 1800, 5000), new vector2_1.Size(1860, 1400)),\r\n        },\r\n        Buildings: {\r\n            Spikes: new scrollbar_1.Scrollbar(content, content_1.ViewID.Spikes, new DOMRect(3760, 17620, 1800, 5000), new vector2_1.Size(1860, 1400)),\r\n        },\r\n        Rebirth: {\r\n            Main: new scrollbar_1.Scrollbar(content, content_1.ViewID.RebirthMain, new DOMRect(3760, 23360, 1840, 5000), new vector2_1.Size(1840, 1400)),\r\n            //# Monsters #\r\n            BasicMonster: new scrollbar_1.Scrollbar(content, content_1.ViewID.RebirthBasicMonster, new DOMRect(6640, 23380, 1840, 5000), new vector2_1.Size(1840, 1400)),\r\n            ArmoredMonster: new scrollbar_1.Scrollbar(content, content_1.ViewID.RebirthArmoredMonster, new DOMRect(12400, 23380, 1840, 5000), new vector2_1.Size(1840, 1400)),\r\n            FastMonster: new scrollbar_1.Scrollbar(content, content_1.ViewID.RebirthFastMonster, new DOMRect(21040, 23380, 1840, 5000), new vector2_1.Size(1840, 1400)),\r\n            //# Turrets #\r\n            BasicTurret: new scrollbar_1.Scrollbar(content, content_1.ViewID.RebirthBasicTurret, new DOMRect(9520, 23380, 1840, 5000), new vector2_1.Size(1840, 1400)),\r\n            LaserTurret: new scrollbar_1.Scrollbar(content, content_1.ViewID.RebirthLaserTurret, new DOMRect(18160, 23380, 1840, 5000), new vector2_1.Size(1840, 1400)),\r\n            RailTurret: new scrollbar_1.Scrollbar(content, content_1.ViewID.RebirthRailTurret, new DOMRect(23920, 23380, 1840, 5000), new vector2_1.Size(1840, 1400)),\r\n            //# Buildings #\r\n            Spikes: new scrollbar_1.Scrollbar(content, content_1.ViewID.RebirthSpikes, new DOMRect(15280, 23380, 1840, 5000), new vector2_1.Size(1840, 1400)),\r\n        },\r\n    };\r\n}\r\nexports.InitScrollbars = InitScrollbars;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/ui/initScrollbars.ts?");

/***/ }),

/***/ "./src/content/modules/ui/initViews.ts":
/*!*********************************************!*\
  !*** ./src/content/modules/ui/initViews.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AllViewsContent = exports.InitViews = void 0;\r\nvar contentModule_1 = __webpack_require__(/*! ../../../data/game/contentModule */ \"./src/data/game/contentModule.ts\");\r\nvar view_1 = __webpack_require__(/*! ../../../../javascript/construct3/c3ObjectUtils/gameUI/view */ \"./javascript/construct3/c3ObjectUtils/gameUI/view.ts\");\r\nvar vector2_1 = __webpack_require__(/*! ../../../data/vector2 */ \"./src/data/vector2.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content */ \"./src/content/content.ts\");\r\n//todo viewID is not so convenient, you know\r\nfunction InitViews(storage, content) {\r\n    return new AllViewsContent(storage, content);\r\n}\r\nexports.InitViews = InitViews;\r\nvar AllViewsContent = /** @class */ (function () {\r\n    function AllViewsContent(ModuleStorage, ContentStorage) {\r\n        this.ModuleStorage = ModuleStorage;\r\n        this.ContentStorage = ContentStorage;\r\n        this.overlays = new contentModule_1.ContentModule(ModuleStorage, \"Views.Overlays\", function () { return ({\r\n            Top: new view_1.View(content_1.UIStorage, content_1.ViewID.TopOverlay, new vector2_1.Vector2(4, -1)),\r\n            Bottom: new view_1.View(content_1.UIStorage, content_1.ViewID.BottomOverlay, new vector2_1.Vector2(5, -1)),\r\n            GameField: new view_1.View(content_1.UIStorage, content_1.ViewID.GameFieldOverlay, new vector2_1.Vector2(6, -1)),\r\n            UnlocksOverlay: new view_1.View(content_1.UIStorage, content_1.ViewID.UnlocksOverlay, new vector2_1.Vector2(2, -3)),\r\n            //# Rebirth Overlays #\r\n            RebirthOverlay: new view_1.View(content_1.UIStorage, content_1.ViewID.RebirthOverlay, new vector2_1.Vector2(4, -2)),\r\n            RebirthMonstersOverlay: new view_1.View(content_1.UIStorage, content_1.ViewID.RebirthMonstersOverlay, new vector2_1.Vector2(5, -2)),\r\n            RebirthTurretsOverlay: new view_1.View(content_1.UIStorage, content_1.ViewID.RebirthTurretsOverlay, new vector2_1.Vector2(6, -2)),\r\n            RebirthBuildingsOverlay: new view_1.View(content_1.UIStorage, content_1.ViewID.RebirthBuildingsOverlay, new vector2_1.Vector2(7, -2)),\r\n            MonstersOverlay: new view_1.View(content_1.UIStorage, content_1.ViewID.MonstersOverlay, new vector2_1.Vector2(2, -1)),\r\n            TurretsOverlay: new view_1.View(content_1.UIStorage, content_1.ViewID.TurretsOverlay, new vector2_1.Vector2(3, -1)),\r\n            BuildingsOverlay: new view_1.View(content_1.UIStorage, content_1.ViewID.BuildingsOverlay, new vector2_1.Vector2(3, -2)),\r\n        }); });\r\n        this.menus = new contentModule_1.ContentModule(ModuleStorage, \"Views.Menus\", function () { return ({\r\n            Menu: new view_1.View(content_1.UIStorage, content_1.ViewID.Menu, new vector2_1.Vector2(1, -1)),\r\n            Unlocks: new view_1.View(content_1.UIStorage, content_1.ViewID.Unlocks, new vector2_1.Vector2(1, 6)),\r\n            Buildings: new view_1.View(content_1.UIStorage, content_1.ViewID.Buildings, new vector2_1.Vector2(3, 6)),\r\n            BuildMode: new view_1.View(content_1.UIStorage, content_1.ViewID.BuildMode, new vector2_1.Vector2(2, -2)),\r\n            Settings: new view_1.View(content_1.UIStorage, content_1.ViewID.Settings, new vector2_1.Vector2(4, 6)),\r\n            Credits: new view_1.View(content_1.UIStorage, content_1.ViewID.Credits, new vector2_1.Vector2(5, 6)),\r\n            Statistics: new view_1.View(content_1.UIStorage, content_1.ViewID.Statistics, new vector2_1.Vector2(6, 6)),\r\n        }); });\r\n        this.rebirth = new contentModule_1.ContentModule(ModuleStorage, \"Views.Rebirth\", function () { return ({\r\n            Main: new view_1.View(content_1.UIStorage, content_1.ViewID.RebirthMain, new vector2_1.Vector2(1, 12)),\r\n            Monsters: {\r\n                Basic: new view_1.View(content_1.UIStorage, content_1.ViewID.RebirthBasicMonster, new vector2_1.Vector2(2, 12)),\r\n                Armored: new view_1.View(content_1.UIStorage, content_1.ViewID.RebirthArmoredMonster, new vector2_1.Vector2(4, 12)),\r\n                Fast: new view_1.View(content_1.UIStorage, content_1.ViewID.RebirthFastMonster, new vector2_1.Vector2(7, 12)),\r\n            },\r\n            Turrets: {\r\n                Basic: new view_1.View(content_1.UIStorage, content_1.ViewID.RebirthBasicTurret, new vector2_1.Vector2(3, 12)),\r\n                Laser: new view_1.View(content_1.UIStorage, content_1.ViewID.RebirthLaserTurret, new vector2_1.Vector2(6, 12)),\r\n                Rail: new view_1.View(content_1.UIStorage, content_1.ViewID.RebirthRailTurret, new vector2_1.Vector2(8, 12)),\r\n            },\r\n            Buildings: {\r\n                Spikes: new view_1.View(content_1.UIStorage, content_1.ViewID.RebirthSpikes, new vector2_1.Vector2(5, 12)),\r\n            },\r\n        }); });\r\n        this.monsters = new contentModule_1.ContentModule(ModuleStorage, \"Views.Monsters\", function () { return ({\r\n            Basic: new view_1.View(content_1.UIStorage, content_1.ViewID.BasicMonster, new vector2_1.Vector2(1, 0)),\r\n            Armored: new view_1.View(content_1.UIStorage, content_1.ViewID.ArmoredMonster, new vector2_1.Vector2(2, 0)),\r\n            Fast: new view_1.View(content_1.UIStorage, content_1.ViewID.FastMonster, new vector2_1.Vector2(3, 0)),\r\n        }); });\r\n        this.turrets = new contentModule_1.ContentModule(ModuleStorage, \"Views.Turrets\", function () { return ({\r\n            Basic: new view_1.View(content_1.UIStorage, content_1.ViewID.BasicTurret, new vector2_1.Vector2(1, 3)),\r\n            Laser: new view_1.View(content_1.UIStorage, content_1.ViewID.LaserTurret, new vector2_1.Vector2(2, 3)),\r\n            Rail: new view_1.View(content_1.UIStorage, content_1.ViewID.RailTurret, new vector2_1.Vector2(3, 3)),\r\n        }); });\r\n        this.buildings = new contentModule_1.ContentModule(ModuleStorage, \"Views.Buildings\", function () { return ({\r\n            Spikes: new view_1.View(content_1.UIStorage, content_1.ViewID.Spikes, new vector2_1.Vector2(1, 9)),\r\n        }); });\r\n    }\r\n    Object.defineProperty(AllViewsContent.prototype, \"Overlays\", {\r\n        get: function () {\r\n            return this.overlays.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllViewsContent.prototype, \"Menus\", {\r\n        get: function () {\r\n            return this.menus.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllViewsContent.prototype, \"Rebirth\", {\r\n        get: function () {\r\n            return this.rebirth.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllViewsContent.prototype, \"Monsters\", {\r\n        get: function () {\r\n            return this.monsters.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllViewsContent.prototype, \"Turrets\", {\r\n        get: function () {\r\n            return this.turrets.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AllViewsContent.prototype, \"Buildings\", {\r\n        get: function () {\r\n            return this.buildings.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return AllViewsContent;\r\n}());\r\nexports.AllViewsContent = AllViewsContent;\r\n\n\n//# sourceURL=webpack://Game/./src/content/modules/ui/initViews.ts?");

/***/ }),

/***/ "./src/content/themeUnlocks.ts":
/*!*************************************!*\
  !*** ./src/content/themeUnlocks.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UpdateThemeUnlocks = exports.UpdateScrollbars = exports.EventWithCondition = exports.InitThemeUnlocks = void 0;\r\nvar content_1 = __webpack_require__(/*! ./content */ \"./src/content/content.ts\");\r\nvar c3themeUtils_1 = __webpack_require__(/*! ../../javascript/construct3/c3ObjectUtils/c3themeUtils */ \"./javascript/construct3/c3ObjectUtils/c3themeUtils.ts\");\r\nvar utilsGUI_1 = __webpack_require__(/*! ../../javascript/construct3/c3ObjectUtils/utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar utilsObjects_1 = __webpack_require__(/*! ../utils/utilsObjects */ \"./src/utils/utilsObjects.ts\");\r\nvar game_1 = __webpack_require__(/*! ../game */ \"./src/game.ts\");\r\nvar utilsMath_1 = __webpack_require__(/*! ../utils/utilsMath */ \"./src/utils/utilsMath.ts\");\r\nvar overlayMessage_1 = __webpack_require__(/*! ../ui/overlayMessage */ \"./src/ui/overlayMessage.ts\");\r\nvar upgrade_1 = __webpack_require__(/*! ../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar gameObject_1 = __webpack_require__(/*! ../game/gameObject */ \"./src/game/gameObject.ts\");\r\nvar indicatorsGUI_1 = __webpack_require__(/*! ../ui/gui-update/indicatorsGUI */ \"./src/ui/gui-update/indicatorsGUI.ts\");\r\nvar scrollbar_1 = __webpack_require__(/*! ../../javascript/construct3/c3ObjectUtils/gameUI/scrollbar */ \"./javascript/construct3/c3ObjectUtils/gameUI/scrollbar.ts\");\r\nvar ThemeConditions;\r\nfunction InitThemeUnlocks() {\r\n    ThemeConditions = [];\r\n    content_1.SystemData.IsThemesInitiated = false;\r\n    //todo ВООБЩЕ ТО, здесь стоит отталкиваться от собственно текущих значений игровых, чтобы потом всё не переделывать\r\n    // в других местах\r\n    //# System #\r\n    c3themeUtils_1.ToggleTheme('SystemStuff', false);\r\n    //TODO REMOVE\r\n    c3themeUtils_1.ToggleTheme('PLACEHOLDER', false);\r\n    //# Menus #\r\n    c3themeUtils_1.ToggleTheme('Menu::Monsters', false);\r\n    c3themeUtils_1.ToggleTheme('Menu::Turrets', false);\r\n    c3themeUtils_1.ToggleTheme('Menu::BuildMode', false);\r\n    c3themeUtils_1.ToggleTheme('Menu::Rebirth', false);\r\n    c3themeUtils_1.ToggleTheme('Menu::Buildings', false);\r\n    c3themeUtils_1.ToggleTheme('Menu::Bosses', false);\r\n    c3themeUtils_1.ToggleTheme('Menu::Researches', false);\r\n    //# Monster & Turret Upgrade Menus #\r\n    c3themeUtils_1.ToggleTheme('Upgrades::ArmoredMonster', false);\r\n    c3themeUtils_1.ToggleTheme('Upgrades::LaserTurret', false);\r\n    //# Unlocks #\r\n    c3themeUtils_1.ToggleTheme(\"Unlock::BasicTurret\", false);\r\n    c3themeUtils_1.ToggleTheme(\"Unlock::ArmoredMonster\", false);\r\n    c3themeUtils_1.ToggleTheme(\"Unlock::Spikes\", false);\r\n    c3themeUtils_1.ToggleTheme(\"Unlock::LaserTurret\", false);\r\n    //# BuildMode #\r\n    c3themeUtils_1.ToggleTheme(\"Build::Spikes\", content_1.Content.Buildings.Spikes.Unlock.IsUnlocked);\r\n    c3themeUtils_1.ToggleTheme(\"Build::LaserTurret\", content_1.Content.Turrets.Laser.Unlock.IsUnlocked);\r\n    //# Turrets & Monster upgrades #\r\n    var allUpgrades = content_1.ContentStorage.GetAllItemsOfType(upgrade_1.Upgrade);\r\n    var _loop_1 = function (upgrade) {\r\n        //ToggleTheme(`Upgrade::${upgrade.ID}`, upgrade.IsThemeUnlocked);\r\n        if (!upgrade.IsThemeUnlocked && upgrade.SubClassID == upgrade_1.UpgradeClassID.Upgrade) {\r\n            ThemeConditions.push(new EventWithCondition(function () { return upgrade.PriceArray.IsCanBuy(1)\r\n                || upgrade.Level.IsMoreThanZero || upgrade.IsThemeUnlocked; }, function () {\r\n                upgrade.IsThemeUnlocked = true;\r\n                c3themeUtils_1.ToggleTheme(\"Upgrade::\" + upgrade.ID, true);\r\n            }));\r\n        }\r\n    };\r\n    for (var _i = 0, allUpgrades_1 = allUpgrades; _i < allUpgrades_1.length; _i++) {\r\n        var upgrade = allUpgrades_1[_i];\r\n        _loop_1(upgrade);\r\n    }\r\n    var unlockableEntities = __spreadArrays(utilsObjects_1.ValuesOf(content_1.Content.Turrets), utilsObjects_1.ValuesOf(content_1.Content.Monsters), [\r\n        content_1.Content.Buildings.Spikes\r\n    ]);\r\n    indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Buildings\", false);\r\n    ThemeConditions.push(new EventWithCondition(function () { return content_1.Content.Buildings.Spikes.System.IsEverUnlocked.Value; }, function () { return indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Buildings\", true); }));\r\n    var _loop_2 = function (item) {\r\n        c3themeUtils_1.ToggleTheme(\"Upgrades::\" + item.Entity.ID, false);\r\n        c3themeUtils_1.ToggleTheme(\"Statistics::\" + item.Entity.ID, false);\r\n        c3themeUtils_1.ToggleTheme(\"Rebirth.\" + item.Entity.ID, false);\r\n        //todo update rebirth selectors themes\r\n        c3themeUtils_1.ToggleTheme(\"Rebirth\" + item.Entity.ID, false);\r\n        //todo make local functions for this\r\n        if (item.Entity.ClassID == gameObject_1.ClassName.Monster) {\r\n            utilsGUI_1.SetSelectorEnabled(\"Rebirth.Monsters\", item.Entity.ID, false);\r\n            c3themeUtils_1.ToggleTheme(\"MonsterSettings::\" + item.Entity.ID, item.Unlock.IsUnlocked);\r\n        }\r\n        else if (item.Entity.ClassID == gameObject_1.ClassName.Turret) {\r\n            utilsGUI_1.SetSelectorEnabled(\"Rebirth.Turrets\", item.Entity.ID, false);\r\n        }\r\n        else if (utilsObjects_1.ValuesOf(gameObject_1.BuildingName).includes(item.Entity.ClassID)) {\r\n            utilsGUI_1.SetSelectorEnabled(\"Rebirth.Buildings\", item.Entity.ID, false);\r\n        }\r\n        ThemeConditions.push(new EventWithCondition(function () { return item.Unlock.IsUnlocked; }, function () { return c3themeUtils_1.ToggleTheme(\"Upgrades::\" + item.Entity.ID, true); }));\r\n        ThemeConditions.push(new EventWithCondition(function () { return item.System.IsEverUnlocked.Value; }, function () {\r\n            c3themeUtils_1.ToggleTheme(\"Statistics::\" + item.Entity.ID, true);\r\n            c3themeUtils_1.ToggleTheme(\"Rebirth.\" + item.Entity.ID, true);\r\n            //todo update rebirth selectors themes\r\n            c3themeUtils_1.ToggleTheme(\"Rebirth\" + item.Entity.ID, true);\r\n            if (item.Entity.ClassID == gameObject_1.ClassName.Monster) {\r\n                utilsGUI_1.SetSelectorEnabled(\"Rebirth.Monsters\", \"\" + item.Entity.ID, true);\r\n            }\r\n            else if (item.Entity.ClassID == gameObject_1.ClassName.Turret) {\r\n                utilsGUI_1.SetSelectorEnabled(\"Rebirth.Turrets\", \"\" + item.Entity.ID, true);\r\n            }\r\n            else if (utilsObjects_1.ValuesOf(gameObject_1.BuildingName).includes(item.Entity.ClassID)) {\r\n                utilsGUI_1.SetSelectorEnabled(\"Rebirth.Buildings\", item.Entity.ID, true);\r\n            }\r\n        }));\r\n    };\r\n    for (var _a = 0, unlockableEntities_1 = unlockableEntities; _a < unlockableEntities_1.length; _a++) {\r\n        var item = unlockableEntities_1[_a];\r\n        _loop_2(item);\r\n    }\r\n    for (var _b = 0, _c = utilsObjects_1.ValuesOf(content_1.Content.Monsters)\r\n        .filter(function (item) { return item.Entity.ID != \"BasicMonster\"; }); _b < _c.length; _b++) {\r\n        var monster = _c[_b];\r\n        utilsGUI_1.SetSelectorEnabled(\"Rebirth.Monsters\", monster.Entity.ID, false);\r\n    }\r\n    for (var _d = 0, _e = utilsObjects_1.ValuesOf(content_1.Content.Turrets)\r\n        .filter(function (item) { return item.Entity.ID != \"BasicTurret\"; }); _d < _e.length; _d++) {\r\n        var turret = _e[_d];\r\n        utilsGUI_1.SetSelectorEnabled(\"Rebirth.Turrets\", turret.Entity.ID, false);\r\n    }\r\n    //todo easier way to do it for upgrade\r\n    //add ability to specify this stuff in separate classes\r\n    ThemeConditions.push.apply(ThemeConditions, [\r\n        new EventWithCondition(function () { return true; }, function () { return true; }),\r\n        // Unlocks\r\n        new EventWithCondition(function () { return content_1.Content.Monsters.Basic.Unlock.IsUnlocked; }, function () {\r\n            var id = \"BasicTurret\";\r\n            c3themeUtils_1.ToggleTheme(\"Unlock::\" + id, true);\r\n            content_1.Content.Turrets.Basic.UnlockPurchase.IsThemeUnlocked = true;\r\n        }),\r\n        //todo move it to ArmoredMonsterContent somehow\r\n        //# ArmoredMonster #\r\n        new EventWithCondition(function () { return content_1.Content.Wallets.Coins.Statistics.TotalCollected.IsMore(10000); }, function () {\r\n            var id = \"ArmoredMonster\";\r\n            c3themeUtils_1.ToggleTheme(\"Unlock::\" + id, true);\r\n            content_1.Content.Monsters.Armored.UnlockPurchase.IsThemeUnlocked = true;\r\n            if (!content_1.Content.Monsters.Armored.System.IsNotificationShown.Value) {\r\n                content_1.Content.Monsters.Armored.System.IsNotificationShown.Value = true;\r\n                overlayMessage_1.ShowOverlayMessage({\r\n                    Title: \"Rockster is available!\",\r\n                    Text: \"New monster is available for purchase! But, before buying him, be sure you are ready to rock!\",\r\n                    Icon: {\r\n                        Animation: \"Monsters\",\r\n                        Frame: 1,\r\n                    },\r\n                    Button: {\r\n                        //bug color is not set\r\n                        Color: utilsMath_1.HexToRGB255(\"#e33b3b\"),\r\n                        Action: function () { return content_1.Managers.Views.SetView(content_1.Content.Views.Menus.Unlocks); }\r\n                    }\r\n                });\r\n            }\r\n        }),\r\n        //# Spikes #\r\n        new EventWithCondition(function () { return content_1.Content.Wallets.Coins.Statistics.TotalCollected.IsMore(75000); }, function () {\r\n            var id = \"Spikes\";\r\n            c3themeUtils_1.ToggleTheme(\"Unlock::\" + id, true);\r\n            content_1.Content.Buildings.Spikes.UnlockPurchase.IsThemeUnlocked = true;\r\n            if (!content_1.Content.Buildings.Spikes.System.IsNotificationShown.Value) {\r\n                content_1.Content.Buildings.Spikes.System.IsNotificationShown.Value = true;\r\n                overlayMessage_1.ShowOverlayMessage({\r\n                    Title: \"Spikes is available!\",\r\n                    Text: \"New building is available! Spikes is a great thing to damage monsters with armor, \"\r\n                        + \"because it has ability to deal damage through armor, but you need to unlock it first!\",\r\n                    Icon: {\r\n                        Animation: \"Buildings\",\r\n                        Frame: 0,\r\n                    },\r\n                    Button: {\r\n                        //bug color is not set\r\n                        Color: utilsMath_1.HexToRGB255(\"#e33b3b\"),\r\n                        Action: function () { return content_1.Managers.Views.SetView(content_1.Content.Views.Menus.Unlocks); }\r\n                    }\r\n                });\r\n            }\r\n        }),\r\n        //# LaserTurret #\r\n        new EventWithCondition(function () { return content_1.Content.Wallets.Coins.Statistics.TotalCollected.IsMore(200000); }, function () {\r\n            var id = \"LaserTurret\";\r\n            c3themeUtils_1.ToggleTheme(\"Unlock::\" + id, true);\r\n            content_1.Content.Turrets.Laser.UnlockPurchase.IsThemeUnlocked = true;\r\n            if (!content_1.Content.Turrets.Laser.System.IsNotificationShown.Value) {\r\n                content_1.Content.Turrets.Laser.System.IsNotificationShown.Value = true;\r\n                overlayMessage_1.ShowOverlayMessage({\r\n                    Title: \"Lasergun is available!\",\r\n                    Text: \"Hey, you have a new turret to buy! It doesn't do much damage, but it rotates quickly and fires frequently. I think you'll find a use for it!\",\r\n                    Icon: {\r\n                        Animation: \"Turrets\",\r\n                        Frame: 1,\r\n                    },\r\n                    Button: {\r\n                        //bug color is not set\r\n                        Color: utilsMath_1.HexToRGB255(\"#e33b3b\"),\r\n                        Action: function () { return content_1.Managers.Views.SetView(content_1.Content.Views.Menus.Unlocks); }\r\n                    }\r\n                });\r\n            }\r\n        }),\r\n        // //# FastMonster #\r\n        // new EventWithCondition(\r\n        //     () => Content.Wallets.Coins.Statistics.TotalCollected.IsMore(5_000_000),\r\n        //     () => {\r\n        //             let id = \"FastMonster\";\r\n        //             ToggleTheme(`Unlock::${id}`, true);\r\n        //             Content.Monsters.Fast.UnlockPurchase.IsThemeUnlocked = true;\r\n        //         if (!Content.Monsters.Fast.System.IsNotificationShown.Value) {\r\n        //             Content.Monsters.Fast.System.IsNotificationShown.Value = true;\r\n        //             ShowOverlayMessage({\r\n        //                 Title: \"Trickster is available!\",\r\n        //                 Text: \"Wow, template text!\",\r\n        //\r\n        //                 Icon: {\r\n        //                     Animation: \"Monsters\",\r\n        //                     Frame: 2,\r\n        //                 },\r\n        //                 Button: {\r\n        //                     //bug color is not set\r\n        //                     Color: HexToRGB255(\"#e33b3b\"),\r\n        //                     Action: () => Managers.Views.SetView(Content.Views.Menus.Unlocks)\r\n        //                 }\r\n        //             })\r\n        //         }\r\n        //     }),\r\n        //\r\n        //\r\n        // //# RailTurret #\r\n        // new EventWithCondition(\r\n        //     () => Content.Wallets.Coins.Statistics.TotalCollected.IsMore(20_000_000),\r\n        //     () => {\r\n        //             let id = \"RailTurret\";\r\n        //             ToggleTheme(`Unlock::${id}`, true);\r\n        //             Content.Turrets.Rail.UnlockPurchase.IsThemeUnlocked = true;\r\n        //\r\n        //         if (!Content.Turrets.Rail.System.IsNotificationShown.Value) {\r\n        //             Content.Turrets.Rail.System.IsNotificationShown.Value = true;\r\n        //             ShowOverlayMessage({\r\n        //                 Title: \"Railgun is available!\",\r\n        //                 Text: \"Wow, template text!\",\r\n        //\r\n        //                 Icon: {\r\n        //                     Animation: \"Turrets\",\r\n        //                     Frame: 2,\r\n        //                 },\r\n        //                 Button: {\r\n        //                     //bug color is not set\r\n        //                     Color: HexToRGB255(\"#e33b3b\"),\r\n        //                     Action: () => Managers.Views.SetView(Content.Views.Menus.Unlocks)\r\n        //                 }\r\n        //             })\r\n        //         }\r\n        //     }),\r\n        //# Rebirth #\r\n        new EventWithCondition(function () { return content_1.Content.Rebirth.Stats.HappenedCount.Value.IsMore(0)\r\n            || content_1.Content.Rebirth.Stats.NextPointProgress.LevelValue.IsMoreOrEqual(5); }, function () {\r\n            //todo somehow, make enums for themes and combine them with IDs\r\n            c3themeUtils_1.ToggleTheme('Menu::Rebirth', true);\r\n            utilsGUI_1.SetButtonEnabled(\"setView::Rebirth\", true);\r\n            c3themeUtils_1.ToggleTheme('Upgrade::BasicTurret.Count', true);\r\n            c3themeUtils_1.ToggleTheme('Upgrade::BasicMonster.Rebirth.Health', true);\r\n            if (!content_1.Content.Rebirth.Stats.IsNotificationShow.Value) {\r\n                content_1.Content.Rebirth.Stats.IsNotificationShow.Value = true;\r\n                overlayMessage_1.ShowOverlayMessage({\r\n                    Title: \"New menu unlocked!\",\r\n                    Text: \"You just unlocked Rebirth! It allows you to reset your progress, but get some cool permanent bonuses.\",\r\n                    Icon: {\r\n                        Animation: \"Wallets\",\r\n                        Frame: 1,\r\n                    },\r\n                    Button: {\r\n                        //bug color is not set\r\n                        Color: utilsMath_1.HexToRGB255(\"#e33b3b\"),\r\n                        Action: function () { return content_1.Managers.Views.SetView(content_1.Content.Views.Menus.Menu); }\r\n                    }\r\n                });\r\n            }\r\n        }),\r\n    ]);\r\n    UpdateScrollbars();\r\n    c3themeUtils_1.ToggleTheme('SystemStuff', game_1.BUILD_MODE == \"Preview\");\r\n    content_1.SystemData.IsThemesInitiated = true;\r\n}\r\nexports.InitThemeUnlocks = InitThemeUnlocks;\r\nvar EventWithCondition = /** @class */ (function () {\r\n    function EventWithCondition(CheckCondition, OnConditionTrue) {\r\n        this.CheckCondition = CheckCondition;\r\n        this.OnConditionTrue = OnConditionTrue;\r\n    }\r\n    return EventWithCondition;\r\n}());\r\nexports.EventWithCondition = EventWithCondition;\r\nfunction UpdateScrollbars() {\r\n    if (content_1.SystemData.IsContentLoaded) {\r\n        for (var _i = 0, _a = content_1.UIStorage.GetAllItemsOfType(scrollbar_1.Scrollbar); _i < _a.length; _i++) {\r\n            var scrollbar = _a[_i];\r\n            //scrollbar.UpdateVisibleElementsData();\r\n            scrollbar.Update();\r\n        }\r\n    }\r\n}\r\nexports.UpdateScrollbars = UpdateScrollbars;\r\n//todo call it on events, not every tick... (or at least every second maybe, for now)\r\nfunction UpdateThemeUnlocks() {\r\n    content_1.SystemData.IsThemesInitiated = false;\r\n    var completed = 0;\r\n    for (var i = 0; i < ThemeConditions.length; i++) {\r\n        var condition = ThemeConditions[i];\r\n        if (condition.CheckCondition()) {\r\n            completed++;\r\n            condition.OnConditionTrue();\r\n            ThemeConditions.splice(i, 1);\r\n        }\r\n    }\r\n    content_1.SystemData.IsThemesInitiated = true;\r\n    if (completed > 0) {\r\n        UpdateScrollbars();\r\n        game_1.SmartUIUpdate();\r\n        //Construct3.callFunction(\"UpdateGUI\");\r\n    }\r\n}\r\nexports.UpdateThemeUnlocks = UpdateThemeUnlocks;\r\n\n\n//# sourceURL=webpack://Game/./src/content/themeUnlocks.ts?");

/***/ }),

/***/ "./src/data/game/contentModule.ts":
/*!****************************************!*\
  !*** ./src/data/game/contentModule.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ContentModule = void 0;\r\nvar ContentModule = /** @class */ (function () {\r\n    function ContentModule(storage, id, load, autoAdd) {\r\n        if (autoAdd === void 0) { autoAdd = true; }\r\n        this.isLoaded = false;\r\n        this.ClassID = \"Module\";\r\n        this.ModuleStorage = storage;\r\n        this.ID = id;\r\n        this.LoadContent = load;\r\n        this.content = null;\r\n        if (autoAdd) {\r\n            storage.AddItem(this);\r\n        }\r\n    }\r\n    ContentModule.prototype.GetModule = function (id) {\r\n        for (var _i = 0, _a = this.ModuleStorage.Items; _i < _a.length; _i++) {\r\n            var module_1 = _a[_i];\r\n            if (module_1.ID == id) {\r\n                return module_1;\r\n            }\r\n        }\r\n        throw new Error(\"Module not found: '\" + id + \"'\");\r\n    };\r\n    ContentModule.prototype.GetContent = function (id) {\r\n        return this.GetModule(id).Get();\r\n    };\r\n    Object.defineProperty(ContentModule.prototype, \"IsLoaded\", {\r\n        get: function () {\r\n            return this.isLoaded;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ContentModule.prototype, \"Content\", {\r\n        get: function () {\r\n            return this.Get();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ContentModule.prototype.Load = function () {\r\n        if (!this.IsLoaded) {\r\n            this.isLoaded = true;\r\n            this.content = this.LoadContent();\r\n        }\r\n    };\r\n    ContentModule.prototype.Get = function () {\r\n        this.Load();\r\n        return this.content;\r\n    };\r\n    return ContentModule;\r\n}());\r\nexports.ContentModule = ContentModule;\r\n\n\n//# sourceURL=webpack://Game/./src/data/game/contentModule.ts?");

/***/ }),

/***/ "./src/data/game/gameData.ts":
/*!***********************************!*\
  !*** ./src/data/game/gameData.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GameData = exports.GameDataStatistics = void 0;\r\nvar tweak_1 = __webpack_require__(/*! ../../game/tweak */ \"./src/game/tweak.ts\");\r\nvar float_1 = __webpack_require__(/*! ../math/float */ \"./src/data/math/float.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar tweakArray_1 = __webpack_require__(/*! ../../game/tweakArray */ \"./src/game/tweakArray.ts\");\r\n//todo be sure all important game data is saved, because i can someday need to use stats from it\r\nvar GameDataStatistics = /** @class */ (function () {\r\n    function GameDataStatistics() {\r\n        this.SmallestValue = new float_1.Float(0);\r\n        this.BiggestValue = new float_1.Float(0);\r\n    }\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], GameDataStatistics.prototype, \"SmallestValue\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], GameDataStatistics.prototype, \"BiggestValue\", void 0);\r\n    return GameDataStatistics;\r\n}());\r\nexports.GameDataStatistics = GameDataStatistics;\r\nvar GameData = /** @class */ (function () {\r\n    function GameData(id, value, tweaks, minMaxLimit) {\r\n        this.ID = id;\r\n        this.ClassID = this.constructor.name;\r\n        this.baseValue = new float_1.Float(value);\r\n        this.computedValue = this.baseValue;\r\n        this.MinMaxLimit = minMaxLimit;\r\n        if (tweaks) {\r\n            this.TweakArray = tweaks instanceof tweakArray_1.TweakArray ? tweaks : new tweakArray_1.TweakArray(tweaks);\r\n        }\r\n        else {\r\n            this.TweakArray = new tweakArray_1.TweakArray();\r\n        }\r\n        this.firstBaseValue = this.baseValue;\r\n        this.Statistics = new GameDataStatistics();\r\n        this.Statistics.SmallestValue = this.baseValue;\r\n        this.Statistics.BiggestValue = this.baseValue;\r\n    }\r\n    GameData.prototype.Reset = function () {\r\n        this.baseValue = this.firstBaseValue;\r\n        this.recomputeValue();\r\n    };\r\n    Object.defineProperty(GameData.prototype, \"Value\", {\r\n        get: function () {\r\n            return this.computedValue;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameData.prototype, \"BaseValue\", {\r\n        set: function (newValue) {\r\n            this.baseValue = new float_1.Float(newValue);\r\n            this.recomputeValue();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    GameData.prototype.GetTweak = function (tweak) {\r\n        for (var _i = 0, _a = this.TweakArray.Items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (item.ID == tweak.ID) {\r\n                return item;\r\n            }\r\n        }\r\n        throw new Error(\"Tweak \" + tweak + \" not found in GameData: \" + this.ID);\r\n    };\r\n    GameData.prototype.HasTweak = function (id) {\r\n        return this.TweakArray.HasTweak(id);\r\n    };\r\n    GameData.prototype.recomputeValue = function () {\r\n        var value = this.GetValueWithTweaks(this.TweakArray.Items);\r\n        if (this.MinMaxLimit) {\r\n            if (this.MinMaxLimit[0]) {\r\n                value = float_1.Float.Max(this.MinMaxLimit[0], value);\r\n            }\r\n            if (this.MinMaxLimit[1]) {\r\n                value = float_1.Float.Min(this.MinMaxLimit[1], value);\r\n            }\r\n        }\r\n        if (value.IsLess(this.Statistics.SmallestValue)) {\r\n            this.Statistics.SmallestValue = value;\r\n        }\r\n        if (value.IsMore(this.Statistics.BiggestValue)) {\r\n            this.Statistics.BiggestValue = value;\r\n        }\r\n        this.computedValue = value;\r\n    };\r\n    GameData.prototype.GetValueWithoutTweaks = function (tweaksToExclude) {\r\n        var filteredTweaks = [];\r\n        var _loop_1 = function (tweak) {\r\n            var excludedTweak = tweaksToExclude.find(function (excludedTweak) { return tweak.ID == excludedTweak.ID; });\r\n            if (!excludedTweak) {\r\n                filteredTweaks.push(tweak);\r\n            }\r\n        };\r\n        for (var _i = 0, _a = this.TweakArray.Items; _i < _a.length; _i++) {\r\n            var tweak = _a[_i];\r\n            _loop_1(tweak);\r\n        }\r\n        filteredTweaks = tweak_1.Tweak.SortTweaks(filteredTweaks);\r\n        return this.GetValueWithTweaks(filteredTweaks);\r\n    };\r\n    GameData.prototype.GetValueWithTweaks = function (tweaks, skipDisabledTweaks) {\r\n        if (skipDisabledTweaks === void 0) { skipDisabledTweaks = true; }\r\n        tweaks = tweak_1.Tweak.SortTweaks(tweaks);\r\n        var value = this.baseValue;\r\n        for (var _i = 0, tweaks_1 = tweaks; _i < tweaks_1.length; _i++) {\r\n            var tweak = tweaks_1[_i];\r\n            if (skipDisabledTweaks ? tweak.IsActive : true) {\r\n                value = tweak.CalculateValue(value);\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    GameData.prototype.UpdateTweak = function (tweak) {\r\n        //console.log(`Tweak value updated: ${this.GetTweak(tweakID).Value.String} -> ${new Float(value).String} [${this.GetTweak(tweakID).ID}]`)\r\n        this.GetTweak(tweak).Value = tweak.Value;\r\n        this.recomputeValue();\r\n    };\r\n    GameData.prototype.AddOrUpdateTweak = function (tweak, update) {\r\n        if (update === void 0) { update = true; }\r\n        if (!this.HasTweak(tweak.ID)) {\r\n            this.TweakArray.Items.push(tweak);\r\n            this.TweakArray.SortTweaks();\r\n            this.recomputeValue();\r\n        }\r\n        else {\r\n            if (update) {\r\n                this.UpdateTweak(tweak);\r\n            }\r\n            else {\r\n                throw new Error(\"Tweak with id: \" + tweak.ID + \" is already exists in GameData: \" + this.ID);\r\n            }\r\n        }\r\n    };\r\n    GameData.prototype.RemoveTweak = function (id) {\r\n        this.TweakArray.Remove(id);\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], GameData.prototype, \"baseValue\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], GameData.prototype, \"computedValue\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], GameData.prototype, \"TweakArray\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], GameData.prototype, \"MinMaxLimit\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], GameData.prototype, \"firstBaseValue\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return GameDataStatistics; })\r\n    ], GameData.prototype, \"Statistics\", void 0);\r\n    return GameData;\r\n}());\r\nexports.GameData = GameData;\r\n\n\n//# sourceURL=webpack://Game/./src/data/game/gameData.ts?");

/***/ }),

/***/ "./src/data/game/level.ts":
/*!********************************!*\
  !*** ./src/data/game/level.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Level = void 0;\r\nvar float_1 = __webpack_require__(/*! ../math/float */ \"./src/data/math/float.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar gameData_1 = __webpack_require__(/*! ./gameData */ \"./src/data/game/gameData.ts\");\r\nvar Level = /** @class */ (function () {\r\n    function Level(value, valueMax) {\r\n        this.value = new float_1.Float(0);\r\n        this.Value = new float_1.Float(value);\r\n        if (valueMax) {\r\n            this.valueMaxData = new gameData_1.GameData(\"MaxLevel\", 0);\r\n            this.ValueMax = new float_1.Float(valueMax);\r\n        }\r\n        else {\r\n            this.valueMaxData = null;\r\n        }\r\n    }\r\n    Level.prototype.Reset = function () {\r\n        this.value = new float_1.Float(0);\r\n    };\r\n    Object.defineProperty(Level.prototype, \"IsMaxed\", {\r\n        get: function () {\r\n            return (this.valueMaxData ? this.value.IsEqual(this.valueMaxData.Value) : false);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Level.prototype, \"Value\", {\r\n        get: function () {\r\n            return this.value;\r\n        },\r\n        set: function (newValue) {\r\n            if (this.valueMaxData ? newValue.IsLessOrEqual(this.valueMaxData.Value) : true) {\r\n                this.value = newValue;\r\n            }\r\n            else {\r\n                throw new Error(\"Trying to set level (\" + newValue + \") more than max level (\" + this.valueMaxData + \")\");\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Level.prototype, \"ValueMax\", {\r\n        get: function () {\r\n            return (this.valueMaxData ? this.valueMaxData.Value : null);\r\n        },\r\n        set: function (value) {\r\n            if (this.valueMaxData && value) {\r\n                this.valueMaxData.BaseValue = value;\r\n            }\r\n            else {\r\n                throw new Error(\"Trying to set max level data to value, but max level data or value is null\");\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Level.prototype, \"CanLevelUpCount\", {\r\n        get: function () {\r\n            if (this.ValueMax) {\r\n                return float_1.Float.Minus(this.ValueMax, this.Value);\r\n            }\r\n            else {\r\n                return float_1.Float.MAX_VALUE_NUMBER;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Level.prototype, \"IsMoreThanZero\", {\r\n        get: function () {\r\n            return this.value.IsMore(0);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], Level.prototype, \"value\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return gameData_1.GameData; })\r\n    ], Level.prototype, \"valueMaxData\", void 0);\r\n    return Level;\r\n}());\r\nexports.Level = Level;\r\n\n\n//# sourceURL=webpack://Game/./src/data/game/level.ts?");

/***/ }),

/***/ "./src/data/game/reward.ts":
/*!*********************************!*\
  !*** ./src/data/game/reward.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Reward = void 0;\r\nvar gameData_1 = __webpack_require__(/*! ./gameData */ \"./src/data/game/gameData.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar wallet_1 = __webpack_require__(/*! ../../game/gameObjects/wallet */ \"./src/game/gameObjects/wallet.ts\");\r\nvar Reward = /** @class */ (function () {\r\n    function Reward(wallet, value) {\r\n        this.Wallet = wallet;\r\n        this.ValueData = new gameData_1.GameData(\"Value\", value);\r\n    }\r\n    Reward.prototype.AddToWallet = function () {\r\n        this.Wallet.Add(this.ValueData.Value);\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return wallet_1.Wallet; })\r\n    ], Reward.prototype, \"Wallet\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return gameData_1.GameData; })\r\n    ], Reward.prototype, \"ValueData\", void 0);\r\n    return Reward;\r\n}());\r\nexports.Reward = Reward;\r\n\n\n//# sourceURL=webpack://Game/./src/data/game/reward.ts?");

/***/ }),

/***/ "./src/data/math/float.ts":
/*!********************************!*\
  !*** ./src/data/math/float.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GameFloat = exports.Float = exports.RawFloatValue = exports.NewFloat = void 0;\r\nvar break_infinity_js_1 = __importDefault(__webpack_require__(/*! break_infinity.js */ \"./node_modules/break_infinity.js/dist/break_infinity.esm.js\"));\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar gameObject_1 = __webpack_require__(/*! ../../game/gameObject */ \"./src/game/gameObject.ts\");\r\nfunction NewFloat(value) {\r\n    return new Float(value);\r\n}\r\nexports.NewFloat = NewFloat;\r\n//move to class maybe?\r\nfunction RawFloatValue(value) {\r\n    switch (typeof value) {\r\n        case \"number\": {\r\n            return value;\r\n        }\r\n        case \"string\": {\r\n            return new Float(value).AsNumber;\r\n        }\r\n        default: {\r\n            return value.AsNumber;\r\n        }\r\n    }\r\n}\r\nexports.RawFloatValue = RawFloatValue;\r\n//todo maybe do interface for number type\r\nvar Float = /** @class */ (function () {\r\n    function Float(value) {\r\n        if (value === void 0) { value = 0; }\r\n        this.tolerance = 0.00001;\r\n        this.value = new break_infinity_js_1.default(0);\r\n        this.SetValue(value);\r\n    }\r\n    Object.defineProperty(Float.prototype, \"AsDecimal\", {\r\n        get: function () {\r\n            return this.value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Float.prototype.SetValue = function (value) {\r\n        if (value instanceof Float) {\r\n            this.value = value.value;\r\n        }\r\n        else if (value instanceof break_infinity_js_1.default) {\r\n            this.value = value;\r\n        }\r\n        else {\r\n            this.value = new break_infinity_js_1.default(value);\r\n        }\r\n    };\r\n    Float.prototype.GetValue = function () {\r\n        return new Float(this.value);\r\n    };\r\n    Object.defineProperty(Float, \"MAX_VALUE_NUMBER\", {\r\n        // Constants\r\n        get: function () {\r\n            return new Float(break_infinity_js_1.default.NUMBER_MAX_VALUE);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Float, \"MIN_VALUE_NUMBER\", {\r\n        get: function () {\r\n            return new Float(break_infinity_js_1.default.NUMBER_MIN_VALUE);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Float, \"MAX_VALUE\", {\r\n        get: function () {\r\n            return new Float(break_infinity_js_1.default.MAX_VALUE);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Float, \"MIN_VALUE\", {\r\n        get: function () {\r\n            return new Float(break_infinity_js_1.default.MIN_VALUE);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    // Static methods\r\n    Float.Plus = function (value1, value2) {\r\n        var value1d = new Float(value1).value;\r\n        var value2d = new Float(value2).value;\r\n        return new Float(break_infinity_js_1.default.plus(value1d, value2d));\r\n    };\r\n    Float.Minus = function (value1, value2) {\r\n        var value1d = new Float(value1).value;\r\n        var value2d = new Float(value2).value;\r\n        return new Float(break_infinity_js_1.default.minus(value1d, value2d));\r\n    };\r\n    Float.Times = function (value1, value2) {\r\n        var value1d = new Float(value1).value;\r\n        var value2d = new Float(value2).value;\r\n        return new Float(break_infinity_js_1.default.times(value1d, value2d));\r\n    };\r\n    Float.Divide = function (value1, value2) {\r\n        var value1d = new Float(value1).value;\r\n        var value2d = new Float(value2).value;\r\n        return new Float(break_infinity_js_1.default.divide(value1d, value2d));\r\n    };\r\n    Float.Pow = function (value, exponent) {\r\n        var valueD = new Float(value).value;\r\n        var exponentD = new Float(exponent).value;\r\n        return new Float(break_infinity_js_1.default.pow(valueD, exponentD));\r\n    };\r\n    Float.Sqrt = function (value) {\r\n        var valueD = new Float(value).value;\r\n        return new Float(break_infinity_js_1.default.sqrt(valueD));\r\n    };\r\n    Float.Abs = function (value) {\r\n        var valueD = new Float(value).value;\r\n        return new Float(break_infinity_js_1.default.abs(valueD));\r\n    };\r\n    // Instance methods\r\n    Float.prototype.Plus = function (value) {\r\n        return Float.Plus(this, value);\r\n    };\r\n    Float.prototype.Minus = function (value) {\r\n        return Float.Minus(this, value);\r\n    };\r\n    Float.prototype.Times = function (value) {\r\n        return Float.Times(this, value);\r\n    };\r\n    Float.prototype.Divide = function (value) {\r\n        return Float.Divide(this, value);\r\n    };\r\n    Float.prototype.Pow = function (exponent) {\r\n        return Float.Pow(this, exponent);\r\n    };\r\n    Float.prototype.Sqrt = function () {\r\n        return Float.Sqrt(this);\r\n    };\r\n    Float.prototype.Abs = function () {\r\n        return Float.Abs(this);\r\n    };\r\n    // Converting to number\r\n    Float.prototype.toNumber = function () {\r\n        return this.value.toNumber();\r\n    };\r\n    Float.prototype.ToNumber = function () {\r\n        return this.toNumber();\r\n    };\r\n    Object.defineProperty(Float.prototype, \"AsNumber\", {\r\n        get: function () {\r\n            return this.toNumber();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    // System methods\r\n    Float.prototype.toString = function () {\r\n        return this.value.string();\r\n    };\r\n    // AsString(): string {\r\n    //     return this.value.string();\r\n    // }\r\n    Float.prototype.ToStringFixed = function (floats) {\r\n        return this.value.toFixed(floats);\r\n    };\r\n    Float.prototype.ToStringExtendedFixed = function (floats) {\r\n        return this.value.toStringWithDecimalPlaces(floats);\r\n    };\r\n    // get String(): string {\r\n    //     return this.AsString();\r\n    // }\r\n    Float.FromString = function (valueStr) {\r\n        return new Float(parseFloat(valueStr));\r\n    };\r\n    Float.prototype.FromString = function (valueStr) {\r\n        return Float.FromString(valueStr);\r\n    };\r\n    Float.prototype.SetFromString = function (valueStr) {\r\n        this.value = Float.FromString(valueStr).value;\r\n    };\r\n    // Logical operations\r\n    // todo я пока заменю на сравнение с толерантностью все сравнения,\r\n    //  но потом лучше сделать таки разные методы\r\n    Float.prototype.IsEqual = function (value) {\r\n        var valueD = new Float(value).value;\r\n        return this.value.equals_tolerance(valueD, this.tolerance);\r\n    };\r\n    Float.prototype.IsNotEqual = function (value) {\r\n        return !this.IsEqual(value);\r\n    };\r\n    Float.prototype.IsMore = function (value) {\r\n        var valueD = new Float(value).value;\r\n        return this.value.greaterThan(valueD);\r\n    };\r\n    Float.prototype.IsMoreOrEqual = function (value) {\r\n        var valueD = new Float(value).value;\r\n        return this.value.gte_tolerance(valueD, this.tolerance);\r\n    };\r\n    Float.prototype.IsLess = function (value) {\r\n        var valueD = new Float(value).value;\r\n        return this.value.lessThan(valueD);\r\n    };\r\n    Float.prototype.IsLessOrEqual = function (value) {\r\n        var valueD = new Float(value).value;\r\n        return this.value.lte_tolerance(valueD, this.tolerance);\r\n    };\r\n    // Static Math replacements\r\n    Float.ToFixed = function (value, floats) {\r\n        //return new Float(Float.FromString(FloatOrNumberValue(value).toFixed(FloatOrNumberValue(floats))));\r\n        var valueD = new Float(value).value;\r\n        var floatsN = RawFloatValue(floats);\r\n        return valueD.toFixed(floatsN);\r\n    };\r\n    Float.Max = function () {\r\n        var values = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            values[_i] = arguments[_i];\r\n        }\r\n        var maxValue = new Float(values[0]);\r\n        for (var _a = 0, values_1 = values; _a < values_1.length; _a++) {\r\n            var value = values_1[_a];\r\n            value = new Float(value);\r\n            if (value.IsMore(maxValue)) {\r\n                maxValue = value;\r\n            }\r\n        }\r\n        return maxValue;\r\n    };\r\n    Float.Min = function () {\r\n        var values = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            values[_i] = arguments[_i];\r\n        }\r\n        var minValue = new Float(values[0]);\r\n        for (var _a = 0, values_2 = values; _a < values_2.length; _a++) {\r\n            var value = values_2[_a];\r\n            value = new Float(value);\r\n            if (value.IsLess(minValue)) {\r\n                minValue = value;\r\n            }\r\n        }\r\n        return minValue;\r\n    };\r\n    Float.Round = function (value) {\r\n        var valueD = new Float(value).value;\r\n        return new Float(valueD.round());\r\n    };\r\n    Float.Floor = function (value) {\r\n        var valueD = new Float(value).value;\r\n        return new Float(valueD.floor());\r\n    };\r\n    // Instance math replacements\r\n    Float.prototype.ToFixed = function (floats) {\r\n        return Float.ToFixed(this, floats);\r\n    };\r\n    Float.prototype.Round = function () {\r\n        return Float.Round(this);\r\n    };\r\n    Float.prototype.Floor = function () {\r\n        return Float.Floor(this);\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return break_infinity_js_1.default; })\r\n    ], Float.prototype, \"value\", void 0);\r\n    return Float;\r\n}());\r\nexports.Float = Float;\r\nvar GameFloat = /** @class */ (function (_super) {\r\n    __extends(GameFloat, _super);\r\n    function GameFloat(storage, id, value) {\r\n        var _this = _super.call(this, value) || this;\r\n        _this.ID = id;\r\n        _this.ClassID = gameObject_1.ClassName.GameFloat;\r\n        if (storage) {\r\n            storage.AddItem(_this);\r\n        }\r\n        return _this;\r\n    }\r\n    Object.defineProperty(GameFloat.prototype, \"Signature\", {\r\n        get: function () {\r\n            return this.ClassID + \"::\" + this.ID;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameFloat.prototype, \"Value\", {\r\n        get: function () {\r\n            return this.GetValue();\r\n        },\r\n        set: function (value) {\r\n            this.SetValue(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    GameFloat.prototype.Add = function (value) {\r\n        this.Value = this.Value.Plus(value);\r\n    };\r\n    GameFloat.prototype.Subtract = function (value) {\r\n        this.Value = this.Value.Minus(value);\r\n    };\r\n    GameFloat.prototype.IsSameSignature = function (object) {\r\n        return this.ClassID == object.ClassID && this.ID == object.ID;\r\n    };\r\n    GameFloat.prototype.Update = function (_dt) {\r\n    };\r\n    GameFloat.prototype.OnContentInitiatedOrGameLoaded = function () {\r\n    };\r\n    GameFloat.prototype.InitFrom = function (_storage, _oldItem) {\r\n        this.SetValue(_oldItem.GetValue());\r\n    };\r\n    return GameFloat;\r\n}(Float));\r\nexports.GameFloat = GameFloat;\r\n\n\n//# sourceURL=webpack://Game/./src/data/math/float.ts?");

/***/ }),

/***/ "./src/data/math/numbers/notation.ts":
/*!*******************************************!*\
  !*** ./src/data/math/numbers/notation.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Notation = exports.Settings = void 0;\r\nvar break_infinity_js_1 = __importDefault(__webpack_require__(/*! break_infinity.js */ \"./node_modules/break_infinity.js/dist/break_infinity.esm.js\"));\r\nvar utils_1 = __webpack_require__(/*! ./utils */ \"./src/data/math/numbers/utils.ts\");\r\nexports.Settings = {\r\n    isInfinite: function (decimal) { return decimal.gte(break_infinity_js_1.default.MAX_VALUE); },\r\n    exponentCommas: {\r\n        show: true,\r\n        min: 100000,\r\n        max: 1000000000\r\n    }\r\n};\r\nvar Notation = /** @class */ (function () {\r\n    function Notation() {\r\n    }\r\n    Notation.prototype.format = function (value, places, placesUnder1000) {\r\n        if (places === void 0) { places = 0; }\r\n        if (placesUnder1000 === void 0) { placesUnder1000 = 0; }\r\n        if (typeof value === \"number\" && !Number.isFinite(value)) {\r\n            return this.infinite;\r\n        }\r\n        var decimal = break_infinity_js_1.default.fromValue_noAlloc(value);\r\n        if (decimal.exponent < -300) {\r\n            return decimal.sign() < 0\r\n                ? this.formatVerySmallNegativeDecimal(decimal.abs(), placesUnder1000)\r\n                : this.formatVerySmallDecimal(decimal, placesUnder1000);\r\n        }\r\n        if (decimal.exponent < 3) {\r\n            var number = decimal.toNumber();\r\n            return number < 0\r\n                ? this.formatNegativeUnder1000(Math.abs(number), placesUnder1000)\r\n                : this.formatUnder1000(number, placesUnder1000);\r\n        }\r\n        if (exports.Settings.isInfinite(decimal.abs())) {\r\n            return decimal.sign() < 0 ? this.negativeInfinite : this.infinite;\r\n        }\r\n        return decimal.sign() < 0\r\n            ? this.formatNegativeDecimal(decimal.abs(), places)\r\n            : this.formatDecimal(decimal, places);\r\n    };\r\n    Object.defineProperty(Notation.prototype, \"negativeInfinite\", {\r\n        get: function () {\r\n            return \"-\" + this.infinite;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Notation.prototype, \"infinite\", {\r\n        get: function () {\r\n            return \"Infinite\";\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Notation.prototype.formatVerySmallNegativeDecimal = function (value, places) {\r\n        return \"-\" + this.formatVerySmallDecimal(value, places);\r\n    };\r\n    Notation.prototype.formatVerySmallDecimal = function (value, places) {\r\n        // We switch to very small formatting as soon as 1e-300 due to precision loss,\r\n        // so value.toNumber() might not be zero.\r\n        return this.formatUnder1000(value.toNumber(), places);\r\n    };\r\n    Notation.prototype.formatNegativeUnder1000 = function (value, places) {\r\n        return \"-\" + this.formatUnder1000(value, places);\r\n    };\r\n    Notation.prototype.formatUnder1000 = function (value, places) {\r\n        return value.toFixed(places);\r\n    };\r\n    Notation.prototype.formatNegativeDecimal = function (value, places) {\r\n        return \"-\" + this.formatDecimal(value, places);\r\n    };\r\n    Notation.prototype.formatExponent = function (exponent) {\r\n        if (this.noSpecialFormatting(exponent)) {\r\n            return exponent.toString();\r\n        }\r\n        if (this.showCommas(exponent)) {\r\n            return utils_1.formatWithCommas(exponent);\r\n        }\r\n        return this.formatDecimal(new break_infinity_js_1.default(exponent), 3);\r\n    };\r\n    Notation.prototype.noSpecialFormatting = function (exponent) {\r\n        return exponent < exports.Settings.exponentCommas.min;\r\n    };\r\n    Notation.prototype.showCommas = function (exponent) {\r\n        return exports.Settings.exponentCommas.show && exponent < exports.Settings.exponentCommas.max;\r\n    };\r\n    return Notation;\r\n}());\r\nexports.Notation = Notation;\r\n\n\n//# sourceURL=webpack://Game/./src/data/math/numbers/notation.ts?");

/***/ }),

/***/ "./src/data/math/numbers/standardNotation.ts":
/*!***************************************************!*\
  !*** ./src/data/math/numbers/standardNotation.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StandardNotation = void 0;\r\nvar notation_1 = __webpack_require__(/*! ./notation */ \"./src/data/math/numbers/notation.ts\");\r\nvar utils_1 = __webpack_require__(/*! ./utils */ \"./src/data/math/numbers/utils.ts\");\r\nvar StandardNotation = /** @class */ (function (_super) {\r\n    __extends(StandardNotation, _super);\r\n    function StandardNotation() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.name = \"Standard\";\r\n        return _this;\r\n    }\r\n    StandardNotation.prototype.formatDecimal = function (value, places) {\r\n        var engineering = utils_1.toFixedEngineering(value, places);\r\n        var mantissa = engineering.mantissa.toFixed(places);\r\n        var abbreviation = utils_1.abbreviate(Math.floor(engineering.exponent / 3) - 1);\r\n        return mantissa + \" \" + abbreviation;\r\n    };\r\n    return StandardNotation;\r\n}(notation_1.Notation));\r\nexports.StandardNotation = StandardNotation;\r\n\n\n//# sourceURL=webpack://Game/./src/data/math/numbers/standardNotation.ts?");

/***/ }),

/***/ "./src/data/math/numbers/utils.ts":
/*!****************************************!*\
  !*** ./src/data/math/numbers/utils.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.abbreviate = exports.toSuperscript = exports.toSubscript = exports.toFixedLongScale = exports.toFixedEngineering = exports.toLongScale = exports.toEngineering = exports.fixMantissaOverflow = exports.formatHigherBaseWithCommas = exports.formatWithCommas = void 0;\r\nvar break_infinity_js_1 = __importDefault(__webpack_require__(/*! break_infinity.js */ \"./node_modules/break_infinity.js/dist/break_infinity.esm.js\"));\r\nfunction commaSection(value, index) {\r\n    if (index === 0) {\r\n        return value.slice(-3);\r\n    }\r\n    return value.slice(-3 * (index + 1), -3 * index);\r\n}\r\nfunction addCommas(value) {\r\n    return Array.from(Array(Math.ceil(value.length / 3))).map(function (_, i) { return commaSection(value, i); })\r\n        .reverse()\r\n        .join(\",\");\r\n}\r\nfunction formatWithCommas(value) {\r\n    var decimalPointSplit = value.toString().split(\".\");\r\n    decimalPointSplit[0] = decimalPointSplit[0].replace(/\\d+$/g, addCommas);\r\n    return decimalPointSplit.join(\".\");\r\n}\r\nexports.formatWithCommas = formatWithCommas;\r\nfunction formatHigherBaseWithCommas(value) {\r\n    var decimalPointSplit = value.toString().split(\".\");\r\n    decimalPointSplit[0] = decimalPointSplit[0].replace(/[0-9A-Za-z]+$/g, addCommas);\r\n    return decimalPointSplit.join(\".\");\r\n}\r\nexports.formatHigherBaseWithCommas = formatHigherBaseWithCommas;\r\n/**\r\n * Fixes cases like (9.6e3, 0), which results in \"10e3\" (but we need \"1e4\" instead)\r\n * because toFixed rounds numbers to closest integer\r\n */\r\n// eslint-disable-next-line max-params\r\nfunction fixMantissaOverflow(value, places, threshold, powerOffset) {\r\n    var pow10 = Math.pow(10, places);\r\n    var isOverflowing = Math.round(value.mantissa * pow10) >= threshold * pow10;\r\n    if (isOverflowing) {\r\n        return break_infinity_js_1.default.fromMantissaExponent_noNormalize(1, value.exponent + powerOffset);\r\n    }\r\n    return value;\r\n}\r\nexports.fixMantissaOverflow = fixMantissaOverflow;\r\n/**\r\n * Transforms 1-digit mantissa decimal into 3-digits mantissa decimal\r\n * For example: 1.5e5 => 150e3\r\n * Note, that it does so in 3 exponent increments, so 1.5e3 is still 1.5e3\r\n */\r\nfunction toEngineering(value) {\r\n    var exponentOffset = value.exponent % 3;\r\n    return break_infinity_js_1.default.fromMantissaExponent_noNormalize(value.mantissa * Math.pow(10, exponentOffset), value.exponent - exponentOffset);\r\n}\r\nexports.toEngineering = toEngineering;\r\n/**\r\n * Transforms 1-digit mantissa decimal into 6-digits mantissa decimal\r\n * For example: 1.5e10 => 15000e3\r\n * Note, that it does so in 6 exponent increments, so 1.5e6 is still 1.5e6\r\n */\r\nfunction toLongScale(value) {\r\n    // Give numbers between a thousand and a million exponent 3.\r\n    var mod = value.exponent < 6 ? 3 : 6;\r\n    var exponentOffset = value.exponent % mod;\r\n    return break_infinity_js_1.default.fromMantissaExponent_noNormalize(value.mantissa * Math.pow(10, exponentOffset), value.exponent - exponentOffset);\r\n}\r\nexports.toLongScale = toLongScale;\r\nfunction toFixedEngineering(value, places) {\r\n    return fixMantissaOverflow(toEngineering(value), places, 1000, 3);\r\n}\r\nexports.toFixedEngineering = toFixedEngineering;\r\nfunction toFixedLongScale(value, places) {\r\n    var overflowPlaces = value.exponent < 6 ? 3 : 6;\r\n    return fixMantissaOverflow(toLongScale(value), places, Math.pow(10, overflowPlaces), overflowPlaces);\r\n}\r\nexports.toFixedLongScale = toFixedLongScale;\r\nvar SUBSCRIPT_NUMBERS = [\"₀\", \"₁\", \"₂\", \"₃\", \"₄\", \"₅\", \"₆\", \"₇\", \"₈\", \"₉\"];\r\nfunction toSubscript(value) {\r\n    return value.toFixed(0).split(\"\")\r\n        .map(function (x) { return x === \"-\" ? \"₋\" : SUBSCRIPT_NUMBERS[parseInt(x)]; })\r\n        .join(\"\");\r\n}\r\nexports.toSubscript = toSubscript;\r\nvar SUPERSCRIPT_NUMBERS = [\"⁰\", \"¹\", \"²\", \"³\", \"⁴\", \"⁵\", \"⁶\", \"⁷\", \"⁸\", \"⁹\"];\r\nfunction toSuperscript(value) {\r\n    return value.toFixed(0).split(\"\")\r\n        .map(function (x) { return x === '-' ? '⁻' : SUPERSCRIPT_NUMBERS[parseInt(x)]; })\r\n        .join(\"\");\r\n}\r\nexports.toSuperscript = toSuperscript;\r\nvar STANDARD_ABBREVIATIONS = [\r\n    \"K\", \"M\", \"B\", \"T\", \"Qa\", \"Qt\", \"Sx\", \"Sp\", \"Oc\", \"No\", \"Dc\", \"UDc\", \"DDc\",\r\n    \"TDc\", \"QaDc\", \"QtDc\", \"SxDc\", \"SpDc\", \"ODc\", \"NDc\", \"Vg\", \"UVg\", \"DVg\", \"TVg\",\r\n    \"QaVg\", \"QtVg\", \"SxVg\", \"SpVg\", \"OVg\", \"NVg\", \"Tg\", \"UTg\", \"DTg\", \"TTg\", \"QaTg\",\r\n    \"QtTg\", \"SxTg\", \"SpTg\", \"OTg\", \"NTg\", \"Qd\", \"UQd\", \"DQd\", \"TQd\", \"QaQd\", \"QtQd\",\r\n    \"SxQd\", \"SpQd\", \"OQd\", \"NQd\", \"Qi\", \"UQi\", \"DQi\", \"TQi\", \"QaQi\", \"QtQi\", \"SxQi\",\r\n    \"SpQi\", \"OQi\", \"NQi\", \"Se\", \"USe\", \"DSe\", \"TSe\", \"QaSe\", \"QtSe\", \"SxSe\", \"SpSe\",\r\n    \"OSe\", \"NSe\", \"St\", \"USt\", \"DSt\", \"TSt\", \"QaSt\", \"QtSt\", \"SxSt\", \"SpSt\", \"OSt\",\r\n    \"NSt\", \"Og\", \"UOg\", \"DOg\", \"TOg\", \"QaOg\", \"QtOg\", \"SxOg\", \"SpOg\", \"OOg\", \"NOg\",\r\n    \"Nn\", \"UNn\", \"DNn\", \"TNn\", \"QaNn\", \"QtNn\", \"SxNn\", \"SpNn\", \"ONn\", \"NNn\", \"Ce\"\r\n];\r\nvar STANDARD_PREFIXES = [\r\n    [\"\", \"U\", \"D\", \"T\", \"Qa\", \"Qt\", \"Sx\", \"Sp\", \"O\", \"N\"],\r\n    [\"\", \"Dc\", \"Vg\", \"Tg\", \"Qd\", \"Qi\", \"Se\", \"St\", \"Og\", \"Nn\"],\r\n    [\"\", \"Ce\", \"Dn\", \"Tc\", \"Qe\", \"Qu\", \"Sc\", \"Si\", \"Oe\", \"Ne\"]\r\n];\r\nvar STANDARD_PREFIXES_2 = [\"\", \"MI-\", \"MC-\", \"NA-\", \"PC-\", \"FM-\"];\r\nfunction abbreviate(exp) {\r\n    // Please, someone clean this code up eventually\r\n    if (exp < STANDARD_ABBREVIATIONS.length) {\r\n        return STANDARD_ABBREVIATIONS[exp];\r\n    }\r\n    var index2 = 0;\r\n    var prefix = [STANDARD_PREFIXES[0][exp % 10]];\r\n    var e = exp;\r\n    while (e >= 10) {\r\n        e = Math.floor(e / 10);\r\n        prefix.push(STANDARD_PREFIXES[++index2 % 3][e % 10]);\r\n    }\r\n    index2 = Math.floor(index2 / 3);\r\n    while (prefix.length % 3 !== 0) {\r\n        prefix.push(\"\");\r\n    }\r\n    var abbreviation = \"\";\r\n    while (index2 >= 0) {\r\n        abbreviation += prefix[index2 * 3] +\r\n            prefix[index2 * 3 + 1] +\r\n            prefix[index2 * 3 + 2] +\r\n            STANDARD_PREFIXES_2[index2--];\r\n    }\r\n    abbreviation = abbreviation.replace(/-$/, \"\");\r\n    return abbreviation\r\n        .replace(\"UM\", \"M\")\r\n        .replace(\"UNA\", \"NA\")\r\n        .replace(\"UPC\", \"PC\")\r\n        .replace(\"UFM\", \"FM\");\r\n}\r\nexports.abbreviate = abbreviate;\r\n\n\n//# sourceURL=webpack://Game/./src/data/math/numbers/utils.ts?");

/***/ }),

/***/ "./src/data/math/percent.ts":
/*!**********************************!*\
  !*** ./src/data/math/percent.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Percent = void 0;\r\nvar float_1 = __webpack_require__(/*! ./float */ \"./src/data/math/float.ts\");\r\nvar Percent = /** @class */ (function () {\r\n    function Percent(percent) {\r\n        this.classID = this.constructor.name;\r\n        this.percent = new float_1.Float(percent);\r\n    }\r\n    Object.defineProperty(Percent.prototype, \"Percent\", {\r\n        get: function () {\r\n            return this.percent;\r\n        },\r\n        set: function (value) {\r\n            this.percent = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Percent.GetValueWithPercent = function (value, percent) {\r\n        percent = new float_1.Float(percent);\r\n        value = new float_1.Float(value);\r\n        if (percent.IsEqual(0)) {\r\n            return new float_1.Float(value);\r\n        }\r\n        else {\r\n            var multiplier = float_1.Float.Divide(percent, 100);\r\n            return value.Plus(float_1.Float.Times(value, multiplier));\r\n        }\r\n    };\r\n    Percent.GetValuePercent = function (value, percent) {\r\n        percent = new float_1.Float(percent);\r\n        value = new float_1.Float(value);\r\n        var multiplier = float_1.Float.Divide(percent, 100);\r\n        return float_1.Float.Times(value, multiplier);\r\n    };\r\n    Percent.GetValueWithoutPercent = function (value, percent) {\r\n        percent = new float_1.Float(percent);\r\n        value = new float_1.Float(value);\r\n        if (percent.IsEqual(0)) {\r\n            return value;\r\n        }\r\n        else {\r\n            var multiplier = float_1.Float.Divide(percent, 100);\r\n            return value.Minus(float_1.Float.Times(value, multiplier));\r\n        }\r\n    };\r\n    Percent.prototype.GetValuePercent = function (value) {\r\n        return Percent.GetValuePercent(value, this.percent);\r\n    };\r\n    Percent.prototype.GetValueWithPercent = function (value) {\r\n        return Percent.GetValueWithPercent(value, this.percent);\r\n    };\r\n    Percent.prototype.GetValueWithoutPercent = function (value) {\r\n        return Percent.GetValueWithoutPercent(value, this.percent);\r\n    };\r\n    return Percent;\r\n}());\r\nexports.Percent = Percent;\r\n\n\n//# sourceURL=webpack://Game/./src/data/math/percent.ts?");

/***/ }),

/***/ "./src/data/math/progression.ts":
/*!**************************************!*\
  !*** ./src/data/math/progression.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Progression = exports.ProgressionType = void 0;\r\nvar float_1 = __webpack_require__(/*! ./float */ \"./src/data/math/float.ts\");\r\nvar ProgressionType;\r\n(function (ProgressionType) {\r\n    ProgressionType[\"Arithmetical\"] = \"Arithmetical\";\r\n    ProgressionType[\"Geometrical\"] = \"Geometrical\";\r\n})(ProgressionType = exports.ProgressionType || (exports.ProgressionType = {}));\r\nvar Progression = /** @class */ (function () {\r\n    function Progression(progressionType, first, step) {\r\n        this.classID = this.constructor.name;\r\n        this.progressionType = progressionType;\r\n        this.first = new float_1.Float(first);\r\n        this.step = new float_1.Float(step);\r\n    }\r\n    Object.defineProperty(Progression.prototype, \"Type\", {\r\n        get: function () {\r\n            return this.progressionType;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Progression.prototype, \"First\", {\r\n        get: function () {\r\n            return this.first;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Progression.prototype, \"Step\", {\r\n        get: function () {\r\n            return this.step;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Progression.prototype.GetElement = function (n) {\r\n        n = new float_1.Float(n);\r\n        if (this.progressionType == ProgressionType.Arithmetical) {\r\n            return this.first.Plus((this.step).Times(n.Minus(1)));\r\n        }\r\n        else if (this.progressionType == ProgressionType.Geometrical) {\r\n            return this.first.Times((this.step).Pow(n.Minus(1)));\r\n        }\r\n        else {\r\n            throw new Error(\"Error, progression type is not correct\");\r\n        }\r\n    };\r\n    Progression.prototype.GetSum = function (n) {\r\n        n = new float_1.Float(n);\r\n        if (this.progressionType == ProgressionType.Arithmetical) {\r\n            return ((float_1.NewFloat(2).Times(this.first).Plus(this.step.Times(n.Minus(1)))).Divide(2)).Times(n);\r\n        }\r\n        else if (this.progressionType == ProgressionType.Geometrical) {\r\n            return (this.first.Times(this.step.Pow(n).Minus(1))).Divide(this.step.Minus(1));\r\n        }\r\n        else {\r\n            throw new Error(\"Error, progression type is not correct\");\r\n        }\r\n    };\r\n    Progression.prototype.GetSumInterval = function (start, end) {\r\n        start = new float_1.Float(start);\r\n        end = new float_1.Float(end);\r\n        if (this.progressionType == ProgressionType.Arithmetical) {\r\n            start = start.Minus(1);\r\n            var s1 = ((float_1.NewFloat(2).Times(this.first).Plus(this.step.Times(start.Minus(1)))).Divide(2)).Times(start);\r\n            var s2 = ((float_1.NewFloat(2).Times(this.first).Plus(this.step.Times(end.Minus(1)))).Divide(2)).Times(end);\r\n            return s2.Minus(s1);\r\n        }\r\n        else if (this.progressionType == ProgressionType.Geometrical) {\r\n            start = start.Minus(1);\r\n            var s1 = this.first.Times(this.step.Pow(start).Minus(1)).Divide(this.step.Minus(1));\r\n            var s2 = this.first.Times(this.step.Pow(end).Minus(1)).Divide(this.step.Minus(1));\r\n            return s2.Minus(s1);\r\n        }\r\n        else {\r\n            throw new Error(\"Error, progression type is not correct\");\r\n        }\r\n    };\r\n    return Progression;\r\n}());\r\nexports.Progression = Progression;\r\n\n\n//# sourceURL=webpack://Game/./src/data/math/progression.ts?");

/***/ }),

/***/ "./src/data/math/valueCalc.ts":
/*!************************************!*\
  !*** ./src/data/math/valueCalc.ts ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ValueCalc = void 0;\r\nvar ValueCalc = /** @class */ (function () {\r\n    function ValueCalc() {\r\n        this.classID = this.constructor.name;\r\n    }\r\n    return ValueCalc;\r\n}());\r\nexports.ValueCalc = ValueCalc;\r\n\n\n//# sourceURL=webpack://Game/./src/data/math/valueCalc.ts?");

/***/ }),

/***/ "./src/data/math/valueCalcs/progressionCalculator.ts":
/*!***********************************************************!*\
  !*** ./src/data/math/valueCalcs/progressionCalculator.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ProgressionCalculator = void 0;\r\nvar progression_1 = __webpack_require__(/*! ../progression */ \"./src/data/math/progression.ts\");\r\nvar valueCalc_1 = __webpack_require__(/*! ../valueCalc */ \"./src/data/math/valueCalc.ts\");\r\nvar ProgressionCalculator = /** @class */ (function (_super) {\r\n    __extends(ProgressionCalculator, _super);\r\n    function ProgressionCalculator(type) {\r\n        var _this = _super.call(this) || this;\r\n        _this.type = type;\r\n        return _this;\r\n    }\r\n    ProgressionCalculator.prototype.GetElement = function (first, step, n) {\r\n        return new progression_1.Progression(this.type, first, step).GetElement(n);\r\n    };\r\n    ProgressionCalculator.prototype.GetNextElement = function (first, step) {\r\n        return new progression_1.Progression(this.type, first, step).GetElement(2);\r\n    };\r\n    ProgressionCalculator.prototype.GetSum = function (first, step, n) {\r\n        return new progression_1.Progression(this.type, first, step).GetSum(n);\r\n    };\r\n    return ProgressionCalculator;\r\n}(valueCalc_1.ValueCalc));\r\nexports.ProgressionCalculator = ProgressionCalculator;\r\n\n\n//# sourceURL=webpack://Game/./src/data/math/valueCalcs/progressionCalculator.ts?");

/***/ }),

/***/ "./src/data/objectStorage.ts":
/*!***********************************!*\
  !*** ./src/data/objectStorage.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ObjectStorage = void 0;\r\nvar ObjectStorage = /** @class */ (function () {\r\n    function ObjectStorage(items, allowSameName) {\r\n        if (allowSameName === void 0) { allowSameName = false; }\r\n        this.AllowSameName = allowSameName;\r\n        if (items) {\r\n            this.items = items;\r\n        }\r\n        else {\r\n            this.items = [];\r\n        }\r\n    }\r\n    Object.defineProperty(ObjectStorage.prototype, \"Length\", {\r\n        get: function () {\r\n            return this.items.length;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ObjectStorage.prototype.GetItem = function (id) {\r\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (item.ID === id) {\r\n                return item;\r\n            }\r\n        }\r\n        throw new Error(\"Item now found: \" + id);\r\n    };\r\n    ObjectStorage.prototype.GetItems = function (id) {\r\n        var items = [];\r\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (item.ID === id) {\r\n                items.push(item);\r\n            }\r\n        }\r\n        if (items.length != 0) {\r\n            return items;\r\n        }\r\n        else {\r\n            throw new Error(\"Items not found: \" + id);\r\n        }\r\n    };\r\n    ObjectStorage.prototype.GetItemOfType = function (type, id) {\r\n        var items = this.GetAllItemsOfType(type);\r\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\r\n            var item = items_1[_i];\r\n            if (item.ID == id) {\r\n                return item;\r\n            }\r\n        }\r\n        throw new Error(\"Item of type \" + type.name + \" not found\");\r\n    };\r\n    ObjectStorage.prototype.GetAllItemsOfType = function (type) {\r\n        var items = [];\r\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (item instanceof type) {\r\n                items.push(item);\r\n            }\r\n        }\r\n        if (items) {\r\n            return items;\r\n        }\r\n        else\r\n            throw new Error(\"Items of type \" + type.name + \" not found\");\r\n    };\r\n    ObjectStorage.prototype.GetItemOfClass = function (classID, id) {\r\n        var items = this.GetAllItemsOfClass(classID);\r\n        for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {\r\n            var item = items_2[_i];\r\n            if (item.ID == id) {\r\n                return item;\r\n            }\r\n        }\r\n        throw new Error(\"Item of type \" + classID + \" and id \" + id + \" not found\");\r\n    };\r\n    ObjectStorage.prototype.GetAllItemsOfClass = function (classID) {\r\n        var items = [];\r\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (item.ClassID === classID) {\r\n                items.push(item);\r\n            }\r\n        }\r\n        if (items.length != 0) {\r\n            return items;\r\n        }\r\n        else {\r\n            throw new Error(\"Item of class not found: \" + classID);\r\n        }\r\n    };\r\n    ObjectStorage.prototype.GetAllItems = function () {\r\n        return this.items;\r\n    };\r\n    Object.defineProperty(ObjectStorage.prototype, \"Items\", {\r\n        get: function () {\r\n            return this.GetAllItems();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ObjectStorage.prototype.IsItemExists = function (id) {\r\n        try {\r\n            this.GetItem(id);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    };\r\n    ObjectStorage.prototype.IsItemOfTypeExists = function (type, id) {\r\n        try {\r\n            this.GetItemOfType(type, id);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    };\r\n    ObjectStorage.prototype.IsItemOfClassExists = function (classID, id) {\r\n        try {\r\n            this.GetItemOfClass(classID, id);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    };\r\n    ObjectStorage.prototype.AddItem = function (item) {\r\n        if (this.AllowSameName || !this.IsItemExists(item.ID)) {\r\n            this.items.push(item);\r\n        }\r\n        else {\r\n            throw new Error(\"Item already exists: \" + item.ID);\r\n        }\r\n    };\r\n    ObjectStorage.prototype.RemoveItem = function (id, errorIfNotFound) {\r\n        if (errorIfNotFound === void 0) { errorIfNotFound = true; }\r\n        for (var i = 0; i < this.Items.length; i++) {\r\n            var item = this.Items[i];\r\n            if (item.ID == id) {\r\n                this.items.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n        if (errorIfNotFound) {\r\n            throw new Error(\"Item was not found to remove: \" + id);\r\n        }\r\n    };\r\n    ObjectStorage.prototype.AddItems = function (items) {\r\n        for (var _i = 0, items_3 = items; _i < items_3.length; _i++) {\r\n            var item = items_3[_i];\r\n            this.AddItem(item);\r\n        }\r\n    };\r\n    ObjectStorage.prototype.RemoveAll = function () {\r\n        this.items = [];\r\n    };\r\n    return ObjectStorage;\r\n}());\r\nexports.ObjectStorage = ObjectStorage;\r\n\n\n//# sourceURL=webpack://Game/./src/data/objectStorage.ts?");

/***/ }),

/***/ "./src/data/priceArray.ts":
/*!********************************!*\
  !*** ./src/data/priceArray.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PriceArray = void 0;\r\nvar price_1 = __webpack_require__(/*! ../game/gameObjects/price */ \"./src/game/gameObjects/price.ts\");\r\nvar float_1 = __webpack_require__(/*! ./math/float */ \"./src/data/math/float.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar wallet_1 = __webpack_require__(/*! ../game/gameObjects/wallet */ \"./src/game/gameObjects/wallet.ts\");\r\nvar walletValue_1 = __webpack_require__(/*! ./walletValue */ \"./src/data/walletValue.ts\");\r\nvar utilsText_1 = __webpack_require__(/*! ../utils/utilsText */ \"./src/utils/utilsText.ts\");\r\nvar PriceArray = /** @class */ (function () {\r\n    function PriceArray(prices) {\r\n        this.classID = this.constructor.name;\r\n        this.prices = Array.isArray(prices) ? prices : [prices];\r\n    }\r\n    PriceArray.prototype.Reset = function () {\r\n        for (var _i = 0, _a = this.prices; _i < _a.length; _i++) {\r\n            var price = _a[_i];\r\n            price.Reset();\r\n        }\r\n    };\r\n    Object.defineProperty(PriceArray.prototype, \"Prices\", {\r\n        get: function () {\r\n            return this.prices;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PriceArray.prototype, \"Wallets\", {\r\n        get: function () {\r\n            var wallets = [];\r\n            for (var _i = 0, _a = this.Prices; _i < _a.length; _i++) {\r\n                var price = _a[_i];\r\n                wallets.push(price.Wallet);\r\n            }\r\n            return wallets;\r\n        },\r\n        set: function (wallets) {\r\n            for (var i = 0; i < this.Prices.length; i++) {\r\n                var price = this.Prices[i];\r\n                price.Wallet = wallets[i];\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PriceArray.prototype, \"SpentWallets\", {\r\n        /**\r\n         * @returns Wallets, initiated with Spent property of prices\r\n         */\r\n        get: function () {\r\n            var outputWallets = [];\r\n            for (var _i = 0, _a = this.Prices; _i < _a.length; _i++) {\r\n                var price = _a[_i];\r\n                outputWallets.push(new wallet_1.Wallet(null, price.Wallet.ID, price.Spent));\r\n            }\r\n            return outputWallets;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    PriceArray.prototype.GetByWallet = function (wallet) {\r\n        for (var _i = 0, _a = this.prices; _i < _a.length; _i++) {\r\n            var price = _a[_i];\r\n            if (price.Wallet.IsSameSignature(wallet)) {\r\n                return price;\r\n            }\r\n        }\r\n        throw new Error(\"No price found by wallet: \" + wallet.ID);\r\n    };\r\n    PriceArray.prototype.SetWalletsFromContent = function (storage, addValueToWalletBeforeReplace, upgradeID) {\r\n        for (var _i = 0, _a = this.prices; _i < _a.length; _i++) {\r\n            var price = _a[_i];\r\n            var localWalletValue = price.Wallet.Value;\r\n            price.Wallet = storage.GetItem(price.Wallet.ID);\r\n            if (addValueToWalletBeforeReplace) {\r\n                if (localWalletValue.IsMore(0.1)) {\r\n                    console.log(\"[ReInitUpgrade::\" + upgradeID + \"] Refunded: \" + utilsText_1.GetNumberText(localWalletValue) + \" of \" + price.Wallet.ID);\r\n                    price.Wallet.Add(localWalletValue);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    PriceArray.prototype.AddToWallets = function (wallets) {\r\n        for (var i = 0; i < this.Prices.length; i++) {\r\n            var price = this.Prices[i];\r\n            price.Wallet.Add(wallets[i].Value);\r\n        }\r\n    };\r\n    PriceArray.prototype.IsCanBuy = function (count) {\r\n        count = new float_1.Float(count);\r\n        for (var _i = 0, _a = this.Prices; _i < _a.length; _i++) {\r\n            var price = _a[_i];\r\n            if (!price.IsCanBuy(count)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * @return {Float} Returns total spent of all prices\r\n     */\r\n    PriceArray.prototype.Buy = function (count) {\r\n        count = new float_1.Float(count);\r\n        var spentTotal = new walletValue_1.WalletValueArray([]);\r\n        for (var _i = 0, _a = this.prices; _i < _a.length; _i++) {\r\n            var price = _a[_i];\r\n            spentTotal.Add(price.Buy(count));\r\n        }\r\n        return spentTotal;\r\n    };\r\n    PriceArray.prototype.Refund = function (storage) {\r\n        for (var _i = 0, _a = this.prices; _i < _a.length; _i++) {\r\n            var price = _a[_i];\r\n            if (storage.IsItemExists(price.Wallet.ID)) {\r\n                storage.GetItem(price.Wallet.ID).Add(price.Spent);\r\n                if (price.Spent.IsMore(0)) {\r\n                    console.log(\"[PriceArray.Refund] Refunded \" + utilsText_1.GetNumberText(price.Spent) + \" \" + price.Wallet.ID);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return price_1.Price; })\r\n    ], PriceArray.prototype, \"prices\", void 0);\r\n    return PriceArray;\r\n}());\r\nexports.PriceArray = PriceArray;\r\n\n\n//# sourceURL=webpack://Game/./src/data/priceArray.ts?");

/***/ }),

/***/ "./src/data/time.ts":
/*!**************************!*\
  !*** ./src/data/time.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Time = exports.UniqueID = void 0;\r\nvar float_1 = __webpack_require__(/*! ./math/float */ \"./src/data/math/float.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar UniqueID = /** @class */ (function () {\r\n    function UniqueID(ClassID) {\r\n        this.ClassID = ClassID;\r\n        this.id = 0;\r\n    }\r\n    Object.defineProperty(UniqueID.prototype, \"LastID\", {\r\n        get: function () {\r\n            return this.ClassID + \"-\" + this.id;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    UniqueID.prototype.GetNextID = function () {\r\n        this.id++;\r\n        return this.ClassID + \"-\" + this.id;\r\n    };\r\n    return UniqueID;\r\n}());\r\nexports.UniqueID = UniqueID;\r\n//todo implements ISerializable?\r\nvar Time = /** @class */ (function () {\r\n    function Time(hours, minutes, seconds, ms) {\r\n        if (hours === void 0) { hours = 0; }\r\n        if (minutes === void 0) { minutes = 0; }\r\n        if (seconds === void 0) { seconds = 0; }\r\n        if (ms === void 0) { ms = 0; }\r\n        this.ClassID = this.constructor.name;\r\n        this.ID = Time.UniqueID.GetNextID();\r\n        hours = new float_1.Float(hours);\r\n        minutes = new float_1.Float(minutes);\r\n        seconds = new float_1.Float(seconds);\r\n        ms = new float_1.Float(ms);\r\n        this.milliseconds = (hours.Times(3600).Times(1000)).Plus(minutes.Times(60).Times(1000)).Plus(seconds.Times(1000)).Plus(ms);\r\n    }\r\n    Object.defineProperty(Time.prototype, \"TotalMilliseconds\", {\r\n        get: function () {\r\n            return this.milliseconds;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Time.prototype, \"TotalSeconds\", {\r\n        get: function () {\r\n            return this.milliseconds.Divide(1000);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Time.prototype, \"TotalMinutes\", {\r\n        get: function () {\r\n            return this.TotalSeconds.Divide(60);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Time.prototype, \"TotalHours\", {\r\n        get: function () {\r\n            return this.TotalMinutes.Divide(60);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Time.prototype.Add = function (time) {\r\n        this.milliseconds = this.milliseconds.Plus(time.TotalMilliseconds);\r\n    };\r\n    Time.prototype.Subtract = function (time) {\r\n        this.milliseconds = this.milliseconds.Minus(time.TotalMilliseconds);\r\n    };\r\n    Time.UniqueID = new UniqueID(\"Time\");\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], Time.prototype, \"milliseconds\", void 0);\r\n    return Time;\r\n}());\r\nexports.Time = Time;\r\n\n\n//# sourceURL=webpack://Game/./src/data/time.ts?");

/***/ }),

/***/ "./src/data/timer.ts":
/*!***************************!*\
  !*** ./src/data/timer.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Timer = exports.ErrorTimerEvent = exports.SaveGameTimerEvent = exports.MonsterSpawnTimerEvent = exports.TimerEvent = void 0;\r\nvar gameData_1 = __webpack_require__(/*! ./game/gameData */ \"./src/data/game/gameData.ts\");\r\nvar gameObject_1 = __webpack_require__(/*! ../game/gameObject */ \"./src/game/gameObject.ts\");\r\nvar float_1 = __webpack_require__(/*! ./math/float */ \"./src/data/math/float.ts\");\r\nvar time_1 = __webpack_require__(/*! ./time */ \"./src/data/time.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar content_1 = __webpack_require__(/*! ../content/content */ \"./src/content/content.ts\");\r\nvar gameSave_1 = __webpack_require__(/*! ../game/managers/saveSystem/gameSave */ \"./src/game/managers/saveSystem/gameSave.ts\");\r\nvar TimerEvent = /** @class */ (function () {\r\n    function TimerEvent(onTimer) {\r\n        this.onTimer = onTimer;\r\n    }\r\n    TimerEvent.prototype.OnEvent = function () {\r\n        this.onTimer();\r\n    };\r\n    return TimerEvent;\r\n}());\r\nexports.TimerEvent = TimerEvent;\r\nvar MonsterSpawnTimerEvent = /** @class */ (function () {\r\n    function MonsterSpawnTimerEvent() {\r\n    }\r\n    MonsterSpawnTimerEvent.prototype.OnEvent = function () {\r\n        content_1.Managers.Fight.CreateNextMonster();\r\n    };\r\n    return MonsterSpawnTimerEvent;\r\n}());\r\nexports.MonsterSpawnTimerEvent = MonsterSpawnTimerEvent;\r\nvar SaveGameTimerEvent = /** @class */ (function () {\r\n    function SaveGameTimerEvent() {\r\n    }\r\n    SaveGameTimerEvent.prototype.OnEvent = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(content_1.SystemData.IsContentLoaded && content_1.SystemData.IsAutoSaveEnabledC3)) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, gameSave_1.SaveGame()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return SaveGameTimerEvent;\r\n}());\r\nexports.SaveGameTimerEvent = SaveGameTimerEvent;\r\nvar ErrorTimerEvent = /** @class */ (function () {\r\n    function ErrorTimerEvent(object, description) {\r\n        this.object = object;\r\n        this.description = description;\r\n    }\r\n    ErrorTimerEvent.prototype.OnEvent = function () {\r\n        console.error(\"[ErrorTimerEvent] happened in object: \");\r\n        console.log(this.object);\r\n        throw new Error(this.description);\r\n    };\r\n    return ErrorTimerEvent;\r\n}());\r\nexports.ErrorTimerEvent = ErrorTimerEvent;\r\nvar Timer = /** @class */ (function (_super) {\r\n    __extends(Timer, _super);\r\n    function Timer(timerStorage, id, duration, speed, startOnCreate, repeat, onTimerEvent, saveProgress) {\r\n        if (saveProgress === void 0) { saveProgress = true; }\r\n        var _this = _super.call(this, timerStorage, gameObject_1.ClassName.Timer, id) || this;\r\n        if (duration instanceof time_1.Time) {\r\n            _this.DurationData = new gameData_1.GameData('Duration', duration.TotalMilliseconds);\r\n        }\r\n        else {\r\n            _this.DurationData = new gameData_1.GameData('Duration', duration);\r\n        }\r\n        _this.SpeedData = new gameData_1.GameData('Speed', speed);\r\n        _this.startOnCreate = startOnCreate;\r\n        _this.repeat = repeat;\r\n        _this.onTimerEvent = onTimerEvent;\r\n        _this.progressInMS = new float_1.Float(0); // progress in milliseconds //todo convert to time?\r\n        _this.active = false;\r\n        _this.paused = false;\r\n        _this.baseStartOnCreate = _this.startOnCreate;\r\n        _this.baseRepeat = _this.repeat;\r\n        _this.baseActive = _this.active;\r\n        _this.saveProgress = saveProgress;\r\n        if (_this.startOnCreate) {\r\n            _this.Start();\r\n        }\r\n        return _this;\r\n    }\r\n    Timer.prototype.ResetData = function () {\r\n        this.Stop();\r\n        this.active = this.baseActive;\r\n        this.progressInMS = new float_1.Float(0);\r\n        this.startOnCreate = this.baseStartOnCreate;\r\n        this.repeat = this.baseRepeat;\r\n        if (this.startOnCreate) {\r\n            this.Start();\r\n        }\r\n    };\r\n    Object.defineProperty(Timer.prototype, \"StartOnCreate\", {\r\n        get: function () {\r\n            return this.startOnCreate;\r\n        },\r\n        set: function (value) {\r\n            this.startOnCreate = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Timer.prototype, \"Repeat\", {\r\n        get: function () {\r\n            return this.repeat;\r\n        },\r\n        set: function (value) {\r\n            this.repeat = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Timer.prototype, \"OnTimerEvent\", {\r\n        get: function () {\r\n            return this.onTimerEvent;\r\n        },\r\n        set: function (value) {\r\n            this.onTimerEvent = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Timer.prototype, \"Duration\", {\r\n        get: function () {\r\n            return this.DurationData.Value;\r\n        },\r\n        /**\r\n         * Duration of timer in milliseconds\r\n         */\r\n        set: function (duration) {\r\n            this.DurationData.BaseValue = duration;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Timer.prototype, \"Speed\", {\r\n        get: function () {\r\n            return this.SpeedData.Value;\r\n        },\r\n        set: function (speed) {\r\n            this.SpeedData.BaseValue = speed;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Timer.prototype, \"IsActive\", {\r\n        get: function () {\r\n            return this.active;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Timer.prototype, \"IsPaused\", {\r\n        get: function () {\r\n            return this.paused;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Timer.prototype, \"Elapsed\", {\r\n        get: function () {\r\n            return this.progressInMS;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Timer.prototype, \"Progress\", {\r\n        /**\r\n         * Progress of timer in milliseconds\r\n         */\r\n        get: function () {\r\n            var progress = this.progressInMS.Divide(this.Duration).Times(100);\r\n            progress = float_1.Float.Max(progress, 0);\r\n            progress = float_1.Float.Min(progress, 100);\r\n            return progress;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Timer.prototype, \"ElapsedTime\", {\r\n        get: function () {\r\n            return new time_1.Time(0, 0, 0, this.Elapsed);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Timer.prototype, \"RemainedTime\", {\r\n        get: function () {\r\n            return new time_1.Time(0, 0, 0, float_1.Float.Minus(this.Duration, this.Elapsed));\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Timer.prototype, \"DurationTime\", {\r\n        get: function () {\r\n            return new time_1.Time(0, 0, 0, this.progressInMS);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Timer.prototype.StopAndReset = function () {\r\n        this.progressInMS = new float_1.Float(0);\r\n        this.active = false;\r\n        this.paused = false;\r\n    };\r\n    Timer.prototype.Update = function (dt) {\r\n        _super.prototype.Update.call(this, dt);\r\n        if (this.active && !this.paused) {\r\n            this.progressInMS = this.progressInMS.Plus(dt.TotalMilliseconds.Times(this.Speed));\r\n            if (this.progressInMS.IsMore(this.DurationData.Value)) {\r\n                this.StopAndReset();\r\n                this.onTimerEvent.OnEvent();\r\n                if (this.repeat) {\r\n                    this.Start();\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Timer.prototype.start = function () {\r\n        this.StopAndReset();\r\n        this.active = true;\r\n    };\r\n    Timer.prototype.Start = function (restart) {\r\n        if (restart === void 0) { restart = false; }\r\n        //console.log('Starting timer...');\r\n        if (this.IsActive) {\r\n            if (restart) {\r\n                this.StopAndReset();\r\n                this.start();\r\n            }\r\n            else {\r\n                if (this.IsPaused) {\r\n                    this.Unpause();\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.start();\r\n        }\r\n    };\r\n    Timer.prototype.Stop = function () {\r\n        //console.log('Stopping timer...');\r\n        if (this.IsActive) {\r\n            this.StopAndReset();\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    };\r\n    Timer.prototype.Toggle = function (enabled) {\r\n        if (enabled) {\r\n            this.Start();\r\n        }\r\n        else {\r\n            this.Stop();\r\n        }\r\n    };\r\n    Timer.prototype.Pause = function () {\r\n        if (!this.IsPaused) {\r\n            this.paused = true;\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    };\r\n    Timer.prototype.Unpause = function () {\r\n        if (this.IsPaused) {\r\n            this.paused = false;\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n        // maybe exception if else?\r\n    };\r\n    Timer.prototype.InitFrom = function (_storage, oldTimer) {\r\n        this.paused = oldTimer.paused;\r\n        this.startOnCreate = oldTimer.startOnCreate;\r\n        this.repeat = oldTimer.repeat;\r\n        if (oldTimer.IsActive && this.saveProgress) {\r\n            this.Start();\r\n            this.progressInMS = oldTimer.progressInMS;\r\n        }\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Expose()\r\n    ], Timer.prototype, \"startOnCreate\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Expose()\r\n    ], Timer.prototype, \"repeat\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Timer.prototype, \"onTimerEvent\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Timer.prototype, \"SpeedData\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Timer.prototype, \"DurationData\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Expose(),\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], Timer.prototype, \"progressInMS\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Expose()\r\n    ], Timer.prototype, \"active\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Expose()\r\n    ], Timer.prototype, \"paused\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Timer.prototype, \"saveProgress\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Timer.prototype, \"baseStartOnCreate\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Timer.prototype, \"baseRepeat\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Timer.prototype, \"baseActive\", void 0);\r\n    return Timer;\r\n}(gameObject_1.GameObject));\r\nexports.Timer = Timer;\r\n\n\n//# sourceURL=webpack://Game/./src/data/timer.ts?");

/***/ }),

/***/ "./src/data/unlock.ts":
/*!****************************!*\
  !*** ./src/data/unlock.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Unlock = void 0;\r\nvar gameObject_1 = __webpack_require__(/*! ../game/gameObject */ \"./src/game/gameObject.ts\");\r\nvar event_1 = __webpack_require__(/*! ../game/managers/eventSystem/event */ \"./src/game/managers/eventSystem/event.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\n//todo короче, сделать класс Condition, и сделать ConditionalUnlock, которому ещё можно будет настроить автоапдейт\r\n// это по сути класс достижений\r\nvar Unlock = /** @class */ (function (_super) {\r\n    __extends(Unlock, _super);\r\n    function Unlock(objectStorage, id, isUnlocked, onToggledEvent) {\r\n        if (isUnlocked === void 0) { isUnlocked = false; }\r\n        var _this = _super.call(this, objectStorage, gameObject_1.ClassName.Unlock, id) || this;\r\n        _this.Events = {\r\n            OnToggled: new event_1.GameEvent(),\r\n        };\r\n        _this.unlocked = isUnlocked;\r\n        _this.OnToggled = onToggledEvent;\r\n        _this.baseUnlocked = _this.unlocked;\r\n        return _this;\r\n    }\r\n    Unlock.prototype.Reset = function () {\r\n        this.Toggle(this.baseUnlocked);\r\n    };\r\n    Object.defineProperty(Unlock.prototype, \"IsUnlocked\", {\r\n        get: function () {\r\n            return this.unlocked;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Unlock.prototype.Toggle = function (unlocked, throwExceptionIfAlreadySet) {\r\n        if (throwExceptionIfAlreadySet === void 0) { throwExceptionIfAlreadySet = false; }\r\n        if (this.unlocked == unlocked && throwExceptionIfAlreadySet) {\r\n            throw new Error(\"Unlock '\" + this.ID + \"' already set to '\" + unlocked + \"'\");\r\n        }\r\n        else {\r\n            var isUnlockedBefore = this.unlocked;\r\n            this.unlocked = unlocked;\r\n            if (this.OnToggled) {\r\n                this.OnToggled.OnEvent(unlocked, isUnlockedBefore, this);\r\n            }\r\n            this.Events.OnToggled.Trigger(this, {\r\n                IsUnlocked: this.unlocked,\r\n                IsUnlockedBefore: isUnlockedBefore\r\n            });\r\n        }\r\n    };\r\n    Unlock.prototype.InitFrom = function (_storage, oldUnlock) {\r\n        this.Toggle(oldUnlock.unlocked);\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Unlock.prototype, \"OnToggled\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Unlock.prototype, \"baseUnlocked\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Unlock.prototype, \"Events\", void 0);\r\n    return Unlock;\r\n}(gameObject_1.GameObject));\r\nexports.Unlock = Unlock;\r\n\n\n//# sourceURL=webpack://Game/./src/data/unlock.ts?");

/***/ }),

/***/ "./src/data/vector2.ts":
/*!*****************************!*\
  !*** ./src/data/vector2.ts ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Interval = exports.Size = exports.Vector2 = void 0;\r\nvar float_1 = __webpack_require__(/*! ./math/float */ \"./src/data/math/float.ts\");\r\nvar Vector2 = /** @class */ (function () {\r\n    function Vector2(x, y) {\r\n        this.X = x;\r\n        this.Y = y;\r\n    }\r\n    return Vector2;\r\n}());\r\nexports.Vector2 = Vector2;\r\nvar Size = /** @class */ (function () {\r\n    function Size(Width, Height) {\r\n        this.Width = Width;\r\n        this.Height = Height;\r\n    }\r\n    return Size;\r\n}());\r\nexports.Size = Size;\r\nvar Interval = /** @class */ (function () {\r\n    function Interval(Min, Max, step, checkValue) {\r\n        if (step === void 0) { step = 1; }\r\n        if (checkValue === void 0) { checkValue = true; }\r\n        this.Min = Min;\r\n        this.Max = Max;\r\n        this.Step = step;\r\n        if (checkValue) {\r\n            if (this.Min == this.Max) {\r\n                throw new Error('Max is the same as Min');\r\n            }\r\n            if (this.Min > this.Max) {\r\n                throw new Error('Max is smaller than Min');\r\n            }\r\n        }\r\n    }\r\n    Interval.prototype.IsValueIn = function (value, inclusive) {\r\n        if (inclusive === void 0) { inclusive = true; }\r\n        value = new float_1.Float(value);\r\n        if (inclusive) {\r\n            return value.IsMoreOrEqual(this.Min) && value.IsLessOrEqual(this.Max);\r\n        }\r\n        else {\r\n            return value.IsMore(this.Min) && value.IsLess(this.Max);\r\n        }\r\n    };\r\n    return Interval;\r\n}());\r\nexports.Interval = Interval;\r\n\n\n//# sourceURL=webpack://Game/./src/data/vector2.ts?");

/***/ }),

/***/ "./src/data/walletValue.ts":
/*!*********************************!*\
  !*** ./src/data/walletValue.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WalletValueArray = exports.WalletValue = void 0;\r\nvar game_1 = __webpack_require__(/*! ../game */ \"./src/game.ts\");\r\nvar WalletValue = /** @class */ (function () {\r\n    function WalletValue(Wallet, Value) {\r\n        this.Wallet = Wallet;\r\n        this.Value = Value;\r\n    }\r\n    return WalletValue;\r\n}());\r\nexports.WalletValue = WalletValue;\r\nvar WalletValueArray = /** @class */ (function () {\r\n    function WalletValueArray(WalletValues) {\r\n        this.WalletValues = WalletValues;\r\n    }\r\n    WalletValueArray.prototype.HasWallet = function (wallet) {\r\n        for (var _i = 0, _a = this.WalletValues; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (item.Wallet.IsSameSignature(wallet)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    WalletValueArray.prototype.GetByWallet = function (wallet) {\r\n        for (var _i = 0, _a = this.WalletValues; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (item.Wallet.IsSameSignature(wallet)) {\r\n                return item;\r\n            }\r\n        }\r\n        throw new Error(\"WalletValue with wallet '\" + wallet.ID + \"' was not found\");\r\n    };\r\n    WalletValueArray.prototype.Add = function (walletValue) {\r\n        if (this.HasWallet(walletValue.Wallet)) {\r\n            this.GetByWallet(walletValue.Wallet).Value = game_1.Float.Plus(this.GetByWallet(walletValue.Wallet).Value, walletValue.Value);\r\n        }\r\n        else {\r\n            this.WalletValues.push(walletValue);\r\n        }\r\n    };\r\n    WalletValueArray.prototype.Subtract = function (walletValue) {\r\n        this.GetByWallet(walletValue.Wallet).Value = game_1.Float.Minus(this.GetByWallet(walletValue.Wallet).Value, walletValue.Value);\r\n    };\r\n    return WalletValueArray;\r\n}());\r\nexports.WalletValueArray = WalletValueArray;\r\n\n\n//# sourceURL=webpack://Game/./src/data/walletValue.ts?");

/***/ }),

/***/ "./src/game.ts":
/*!*********************!*\
  !*** ./src/game.ts ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StopwatchStop = exports.StopwatchStart = exports.ToggleStopwatch = exports.Update = exports.SmartUIUpdate = exports.Init = exports.OnReleaseGameInitiated = exports.OnRelease = exports.OnPreviewGameInitiated = exports.OnPreview = exports.Themes = exports.SaveManager = exports.BUILD_MODE = exports.Percent = exports.SaveGame = exports.UpdateThemeUnlocks = exports.InitThemeUnlocks = exports.OnBuildingDestroyed = exports.OnBuildingCreated = exports.TurretInstance = exports.UIBuilder = exports.LoadType = exports.DownloadFile = exports.LoadGameFromString = exports.LoadGameFromSlot = exports.SystemData = exports.ColorUtils = exports.MonsterManager = exports.GUITheme = exports.GUI = exports.Decimal = exports.UI = exports.Float = exports.Construct3 = exports.UtilsObject = exports.UtilsText = exports.UtilsMath = exports.Input = void 0;\r\n__webpack_require__(/*! reflect-metadata */ \"./node_modules/reflect-metadata/Reflect.js\");\r\nvar content_1 = __webpack_require__(/*! ./content/content */ \"./src/content/content.ts\");\r\nvar themeUnlocks_1 = __webpack_require__(/*! ./content/themeUnlocks */ \"./src/content/themeUnlocks.ts\");\r\nvar gui_1 = __webpack_require__(/*! ./ui/gui */ \"./src/ui/gui.ts\");\r\nvar time_1 = __webpack_require__(/*! ./data/time */ \"./src/data/time.ts\");\r\nvar main_1 = __webpack_require__(/*! ../javascript/construct3/main */ \"./javascript/construct3/main.js\");\r\nvar basicTests_1 = __webpack_require__(/*! ./testing/tests/basicTests */ \"./src/testing/tests/basicTests.ts\");\r\nvar gameLoadManager_1 = __webpack_require__(/*! ./game/managers/gameLoadManager */ \"./src/game/managers/gameLoadManager.ts\");\r\nvar utilsGUI_1 = __webpack_require__(/*! ../javascript/construct3/c3ObjectUtils/utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar gameSave_1 = __webpack_require__(/*! ./game/managers/saveSystem/gameSave */ \"./src/game/managers/saveSystem/gameSave.ts\");\r\nvar c3themeUtils_1 = __webpack_require__(/*! ../javascript/construct3/c3ObjectUtils/c3themeUtils */ \"./javascript/construct3/c3ObjectUtils/c3themeUtils.ts\");\r\nvar utilsText_1 = __webpack_require__(/*! ./utils/utilsText */ \"./src/utils/utilsText.ts\");\r\n//# Exports to use in Construct 3#\r\nexports.Input = __importStar(__webpack_require__(/*! ./input/inputHandlers */ \"./src/input/inputHandlers.ts\"));\r\nexports.UtilsMath = __importStar(__webpack_require__(/*! ./utils/utilsMath */ \"./src/utils/utilsMath.ts\"));\r\nexports.UtilsText = __importStar(__webpack_require__(/*! ./utils/utilsText */ \"./src/utils/utilsText.ts\"));\r\nexports.UtilsObject = __importStar(__webpack_require__(/*! ./utils/utilsObjects */ \"./src/utils/utilsObjects.ts\"));\r\nvar main_2 = __webpack_require__(/*! ../javascript/construct3/main */ \"./javascript/construct3/main.js\");\r\nObject.defineProperty(exports, \"Construct3\", { enumerable: true, get: function () { return main_2.Construct3; } });\r\n__exportStar(__webpack_require__(/*! ./content/content */ \"./src/content/content.ts\"), exports);\r\nvar float_1 = __webpack_require__(/*! ./data/math/float */ \"./src/data/math/float.ts\");\r\nObject.defineProperty(exports, \"Float\", { enumerable: true, get: function () { return float_1.Float; } });\r\nexports.UI = __importStar(__webpack_require__(/*! ../src/ui/gui */ \"./src/ui/gui.ts\"));\r\nvar break_infinity_js_1 = __webpack_require__(/*! break_infinity.js */ \"./node_modules/break_infinity.js/dist/break_infinity.esm.js\");\r\nObject.defineProperty(exports, \"Decimal\", { enumerable: true, get: function () { return __importDefault(break_infinity_js_1).default; } });\r\nexports.GUI = __importStar(__webpack_require__(/*! ../javascript/construct3/c3ObjectUtils/utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\"));\r\nexports.GUITheme = __importStar(__webpack_require__(/*! ../javascript/construct3/c3ObjectUtils/c3themeUtils */ \"./javascript/construct3/c3ObjectUtils/c3themeUtils.ts\"));\r\nexports.MonsterManager = __importStar(__webpack_require__(/*! ./game/gameField */ \"./src/game/gameField.ts\")); //todo rename\r\nexports.ColorUtils = __importStar(__webpack_require__(/*! ./utils/utilsColor */ \"./src/utils/utilsColor.ts\"));\r\nvar content_2 = __webpack_require__(/*! ./content/content */ \"./src/content/content.ts\");\r\nObject.defineProperty(exports, \"SystemData\", { enumerable: true, get: function () { return content_2.SystemData; } });\r\nvar gameLoad_1 = __webpack_require__(/*! ./game/managers/saveSystem/gameLoad */ \"./src/game/managers/saveSystem/gameLoad.ts\");\r\nObject.defineProperty(exports, \"LoadGameFromSlot\", { enumerable: true, get: function () { return gameLoad_1.LoadGameFromSlot; } });\r\nObject.defineProperty(exports, \"LoadGameFromString\", { enumerable: true, get: function () { return gameLoad_1.LoadGameFromString; } });\r\nvar utils_1 = __webpack_require__(/*! ./utils/utils */ \"./src/utils/utils.ts\");\r\nObject.defineProperty(exports, \"DownloadFile\", { enumerable: true, get: function () { return utils_1.DownloadFile; } });\r\nvar gameLoadManager_2 = __webpack_require__(/*! ./game/managers/gameLoadManager */ \"./src/game/managers/gameLoadManager.ts\");\r\nObject.defineProperty(exports, \"LoadType\", { enumerable: true, get: function () { return gameLoadManager_2.LoadType; } });\r\nexports.UIBuilder = __importStar(__webpack_require__(/*! ../javascript/construct3/c3ObjectUtils/uiBuilder */ \"./javascript/construct3/c3ObjectUtils/uiBuilder.ts\"));\r\nvar turretInstance_1 = __webpack_require__(/*! ../src/game/fighting/buildings/turretInstance */ \"./src/game/fighting/buildings/turretInstance.ts\");\r\nObject.defineProperty(exports, \"TurretInstance\", { enumerable: true, get: function () { return turretInstance_1.TurretInstance; } });\r\nvar initBuildings_1 = __webpack_require__(/*! ./content/modules/buildings/initBuildings */ \"./src/content/modules/buildings/initBuildings.ts\");\r\nObject.defineProperty(exports, \"OnBuildingCreated\", { enumerable: true, get: function () { return initBuildings_1.OnBuildingCreated; } });\r\nObject.defineProperty(exports, \"OnBuildingDestroyed\", { enumerable: true, get: function () { return initBuildings_1.OnBuildingDestroyed; } });\r\nvar themeUnlocks_2 = __webpack_require__(/*! ./content/themeUnlocks */ \"./src/content/themeUnlocks.ts\");\r\nObject.defineProperty(exports, \"InitThemeUnlocks\", { enumerable: true, get: function () { return themeUnlocks_2.InitThemeUnlocks; } });\r\nObject.defineProperty(exports, \"UpdateThemeUnlocks\", { enumerable: true, get: function () { return themeUnlocks_2.UpdateThemeUnlocks; } });\r\nvar gameSave_2 = __webpack_require__(/*! ./game/managers/saveSystem/gameSave */ \"./src/game/managers/saveSystem/gameSave.ts\");\r\nObject.defineProperty(exports, \"SaveGame\", { enumerable: true, get: function () { return gameSave_2.SaveGame; } });\r\nvar percent_1 = __webpack_require__(/*! ./data/math/percent */ \"./src/data/math/percent.ts\");\r\nObject.defineProperty(exports, \"Percent\", { enumerable: true, get: function () { return percent_1.Percent; } });\r\nexports.SaveManager = new gameLoadManager_1.GameLoadManager();\r\nfunction OnPreview() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var testsCount;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    console.log(\"[WARNING] Preview mode\");\r\n                    exports.BUILD_MODE = \"Preview\";\r\n                    return [4 /*yield*/, basicTests_1.StartTesting()];\r\n                case 1:\r\n                    testsCount = _a.sent();\r\n                    console.log(\"All \" + testsCount + \" tests completed!\");\r\n                    content_1.SystemData.Settings.ShowNotifications = false;\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.OnPreview = OnPreview;\r\nfunction OnPreviewGameInitiated() {\r\n    content_1.Content.Wallets.Coins.Add(\"0.5\");\r\n}\r\nexports.OnPreviewGameInitiated = OnPreviewGameInitiated;\r\n//todo more todos, like //feature or //bad-code\r\nfunction OnRelease() {\r\n    console.log(\"[WARNING] Release mode\");\r\n    exports.BUILD_MODE = \"Release\";\r\n}\r\nexports.OnRelease = OnRelease;\r\nfunction OnReleaseGameInitiated() {\r\n}\r\nexports.OnReleaseGameInitiated = OnReleaseGameInitiated;\r\n//todo Managers.ThemesManager ???\r\n//todo !!! make dev brunch !!!\r\nfunction Init() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var e_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    _a.trys.push([0, 10, , 11]);\r\n                    gameSave_1.InitSaveWorker();\r\n                    StopwatchStart('Init::InitContent');\r\n                    return [4 /*yield*/, content_1.InitContent()];\r\n                case 1:\r\n                    _a.sent();\r\n                    StopwatchStop('Init::InitContent');\r\n                    return [4 /*yield*/, main_1.Construct3.callFunction(\"DoTick\")];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [4 /*yield*/, gui_1.InitUI()];\r\n                case 3:\r\n                    _a.sent();\r\n                    return [4 /*yield*/, main_1.Construct3.callFunction(\"DoTick\")];\r\n                case 4:\r\n                    _a.sent();\r\n                    exports.Themes = {\r\n                        List: []\r\n                    };\r\n                    return [4 /*yield*/, main_1.Construct3.callFunction(\"DoTick\")];\r\n                case 5:\r\n                    _a.sent();\r\n                    StopwatchStart('Init::SetupThemeManager');\r\n                    c3themeUtils_1.SetupThemeManager(exports.Themes);\r\n                    StopwatchStop('Init::SetupThemeManager');\r\n                    StopwatchStart('Init::InitThemeUnlocks');\r\n                    themeUnlocks_1.InitThemeUnlocks();\r\n                    StopwatchStop('Init::InitThemeUnlocks');\r\n                    if (!(main_1.Construct3.globalVars.IsGameLoading == 1)) return [3 /*break*/, 7];\r\n                    StopwatchStart('Init::LoadGame');\r\n                    return [4 /*yield*/, exports.SaveManager.LoadGame()];\r\n                case 6:\r\n                    _a.sent();\r\n                    StopwatchStop('Init::LoadGame');\r\n                    return [3 /*break*/, 9];\r\n                case 7: return [4 /*yield*/, content_1.OnContentInitiatedOrGameLoaded()];\r\n                case 8:\r\n                    _a.sent();\r\n                    _a.label = 9;\r\n                case 9:\r\n                    console.log('Game initiated :)');\r\n                    return [3 /*break*/, 11];\r\n                case 10:\r\n                    e_1 = _a.sent();\r\n                    OnSystemError(e_1, \"Init\");\r\n                    return [3 /*break*/, 11];\r\n                case 11: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.Init = Init;\r\nfunction OnSystemError(error, source) {\r\n    var _a;\r\n    utilsGUI_1.SetText(\"ErrorSource\", \"Error in \" + source + \" method\\n\\nDetailed info in console\");\r\n    utilsGUI_1.SetText(\"ErrorInfo\", \"[color=red][size=80]\" + error.name + \":[/size][/color]\\n\" + error.message);\r\n    utilsGUI_1.SetText(\"ErrorDetails\", (_a = error.stack) !== null && _a !== void 0 ? _a : \"No stack info found\");\r\n    content_1.SystemData.IsContentLoaded = false;\r\n    content_1.SystemData.IsThemesInitiated = false;\r\n    content_1.SystemData.IsGameCrashed = true;\r\n    main_1.Construct3.callFunction(\"ToggleErrorScreen\", true);\r\n    throw error;\r\n}\r\nfunction SmartUIUpdate() {\r\n    if (content_1.SystemData.IsThemesInitiated && content_1.SystemData.IsContentLoaded && !content_1.SystemData.IsGameCrashed) {\r\n        gui_1.UpdateUIManual();\r\n    }\r\n}\r\nexports.SmartUIUpdate = SmartUIUpdate;\r\n//todo implement smart theme\r\n// export function SmartThemeUnlocks() {\r\n//     if (SystemData.IsThemesInitiated) {\r\n//         UpdateThemeUnlocks();\r\n//     }\r\n// }\r\nfunction Update(dt) {\r\n    try {\r\n        if (content_1.SystemData.IsContentLoaded && content_1.SystemData.IsThemesInitiated && !content_1.SystemData.IsGameCrashed) {\r\n            //UpdateThemeUnlocks();\r\n            gui_1.UpdateUIEveryTick();\r\n            UpdateObjects(dt);\r\n            UpdateTimers(dt);\r\n            //todo automate update for Managers (ManagerStorage???)\r\n            //todo call on monster died? or MonsterToggle\r\n            content_1.Managers.Fight.UpdateMonsters();\r\n        }\r\n    }\r\n    catch (e) {\r\n        OnSystemError(e, \"Update\");\r\n    }\r\n}\r\nexports.Update = Update;\r\nfunction UpdateObjects(dt) {\r\n    for (var _i = 0, _a = content_1.ContentStorage.Items; _i < _a.length; _i++) {\r\n        var item = _a[_i];\r\n        item.Update(dt);\r\n    }\r\n}\r\nfunction UpdateTimers(dt) {\r\n    for (var _i = 0, _a = content_1.TimerStorage.Items; _i < _a.length; _i++) {\r\n        var item = _a[_i];\r\n        item.Update(dt);\r\n    }\r\n}\r\nvar stopwatches = [];\r\nfunction ToggleStopwatch(id) {\r\n    var stopwatch = stopwatches.find(function (s) { return s.ID == id; });\r\n    if (!stopwatch) {\r\n        StopwatchStart(id);\r\n    }\r\n    else {\r\n        StopwatchStop(id);\r\n    }\r\n}\r\nexports.ToggleStopwatch = ToggleStopwatch;\r\nfunction StopwatchStart(id) {\r\n    stopwatches.push({\r\n        ID: id,\r\n        Time: new Date(),\r\n    });\r\n}\r\nexports.StopwatchStart = StopwatchStart;\r\nfunction StopwatchStop(id) {\r\n    var stopwatch = stopwatches.find(function (s) { return s.ID == id; });\r\n    if (stopwatch) {\r\n        var diff = new time_1.Time(0, 0, 0, new Date().getTime() - stopwatch.Time.getTime());\r\n        console.log(\"[Performance] Stopwatch '\" + id + \"' time: \" + utilsText_1.GetTimeText(diff));\r\n        stopwatches.splice(stopwatches.indexOf(stopwatch), 1);\r\n    }\r\n    else\r\n        throw new Error(\"Stopwatch with id '\" + id + \"' was not found\");\r\n}\r\nexports.StopwatchStop = StopwatchStop;\r\n\n\n//# sourceURL=webpack://Game/./src/game.ts?");

/***/ }),

/***/ "./src/game/fighting/buildings/buildingInstance.ts":
/*!*********************************************************!*\
  !*** ./src/game/fighting/buildings/buildingInstance.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BuildingInstance = void 0;\r\nvar BuildingInstance = /** @class */ (function () {\r\n    function BuildingInstance(ClassID, ID, UID, Position, Angle) {\r\n        this.ClassID = ClassID;\r\n        this.ID = ID;\r\n        this.UID = UID;\r\n        this.Position = Position;\r\n        this.Angle = Angle;\r\n    }\r\n    BuildingInstance.prototype.GetInstance = function () {\r\n        for (var _i = 0, _a = this.GetAllInstances(); _i < _a.length; _i++) {\r\n            var instance = _a[_i];\r\n            if (instance.uid == this.UID) {\r\n                return instance;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    BuildingInstance.prototype.IsCreated = function () {\r\n        return this.GetInstance() != null;\r\n    };\r\n    BuildingInstance.prototype.Create = function () {\r\n        if (!this.IsCreated()) {\r\n            this.UID = this.CreateAndGetUID();\r\n            this.ID = this.ID + \"::\" + this.UID;\r\n        }\r\n        else {\r\n            throw new Error(\"Building instance with UID '\" + this.UID + \"' is already created\");\r\n        }\r\n    };\r\n    BuildingInstance.prototype.Destroy = function () {\r\n        if (this.IsCreated() && this.GetInstance()) {\r\n            this.GetInstance().destroy();\r\n        }\r\n        else {\r\n            throw new Error(\"Building instance with UID '\" + this.UID + \"' is not created to destroy it!\");\r\n        }\r\n    };\r\n    BuildingInstance.prototype.InitFrom = function (_storage, item) {\r\n        //todo implement, check if place is still fine, and it's not, don't build anything\r\n        this.ID = item.ID;\r\n        this.Position = item.Position;\r\n        this.Angle = item.Angle;\r\n        this.UID = -1;\r\n    };\r\n    return BuildingInstance;\r\n}());\r\nexports.BuildingInstance = BuildingInstance;\r\n\n\n//# sourceURL=webpack://Game/./src/game/fighting/buildings/buildingInstance.ts?");

/***/ }),

/***/ "./src/game/fighting/buildings/spikes.ts":
/*!***********************************************!*\
  !*** ./src/game/fighting/buildings/spikes.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Spikes = exports.SpikesInstance = void 0;\r\nvar gameObject_1 = __webpack_require__(/*! ../../gameObject */ \"./src/game/gameObject.ts\");\r\nvar objectStorage_1 = __webpack_require__(/*! ../../../data/objectStorage */ \"./src/data/objectStorage.ts\");\r\nvar buildingInstance_1 = __webpack_require__(/*! ./buildingInstance */ \"./src/game/fighting/buildings/buildingInstance.ts\");\r\nvar main_1 = __webpack_require__(/*! ../../../../javascript/construct3/main */ \"./javascript/construct3/main.js\");\r\nvar content_1 = __webpack_require__(/*! ../../../content/content */ \"./src/content/content.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar gameData_1 = __webpack_require__(/*! ../../../data/game/gameData */ \"./src/data/game/gameData.ts\");\r\nvar unlock_1 = __webpack_require__(/*! ../../../data/unlock */ \"./src/data/unlock.ts\");\r\nvar turret_1 = __webpack_require__(/*! ../turret */ \"./src/game/fighting/turret.ts\");\r\nvar SpikesInstance = /** @class */ (function (_super) {\r\n    __extends(SpikesInstance, _super);\r\n    function SpikesInstance(UID, Position) {\r\n        var _this = _super.call(this, gameObject_1.ClassName.Spikes, \"Spikes::\" + UID, UID, Position, 0) || this;\r\n        _this.UID = UID;\r\n        _this.Position = Position;\r\n        return _this;\r\n    }\r\n    SpikesInstance.prototype.GetAllInstances = function () {\r\n        return main_1.Construct3.objects.Spikes.getAllInstances();\r\n    };\r\n    SpikesInstance.prototype.CreateAndGetUID = function () {\r\n        return content_1.Managers.Fight.CreateBuilding(gameObject_1.BuildingName.Spikes, this.Position);\r\n    };\r\n    SpikesInstance.prototype.InitFrom = function (_storage, item) {\r\n        _super.prototype.InitFrom.call(this, _storage, item);\r\n    };\r\n    return SpikesInstance;\r\n}(buildingInstance_1.BuildingInstance));\r\nexports.SpikesInstance = SpikesInstance;\r\nvar Spikes = /** @class */ (function (_super) {\r\n    __extends(Spikes, _super);\r\n    function Spikes(objectStorage, unlock, damage, healthDamage, shieldDamage, healthBasedDamagePercent, reloadTimeMS, stunChance, stunSpeedMP, stunDurationMS, maxCount) {\r\n        var _this = _super.call(this, objectStorage, gameObject_1.ClassName.Spikes, \"Spikes\") || this;\r\n        _this.Unlock = unlock;\r\n        _this.Damage = new gameData_1.GameData(\"Damage\", damage);\r\n        _this.HealthDamage = new gameData_1.GameData(\"HealthDamage\", healthDamage);\r\n        _this.ShieldDamage = new gameData_1.GameData(\"ShieldDamage\", shieldDamage);\r\n        _this.HealthBasedDamagePercent = new gameData_1.GameData(\"HealthBasedDamagePercent\", healthBasedDamagePercent);\r\n        _this.StunChance = new gameData_1.GameData(\"StunChance\", stunChance);\r\n        _this.StunSpeedMP = new gameData_1.GameData(\"StunSpeedMP\", stunSpeedMP);\r\n        _this.StunDurationMS = new gameData_1.GameData(\"StunDuration\", stunDurationMS);\r\n        _this.ReloadTimeMS = new gameData_1.GameData(\"ReloadTimeMS\", reloadTimeMS);\r\n        _this.Count = new gameData_1.GameData(\"Count\", maxCount);\r\n        _this.Instances = new objectStorage_1.ObjectStorage();\r\n        _this.Statistics = new turret_1.DamageBuildingStatistics();\r\n        return _this;\r\n    }\r\n    Spikes.prototype.InitFrom = function (storage, item) {\r\n        this.Statistics = item.Statistics;\r\n    };\r\n    Spikes.prototype.DestroyAllInstances = function () {\r\n        for (var _i = 0, _a = this.Instances.Items.slice(0); _i < _a.length; _i++) {\r\n            var instance = _a[_i];\r\n            // console.log(`[i: ${i} / ${len}] Spikes left: ${this.Instances.Items.length}`);\r\n            instance.Destroy();\r\n            //handled in OnDestroyed event\r\n        }\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return unlock_1.Unlock; })\r\n    ], Spikes.prototype, \"Unlock\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return objectStorage_1.ObjectStorage; })\r\n    ], Spikes.prototype, \"Instances\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return turret_1.DamageBuildingStatistics; })\r\n    ], Spikes.prototype, \"Statistics\", void 0);\r\n    return Spikes;\r\n}(gameObject_1.GameObject));\r\nexports.Spikes = Spikes;\r\n\n\n//# sourceURL=webpack://Game/./src/game/fighting/buildings/spikes.ts?");

/***/ }),

/***/ "./src/game/fighting/buildings/turretInstance.ts":
/*!*******************************************************!*\
  !*** ./src/game/fighting/buildings/turretInstance.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TurretInstance = void 0;\r\nvar buildingInstance_1 = __webpack_require__(/*! ./buildingInstance */ \"./src/game/fighting/buildings/buildingInstance.ts\");\r\nvar main_1 = __webpack_require__(/*! ../../../../javascript/construct3/main */ \"./javascript/construct3/main.js\");\r\nvar content_1 = __webpack_require__(/*! ../../../content/content */ \"./src/content/content.ts\");\r\nvar gameObject_1 = __webpack_require__(/*! ../../gameObject */ \"./src/game/gameObject.ts\");\r\nvar TurretInstance = /** @class */ (function (_super) {\r\n    __extends(TurretInstance, _super);\r\n    function TurretInstance(ID, TurretID, UID, Position, Angle) {\r\n        var _this = _super.call(this, gameObject_1.ClassName.TurretInstance, ID, UID, Position, Angle) || this;\r\n        _this.ID = ID;\r\n        _this.TurretID = TurretID;\r\n        _this.UID = UID;\r\n        _this.Position = Position;\r\n        _this.Angle = Angle;\r\n        if (content_1.SystemData.IsContentLoaded) {\r\n            if (!content_1.ContentStorage.IsItemExists(TurretID)) {\r\n                throw new Error(\"Turret type was not found '\" + _this.TurretID + \"'\");\r\n            }\r\n        }\r\n        return _this;\r\n    }\r\n    TurretInstance.prototype.GetAllInstances = function () {\r\n        return main_1.Construct3.objects.Turret.getAllInstances();\r\n    };\r\n    TurretInstance.prototype.CreateAndGetUID = function () {\r\n        return content_1.Managers.Fight.CreateTurret(this.Position, this.TurretID, this.Angle);\r\n    };\r\n    TurretInstance.prototype.InitFrom = function (_storage, item) {\r\n        _super.prototype.InitFrom.call(this, _storage, item);\r\n        this.TurretID = item.TurretID;\r\n    };\r\n    return TurretInstance;\r\n}(buildingInstance_1.BuildingInstance));\r\nexports.TurretInstance = TurretInstance;\r\n\n\n//# sourceURL=webpack://Game/./src/game/fighting/buildings/turretInstance.ts?");

/***/ }),

/***/ "./src/game/fighting/monster.ts":
/*!**************************************!*\
  !*** ./src/game/fighting/monster.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Monster = exports.MonsterStatistics = exports.OnMonsterSpawned = void 0;\r\nvar gameObject_1 = __webpack_require__(/*! ../gameObject */ \"./src/game/gameObject.ts\");\r\nvar float_1 = __webpack_require__(/*! ../../data/math/float */ \"./src/data/math/float.ts\");\r\nvar gameData_1 = __webpack_require__(/*! ../../data/game/gameData */ \"./src/data/game/gameData.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar main_1 = __webpack_require__(/*! ../../../javascript/construct3/main */ \"./javascript/construct3/main.js\");\r\nvar utilsObjects_1 = __webpack_require__(/*! ../../utils/utilsObjects */ \"./src/utils/utilsObjects.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content/content */ \"./src/content/content.ts\");\r\nvar OnMonsterSpawned = /** @class */ (function () {\r\n    function OnMonsterSpawned() {\r\n    }\r\n    OnMonsterSpawned.prototype.OnEvent = function (_position) {\r\n    };\r\n    return OnMonsterSpawned;\r\n}());\r\nexports.OnMonsterSpawned = OnMonsterSpawned;\r\nvar MonsterStatistics = /** @class */ (function () {\r\n    function MonsterStatistics() {\r\n        this.TotalSpawned = 0;\r\n        this.TotalCoinsMade = new float_1.Float(0);\r\n        this.TotalRPMade = new float_1.Float(0);\r\n    }\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], MonsterStatistics.prototype, \"TotalCoinsMade\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], MonsterStatistics.prototype, \"TotalRPMade\", void 0);\r\n    return MonsterStatistics;\r\n}());\r\nexports.MonsterStatistics = MonsterStatistics;\r\nvar Monster = /** @class */ (function (_super) {\r\n    __extends(Monster, _super);\r\n    //todo redo this for params: { ..., ..., ...}\r\n    function Monster(objectStorage, id, unlock, reward, health, speed, spawnTimeMS, maxCount, rpValue, rpDropChance, clickDamagePercent, clickDamageReloadMS, dodgeChance, shield, damageReductionMP, criticalAwardMP, criticalAwardChance) {\r\n        var _this = _super.call(this, objectStorage, gameObject_1.ClassName.Monster, id) || this;\r\n        _this.Unlock = unlock;\r\n        _this.Reward = reward;\r\n        _this.Health = new gameData_1.GameData(\"Health\", health);\r\n        _this.Speed = new gameData_1.GameData(\"Speed\", speed);\r\n        _this.SpawnTimeMS = new gameData_1.GameData(\"SpawnTime\", spawnTimeMS);\r\n        _this.MaxCount = new gameData_1.GameData(\"MaxCount\", maxCount);\r\n        _this.InstantSpawnChance = new gameData_1.GameData(\"InstantSpawnChance\", 0); // 0-100\r\n        _this.RPDropValue = new gameData_1.GameData(\"RPDropValue\", rpValue);\r\n        _this.RPDropChance = new gameData_1.GameData(\"RPDropChance\", rpDropChance);\r\n        _this.ClickDamagePercent = new gameData_1.GameData(\"ClickDamagePercent\", clickDamagePercent);\r\n        _this.ClickDamageReloadMS = new gameData_1.GameData(\"ClickDamageReloadMS\", clickDamageReloadMS);\r\n        //todo shield regen, shield/health bonus damage, and so on\r\n        _this.Shield = new gameData_1.GameData(\"Shield\", shield);\r\n        _this.DodgeChance = new gameData_1.GameData(\"DodgeChance\", dodgeChance);\r\n        _this.DamageReductionMP = new gameData_1.GameData(\"DamageReductionMP\", damageReductionMP);\r\n        _this.CriticalAwardMP = new gameData_1.GameData(\"CriticalAwardMP\", criticalAwardMP);\r\n        _this.CriticalAwardChance = new gameData_1.GameData(\"CriticalAwardMP\", criticalAwardChance);\r\n        _this.Statistics = new MonsterStatistics();\r\n        return _this;\r\n    }\r\n    Monster.prototype.GetContent = function () {\r\n        var _this = this;\r\n        var item = utilsObjects_1.ValuesOf(content_1.Content.Monsters)\r\n            .find(function (content) { return content.Entity.ID == _this.ID; });\r\n        if (!item) {\r\n            throw new Error(\"Monster content not found for id '\" + this.ID + \"'\");\r\n        }\r\n        else\r\n            return item;\r\n    };\r\n    Monster.prototype.GetAllInstances = function () {\r\n        var items = [];\r\n        for (var _i = 0, _a = main_1.Construct3.objects.Monster.getAllInstances(); _i < _a.length; _i++) {\r\n            var monster = _a[_i];\r\n            if (monster.instVars.Type == this.ID) {\r\n                items.push(monster);\r\n            }\r\n        }\r\n        return items;\r\n    };\r\n    Monster.prototype.DestroyAllInstances = function () {\r\n        for (var _i = 0, _a = this.GetAllInstances(); _i < _a.length; _i++) {\r\n            var instance = _a[_i];\r\n            instance.instVars.LastDamageDealer = \"System\";\r\n            instance.destroy();\r\n            //todo destroy reason? To specify behaviour\r\n        }\r\n    };\r\n    Monster.prototype.InitFrom = function (_storage, _monster) {\r\n        //all stuff here is GameData, so no need in re-init i guess\r\n        this.Statistics = _monster.Statistics;\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Expose(),\r\n        class_transformer_1.Type(function () { return MonsterStatistics; })\r\n    ], Monster.prototype, \"Statistics\", void 0);\r\n    Monster = __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Monster);\r\n    return Monster;\r\n}(gameObject_1.GameObject));\r\nexports.Monster = Monster;\r\n\n\n//# sourceURL=webpack://Game/./src/game/fighting/monster.ts?");

/***/ }),

/***/ "./src/game/fighting/turret.ts":
/*!*************************************!*\
  !*** ./src/game/fighting/turret.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Turret = exports.DamageBuildingStatistics = void 0;\r\nvar objectStorage_1 = __webpack_require__(/*! ../../data/objectStorage */ \"./src/data/objectStorage.ts\");\r\nvar gameObject_1 = __webpack_require__(/*! ../gameObject */ \"./src/game/gameObject.ts\");\r\nvar float_1 = __webpack_require__(/*! ../../data/math/float */ \"./src/data/math/float.ts\");\r\nvar gameData_1 = __webpack_require__(/*! ../../data/game/gameData */ \"./src/data/game/gameData.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar content_1 = __webpack_require__(/*! ../../content/content */ \"./src/content/content.ts\");\r\nvar utilsObjects_1 = __webpack_require__(/*! ../../utils/utilsObjects */ \"./src/utils/utilsObjects.ts\");\r\nvar DamageBuildingStatistics = /** @class */ (function () {\r\n    function DamageBuildingStatistics() {\r\n        this.MonstersKilled = 0;\r\n        this.DamageDealt = new float_1.Float(0);\r\n        this.TotalCoinsMade = new float_1.Float(0);\r\n    }\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], DamageBuildingStatistics.prototype, \"DamageDealt\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], DamageBuildingStatistics.prototype, \"TotalCoinsMade\", void 0);\r\n    return DamageBuildingStatistics;\r\n}());\r\nexports.DamageBuildingStatistics = DamageBuildingStatistics;\r\nvar Turret = /** @class */ (function (_super) {\r\n    __extends(Turret, _super);\r\n    function Turret(objectStorage, id, unlock, damage, healthDamage, shieldDamage, reloadTimeMS, rotateSpeed, bulletSpeed, range, criticalChance, criticalMP, hitsPerShot, count, firstMonsterDamageMP) {\r\n        if (criticalChance === void 0) { criticalChance = 0; }\r\n        if (criticalMP === void 0) { criticalMP = 3; }\r\n        if (hitsPerShot === void 0) { hitsPerShot = 1; }\r\n        if (count === void 0) { count = 1; }\r\n        if (firstMonsterDamageMP === void 0) { firstMonsterDamageMP = 1; }\r\n        var _this = _super.call(this, objectStorage, gameObject_1.ClassName.Turret, id) || this;\r\n        _this.Unlock = unlock;\r\n        _this.Damage = new gameData_1.GameData(\"Damage\", damage);\r\n        _this.HealthDamage = new gameData_1.GameData(\"HealthDamage\", healthDamage);\r\n        _this.ShieldDamage = new gameData_1.GameData(\"ShieldDamage\", shieldDamage);\r\n        _this.ReloadTimeMS = new gameData_1.GameData(\"ReloadTime\", reloadTimeMS);\r\n        _this.RotateSpeed = new gameData_1.GameData(\"RotateSpeed\", rotateSpeed);\r\n        _this.BulletSpeed = new gameData_1.GameData(\"BulletSpeed\", bulletSpeed);\r\n        _this.Range = new gameData_1.GameData(\"Range\", range);\r\n        _this.Count = new gameData_1.GameData(\"Count\", count);\r\n        _this.BulletCount = new gameData_1.GameData(\"BulletCount\", 1);\r\n        _this.HitsPerShot = new gameData_1.GameData(\"HitsPerShot\", hitsPerShot);\r\n        _this.CriticalDamageMP = new gameData_1.GameData(\"CriticalDamageMP\", criticalMP);\r\n        _this.CriticalDamageChance = new gameData_1.GameData(\"CriticalDamageChance\", criticalChance);\r\n        _this.FirstMonsterDamageMP = new gameData_1.GameData(\"FirstMonsterDamageMP\", firstMonsterDamageMP);\r\n        //this.DoubleBulletChance = new GameData(\"DoubleBulletChance\", 0);\r\n        //this.BulletChanceGoThrough = new GameData(\"BulletChanceGoThrough\", 0);\r\n        //todo multiple targets\r\n        _this.Instances = new objectStorage_1.ObjectStorage();\r\n        _this.Statistics = new DamageBuildingStatistics();\r\n        return _this;\r\n    }\r\n    Turret.prototype.GetContent = function () {\r\n        var _this = this;\r\n        var item = utilsObjects_1.ValuesOf(content_1.Content.Turrets)\r\n            .find(function (content) { return content.Entity.ID == _this.ID; });\r\n        if (!item) {\r\n            throw new Error(\"Turret content not found for id '\" + this.ID + \"'\");\r\n        }\r\n        else\r\n            return item;\r\n    };\r\n    Turret.Create = function (params) {\r\n    };\r\n    //todo make universal building class\r\n    // Reset() {\r\n    //\r\n    // }\r\n    Turret.prototype.RemoveTurretInstance = function (uid) {\r\n        for (var _i = 0, _a = this.Instances.Items; _i < _a.length; _i++) {\r\n            var instance = _a[_i];\r\n            if (instance.UID == uid) {\r\n                this.Instances.RemoveItem(instance.ID);\r\n                return;\r\n            }\r\n        }\r\n    };\r\n    Turret.prototype.DestroyAllInstances = function () {\r\n        for (var _i = 0, _a = this.Instances.Items.slice(0); _i < _a.length; _i++) {\r\n            var instance = _a[_i];\r\n            instance.Destroy();\r\n            // тут инстанс убирается из массива сам по евенту OnCreated в C3\r\n        }\r\n    };\r\n    Turret.prototype.InitFrom = function (_storage, _turret) {\r\n        this.Statistics = _turret.Statistics;\r\n        //all stuff here is GameData, so no need in reinit i guess\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Expose(),\r\n        class_transformer_1.Type(function () { return DamageBuildingStatistics; })\r\n    ], Turret.prototype, \"Statistics\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Expose(),\r\n        class_transformer_1.Type(function () { return objectStorage_1.ObjectStorage; })\r\n    ], Turret.prototype, \"Instances\", void 0);\r\n    Turret = __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Turret);\r\n    return Turret;\r\n}(gameObject_1.GameObject));\r\nexports.Turret = Turret;\r\n\n\n//# sourceURL=webpack://Game/./src/game/fighting/turret.ts?");

/***/ }),

/***/ "./src/game/gameField.ts":
/*!*******************************!*\
  !*** ./src/game/gameField.ts ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\n\n//# sourceURL=webpack://Game/./src/game/gameField.ts?");

/***/ }),

/***/ "./src/game/gameObject.ts":
/*!********************************!*\
  !*** ./src/game/gameObject.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GameObject = exports.BuildingName = exports.ClassName = void 0;\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar ClassName;\r\n(function (ClassName) {\r\n    ClassName[\"Idler\"] = \"Idler\";\r\n    ClassName[\"Points\"] = \"Points\";\r\n    ClassName[\"Price\"] = \"Price\";\r\n    ClassName[\"Setting\"] = \"Setting\";\r\n    ClassName[\"Stat\"] = \"Stat\";\r\n    ClassName[\"Timer\"] = \"Timer\";\r\n    ClassName[\"Upgrade\"] = \"Upgrade\";\r\n    ClassName[\"Wallet\"] = \"Wallet\";\r\n    ClassName[\"Unlock\"] = \"Unlock\";\r\n    ClassName[\"Monster\"] = \"Monster\";\r\n    ClassName[\"BuildInfo\"] = \"BuildInfo\";\r\n    // Buildings\r\n    ClassName[\"Turret\"] = \"Turret\";\r\n    ClassName[\"TurretInstance\"] = \"TurretInstance\";\r\n    ClassName[\"Spikes\"] = \"Spikes\";\r\n    ClassName[\"SpikesInstance\"] = \"SpikesInstance\";\r\n    // -- end of buildings\r\n    ClassName[\"Container\"] = \"Container\";\r\n    ClassName[\"GameFloat\"] = \"GameFloat\";\r\n})(ClassName = exports.ClassName || (exports.ClassName = {}));\r\nvar BuildingName;\r\n(function (BuildingName) {\r\n    BuildingName[\"Spikes\"] = \"Spikes\";\r\n})(BuildingName = exports.BuildingName || (exports.BuildingName = {}));\r\nvar GameObject = /** @class */ (function () {\r\n    function GameObject(storage, classID, id) {\r\n        this.ClassID = classID !== null && classID !== void 0 ? classID : \"@GameObject.ClassID\";\r\n        this.ID = id !== null && id !== void 0 ? id : \"@GameObject.ID\";\r\n        if (storage) {\r\n            storage.AddItem(this);\r\n        }\r\n    }\r\n    Object.defineProperty(GameObject.prototype, \"Signature\", {\r\n        get: function () {\r\n            return this.ClassID + \"::\" + this.ID;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    GameObject.prototype.IsSameSignature = function (gameObject) {\r\n        return (this.Signature == gameObject.Signature);\r\n    };\r\n    GameObject.prototype.Update = function (_dt) {\r\n    };\r\n    //todo connect with GameEvents\r\n    GameObject.prototype.OnContentInitiatedOrGameLoaded = function () { };\r\n    __decorate([\r\n        class_transformer_1.Expose()\r\n    ], GameObject.prototype, \"ClassID\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Expose()\r\n    ], GameObject.prototype, \"ID\", void 0);\r\n    return GameObject;\r\n}());\r\nexports.GameObject = GameObject;\r\n\n\n//# sourceURL=webpack://Game/./src/game/gameObject.ts?");

/***/ }),

/***/ "./src/game/gameObjects/container.ts":
/*!*******************************************!*\
  !*** ./src/game/gameObjects/container.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Container = exports.FloatContainer = exports.TimeContainer = exports.DateContainer = void 0;\r\nvar gameObject_1 = __webpack_require__(/*! ../gameObject */ \"./src/game/gameObject.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar game_1 = __webpack_require__(/*! ../../game */ \"./src/game.ts\");\r\nvar time_1 = __webpack_require__(/*! ../../data/time */ \"./src/data/time.ts\");\r\nvar utilsObjects_1 = __webpack_require__(/*! ../../utils/utilsObjects */ \"./src/utils/utilsObjects.ts\");\r\nexports.DateContainer = {\r\n    Save: function (data) {\r\n        return data.toDateString();\r\n    },\r\n    Load: function (data) {\r\n        return new Date(data);\r\n    }\r\n};\r\nexports.TimeContainer = {\r\n    Save: function (data) {\r\n        return data.TotalMilliseconds.toString();\r\n    },\r\n    Load: function (timeMSorTimeRaw) {\r\n        if (typeof timeMSorTimeRaw != \"string\") {\r\n            return new time_1.Time(0, 0, 0, new game_1.Float(timeMSorTimeRaw.milliseconds));\r\n        }\r\n        else {\r\n            return new time_1.Time(0, 0, 0, parseFloat(timeMSorTimeRaw));\r\n        }\r\n    }\r\n};\r\nexports.FloatContainer = {\r\n    Save: function (data) {\r\n        return data.toString();\r\n    },\r\n    Load: function (data) {\r\n        if (typeof data == \"string\") {\r\n            return new game_1.Float(data);\r\n        }\r\n        else {\r\n            return class_transformer_1.plainToClass(game_1.Float, data);\r\n        }\r\n    }\r\n};\r\n//export let TimeContainer\r\n//todo на самом деле, я могу сделать какие-нибудь внутренние классы, которые будут отвечать за хранение разных данных\r\n// и это будет скрытно. Либо конечно можно просто клипать под классы контейнера с кастоымни функциями сохранения и загрузки\r\n// можно ещё опять же юзать декораторы класстрансформера, чтобы указывать туда кастомные функции\r\n//TODO !!! КОРОЧЕ, ПРОСТО СДЕЛАТЬ GAME[TYPE] КЛАССЫ, ЧТОБ НЕ МУЧАТЬСЯ, СЕРЬЁЗНО\r\nvar Container = /** @class */ (function (_super) {\r\n    __extends(Container, _super);\r\n    function Container(objectStorage, id, value, dataManager) {\r\n        var _this = _super.call(this, objectStorage, gameObject_1.ClassName.Container, id) || this;\r\n        _this.value = value;\r\n        _this.baseValue = _this.value;\r\n        _this.DataManager = dataManager;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Container.prototype, \"BaseValue\", {\r\n        get: function () {\r\n            return this.baseValue;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Container.prototype.SetBaseValue = function (baseValue) {\r\n        this.baseValue = baseValue;\r\n    };\r\n    Object.defineProperty(Container.prototype, \"Value\", {\r\n        get: function () {\r\n            return this.value;\r\n        },\r\n        set: function (value) {\r\n            this.value = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Container.prototype.Reset = function () {\r\n        this.value = this.BaseValue;\r\n    };\r\n    Container.prototype.InitFrom = function (_storage, container) {\r\n        //console.log(`Container init-from for ${this.ID}`);\r\n        var oldValue = container.value;\r\n        if (this.DataManager) {\r\n            oldValue = this.DataManager.Load(oldValue);\r\n        }\r\n        if (typeof oldValue != \"string\" && typeof this.value == \"string\") {\r\n            if (utilsObjects_1.IsObject(oldValue) && \"toString\" in oldValue) {\r\n                oldValue = oldValue.toString();\r\n            }\r\n        }\r\n        if (typeof oldValue == \"number\" && this.value instanceof game_1.Float) {\r\n            oldValue = new game_1.Float(oldValue);\r\n            //console.log(`Container value moved from number to float`);\r\n        }\r\n        else if (typeof this.value == \"number\" && oldValue instanceof game_1.Float) {\r\n            oldValue = oldValue.AsNumber;\r\n            //console.log(`Container value moved from float to number`);\r\n        }\r\n        this.value = oldValue;\r\n        //console.log(`Loaded value ${JSON.stringify(this.value)} for Container ${this.ID}`);\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Container.prototype, \"DataManager\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Container.prototype, \"baseValue\", void 0);\r\n    return Container;\r\n}(gameObject_1.GameObject));\r\nexports.Container = Container;\r\n\n\n//# sourceURL=webpack://Game/./src/game/gameObjects/container.ts?");

/***/ }),

/***/ "./src/game/gameObjects/idler.ts":
/*!***************************************!*\
  !*** ./src/game/gameObjects/idler.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Idler = exports.IdlerTimerEvent = void 0;\r\nvar timer_1 = __webpack_require__(/*! ../../data/timer */ \"./src/data/timer.ts\");\r\nvar wallet_1 = __webpack_require__(/*! ./wallet */ \"./src/game/gameObjects/wallet.ts\");\r\nvar gameData_1 = __webpack_require__(/*! ../../data/game/gameData */ \"./src/data/game/gameData.ts\");\r\nvar gameObject_1 = __webpack_require__(/*! ../gameObject */ \"./src/game/gameObject.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content/content */ \"./src/content/content.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar IdlerTimerEvent = /** @class */ (function () {\r\n    function IdlerTimerEvent(wallet, value) {\r\n        this.wallet = wallet;\r\n        this.value = value;\r\n    } //private idler: Idler\r\n    IdlerTimerEvent.prototype.OnEvent = function () {\r\n        this.wallet.Add(this.value.Value);\r\n    };\r\n    return IdlerTimerEvent;\r\n}());\r\nexports.IdlerTimerEvent = IdlerTimerEvent;\r\nvar Idler = /** @class */ (function (_super) {\r\n    __extends(Idler, _super);\r\n    function Idler(objectStorage, id, wallet, value, time) {\r\n        var _this = _super.call(this, objectStorage, gameObject_1.ClassName.Idler, id) || this;\r\n        _this.wallet = wallet;\r\n        _this.valueData = new gameData_1.GameData('value', value);\r\n        _this.timer = new timer_1.Timer(content_1.TimerStorage, id + \".Timer\", time, 1, false, true, new IdlerTimerEvent(_this.wallet, _this.valueData));\r\n        return _this;\r\n    }\r\n    Idler.prototype.Update = function (dt) {\r\n        _super.prototype.Update.call(this, dt);\r\n    };\r\n    Idler.prototype.Start = function () {\r\n        this.Timer.Start(false);\r\n    };\r\n    Object.defineProperty(Idler.prototype, \"Wallet\", {\r\n        get: function () {\r\n            return this.wallet;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Idler.prototype, \"ValueData\", {\r\n        get: function () {\r\n            return this.valueData;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Idler.prototype, \"Value\", {\r\n        get: function () {\r\n            return this.valueData.Value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Idler.prototype, \"Timer\", {\r\n        get: function () {\r\n            return this.timer;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Idler.prototype, \"Duration\", {\r\n        get: function () {\r\n            return this.timer.Duration;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Idler.prototype, \"DurationTime\", {\r\n        get: function () {\r\n            return this.timer.DurationTime;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Idler.prototype, \"IsStarted\", {\r\n        get: function () {\r\n            return this.Timer.IsActive;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Idler.prototype.InitFrom = function (_storage, _oldIdler) {\r\n        //skip\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return wallet_1.Wallet; })\r\n    ], Idler.prototype, \"wallet\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return gameData_1.GameData; })\r\n    ], Idler.prototype, \"valueData\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return timer_1.Timer; })\r\n    ], Idler.prototype, \"timer\", void 0);\r\n    return Idler;\r\n}(gameObject_1.GameObject));\r\nexports.Idler = Idler;\r\n\n\n//# sourceURL=webpack://Game/./src/game/gameObjects/idler.ts?");

/***/ }),

/***/ "./src/game/gameObjects/points.ts":
/*!****************************************!*\
  !*** ./src/game/gameObjects/points.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Points = void 0;\r\nvar gameObject_1 = __webpack_require__(/*! ../gameObject */ \"./src/game/gameObject.ts\");\r\nvar float_1 = __webpack_require__(/*! ../../data/math/float */ \"./src/data/math/float.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\n//todo rewrite\r\nvar Points = /** @class */ (function (_super) {\r\n    __extends(Points, _super);\r\n    function Points(objectStorage, id, level, points, maxPoints, maxPointsStep, xpMaxCalc, OnLevelUp) {\r\n        var _this = _super.call(this, objectStorage, gameObject_1.ClassName.Points, id) || this;\r\n        _this.OnLevelUp = OnLevelUp;\r\n        _this.Level = level;\r\n        _this.points = new float_1.Float(points);\r\n        _this.maxPoints = new float_1.Float(maxPoints);\r\n        _this.maxPointsStep = new float_1.Float(maxPointsStep);\r\n        _this.MaxPointsCalc = xpMaxCalc;\r\n        _this.totalPoints = new float_1.Float(0);\r\n        _this.basePoints = _this.points;\r\n        return _this;\r\n    }\r\n    Points.prototype.Reset = function () {\r\n        this.Level.Reset();\r\n        this.totalPoints = new float_1.Float(0);\r\n        this.points = this.basePoints;\r\n    };\r\n    Object.defineProperty(Points.prototype, \"MaxPoints\", {\r\n        get: function () {\r\n            return this.maxPoints;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Points.prototype, \"MaxPointsStep\", {\r\n        get: function () {\r\n            return this.maxPointsStep;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Points.prototype, \"TotalPointsAdded\", {\r\n        get: function () {\r\n            return this.totalPoints;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Points.prototype, \"LevelValue\", {\r\n        get: function () {\r\n            return this.Level.Value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Points.prototype, \"LevelMaxValue\", {\r\n        get: function () {\r\n            return this.Level.ValueMax;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Points.prototype, \"Points\", {\r\n        get: function () {\r\n            return this.points;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Points.prototype.AddPoints = function (value, optimizedMath) {\r\n        if (optimizedMath === void 0) { optimizedMath = true; }\r\n        value = new float_1.Float(value);\r\n        this.points = float_1.Float.Plus(this.points, value);\r\n        this.totalPoints = this.totalPoints.Plus(value);\r\n        this.checkForLevelUp(optimizedMath);\r\n    };\r\n    Object.defineProperty(Points.prototype, \"Progress\", {\r\n        get: function () {\r\n            return this.Points.Divide(this.MaxPoints).Times(100);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Points.prototype.checkForLevelUp = function (optimizedMath) {\r\n        if (optimizedMath === void 0) { optimizedMath = true; }\r\n        if (this.Points.IsMoreOrEqual(this.MaxPoints)) {\r\n            if (optimizedMath) {\r\n                this.levelUp();\r\n            }\r\n            else {\r\n                this.levelUpOnce();\r\n            }\r\n        }\r\n    };\r\n    Points.prototype.levelUp = function () {\r\n        var i = 0;\r\n        var count = -1;\r\n        var prevRight = 1;\r\n        var right = 1;\r\n        var rightFound = false;\r\n        while (!rightFound) {\r\n            i++;\r\n            var sum = this.MaxPointsCalc.GetSum(this.MaxPoints, this.MaxPointsStep, right);\r\n            if (this.points.IsMore(sum)) {\r\n                prevRight = right;\r\n                right = Math.floor(right * 2);\r\n            }\r\n            else {\r\n                rightFound = true;\r\n                count = prevRight;\r\n            }\r\n            if (i > 1000) {\r\n                throw new Error(\"Points: Infinite cycle (1)\");\r\n            }\r\n        }\r\n        this.levelUpCount(new float_1.Float(count));\r\n        if (count > 100) {\r\n            this.levelUp();\r\n        }\r\n        else {\r\n            this.levelUpOnce();\r\n        }\r\n        if (this.points.IsLess(0)) {\r\n            this.points = new float_1.Float(0);\r\n            console.warn('Points become negative');\r\n        }\r\n        this.checkForLevelUp();\r\n    };\r\n    Points.prototype.levelUpCount = function (count) {\r\n        var sum = this.MaxPointsCalc.GetSum(this.MaxPoints, this.MaxPointsStep, count);\r\n        this.points = this.points.Minus(sum);\r\n        //const maxPointsBefore = this.maxPoints;\r\n        this.maxPoints = this.MaxPointsCalc.GetElement(this.maxPoints, this.maxPointsStep, count.Plus(1));\r\n        //const levelBefore = this.Level.Value;\r\n        this.Level.Value = this.Level.Value.Plus(count);\r\n        //console.log(`~LevelUpCount(${count})\\n - Level ${levelBefore} -> ${this.LevelValue}\\n - Sum: ${sum}\\n - MaxPoints: ${maxPointsBefore} -> ${this.maxPoints}`);\r\n        if (this.OnLevelUp) {\r\n            this.OnLevelUp(new float_1.Float(count));\r\n        }\r\n    };\r\n    Points.prototype.levelUpOnce = function () {\r\n        if (this.points.IsMoreOrEqual(this.MaxPoints)) {\r\n            this.points = this.Points.Minus(this.MaxPoints);\r\n            this.Level.Value = float_1.Float.Plus(this.Level.Value, 1);\r\n            this.maxPoints = this.MaxPointsCalc.GetNextElement(this.MaxPoints, this.MaxPointsStep);\r\n            if (this.OnLevelUp) {\r\n                this.OnLevelUp(new float_1.Float(1));\r\n            }\r\n            this.checkForLevelUp(false);\r\n        }\r\n    };\r\n    Points.prototype.InitFrom = function (_storage, item) {\r\n        this.AddPoints(item.TotalPointsAdded);\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Points.prototype, \"Level\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Points.prototype, \"points\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], Points.prototype, \"totalPoints\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Points.prototype, \"maxPoints\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Points.prototype, \"maxPointsStep\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Points.prototype, \"MaxPointsCalc\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Points.prototype, \"OnLevelUp\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Points.prototype, \"basePoints\", void 0);\r\n    return Points;\r\n}(gameObject_1.GameObject));\r\nexports.Points = Points;\r\n\n\n//# sourceURL=webpack://Game/./src/game/gameObjects/points.ts?");

/***/ }),

/***/ "./src/game/gameObjects/price.ts":
/*!***************************************!*\
  !*** ./src/game/gameObjects/price.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Price = void 0;\r\nvar wallet_1 = __webpack_require__(/*! ./wallet */ \"./src/game/gameObjects/wallet.ts\");\r\nvar gameObject_1 = __webpack_require__(/*! ../gameObject */ \"./src/game/gameObject.ts\");\r\nvar float_1 = __webpack_require__(/*! ../../data/math/float */ \"./src/data/math/float.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar walletValue_1 = __webpack_require__(/*! ../../data/walletValue */ \"./src/data/walletValue.ts\");\r\n/*todo сделать этапы для цены, например (отдельным саб-классом, наверное)\r\n    {\r\n        Value: 1,\r\n        Step: 2,\r\n        UntilLevel: 10\r\n    },\r\n    {\r\n        Value: 10,\r\n        Step: 2.5,\r\n        UntilLevel: 20\r\n    }\r\n    ...\r\n    И при покупке правильно разбивать покупку на части, чтобы во время обновлять значения этапов\r\n*/\r\nvar Price = /** @class */ (function (_super) {\r\n    __extends(Price, _super);\r\n    function Price(wallet, value, step, calc) {\r\n        var _this = _super.call(this, null, gameObject_1.ClassName.Price, '$price') || this;\r\n        _this.wallet = wallet;\r\n        _this.value = new float_1.Float(value);\r\n        _this.step = new float_1.Float(step);\r\n        _this.calc = calc;\r\n        _this.spent = new float_1.Float(0);\r\n        _this.baseValue = _this.value;\r\n        _this.baseStep = _this.step;\r\n        return _this;\r\n    }\r\n    Price.prototype.Reset = function () {\r\n        this.spent = new float_1.Float(0);\r\n        this.value = this.baseValue;\r\n        this.step = this.baseStep;\r\n    };\r\n    Object.defineProperty(Price.prototype, \"Calculator\", {\r\n        get: function () {\r\n            return this.calc;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Price.prototype, \"Wallet\", {\r\n        get: function () {\r\n            return this.wallet;\r\n        },\r\n        set: function (wallet) {\r\n            this.wallet = wallet;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Price.prototype, \"Value\", {\r\n        get: function () {\r\n            return this.value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Price.prototype, \"Step\", {\r\n        get: function () {\r\n            return this.step;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Price.prototype, \"Spent\", {\r\n        get: function () {\r\n            return this.spent;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Price.prototype.BuyProgress = function () {\r\n        //todo buyProgress\r\n        // BuyCount must be taken into account\r\n    };\r\n    //todo сделать систему с умным вычислениям как в GameData\r\n    //todo ввести возможность прописывать формулу для подсчёта цены, а не тупо по формуле прогрессий\r\n    Price.prototype.GetValueOnLevel = function (relativeLevel) {\r\n        return this.calc.GetSum(this.Value, this.Step, relativeLevel);\r\n        //console.log(`Type: ${this.ProgressionType}\\nValue: ${this.Value}\\nStep: ${this.Step}\\nSum: ${sum}`);\r\n    };\r\n    Price.prototype.GetNewPrice = function (count) {\r\n        count = new float_1.Float(count);\r\n        return this.calc.GetElement(this.Value, this.Step, count.Plus(1));\r\n    };\r\n    Price.prototype.IsCanBuy = function (count) {\r\n        count = new float_1.Float(count);\r\n        if (this.Wallet) {\r\n            var totalPrice = this.GetValueOnLevel(count);\r\n            return this.Wallet.Value.IsMoreOrEqual(totalPrice);\r\n        }\r\n        else {\r\n            throw Error(\"Wallet \" + this.Wallet + \" was not set!\");\r\n        }\r\n    };\r\n    /**\r\n     * @return {Float} Returns spent value\r\n     * @function\r\n     */\r\n    Price.prototype.Buy = function (count) {\r\n        count = new float_1.Float(count);\r\n        if (count.IsLessOrEqual(0)) {\r\n            throw new Error(\"Buy count is \" + count);\r\n        }\r\n        if (this.IsCanBuy(count)) {\r\n            var totalPrice = this.GetValueOnLevel(count);\r\n            this.value = this.GetNewPrice(count);\r\n            this.Wallet.Subtract(totalPrice);\r\n            this.spent = float_1.Float.Plus(this.spent, totalPrice);\r\n            return new walletValue_1.WalletValue(this.Wallet, totalPrice);\r\n        }\r\n        else {\r\n            throw new Error(\"Can't buy price with walletID: \" + this.wallet.ID + \" Wanted to buy: \" + count);\r\n        }\r\n    };\r\n    Price.prototype.InitFrom = function (_storage, _oldPrice) {\r\n        //skip, handled in Upgrade\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return wallet_1.Wallet; })\r\n    ], Price.prototype, \"wallet\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Price.prototype, \"calc\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], Price.prototype, \"spent\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Price.prototype, \"baseValue\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Price.prototype, \"baseStep\", void 0);\r\n    return Price;\r\n}(gameObject_1.GameObject));\r\nexports.Price = Price;\r\n\n\n//# sourceURL=webpack://Game/./src/game/gameObjects/price.ts?");

/***/ }),

/***/ "./src/game/gameObjects/setting.ts":
/*!*****************************************!*\
  !*** ./src/game/gameObjects/setting.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Setting = exports.IntervalValidator = exports.ArrayValidator = void 0;\r\nvar gameObject_1 = __webpack_require__(/*! ../gameObject */ \"./src/game/gameObject.ts\");\r\nvar engine_1 = __webpack_require__(/*! ../../../javascript/construct3/engine */ \"./javascript/construct3/engine.ts\");\r\nvar utilsMath_1 = __webpack_require__(/*! ../../utils/utilsMath */ \"./src/utils/utilsMath.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar ArrayValidator = /** @class */ (function () {\r\n    function ArrayValidator(Values) {\r\n        this.Values = Values;\r\n    }\r\n    ArrayValidator.prototype.CorrectValue = function (value) {\r\n        if (this.Values.includes(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            throw new Error(\"Value \" + value + \" is not correct\");\r\n        }\r\n    };\r\n    ArrayValidator.prototype.IsValueCorrect = function (value) {\r\n        return this.Values.includes(value);\r\n    };\r\n    return ArrayValidator;\r\n}());\r\nexports.ArrayValidator = ArrayValidator;\r\nvar IntervalValidator = /** @class */ (function () {\r\n    function IntervalValidator(Interval, Inclusive, Normalize) {\r\n        if (Inclusive === void 0) { Inclusive = true; }\r\n        if (Normalize === void 0) { Normalize = true; }\r\n        this.Interval = Interval;\r\n        this.Inclusive = Inclusive;\r\n        this.Normalize = Normalize;\r\n    }\r\n    IntervalValidator.prototype.CorrectValue = function (value) {\r\n        if (this.Interval.IsValueIn(value, this.Inclusive)) {\r\n            return value;\r\n        }\r\n        else {\r\n            if (this.Normalize) {\r\n                return utilsMath_1.Clamp(value, this.Interval);\r\n            }\r\n            else {\r\n                throw new Error(\"Value \" + value + \" is not correct\");\r\n            }\r\n        }\r\n    };\r\n    IntervalValidator.prototype.IsValueCorrect = function (value) {\r\n        return this.Interval.IsValueIn(value, this.Inclusive);\r\n    };\r\n    return IntervalValidator;\r\n}());\r\nexports.IntervalValidator = IntervalValidator;\r\nvar Setting = /** @class */ (function (_super) {\r\n    __extends(Setting, _super);\r\n    function Setting(objectStorage, id, defaultValue, validator, onValueChanged) {\r\n        var _this = _super.call(this, objectStorage, gameObject_1.ClassName.Setting, id) || this;\r\n        _this.DefaultValue = defaultValue;\r\n        _this.Validator = validator;\r\n        _this.OnValueChanged = onValueChanged;\r\n        if (_this.Validator) {\r\n            _this.Value = defaultValue;\r\n        }\r\n        else {\r\n            _this.value = defaultValue;\r\n        }\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Setting.prototype, \"Value\", {\r\n        get: function () {\r\n            return this.value;\r\n        },\r\n        set: function (newValue) {\r\n            if (this.Validator.IsValueCorrect(newValue)) {\r\n                this.value = this.Validator.CorrectValue(newValue);\r\n                if (this.OnValueChanged) {\r\n                    this.OnValueChanged(this, newValue);\r\n                }\r\n            }\r\n            else {\r\n                throw new Error(\"Trying to set not possible value: \" + newValue + \" for option: \" + this.ID);\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //todo SetValueFromString()\r\n    Setting.prototype.UpdateUI = function () {\r\n        engine_1.Engine.UIManager.UpdateSelectors(this.ID, this.Value.toString());\r\n    };\r\n    Setting.prototype.InitFrom = function (_storage, oldSetting) {\r\n        if (this.Validator.IsValueCorrect(oldSetting.Value)) {\r\n            this.Value = oldSetting.Value;\r\n        }\r\n        this.UpdateUI();\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Setting.prototype, \"Validator\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Setting.prototype, \"OnValueChanged\", void 0);\r\n    return Setting;\r\n}(gameObject_1.GameObject));\r\nexports.Setting = Setting;\r\n\n\n//# sourceURL=webpack://Game/./src/game/gameObjects/setting.ts?");

/***/ }),

/***/ "./src/game/gameObjects/stat.ts":
/*!**************************************!*\
  !*** ./src/game/gameObjects/stat.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Stat = void 0;\r\nvar gameData_1 = __webpack_require__(/*! ../../data/game/gameData */ \"./src/data/game/gameData.ts\");\r\nvar gameObject_1 = __webpack_require__(/*! ../gameObject */ \"./src/game/gameObject.ts\");\r\nvar float_1 = __webpack_require__(/*! ../../data/math/float */ \"./src/data/math/float.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar game_1 = __webpack_require__(/*! ../../game */ \"./src/game.ts\");\r\nvar event_1 = __webpack_require__(/*! ../managers/eventSystem/event */ \"./src/game/managers/eventSystem/event.ts\");\r\nvar Stat = /** @class */ (function (_super) {\r\n    __extends(Stat, _super);\r\n    function Stat(objectStorage, id, value, maxValue, onMaxValueExceeded) {\r\n        var _this = _super.call(this, objectStorage, gameObject_1.ClassName.Stat, id) || this;\r\n        _this.Events = {\r\n            OnChanged: new event_1.GameEvent()\r\n        };\r\n        _this.value = new float_1.Float(value);\r\n        _this.baseValue = _this.value;\r\n        if (maxValue && onMaxValueExceeded) {\r\n            _this.MaxValueData = new gameData_1.GameData('MaxValue', maxValue);\r\n            _this.onMaxValueExceeded = onMaxValueExceeded;\r\n        }\r\n        return _this;\r\n    }\r\n    Stat.prototype.Reset = function () {\r\n        this.value = this.baseValue;\r\n    };\r\n    Object.defineProperty(Stat.prototype, \"Value\", {\r\n        get: function () {\r\n            return this.value;\r\n        },\r\n        set: function (value) {\r\n            var before = this.value;\r\n            this.value = value;\r\n            var after = this.value;\r\n            this.Events.OnChanged.Trigger(this, {\r\n                before: before,\r\n                after: after,\r\n                diff: after.Minus(before)\r\n            });\r\n            this.CheckValue(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Stat.prototype.Add = function (value) {\r\n        this.Value = float_1.Float.Plus(this.value, value);\r\n        game_1.SmartUIUpdate();\r\n    };\r\n    Stat.prototype.Subtract = function (value) {\r\n        this.Value = float_1.Float.Minus(this.value, value);\r\n        game_1.SmartUIUpdate();\r\n    };\r\n    Object.defineProperty(Stat.prototype, \"MaxValue\", {\r\n        get: function () {\r\n            return (this.HasMaxValue() ? this.MaxValueData.Value : null);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Stat.prototype.HasMaxValue = function () {\r\n        return (this.MaxValueData != undefined && this.onMaxValueExceeded != undefined);\r\n    };\r\n    Stat.prototype.CheckValue = function (value) {\r\n        value = new float_1.Float(value);\r\n        var diff = float_1.Float.Minus(value, this.Value);\r\n        if (this.onMaxValueExceeded) {\r\n            if (value.IsMore(this.MaxValue)) {\r\n                this.onMaxValueExceeded(diff);\r\n            }\r\n        }\r\n    };\r\n    Stat.prototype.InitFrom = function (_storage, oldStat) {\r\n        this.Value = oldStat.Value;\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], Stat.prototype, \"value\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return gameData_1.GameData; })\r\n    ], Stat.prototype, \"MaxValueData\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], Stat.prototype, \"baseValue\", void 0);\r\n    return Stat;\r\n}(gameObject_1.GameObject));\r\nexports.Stat = Stat;\r\n\n\n//# sourceURL=webpack://Game/./src/game/gameObjects/stat.ts?");

/***/ }),

/***/ "./src/game/gameObjects/upgrade/upgrade.ts":
/*!*************************************************!*\
  !*** ./src/game/gameObjects/upgrade/upgrade.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UnlockUpgrade = exports.OnUnlockUpgradeBuyEvent = exports.Upgrade = exports.UpgradeClassID = void 0;\r\nvar priceArray_1 = __webpack_require__(/*! ../../../data/priceArray */ \"./src/data/priceArray.ts\");\r\nvar gameObject_1 = __webpack_require__(/*! ../../gameObject */ \"./src/game/gameObject.ts\");\r\nvar tweakArray_1 = __webpack_require__(/*! ../../tweakArray */ \"./src/game/tweakArray.ts\");\r\nvar float_1 = __webpack_require__(/*! ../../../data/math/float */ \"./src/data/math/float.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar upgradeOnBuyEvent_1 = __webpack_require__(/*! ./upgradeOnBuyEvent */ \"./src/game/gameObjects/upgrade/upgradeOnBuyEvent.ts\");\r\nvar upgradeGUI_1 = __webpack_require__(/*! ./upgradeGUI */ \"./src/game/gameObjects/upgrade/upgradeGUI.ts\");\r\nvar level_1 = __webpack_require__(/*! ../../../data/game/level */ \"./src/data/game/level.ts\");\r\nvar unlock_1 = __webpack_require__(/*! ../../../data/unlock */ \"./src/data/unlock.ts\");\r\nvar UpgradeClassID;\r\n(function (UpgradeClassID) {\r\n    UpgradeClassID[\"Upgrade\"] = \"Upgrade\";\r\n    UpgradeClassID[\"UnlockUpgrade\"] = \"UnlockUpgrade\";\r\n})(UpgradeClassID = exports.UpgradeClassID || (exports.UpgradeClassID = {}));\r\nvar Upgrade = /** @class */ (function (_super) {\r\n    __extends(Upgrade, _super);\r\n    function Upgrade(objectStorage, id, buyCount, level, pricesArray, tweakArray, onBuyFunc, isThemeUnlocked) {\r\n        if (isThemeUnlocked === void 0) { isThemeUnlocked = false; }\r\n        var _this = _super.call(this, objectStorage, gameObject_1.ClassName.Upgrade, id) || this;\r\n        _this.subClassID = UpgradeClassID.Upgrade;\r\n        _this.Level = level;\r\n        _this.PriceArray = pricesArray;\r\n        _this.TweakArray = tweakArray;\r\n        _this.BuyCount = buyCount;\r\n        _this.OnBuyEvent = onBuyFunc;\r\n        _this.GUI = new upgradeGUI_1.UpgradeGUI(_this);\r\n        _this.Theme = \"Upgrade::\" + id;\r\n        _this.IsThemeUnlocked = isThemeUnlocked;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Upgrade.prototype, \"SubClassID\", {\r\n        get: function () {\r\n            return this.subClassID;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Upgrade.prototype.Reset = function () {\r\n        this.Level.Reset();\r\n        this.PriceArray.Reset();\r\n        this.TweakArray.Reset();\r\n    };\r\n    Upgrade.prototype.OnContentInitiatedOrGameLoaded = function () {\r\n        _super.prototype.OnContentInitiatedOrGameLoaded.call(this);\r\n        this.TweakArray.AddOrUpdateToGameData();\r\n    };\r\n    Object.defineProperty(Upgrade.prototype, \"Prices\", {\r\n        get: function () {\r\n            return this.PriceArray.Prices;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Upgrade.prototype, \"Tweaks\", {\r\n        get: function () {\r\n            return this.TweakArray.Items;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Upgrade.prototype.CorrectBuyCount = function (count) {\r\n        return float_1.Float.Min(this.Level.CanLevelUpCount, count);\r\n    };\r\n    Object.defineProperty(Upgrade.prototype, \"BuyCountValue\", {\r\n        //todo create BuyCount class!!! по идее можно как раз вынести всю эту логику рассчёта в класс BuyCount\r\n        // и в него передевать цены? мб мб\r\n        get: function () {\r\n            if (this.BuyCount) {\r\n                return new float_1.Float(this.BuyCount.Value);\r\n            }\r\n            else {\r\n                return new float_1.Float(1);\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //todo maybe return some type of FalseType, like \"MaxLevel\", or \"NotEnoughWallet\" and so on, for easier UI making\r\n    Upgrade.prototype.IsCanBuy = function (count) {\r\n        if (this.Level.IsMaxed) {\r\n            return false;\r\n        }\r\n        count = count ? new float_1.Float(count) : this.BuyCountValue;\r\n        count = this.CorrectBuyCount(count);\r\n        return this.PriceArray.IsCanBuy(count);\r\n    };\r\n    //todo разделить на две функции. get GetMaxBuy() и вызывать просто Upgrade.Buy(this.MaxBuyCount)\r\n    /**\r\n     * @return Count of purchases\r\n     */\r\n    Upgrade.prototype.BuyMax = function (maxCount) {\r\n        if (maxCount === void 0) { maxCount = undefined; }\r\n        var bought = new float_1.Float(0);\r\n        while ((maxCount ? bought < maxCount : true) && this.IsCanBuy(1)) {\r\n            this.Buy(1);\r\n            bought = float_1.Float.Plus(bought, 1);\r\n        }\r\n        return bought;\r\n    };\r\n    /**\r\n     * @return Count of purchases\r\n     */\r\n    Upgrade.prototype.Buy = function (count) {\r\n        //todo maybe separate to different functions Buying, updating tweaks and so on.. Because function become too complicated\r\n        // and hard to do ReInit\r\n        if (count) {\r\n            count = new float_1.Float(count);\r\n            if (count.IsLessOrEqual(0)) {\r\n                throw new Error(\"Buy count was 0 or less when trying to buy\");\r\n            }\r\n        }\r\n        else {\r\n            count = this.BuyCountValue;\r\n        }\r\n        count = this.CorrectBuyCount(count);\r\n        if (this.IsCanBuy(count)) {\r\n            var spent = this.PriceArray.Buy(count);\r\n            this.Level.Value = float_1.Float.Plus(this.Level.Value, count);\r\n            this.TweakArray.Toggle(true);\r\n            this.TweakArray.Upgrade(count);\r\n            if (this.OnBuyEvent != undefined) {\r\n                //todo maybe pass 'spent' also\r\n                this.OnBuyEvent.Trigger(this, count, spent);\r\n            }\r\n            return count;\r\n        }\r\n        else {\r\n            throw new Error(\"Trying to buy count: \" + count + \", but can't actually buy!\");\r\n        }\r\n    };\r\n    Upgrade.prototype.InitFrom = function (storage, oldUpgrade) {\r\n        // Storing old wallets data of prices. bufferWallets are not references anymore! ITS COPY\r\n        //const bufferWallets = this.PriceArray.Wallets;\r\n        // Replacing\r\n        this.PriceArray.Wallets = oldUpgrade.PriceArray.SpentWallets;\r\n        // Buying with old spent values\r\n        this.BuyMax();\r\n        // Because now, in prices, we have local copy of Price, instead of link to Content.Wallets,\r\n        //  we updating links to the wallet and also adding local wallet value to global, to get buy change\r\n        this.PriceArray.SetWalletsFromContent(storage, true, this.ID);\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Expose()\r\n    ], Upgrade.prototype, \"subClassID\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Expose(),\r\n        class_transformer_1.Type(function () { return priceArray_1.PriceArray; })\r\n    ], Upgrade.prototype, \"PriceArray\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Upgrade.prototype, \"OnBuyEvent\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Upgrade.prototype, \"TweakArray\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Upgrade.prototype, \"BuyCount\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Upgrade.prototype, \"GUI\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Expose(),\r\n        class_transformer_1.Type(function () { return level_1.Level; })\r\n    ], Upgrade.prototype, \"Level\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Upgrade.prototype, \"Theme\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Expose()\r\n    ], Upgrade.prototype, \"IsThemeUnlocked\", void 0);\r\n    return Upgrade;\r\n}(gameObject_1.GameObject));\r\nexports.Upgrade = Upgrade;\r\nvar OnUnlockUpgradeBuyEvent = /** @class */ (function (_super) {\r\n    __extends(OnUnlockUpgradeBuyEvent, _super);\r\n    function OnUnlockUpgradeBuyEvent(unlock) {\r\n        var _this = _super.call(this) || this;\r\n        _this.unlock = unlock;\r\n        return _this;\r\n    }\r\n    OnUnlockUpgradeBuyEvent.prototype.Trigger = function (_upgrade, _count, _spent) {\r\n        this.unlock.Toggle(true);\r\n    };\r\n    return OnUnlockUpgradeBuyEvent;\r\n}(upgradeOnBuyEvent_1.UpgradeOnBuyEvent));\r\nexports.OnUnlockUpgradeBuyEvent = OnUnlockUpgradeBuyEvent;\r\nvar UnlockUpgrade = /** @class */ (function (_super) {\r\n    __extends(UnlockUpgrade, _super);\r\n    function UnlockUpgrade(objectStorage, id, unlock, priceArray, isThemeUnlocked) {\r\n        if (isThemeUnlocked === void 0) { isThemeUnlocked = false; }\r\n        var _this = _super.call(this, objectStorage, id, null, new level_1.Level(0, 1), priceArray, new tweakArray_1.TweakArray([]), new OnUnlockUpgradeBuyEvent(unlock), isThemeUnlocked) || this;\r\n        _this.subClassID = UpgradeClassID.UnlockUpgrade;\r\n        _this.Theme = unlock.ID;\r\n        _this.Unlock = unlock;\r\n        return _this;\r\n    }\r\n    UnlockUpgrade.prototype.Reset = function () {\r\n        _super.prototype.Reset.call(this);\r\n        this.Unlock.Reset();\r\n    };\r\n    UnlockUpgrade.prototype.InitFrom = function (storage, oldUpgrade) {\r\n        _super.prototype.InitFrom.call(this, storage, oldUpgrade);\r\n        if (this.Level.Value.IsEqual(0) && oldUpgrade.Level.Value.IsNotEqual(0)) {\r\n            console.log(\"[UnlockUpgrade] Old upgrade was bought, but current is not, so resetting unlock\");\r\n            this.Unlock.Toggle(false);\r\n        }\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Exclude(),\r\n        class_transformer_1.Type(function () { return unlock_1.Unlock; })\r\n    ], UnlockUpgrade.prototype, \"Unlock\", void 0);\r\n    return UnlockUpgrade;\r\n}(Upgrade));\r\nexports.UnlockUpgrade = UnlockUpgrade;\r\n\n\n//# sourceURL=webpack://Game/./src/game/gameObjects/upgrade/upgrade.ts?");

/***/ }),

/***/ "./src/game/gameObjects/upgrade/upgradeGUI.ts":
/*!****************************************************!*\
  !*** ./src/game/gameObjects/upgrade/upgradeGUI.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UpgradeGUI = void 0;\r\nvar wallet_1 = __webpack_require__(/*! ../wallet */ \"./src/game/gameObjects/wallet.ts\");\r\nvar float_1 = __webpack_require__(/*! ../../../data/math/float */ \"./src/data/math/float.ts\");\r\nvar UpgradeGUI = /** @class */ (function () {\r\n    function UpgradeGUI(upgrade) {\r\n        this.upgrade = upgrade;\r\n    }\r\n    //todo move to PriceArray\r\n    UpgradeGUI.prototype.GetPrice = function (price) {\r\n        if (typeof price == \"number\") {\r\n            return this.upgrade.Prices[price];\r\n        }\r\n        else if (price instanceof wallet_1.Wallet) {\r\n            return this.upgrade.PriceArray.GetByWallet(price);\r\n        }\r\n        else {\r\n            return price;\r\n        }\r\n    };\r\n    UpgradeGUI.prototype.GetPriceValue = function (priceOrSearchMethod) {\r\n        return this.GetPrice(priceOrSearchMethod).Value;\r\n    };\r\n    // relativeLevel means, 1 is just value, 2 is next value, and so on\r\n    UpgradeGUI.prototype.GetPriceValueOnLevel = function (priceOrSearchMethod, relativeLevel) {\r\n        var price = this.GetPrice(priceOrSearchMethod);\r\n        relativeLevel = relativeLevel ? new float_1.Float(relativeLevel) : new float_1.Float(this.upgrade.BuyCountValue);\r\n        if (this.upgrade.Level.IsMaxed) {\r\n            return price.Value;\r\n        }\r\n        else {\r\n            relativeLevel = this.CorrectLevel(relativeLevel, \"Price\");\r\n            return price.GetValueOnLevel(relativeLevel);\r\n        }\r\n    };\r\n    UpgradeGUI.prototype.CorrectLevel = function (value, type) {\r\n        if (this.upgrade.Level.ValueMax) {\r\n            var currentLevels = this.upgrade.Level.Value;\r\n            if (this.upgrade.Level.Value.IsEqual(0) || type == \"Price\") {\r\n                currentLevels = this.upgrade.Level.Value;\r\n            }\r\n            else {\r\n                currentLevels = this.upgrade.Level.Value.Minus(1);\r\n            }\r\n            var buyCount = float_1.Float.Min(value, this.upgrade.Level.ValueMax.Minus(currentLevels));\r\n            if (!this.upgrade.Level.Value.IsEqual(0) && buyCount.IsMore(1)) {\r\n                buyCount = float_1.Float.Max(2, buyCount);\r\n            }\r\n            return buyCount;\r\n        }\r\n        else {\r\n            return value;\r\n        }\r\n    };\r\n    //todo move to TweakArray\r\n    UpgradeGUI.prototype.GetTweak = function (tweakOrSearchMethod) {\r\n        if (typeof tweakOrSearchMethod == \"number\") {\r\n            return this.upgrade.Tweaks[tweakOrSearchMethod];\r\n        }\r\n        else {\r\n            return tweakOrSearchMethod;\r\n        }\r\n    };\r\n    UpgradeGUI.prototype.GetTweakValue = function (tweakOrSearchMethod, whatToReturnIfNotBought) {\r\n        if (whatToReturnIfNotBought === void 0) { whatToReturnIfNotBought = new float_1.Float(0); }\r\n        var tweak = this.GetTweak(tweakOrSearchMethod);\r\n        if (this.upgrade.Level.Value.IsNotEqual(0)) {\r\n            return tweak.Value;\r\n        }\r\n        else {\r\n            return whatToReturnIfNotBought;\r\n        }\r\n    };\r\n    UpgradeGUI.prototype.GetTweakDataValue = function (tweakOrSearchMethod, gameDataID) {\r\n        var tweak = this.GetTweak(tweakOrSearchMethod);\r\n        return tweak.TargetList[gameDataID].Value;\r\n    };\r\n    //todo there can be some refactoring\r\n    UpgradeGUI.prototype.GetTweakDataValueOnLevel = function (tweakOrSearchMethod, gameDataID, relativeLevel) {\r\n        var tweak = this.GetTweak(tweakOrSearchMethod);\r\n        var gameData = tweak.TargetList[gameDataID];\r\n        var valueBefore = gameData.Value;\r\n        relativeLevel = relativeLevel ? new float_1.Float(relativeLevel) : new float_1.Float(this.upgrade.BuyCountValue);\r\n        if (this.upgrade.Level.IsMaxed) {\r\n            return valueBefore;\r\n        }\r\n        else {\r\n            relativeLevel = this.upgrade.Level.Value.IsEqual(0)\r\n                ? (relativeLevel.IsEqual(1)\r\n                    ? new float_1.Float(1)\r\n                    : relativeLevel.Plus(0))\r\n                : relativeLevel.Plus(1);\r\n            //todo universal function, to not duplicate this code\r\n            if (this.upgrade.Level.ValueMax) {\r\n                // relativeLevel = Float.Max(2, Float.Min(relativeLevel, this.upgrade.Level.ValueMax.Minus(this.upgrade.Level.Value)));\r\n                relativeLevel = this.CorrectLevel(relativeLevel, \"Tweak\");\r\n            }\r\n            var tweaksAfterUpgrade = gameData.TweakArray.Items.slice(0);\r\n            var countBefore = tweaksAfterUpgrade.length;\r\n            for (var i = 0; i < tweaksAfterUpgrade.length; i++) {\r\n                if (tweaksAfterUpgrade[i].ID == tweak.ID) {\r\n                    tweaksAfterUpgrade.splice(i, 1);\r\n                }\r\n            }\r\n            if (countBefore != tweaksAfterUpgrade.length + 1) {\r\n                throw new Error(\"Tweaks wasn't filtered correctly. Count change: \" + (countBefore - tweaksAfterUpgrade.length));\r\n            }\r\n            var valueOnLevel = tweak.GetValueOnLevel(relativeLevel);\r\n            var tweakAfterUpgrade = tweak.GetCopyWithValue(valueOnLevel);\r\n            tweakAfterUpgrade.Toggle(true);\r\n            tweaksAfterUpgrade.push(tweakAfterUpgrade);\r\n            return gameData.GetValueWithTweaks(tweaksAfterUpgrade);\r\n        }\r\n    };\r\n    // relativeLevel means, 1 is just value, 2 is next value, and so on\r\n    UpgradeGUI.prototype.GetTweakValueOnLevel = function (tweakOrSearchMethod, relativeLevel) {\r\n        var tweak = this.GetTweak(tweakOrSearchMethod);\r\n        relativeLevel = relativeLevel ? new float_1.Float(relativeLevel) : new float_1.Float(this.upgrade.BuyCountValue);\r\n        if (this.upgrade.Level.IsMaxed) {\r\n            return tweak.Value;\r\n        }\r\n        else {\r\n            relativeLevel = this.upgrade.Level.Value.IsEqual(0)\r\n                ? (relativeLevel.IsEqual(1)\r\n                    ? new float_1.Float(1)\r\n                    : relativeLevel.Plus(1))\r\n                : relativeLevel.Plus(1);\r\n            if (this.upgrade.Level.ValueMax) {\r\n                // relativeLevel = Float.Max(2, Float.Min(relativeLevel, this.upgrade.Level.ValueMax.Minus(this.upgrade.Level.Value)));\r\n                relativeLevel = this.CorrectLevel(relativeLevel, \"Tweak\");\r\n            }\r\n            return tweak.GetValueOnLevel(relativeLevel);\r\n        }\r\n    };\r\n    return UpgradeGUI;\r\n}());\r\nexports.UpgradeGUI = UpgradeGUI;\r\n\n\n//# sourceURL=webpack://Game/./src/game/gameObjects/upgrade/upgradeGUI.ts?");

/***/ }),

/***/ "./src/game/gameObjects/upgrade/upgradeOnBuyEvent.ts":
/*!***********************************************************!*\
  !*** ./src/game/gameObjects/upgrade/upgradeOnBuyEvent.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UpgradeOnBuyIdler = exports.UpgradeOnBuyEvent = void 0;\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar idler_1 = __webpack_require__(/*! ../idler */ \"./src/game/gameObjects/idler.ts\");\r\nvar UpgradeOnBuyEvent = /** @class */ (function () {\r\n    function UpgradeOnBuyEvent() {\r\n    }\r\n    return UpgradeOnBuyEvent;\r\n}());\r\nexports.UpgradeOnBuyEvent = UpgradeOnBuyEvent;\r\nvar UpgradeOnBuyIdler = /** @class */ (function (_super) {\r\n    __extends(UpgradeOnBuyIdler, _super);\r\n    function UpgradeOnBuyIdler(idler) {\r\n        var _this = _super.call(this) || this;\r\n        _this.idler = idler;\r\n        return _this;\r\n    }\r\n    UpgradeOnBuyIdler.prototype.Trigger = function (_upgrade, _count, _spent) {\r\n        this.idler.Start();\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return idler_1.Idler; })\r\n    ], UpgradeOnBuyIdler.prototype, \"idler\", void 0);\r\n    return UpgradeOnBuyIdler;\r\n}(UpgradeOnBuyEvent));\r\nexports.UpgradeOnBuyIdler = UpgradeOnBuyIdler;\r\n\n\n//# sourceURL=webpack://Game/./src/game/gameObjects/upgrade/upgradeOnBuyEvent.ts?");

/***/ }),

/***/ "./src/game/gameObjects/wallet.ts":
/*!****************************************!*\
  !*** ./src/game/gameObjects/wallet.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Wallet = exports.WalletStatistic = void 0;\r\nvar gameObject_1 = __webpack_require__(/*! ../gameObject */ \"./src/game/gameObject.ts\");\r\nvar float_1 = __webpack_require__(/*! ../../data/math/float */ \"./src/data/math/float.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar game_1 = __webpack_require__(/*! ../../game */ \"./src/game.ts\");\r\nvar WalletStatistic = /** @class */ (function () {\r\n    function WalletStatistic() {\r\n        this.TotalCollected = new float_1.Float(0);\r\n        this.TotalSpent = new float_1.Float(0);\r\n        this.BiggestValue = new float_1.Float(0);\r\n    }\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], WalletStatistic.prototype, \"TotalCollected\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], WalletStatistic.prototype, \"TotalSpent\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], WalletStatistic.prototype, \"BiggestValue\", void 0);\r\n    return WalletStatistic;\r\n}());\r\nexports.WalletStatistic = WalletStatistic;\r\nvar Wallet = /** @class */ (function (_super) {\r\n    __extends(Wallet, _super);\r\n    function Wallet(objectStorage, id, value, OnValueChanged) {\r\n        var _this = _super.call(this, objectStorage, gameObject_1.ClassName.Wallet, id) || this;\r\n        _this.OnValueChanged = OnValueChanged;\r\n        _this.value = new float_1.Float(value);\r\n        _this.baseValue = _this.value;\r\n        _this.Statistics = new WalletStatistic();\r\n        _this.Statistics.TotalCollected = _this.value;\r\n        return _this;\r\n    }\r\n    Wallet.prototype.Reset = function () {\r\n        this.value = this.baseValue;\r\n    };\r\n    Object.defineProperty(Wallet.prototype, \"Value\", {\r\n        get: function () {\r\n            return this.value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Wallet.prototype.Set = function (value) {\r\n        this.value = new float_1.Float(value);\r\n    };\r\n    Wallet.prototype.Add = function (value) {\r\n        var valueBefore = this.value;\r\n        this.value = float_1.Float.Plus(this.value, value);\r\n        this.Statistics.TotalCollected = this.Statistics.TotalCollected.Plus(value);\r\n        if (this.value.IsMore(this.Statistics.BiggestValue)) {\r\n            this.Statistics.BiggestValue = this.value;\r\n        }\r\n        if (this.OnValueChanged) {\r\n            this.OnValueChanged(valueBefore, this.value, this.value.Minus(valueBefore));\r\n        }\r\n        game_1.SmartUIUpdate();\r\n    };\r\n    Wallet.prototype.Subtract = function (value) {\r\n        var valueBefore = this.value;\r\n        this.value = float_1.Float.Minus(this.value, value);\r\n        this.Statistics.TotalSpent = this.Statistics.TotalCollected.Plus(value);\r\n        if (this.OnValueChanged) {\r\n            this.OnValueChanged(valueBefore, this.value, this.value.Minus(valueBefore));\r\n        }\r\n        game_1.SmartUIUpdate();\r\n    };\r\n    Wallet.prototype.InitFrom = function (_storage, oldObject) {\r\n        this.value = oldObject.Value;\r\n        this.Statistics = oldObject.Statistics;\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], Wallet.prototype, \"value\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Wallet.prototype, \"OnValueChanged\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], Wallet.prototype, \"baseValue\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return WalletStatistic; })\r\n    ], Wallet.prototype, \"Statistics\", void 0);\r\n    return Wallet;\r\n}(gameObject_1.GameObject));\r\nexports.Wallet = Wallet;\r\n\n\n//# sourceURL=webpack://Game/./src/game/gameObjects/wallet.ts?");

/***/ }),

/***/ "./src/game/managers/buildManager.ts":
/*!*******************************************!*\
  !*** ./src/game/managers/buildManager.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BuildManager = exports.BuildInfo = exports.CanBuildBuilding = exports.CanBuildTurret = void 0;\r\nvar content_1 = __webpack_require__(/*! ../../content/content */ \"./src/content/content.ts\");\r\nvar gameObject_1 = __webpack_require__(/*! ../gameObject */ \"./src/game/gameObject.ts\");\r\nvar CanBuildTurret = /** @class */ (function () {\r\n    function CanBuildTurret(Turret) {\r\n        this.Turret = Turret;\r\n    }\r\n    //todo universal GetBuildingCount and GetBuildingCountMax\r\n    CanBuildTurret.prototype.Check = function () {\r\n        return content_1.Managers.Fight.GetTurretCount(this.Turret.ID) < content_1.Managers.Fight.GetTurretMaxCount(this.Turret.ID);\r\n    };\r\n    return CanBuildTurret;\r\n}());\r\nexports.CanBuildTurret = CanBuildTurret;\r\nvar CanBuildBuilding = /** @class */ (function () {\r\n    function CanBuildBuilding(BuildingID) {\r\n        this.BuildingID = BuildingID;\r\n    }\r\n    //todo universal GetBuildingCount and GetBuildingCountMax\r\n    CanBuildBuilding.prototype.Check = function () {\r\n        var count;\r\n        var countMax;\r\n        switch (this.BuildingID) {\r\n            case gameObject_1.BuildingName.Spikes: {\r\n                var building = content_1.Content.Buildings.Spikes.Entity;\r\n                count = building.Instances.Length;\r\n                countMax = building.Count.Value.AsNumber;\r\n                break;\r\n            }\r\n            default: {\r\n                throw new Error(\"Building with id \" + this.BuildingID + \" is not handled\");\r\n            }\r\n        }\r\n        return count < countMax;\r\n    };\r\n    return CanBuildBuilding;\r\n}());\r\nexports.CanBuildBuilding = CanBuildBuilding;\r\n//todo move building instances here\r\nvar BuildInfo = /** @class */ (function (_super) {\r\n    __extends(BuildInfo, _super);\r\n    function BuildInfo(storage, id, Name, Type, PositionType, \r\n    // public readonly IsRotatable: boolean,\r\n    CanBuild) {\r\n        var _this = _super.call(this, storage, gameObject_1.ClassName.BuildInfo, id) || this;\r\n        _this.Name = Name;\r\n        _this.Type = Type;\r\n        _this.PositionType = PositionType;\r\n        _this.CanBuild = CanBuild;\r\n        return _this;\r\n    }\r\n    BuildInfo.prototype.InitFrom = function (_storage, _oldObject) {\r\n    };\r\n    return BuildInfo;\r\n}(gameObject_1.GameObject));\r\nexports.BuildInfo = BuildInfo;\r\nvar BuildManager = /** @class */ (function () {\r\n    function BuildManager(initialBuilding) {\r\n        this.CurrentBuilding = initialBuilding;\r\n    }\r\n    return BuildManager;\r\n}());\r\nexports.BuildManager = BuildManager;\r\n\n\n//# sourceURL=webpack://Game/./src/game/managers/buildManager.ts?");

/***/ }),

/***/ "./src/game/managers/eventSystem/event.ts":
/*!************************************************!*\
  !*** ./src/game/managers/eventSystem/event.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GameEvent = void 0;\r\nvar GameEvent = /** @class */ (function () {\r\n    function GameEvent() {\r\n        this.observers = [];\r\n    }\r\n    Object.defineProperty(GameEvent.prototype, \"Observers\", {\r\n        get: function () {\r\n            return this.observers;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    GameEvent.prototype.Register = function (callback, observer, id) {\r\n        if (id === void 0) { id = \"none\"; }\r\n        this.observers.push({\r\n            Observer: observer,\r\n            ID: id,\r\n            Callback: callback,\r\n        });\r\n    };\r\n    GameEvent.prototype.RemoveObserver = function (id) {\r\n        for (var i = 0; i < this.observers.length; i++) {\r\n            var obs = this.observers[i];\r\n            if (obs.ID == id) {\r\n                this.observers.splice(i, 1);\r\n            }\r\n        }\r\n    };\r\n    GameEvent.prototype.Trigger = function (sender, args) {\r\n        for (var _i = 0, _a = this.observers; _i < _a.length; _i++) {\r\n            var obs = _a[_i];\r\n            obs.Callback(sender, args, obs.Observer);\r\n        }\r\n    };\r\n    return GameEvent;\r\n}());\r\nexports.GameEvent = GameEvent;\r\n\n\n//# sourceURL=webpack://Game/./src/game/managers/eventSystem/event.ts?");

/***/ }),

/***/ "./src/game/managers/fightManager.ts":
/*!*******************************************!*\
  !*** ./src/game/managers/fightManager.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FightManager = exports.OnSpikesUnlocked = exports.OnRailTurretUnlocked = exports.OnLaserTurretUnlocked = exports.OnBasicTurretUnlocked = exports.OnFastMonsterUnlocked = exports.OnArmoredMonsterUnlocked = exports.OnBasicMonsterUnlocked = void 0;\r\nvar content_1 = __webpack_require__(/*! ../../content/content */ \"./src/content/content.ts\");\r\nvar turret_1 = __webpack_require__(/*! ../fighting/turret */ \"./src/game/fighting/turret.ts\");\r\nvar monster_1 = __webpack_require__(/*! ../fighting/monster */ \"./src/game/fighting/monster.ts\");\r\nvar main_1 = __webpack_require__(/*! ../../../javascript/construct3/main */ \"./javascript/construct3/main.js\");\r\nvar vector2_1 = __webpack_require__(/*! ../../data/vector2 */ \"./src/data/vector2.ts\");\r\nvar float_1 = __webpack_require__(/*! ../../data/math/float */ \"./src/data/math/float.ts\");\r\nvar c3themeUtils_1 = __webpack_require__(/*! ../../../javascript/construct3/c3ObjectUtils/c3themeUtils */ \"./javascript/construct3/c3ObjectUtils/c3themeUtils.ts\");\r\nvar gameObject_1 = __webpack_require__(/*! ../gameObject */ \"./src/game/gameObject.ts\");\r\nvar utilsGUI_1 = __webpack_require__(/*! ../../../javascript/construct3/c3ObjectUtils/utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar spikes_1 = __webpack_require__(/*! ../fighting/buildings/spikes */ \"./src/game/fighting/buildings/spikes.ts\");\r\nvar overlayMessage_1 = __webpack_require__(/*! ../../ui/overlayMessage */ \"./src/ui/overlayMessage.ts\");\r\nvar utilsMath_1 = __webpack_require__(/*! ../../utils/utilsMath */ \"./src/utils/utilsMath.ts\");\r\nvar utilsText_1 = __webpack_require__(/*! ../../utils/utilsText */ \"./src/utils/utilsText.ts\");\r\nvar inputHandlers_1 = __webpack_require__(/*! ../../input/inputHandlers */ \"./src/input/inputHandlers.ts\");\r\n//todo MonsterManager, TurretManager, Field class maybe\r\n//todo сделать OnMonsterUnlocked\r\n// export class OnAnyMonsterUnlocked implements OnUnlockToggledEvent {\r\n//\r\n// }\r\n//\r\n// export class OnAnyTurretUnlocked implements OnUnlockToggledEvent {\r\n//\r\n// }\r\nvar OnBasicMonsterUnlocked = /** @class */ (function () {\r\n    function OnBasicMonsterUnlocked() {\r\n    }\r\n    OnBasicMonsterUnlocked.prototype.OnEvent = function (isUnlocked, _isUnlockedBefore, _unlock) {\r\n        var monster = content_1.Content.Monsters.Basic;\r\n        c3themeUtils_1.ToggleTheme('Menu::Monsters', isUnlocked);\r\n        utilsGUI_1.SetSelectorEnabled(\"Monster\", monster.Entity.ID, isUnlocked);\r\n        c3themeUtils_1.ToggleTheme(\"MonsterSettings::\" + monster.Entity.ID, isUnlocked);\r\n        if (isUnlocked) {\r\n            monster.System.IsEverUnlocked.Value = true;\r\n        }\r\n        if (isUnlocked && content_1.SystemData.IsContentLoaded && !content_1.Content.System.Notifications.IsMonsterTutorialShown.Value) {\r\n            overlayMessage_1.ShowOverlayMessage({\r\n                Title: \"First monster unlocked!\",\r\n                Text: \"You just got your first monster! Monsters here are the main way to earn money!\"\r\n                    + \"\\nJust make them disappear, that's all\"\r\n                    + \"\\n\\nAt first, to do this, use your main super power...\"\r\n                    + \"\\n[color=#fb6fed][font=KumbhSans-Bold]LEFT MOUSE BUTTON![/font][/color]\",\r\n                Icon: {\r\n                    Animation: \"Monsters\",\r\n                    Frame: 0,\r\n                },\r\n                Button: {\r\n                    //bug color is not set\r\n                    Text: \"I'l try!\",\r\n                    Color: utilsMath_1.HexToRGB255(\"#e33b3b\"),\r\n                }\r\n            });\r\n            content_1.Content.System.Notifications.IsMonsterTutorialShown.Value = true;\r\n        }\r\n    };\r\n    return OnBasicMonsterUnlocked;\r\n}());\r\nexports.OnBasicMonsterUnlocked = OnBasicMonsterUnlocked;\r\nvar OnArmoredMonsterUnlocked = /** @class */ (function () {\r\n    function OnArmoredMonsterUnlocked() {\r\n    }\r\n    OnArmoredMonsterUnlocked.prototype.OnEvent = function (isUnlocked, _isUnlockedBefore, _unlock) {\r\n        var monster = content_1.Content.Monsters.Armored;\r\n        utilsGUI_1.SetSelectorEnabled(\"Monster\", monster.Entity.ID, isUnlocked);\r\n        c3themeUtils_1.ToggleTheme(\"MonsterSettings::\" + monster.Entity.ID, isUnlocked);\r\n        if (isUnlocked) {\r\n            monster.System.IsEverUnlocked.Value = true;\r\n        }\r\n    };\r\n    return OnArmoredMonsterUnlocked;\r\n}());\r\nexports.OnArmoredMonsterUnlocked = OnArmoredMonsterUnlocked;\r\nvar OnFastMonsterUnlocked = /** @class */ (function () {\r\n    function OnFastMonsterUnlocked() {\r\n    }\r\n    OnFastMonsterUnlocked.prototype.OnEvent = function (isUnlocked, _isUnlockedBefore, _unlock) {\r\n        var monster = content_1.Content.Monsters.Fast;\r\n        utilsGUI_1.SetSelectorEnabled(\"Monster\", monster.Entity.ID, isUnlocked);\r\n        if (isUnlocked) {\r\n            monster.System.IsEverUnlocked.Value = true;\r\n        }\r\n        //todo а почему я собственно не могу нормально открывать контент здесь?\r\n    };\r\n    return OnFastMonsterUnlocked;\r\n}());\r\nexports.OnFastMonsterUnlocked = OnFastMonsterUnlocked;\r\n//todo maybe give FightManager through this events? I guess yes\r\n//todo ОБЩУЮ ЛОГИКУ ОСТАВИТЬ ЗДЕСЬ, А ОСТАЛЬНОЕ В СПЕЦИФИК КЛАССЫ, а потому и удобно сдесь всё хранить, потому что дублируется код\r\nvar OnBasicTurretUnlocked = /** @class */ (function () {\r\n    function OnBasicTurretUnlocked() {\r\n    }\r\n    OnBasicTurretUnlocked.prototype.OnEvent = function (isUnlocked, _isUnlockedBefore, _unlock) {\r\n        var turret = content_1.Content.Turrets.Basic;\r\n        c3themeUtils_1.ToggleTheme('Menu::Turrets', isUnlocked);\r\n        c3themeUtils_1.ToggleTheme('Menu::BuildMode', isUnlocked);\r\n        c3themeUtils_1.ToggleTheme(\"Build::\" + turret.Entity.ID, isUnlocked);\r\n        if (isUnlocked && content_1.SystemData.IsContentLoaded && !turret.System.IsBuildModeShown.Value) {\r\n            content_1.Managers.Views.SetView(content_1.ViewID.BuildMode);\r\n            utilsGUI_1.ToggleSelector(\"BuildModeBuilding\", turret.Entity.ID);\r\n            turret.System.IsBuildModeShown.Value = true;\r\n        }\r\n        if (isUnlocked && content_1.SystemData.IsContentLoaded && !content_1.Content.System.Notifications.IsTurretTutorialShown.Value) {\r\n            overlayMessage_1.ShowOverlayMessage({\r\n                Title: \"First turret unlocked!\",\r\n                Text: \"Hey, you have a buddy now! Turrets will help you to defend... Wait, it's idle game, nevermind!\"\r\n                    + \"\\n\\nTo build the turret, use \"\r\n                    + \"[color=#fb6fed][font=KumbhSans-Bold]Build mode[/font][/color]\"\r\n                    + \" in the main menu!\",\r\n                Icon: {\r\n                    Animation: \"Turrets\",\r\n                    Frame: 0,\r\n                },\r\n                Button: {\r\n                    //bug color is not set\r\n                    Text: \"Show me!\",\r\n                    Color: utilsMath_1.HexToRGB255(\"#e33b3b\"),\r\n                }\r\n            });\r\n            content_1.Content.System.Notifications.IsTurretTutorialShown.Value = true;\r\n        }\r\n        if (isUnlocked) {\r\n            turret.System.IsEverUnlocked.Value = true;\r\n        }\r\n        else {\r\n            turret.Entity.DestroyAllInstances();\r\n        }\r\n    };\r\n    return OnBasicTurretUnlocked;\r\n}());\r\nexports.OnBasicTurretUnlocked = OnBasicTurretUnlocked;\r\nvar OnLaserTurretUnlocked = /** @class */ (function () {\r\n    function OnLaserTurretUnlocked() {\r\n    }\r\n    OnLaserTurretUnlocked.prototype.OnEvent = function (isUnlocked, _isUnlockedBefore, _unlock) {\r\n        var turret = content_1.Content.Turrets.Laser;\r\n        c3themeUtils_1.ToggleTheme(\"Build::\" + turret.Entity.ID, isUnlocked);\r\n        utilsGUI_1.SetSelectorEnabled(\"Turret\", turret.Entity.ID, isUnlocked);\r\n        if (isUnlocked && content_1.SystemData.IsContentLoaded && !turret.System.IsBuildModeShown.Value) {\r\n            content_1.Managers.Views.SetView(content_1.ViewID.BuildMode);\r\n            utilsGUI_1.ToggleSelector(\"BuildModeBuilding\", turret.Entity.ID);\r\n            turret.System.IsBuildModeShown.Value = true;\r\n        }\r\n        if (isUnlocked) {\r\n            turret.System.IsEverUnlocked.Value = true;\r\n        }\r\n        else {\r\n            turret.Entity.DestroyAllInstances();\r\n        }\r\n    };\r\n    return OnLaserTurretUnlocked;\r\n}());\r\nexports.OnLaserTurretUnlocked = OnLaserTurretUnlocked;\r\n//todo i can actually make universal function like this\r\nvar OnRailTurretUnlocked = /** @class */ (function () {\r\n    function OnRailTurretUnlocked() {\r\n    }\r\n    OnRailTurretUnlocked.prototype.OnEvent = function (isUnlocked, _isUnlockedBefore, _unlock) {\r\n        var turret = content_1.Content.Turrets.Rail;\r\n        c3themeUtils_1.ToggleTheme(\"Build::\" + turret.Entity.ID, isUnlocked);\r\n        utilsGUI_1.SetSelectorEnabled(\"Turret\", turret.Entity.ID, isUnlocked);\r\n        if (isUnlocked && content_1.SystemData.IsContentLoaded && !turret.System.IsBuildModeShown.Value) {\r\n            content_1.Managers.Views.SetView(content_1.ViewID.BuildMode);\r\n            utilsGUI_1.ToggleSelector(\"BuildModeBuilding\", turret.Entity.ID);\r\n            turret.System.IsBuildModeShown.Value = true;\r\n        }\r\n        if (isUnlocked) {\r\n            turret.System.IsEverUnlocked.Value = true;\r\n        }\r\n        else {\r\n            turret.Entity.DestroyAllInstances();\r\n        }\r\n    };\r\n    return OnRailTurretUnlocked;\r\n}());\r\nexports.OnRailTurretUnlocked = OnRailTurretUnlocked;\r\nvar OnSpikesUnlocked = /** @class */ (function () {\r\n    function OnSpikesUnlocked() {\r\n    }\r\n    OnSpikesUnlocked.prototype.OnEvent = function (isUnlocked, _isUnlockedBefore, _unlock) {\r\n        c3themeUtils_1.ToggleTheme('Build::Spikes', isUnlocked);\r\n        c3themeUtils_1.ToggleTheme('Menu::Buildings', isUnlocked);\r\n        if (isUnlocked) {\r\n            content_1.Content.Buildings.Spikes.System.IsEverUnlocked.Value = true;\r\n            utilsGUI_1.SetSelectorEnabled(\"Rebirth.Menu\", \"Buildings\", true);\r\n        }\r\n        if (isUnlocked && content_1.SystemData.IsContentLoaded && !content_1.Content.Buildings.Spikes.System.IsBuildModeShown.Value) {\r\n            content_1.Managers.Views.SetView(content_1.ViewID.BuildMode);\r\n            content_1.Content.Buildings.Spikes.System.IsBuildModeShown.Value = true;\r\n            utilsGUI_1.ToggleSelector(\"BuildModeBuilding\", \"Spikes\");\r\n        }\r\n        if (!isUnlocked) {\r\n            content_1.Content.Buildings.Spikes.Entity.DestroyAllInstances();\r\n        }\r\n    };\r\n    return OnSpikesUnlocked;\r\n}());\r\nexports.OnSpikesUnlocked = OnSpikesUnlocked;\r\nvar FightManager = /** @class */ (function () {\r\n    function FightManager(storage, field) {\r\n        this.CurrentMonsterView = \"BasicMonster\";\r\n        this.CurrentTurretView = \"BasicTurret\";\r\n        this.CurrentBuildingView = \"Spikes\";\r\n        this.Rebirth = {\r\n            CurrentMenu: \"Main\",\r\n            LastSubMenu: \"Main\",\r\n            CurrentMonstersMenu: \"BasicMonster\",\r\n            CurrentTurretsMenu: \"BasicTurret\",\r\n            CurrentBuildingsMenu: \"Spikes\",\r\n        };\r\n        this.NextMonster = undefined;\r\n        this.Storage = storage;\r\n        this.Field = field;\r\n        //todo find out the better way to do it\r\n        // this.CurrentMonsterView = Content.Monsters.Basic.Entity.ID;\r\n        // this.CurrentTurretView = Content.Turrets.Basic.Entity.ID;\r\n        // this.CurrentBuildingView = Content.Buildings.Spikes.Entity.ID;\r\n        this.UpdateMonsters();\r\n    }\r\n    FightManager.prototype.UpdateBuildModeInfo = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _i, _a, turret, _b, _c, building;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0: return [4 /*yield*/, main_1.Construct3.callFunction(\"DoTick\")];\r\n                    case 1:\r\n                        _d.sent();\r\n                        //# BuildMode buildings stats #\r\n                        if (content_1.Managers.Views.CurrentView.ID == content_1.ViewID.BuildMode) {\r\n                            for (_i = 0, _a = content_1.ContentStorage.GetAllItemsOfType(turret_1.Turret); _i < _a.length; _i++) {\r\n                                turret = _a[_i];\r\n                                utilsGUI_1.SetText(\"buildingCount::\" + turret.ID, utilsText_1.GetNumberText(content_1.Managers.Fight.GetTurretCount(turret.ID)) + \" \"\r\n                                    + (\"/ \" + utilsText_1.GetNumberText(content_1.Managers.Fight.GetTurretMaxCount(turret))));\r\n                            }\r\n                            for (_b = 0, _c = [content_1.Content.Buildings.Spikes]; _b < _c.length; _b++) {\r\n                                building = _c[_b];\r\n                                utilsGUI_1.SetText(\"buildingCount::\" + building.Entity.ID, building.Entity.Instances.Length + \" \"\r\n                                    + (\"/ \" + building.Entity.Count.Value));\r\n                            }\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FightManager.prototype.OnMonsterSpawned = function (monster, position) {\r\n        if (monster.OnSpawned) {\r\n            monster.OnSpawned(position);\r\n        }\r\n        this.UpdateMonsters();\r\n    };\r\n    FightManager.prototype.OnTurretCreated = function (turret) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (typeof turret == \"string\") {\r\n                            turret = content_1.ContentStorage.GetItemOfType(turret_1.Turret, turret);\r\n                        }\r\n                        return [4 /*yield*/, main_1.Construct3.callFunction(\"DoTick\")];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.UpdateTurret(turret);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    //todo i really need event system\r\n    FightManager.prototype.OnContentInitiatedOrGameLoaded = function () {\r\n        this.UpdateMonsters();\r\n    };\r\n    FightManager.prototype.OnGameFullyLoaded = function () {\r\n        for (var _i = 0, _a = main_1.Construct3.objects.MonsterMovePoint.getAllInstances(); _i < _a.length; _i++) {\r\n            var movePoint = _a[_i];\r\n            if (movePoint.instVars.OrderN == 0) {\r\n                this.Field.MonsterSpawnPosition = new vector2_1.Vector2(movePoint.x, movePoint.y);\r\n                break;\r\n            }\r\n        }\r\n        //todo ОБЩИЙ СПИСОК ПОД КЛАССЫ, ЧТОБЫ УБРАТЬ МИЛЛИНЫ ValuesOF!!!!\r\n        for (var _b = 0, _c = content_1.ContentStorage.GetAllItemsOfType(monster_1.Monster); _b < _c.length; _b++) {\r\n            var monster = _c[_b];\r\n            inputHandlers_1.UpdateMonsterToggle(monster.ID, monster.GetContent().System.IsEnabled.Value);\r\n        }\r\n    };\r\n    FightManager.prototype.OnMonsterFinishedPath = function () {\r\n        //todo implement\r\n    };\r\n    FightManager.prototype.OnMonsterDied = function (type, reward, position, damageDealerID) {\r\n        var monster = this.Storage.GetItemOfType(monster_1.Monster, type);\r\n        content_1.Content.Wallets.Coins.Add(reward.Coins);\r\n        content_1.Content.Rebirth.Stats.NonRebirthAward.Value = float_1.Float.Plus(content_1.Content.Rebirth.Stats.NonRebirthAward.Value, reward.RP);\r\n        monster.Statistics.TotalCoinsMade = float_1.Float.Plus(monster.Statistics.TotalCoinsMade, reward.Coins);\r\n        monster.Statistics.TotalRPMade = float_1.Float.Plus(monster.Statistics.TotalRPMade, reward.RP);\r\n        if (monster.OnDied) {\r\n            monster.OnDied(position);\r\n        }\r\n        this.UpdateMonsters();\r\n        if (damageDealerID != \"Click\" && damageDealerID != \"System\") {\r\n            var damageDealer = this.Storage.GetItem(damageDealerID);\r\n            if (damageDealer.ClassID == gameObject_1.ClassName.Turret || damageDealer.ClassID == gameObject_1.ClassName.Spikes) {\r\n                var turret = (damageDealer || spikes_1.Spikes);\r\n                turret.Statistics.MonstersKilled++;\r\n                turret.Statistics.TotalCoinsMade = float_1.Float.Plus(turret.Statistics.TotalCoinsMade, reward.Coins);\r\n            }\r\n            else {\r\n                throw new Error(\"Not handled damage dealer: '\" + damageDealerID + \"'\");\r\n            }\r\n        }\r\n        else if (damageDealerID == \"Click\") {\r\n            content_1.Content.Statistics.Gameplay.ClickKills.Value++;\r\n        }\r\n        else if (damageDealerID != \"System\") {\r\n            throw new Error(\"Damage dealer id '\" + damageDealerID + \"' is not handled\");\r\n        }\r\n    };\r\n    FightManager.prototype.OnMonsterDamaged = function (monsterID, damage, damageDealerID) {\r\n        var monster = content_1.ContentStorage.GetItemOfType(monster_1.Monster, monsterID);\r\n        if (damageDealerID != \"Click\" && damageDealerID != \"System\") {\r\n            var damageDealer = this.Storage.GetItem(damageDealerID);\r\n            if (damageDealer.ClassID == gameObject_1.ClassName.Turret || damageDealer.ClassID == gameObject_1.ClassName.Spikes) {\r\n                var turret = (damageDealer || spikes_1.Spikes);\r\n                turret.Statistics.DamageDealt = float_1.Float.Plus(turret.Statistics.DamageDealt, damage);\r\n            }\r\n            else {\r\n                throw new Error(\"Not handled damage dealer: '\" + damageDealerID + \"'\");\r\n            }\r\n        }\r\n        else if (damageDealerID == \"Click\") {\r\n            //# Handled in C3 Input events #\r\n        }\r\n        //todo move click damage count here\r\n        else if (damageDealerID != \"System\") {\r\n            throw new Error(\"Damage dealer id '\" + damageDealerID + \"' is not handled\");\r\n        }\r\n    };\r\n    FightManager.prototype.GetMonsterCount = function (monsterType) {\r\n        var count = 0;\r\n        var monsters = main_1.Construct3.objects.Monster.getAllInstances();\r\n        for (var _i = 0, monsters_1 = monsters; _i < monsters_1.length; _i++) {\r\n            var monster = monsters_1[_i];\r\n            if (monster.instVars.Type == monsterType.ID) {\r\n                count++;\r\n            }\r\n        }\r\n        return count;\r\n    };\r\n    FightManager.prototype.UpdateMonsters = function () {\r\n        //todo check performance of this stuff\r\n        if (!this.NextMonster) {\r\n            var monsters = this.Storage.GetAllItemsOfType(monster_1.Monster);\r\n            var availableMonsters = [];\r\n            for (var i = monsters.length - 1; i >= 0; i--) {\r\n                var monster = monsters[i];\r\n                var count = this.GetMonsterCount(monster);\r\n                var countMax = monster.MaxCount.Value.AsNumber;\r\n                var content = monster.GetContent();\r\n                if (monster.Unlock.IsUnlocked && content.System.IsEnabled.Value && count < countMax) {\r\n                    availableMonsters.push({\r\n                        Monster: monster,\r\n                        Count: count,\r\n                    });\r\n                }\r\n            }\r\n            if (availableMonsters.length > 0) {\r\n                availableMonsters.sort(function (a, b) { return a.Count - b.Count; });\r\n                var monster = availableMonsters[0].Monster;\r\n                this.NextMonster = monster;\r\n                var frame = 0;\r\n                switch (monster.ID) {\r\n                    case \"BasicMonster\":\r\n                        frame = 0;\r\n                        break;\r\n                    case \"ArmoredMonster\":\r\n                        frame = 1;\r\n                        break;\r\n                    case \"FastMonster\":\r\n                        frame = 2;\r\n                        break;\r\n                }\r\n                utilsGUI_1.SetIconFrame(\"NextMonster\", frame, \"Monsters\");\r\n                utilsGUI_1.SetIconVisible(\"NextMonster\", true);\r\n                var instantSpawn = content_1.RNG.bool(monster.InstantSpawnChance.Value.Divide(100).AsNumber);\r\n                if (instantSpawn) {\r\n                    content_1.Content.Timers.Game.MonsterSpawn.Duration = new float_1.Float(250);\r\n                }\r\n                else {\r\n                    content_1.Content.Timers.Game.MonsterSpawn.Duration = monster.SpawnTimeMS.Value;\r\n                }\r\n                content_1.Content.Timers.Game.MonsterSpawn.Start();\r\n            }\r\n        }\r\n    };\r\n    FightManager.prototype.UpdateTurrets = function () {\r\n        for (var _i = 0, _a = content_1.ContentStorage.GetAllItemsOfType(turret_1.Turret); _i < _a.length; _i++) {\r\n            var turret = _a[_i];\r\n            if (turret.Unlock.IsUnlocked) {\r\n                this.UpdateTurret(turret);\r\n            }\r\n        }\r\n    };\r\n    FightManager.prototype.GetTurretCount = function (turretOrID) {\r\n        var count = 0;\r\n        var id;\r\n        if (turretOrID) {\r\n            id = this.GetTurret(turretOrID).ID;\r\n        }\r\n        for (var _i = 0, _a = main_1.Construct3.objects.Turret.getAllInstances(); _i < _a.length; _i++) {\r\n            var turret = _a[_i];\r\n            if (id && turret.instVars.Type != id) {\r\n                continue;\r\n            }\r\n            count++;\r\n        }\r\n        return count;\r\n    };\r\n    FightManager.prototype.GetTurretMaxCount = function (turretOrID) {\r\n        return this.GetTurret(turretOrID).Count.Value.AsNumber;\r\n    };\r\n    FightManager.prototype.CreateNextMonster = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var count, countMax;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this.NextMonster) return [3 /*break*/, 5];\r\n                        count = this.GetMonsterCount(this.NextMonster);\r\n                        countMax = this.NextMonster.MaxCount.Value.AsNumber;\r\n                        if (!(count < countMax)) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, this.CreateMonster(this.Field.MonsterSpawnPosition, this.NextMonster)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        setTimeout(function () {\r\n                            if (!content_1.Managers.Fight.NextMonster) {\r\n                                utilsGUI_1.SetIconFrame(\"NextMonster\", 2, \"Markup\");\r\n                            }\r\n                        }, 350);\r\n                        return [4 /*yield*/, main_1.Construct3.callFunction(\"DoTick\")];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3: throw new Error(\"Next monster \" + this.NextMonster.ID + \" should've been created, but max count is already reached\");\r\n                    case 4:\r\n                        this.NextMonster = undefined;\r\n                        return [3 /*break*/, 6];\r\n                    case 5: throw new Error(\"Next monster was not set\");\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FightManager.prototype.CreateMonster = function (position, monsterOrID) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var monster;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        monster = this.GetMonster(monsterOrID);\r\n                        monster.Statistics.TotalSpawned++;\r\n                        main_1.Construct3.callFunction(\"CreateMonster\", monster.ID, position.X, position.Y, float_1.RawFloatValue(monster.Health.Value), float_1.RawFloatValue(monster.Speed.Value), float_1.RawFloatValue(monster.Reward.ValueData.Value), float_1.RawFloatValue(monster.RPDropValue.Value), float_1.RawFloatValue(monster.RPDropChance.Value), float_1.RawFloatValue(monster.Shield.Value), float_1.RawFloatValue(monster.DamageReductionMP.Value), float_1.RawFloatValue(monster.DodgeChance.Value));\r\n                        return [4 /*yield*/, main_1.Construct3.callFunction(\"DoTick\")];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.UpdateMonsters();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FightManager.prototype.GetTurret = function (turretOrID) {\r\n        if (typeof turretOrID == \"string\") {\r\n            return this.Storage.GetItem(turretOrID);\r\n        }\r\n        else\r\n            return turretOrID;\r\n    };\r\n    FightManager.prototype.GetMonster = function (monsterOrID) {\r\n        if (typeof monsterOrID == \"string\") {\r\n            return this.Storage.GetItem(monsterOrID);\r\n        }\r\n        else\r\n            return monsterOrID;\r\n    };\r\n    //todo move to Create/Upgrade Buildings\r\n    /**\r\n     * @return UID of created turret\r\n     */\r\n    FightManager.prototype.CreateTurret = function (position, turretOrID, angle) {\r\n        var turret = this.GetTurret(turretOrID);\r\n        return main_1.Construct3.callFunction(\"CreateTurret\", turret.ID, position.X, position.Y, angle);\r\n    };\r\n    FightManager.prototype.UpdateTurret = function (turret) {\r\n        main_1.Construct3.callFunction(\"UpdateTurret\", turret.ID, float_1.RawFloatValue(turret.Damage.Value), float_1.RawFloatValue(turret.HealthDamage.Value), float_1.RawFloatValue(turret.ShieldDamage.Value), float_1.RawFloatValue(turret.ReloadTimeMS.Value), float_1.RawFloatValue(turret.RotateSpeed.Value), float_1.RawFloatValue(turret.BulletSpeed.Value), float_1.RawFloatValue(turret.Range.Value), float_1.RawFloatValue(turret.BulletCount.Value), float_1.RawFloatValue(turret.CriticalDamageMP.Value), float_1.RawFloatValue(turret.CriticalDamageChance.Value), float_1.RawFloatValue(turret.HitsPerShot.Value), float_1.RawFloatValue(turret.FirstMonsterDamageMP.Value));\r\n        for (var _i = 0, _a = turret.Instances.Items; _i < _a.length; _i++) {\r\n            var instance = _a[_i];\r\n            if (instance.IsCreated()) {\r\n                instance.Angle = instance.GetInstance().instVars.BaseAngle;\r\n            }\r\n        }\r\n    };\r\n    FightManager.prototype.CreateBuilding = function (buildingID, position, angle) {\r\n        if (angle === void 0) { angle = 0; }\r\n        var uid;\r\n        switch (buildingID) {\r\n            case gameObject_1.BuildingName.Spikes: {\r\n                uid = main_1.Construct3.callFunction(\"CreateSpikes\", position.X, position.Y);\r\n                content_1.Content.Buildings.Spikes.Entity.Instances.AddItem(new spikes_1.SpikesInstance(uid, position));\r\n                break;\r\n            }\r\n            default: {\r\n                throw new Error(\"Building with id \" + buildingID + \" is not handled\");\r\n            }\r\n        }\r\n        this.UpdateBuilding(buildingID);\r\n        return uid;\r\n    };\r\n    FightManager.prototype.UpdateBuilding = function (buildingID) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var spikes;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, main_1.Construct3.callFunction(\"DoTick\")];\r\n                    case 1:\r\n                        _a.sent();\r\n                        switch (buildingID) {\r\n                            case gameObject_1.BuildingName.Spikes: {\r\n                                spikes = content_1.Content.Buildings.Spikes.Entity;\r\n                                main_1.Construct3.callFunction(\"UpdateSpikes\", float_1.RawFloatValue(spikes.Damage.Value), float_1.RawFloatValue(spikes.HealthDamage.Value), float_1.RawFloatValue(spikes.ShieldDamage.Value), float_1.RawFloatValue(spikes.ReloadTimeMS.Value), float_1.RawFloatValue(spikes.StunChance.Value), float_1.RawFloatValue(spikes.StunSpeedMP.Value), float_1.RawFloatValue(spikes.StunDurationMS.Value), float_1.RawFloatValue(spikes.HealthBasedDamagePercent.Value));\r\n                                break;\r\n                            }\r\n                            default: {\r\n                                throw new Error(\"Building with id \" + buildingID + \" is not handled\");\r\n                            }\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FightManager.prototype.ResetSpawn = function () {\r\n        this.NextMonster = undefined;\r\n    };\r\n    return FightManager;\r\n}());\r\nexports.FightManager = FightManager;\r\n\n\n//# sourceURL=webpack://Game/./src/game/managers/fightManager.ts?");

/***/ }),

/***/ "./src/game/managers/gameLoadManager.ts":
/*!**********************************************!*\
  !*** ./src/game/managers/gameLoadManager.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n//todo actually i think it can be good better way to do it in actual save manager, like ISaveType with Load func, dunno..\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GameLoadManager = exports.LoadType = void 0;\r\nvar content_1 = __webpack_require__(/*! ../../content/content */ \"./src/content/content.ts\");\r\nvar main_1 = __webpack_require__(/*! ../../../javascript/construct3/main */ \"./javascript/construct3/main.js\");\r\nvar gameLoad_1 = __webpack_require__(/*! ./saveSystem/gameLoad */ \"./src/game/managers/saveSystem/gameLoad.ts\");\r\nvar utilsGUI_1 = __webpack_require__(/*! ../../../javascript/construct3/c3ObjectUtils/utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar LoadType;\r\n(function (LoadType) {\r\n    LoadType[\"Auto\"] = \"Auto\";\r\n    LoadType[\"Manual\"] = \"Manual\";\r\n})(LoadType = exports.LoadType || (exports.LoadType = {}));\r\nvar GameLoadManager = /** @class */ (function () {\r\n    function GameLoadManager() {\r\n        this.LoadID = 0;\r\n        this.isLoading = false;\r\n        this.loadInfo = undefined;\r\n        this.loadType = undefined;\r\n        this.isSkippingNextLoad = false;\r\n        this.lastLoadInfo = undefined;\r\n    }\r\n    Object.defineProperty(GameLoadManager.prototype, \"IsSkippingNextLoad\", {\r\n        get: function () {\r\n            return this.isSkippingNextLoad;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GameLoadManager.prototype, \"LastLoadInfo\", {\r\n        get: function () {\r\n            return this.lastLoadInfo;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    GameLoadManager.prototype.IsLoading = function () {\r\n        return this.isLoading;\r\n    };\r\n    GameLoadManager.prototype.Info = function () {\r\n        return this.loadInfo;\r\n    };\r\n    GameLoadManager.prototype.SkipNextLoad = function () {\r\n        this.isSkippingNextLoad = true;\r\n    };\r\n    GameLoadManager.prototype.SetLoadGame = function (type, info) {\r\n        if (!this.IsLoading()) {\r\n            this.loadType = type;\r\n            this.isLoading = true;\r\n            this.loadInfo = info;\r\n            this.lastLoadInfo = this.loadInfo;\r\n        }\r\n        else {\r\n            throw new Error('Game is already loading!');\r\n        }\r\n    };\r\n    //todo возвращать деньги, за все грейды, которые были убраны в новом апдейте, но остались в сейве\r\n    GameLoadManager.prototype.LoadGame = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var saveDataOrResult, e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 7, , 8]);\r\n                        if (!this.IsSkippingNextLoad) return [3 /*break*/, 1];\r\n                        this.isSkippingNextLoad = false;\r\n                        return [3 /*break*/, 5];\r\n                    case 1:\r\n                        if (!this.IsLoading())\r\n                            throw new Error(\"Load info was not set\");\r\n                        return [4 /*yield*/, this.loadInfo.GetSaveData()];\r\n                    case 2:\r\n                        saveDataOrResult = _a.sent();\r\n                        if (!(typeof saveDataOrResult == \"string\")) return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, gameLoad_1.LoadGame(saveDataOrResult)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        if (saveDataOrResult.IsError) {\r\n                            throw saveDataOrResult.Error;\r\n                        }\r\n                        else {\r\n                            console.log(saveDataOrResult.Output);\r\n                        }\r\n                        _a.label = 5;\r\n                    case 5:\r\n                        this.loadType = undefined;\r\n                        this.isLoading = false;\r\n                        this.loadInfo = undefined;\r\n                        main_1.Construct3.globalVars.IsGameLoading = 0;\r\n                        return [4 /*yield*/, content_1.OnContentInitiatedOrGameLoaded(true)];\r\n                    case 6:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        e_1 = _a.sent();\r\n                        content_1.SystemData.IsGameCrashed = true;\r\n                        content_1.SystemData.IsContentLoaded = false;\r\n                        content_1.SystemData.IsThemesInitiated = false;\r\n                        switch (this.loadType) {\r\n                            case LoadType.Auto: {\r\n                                main_1.Construct3.callFunction(\"ToggleAutoLoadErrorScreen\", true);\r\n                                break;\r\n                            }\r\n                            case LoadType.Manual: {\r\n                                main_1.Construct3.callFunction(\"ToggleManualLoadErrorScreen\", true);\r\n                                break;\r\n                            }\r\n                        }\r\n                        this.Reset();\r\n                        utilsGUI_1.SetText(\"SaveLoadErrorInfo\", e_1);\r\n                        console.error(e_1);\r\n                        return [3 /*break*/, 8];\r\n                    case 8: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    GameLoadManager.prototype.Reset = function () {\r\n        this.loadType = undefined;\r\n        this.isLoading = false;\r\n        this.loadInfo = undefined;\r\n        main_1.Construct3.globalVars.IsGameLoading = 0;\r\n    };\r\n    GameLoadManager.prototype.RestartToLoad = function () {\r\n        if (main_1.Construct3.globalVars.IsGameLoading == 0) {\r\n            content_1.SystemData.IsContentLoaded = false;\r\n            content_1.SystemData.IsThemesInitiated = false;\r\n            main_1.Construct3.globalVars.IsGameLoading = 1;\r\n            main_1.Construct3.callFunction(\"RestartLayout\");\r\n        }\r\n        else {\r\n            throw new Error('Game is already loading');\r\n        }\r\n    };\r\n    return GameLoadManager;\r\n}());\r\nexports.GameLoadManager = GameLoadManager;\r\n\n\n//# sourceURL=webpack://Game/./src/game/managers/gameLoadManager.ts?");

/***/ }),

/***/ "./src/game/managers/saveSystem/classUtils.ts":
/*!****************************************************!*\
  !*** ./src/game/managers/saveSystem/classUtils.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FixOutdatedIDs = exports.GetClassByName = void 0;\r\nvar contentTypes_1 = __webpack_require__(/*! ../../../content/contentTypes */ \"./src/content/contentTypes.ts\");\r\nvar gameObject_1 = __webpack_require__(/*! ../../gameObject */ \"./src/game/gameObject.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../../content/content */ \"./src/content/content.ts\");\r\nfunction GetClassByName(name) {\r\n    for (var _i = 0, _a = contentTypes_1.GetTypeList(); _i < _a.length; _i++) {\r\n        var type = _a[_i];\r\n        if (type.name == name) {\r\n            return type;\r\n        }\r\n    }\r\n    throw new Error(\"Type '\" + name + \"' was not found\");\r\n}\r\nexports.GetClassByName = GetClassByName;\r\nfunction FixOutdatedIDs(item) {\r\n    var classFixes = [\r\n        //# From very old version #\r\n        {\r\n            Right: gameObject_1.ClassName.TurretInstance,\r\n            Aliases: [\"TurretInstanceInfo\"]\r\n        },\r\n    ];\r\n    var idFixes = [\r\n        //# 0.3 -> 0.4 #\r\n        {\r\n            Right: content_1.Content.Rebirth.Stats.IsNotificationShow.ID,\r\n            Aliases: [\"Rebirth.IsNotificationShow\"]\r\n        },\r\n        {\r\n            Right: content_1.Content.Rebirth.Stats.NextPointProgress.ID,\r\n            Aliases: [\"Rebirth.NextPointProgress\"]\r\n        },\r\n        {\r\n            Right: content_1.Content.Rebirth.Main.StartCoinBonus.ID,\r\n            Aliases: [\"Rebirth.StartCoinBonus\"]\r\n        },\r\n        {\r\n            Right: content_1.Content.Rebirth.Main.RPPerLevel.ID,\r\n            Aliases: [\"Rebirth.RPPerLevel\"]\r\n        },\r\n        {\r\n            Right: content_1.Content.Rebirth.Main.RPRewardMP.ID,\r\n            Aliases: [\"Rebirth.RPRewardMP\"]\r\n        },\r\n        {\r\n            Right: content_1.Content.Rebirth.BasicMonster.Count.ID,\r\n            Aliases: [\"Rebirth.Upgrades.BasicMonster.Count\"]\r\n        },\r\n        {\r\n            Right: content_1.Content.Rebirth.BasicMonster.Reward.ID,\r\n            Aliases: [\"Rebirth.BasicMonsterReward\"]\r\n        },\r\n        {\r\n            Right: content_1.Content.Rebirth.ArmoredMonster.Reward.ID,\r\n            Aliases: [\"Rebirth.Upgrades.ArmoredMonster.Reward\"]\r\n        },\r\n        {\r\n            Right: content_1.Content.Rebirth.FastMonster.Reward.ID,\r\n            Aliases: [\"Rebirth.Upgrades.FastMonster.Reward\"]\r\n        },\r\n        {\r\n            Right: content_1.Content.Rebirth.BasicTurret.Count.ID,\r\n            Aliases: [\"Rebirth.Upgrades.BasicTurret.Count\"]\r\n        },\r\n        {\r\n            Right: content_1.Content.Rebirth.LaserTurret.Count.ID,\r\n            Aliases: [\"Rebirth.Upgrades.LaserTurret.Count\"]\r\n        },\r\n        {\r\n            Right: content_1.Content.Rebirth.RailTurret.Count.ID,\r\n            Aliases: [\"Rebirth.Upgrades.RailTurret.Count\"]\r\n        },\r\n        {\r\n            Right: content_1.Content.Rebirth.Spikes.Count.ID,\r\n            Aliases: [\"Rebirth.Upgrades.Spikes.Count\"]\r\n        },\r\n    ];\r\n    for (var _i = 0, classFixes_1 = classFixes; _i < classFixes_1.length; _i++) {\r\n        var classFix = classFixes_1[_i];\r\n        if (classFix.Aliases.includes(item.ClassID)) {\r\n            item.ClassID = classFix.Right;\r\n        }\r\n    }\r\n    for (var _a = 0, idFixes_1 = idFixes; _a < idFixes_1.length; _a++) {\r\n        var idFix = idFixes_1[_a];\r\n        if (idFix.Aliases.includes(item.ID)) {\r\n            item.ID = idFix.Right;\r\n        }\r\n    }\r\n    //todo maybe just skip item with wrong classID, and show error only, without exception... dunno\r\n    return item;\r\n}\r\nexports.FixOutdatedIDs = FixOutdatedIDs;\r\n\n\n//# sourceURL=webpack://Game/./src/game/managers/saveSystem/classUtils.ts?");

/***/ }),

/***/ "./src/game/managers/saveSystem/gameLoad.ts":
/*!**************************************************!*\
  !*** ./src/game/managers/saveSystem/gameLoad.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LoadGame = exports.CurrentTimeStr = exports.LoadGameFromString = exports.LoadGameFromSlot = exports.SaveData = void 0;\r\nvar gameObject_1 = __webpack_require__(/*! ../../gameObject */ \"./src/game/gameObject.ts\");\r\nvar game_1 = __webpack_require__(/*! ../../../game */ \"./src/game.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../../content/content */ \"./src/content/content.ts\");\r\nvar stringGameLoadInfo_1 = __webpack_require__(/*! ./stringGameLoadInfo */ \"./src/game/managers/saveSystem/stringGameLoadInfo.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar slotGameLoadInfo_1 = __webpack_require__(/*! ./slotGameLoadInfo */ \"./src/game/managers/saveSystem/slotGameLoadInfo.ts\");\r\nvar classUtils_1 = __webpack_require__(/*! ./classUtils */ \"./src/game/managers/saveSystem/classUtils.ts\");\r\nvar utilsObjects_1 = __webpack_require__(/*! ../../../utils/utilsObjects */ \"./src/utils/utilsObjects.ts\");\r\nvar SaveData = /** @class */ (function () {\r\n    function SaveData(Items, Managers, Timers) {\r\n        this.Items = Items;\r\n        this.Managers = Managers;\r\n        this.Timers = Timers;\r\n    }\r\n    return SaveData;\r\n}());\r\nexports.SaveData = SaveData;\r\nfunction LoadGameFromSlot(loadType, slotName, isCompressed) {\r\n    if (isCompressed === void 0) { isCompressed = true; }\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            game_1.SaveManager.SetLoadGame(loadType, new slotGameLoadInfo_1.SlotGameLoadInfo(slotName, isCompressed));\r\n            game_1.SaveManager.RestartToLoad();\r\n            return [2 /*return*/];\r\n        });\r\n    });\r\n}\r\nexports.LoadGameFromSlot = LoadGameFromSlot;\r\nfunction LoadGameFromString(loadType, rawData, isCompressed) {\r\n    if (isCompressed === void 0) { isCompressed = true; }\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            game_1.SaveManager.SetLoadGame(loadType, new stringGameLoadInfo_1.StringGameLoadInfo(rawData, isCompressed));\r\n            game_1.SaveManager.RestartToLoad();\r\n            return [2 /*return*/];\r\n        });\r\n    });\r\n}\r\nexports.LoadGameFromString = LoadGameFromString;\r\nfunction CurrentTimeStr() {\r\n    var now = new Date();\r\n    return \"[\" + now.getHours() + \":\" + now.getMinutes() + \":\" + now.getSeconds() + \":\" + now.getMilliseconds() + \"]\";\r\n}\r\nexports.CurrentTimeStr = CurrentTimeStr;\r\nfunction LoadGame(saveData) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var deserializedSaveData, correctItems, correctTimers, _i, _a, rawItem, item, container, _b, _c, rawTimer, timer, _loop_1, _d, correctItems_1, item, _loop_2, _e, correctTimers_1, timer, _loop_3, _f, correctItems_2, item, state_1;\r\n        return __generator(this, function (_g) {\r\n            switch (_g.label) {\r\n                case 0: return [4 /*yield*/, game_1.Construct3.callFunction(\"DoTick\")];\r\n                case 1:\r\n                    _g.sent();\r\n                    //todo save version id, for ability to do some version specific migration\r\n                    //todo надо сделать систему Aliases, чтобы когда выходит новый апдейт, нормально загружались грейды которые были\r\n                    // переименованы\r\n                    content_1.SystemData.IsContentLoaded = false;\r\n                    console.log(CurrentTimeStr() + \" [LoadGame] Game loading started..\");\r\n                    deserializedSaveData = class_transformer_1.deserialize(SaveData, saveData);\r\n                    console.log(deserializedSaveData.Items);\r\n                    correctItems = [];\r\n                    correctTimers = [];\r\n                    console.log(CurrentTimeStr() + \" [LoadGame] Data deserialize finished!\");\r\n                    // Stage 1: Init (just convert plain object to classes)\r\n                    for (_i = 0, _a = deserializedSaveData.Items; _i < _a.length; _i++) { //deserializeSaveData.Items\r\n                        rawItem = _a[_i];\r\n                        rawItem = classUtils_1.FixOutdatedIDs(rawItem);\r\n                        item = class_transformer_1.plainToClass(classUtils_1.GetClassByName(rawItem.ClassID), rawItem);\r\n                        correctItems.push(item);\r\n                        if (item.ClassID == gameObject_1.ClassName.Container) {\r\n                            container = item;\r\n                            if (utilsObjects_1.IsObject(container.Value)) {\r\n                                if (\"ClassID\" in container.Value) {\r\n                                    container.Value = class_transformer_1.plainToClass(classUtils_1.GetClassByName(container.Value.ClassID), container.Value);\r\n                                    container.SetBaseValue(class_transformer_1.plainToClass(classUtils_1.GetClassByName(container.Value.ClassID), container.BaseValue));\r\n                                    //console.log(`Container value '${container.Value.ID}' converted to class ${container.Value.ClassID}`);\r\n                                }\r\n                            }\r\n                        }\r\n                        //console.log(`${CurrentTimeStr()} - Item: ${item.ID} converted to class ${rawItem.ClassID}`);\r\n                        for (_b = 0, _c = deserializedSaveData.Timers; _b < _c.length; _b++) {\r\n                            rawTimer = _c[_b];\r\n                            timer = class_transformer_1.plainToClass(classUtils_1.GetClassByName(rawTimer.ClassID), rawTimer);\r\n                            correctTimers.push(timer);\r\n                            //console.log(`${CurrentTimeStr()} - Timer: ${timer.ID} converted to class`);\r\n                        }\r\n                    }\r\n                    console.log(CurrentTimeStr() + \" [LoadGame] Stage one of converting objects finished!\");\r\n                    _loop_1 = function (item) {\r\n                        var currentItem = content_1.ContentStorage.Items.find(function (obj) { return obj.IsSameSignature(item); });\r\n                        if (currentItem) {\r\n                            currentItem.InitFrom(content_1.ContentStorage, item);\r\n                            //console.log(`${CurrentTimeStr()} - Item ${currentItem.ID} reinited`);\r\n                        }\r\n                        else {\r\n                            console.log(CurrentTimeStr() + \" No item found to replace for \" + item.ClassID + \" - \" + item.ID);\r\n                            switch (item.ClassID) {\r\n                                //todo SubClassID??\r\n                                case gameObject_1.ClassName.Upgrade: {\r\n                                    var upgrade = item;\r\n                                    upgrade.PriceArray.Refund(content_1.ContentStorage);\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    };\r\n                    // Stage 2: Merge save data to current content\r\n                    for (_d = 0, correctItems_1 = correctItems; _d < correctItems_1.length; _d++) {\r\n                        item = correctItems_1[_d];\r\n                        _loop_1(item);\r\n                    }\r\n                    _loop_2 = function (timer) {\r\n                        var currentTimer = content_1.TimerStorage.Items.find(function (obj) { return obj.IsSameSignature(timer); });\r\n                        if (currentTimer) {\r\n                            currentTimer.InitFrom(content_1.ContentStorage, timer);\r\n                            //console.log(`${CurrentTimeStr()} - Item ${currentTimer.ID} reinited`);\r\n                        }\r\n                    };\r\n                    for (_e = 0, correctTimers_1 = correctTimers; _e < correctTimers_1.length; _e++) {\r\n                        timer = correctTimers_1[_e];\r\n                        _loop_2(timer);\r\n                    }\r\n                    console.log(CurrentTimeStr() + \" [LoadGame] Stage one of re-initiating objects finished!\");\r\n                    _loop_3 = function (item) {\r\n                        var currentItem, instancesStorage, loadedBuilding, currentBuilding, building, count, items, _i, _a, instance, correctInstance, turretInstance;\r\n                        return __generator(this, function (_b) {\r\n                            switch (_b.label) {\r\n                                case 0:\r\n                                    currentItem = content_1.ContentStorage.Items.find(function (obj) { return obj.IsSameSignature(item); });\r\n                                    instancesStorage = void 0;\r\n                                    loadedBuilding = void 0;\r\n                                    currentBuilding = void 0;\r\n                                    if (!(item.ClassID == gameObject_1.ClassName.Turret || utilsObjects_1.ValuesOf(gameObject_1.BuildingName).includes(item.ClassID))) return [3 /*break*/, 7];\r\n                                    loadedBuilding = item;\r\n                                    currentBuilding = currentItem;\r\n                                    instancesStorage = loadedBuilding.Instances;\r\n                                    if (!content_1.ContentStorage.IsItemExists(item.ID)) return [3 /*break*/, 6];\r\n                                    building = content_1.ContentStorage.GetItem(item.ID);\r\n                                    count = building.Count.Value.AsNumber;\r\n                                    items = instancesStorage.Items;\r\n                                    items = items.slice(0, count);\r\n                                    instancesStorage.RemoveAll();\r\n                                    instancesStorage.AddItems(items);\r\n                                    if (!building.Unlock.IsUnlocked && items.length > 0) {\r\n                                        console.log(\"Building '\" + building.ID + \"' isn't unlocked now, so skip loading instances\");\r\n                                        return [2 /*return*/, { value: void 0 }];\r\n                                    }\r\n                                    _i = 0, _a = instancesStorage.Items;\r\n                                    _b.label = 1;\r\n                                case 1:\r\n                                    if (!(_i < _a.length)) return [3 /*break*/, 5];\r\n                                    instance = _a[_i];\r\n                                    instance = classUtils_1.FixOutdatedIDs(instance);\r\n                                    correctInstance = class_transformer_1.plainToClass(classUtils_1.GetClassByName(instance.ClassID), instance);\r\n                                    correctInstance.InitFrom(currentBuilding.Instances, correctInstance);\r\n                                    if (!(item.ClassID == gameObject_1.ClassName.Turret)) return [3 /*break*/, 3];\r\n                                    turretInstance = correctInstance;\r\n                                    //bug turret count is not used, so can be placed more turrets than available\r\n                                    return [4 /*yield*/, game_1.Managers.Fight.CreateTurret(turretInstance.Position, turretInstance.TurretID, turretInstance.Angle)];\r\n                                case 2:\r\n                                    //bug turret count is not used, so can be placed more turrets than available\r\n                                    _b.sent();\r\n                                    return [3 /*break*/, 4];\r\n                                case 3:\r\n                                    game_1.Managers.Fight.CreateBuilding(correctInstance.ClassID, correctInstance.Position);\r\n                                    _b.label = 4;\r\n                                case 4:\r\n                                    _i++;\r\n                                    return [3 /*break*/, 1];\r\n                                case 5: return [3 /*break*/, 7];\r\n                                case 6: throw new Error(\"Building '\" + item.ID + \"' was not found in the current content\");\r\n                                case 7: return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    };\r\n                    _f = 0, correctItems_2 = correctItems;\r\n                    _g.label = 2;\r\n                case 2:\r\n                    if (!(_f < correctItems_2.length)) return [3 /*break*/, 5];\r\n                    item = correctItems_2[_f];\r\n                    return [5 /*yield**/, _loop_3(item)];\r\n                case 3:\r\n                    state_1 = _g.sent();\r\n                    if (typeof state_1 === \"object\")\r\n                        return [2 /*return*/, state_1.value];\r\n                    _g.label = 4;\r\n                case 4:\r\n                    _f++;\r\n                    return [3 /*break*/, 2];\r\n                case 5:\r\n                    console.log('[LoadGame] Stage one of specific objects actions after full game load is finished');\r\n                    return [4 /*yield*/, game_1.Construct3.callFunction(\"DoTick\")];\r\n                case 6:\r\n                    _g.sent();\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.LoadGame = LoadGame;\r\n\n\n//# sourceURL=webpack://Game/./src/game/managers/saveSystem/gameLoad.ts?");

/***/ }),

/***/ "./src/game/managers/saveSystem/gameSave.ts":
/*!**************************************************!*\
  !*** ./src/game/managers/saveSystem/gameSave.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GetCurrentSaveString = exports.OnSaveDataGot = exports.SaveGame = exports.GetCurrentSaveData = exports.InitSaveWorker = void 0;\r\nvar content_1 = __webpack_require__(/*! ../../../content/content */ \"./src/content/content.ts\");\r\nvar gameLoad_1 = __webpack_require__(/*! ./gameLoad */ \"./src/game/managers/saveSystem/gameLoad.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar lz_string_1 = __importDefault(__webpack_require__(/*! lz-string */ \"./node_modules/lz-string/libs/lz-string.js\"));\r\nvar engine_1 = __webpack_require__(/*! ../../../../javascript/construct3/engine */ \"./javascript/construct3/engine.ts\");\r\nvar game_1 = __webpack_require__(/*! ../../../game */ \"./src/game.ts\");\r\n//\"https://preview.construct.net/game.worker.js\"\r\nvar SaveWorker;\r\nfunction InitSaveWorker() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var str;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!!SaveWorker) return [3 /*break*/, 2];\r\n                    return [4 /*yield*/, game_1.Construct3.assets.getProjectFileUrl(\"game.worker.js\")];\r\n                case 1:\r\n                    str = _a.sent();\r\n                    SaveWorker = new Worker(str);\r\n                    console.log(SaveWorker);\r\n                    SaveWorker.onmessage = function (e) {\r\n                        // console.log(\"SaveWorker.OnMessage()\");\r\n                        OnSaveDataGot(e.data);\r\n                        // console.log(\"Worker says: \" + e.data.length);\r\n                    };\r\n                    console.log('Worker inited');\r\n                    return [3 /*break*/, 3];\r\n                case 2:\r\n                    console.log('Worker is already inited');\r\n                    _a.label = 3;\r\n                case 3: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.InitSaveWorker = InitSaveWorker;\r\nfunction GetCurrentSaveData() {\r\n    return new gameLoad_1.SaveData(content_1.ContentStorage.Items, content_1.Managers, content_1.TimerStorage.Items);\r\n}\r\nexports.GetCurrentSaveData = GetCurrentSaveData;\r\nvar SaveGameState = {\r\n    LastLoadID: 0,\r\n    IsSaving: false\r\n};\r\nfunction SaveGame() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var data, plain;\r\n        return __generator(this, function (_a) {\r\n            if (!SaveGameState.IsSaving) {\r\n                //console.log('[SaveGame] Saving is not active, started saving...');\r\n                SaveGameState.IsSaving = true;\r\n                SaveGameState.LastLoadID = parseInt(game_1.SaveManager.LoadID.toString());\r\n                data = GetCurrentSaveData();\r\n                plain = class_transformer_1.classToPlain(data);\r\n                SaveWorker.postMessage(plain);\r\n            }\r\n            return [2 /*return*/];\r\n        });\r\n    });\r\n}\r\nexports.SaveGame = SaveGame;\r\nfunction OnSaveDataGot(saveString) {\r\n    if (SaveGameState.IsSaving) {\r\n        if (game_1.SaveManager.LoadID == SaveGameState.LastLoadID) {\r\n            var slotName = \"Save1\";\r\n            engine_1.Engine.Storage.SetItem(slotName, saveString);\r\n            console.log(\"Saved: \" + slotName);\r\n        }\r\n        else {\r\n            console.log('[OnSaveDataGot] LoadID had changed, aborting game save.');\r\n        }\r\n        SaveGameState.IsSaving = false;\r\n    }\r\n    else {\r\n        console.log('[OnSaveDataGot] SaveGameState.IsSaving is false, aborting game save');\r\n    }\r\n}\r\nexports.OnSaveDataGot = OnSaveDataGot;\r\nfunction GetCurrentSaveString() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var saveData, serializedSaveData;\r\n        return __generator(this, function (_a) {\r\n            saveData = GetCurrentSaveData();\r\n            serializedSaveData = class_transformer_1.serialize(saveData);\r\n            return [2 /*return*/, lz_string_1.default.compressToUTF16(serializedSaveData)];\r\n        });\r\n    });\r\n}\r\nexports.GetCurrentSaveString = GetCurrentSaveString;\r\n//\r\n// let SOMETHING1 = new Date().getTime();\r\n// let SOMETHING2 = new Date().getTime();\r\n// console.log(`SOMETHING time: ${GetTimeText(SOMETHING2 - SOMETHING1)}`);\r\n\n\n//# sourceURL=webpack://Game/./src/game/managers/saveSystem/gameSave.ts?");

/***/ }),

/***/ "./src/game/managers/saveSystem/slotGameLoadInfo.ts":
/*!**********************************************************!*\
  !*** ./src/game/managers/saveSystem/slotGameLoadInfo.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SlotGameLoadInfo = void 0;\r\nvar engine_1 = __webpack_require__(/*! ../../../../javascript/construct3/engine */ \"./javascript/construct3/engine.ts\");\r\nvar lz_string_1 = __importDefault(__webpack_require__(/*! lz-string */ \"./node_modules/lz-string/libs/lz-string.js\"));\r\nvar SlotGameLoadInfo = /** @class */ (function () {\r\n    function SlotGameLoadInfo(Slot, IsCompressed) {\r\n        this.Slot = Slot;\r\n        this.IsCompressed = IsCompressed;\r\n    }\r\n    SlotGameLoadInfo.prototype.GetSaveData = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var rawData, saveData;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        console.log('Started to loading game from slot..');\r\n                        return [4 /*yield*/, engine_1.Engine.Storage.GetItem(this.Slot)];\r\n                    case 1:\r\n                        rawData = _a.sent();\r\n                        if (!rawData) {\r\n                            return [2 /*return*/, {\r\n                                    IsError: false,\r\n                                    Output: \"No save data was found to load\"\r\n                                }];\r\n                        }\r\n                        if (this.IsCompressed) {\r\n                            saveData = lz_string_1.default.decompressFromUTF16(rawData);\r\n                        }\r\n                        else {\r\n                            saveData = rawData;\r\n                        }\r\n                        if (saveData) {\r\n                            return [2 /*return*/, saveData];\r\n                        }\r\n                        else {\r\n                            throw new Error('Save data is not correct');\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return SlotGameLoadInfo;\r\n}());\r\nexports.SlotGameLoadInfo = SlotGameLoadInfo;\r\n\n\n//# sourceURL=webpack://Game/./src/game/managers/saveSystem/slotGameLoadInfo.ts?");

/***/ }),

/***/ "./src/game/managers/saveSystem/stringGameLoadInfo.ts":
/*!************************************************************!*\
  !*** ./src/game/managers/saveSystem/stringGameLoadInfo.ts ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StringGameLoadInfo = void 0;\r\nvar lz_string_1 = __importDefault(__webpack_require__(/*! lz-string */ \"./node_modules/lz-string/libs/lz-string.js\"));\r\nvar StringGameLoadInfo = /** @class */ (function () {\r\n    function StringGameLoadInfo(DataString, IsCompressed) {\r\n        this.DataString = DataString;\r\n        this.IsCompressed = IsCompressed;\r\n    }\r\n    StringGameLoadInfo.prototype.GetSaveData = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var saveData;\r\n            return __generator(this, function (_a) {\r\n                if (!this.DataString) {\r\n                    return [2 /*return*/, {\r\n                            IsError: true,\r\n                            Error: new Error(\"Save data string was empty\")\r\n                        }];\r\n                }\r\n                if (this.IsCompressed) {\r\n                    saveData = lz_string_1.default.decompressFromUTF16(this.DataString);\r\n                }\r\n                else {\r\n                    saveData = this.DataString;\r\n                }\r\n                if (saveData) {\r\n                    return [2 /*return*/, saveData];\r\n                }\r\n                else {\r\n                    throw new Error('Save data is not correct');\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    return StringGameLoadInfo;\r\n}());\r\nexports.StringGameLoadInfo = StringGameLoadInfo;\r\n\n\n//# sourceURL=webpack://Game/./src/game/managers/saveSystem/stringGameLoadInfo.ts?");

/***/ }),

/***/ "./src/game/managers/viewManager.ts":
/*!******************************************!*\
  !*** ./src/game/managers/viewManager.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ViewManager = void 0;\r\nvar engine_1 = __webpack_require__(/*! ../../../javascript/construct3/engine */ \"./javascript/construct3/engine.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar game_1 = __webpack_require__(/*! ../../game */ \"./src/game.ts\");\r\nvar main_1 = __webpack_require__(/*! ../../../javascript/construct3/main */ \"./javascript/construct3/main.js\");\r\nvar overlay_1 = __webpack_require__(/*! ../../../javascript/construct3/c3ObjectUtils/gameUI/overlay */ \"./javascript/construct3/c3ObjectUtils/gameUI/overlay.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content/content */ \"./src/content/content.ts\");\r\nvar view_1 = __webpack_require__(/*! ../../../javascript/construct3/c3ObjectUtils/gameUI/view */ \"./javascript/construct3/c3ObjectUtils/gameUI/view.ts\");\r\nvar scrollbar_1 = __webpack_require__(/*! ../../../javascript/construct3/c3ObjectUtils/gameUI/scrollbar */ \"./javascript/construct3/c3ObjectUtils/gameUI/scrollbar.ts\");\r\nvar ViewManager = /** @class */ (function () {\r\n    function ViewManager(currentView, views, overlays) {\r\n        this.currentScrollbar = null;\r\n        this.ViewsList = views;\r\n        this.Overlays = overlays !== null && overlays !== void 0 ? overlays : [];\r\n        if (currentView instanceof view_1.View) {\r\n            this.currentView = this.GetView(currentView.ID);\r\n        }\r\n        else {\r\n            this.currentView = this.GetView(currentView);\r\n        }\r\n    }\r\n    Object.defineProperty(ViewManager.prototype, \"CurrentView\", {\r\n        get: function () {\r\n            return this.currentView;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewManager.prototype, \"CurrentScrollbar\", {\r\n        get: function () {\r\n            return this.currentScrollbar;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ViewManager.prototype.GetView = function (id) {\r\n        for (var _i = 0, _a = this.ViewsList; _i < _a.length; _i++) {\r\n            var tab = _a[_i];\r\n            if (tab.ID == id) {\r\n                return tab;\r\n            }\r\n        }\r\n        throw new Error(\"Tab with id/position: '\" + id + \"' was not found!\");\r\n    };\r\n    ViewManager.prototype.SetView = function (id) {\r\n        var _a;\r\n        //todo temp solution\r\n        if (typeof id != \"string\") {\r\n            id = id.ID;\r\n        }\r\n        this.currentView = this.GetView(id);\r\n        this.UpdateCamera();\r\n        if (id.toString() == \"BuildMode\") {\r\n            main_1.Construct3.callFunction(\"ToggleBuildMode\", true);\r\n            game_1.Managers.Fight.UpdateBuildModeInfo();\r\n        }\r\n        else if (id.toString() == \"Menu\") {\r\n            main_1.Construct3.callFunction(\"ToggleBuildMode\", false);\r\n        }\r\n        (_a = this.currentScrollbar) === null || _a === void 0 ? void 0 : _a.Reset();\r\n        //await Construct3.callFunction(\"DoTick\");\r\n        game_1.SmartUIUpdate();\r\n        // UIStorage.GetAllItemsOfType(Scrollbar).forEach((scrollbar) => scrollbar.Reset());\r\n        if (content_1.UIStorage.IsItemOfTypeExists(scrollbar_1.Scrollbar, id)) {\r\n            this.currentScrollbar = content_1.UIStorage.GetItemOfType(scrollbar_1.Scrollbar, id);\r\n        }\r\n        else {\r\n            this.currentScrollbar = null;\r\n        }\r\n    };\r\n    Object.defineProperty(ViewManager.prototype, \"CurrentViewport\", {\r\n        get: function () {\r\n            if (this.CurrentScrollbar) {\r\n                return (new DOMRect(this.CurrentScrollbar.Rect.x, this.CurrentScrollbar.Rect.y, this.CurrentScrollbar.ViewportSize.Width, this.CurrentScrollbar.ViewportSize.Height));\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ViewManager.prototype.UpdateCamera = function () {\r\n        engine_1.Engine.UIManager.SetView(this.currentView.ID.toString(), this.currentView.Position.X, this.currentView.Position.Y);\r\n        for (var _i = 0, _a = this.Overlays; _i < _a.length; _i++) {\r\n            var overlay = _a[_i];\r\n            if (overlay.IsViewConnected(this.currentView)) {\r\n                overlay.MoveToView(this.currentView);\r\n            }\r\n        }\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return view_1.View; })\r\n    ], ViewManager.prototype, \"ViewsList\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return overlay_1.Overlay; })\r\n    ], ViewManager.prototype, \"Overlays\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return view_1.View; })\r\n    ], ViewManager.prototype, \"currentView\", void 0);\r\n    return ViewManager;\r\n}());\r\nexports.ViewManager = ViewManager;\r\n\n\n//# sourceURL=webpack://Game/./src/game/managers/viewManager.ts?");

/***/ }),

/***/ "./src/game/tweak.ts":
/*!***************************!*\
  !*** ./src/game/tweak.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Tweak = exports.TweakPriority = exports.TweakFunctionWithPercent = exports.TweakFunctionDivide = exports.TweakFunctionTimes = exports.TweakFunctionMinus = exports.TweakFunctionPlus = exports.TweakFunction = void 0;\r\nvar valueCalc_1 = __webpack_require__(/*! ../data/math/valueCalc */ \"./src/data/math/valueCalc.ts\");\r\nvar float_1 = __webpack_require__(/*! ../data/math/float */ \"./src/data/math/float.ts\");\r\nvar percent_1 = __webpack_require__(/*! ../data/math/percent */ \"./src/data/math/percent.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\n//todo make separate class for TweakFunctions\r\nvar TweakFunction = /** @class */ (function () {\r\n    function TweakFunction() {\r\n    }\r\n    return TweakFunction;\r\n}());\r\nexports.TweakFunction = TweakFunction;\r\nvar TweakFunctionPlus = /** @class */ (function (_super) {\r\n    __extends(TweakFunctionPlus, _super);\r\n    function TweakFunctionPlus() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.Priority = TweakPriority.PlusOrMinus;\r\n        return _this;\r\n    }\r\n    TweakFunctionPlus.prototype.Get = function (value, tweakValue, _tweak) {\r\n        return float_1.Float.Plus(value, tweakValue);\r\n    };\r\n    return TweakFunctionPlus;\r\n}(TweakFunction));\r\nexports.TweakFunctionPlus = TweakFunctionPlus;\r\nvar TweakFunctionMinus = /** @class */ (function (_super) {\r\n    __extends(TweakFunctionMinus, _super);\r\n    function TweakFunctionMinus() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.Priority = TweakPriority.PlusOrMinus;\r\n        return _this;\r\n    }\r\n    TweakFunctionMinus.prototype.Get = function (value, tweakValue, _tweak) {\r\n        return float_1.Float.Minus(value, tweakValue);\r\n    };\r\n    return TweakFunctionMinus;\r\n}(TweakFunction));\r\nexports.TweakFunctionMinus = TweakFunctionMinus;\r\nvar TweakFunctionTimes = /** @class */ (function (_super) {\r\n    __extends(TweakFunctionTimes, _super);\r\n    function TweakFunctionTimes() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.Priority = TweakPriority.Multiply;\r\n        return _this;\r\n    }\r\n    TweakFunctionTimes.prototype.Get = function (value, tweakValue, _tweak) {\r\n        return float_1.Float.Times(value, tweakValue);\r\n    };\r\n    return TweakFunctionTimes;\r\n}(TweakFunction));\r\nexports.TweakFunctionTimes = TweakFunctionTimes;\r\nvar TweakFunctionDivide = /** @class */ (function (_super) {\r\n    __extends(TweakFunctionDivide, _super);\r\n    function TweakFunctionDivide() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.Priority = TweakPriority.Multiply;\r\n        return _this;\r\n    }\r\n    TweakFunctionDivide.prototype.Get = function (value, tweakValue, _tweak) {\r\n        return float_1.Float.Divide(value, tweakValue);\r\n    };\r\n    return TweakFunctionDivide;\r\n}(TweakFunction));\r\nexports.TweakFunctionDivide = TweakFunctionDivide;\r\nvar TweakFunctionWithPercent = /** @class */ (function () {\r\n    function TweakFunctionWithPercent() {\r\n        this.Priority = TweakPriority.Percent;\r\n    }\r\n    TweakFunctionWithPercent.prototype.Get = function (value, tweakValue, _tweak) {\r\n        return percent_1.Percent.GetValueWithPercent(value, tweakValue);\r\n    };\r\n    return TweakFunctionWithPercent;\r\n}());\r\nexports.TweakFunctionWithPercent = TweakFunctionWithPercent;\r\nvar TweakPriority;\r\n(function (TweakPriority) {\r\n    TweakPriority[TweakPriority[\"PlusOrMinus\"] = 100] = \"PlusOrMinus\";\r\n    TweakPriority[TweakPriority[\"Multiply\"] = 200] = \"Multiply\";\r\n    TweakPriority[TweakPriority[\"Percent\"] = 300] = \"Percent\";\r\n})(TweakPriority = exports.TweakPriority || (exports.TweakPriority = {}));\r\nvar Tweak = /** @class */ (function () {\r\n    function Tweak(id, active, value, step, calc, tweakFunction, targetList) {\r\n        this.ClassID = this.constructor.name;\r\n        this.ID = id;\r\n        this.active = active;\r\n        this.value = new float_1.Float(value);\r\n        this.step = new float_1.Float(step);\r\n        this.Function = tweakFunction;\r\n        this.TargetList = Array.isArray(targetList) ? targetList : [targetList];\r\n        this.calc = calc;\r\n        this.isBought = false;\r\n        this.baseValue = this.value;\r\n        this.baseStep = this.step;\r\n        this.baseActive = this.active;\r\n    }\r\n    Tweak.prototype.Reset = function () {\r\n        this.value = this.baseValue;\r\n        this.step = this.baseStep;\r\n        this.isBought = false;\r\n        this.active = this.baseActive;\r\n    };\r\n    Object.defineProperty(Tweak.prototype, \"IsBought\", {\r\n        get: function () {\r\n            return this.isBought;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Tweak.prototype, \"IsActive\", {\r\n        get: function () {\r\n            return this.active;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Tweak.prototype, \"Value\", {\r\n        get: function () {\r\n            return this.value;\r\n        },\r\n        set: function (value) {\r\n            this.value = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Tweak.prototype, \"Step\", {\r\n        get: function () {\r\n            return this.step;\r\n        },\r\n        set: function (value) {\r\n            this.step = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Tweak.SortTweaks = function (tweaks) {\r\n        return tweaks.sort(this.CompareTweaks);\r\n    };\r\n    Tweak.CompareTweaks = function (tweak1, tweak2) {\r\n        return tweak1.Function.Priority - tweak2.Function.Priority;\r\n    };\r\n    /**\r\n     * @param relativeLevel For example, level = 2 returns next value\r\n     * @constructor\r\n     */\r\n    Tweak.prototype.GetValueOnLevel = function (relativeLevel) {\r\n        return this.calc.GetElement(this.value, this.step, relativeLevel);\r\n    };\r\n    Tweak.prototype.GetCopyWithValue = function (value) {\r\n        return new Tweak(this.ID, this.active, value, this.step, this.calc, this.Function, this.TargetList);\r\n    };\r\n    Tweak.prototype.Toggle = function (active) {\r\n        this.active = active;\r\n    };\r\n    Tweak.prototype.Upgrade = function (count) {\r\n        count = new float_1.Float(count);\r\n        if (!this.isBought) {\r\n            if (count.IsEqual(1)) {\r\n                this.isBought = true;\r\n            }\r\n            else {\r\n                this.isBought = true;\r\n                this.Upgrade(count.Minus(1));\r\n            }\r\n        }\r\n        else {\r\n            this.value = this.calc.GetElement(this.value, this.Step, count.Plus(1));\r\n        }\r\n        this.AddOrUpdateToGameData();\r\n    };\r\n    Tweak.prototype.AddOrUpdateToGameData = function () {\r\n        for (var _i = 0, _a = this.TargetList; _i < _a.length; _i++) {\r\n            var gameData = _a[_i];\r\n            gameData.AddOrUpdateTweak(this, true);\r\n        }\r\n    };\r\n    Tweak.prototype.CalculateValue = function (value) {\r\n        return this.Function.Get(value, this.value, this);\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return TweakFunction; })\r\n    ], Tweak.prototype, \"Function\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Exclude()\r\n    ], Tweak.prototype, \"TargetList\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], Tweak.prototype, \"value\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], Tweak.prototype, \"step\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return valueCalc_1.ValueCalc; })\r\n    ], Tweak.prototype, \"calc\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], Tweak.prototype, \"baseValue\", void 0);\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return float_1.Float; })\r\n    ], Tweak.prototype, \"baseStep\", void 0);\r\n    return Tweak;\r\n}());\r\nexports.Tweak = Tweak;\r\n\n\n//# sourceURL=webpack://Game/./src/game/tweak.ts?");

/***/ }),

/***/ "./src/game/tweakArray.ts":
/*!********************************!*\
  !*** ./src/game/tweakArray.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TweakArray = void 0;\r\nvar tweak_1 = __webpack_require__(/*! ./tweak */ \"./src/game/tweak.ts\");\r\nvar float_1 = __webpack_require__(/*! ../data/math/float */ \"./src/data/math/float.ts\");\r\nvar class_transformer_1 = __webpack_require__(/*! class-transformer */ \"./node_modules/class-transformer/index.js\");\r\nvar TweakArray = /** @class */ (function () {\r\n    function TweakArray(tweaks) {\r\n        this.classID = this.constructor.name;\r\n        this.tweaks = (tweaks != undefined ? (Array.isArray(tweaks) ? tweaks : [tweaks]) : []);\r\n    }\r\n    TweakArray.prototype.Reset = function () {\r\n        for (var _i = 0, _a = this.tweaks; _i < _a.length; _i++) {\r\n            var tweak = _a[_i];\r\n            tweak.Reset();\r\n            tweak.AddOrUpdateToGameData();\r\n        }\r\n    };\r\n    Object.defineProperty(TweakArray.prototype, \"Length\", {\r\n        get: function () {\r\n            return this.Items.length;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TweakArray.prototype, \"Items\", {\r\n        get: function () {\r\n            return this.tweaks;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    TweakArray.prototype.Upgrade = function (count) {\r\n        count = new float_1.Float(count);\r\n        for (var _i = 0, _a = this.Items; _i < _a.length; _i++) {\r\n            var tweak = _a[_i];\r\n            tweak.Upgrade(count);\r\n        }\r\n    };\r\n    TweakArray.prototype.AddOrUpdateToGameData = function () {\r\n        for (var _i = 0, _a = this.Items; _i < _a.length; _i++) {\r\n            var tweak = _a[_i];\r\n            tweak.AddOrUpdateToGameData();\r\n        }\r\n    };\r\n    TweakArray.prototype.Toggle = function (enabled) {\r\n        for (var _i = 0, _a = this.Items; _i < _a.length; _i++) {\r\n            var tweak = _a[_i];\r\n            tweak.Toggle(enabled);\r\n        }\r\n    };\r\n    TweakArray.prototype.GetTweak = function (idOrTweak) {\r\n        var id = idOrTweak instanceof tweak_1.Tweak ? idOrTweak.ID : idOrTweak;\r\n        for (var i = 0; i < this.Items.length; i++) {\r\n            var tweak = this.Items[i];\r\n            if (tweak.ID === id) {\r\n                return tweak;\r\n            }\r\n        }\r\n        throw new Error(\"Tweak '\" + id + \"' was not found\");\r\n    };\r\n    TweakArray.prototype.HasTweak = function (idOrTweak) {\r\n        var id = idOrTweak instanceof tweak_1.Tweak ? idOrTweak.ID : idOrTweak;\r\n        for (var i = 0; i < this.Items.length; i++) {\r\n            var tweak = this.Items[i];\r\n            if (tweak.ID === id) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    TweakArray.prototype.SortTweaks = function () {\r\n        this.tweaks = tweak_1.Tweak.SortTweaks(this.tweaks);\r\n    };\r\n    TweakArray.prototype.Remove = function (idOrTweak) {\r\n        var id = idOrTweak instanceof tweak_1.Tweak ? idOrTweak.ID : idOrTweak;\r\n        for (var i = 0; i < this.Length; i++) {\r\n            if (this.tweaks[i].ID == id) {\r\n                this.tweaks.splice(i, 1);\r\n            }\r\n        }\r\n        throw new Error(\"Tweak '\" + id + \"' was not found\");\r\n    };\r\n    __decorate([\r\n        class_transformer_1.Type(function () { return tweak_1.Tweak; })\r\n    ], TweakArray.prototype, \"tweaks\", void 0);\r\n    return TweakArray;\r\n}());\r\nexports.TweakArray = TweakArray;\r\n\n\n//# sourceURL=webpack://Game/./src/game/tweakArray.ts?");

/***/ }),

/***/ "./src/input/inputHandlers.ts":
/*!************************************!*\
  !*** ./src/input/inputHandlers.ts ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IsCanAccessUIObject = exports.IsCanAccessInput = exports.ToggleMonster = exports.UpdateMonsterToggle = exports.SetOption = exports.BuyUpgrade = exports.SetView = exports.OnCheckboxClicked = exports.OnSliderValueChanged = exports.Action = exports.OnScrollbarMoving = exports.IsScrollBarActive = exports.OnSelectorClicked = exports.OnButtonClicked = void 0;\r\nvar content_1 = __webpack_require__(/*! ../content/content */ \"./src/content/content.ts\");\r\nvar engine_1 = __webpack_require__(/*! ../../javascript/construct3/engine */ \"./javascript/construct3/engine.ts\");\r\nvar game_1 = __webpack_require__(/*! ../game */ \"./src/game.ts\");\r\nvar slotGameLoadInfo_1 = __webpack_require__(/*! ../game/managers/saveSystem/slotGameLoadInfo */ \"./src/game/managers/saveSystem/slotGameLoadInfo.ts\");\r\nvar gameSave_1 = __webpack_require__(/*! ../game/managers/saveSystem/gameSave */ \"./src/game/managers/saveSystem/gameSave.ts\");\r\nvar gameLoadManager_1 = __webpack_require__(/*! ../game/managers/gameLoadManager */ \"./src/game/managers/gameLoadManager.ts\");\r\nvar scrollbar_1 = __webpack_require__(/*! ../../javascript/construct3/c3ObjectUtils/gameUI/scrollbar */ \"./javascript/construct3/c3ObjectUtils/gameUI/scrollbar.ts\");\r\nvar utilsMath_1 = __webpack_require__(/*! ../utils/utilsMath */ \"./src/utils/utilsMath.ts\");\r\nvar buildManager_1 = __webpack_require__(/*! ../game/managers/buildManager */ \"./src/game/managers/buildManager.ts\");\r\nvar utilsGUI_1 = __webpack_require__(/*! ../../javascript/construct3/c3ObjectUtils/utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar overlayMessage_1 = __webpack_require__(/*! ../ui/overlayMessage */ \"./src/ui/overlayMessage.ts\");\r\nvar indicatorsGUI_1 = __webpack_require__(/*! ../ui/gui-update/indicatorsGUI */ \"./src/ui/gui-update/indicatorsGUI.ts\");\r\nvar monster_1 = __webpack_require__(/*! ../game/fighting/monster */ \"./src/game/fighting/monster.ts\");\r\nfunction OnButtonClicked(path) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var pathParts, action, params, _a;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    pathParts = path.split('::');\r\n                    action = pathParts[0];\r\n                    params = pathParts.slice(1);\r\n                    game_1.SmartUIUpdate();\r\n                    _a = action;\r\n                    switch (_a) {\r\n                        case 'action': return [3 /*break*/, 1];\r\n                        case \"buyUpgrade\": return [3 /*break*/, 3];\r\n                        case 'setOption': return [3 /*break*/, 4];\r\n                        case \"setView\": return [3 /*break*/, 5];\r\n                        case \"ToggleMonster\": return [3 /*break*/, 6];\r\n                    }\r\n                    return [3 /*break*/, 7];\r\n                case 1: return [4 /*yield*/, Action(params)];\r\n                case 2:\r\n                    _b.sent();\r\n                    return [3 /*break*/, 8];\r\n                case 3:\r\n                    {\r\n                        BuyUpgrade(params);\r\n                        return [3 /*break*/, 8];\r\n                    }\r\n                    _b.label = 4;\r\n                case 4:\r\n                    {\r\n                        SetOption(params);\r\n                        return [3 /*break*/, 8];\r\n                    }\r\n                    _b.label = 5;\r\n                case 5:\r\n                    {\r\n                        SetView(params);\r\n                        return [3 /*break*/, 8];\r\n                    }\r\n                    _b.label = 6;\r\n                case 6:\r\n                    {\r\n                        ToggleMonster(params[0]);\r\n                        return [3 /*break*/, 8];\r\n                    }\r\n                    _b.label = 7;\r\n                case 7:\r\n                    {\r\n                        throw new Error(\"Action not found: \" + action);\r\n                    }\r\n                    _b.label = 8;\r\n                case 8: return [4 /*yield*/, game_1.Construct3.callFunction(\"DoTick\")];\r\n                case 9:\r\n                    _b.sent();\r\n                    game_1.SmartUIUpdate();\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.OnButtonClicked = OnButtonClicked;\r\nfunction OnSelectorClicked(section, id) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var _a, menu, selectorSection, _b, subMenuID, subMenuID, subMenuID, value;\r\n        return __generator(this, function (_c) {\r\n            switch (_c.label) {\r\n                case 0:\r\n                    game_1.SmartUIUpdate();\r\n                    _a = section;\r\n                    switch (_a) {\r\n                        case 'View': return [3 /*break*/, 1];\r\n                        case 'Rebirth.Menu': return [3 /*break*/, 2];\r\n                        case \"Rebirth.Monsters\": return [3 /*break*/, 11];\r\n                        case \"Rebirth.Turrets\": return [3 /*break*/, 12];\r\n                        case \"Rebirth.Buildings\": return [3 /*break*/, 13];\r\n                        case 'Monster': return [3 /*break*/, 14];\r\n                        case 'Turret': return [3 /*break*/, 15];\r\n                        case 'Building': return [3 /*break*/, 16];\r\n                        case 'BuyCount': return [3 /*break*/, 17];\r\n                        case \"BuildModeBuilding\": return [3 /*break*/, 18];\r\n                    }\r\n                    return [3 /*break*/, 19];\r\n                case 1:\r\n                    {\r\n                        content_1.Managers.Views.SetView(id);\r\n                        return [3 /*break*/, 20];\r\n                    }\r\n                    _c.label = 2;\r\n                case 2:\r\n                    menu = id;\r\n                    content_1.Managers.Fight.Rebirth.CurrentMenu = id;\r\n                    selectorSection = \"Rebirth.\" + menu;\r\n                    _b = menu;\r\n                    switch (_b) {\r\n                        case \"Main\": return [3 /*break*/, 3];\r\n                        case \"Monsters\": return [3 /*break*/, 4];\r\n                        case \"Turrets\": return [3 /*break*/, 6];\r\n                        case \"Buildings\": return [3 /*break*/, 8];\r\n                    }\r\n                    return [3 /*break*/, 10];\r\n                case 3:\r\n                    {\r\n                        indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Main\", false);\r\n                        indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Monsters\", true);\r\n                        indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Turrets\", true);\r\n                        if (content_1.Content.Buildings.Spikes.System.IsEverUnlocked)\r\n                            indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Buildings\", true);\r\n                        content_1.Managers.Views.SetView(\"Rebirth.Main\");\r\n                        return [3 /*break*/, 10];\r\n                    }\r\n                    _c.label = 4;\r\n                case 4:\r\n                    indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Main\", true);\r\n                    indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Monsters\", false);\r\n                    indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Turrets\", true);\r\n                    if (content_1.Content.Buildings.Spikes.System.IsEverUnlocked)\r\n                        indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Buildings\", true);\r\n                    return [4 /*yield*/, OnSelectorClicked(selectorSection, content_1.Managers.Fight.Rebirth.CurrentMonstersMenu)];\r\n                case 5:\r\n                    _c.sent();\r\n                    return [3 /*break*/, 10];\r\n                case 6:\r\n                    indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Main\", true);\r\n                    indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Monsters\", true);\r\n                    indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Turrets\", false);\r\n                    if (content_1.Content.Buildings.Spikes.System.IsEverUnlocked)\r\n                        indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Buildings\", true);\r\n                    return [4 /*yield*/, OnSelectorClicked(selectorSection, content_1.Managers.Fight.Rebirth.CurrentTurretsMenu)];\r\n                case 7:\r\n                    _c.sent();\r\n                    return [3 /*break*/, 10];\r\n                case 8:\r\n                    indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Main\", true);\r\n                    indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Monsters\", true);\r\n                    indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Turrets\", true);\r\n                    if (content_1.Content.Buildings.Spikes.System.IsEverUnlocked)\r\n                        indicatorsGUI_1.SetIndicatorVisible(\"canBuyIndicator::Rebirth.Buildings\", false);\r\n                    return [4 /*yield*/, OnSelectorClicked(selectorSection, content_1.Managers.Fight.Rebirth.CurrentBuildingsMenu)];\r\n                case 9:\r\n                    _c.sent();\r\n                    return [3 /*break*/, 10];\r\n                case 10: return [3 /*break*/, 20];\r\n                case 11:\r\n                    {\r\n                        subMenuID = \"Rebirth.\" + id;\r\n                        content_1.Managers.Fight.Rebirth.CurrentMonstersMenu = id;\r\n                        ;\r\n                        content_1.Managers.Views.SetView(subMenuID);\r\n                        return [3 /*break*/, 20];\r\n                    }\r\n                    _c.label = 12;\r\n                case 12:\r\n                    {\r\n                        subMenuID = \"Rebirth.\" + id;\r\n                        content_1.Managers.Fight.Rebirth.CurrentTurretsMenu = id;\r\n                        content_1.Managers.Views.SetView(subMenuID);\r\n                        return [3 /*break*/, 20];\r\n                    }\r\n                    _c.label = 13;\r\n                case 13:\r\n                    {\r\n                        subMenuID = \"Rebirth.\" + id;\r\n                        content_1.Managers.Fight.Rebirth.CurrentBuildingsMenu = id;\r\n                        content_1.Managers.Views.SetView(subMenuID);\r\n                        return [3 /*break*/, 20];\r\n                    }\r\n                    _c.label = 14;\r\n                case 14:\r\n                    {\r\n                        content_1.Managers.Fight.CurrentMonsterView = id;\r\n                        content_1.Managers.Views.SetView(id);\r\n                        return [3 /*break*/, 20];\r\n                    }\r\n                    _c.label = 15;\r\n                case 15:\r\n                    {\r\n                        content_1.Managers.Fight.CurrentTurretView = id;\r\n                        content_1.Managers.Views.SetView(id);\r\n                        return [3 /*break*/, 20];\r\n                    }\r\n                    _c.label = 16;\r\n                case 16:\r\n                    {\r\n                        content_1.Managers.Fight.CurrentBuildingView = id;\r\n                        content_1.Managers.Views.SetView(id);\r\n                        return [3 /*break*/, 20];\r\n                    }\r\n                    _c.label = 17;\r\n                case 17:\r\n                    {\r\n                        value = utilsMath_1.IsNumber(id) ? parseFloat(id) : id;\r\n                        content_1.Content.Settings.System.BuyCount.Value = value;\r\n                        return [3 /*break*/, 20];\r\n                    }\r\n                    _c.label = 18;\r\n                case 18:\r\n                    {\r\n                        //todo BuildInfo with Name and Type\r\n                        content_1.Managers.Build.CurrentBuilding = content_1.ContentStorage.GetItemOfType(buildManager_1.BuildInfo, \"BuildInfo::\" + id);\r\n                        return [3 /*break*/, 20];\r\n                    }\r\n                    _c.label = 19;\r\n                case 19:\r\n                    {\r\n                        throw new Error(\"Selector section '\" + section + \"' was not found\");\r\n                    }\r\n                    _c.label = 20;\r\n                case 20: return [4 /*yield*/, game_1.Construct3.callFunction(\"DoTick\")];\r\n                case 21:\r\n                    _c.sent();\r\n                    game_1.SmartUIUpdate();\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.OnSelectorClicked = OnSelectorClicked;\r\nfunction IsScrollBarActive(id) {\r\n    return id == content_1.Managers.Views.CurrentView.ID;\r\n}\r\nexports.IsScrollBarActive = IsScrollBarActive;\r\nfunction OnScrollbarMoving(id) {\r\n    //todo ui storage maybe (yeah, should be)\r\n    var scrollbar = content_1.UIStorage.GetItemOfType(scrollbar_1.Scrollbar, id);\r\n    if (scrollbar) {\r\n        if (scrollbar.ID == content_1.Managers.Views.CurrentView.ID) {\r\n            scrollbar.Update();\r\n        }\r\n    }\r\n    else {\r\n        throw new Error(\"Scrollbar '\" + id + \"' was not found\");\r\n    }\r\n}\r\nexports.OnScrollbarMoving = OnScrollbarMoving;\r\nfunction Action(params) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var name, _a, Reset, text, input, saveString, e_1, slotName, saveString;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    name = params[0];\r\n                    _a = name;\r\n                    switch (_a) {\r\n                        case \"OverlayMessageButton\": return [3 /*break*/, 1];\r\n                        case \"OpenRebirthUpgrades\": return [3 /*break*/, 2];\r\n                        case \"OpenMonsterUpgrades\": return [3 /*break*/, 3];\r\n                        case \"OpenTurretUpgrades\": return [3 /*break*/, 4];\r\n                        case \"OpenBuildingUpgrades\": return [3 /*break*/, 5];\r\n                        case \"Reset\": return [3 /*break*/, 6];\r\n                        case \"TryToLoadAgainOnError\": return [3 /*break*/, 7];\r\n                        case \"StartNewGameOnError\": return [3 /*break*/, 8];\r\n                        case \"OnManualLoadFailed\": return [3 /*break*/, 9];\r\n                        case \"OnError\": return [3 /*break*/, 10];\r\n                        case \"Save\": return [3 /*break*/, 11];\r\n                        case \"Load\": return [3 /*break*/, 13];\r\n                        case \"LoadGameFromFile\": return [3 /*break*/, 14];\r\n                        case \"LoadGameFromString\": return [3 /*break*/, 15];\r\n                        case \"SaveToClipboard\": return [3 /*break*/, 16];\r\n                        case \"SaveToFile\": return [3 /*break*/, 22];\r\n                        case 'ToggleFullscreen': return [3 /*break*/, 24];\r\n                        case 'Rebirth': return [3 /*break*/, 25];\r\n                    }\r\n                    return [3 /*break*/, 26];\r\n                case 1:\r\n                    {\r\n                        if (overlayMessage_1.CurrentOverlayMessageInfo) {\r\n                            if (overlayMessage_1.CurrentOverlayMessageInfo.Button) {\r\n                                overlayMessage_1.HideOverlayMessage();\r\n                                if (overlayMessage_1.CurrentOverlayMessageInfo.Button.Action)\r\n                                    overlayMessage_1.CurrentOverlayMessageInfo.Button.Action();\r\n                                overlayMessage_1.ResetCurrentOverlayMessage();\r\n                            }\r\n                            else {\r\n                                throw new Error(\"Action for overlay message was not set\");\r\n                            }\r\n                        }\r\n                        else {\r\n                            throw new Error('Overlay message info was not set');\r\n                        }\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 2;\r\n                case 2:\r\n                    {\r\n                        utilsGUI_1.ToggleSelector(\"Rebirth.Menu\", content_1.Managers.Fight.Rebirth.CurrentMenu);\r\n                        switch (content_1.Managers.Fight.Rebirth.LastSubMenu) {\r\n                            case \"Main\": {\r\n                                break;\r\n                            }\r\n                            case \"Monsters\": {\r\n                                utilsGUI_1.ToggleSelector(\"Rebirth.Monsters\", content_1.Managers.Fight.Rebirth.CurrentMonstersMenu);\r\n                                break;\r\n                            }\r\n                            case \"Turrets\": {\r\n                                utilsGUI_1.ToggleSelector(\"Rebirth.Turrets\", content_1.Managers.Fight.Rebirth.CurrentTurretsMenu);\r\n                                break;\r\n                            }\r\n                        }\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 3;\r\n                case 3:\r\n                    {\r\n                        utilsGUI_1.ToggleSelector(\"Monster\", content_1.Managers.Fight.CurrentMonsterView);\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 4;\r\n                case 4:\r\n                    {\r\n                        utilsGUI_1.ToggleSelector(\"Turret\", content_1.Managers.Fight.CurrentTurretView);\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 5;\r\n                case 5:\r\n                    {\r\n                        utilsGUI_1.ToggleSelector(\"Building\", content_1.Managers.Fight.CurrentBuildingView);\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 6;\r\n                case 6:\r\n                    {\r\n                        Reset = function () {\r\n                            game_1.SaveManager.SkipNextLoad();\r\n                            game_1.SaveManager.RestartToLoad();\r\n                            console.log(\"[Action::Reset] finished\");\r\n                        };\r\n                        if (game_1.BUILD_MODE == \"Preview\") {\r\n                            Reset();\r\n                        }\r\n                        else {\r\n                            text = \"I want to reset my save\";\r\n                            input = prompt(\"Write \\\"\" + text + \"\\\" in the input field to confirm the full reset\");\r\n                            if (input == text) {\r\n                                alert(\"Okay, you've confirmed your wish! Game will be reset\");\r\n                                Reset();\r\n                            }\r\n                            else {\r\n                                alert(\"You entered the text incorrectly\");\r\n                            }\r\n                        }\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 7;\r\n                case 7:\r\n                    {\r\n                        content_1.SystemData.IsGameCrashed = false;\r\n                        game_1.Construct3.callFunction(\"ToggleAutoLoadErrorScreen\", false);\r\n                        game_1.SaveManager.SetLoadGame(gameLoadManager_1.LoadType.Auto, game_1.SaveManager.LastLoadInfo);\r\n                        game_1.SaveManager.RestartToLoad();\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 8;\r\n                case 8:\r\n                    {\r\n                        content_1.SystemData.IsGameCrashed = false;\r\n                        game_1.Construct3.callFunction(\"ToggleAutoLoadErrorScreen\", false);\r\n                        game_1.SaveManager.SkipNextLoad();\r\n                        game_1.SaveManager.RestartToLoad();\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 9;\r\n                case 9:\r\n                    {\r\n                        content_1.SystemData.IsGameCrashed = false;\r\n                        game_1.Construct3.callFunction(\"ToggleManualLoadErrorScreen\", false);\r\n                        game_1.SaveManager.SetLoadGame(gameLoadManager_1.LoadType.Auto, new slotGameLoadInfo_1.SlotGameLoadInfo(\"Save1\", true));\r\n                        game_1.SaveManager.RestartToLoad();\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 10;\r\n                case 10:\r\n                    {\r\n                        content_1.SystemData.IsGameCrashed = false;\r\n                        game_1.Construct3.callFunction(\"ToggleErrorScreen\", false);\r\n                        game_1.SaveManager.SkipNextLoad();\r\n                        game_1.SaveManager.RestartToLoad();\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 11;\r\n                case 11: return [4 /*yield*/, gameSave_1.SaveGame()];\r\n                case 12:\r\n                    _b.sent();\r\n                    return [3 /*break*/, 27];\r\n                case 13:\r\n                    {\r\n                        game_1.SaveManager.SetLoadGame(gameLoadManager_1.LoadType.Auto, new slotGameLoadInfo_1.SlotGameLoadInfo(\"Save1\", true));\r\n                        game_1.SaveManager.RestartToLoad();\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 14;\r\n                case 14:\r\n                    {\r\n                        game_1.Construct3.callFunction(\"LoadGameFromFile\");\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 15;\r\n                case 15:\r\n                    {\r\n                        game_1.Construct3.callFunction(\"LoadGameFromString\");\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 16;\r\n                case 16: return [4 /*yield*/, gameSave_1.GetCurrentSaveString()];\r\n                case 17:\r\n                    saveString = _b.sent();\r\n                    _b.label = 18;\r\n                case 18:\r\n                    _b.trys.push([18, 20, , 21]);\r\n                    return [4 /*yield*/, navigator.clipboard.writeText(saveString)];\r\n                case 19:\r\n                    _b.sent();\r\n                    alert(\"Successfully copied \" + saveString.length + \" characters to clipboard!\");\r\n                    return [3 /*break*/, 21];\r\n                case 20:\r\n                    e_1 = _b.sent();\r\n                    alert(\"An error occurred while trying to save text to the clipboard: '\" + e_1 + \"' \\nIf the problem persists, save it as a file and copy the text from the file.\");\r\n                    return [3 /*break*/, 21];\r\n                case 21: return [3 /*break*/, 27];\r\n                case 22:\r\n                    slotName = \"Save1\";\r\n                    return [4 /*yield*/, gameSave_1.GetCurrentSaveString()];\r\n                case 23:\r\n                    saveString = _b.sent();\r\n                    //todo date & time\r\n                    //todo version\r\n                    game_1.Construct3.callFunction(\"SaveToFile\", \"monsters_and_turrets_idle__slot_\" + slotName + \".txt\", saveString);\r\n                    //\r\n                    return [3 /*break*/, 27];\r\n                case 24:\r\n                    {\r\n                        engine_1.Engine.ToggleFullscreen();\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 25;\r\n                case 25:\r\n                    {\r\n                        content_1.Content.Rebirth.Activate();\r\n                        return [3 /*break*/, 27];\r\n                    }\r\n                    _b.label = 26;\r\n                case 26:\r\n                    {\r\n                        throw new Error(\"Action '\" + name + \"' was not found!\");\r\n                    }\r\n                    _b.label = 27;\r\n                case 27: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.Action = Action;\r\nfunction OnSliderValueChanged(name, value) {\r\n    switch (name) {\r\n        case \"MusicVolume\": {\r\n            content_1.Content.Settings.Audio.MusicVolume.Value = value;\r\n            break;\r\n        }\r\n        case \"SoundVolume\": {\r\n            content_1.Content.Settings.Audio.SoundVolume.Value = value;\r\n            break;\r\n        }\r\n    }\r\n}\r\nexports.OnSliderValueChanged = OnSliderValueChanged;\r\nfunction OnCheckboxClicked(id, enabled) {\r\n    switch (id) {\r\n        case \"CustomCursor\": {\r\n            //todo temp decisiton here, do a better system; (OnCheckBoxToggled)\r\n            content_1.Content.Settings.System.CustomCursor.Value = enabled;\r\n            game_1.Construct3.callFunction(\"ToggleCustomCursor\", enabled);\r\n            break;\r\n        }\r\n    }\r\n}\r\nexports.OnCheckboxClicked = OnCheckboxClicked;\r\nfunction SetView(params) {\r\n    var viewID = params[0];\r\n    content_1.Managers.Views.SetView(viewID);\r\n}\r\nexports.SetView = SetView;\r\nfunction BuyUpgrade(params) {\r\n    var name = params[0];\r\n    content_1.ContentStorage.GetItem(name).Buy();\r\n}\r\nexports.BuyUpgrade = BuyUpgrade;\r\nfunction SetOption(params) {\r\n    if (Array.isArray(params)) {\r\n        var name_1 = params[0];\r\n        content_1.ContentStorage.GetItem(name_1).Value = params[1];\r\n    }\r\n    else {\r\n        content_1.ContentStorage.GetItem(params.ID).Value = params.Value;\r\n    }\r\n    game_1.SmartUIUpdate();\r\n}\r\nexports.SetOption = SetOption;\r\nfunction UpdateMonsterToggle(monsterID, enabled) {\r\n    var id = \"ToggleMonster::\" + monsterID;\r\n    if (enabled) {\r\n        utilsGUI_1.SetText(id, \"Enabled\");\r\n        utilsGUI_1.SetButtonColor(id, utilsMath_1.HexToRGB255(\"5dac5f\"));\r\n    }\r\n    else {\r\n        utilsGUI_1.SetText(id, \"Disabled\");\r\n        utilsGUI_1.SetButtonColor(id, utilsMath_1.HexToRGB255(\"ac5d5d\"));\r\n    }\r\n}\r\nexports.UpdateMonsterToggle = UpdateMonsterToggle;\r\n//todo продебажить установку цвета кнопки в нотифаях\r\nfunction ToggleMonster(monsterID) {\r\n    var monster = content_1.ContentStorage.GetItemOfType(monster_1.Monster, monsterID).GetContent();\r\n    monster.System.IsEnabled.Value = !monster.System.IsEnabled.Value;\r\n    UpdateMonsterToggle(monsterID, monster.System.IsEnabled.Value);\r\n}\r\nexports.ToggleMonster = ToggleMonster;\r\nfunction IsCanAccessInput() {\r\n    return !content_1.SystemData.IsShowingOverlay;\r\n}\r\nexports.IsCanAccessInput = IsCanAccessInput;\r\nfunction IsCanAccessUIObject(object) {\r\n    var isViewportFine;\r\n    if (object.c_isConnectedToScrollBar) {\r\n        isViewportFine = utilsGUI_1.IsPositionInViewport({ X: object.x, Y: object.y });\r\n    }\r\n    else {\r\n        isViewportFine = true;\r\n    }\r\n    var isOverlayFine;\r\n    if (content_1.SystemData.IsShowingOverlay) {\r\n        isOverlayFine = object.instVars.theme == content_1.SystemData.CurrentOverlay.InputTheme;\r\n    }\r\n    else {\r\n        isOverlayFine = true;\r\n    }\r\n    return (isViewportFine && isOverlayFine);\r\n}\r\nexports.IsCanAccessUIObject = IsCanAccessUIObject;\r\n\n\n//# sourceURL=webpack://Game/./src/input/inputHandlers.ts?");

/***/ }),

/***/ "./src/testing/test.ts":
/*!*****************************!*\
  !*** ./src/testing/test.ts ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Test = void 0;\r\nvar testResult_1 = __webpack_require__(/*! ./testResult */ \"./src/testing/testResult.ts\");\r\nvar Test = /** @class */ (function () {\r\n    function Test(id, description, rightResult, checkFunction) {\r\n        this.ID = id;\r\n        this.ClassID = this.constructor.name;\r\n        this.description = description;\r\n        this.rightResult = rightResult;\r\n        this.checkFunction = checkFunction;\r\n    }\r\n    Test.prototype.Description = function () {\r\n        return this.description;\r\n    };\r\n    Test.prototype.RightResult = function () {\r\n        return this.rightResult;\r\n    };\r\n    Test.prototype.Check = function () {\r\n        try {\r\n            var result = this.checkFunction();\r\n            if (result == this.rightResult) {\r\n                return new testResult_1.TestResult(result, this.rightResult, true);\r\n            }\r\n            else {\r\n                return new testResult_1.TestResult(result, this.rightResult, false);\r\n            }\r\n        }\r\n        catch (error) {\r\n            return error;\r\n        }\r\n    };\r\n    return Test;\r\n}());\r\nexports.Test = Test;\r\n\n\n//# sourceURL=webpack://Game/./src/testing/test.ts?");

/***/ }),

/***/ "./src/testing/testManager.ts":
/*!************************************!*\
  !*** ./src/testing/testManager.ts ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TestManager = void 0;\r\nvar objectStorage_1 = __webpack_require__(/*! ../data/objectStorage */ \"./src/data/objectStorage.ts\");\r\nvar TestManager = /** @class */ (function (_super) {\r\n    __extends(TestManager, _super);\r\n    function TestManager(ModuleName, tests) {\r\n        var _this = _super.call(this, tests) || this;\r\n        _this.ModuleName = ModuleName;\r\n        return _this;\r\n    }\r\n    TestManager.prototype.CheckAll = function (detailedLog, showOnlyFailed, showStartingInfo) {\r\n        if (detailedLog === void 0) { detailedLog = false; }\r\n        if (showOnlyFailed === void 0) { showOnlyFailed = false; }\r\n        if (showStartingInfo === void 0) { showStartingInfo = false; }\r\n        var testsPassed = 0;\r\n        var startTime = performance.now();\r\n        if (showStartingInfo) {\r\n            console.log(\"TestModule: '\" + this.ModuleName + \"'\\nTesting started for \" + this.Items.length + \" items..\");\r\n        }\r\n        var i = 1;\r\n        for (var _i = 0, _a = this.Items; _i < _a.length; _i++) {\r\n            var test = _a[_i];\r\n            var result = test.Check();\r\n            if (result instanceof Error) {\r\n                if (detailedLog) {\r\n                    console.log(i + \". \" + test.Description() + \": %cERROR! \\n > Error message: \" + result.message, 'color: #ff4db8');\r\n                    throw result;\r\n                }\r\n            }\r\n            else {\r\n                var testResult = result;\r\n                if (testResult.IsPassed) {\r\n                    testsPassed++;\r\n                    if (!showOnlyFailed) {\r\n                        console.log(i + \". \" + test.Description() + \": %cPASSED!\", 'color: #42a828');\r\n                    }\r\n                }\r\n                else {\r\n                    console.log(i + \". \" + test.Description() + \": %cFAILED!\"\r\n                        + (\"\\n > Right result: \" + test.RightResult())\r\n                        + (\"\\n > Result: \" + testResult.Result), \"color: #ff4d4d\");\r\n                }\r\n            }\r\n            i++;\r\n        }\r\n        var elapsedTime = performance.now() - startTime;\r\n        var allPassed = testsPassed == this.Items.length;\r\n        console.log(\"%cTestModule '\" + this.ModuleName + \"' checking completed!\"\r\n            + (\"\\nTests passed: \" + testsPassed + \" / \" + this.Items.length)\r\n            + (\"\\nElapsed time: \" + Math.floor(elapsedTime) + \" ms.\"), \"color:\" + (allPassed ? '#42a828' : '#ff4d4d'));\r\n    };\r\n    return TestManager;\r\n}(objectStorage_1.ObjectStorage));\r\nexports.TestManager = TestManager;\r\n\n\n//# sourceURL=webpack://Game/./src/testing/testManager.ts?");

/***/ }),

/***/ "./src/testing/testResult.ts":
/*!***********************************!*\
  !*** ./src/testing/testResult.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TestResult = void 0;\r\nvar TestResult = /** @class */ (function () {\r\n    function TestResult(Result, RightResult, //todo idk should i give right result or not\r\n    IsPassed) {\r\n        this.Result = Result;\r\n        this.RightResult = RightResult;\r\n        this.IsPassed = IsPassed;\r\n    }\r\n    return TestResult;\r\n}());\r\nexports.TestResult = TestResult;\r\n\n\n//# sourceURL=webpack://Game/./src/testing/testResult.ts?");

/***/ }),

/***/ "./src/testing/tests/basicTests.ts":
/*!*****************************************!*\
  !*** ./src/testing/tests/basicTests.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StartTesting = void 0;\r\nvar random_js_1 = __webpack_require__(/*! random-js */ \"./node_modules/random-js/dist/random-js.esm.js\");\r\nvar setting_1 = __webpack_require__(/*! ../../game/gameObjects/setting */ \"./src/game/gameObjects/setting.ts\");\r\nvar calcTests_1 = __webpack_require__(/*! ./testModules/calcTests */ \"./src/testing/tests/testModules/calcTests.ts\");\r\nvar statTests_1 = __webpack_require__(/*! ./testModules/statTests */ \"./src/testing/tests/testModules/statTests.ts\");\r\nvar walletTests_1 = __webpack_require__(/*! ./testModules/walletTests */ \"./src/testing/tests/testModules/walletTests.ts\");\r\nvar upgradeTests_1 = __webpack_require__(/*! ./testModules/upgradeTests */ \"./src/testing/tests/testModules/upgradeTests.ts\");\r\nvar tweakTests_1 = __webpack_require__(/*! ./testModules/tweakTests */ \"./src/testing/tests/testModules/tweakTests.ts\");\r\nvar upgradeGUITests_1 = __webpack_require__(/*! ./testModules/upgradeGUITests */ \"./src/testing/tests/testModules/upgradeGUITests.ts\");\r\nfunction StartTesting() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var randomEngine, random, totalTests, detailedLog, onlyFailed, startingInfo, buyCount, context, calcTests, statTests, walletTests, upgradeTests, tweakTests, upgradeGUITests;\r\n        return __generator(this, function (_a) {\r\n            randomEngine = random_js_1.MersenneTwister19937.autoSeed();\r\n            random = new random_js_1.Random(randomEngine);\r\n            totalTests = 0;\r\n            detailedLog = true;\r\n            onlyFailed = true;\r\n            startingInfo = false;\r\n            buyCount = new setting_1.Setting(null, \"BuyCount\", 1, new setting_1.ArrayValidator([1]));\r\n            context = {\r\n                Random: random,\r\n                BuyCount: buyCount,\r\n            };\r\n            {\r\n                calcTests = calcTests_1.InitCalcTests(context);\r\n                calcTests.CheckAll(detailedLog, onlyFailed, startingInfo);\r\n                totalTests += calcTests.Items.length;\r\n            }\r\n            {\r\n                statTests = statTests_1.InitStatTests(context);\r\n                statTests.CheckAll(detailedLog, onlyFailed, startingInfo);\r\n                totalTests += statTests.Items.length;\r\n            }\r\n            {\r\n                walletTests = walletTests_1.InitWalletTests(context);\r\n                walletTests.CheckAll(detailedLog, onlyFailed, startingInfo);\r\n                totalTests += walletTests.Items.length;\r\n            }\r\n            {\r\n                upgradeTests = upgradeTests_1.InitUpgradeTests(context);\r\n                upgradeTests.CheckAll(detailedLog, onlyFailed, startingInfo);\r\n                totalTests += upgradeTests.Items.length;\r\n            }\r\n            {\r\n                tweakTests = tweakTests_1.InitTweakTests(context);\r\n                tweakTests.CheckAll(detailedLog, onlyFailed, startingInfo);\r\n                totalTests += tweakTests.Items.length;\r\n            }\r\n            {\r\n                upgradeGUITests = upgradeGUITests_1.InitUpgradeGUITests(context);\r\n                upgradeGUITests.CheckAll(detailedLog, onlyFailed, startingInfo);\r\n                totalTests += upgradeGUITests.Items.length;\r\n            }\r\n            return [2 /*return*/, totalTests];\r\n        });\r\n    });\r\n}\r\nexports.StartTesting = StartTesting;\r\n\n\n//# sourceURL=webpack://Game/./src/testing/tests/basicTests.ts?");

/***/ }),

/***/ "./src/testing/tests/testModules/calcTests.ts":
/*!****************************************************!*\
  !*** ./src/testing/tests/testModules/calcTests.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InitCalcTests = void 0;\r\nvar testManager_1 = __webpack_require__(/*! ../../testManager */ \"./src/testing/testManager.ts\");\r\nvar test_1 = __webpack_require__(/*! ../../test */ \"./src/testing/test.ts\");\r\nvar progressionCalculator_1 = __webpack_require__(/*! ../../../data/math/valueCalcs/progressionCalculator */ \"./src/data/math/valueCalcs/progressionCalculator.ts\");\r\nvar progression_1 = __webpack_require__(/*! ../../../data/math/progression */ \"./src/data/math/progression.ts\");\r\nfunction InitCalcTests(context) {\r\n    return new testManager_1.TestManager('Calculators', [\r\n        new test_1.Test('progArithElem', 'Check arithmetical progression element', 3, function () {\r\n            var prog = new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical);\r\n            return prog.GetElement(1, 1, 3).AsNumber; // 1 + 1 + 1 = 3\r\n        }),\r\n        new test_1.Test('progArithSum', 'Check arithmetical progression sum', 6, function () {\r\n            var prog = new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical);\r\n            return prog.GetSum(1, 1, 3).AsNumber; // 1 + (1 + 1) + (2 + 1) = 1 + 2 + 3 = 6\r\n        }),\r\n        new test_1.Test('progGeomElem', 'Check geometrical progression element', 4, function () {\r\n            var prog = new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical);\r\n            return prog.GetElement(1, 2, 3).AsNumber; // 1 * 2 * 2 = 4\r\n        }),\r\n        new test_1.Test('progGeomSum', 'Check geometrical progression sum', 7, function () {\r\n            var prog = new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical);\r\n            return prog.GetSum(1, 2, 3).AsNumber; // 1 + (1 * 2) + (2 * 2) = 1 + 2 + 4 = 7\r\n        }),\r\n    ]);\r\n}\r\nexports.InitCalcTests = InitCalcTests;\r\n\n\n//# sourceURL=webpack://Game/./src/testing/tests/testModules/calcTests.ts?");

/***/ }),

/***/ "./src/testing/tests/testModules/statTests.ts":
/*!****************************************************!*\
  !*** ./src/testing/tests/testModules/statTests.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InitStatTests = void 0;\r\nvar testManager_1 = __webpack_require__(/*! ../../testManager */ \"./src/testing/testManager.ts\");\r\nvar test_1 = __webpack_require__(/*! ../../test */ \"./src/testing/test.ts\");\r\nvar stat_1 = __webpack_require__(/*! ../../../game/gameObjects/stat */ \"./src/game/gameObjects/stat.ts\");\r\nvar float_1 = __webpack_require__(/*! ../../../data/math/float */ \"./src/data/math/float.ts\");\r\nfunction InitStatTests(context) {\r\n    return new testManager_1.TestManager('Stats', [\r\n        new test_1.Test('statAdd', 'Stat value changing', 5, function () {\r\n            var stat = new stat_1.Stat(null, 'stat', 0, 10);\r\n            stat.Value = float_1.Float.Plus(stat.Value, 10);\r\n            stat.Value = float_1.Float.Minus(stat.Value, 5);\r\n            return stat.Value.AsNumber;\r\n        }),\r\n    ]);\r\n}\r\nexports.InitStatTests = InitStatTests;\r\n\n\n//# sourceURL=webpack://Game/./src/testing/tests/testModules/statTests.ts?");

/***/ }),

/***/ "./src/testing/tests/testModules/tweakTests.ts":
/*!*****************************************************!*\
  !*** ./src/testing/tests/testModules/tweakTests.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InitTweakTests = void 0;\r\nvar testManager_1 = __webpack_require__(/*! ../../testManager */ \"./src/testing/testManager.ts\");\r\nvar test_1 = __webpack_require__(/*! ../../test */ \"./src/testing/test.ts\");\r\nvar wallet_1 = __webpack_require__(/*! ../../../game/gameObjects/wallet */ \"./src/game/gameObjects/wallet.ts\");\r\nvar gameData_1 = __webpack_require__(/*! ../../../data/game/gameData */ \"./src/data/game/gameData.ts\");\r\nvar upgrade_1 = __webpack_require__(/*! ../../../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar level_1 = __webpack_require__(/*! ../../../data/game/level */ \"./src/data/game/level.ts\");\r\nvar priceArray_1 = __webpack_require__(/*! ../../../data/priceArray */ \"./src/data/priceArray.ts\");\r\nvar price_1 = __webpack_require__(/*! ../../../game/gameObjects/price */ \"./src/game/gameObjects/price.ts\");\r\nvar progressionCalculator_1 = __webpack_require__(/*! ../../../data/math/valueCalcs/progressionCalculator */ \"./src/data/math/valueCalcs/progressionCalculator.ts\");\r\nvar progression_1 = __webpack_require__(/*! ../../../data/math/progression */ \"./src/data/math/progression.ts\");\r\nvar tweakArray_1 = __webpack_require__(/*! ../../../game/tweakArray */ \"./src/game/tweakArray.ts\");\r\nvar tweak_1 = __webpack_require__(/*! ../../../game/tweak */ \"./src/game/tweak.ts\");\r\nfunction InitTweakTests(context) {\r\n    return new testManager_1.TestManager('Tweaks', [\r\n        new test_1.Test('upgradeBuyTweak', 'Testing tweaked value', 3, function () {\r\n            var rubles = new wallet_1.Wallet(null, 'Rubles', 9999);\r\n            var gameData = new gameData_1.GameData('value', 1);\r\n            var upgrade = new upgrade_1.Upgrade(null, 'Upgrade', context.BuyCount, new level_1.Level(0, 5), new priceArray_1.PriceArray([\r\n                new price_1.Price(rubles, 5, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical))\r\n            ]), new tweakArray_1.TweakArray(new tweak_1.Tweak('tweak', true, 2, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), gameData)));\r\n            upgrade.Buy(1);\r\n            return gameData.Value.AsNumber;\r\n        }),\r\n        new test_1.Test('upgradeBuyTweak', 'Testing tweaked value with multiple different tweaks', 312, function () {\r\n            var rubles = new wallet_1.Wallet(null, 'Rubles', 9999);\r\n            var gameData = new gameData_1.GameData('value', 1);\r\n            var upgrade = new upgrade_1.Upgrade(null, 'Upgrade', context.BuyCount, new level_1.Level(0, 5), new priceArray_1.PriceArray([\r\n                new price_1.Price(rubles, 5, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical))\r\n            ]), new tweakArray_1.TweakArray([\r\n                new tweak_1.Tweak('tweakMp', true, 3, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionTimes(), gameData),\r\n                new tweak_1.Tweak('tweakAdd', true, 6, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), gameData),\r\n                new tweak_1.Tweak('tweakPercent', true, 100, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionWithPercent(), gameData),\r\n                new tweak_1.Tweak('tweakAdd2', true, 6, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionPlus(), gameData),\r\n                new tweak_1.Tweak('tweakMp2', true, 4, 1, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical), new tweak_1.TweakFunctionTimes(), gameData),\r\n            ]));\r\n            upgrade.Buy(1);\r\n            return gameData.Value.AsNumber;\r\n        }),\r\n    ]);\r\n}\r\nexports.InitTweakTests = InitTweakTests;\r\n\n\n//# sourceURL=webpack://Game/./src/testing/tests/testModules/tweakTests.ts?");

/***/ }),

/***/ "./src/testing/tests/testModules/upgradeGUITests.ts":
/*!**********************************************************!*\
  !*** ./src/testing/tests/testModules/upgradeGUITests.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InitUpgradeGUITests = void 0;\r\nvar testManager_1 = __webpack_require__(/*! ../../testManager */ \"./src/testing/testManager.ts\");\r\nvar test_1 = __webpack_require__(/*! ../../test */ \"./src/testing/test.ts\");\r\nvar wallet_1 = __webpack_require__(/*! ../../../game/gameObjects/wallet */ \"./src/game/gameObjects/wallet.ts\");\r\nvar upgrade_1 = __webpack_require__(/*! ../../../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar level_1 = __webpack_require__(/*! ../../../data/game/level */ \"./src/data/game/level.ts\");\r\nvar priceArray_1 = __webpack_require__(/*! ../../../data/priceArray */ \"./src/data/priceArray.ts\");\r\nvar price_1 = __webpack_require__(/*! ../../../game/gameObjects/price */ \"./src/game/gameObjects/price.ts\");\r\nvar progressionCalculator_1 = __webpack_require__(/*! ../../../data/math/valueCalcs/progressionCalculator */ \"./src/data/math/valueCalcs/progressionCalculator.ts\");\r\nvar progression_1 = __webpack_require__(/*! ../../../data/math/progression */ \"./src/data/math/progression.ts\");\r\nvar tweakArray_1 = __webpack_require__(/*! ../../../game/tweakArray */ \"./src/game/tweakArray.ts\");\r\nfunction InitUpgradeGUITests(context) {\r\n    var rubles = new wallet_1.Wallet(null, 'Rubles', 0);\r\n    var upgrade = new upgrade_1.Upgrade(null, 'Upgrade', context.BuyCount, new level_1.Level(0, 5), new priceArray_1.PriceArray([\r\n        new price_1.Price(rubles, 2, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical))\r\n    ]), new tweakArray_1.TweakArray());\r\n    // Value: 1) 0 + (2 * 1) = 2\r\n    //        2) 2 + (2 * 2) = 6\r\n    //        3) 6 + (2 * 4) = 14\r\n    //        4) 14 + (2 * 8) = 30\r\n    //        5) 30 + (2 * 16) = 62\r\n    // for (let i = 1; i <= 5; i++) {\r\n    //     console.log(`${i}. ${upgrade.GUI.GetPriceValueOnLevel(0, i)}`);\r\n    // }\r\n    //todo IEqualCheck/IComparable interface? for Float, to compare it with tests\r\n    return new testManager_1.TestManager('Tweaks', [\r\n        new test_1.Test('priceTextWhenBuying1/5OnZeroLevel', 'Check text for upgrade when trying to buy one from zero', 2, function () {\r\n            return upgrade.GUI.GetPriceValue(0).AsNumber;\r\n        }),\r\n        new test_1.Test('priceTextWhenBuying2/5OnZeroLevel', 'Check text for upgrade when trying to buy second level from zero', 6, function () {\r\n            return upgrade.GUI.GetPriceValueOnLevel(0, 2).AsNumber;\r\n        }),\r\n        new test_1.Test('priceTextWhenBuying4/5OnZeroLevel', 'Check text for upgrade when trying to buy 4 / 5 levels from zero', 30, function () {\r\n            return upgrade.GUI.GetPriceValueOnLevel(0, 4).AsNumber;\r\n        }),\r\n        new test_1.Test('priceTextWhenBuying5/5OnZeroLevel', 'Check text for upgrade when trying to buy all from zero', 62, function () {\r\n            return upgrade.GUI.GetPriceValueOnLevel(0, 5).AsNumber;\r\n        }),\r\n        new test_1.Test('priceTextWhenBuying6/5OnZeroLevel', 'Check text for upgrade when trying to buy one above cap', 62, function () {\r\n            return upgrade.GUI.GetPriceValueOnLevel(0, 6).AsNumber;\r\n        }),\r\n        new test_1.Test('priceTextWhenBuying10/5OnZeroLevel', 'Check text for upgrade when trying to buy more above cap', 62, function () {\r\n            return upgrade.GUI.GetPriceValueOnLevel(0, 10).AsNumber;\r\n        }),\r\n    ]);\r\n}\r\nexports.InitUpgradeGUITests = InitUpgradeGUITests;\r\n\n\n//# sourceURL=webpack://Game/./src/testing/tests/testModules/upgradeGUITests.ts?");

/***/ }),

/***/ "./src/testing/tests/testModules/upgradeTests.ts":
/*!*******************************************************!*\
  !*** ./src/testing/tests/testModules/upgradeTests.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InitUpgradeTests = void 0;\r\nvar testManager_1 = __webpack_require__(/*! ../../testManager */ \"./src/testing/testManager.ts\");\r\nvar test_1 = __webpack_require__(/*! ../../test */ \"./src/testing/test.ts\");\r\nvar wallet_1 = __webpack_require__(/*! ../../../game/gameObjects/wallet */ \"./src/game/gameObjects/wallet.ts\");\r\nvar upgrade_1 = __webpack_require__(/*! ../../../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar level_1 = __webpack_require__(/*! ../../../data/game/level */ \"./src/data/game/level.ts\");\r\nvar priceArray_1 = __webpack_require__(/*! ../../../data/priceArray */ \"./src/data/priceArray.ts\");\r\nvar price_1 = __webpack_require__(/*! ../../../game/gameObjects/price */ \"./src/game/gameObjects/price.ts\");\r\nvar progressionCalculator_1 = __webpack_require__(/*! ../../../data/math/valueCalcs/progressionCalculator */ \"./src/data/math/valueCalcs/progressionCalculator.ts\");\r\nvar progression_1 = __webpack_require__(/*! ../../../data/math/progression */ \"./src/data/math/progression.ts\");\r\nvar tweakArray_1 = __webpack_require__(/*! ../../../game/tweakArray */ \"./src/game/tweakArray.ts\");\r\nvar objectStorage_1 = __webpack_require__(/*! ../../../data/objectStorage */ \"./src/data/objectStorage.ts\");\r\nvar points_1 = __webpack_require__(/*! ../../../game/gameObjects/points */ \"./src/game/gameObjects/points.ts\");\r\nvar float_1 = __webpack_require__(/*! ../../../data/math/float */ \"./src/data/math/float.ts\");\r\nfunction InitUpgradeTests(context) {\r\n    return new testManager_1.TestManager('Upgrades', [\r\n        new test_1.Test('upgradeBuy1', 'Upgrade price check after buying it once', 10, function () {\r\n            var wallet = new wallet_1.Wallet(null, 'Rubles', 100);\r\n            var upgrade = new upgrade_1.Upgrade(null, 'Upgrade', context.BuyCount, new level_1.Level(0, 10), new priceArray_1.PriceArray([\r\n                new price_1.Price(wallet, 5, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical))\r\n            ]), new tweakArray_1.TweakArray([]));\r\n            upgrade.Buy(1);\r\n            return upgrade.Prices[0].Value.AsNumber;\r\n        }),\r\n        new test_1.Test('upgradeBuy2', 'Upgrade price check after buying it twice', 20, function () {\r\n            var wallet = new wallet_1.Wallet(null, 'Rubles', 100);\r\n            var upgrade = new upgrade_1.Upgrade(null, 'Upgrade', context.BuyCount, new level_1.Level(0, 10), new priceArray_1.PriceArray([\r\n                new price_1.Price(wallet, 5, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical))\r\n            ]), new tweakArray_1.TweakArray([]));\r\n            upgrade.Buy(2);\r\n            return upgrade.Prices[0].Value.AsNumber;\r\n        }),\r\n        new test_1.Test('upgradeBuyLevel', 'Upgrade level check after buying it 10 times', 10, function () {\r\n            var wallet = new wallet_1.Wallet(null, 'Rubles', 9999);\r\n            var upgrade = new upgrade_1.Upgrade(null, 'Upgrade', context.BuyCount, new level_1.Level(0, 20), new priceArray_1.PriceArray(new price_1.Price(wallet, 5, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical))), new tweakArray_1.TweakArray([]));\r\n            upgrade.Buy(10);\r\n            return upgrade.Level.Value.AsNumber;\r\n        }),\r\n        new test_1.Test('upgradeBuyExactly', 'Upgrade buy exactly as can be bought', 0, function () {\r\n            var wallet = new wallet_1.Wallet(null, 'Rubles', 14);\r\n            var upgrade = new upgrade_1.Upgrade(null, 'Upgrade', context.BuyCount, new level_1.Level(0, null), new priceArray_1.PriceArray(new price_1.Price(wallet, 2, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical))), \r\n            /*\r\n            1) wallet: 20, price: 2, 20 - 2 = 18\r\n            2) wallet: 18, price: 4, 18 - 4 = 14\r\n            3) wallet: 14, price: 8, 14 - 8 = 6,\r\n            4) wallet: 6, price: 16, can't buy more\r\n            */\r\n            new tweakArray_1.TweakArray([]));\r\n            upgrade.Buy(3);\r\n            return wallet.Value.AsNumber;\r\n        }),\r\n        new test_1.Test('upgradeBuyMoreThanCan', 'Upgrade buy more by one than can buy', false, function () {\r\n            var wallet = new wallet_1.Wallet(null, 'Rubles', 20);\r\n            var upgrade = new upgrade_1.Upgrade(null, 'Upgrade', context.BuyCount, new level_1.Level(0, null), new priceArray_1.PriceArray([\r\n                new price_1.Price(wallet, 2, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical))\r\n            ]), new tweakArray_1.TweakArray([]));\r\n            try {\r\n                upgrade.Buy(4);\r\n                return true;\r\n            }\r\n            catch (error) {\r\n                return false;\r\n            }\r\n        }),\r\n        new test_1.Test('upgradeBuyMoreThanCan2', 'Upgrade buy more by one than can buy #2', false, function () {\r\n            var wallet = new wallet_1.Wallet(null, 'Rubles', 14);\r\n            var upgrade = new upgrade_1.Upgrade(null, 'Upgrade', context.BuyCount, new level_1.Level(0, -1), new priceArray_1.PriceArray([\r\n                new price_1.Price(wallet, 2, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical))\r\n            ]), new tweakArray_1.TweakArray([]));\r\n            try {\r\n                upgrade.Buy(4);\r\n                return true;\r\n            }\r\n            catch (error) {\r\n                return false;\r\n            }\r\n        }),\r\n        new test_1.Test('upgradeBuyWithoutMoney', 'Upgrade trying to buy upgrade when have no money', false, function () {\r\n            var wallet = new wallet_1.Wallet(null, 'Rubles', 99);\r\n            var upgrade = new upgrade_1.Upgrade(null, 'Upgrade', context.BuyCount, new level_1.Level(0, 5), new priceArray_1.PriceArray([\r\n                new price_1.Price(wallet, 100, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical))\r\n            ]), new tweakArray_1.TweakArray([]));\r\n            try {\r\n                upgrade.Buy(1);\r\n                return true;\r\n            }\r\n            catch (error) {\r\n                return false;\r\n            }\r\n        }),\r\n        new test_1.Test('upgradeBuyAboveMaxLevel', 'Check level when buy above max level', 5, function () {\r\n            var wallet = new wallet_1.Wallet(null, 'Rubles', 10000);\r\n            var upgrade = new upgrade_1.Upgrade(null, 'Upgrade', context.BuyCount, new level_1.Level(0, 5), new priceArray_1.PriceArray([\r\n                new price_1.Price(wallet, 2, 2, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Geometrical))\r\n            ]), new tweakArray_1.TweakArray([]));\r\n            upgrade.Buy(10);\r\n            return upgrade.Level.Value.AsNumber;\r\n        }),\r\n        new test_1.Test('upgradeBuyMax', 'Random Upgrade re-inits', 14, function () {\r\n            var wallet = new wallet_1.Wallet(null, 'Rubles', 2950);\r\n            var upgrade = new upgrade_1.Upgrade(null, 'Upgrade', context.BuyCount, new level_1.Level(0, null), new priceArray_1.PriceArray(new price_1.Price(wallet, 9, 30, new progressionCalculator_1.ProgressionCalculator(progression_1.ProgressionType.Arithmetical))), new tweakArray_1.TweakArray([]));\r\n            upgrade.BuyMax();\r\n            return upgrade.Level.Value.AsNumber;\r\n        }),\r\n        new test_1.Test('randomUpgradesInitFrom', 'Random Upgrade re-inits', 10, function () {\r\n            var completedReInits = 0;\r\n            for (var i = 0; i < 10; i++) {\r\n                var walletValue = context.Random.integer(100, 10000);\r\n                var priceValue = context.Random.integer(1, 50);\r\n                var priceStep = context.Random.integer(2, 50);\r\n                var progression = context.Random.pick([progression_1.ProgressionType.Arithmetical, progression_1.ProgressionType.Geometrical]);\r\n                var storage = new objectStorage_1.ObjectStorage();\r\n                //todo random progression too\r\n                var loadedWallet = new wallet_1.Wallet(null, 'Rubles', walletValue);\r\n                var loadedUpgrade = new upgrade_1.Upgrade(null, 'Upgrade', context.BuyCount, new level_1.Level(0, null), new priceArray_1.PriceArray(new price_1.Price(loadedWallet, priceValue, priceStep, new progressionCalculator_1.ProgressionCalculator(progression))), new tweakArray_1.TweakArray([]));\r\n                loadedUpgrade.BuyMax();\r\n                var currentWallet = new wallet_1.Wallet(storage, 'Rubles', 0);\r\n                var currentUpgrade = new upgrade_1.Upgrade(storage, 'Upgrade', context.BuyCount, new level_1.Level(0, null), new priceArray_1.PriceArray(new price_1.Price(currentWallet, priceValue, priceStep, new progressionCalculator_1.ProgressionCalculator(progression))), new tweakArray_1.TweakArray([]));\r\n                currentUpgrade.InitFrom(storage, loadedUpgrade);\r\n                if (loadedUpgrade.Level.Value.IsEqual(currentUpgrade.Level.Value)) {\r\n                    completedReInits++;\r\n                }\r\n                else {\r\n                    // console.log(`randomReInitLoop: Error with values: `\r\n                    //     + `\\n - walletValue: ${walletValue}`\r\n                    //     + `\\n - priceValue: ${priceValue}`\r\n                    //     + `\\n - priceStep: ${priceStep}`);\r\n                }\r\n            }\r\n            return completedReInits;\r\n        }),\r\n        new test_1.Test('randomPointsMathTest', 'Random Points math check', 10, function () {\r\n            var completedReInits = 0;\r\n            for (var i = 0; i < 10; i++) {\r\n                var maxPoints = context.Random.integer(1, 20);\r\n                var maxPointsStep = context.Random.real(1.1, 5);\r\n                var points = context.Random.integer(1, 10000);\r\n                var progression = context.Random.pick([progression_1.ProgressionType.Arithmetical, progression_1.ProgressionType.Geometrical]);\r\n                var optimized = new points_1.Points(null, \"test\", new level_1.Level(0, null), 0, maxPoints, maxPointsStep, new progressionCalculator_1.ProgressionCalculator(progression));\r\n                optimized.AddPoints(new float_1.Float(points));\r\n                var notOptimized = new points_1.Points(null, \"test\", new level_1.Level(0, null), 0, maxPoints, maxPointsStep, new progressionCalculator_1.ProgressionCalculator(progression));\r\n                notOptimized.AddPoints(new float_1.Float(points), false);\r\n                if (optimized.LevelValue.IsEqual(notOptimized.LevelValue)) {\r\n                    completedReInits++;\r\n                }\r\n                else {\r\n                    //console.log(`Optimized: ${optimized.LevelValue}\\nNot optimized: ${notOptimized.LevelValue}\\n`);\r\n                    //debugger\r\n                }\r\n            }\r\n            return completedReInits;\r\n        }),\r\n        new test_1.Test('randomPointsInitFrom', 'Random Points re-inits', 10, function () {\r\n            var completedReInits = 0;\r\n            for (var i = 0; i < 10; i++) {\r\n                var storage = new objectStorage_1.ObjectStorage();\r\n                var maxPoints = context.Random.integer(1, 1000);\r\n                var maxPointsStep = context.Random.integer(2, 50);\r\n                var points = context.Random.integer(1, 50000);\r\n                var progression = context.Random.pick([progression_1.ProgressionType.Arithmetical, progression_1.ProgressionType.Geometrical]);\r\n                var oldP = new points_1.Points(null, \"test\", new level_1.Level(0, null), 0, maxPoints, maxPointsStep, new progressionCalculator_1.ProgressionCalculator(progression));\r\n                try {\r\n                    oldP.AddPoints(new float_1.Float(points));\r\n                }\r\n                catch (e) {\r\n                    console.log(\"Error on step 1\");\r\n                    throw e;\r\n                }\r\n                var newP = new points_1.Points(storage, \"test\", new level_1.Level(0, null), 0, maxPoints, maxPointsStep, new progressionCalculator_1.ProgressionCalculator(progression));\r\n                try {\r\n                    newP.InitFrom(storage, oldP);\r\n                }\r\n                catch (e) {\r\n                    console.log(\"Error on step 2\");\r\n                    throw e;\r\n                }\r\n                if (newP.LevelValue.IsEqual(oldP.LevelValue)) {\r\n                    completedReInits++;\r\n                }\r\n            }\r\n            return completedReInits;\r\n        }),\r\n    ]);\r\n}\r\nexports.InitUpgradeTests = InitUpgradeTests;\r\n\n\n//# sourceURL=webpack://Game/./src/testing/tests/testModules/upgradeTests.ts?");

/***/ }),

/***/ "./src/testing/tests/testModules/walletTests.ts":
/*!******************************************************!*\
  !*** ./src/testing/tests/testModules/walletTests.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InitWalletTests = void 0;\r\nvar testManager_1 = __webpack_require__(/*! ../../testManager */ \"./src/testing/testManager.ts\");\r\nvar test_1 = __webpack_require__(/*! ../../test */ \"./src/testing/test.ts\");\r\nvar wallet_1 = __webpack_require__(/*! ../../../game/gameObjects/wallet */ \"./src/game/gameObjects/wallet.ts\");\r\nfunction InitWalletTests(context) {\r\n    return new testManager_1.TestManager('Wallets', [\r\n        new test_1.Test('walletAdd', 'Wallet value changing', 5, function () {\r\n            var rubles = new wallet_1.Wallet(null, 'Rubles', 0);\r\n            rubles.Add(15);\r\n            rubles.Subtract(10);\r\n            return rubles.Value.AsNumber;\r\n        }),\r\n    ]);\r\n}\r\nexports.InitWalletTests = InitWalletTests;\r\n\n\n//# sourceURL=webpack://Game/./src/testing/tests/testModules/walletTests.ts?");

/***/ }),

/***/ "./src/ui/fontSizeCalc.ts":
/*!********************************!*\
  !*** ./src/ui/fontSizeCalc.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UpgradeTitleFontSizeCalc = exports.MonsterUpgradeFontSizeCalc = exports.GetFontSize = void 0;\r\nfunction GetFontSize(text, fontSize) {\r\n    if (typeof fontSize == \"number\") {\r\n        return fontSize;\r\n    }\r\n    else {\r\n        return fontSize(text, text.length);\r\n    }\r\n}\r\nexports.GetFontSize = GetFontSize;\r\nfunction MonsterUpgradeFontSizeCalc(_text, length) {\r\n    if (length <= 15) {\r\n        return 40;\r\n    }\r\n    else if (length <= 17) {\r\n        return 35;\r\n    }\r\n    else if (length <= 19) {\r\n        return 30;\r\n    }\r\n    else {\r\n        return 25;\r\n    }\r\n}\r\nexports.MonsterUpgradeFontSizeCalc = MonsterUpgradeFontSizeCalc;\r\nfunction UpgradeTitleFontSizeCalc(_text, length) {\r\n    if (length <= 15) {\r\n        return 45;\r\n    }\r\n    else if (length <= 20) {\r\n        return 40;\r\n    }\r\n    else if (length <= 25) {\r\n        return 35;\r\n    }\r\n    else {\r\n        return 30;\r\n    }\r\n}\r\nexports.UpgradeTitleFontSizeCalc = UpgradeTitleFontSizeCalc;\r\n\n\n//# sourceURL=webpack://Game/./src/ui/fontSizeCalc.ts?");

/***/ }),

/***/ "./src/ui/gui-update/buildingsGUI.ts":
/*!*******************************************!*\
  !*** ./src/ui/gui-update/buildingsGUI.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UpdateBuildingsGUI = void 0;\r\nvar content_1 = __webpack_require__(/*! ../../content/content */ \"./src/content/content.ts\");\r\nvar upgradeInfo_1 = __webpack_require__(/*! ../upgrade/upgradeInfo */ \"./src/ui/upgrade/upgradeInfo.ts\");\r\nvar fontSizeCalc_1 = __webpack_require__(/*! ../fontSizeCalc */ \"./src/ui/fontSizeCalc.ts\");\r\nfunction UpdateBuildingsGUI() {\r\n    //# Spikes #\r\n    if (content_1.Managers.Views.CurrentView.ID == content_1.ViewID.Spikes) {\r\n        var upgrades = content_1.Content.Buildings.Spikes.Upgrades;\r\n        for (var _i = 0, _a = [upgrades.Damage]; _i < _a.length; _i++) {\r\n            var upgrade = _a[_i];\r\n            upgradeInfo_1.UpdateUpgradeInfo(upgrade, {\r\n                FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            });\r\n        }\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.ReloadTime, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { FormatTime: \"Time\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.HealthBasedDamage, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { Postfix: \"%\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.StunDuration, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { FormatTime: \"Time\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.StunChance, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { Postfix: \"%\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.StunSpeedMP, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { Prefix: \"x\", }\r\n            ]\r\n        });\r\n    }\r\n}\r\nexports.UpdateBuildingsGUI = UpdateBuildingsGUI;\r\n\n\n//# sourceURL=webpack://Game/./src/ui/gui-update/buildingsGUI.ts?");

/***/ }),

/***/ "./src/ui/gui-update/indicatorsGUI.ts":
/*!********************************************!*\
  !*** ./src/ui/gui-update/indicatorsGUI.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SetIndicatorVisible = exports.UpdateIndicatorInfo = exports.UpdateIndicatorsGUI = void 0;\r\nvar utilsGUI_1 = __webpack_require__(/*! ../../../javascript/construct3/c3ObjectUtils/utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar content_1 = __webpack_require__(/*! ../../content/content */ \"./src/content/content.ts\");\r\nvar utilsObjects_1 = __webpack_require__(/*! ../../utils/utilsObjects */ \"./src/utils/utilsObjects.ts\");\r\nvar turret_1 = __webpack_require__(/*! ../../game/fighting/turret */ \"./src/game/fighting/turret.ts\");\r\nfunction UpdateIndicatorsGUI() {\r\n    //# Unlocks Indicator #\r\n    var unlocks = GetIndicatorValueForUnlocks([\r\n        content_1.Content.Monsters.Basic,\r\n        content_1.Content.Monsters.Armored,\r\n        // Content.Monsters.Fast,\r\n        content_1.Content.Turrets.Basic,\r\n        content_1.Content.Turrets.Laser,\r\n        // Content.Turrets.Rail,\r\n        content_1.Content.Buildings.Spikes,\r\n    ]);\r\n    //todo IsOnScreen universal check for C3 objects to prevent additional checks\r\n    UpdateIndicatorInfo(\"canBuyIndicator::Unlocks\", unlocks);\r\n    //# Monsters Indicator #\r\n    var basicMonster = GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Monsters.Basic.Upgrades));\r\n    var armoredMonster = content_1.Content.Monsters.Armored.Unlock.IsUnlocked ?\r\n        GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Monsters.Armored.Upgrades)) : 0;\r\n    var fastMonster = content_1.Content.Monsters.Fast.Unlock.IsUnlocked ?\r\n        GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Monsters.Fast.Upgrades)) : 0;\r\n    var allMonsters = basicMonster + armoredMonster + fastMonster;\r\n    UpdateIndicatorInfo(\"canBuyIndicator::BasicMonster\", basicMonster);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::ArmoredMonster\", armoredMonster);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::FastMonster\", fastMonster);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::Monsters\", allMonsters);\r\n    //# Turrets Indicator #\r\n    var basicTurret = GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Turrets.Basic.Upgrades));\r\n    var laserTurret = content_1.Content.Turrets.Laser.Unlock.IsUnlocked ?\r\n        GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Turrets.Laser.Upgrades)) : 0;\r\n    var railTurret = content_1.Content.Turrets.Rail.Unlock.IsUnlocked ?\r\n        GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Turrets.Rail.Upgrades)) : 0;\r\n    var allTurrets = basicTurret + laserTurret + railTurret;\r\n    UpdateIndicatorInfo(\"canBuyIndicator::BasicTurret\", basicTurret);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::LaserTurret\", laserTurret);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::RailTurret\", railTurret);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::Turrets\", allTurrets);\r\n    //# Buildings Indicator #\r\n    var spikes = GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Buildings.Spikes.Upgrades));\r\n    var allBuildings = spikes;\r\n    UpdateIndicatorInfo(\"canBuyIndicator::Spikes\", spikes);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::Buildings\", allBuildings);\r\n    //# Rebirth Indicator #\r\n    var rebirthMain = GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Rebirth.Main));\r\n    var rebirthBasicMonster = GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Rebirth.BasicMonster));\r\n    var rebirthBasicTurret = GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Rebirth.BasicTurret));\r\n    var rebirthArmoredMonster = content_1.Content.Monsters.Armored.System.IsEverUnlocked.Value\r\n        ? GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Rebirth.ArmoredMonster)) : 0;\r\n    var rebirthSpikes = content_1.Content.Buildings.Spikes.System.IsEverUnlocked.Value\r\n        ? GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Rebirth.Spikes)) : 0;\r\n    var rebirthLaserTurret = content_1.Content.Turrets.Laser.System.IsEverUnlocked.Value\r\n        ? GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Rebirth.LaserTurret)) : 0;\r\n    var rebirthFastMonster = content_1.Content.Monsters.Fast.System.IsEverUnlocked.Value\r\n        ? GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Rebirth.FastMonster)) : 0;\r\n    var rebirthRailTurret = content_1.Content.Turrets.Rail.System.IsEverUnlocked.Value\r\n        ? GetIndicatorValueForUpgrades(utilsObjects_1.ValuesOf(content_1.Content.Rebirth.RailTurret)) : 0;\r\n    var monstersRebirth = rebirthBasicMonster + rebirthArmoredMonster + rebirthFastMonster;\r\n    var turretsRebirth = rebirthBasicTurret + rebirthLaserTurret + rebirthRailTurret;\r\n    var buildingsRebirth = rebirthSpikes;\r\n    var allRebirth = rebirthMain + monstersRebirth + turretsRebirth + buildingsRebirth;\r\n    UpdateIndicatorInfo(\"canBuyIndicator::Rebirth.Main\", rebirthMain);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::Rebirth.Monsters\", monstersRebirth);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::Rebirth.Turrets\", turretsRebirth);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::Rebirth.Buildings\", buildingsRebirth);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::RebirthBasicMonster\", rebirthBasicMonster);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::RebirthArmoredMonster\", rebirthArmoredMonster);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::RebirthFastMonster\", rebirthFastMonster);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::RebirthBasicTurret\", rebirthBasicTurret);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::RebirthLaserTurret\", rebirthLaserTurret);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::RebirthRailTurret\", rebirthRailTurret);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::RebirthSpikes\", rebirthSpikes);\r\n    UpdateIndicatorInfo(\"canBuyIndicator::Rebirth\", allRebirth);\r\n    //# Build Mode Indicator #\r\n    var buildMode = 0;\r\n    for (var _i = 0, _a = content_1.ContentStorage.GetAllItemsOfType(turret_1.Turret); _i < _a.length; _i++) {\r\n        var turret = _a[_i];\r\n        buildMode += turret.Unlock.IsUnlocked\r\n            ? content_1.Managers.Fight.GetTurretMaxCount(turret) - content_1.Managers.Fight.GetTurretCount(turret.ID) : 0;\r\n    }\r\n    for (var _b = 0, _c = [content_1.Content.Buildings.Spikes]; _b < _c.length; _b++) {\r\n        var building = _c[_b];\r\n        buildMode += building.Unlock.IsUnlocked\r\n            ? building.Entity.Count.Value.Minus(building.Entity.Instances.Length).AsNumber : 0;\r\n    }\r\n    UpdateIndicatorInfo(\"canBuyIndicator::BuildMode\", buildMode);\r\n}\r\nexports.UpdateIndicatorsGUI = UpdateIndicatorsGUI;\r\nvar GetIndicatorValueForUnlocks = function (items) {\r\n    var value = 0;\r\n    for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\r\n        var item = items_1[_i];\r\n        if (item.UnlockPurchase.IsThemeUnlocked && item.UnlockPurchase.IsCanBuy(1)) {\r\n            value++;\r\n        }\r\n    }\r\n    return value;\r\n};\r\nvar GetIndicatorValueForUpgrades = function (items) {\r\n    var value = 0;\r\n    for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {\r\n        var item = items_2[_i];\r\n        if (item.IsThemeUnlocked && item.IsCanBuy(1)) {\r\n            value++;\r\n        }\r\n    }\r\n    return value;\r\n};\r\nfunction UpdateIndicatorInfo(id, value) {\r\n    utilsGUI_1.SetIconFrame(id, value > 0 ? 1 : 0);\r\n    utilsGUI_1.SetText(id, value);\r\n}\r\nexports.UpdateIndicatorInfo = UpdateIndicatorInfo;\r\nfunction SetIndicatorVisible(id, visible) {\r\n    utilsGUI_1.SetIconVisible(id, visible);\r\n    utilsGUI_1.SetTextVisible(id, visible);\r\n}\r\nexports.SetIndicatorVisible = SetIndicatorVisible;\r\n\n\n//# sourceURL=webpack://Game/./src/ui/gui-update/indicatorsGUI.ts?");

/***/ }),

/***/ "./src/ui/gui-update/monstersGUI.ts":
/*!******************************************!*\
  !*** ./src/ui/gui-update/monstersGUI.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UpdateMonstersGUI = void 0;\r\n//# Basic Monster Upgrades #\r\nvar content_1 = __webpack_require__(/*! ../../content/content */ \"./src/content/content.ts\");\r\nvar upgradeInfo_1 = __webpack_require__(/*! ../upgrade/upgradeInfo */ \"./src/ui/upgrade/upgradeInfo.ts\");\r\nvar fontSizeCalc_1 = __webpack_require__(/*! ../fontSizeCalc */ \"./src/ui/fontSizeCalc.ts\");\r\nfunction UpdateMonstersGUI() {\r\n    //# Basic Monster Upgrades #\r\n    if (content_1.Managers.Views.CurrentView.ID == content_1.ViewID.BasicMonster) {\r\n        var upgrades = content_1.Content.Monsters.Basic.Upgrades;\r\n        for (var _i = 0, _a = [upgrades.Health, upgrades.Speed, upgrades.Count, upgrades.Shield]; _i < _a.length; _i++) {\r\n            var upgrade = _a[_i];\r\n            upgradeInfo_1.UpdateUpgradeInfo(upgrade, {\r\n                FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            });\r\n        }\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.SpawnTime, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { FormatTime: \"Time\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.InstantSpawnChance, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { Postfix: \"%\", }\r\n            ]\r\n        });\r\n    }\r\n    //# Armored Monster Upgrades #\r\n    else if (content_1.Managers.Views.CurrentView.ID == content_1.ViewID.ArmoredMonster) {\r\n        var upgrades = content_1.Content.Monsters.Armored.Upgrades;\r\n        for (var _b = 0, _c = [upgrades.Health, upgrades.Speed, upgrades.Count, upgrades.Shield]; _b < _c.length; _b++) {\r\n            var upgrade = _c[_b];\r\n            upgradeInfo_1.UpdateUpgradeInfo(upgrade, {\r\n                FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            });\r\n        }\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.SpawnTime, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { FormatTime: \"Time\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.InstantSpawnChance, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { Postfix: \"%\", }\r\n            ]\r\n        });\r\n    }\r\n    //# Fast Monster Upgrades #\r\n    else if (content_1.Managers.Views.CurrentView.ID == content_1.ViewID.FastMonster) {\r\n        var upgrades = content_1.Content.Monsters.Fast.Upgrades;\r\n        for (var _d = 0, _e = [upgrades.Health, upgrades.Count, upgrades.Speed, upgrades.Reward]; _d < _e.length; _d++) {\r\n            var upgrade = _e[_d];\r\n            upgradeInfo_1.UpdateUpgradeInfo(upgrade, {\r\n                FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            });\r\n        }\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.SpawnTime, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { FormatTime: \"Time\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.DamageReductionMP, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { Prefix: \"x\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.DodgeChance, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { Postfix: \"%\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.InstantSpawnChance, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { Postfix: \"%\", }\r\n            ]\r\n        });\r\n    }\r\n}\r\nexports.UpdateMonstersGUI = UpdateMonstersGUI;\r\n\n\n//# sourceURL=webpack://Game/./src/ui/gui-update/monstersGUI.ts?");

/***/ }),

/***/ "./src/ui/gui-update/rebirthGUI.ts":
/*!*****************************************!*\
  !*** ./src/ui/gui-update/rebirthGUI.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UpdateRebirthGUI = void 0;\r\n//# Rebirth Menu & Upgrades #\r\nvar content_1 = __webpack_require__(/*! ../../content/content */ \"./src/content/content.ts\");\r\nvar utilsGUI_1 = __webpack_require__(/*! ../../../javascript/construct3/c3ObjectUtils/utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar utilsText_1 = __webpack_require__(/*! ../../utils/utilsText */ \"./src/utils/utilsText.ts\");\r\nvar upgradeInfo_1 = __webpack_require__(/*! ../upgrade/upgradeInfo */ \"./src/ui/upgrade/upgradeInfo.ts\");\r\nvar fontSizeCalc_1 = __webpack_require__(/*! ../fontSizeCalc */ \"./src/ui/fontSizeCalc.ts\");\r\nfunction UpdateRebirthGUI() {\r\n    var rebirth = content_1.Content.Rebirth;\r\n    for (var _i = 0, _a = [\r\n        rebirth.BasicTurret.Count,\r\n        rebirth.LaserTurret.Count,\r\n        rebirth.RailTurret.Count,\r\n        rebirth.Spikes.Count,\r\n    ]; _i < _a.length; _i++) {\r\n        var upgrade = _a[_i];\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrade, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n        });\r\n    }\r\n    if (content_1.Managers.Views.CurrentView.ID == content_1.ViewID.RebirthMain) {\r\n        var progress = content_1.Content.Rebirth.Stats.NextPointProgress;\r\n        var perLevel = content_1.Content.Rebirth.Stats.PointsPerLevel;\r\n        var award = content_1.Content.Rebirth.CurrentRebirthAward;\r\n        utilsGUI_1.SetProgressBar(\"pointsProgress::Rebirth.NextPointProgress\", progress.Progress.AsNumber, undefined, 35);\r\n        utilsGUI_1.SetText(\"pointsProgressText::Rebirth.NextPointProgress\", utilsText_1.GetNumberText(progress.MaxPoints.Minus(progress.Points)) + \" left\");\r\n        utilsGUI_1.SetText(\"+stat::Rebirth.PointsPerLevel\", \"+\" + utilsText_1.GetNumberText(perLevel.Value));\r\n        utilsGUI_1.SetText(\"+stat::Rebirth.Award\", \"+\" + utilsText_1.GetNumberText(award));\r\n        utilsGUI_1.SetButtonEnabled(\"action::Rebirth\", award.IsMoreOrEqual(0.5));\r\n        for (var _b = 0, _c = [\r\n            rebirth.Main.StartCoinBonus,\r\n            rebirth.Main.RPPerLevel,\r\n        ]; _b < _c.length; _b++) {\r\n            var upgrade = _c[_b];\r\n            upgradeInfo_1.UpdateUpgradeInfo(upgrade, {\r\n                FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            });\r\n        }\r\n        upgradeInfo_1.UpdateUpgradeInfo(rebirth.Main.RPRewardMP, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { DataType: \"Tweak\", }\r\n            ]\r\n        });\r\n    }\r\n    else if (content_1.Managers.Views.CurrentView.ID == content_1.ViewID.RebirthBasicMonster) {\r\n        //# Basic Monster #\r\n        for (var _d = 0, _e = [\r\n            rebirth.BasicMonster.RPDropValue,\r\n        ]; _d < _e.length; _d++) {\r\n            var upgrade = _e[_d];\r\n            upgradeInfo_1.UpdateUpgradeInfo(upgrade, {\r\n                FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            });\r\n        }\r\n        upgradeInfo_1.UpdateUpgradeInfo(rebirth.BasicMonster.Count, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                {\r\n                    BaseValue: 1,\r\n                    DataType: \"Tweak\",\r\n                }\r\n            ],\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(rebirth.BasicMonster.Reward, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { DataType: \"Tweak\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(rebirth.BasicMonster.RPDropChance, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { Postfix: \"%\", }\r\n            ]\r\n        });\r\n    }\r\n    else if (content_1.Managers.Views.CurrentView.ID == content_1.ViewID.RebirthArmoredMonster) {\r\n        //# Armored Monster #\r\n        var upgrades = rebirth.ArmoredMonster;\r\n        for (var _f = 0, _g = [\r\n            upgrades.RPDropValue,\r\n        ]; _f < _g.length; _f++) {\r\n            var upgrade = _g[_f];\r\n            upgradeInfo_1.UpdateUpgradeInfo(upgrade, {\r\n                FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            });\r\n        }\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.Reward, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { DataType: \"Tweak\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.RPDropChance, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { Postfix: \"%\", }\r\n            ]\r\n        });\r\n    }\r\n    else if (content_1.Managers.Views.CurrentView.ID == content_1.ViewID.RebirthFastMonster) {\r\n        //# Fast Monster #\r\n        upgradeInfo_1.UpdateUpgradeInfo(rebirth.FastMonster.Reward, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { DataType: \"Tweak\", }\r\n            ]\r\n        });\r\n    }\r\n}\r\nexports.UpdateRebirthGUI = UpdateRebirthGUI;\r\n\n\n//# sourceURL=webpack://Game/./src/ui/gui-update/rebirthGUI.ts?");

/***/ }),

/***/ "./src/ui/gui-update/statisticsGUI.ts":
/*!********************************************!*\
  !*** ./src/ui/gui-update/statisticsGUI.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UpdateStatisticsGUI = void 0;\r\nvar content_1 = __webpack_require__(/*! ../../content/content */ \"./src/content/content.ts\");\r\nvar utilsGUI_1 = __webpack_require__(/*! ../../../javascript/construct3/c3ObjectUtils/utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar utilsText_1 = __webpack_require__(/*! ../../utils/utilsText */ \"./src/utils/utilsText.ts\");\r\nvar time_1 = __webpack_require__(/*! ../../data/time */ \"./src/data/time.ts\");\r\nvar monster_1 = __webpack_require__(/*! ../../game/fighting/monster */ \"./src/game/fighting/monster.ts\");\r\nvar turret_1 = __webpack_require__(/*! ../../game/fighting/turret */ \"./src/game/fighting/turret.ts\");\r\nfunction UpdateStatisticsGUI() {\r\n    if (content_1.Managers.Views.CurrentView.ID == content_1.ViewID.Statistics) {\r\n        var totalTime = new Date().getTime() - content_1.Content.Statistics.Time.StartedPlaying.Value.getTime();\r\n        utilsGUI_1.SetText(\"Statistics::AllTimeInfo\", \"You are playing since \" + content_1.Content.Statistics.Time.StartedPlaying.Value.toLocaleDateString()\r\n            + (\"\\n(\" + utilsText_1.GetTimeText(new time_1.Time(0, 0, 0, totalTime)) + \" ago)\")\r\n            + (\"\\nPlay time: \" + utilsText_1.GetTimeText(content_1.Content.Statistics.Time.TimePlayed.Value)));\r\n        utilsGUI_1.SetText(\"Statistics::ClickInfo\", \"Monsters clicked: \" + utilsText_1.GetNumberText(content_1.Content.Statistics.Gameplay.TotalClicks.Value)\r\n            + (\"\\nTotal click damage: \" + utilsText_1.GetNumberText(content_1.Content.Statistics.Gameplay.TotalClickDamage.Value))\r\n            + (\"\\nClick kills: \" + utilsText_1.GetNumberText(content_1.Content.Statistics.Gameplay.ClickKills.Value)));\r\n        utilsGUI_1.SetText(\"Statistics::WalletsInfo\", \"Total Coins: \" + utilsText_1.GetNumberText(content_1.Content.Wallets.Coins.Statistics.TotalCollected)\r\n            + (\"\\nTotal RP: \" + utilsText_1.GetNumberText(content_1.Content.Wallets.RebirthPoints.Statistics.TotalCollected)));\r\n        var lastRebirthDiff = new Date().getTime() - content_1.Content.Rebirth.Stats.LastRebirth.Value.getTime();\r\n        utilsGUI_1.SetText(\"Statistics::RebirthInfo\", \"You made it \" + utilsText_1.GetNumberText(content_1.Content.Rebirth.Stats.HappenedCount.Value) + \" times\"\r\n            + (\"\\nTotal RP made: \" + utilsText_1.GetNumberText(content_1.Content.Rebirth.Stats.TotalRPMade.Value))\r\n            + (content_1.Content.Rebirth.Stats.HappenedCount.Value.IsMore(0)\r\n                ? \"\\nLast rebirth: \" + utilsText_1.GetTimeText(lastRebirthDiff) + \" ago\"\r\n                : \"\"));\r\n        for (var _i = 0, _a = content_1.ContentStorage.GetAllItemsOfType(monster_1.Monster); _i < _a.length; _i++) {\r\n            var monster = _a[_i];\r\n            utilsGUI_1.SetText(\"Statistics::\" + monster.ID, \"Total spawned: \" + utilsText_1.GetNumberText(monster.Statistics.TotalSpawned)\r\n                + (\"\\nCoins made: \" + utilsText_1.GetNumberText(monster.Statistics.TotalCoinsMade))\r\n                + (\"\\nRP made: \" + utilsText_1.GetNumberText(monster.Statistics.TotalRPMade)));\r\n        }\r\n        for (var _b = 0, _c = content_1.ContentStorage.GetAllItemsOfType(turret_1.Turret); _b < _c.length; _b++) {\r\n            var turret = _c[_b];\r\n            utilsGUI_1.SetText(\"Statistics::\" + turret.ID, \"Monsters killed: \" + utilsText_1.GetNumberText(turret.Statistics.MonstersKilled)\r\n                + (\"\\nDamage dealt: \" + utilsText_1.GetNumberText(turret.Statistics.DamageDealt))\r\n                + (\"\\nCoins made: \" + utilsText_1.GetNumberText(turret.Statistics.TotalCoinsMade)));\r\n        }\r\n        var spikes = content_1.Content.Buildings.Spikes.Entity;\r\n        utilsGUI_1.SetText(\"Statistics::\" + spikes.ID, \"Monsters killed: \" + utilsText_1.GetNumberText(spikes.Statistics.MonstersKilled)\r\n            + (\"\\nDamage dealt: \" + utilsText_1.GetNumberText(spikes.Statistics.DamageDealt))\r\n            + (\"\\nCoins made: \" + utilsText_1.GetNumberText(spikes.Statistics.TotalCoinsMade)));\r\n    }\r\n}\r\nexports.UpdateStatisticsGUI = UpdateStatisticsGUI;\r\n\n\n//# sourceURL=webpack://Game/./src/ui/gui-update/statisticsGUI.ts?");

/***/ }),

/***/ "./src/ui/gui-update/turretsGUI.ts":
/*!*****************************************!*\
  !*** ./src/ui/gui-update/turretsGUI.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UpdateTurretsGUI = void 0;\r\n//# Basic Turret Upgrades #\r\nvar content_1 = __webpack_require__(/*! ../../content/content */ \"./src/content/content.ts\");\r\nvar upgradeInfo_1 = __webpack_require__(/*! ../upgrade/upgradeInfo */ \"./src/ui/upgrade/upgradeInfo.ts\");\r\nvar fontSizeCalc_1 = __webpack_require__(/*! ../fontSizeCalc */ \"./src/ui/fontSizeCalc.ts\");\r\nfunction UpdateTurretsGUI() {\r\n    //# BasicTurret #\r\n    if (content_1.Managers.Views.CurrentView.ID == content_1.ViewID.BasicTurret) {\r\n        var upgrades = content_1.Content.Turrets.Basic.Upgrades;\r\n        for (var _i = 0, _a = [upgrades.Damage, upgrades.RotationSpeed, upgrades.Range, upgrades.BulletSpeed]; _i < _a.length; _i++) {\r\n            var upgrade = _a[_i];\r\n            upgradeInfo_1.UpdateUpgradeInfo(upgrade, {\r\n                FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            });\r\n        }\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.ReloadTime, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { FormatTime: \"Time\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.CriticalChance, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { Postfix: \"%\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.CriticalMP, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { Prefix: \"x\", }\r\n            ]\r\n        });\r\n    }\r\n    //# LaserTurret #\r\n    else if (content_1.Managers.Views.CurrentView.ID == content_1.ViewID.LaserTurret) {\r\n        var upgrades = content_1.Content.Turrets.Laser.Upgrades;\r\n        for (var _b = 0, _c = [upgrades.Damage, upgrades.RotationSpeed, upgrades.Range, upgrades.ShieldDamage]; _b < _c.length; _b++) {\r\n            var upgrade = _c[_b];\r\n            upgradeInfo_1.UpdateUpgradeInfo(upgrade, {\r\n                FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            });\r\n        }\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.ReloadTime, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { FormatTime: \"Time\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.CriticalChance, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { Postfix: \"%\", }\r\n            ]\r\n        });\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.CriticalMP, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { Prefix: \"x\", }\r\n            ]\r\n        });\r\n    }\r\n    //# RailTurret #\r\n    else if (content_1.Managers.Views.CurrentView.ID == content_1.ViewID.RailTurret) {\r\n        var upgrades = content_1.Content.Turrets.Rail.Upgrades;\r\n        for (var _d = 0, _e = [upgrades.Damage, upgrades.Range, upgrades.HealthDamage, upgrades.HitsPerShot]; _d < _e.length; _d++) {\r\n            var upgrade = _e[_d];\r\n            upgradeInfo_1.UpdateUpgradeInfo(upgrade, {\r\n                FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            });\r\n        }\r\n        upgradeInfo_1.UpdateUpgradeInfo(upgrades.ReloadTime, {\r\n            FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n            Tweaks: [\r\n                { FormatTime: \"Time\", }\r\n            ]\r\n        });\r\n    }\r\n}\r\nexports.UpdateTurretsGUI = UpdateTurretsGUI;\r\n\n\n//# sourceURL=webpack://Game/./src/ui/gui-update/turretsGUI.ts?");

/***/ }),

/***/ "./src/ui/gui.ts":
/*!***********************!*\
  !*** ./src/ui/gui.ts ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UpdateButtonsUI = exports.UpdateUIManual = exports.UpdateUIEveryTick = exports.InitUI = exports.GetUpgradePos = exports.FPS = void 0;\r\nvar utilsGUI_1 = __webpack_require__(/*! ../../javascript/construct3/c3ObjectUtils/utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar content_1 = __webpack_require__(/*! ../content/content */ \"./src/content/content.ts\");\r\nvar upgrade_1 = __webpack_require__(/*! ../game/gameObjects/upgrade/upgrade */ \"./src/game/gameObjects/upgrade/upgrade.ts\");\r\nvar utilsText_1 = __webpack_require__(/*! ../utils/utilsText */ \"./src/utils/utilsText.ts\");\r\nvar fontSizeCalc_1 = __webpack_require__(/*! ./fontSizeCalc */ \"./src/ui/fontSizeCalc.ts\");\r\nvar upgradeInfo_1 = __webpack_require__(/*! ./upgrade/upgradeInfo */ \"./src/ui/upgrade/upgradeInfo.ts\");\r\nvar utilsColor_1 = __webpack_require__(/*! ../utils/utilsColor */ \"./src/utils/utilsColor.ts\");\r\nvar game_1 = __webpack_require__(/*! ../game */ \"./src/game.ts\");\r\nvar rebirthGUI_1 = __webpack_require__(/*! ./gui-update/rebirthGUI */ \"./src/ui/gui-update/rebirthGUI.ts\");\r\nvar indicatorsGUI_1 = __webpack_require__(/*! ./gui-update/indicatorsGUI */ \"./src/ui/gui-update/indicatorsGUI.ts\");\r\nvar monstersGUI_1 = __webpack_require__(/*! ./gui-update/monstersGUI */ \"./src/ui/gui-update/monstersGUI.ts\");\r\nvar turretsGUI_1 = __webpack_require__(/*! ./gui-update/turretsGUI */ \"./src/ui/gui-update/turretsGUI.ts\");\r\nvar statisticsGUI_1 = __webpack_require__(/*! ./gui-update/statisticsGUI */ \"./src/ui/gui-update/statisticsGUI.ts\");\r\nvar buildingsGUI_1 = __webpack_require__(/*! ./gui-update/buildingsGUI */ \"./src/ui/gui-update/buildingsGUI.ts\");\r\nexports.FPS = 0; //todo move to globalVars\r\n//todo можно сделать так же как с апдейтами тем, чтобы был массив объектов, чтобы каждый раз не находить все объектоы по новой\r\nfunction GetUpgradePos(textID) {\r\n    try {\r\n        return utilsGUI_1.GetObjPos(utilsGUI_1.FindText(textID)[0]);\r\n    }\r\n    catch (e) {\r\n        throw new Error(\"Can't find upgrade markup text '\" + textID + \"'\");\r\n    }\r\n}\r\nexports.GetUpgradePos = GetUpgradePos;\r\nfunction InitUI() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, game_1.Construct3.callFunction(\"DoTick\")];\r\n                case 1:\r\n                    _a.sent();\r\n                    content_1.Content.Rebirth.InitUI();\r\n                    content_1.Content.Monsters.Basic.InitUI();\r\n                    content_1.Content.Monsters.Armored.InitUI();\r\n                    content_1.Content.Monsters.Fast.InitUI();\r\n                    content_1.Content.Turrets.Basic.InitUI();\r\n                    content_1.Content.Turrets.Laser.InitUI();\r\n                    content_1.Content.Turrets.Rail.InitUI();\r\n                    content_1.Content.Buildings.Spikes.InitUI();\r\n                    return [4 /*yield*/, game_1.Construct3.callFunction(\"DoTick\")];\r\n                case 2:\r\n                    _a.sent();\r\n                    console.log('UI Initiated!');\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.InitUI = InitUI;\r\nfunction UpdateUIEveryTick() {\r\n    if (game_1.BUILD_MODE == \"Preview\") {\r\n        utilsGUI_1.SetText(\"GameTime\", \"FPS: \" + game_1.Construct3.globalVars.GameFPS + \" GT: \" + utilsText_1.GetTimeText(content_1.Content.Statistics.Time.InGameTimePlayed.Value));\r\n    }\r\n    //# Monster spawn progress bar #\r\n    var monsterSpawnProgress = content_1.Content.Timers.Game.MonsterSpawn.Progress.AsNumber;\r\n    var color;\r\n    if (content_1.Content.Timers.Game.MonsterSpawn.Duration.IsMore(1000)) {\r\n        color = utilsColor_1.InterpolateColors(\"#e6c13d\", \"#17d359\", content_1.Content.Timers.Game.MonsterSpawn.Progress.AsNumber);\r\n    }\r\n    else {\r\n        color = utilsColor_1.InterpolateColors(\"#9221a7\", \"#e161ff\", content_1.Content.Timers.Game.MonsterSpawn.Progress.AsNumber);\r\n    }\r\n    utilsGUI_1.SetProgressBar(\"spawnProgress::BasicMonster\", monsterSpawnProgress, color);\r\n    statisticsGUI_1.UpdateStatisticsGUI();\r\n    game_1.UpdateThemeUnlocks();\r\n}\r\nexports.UpdateUIEveryTick = UpdateUIEveryTick;\r\n//todo make a folder UI and make some methods and files to split all those sections (maybe)\r\nfunction UpdateUIManual() {\r\n    game_1.Construct3.globalVars.SmartUIUpdates++;\r\n    //# Wallets #\r\n    {\r\n        utilsGUI_1.SetText(\"wallet::\" + content_1.Content.Wallets.Coins.ID, \"\" + utilsText_1.GetNumberText(content_1.Content.Wallets.Coins.Value));\r\n        var award = content_1.Content.Rebirth.CurrentRebirthAward;\r\n        utilsGUI_1.SetText(\"wallet::\" + content_1.Content.Wallets.RebirthPoints.ID, utilsText_1.GetNumberText(content_1.Content.Wallets.RebirthPoints.Value) + \" (+\" + utilsText_1.GetNumberText(award) + \")\");\r\n    }\r\n    //todo Я не уверен, стоит ли мучаться с продвинутой системой отображения информации,\r\n    // как в PM. Мне кажется, проще вручную весь интерфейс прописывать и не усложнять код\r\n    // пусть логика будет отделена лучше от игровых механик/текста\r\n    // ====>> вместо этого, все настройки и проверки делать в функциях UI в первую очередь,\r\n    //         и стараться не добавлять лишние переменные только для UI в игровые объекты\r\n    //todo модульная система интерфейса. Чтобы было удобно собирать разные блоки\r\n    // в том числе для того, чтобы например не делать кучу ифов на IsShowingLevel и IsShowingTweak. Рили надо подумать\r\n    //todo ! Как варик, можно указывать не upgradeValue:NAME:1 а upgradeValue:NAME:TWEAK_NAME\r\n    //todo IsGrayColored for selectors\r\n    //todo хмм, мб сделать какие-то автоматические списки для подобных штук, чтобы вручную не происывать\r\n    //todo maybe move to content class? or like BasicMonsterGUI class... To separate it from single file\r\n    //# Unlocks #\r\n    if (content_1.Managers.Views.CurrentView.ID == content_1.ViewID.Unlocks) {\r\n        for (var _i = 0, _a = content_1.ContentStorage.GetAllItemsOfType(upgrade_1.UnlockUpgrade); _i < _a.length; _i++) {\r\n            var unlock = _a[_i];\r\n            upgradeInfo_1.UpdateUpgradeInfo(unlock, {\r\n                FontSize: fontSizeCalc_1.MonsterUpgradeFontSizeCalc,\r\n                DisplayIfMaxed: \"Unlocked\",\r\n                ShowLevel: false,\r\n            });\r\n        }\r\n    }\r\n    indicatorsGUI_1.UpdateIndicatorsGUI();\r\n    monstersGUI_1.UpdateMonstersGUI();\r\n    turretsGUI_1.UpdateTurretsGUI();\r\n    buildingsGUI_1.UpdateBuildingsGUI();\r\n    rebirthGUI_1.UpdateRebirthGUI();\r\n    UpdateButtonsUI();\r\n    game_1.Construct3.callFunction(\"UpdateGUI\");\r\n    //todo может тут сделать такую же систему, как в ThemeUnlocks, только наоборот?)) Чтобы не обновлять лишнее\r\n}\r\nexports.UpdateUIManual = UpdateUIManual;\r\nfunction UpdateButtonsUI() {\r\n    //todo может быть какой-то фикс производительности. Мб создавать отдельные под-списки для разных типов\r\n    var upgrades = content_1.ContentStorage.GetAllItemsOfType(upgrade_1.Upgrade);\r\n    for (var _i = 0, upgrades_1 = upgrades; _i < upgrades_1.length; _i++) {\r\n        var upgrade = upgrades_1[_i];\r\n        upgradeInfo_1.UpdateUpgradeButton(upgrade);\r\n    }\r\n}\r\nexports.UpdateButtonsUI = UpdateButtonsUI;\r\n\n\n//# sourceURL=webpack://Game/./src/ui/gui.ts?");

/***/ }),

/***/ "./src/ui/overlayMessage.ts":
/*!**********************************!*\
  !*** ./src/ui/overlayMessage.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ResetCurrentOverlayMessage = exports.HideOverlayMessage = exports.ShowOverlayMessage = exports.OverlayMessageQueue = exports.CurrentOverlayMessageInfo = void 0;\r\nvar utilsGUI_1 = __webpack_require__(/*! ../../javascript/construct3/c3ObjectUtils/utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar c3themeUtils_1 = __webpack_require__(/*! ../../javascript/construct3/c3ObjectUtils/c3themeUtils */ \"./javascript/construct3/c3ObjectUtils/c3themeUtils.ts\");\r\nvar utilsMath_1 = __webpack_require__(/*! ../utils/utilsMath */ \"./src/utils/utilsMath.ts\");\r\nvar content_1 = __webpack_require__(/*! ../content/content */ \"./src/content/content.ts\");\r\nvar main_1 = __webpack_require__(/*! ../../javascript/construct3/main */ \"./javascript/construct3/main.js\");\r\nvar game_1 = __webpack_require__(/*! ../game */ \"./src/game.ts\");\r\nexports.OverlayMessageQueue = [];\r\nfunction ShowOverlayMessage(info) {\r\n    exports.OverlayMessageQueue.push(info);\r\n    info.AddedOn = new Date();\r\n    exports.OverlayMessageQueue.sort(function (a, b) { return a.AddedOn.getTime() - b.AddedOn.getTime(); });\r\n    UpdateOverlayMessageQueue();\r\n}\r\nexports.ShowOverlayMessage = ShowOverlayMessage;\r\nfunction UpdateOverlayMessageQueue() {\r\n    var _a;\r\n    if (exports.OverlayMessageQueue.length > 0 && !exports.CurrentOverlayMessageInfo && content_1.SystemData.Settings.ShowNotifications) {\r\n        var info = exports.OverlayMessageQueue[0];\r\n        exports.CurrentOverlayMessageInfo = info;\r\n        utilsGUI_1.SetText(\"OverlayMessageTitle\", info.Title);\r\n        utilsGUI_1.SetText(\"OverlayMessageText\", info.Text);\r\n        utilsGUI_1.SetIconFrame(\"OverlayMessage\", info.Icon.Frame, info.Icon.Animation);\r\n        if (info.Button) {\r\n            utilsGUI_1.SetButtonEnabled(\"action::OverlayMessageButton\", false);\r\n            setTimeout(function () {\r\n                console.log('Enabled');\r\n                utilsGUI_1.SetButtonEnabled(\"action::OverlayMessageButton\", true);\r\n                game_1.SmartUIUpdate();\r\n            }, 1000);\r\n            c3themeUtils_1.ToggleTheme(\"OverlayMessageButton\", true);\r\n            utilsGUI_1.SetText(\"OverlayMessageButtonText\", (_a = info.Button.Text) !== null && _a !== void 0 ? _a : \"Show me!\");\r\n            var color = info.Button.Color\r\n                ? (typeof info.Button.Color == \"string\"\r\n                    ? utilsMath_1.HexToRGB255(info.Button.Color)\r\n                    : info.Button.Color)\r\n                : utilsMath_1.HexToRGB255(\"3cd38c\");\r\n            utilsGUI_1.SetButtonColor(\"OverlayMessageButton\", color);\r\n            content_1.SystemData.IsShowingOverlay = true;\r\n            content_1.SystemData.CurrentOverlay = {\r\n                Theme: \"OverlayMessage\",\r\n                InputTheme: \"OverlayMessageButton\",\r\n            };\r\n        }\r\n        else {\r\n            utilsGUI_1.SetButtonEnabled(\"action::OverlayMessageButton\", false);\r\n            c3themeUtils_1.ToggleTheme(\"OverlayMessageButton\", false);\r\n        }\r\n        main_1.Construct3.callFunction(\"ToggleOverlayMessage\", true);\r\n        exports.OverlayMessageQueue.splice(0, 1);\r\n    }\r\n}\r\nfunction HideOverlayMessage() {\r\n    main_1.Construct3.callFunction(\"ToggleOverlayMessage\", false);\r\n    content_1.SystemData.IsShowingOverlay = false;\r\n    content_1.SystemData.CurrentOverlay = {\r\n        Theme: \"None\",\r\n        InputTheme: \"None\",\r\n    };\r\n}\r\nexports.HideOverlayMessage = HideOverlayMessage;\r\nfunction ResetCurrentOverlayMessage() {\r\n    exports.CurrentOverlayMessageInfo = undefined;\r\n    UpdateOverlayMessageQueue();\r\n}\r\nexports.ResetCurrentOverlayMessage = ResetCurrentOverlayMessage;\r\n\n\n//# sourceURL=webpack://Game/./src/ui/overlayMessage.ts?");

/***/ }),

/***/ "./src/ui/upgrade/upgradeInfo.ts":
/*!***************************************!*\
  !*** ./src/ui/upgrade/upgradeInfo.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UpdateUpgradeInfo = exports.UpdateUpgradeButton = void 0;\r\nvar fontSizeCalc_1 = __webpack_require__(/*! ../fontSizeCalc */ \"./src/ui/fontSizeCalc.ts\");\r\nvar utilsGUI_1 = __webpack_require__(/*! ../../../javascript/construct3/c3ObjectUtils/utilsGUI */ \"./javascript/construct3/c3ObjectUtils/utilsGUI.ts\");\r\nvar utilsText_1 = __webpack_require__(/*! ../../utils/utilsText */ \"./src/utils/utilsText.ts\");\r\nvar engine_1 = __webpack_require__(/*! ../../../javascript/construct3/engine */ \"./javascript/construct3/engine.ts\");\r\nvar tweak_1 = __webpack_require__(/*! ../../game/tweak */ \"./src/game/tweak.ts\");\r\nvar float_1 = __webpack_require__(/*! ../../data/math/float */ \"./src/data/math/float.ts\");\r\nfunction UpdateUpgradeButton(upgrade) {\r\n    utilsGUI_1.SetButtonEnabled(\"buyUpgrade::\" + upgrade.ID, upgrade.IsCanBuy() && upgrade.IsThemeUnlocked);\r\n}\r\nexports.UpdateUpgradeButton = UpdateUpgradeButton;\r\nfunction UpdateUpgradeInfo(upgrade, params) {\r\n    if (params.ShowLevel == undefined)\r\n        params.ShowLevel = true;\r\n    if (params.ShowLevel) {\r\n        utilsGUI_1.SetText(\"upgradeLevel::\" + upgrade.ID, \"\" + utilsText_1.GetNumberText(upgrade.Level.Value));\r\n    }\r\n    for (var i = 0; i < upgrade.Tweaks.length; i++) {\r\n        var valueTextName = \"upgradeValue::\" + upgrade.ID + \"::\" + (i + 1);\r\n        // If not set\r\n        var tweakParams = params.Tweaks ? params.Tweaks[i] : undefined;\r\n        if (!tweakParams) {\r\n            tweakParams = {\r\n                DataType: \"Data\"\r\n            };\r\n        }\r\n        else {\r\n            if (!tweakParams.DataType)\r\n                tweakParams.DataType = \"Data\";\r\n        }\r\n        //todo detailed options for each price/tweak\r\n        var valueText = void 0;\r\n        if (tweakParams.DataType == \"Data\") {\r\n            valueText = GetUpgradeTweakDataInfo(upgrade, i, 0, tweakParams); //todo 0 here is temp solution\r\n        }\r\n        else if (tweakParams.DataType == \"Tweak\") {\r\n            valueText = GetUpgradeTweakInfo(upgrade, i, tweakParams);\r\n        }\r\n        else {\r\n            throw new Error(\"Not handled DataType param value: \" + tweakParams.DataType);\r\n        }\r\n        utilsGUI_1.SetText(valueTextName, valueText);\r\n        engine_1.Engine.UIManager.SetTextSize(valueTextName, fontSizeCalc_1.GetFontSize(valueText, params.FontSize));\r\n    }\r\n    for (var i = 0; i < upgrade.Prices.length; i++) {\r\n        var priceTextName = \"upgradePrice::\" + upgrade.ID + \"::\" + (i + 1);\r\n        var priceText = GetUpgradePriceInfo(upgrade, i, params);\r\n        utilsGUI_1.SetText(priceTextName, priceText);\r\n        //todo do sizing for price text too\r\n    }\r\n}\r\nexports.UpdateUpgradeInfo = UpdateUpgradeInfo;\r\n// ------------------------------ Utils Methods -------------------------------------\r\nfunction GetUpgradePriceInfo(upgrade, priceID, params) {\r\n    if (upgrade.Level.IsMaxed) {\r\n        if (!params.DisplayIfMaxed)\r\n            params.DisplayIfMaxed = \"Maxed\";\r\n        return params.DisplayIfMaxed;\r\n    }\r\n    else {\r\n        return utilsText_1.GetNumberText(upgrade.GUI.GetPriceValueOnLevel(priceID, null));\r\n    }\r\n}\r\nfunction GetUpgradeTweakInfo(upgrade, tweakID, params) {\r\n    var tweak = upgrade.GUI.GetTweak(tweakID);\r\n    var prefix = \"\";\r\n    if (!params.Prefix) {\r\n        if (tweak.Function.Priority == tweak_1.TweakPriority.Multiply) {\r\n            prefix = \"x\";\r\n        }\r\n    }\r\n    else {\r\n        prefix = params.Prefix;\r\n    }\r\n    var postfix = \"\";\r\n    if (!params.Postfix) {\r\n        if (tweak.Function.Priority == tweak_1.TweakPriority.Percent) {\r\n            postfix = \"%\";\r\n        }\r\n    }\r\n    else {\r\n        postfix = params.Postfix;\r\n    }\r\n    var valueIfNotBought = new float_1.Float(0);\r\n    if (!params.DisplayIfNotBought) {\r\n        if (tweak.Function.Priority == tweak_1.TweakPriority.Multiply) {\r\n            valueIfNotBought = new float_1.Float(1);\r\n        }\r\n    }\r\n    else {\r\n        valueIfNotBought = params.DisplayIfNotBought;\r\n    }\r\n    if (upgrade.Level.IsMaxed) {\r\n        return \"\" + utilsText_1.GetNumberText(upgrade.GUI.GetTweakValue(tweak)) + postfix;\r\n    }\r\n    else {\r\n        return \"\" + prefix + utilsText_1.GetNumberText(upgrade.GUI.GetTweakValue(tweak, valueIfNotBought)) + postfix + \" \\u279C \"\r\n            + (\"\" + prefix + utilsText_1.GetNumberText(upgrade.GUI.GetTweakValueOnLevel(tweak, null)) + postfix);\r\n    }\r\n}\r\n//todo remove code duplication\r\nfunction GetUpgradeTweakDataInfo(upgrade, tweakID, gameDataID, params) {\r\n    var tweak = upgrade.GUI.GetTweak(tweakID);\r\n    var prefix = \"\";\r\n    if (!params.Prefix) {\r\n        if (tweak.Function.Priority == tweak_1.TweakPriority.Multiply) {\r\n            prefix = \"x\";\r\n        }\r\n    }\r\n    else {\r\n        prefix = params.Prefix;\r\n    }\r\n    var postfix = \"\";\r\n    if (!params.Postfix) {\r\n        if (tweak.Function.Priority == tweak_1.TweakPriority.Percent) {\r\n            postfix = \"%\";\r\n        }\r\n    }\r\n    else {\r\n        postfix = params.Postfix;\r\n    }\r\n    if (!params.FormatTime)\r\n        params.FormatTime = \"Number\";\r\n    if (!params.BaseValue)\r\n        params.BaseValue = 0;\r\n    if (upgrade.Level.IsMaxed) {\r\n        var valueText = void 0;\r\n        if (params.FormatTime == \"Number\") {\r\n            valueText = utilsText_1.GetNumberText(upgrade.GUI.GetTweakDataValue(tweak, gameDataID).Plus(params.BaseValue));\r\n        }\r\n        else if (params.FormatTime == \"Time\") {\r\n            valueText = utilsText_1.GetTimeText(upgrade.GUI.GetTweakDataValue(tweak, gameDataID).Plus(params.BaseValue));\r\n        }\r\n        return \"\" + prefix + valueText + postfix;\r\n    }\r\n    else {\r\n        var beforeValueText = void 0;\r\n        var afterValueText = void 0;\r\n        //todo IT CAN BE DONE BETTER!!!\r\n        if (params.FormatTime == \"Number\") {\r\n            beforeValueText = utilsText_1.GetNumberText(upgrade.GUI.GetTweakDataValue(tweak, gameDataID).Plus(params.BaseValue));\r\n            afterValueText = utilsText_1.GetNumberText(upgrade.GUI.GetTweakDataValueOnLevel(tweak, gameDataID, null).Plus(params.BaseValue));\r\n        }\r\n        else if (params.FormatTime == \"Time\") {\r\n            beforeValueText = utilsText_1.GetTimeText(upgrade.GUI.GetTweakDataValue(tweak, gameDataID).Plus(params.BaseValue));\r\n            afterValueText = utilsText_1.GetTimeText(upgrade.GUI.GetTweakDataValueOnLevel(tweak, gameDataID, null).Plus(params.BaseValue));\r\n        }\r\n        return \"\" + prefix + beforeValueText + postfix + \" \\u279C \"\r\n            + (\"\" + prefix + afterValueText + postfix);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://Game/./src/ui/upgrade/upgradeInfo.ts?");

/***/ }),

/***/ "./src/utils/utils.ts":
/*!****************************!*\
  !*** ./src/utils/utils.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DownloadFile = void 0;\r\nvar js_file_download_1 = __importDefault(__webpack_require__(/*! js-file-download */ \"./node_modules/js-file-download/file-download.js\"));\r\n//todo try to implement (because chrome doesn't ask for file name, it's stupid)\r\nfunction DownloadFile(fileName, data) {\r\n    js_file_download_1.default(data, fileName);\r\n}\r\nexports.DownloadFile = DownloadFile;\r\n\n\n//# sourceURL=webpack://Game/./src/utils/utils.ts?");

/***/ }),

/***/ "./src/utils/utilsColor.ts":
/*!*********************************!*\
  !*** ./src/utils/utilsColor.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InterpolateColors = exports.RGB255ToC3Color = exports.RGBToC3Color = exports.ExternalRGB255ToCurrentRGB255 = void 0;\r\nvar d3_interpolate_1 = __webpack_require__(/*! d3-interpolate */ \"./node_modules/d3-interpolate/src/index.js\");\r\nvar d3_color_1 = __webpack_require__(/*! d3-color */ \"./node_modules/d3-color/src/index.js\");\r\nfunction ExternalRGB255ToCurrentRGB255(rgb) {\r\n    return {\r\n        r255: \"r\" in rgb ? rgb.r : rgb.R,\r\n        g255: \"g\" in rgb ? rgb.g : rgb.G,\r\n        b255: \"b\" in rgb ? rgb.b : rgb.B,\r\n    };\r\n}\r\nexports.ExternalRGB255ToCurrentRGB255 = ExternalRGB255ToCurrentRGB255;\r\nfunction RGBToC3Color(color) {\r\n    return [color.r, color.g, color.b];\r\n}\r\nexports.RGBToC3Color = RGBToC3Color;\r\nfunction RGB255ToC3Color(color) {\r\n    return [color.r255 / 255, color.g255 / 255, color.b255 / 255];\r\n}\r\nexports.RGB255ToC3Color = RGB255ToC3Color;\r\nfunction InterpolateColors(color1, color2, progress) {\r\n    var colorValue = d3_interpolate_1.interpolateRgb(color1, color2)(progress / 100);\r\n    return ExternalRGB255ToCurrentRGB255(d3_color_1.rgb(colorValue));\r\n}\r\nexports.InterpolateColors = InterpolateColors;\r\n\n\n//# sourceURL=webpack://Game/./src/utils/utilsColor.ts?");

/***/ }),

/***/ "./src/utils/utilsMath.ts":
/*!********************************!*\
  !*** ./src/utils/utilsMath.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Clamp = exports.GetFullNumberStr = exports.HexToRGBArray = exports.HexToRGB255Array = exports.HexToRGB = exports.HexToRGB255 = exports.RGBToHex = exports.ComponentToHex = exports.FractionalPart = exports.IsNumber = exports.__FixNumber = void 0;\r\n/**\r\n * @return {number}\r\n */\r\nvar float_1 = __webpack_require__(/*! ../data/math/float */ \"./src/data/math/float.ts\");\r\nfunction __FixNumber(value) {\r\n    return Math.round(value * 1000000) / 1000000;\r\n}\r\nexports.__FixNumber = __FixNumber;\r\nfunction IsNumber(str) {\r\n    return parseFloat(str).toString() === str;\r\n}\r\nexports.IsNumber = IsNumber;\r\n//todo maybe move to Float\r\nfunction FractionalPart(n) {\r\n    n = new float_1.Float(n);\r\n    return n.Minus(n.Floor());\r\n}\r\nexports.FractionalPart = FractionalPart;\r\nfunction ComponentToHex(c) {\r\n    var hex = c.toString(16);\r\n    return hex.length == 1 ? \"0\" + hex : hex;\r\n}\r\nexports.ComponentToHex = ComponentToHex;\r\nfunction RGBToHex(r, g, b) {\r\n    return \"#\" + ComponentToHex(r) + ComponentToHex(g) + ComponentToHex(b);\r\n}\r\nexports.RGBToHex = RGBToHex;\r\nfunction HexToRGB255(hex) {\r\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    if (result)\r\n        return {\r\n            r255: parseInt(result[1], 16),\r\n            g255: parseInt(result[2], 16),\r\n            b255: parseInt(result[3], 16)\r\n        };\r\n    else {\r\n        throw new Error(\"HEX color string was not correct: \" + hex);\r\n    }\r\n}\r\nexports.HexToRGB255 = HexToRGB255;\r\nfunction HexToRGB(hex) {\r\n    var rgb = HexToRGB255(hex);\r\n    return {\r\n        r: (rgb.r255 / 255),\r\n        g: (rgb.g255 / 255),\r\n        b: (rgb.b255 / 255),\r\n    };\r\n}\r\nexports.HexToRGB = HexToRGB;\r\nfunction HexToRGB255Array(hex) {\r\n    var rgb = HexToRGB255(hex);\r\n    return [\r\n        rgb.r255, rgb.g255, rgb.b255,\r\n    ];\r\n}\r\nexports.HexToRGB255Array = HexToRGB255Array;\r\nfunction HexToRGBArray(hex) {\r\n    var rgb = HexToRGB255(hex);\r\n    return [\r\n        (rgb.r255 / 255), (rgb.g255 / 255), (rgb.b255 / 255),\r\n    ];\r\n}\r\nexports.HexToRGBArray = HexToRGBArray;\r\nfunction GetFullNumberStr(x) {\r\n    var e;\r\n    var output = '' + x;\r\n    if (Math.abs(x) < 1.0) {\r\n        e = parseInt(x.toString().split('e-')[1]);\r\n        if (e) {\r\n            x *= Math.pow(10, e - 1);\r\n            output = '0.' + (new Array(e)).join('0') + x.toString().substring(2);\r\n        }\r\n    }\r\n    else {\r\n        e = parseInt(x.toString().split('+')[1]);\r\n        if (e > 20) {\r\n            e -= 20;\r\n            x /= Math.pow(10, e);\r\n            output += (new Array(e + 1)).join('0');\r\n        }\r\n    }\r\n    return output;\r\n}\r\nexports.GetFullNumberStr = GetFullNumberStr;\r\n/*\r\nfunction CalculateBuy(money: number, level: number, priceFirst: number, priceChange: number, count: number, debug = false)\r\n    : {spent: number, levels: number, price: number} {\r\n    const result = {\r\n        spent: 0,\r\n        levels: 0,\r\n        price: 0,\r\n    };\r\n\r\n    const oldUpgradesCost = GetSum(priceFirst, priceChange, level - 1);\r\n    const totalSum = oldUpgradesCost + money;\r\n\r\n    let canBuyCount;\r\n    if (count < 0) {\r\n        canBuyCount = GetSumN(priceFirst, priceChange, totalSum);\r\n    } else {\r\n        canBuyCount = Math.min(level - 1 + count, GetSumN(priceFirst, priceChange, totalSum));\r\n    }\r\n\r\n    const canBuyCost = GetSum(priceFirst, priceChange, canBuyCount);\r\n    result.spent = canBuyCost - oldUpgradesCost);\r\n    result.levels = canBuyCount - (level - 1));\r\n    result.price = GetElement(priceFirst, priceChange, level + result.levels));\r\n\r\n    if (result.levels > 0) {\r\n        // lol\r\n    } else {\r\n        if (debug) console.log('Cant buy anything\\n');\r\n        result.levels = 0;\r\n        result.price = 0;\r\n        result.spent = 0;\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction GetSumN(a: number, d: number, s: number): number {\r\n    const x11 = Math.pow(2 * a - d, 2);\r\n    const x12 = (8 * d * s);\r\n    const x1 = x11 + x12;\r\n    const x2 = 2 * a - d;\r\n    const x3 = 2 * d;\r\n    return Math.floor((Math.sqrt(x1) - x2) / x3);\r\n}\r\n\r\nfunction GetSum(a: number, d: number, n: number): number {\r\n    return ((2 * a + d * (n - 1)) / 2) * n;\r\n}\r\n\r\nfunction GetElement(a: number, d: number, n: number): number {\r\n    return a + d * (n - 1);\r\n}\r\n\r\nfunction GetSumInterval(a: number, d: number, n1: number, n2: number): number {\r\n    const s1 = ((2 * a + d * ((n1 - 1) - 1)) / 2) * (n1 - 1);\r\n    const s2 = ((2 * a + d * (n2 - 1)) / 2) * n2;\r\n    return s2 - s1;\r\n}\r\n*/\r\nfunction Clamp(value, interval, inclusive) {\r\n    if (inclusive === void 0) { inclusive = true; }\r\n    if (inclusive) {\r\n        return Math.min(Math.max(value, interval.Min), interval.Max);\r\n    }\r\n    else {\r\n        return Math.min(Math.max(value, interval.Min + interval.Step), interval.Max - interval.Step);\r\n    }\r\n}\r\nexports.Clamp = Clamp;\r\n\n\n//# sourceURL=webpack://Game/./src/utils/utilsMath.ts?");

/***/ }),

/***/ "./src/utils/utilsObjects.ts":
/*!***********************************!*\
  !*** ./src/utils/utilsObjects.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isInteger = exports.IsObject = exports.IsNumber = exports.IsEmptyArray = exports.IsNullOrEmpty = exports.IsNull = exports.ValuesOf = exports.GetProperties = void 0;\r\nfunction GetProperties(obj) {\r\n    var propertyList = [];\r\n    for (var property in obj) {\r\n        // @ts-ignore\r\n        var value = obj[property];\r\n        var data = { name: property, value: value };\r\n        propertyList.push(data);\r\n    }\r\n    return propertyList;\r\n}\r\nexports.GetProperties = GetProperties;\r\nfunction ValuesOf(o) {\r\n    return Object.values(o);\r\n}\r\nexports.ValuesOf = ValuesOf;\r\nfunction IsNull(obj) {\r\n    return (typeof obj == 'undefined' || obj == null);\r\n}\r\nexports.IsNull = IsNull;\r\nfunction IsNullOrEmpty(obj) {\r\n    return (typeof obj == 'undefined' || obj == null || obj.length == 0);\r\n}\r\nexports.IsNullOrEmpty = IsNullOrEmpty;\r\nfunction IsEmptyArray(array) {\r\n    return array.length == 0;\r\n}\r\nexports.IsEmptyArray = IsEmptyArray;\r\nfunction IsNumber(n) {\r\n    return !isNaN(parseFloat(n.toString())) && isFinite(n);\r\n}\r\nexports.IsNumber = IsNumber;\r\nfunction IsObject(obj) {\r\n    return (obj !== null && typeof obj === 'object');\r\n}\r\nexports.IsObject = IsObject;\r\nfunction isInteger(num) {\r\n    return (num ^ 0) === num;\r\n}\r\nexports.isInteger = isInteger;\r\n\n\n//# sourceURL=webpack://Game/./src/utils/utilsObjects.ts?");

/***/ }),

/***/ "./src/utils/utilsRandom.ts":
/*!**********************************!*\
  !*** ./src/utils/utilsRandom.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Random = void 0;\r\nvar content_1 = __webpack_require__(/*! ../content/content */ \"./src/content/content.ts\");\r\nvar float_1 = __webpack_require__(/*! ../data/math/float */ \"./src/data/math/float.ts\");\r\nvar Random;\r\n(function (Random) {\r\n    var Utils;\r\n    (function (Utils) {\r\n        /**\r\n         * @param chance 0-100\r\n         * @param count\r\n         * @return Returns count of happened events\r\n         */\r\n        function BoolCount(chance, count) {\r\n            chance = float_1.RawFloatValue(chance);\r\n            count = float_1.RawFloatValue(count);\r\n            var happened = 0;\r\n            for (var i = 0; i < count; i++) {\r\n                happened += content_1.RNG.bool(chance / 100) ? 1 : 0;\r\n            }\r\n            return happened;\r\n        }\r\n        Utils.BoolCount = BoolCount;\r\n    })(Utils = Random.Utils || (Random.Utils = {}));\r\n})(Random = exports.Random || (exports.Random = {}));\r\n\n\n//# sourceURL=webpack://Game/./src/utils/utilsRandom.ts?");

/***/ }),

/***/ "./src/utils/utilsText.ts":
/*!********************************!*\
  !*** ./src/utils/utilsText.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GetTimeText = exports.GetLinesCount = exports.ShortExpNumber = exports.GetNumberText = exports.NumberWithCommas = exports.FormatTime = exports.FormatTimeInSeconds = exports.RemoveBBCode = exports.ParsePath = exports.Whitespace = exports.GetPropertyList = exports.UpperFirstChar = exports.nums = void 0;\r\nvar float_1 = __webpack_require__(/*! ../data/math/float */ \"./src/data/math/float.ts\");\r\nvar time_1 = __webpack_require__(/*! ../data/time */ \"./src/data/time.ts\");\r\nvar utilsMath_1 = __webpack_require__(/*! ./utilsMath */ \"./src/utils/utilsMath.ts\");\r\nvar standardNotation_1 = __webpack_require__(/*! ../data/math/numbers/standardNotation */ \"./src/data/math/numbers/standardNotation.ts\");\r\nvar content_1 = __webpack_require__(/*! ../content/content */ \"./src/content/content.ts\");\r\nexports.nums = ['K', 'M', 'B', 'T', 'q', 'Q', 's', 'S', 'O', 'N', 'd', 'U', 'D', 'Tr', 'Qt', 'Qn', 'Sd', 'Sp',\r\n    'Od', 'Nd', 'Vg', 'Uv', 'Du', 'Ts', 'Qtv', 'Qiv', '!', '?', '@', '#', '&',\r\n    '🔰', '⚜️', '💗', '💛', '💚', '💙', '💜', '🖤', '💘'];\r\nfor (var i = 0; i < exports.nums.length; i++) {\r\n    exports.nums[i] = exports.nums[i].toLowerCase();\r\n}\r\nfunction UpperFirstChar(str) {\r\n    if (str) {\r\n        return \"\" + str[0].toUpperCase() + str.substring(1);\r\n    }\r\n    else {\r\n        throw new Error('String was empty');\r\n    }\r\n}\r\nexports.UpperFirstChar = UpperFirstChar;\r\nfunction GetPropertyList(obj, depth, showName) {\r\n    if (depth === void 0) { depth = 1; }\r\n    if (showName === void 0) { showName = true; }\r\n    var text = '';\r\n    for (var property in obj) {\r\n        if (obj.hasOwnProperty(property)) {\r\n            var valueText = '';\r\n            // @ts-ignore\r\n            if (typeof obj[property] != 'object' && obj[property] !== null) {\r\n                // @ts-ignore\r\n                valueText = obj[property];\r\n            }\r\n            else {\r\n                // @ts-ignore\r\n                valueText += GetPropertyList(obj[property], 2);\r\n            }\r\n            var nameText = showName ? property + \": \" : '';\r\n            if (property != 'contentID' && property != 'varID' && property != 'lang')\r\n                text += \"\\n\" + Whitespace(3 * depth) + \"[b]\" + nameText + \"[/b]\" + valueText;\r\n        }\r\n    }\r\n    return text;\r\n}\r\nexports.GetPropertyList = GetPropertyList;\r\nfunction Whitespace(count) {\r\n    var str = '';\r\n    for (var i = 0; i < count; i++)\r\n        str += ' ';\r\n    return str;\r\n}\r\nexports.Whitespace = Whitespace;\r\nfunction ParsePath(str) {\r\n    return str.split('.');\r\n}\r\nexports.ParsePath = ParsePath;\r\nfunction RemoveBBCode(text) {\r\n    return text.replace(/\\[\\/?(?:b|i|u|url|quote|code|img|color|size)*?.*?\\]/img, '');\r\n}\r\nexports.RemoveBBCode = RemoveBBCode;\r\nfunction FormatTimeInSeconds(time) {\r\n    var seconds = float_1.Float.Floor(time.TotalSeconds);\r\n    var hours;\r\n    if (seconds.IsMoreOrEqual(3600)) {\r\n        hours = float_1.Float.Floor(seconds.Divide(3600));\r\n        seconds = float_1.Float.Minus(seconds, float_1.Float.Times(hours, 3600));\r\n    }\r\n    else\r\n        hours = new float_1.Float(0);\r\n    var minutes;\r\n    if (seconds.IsMoreOrEqual(60)) {\r\n        minutes = float_1.Float.Floor(seconds.Divide(60));\r\n        seconds = float_1.Float.Minus(seconds, float_1.Float.Times(minutes, 60));\r\n    }\r\n    else\r\n        minutes = new float_1.Float(0);\r\n    return FormatTime(hours, minutes, seconds);\r\n}\r\nexports.FormatTimeInSeconds = FormatTimeInSeconds;\r\nfunction FormatTime(hours, minutes, seconds) {\r\n    hours = float_1.RawFloatValue(hours);\r\n    minutes = float_1.RawFloatValue(minutes);\r\n    seconds = float_1.RawFloatValue(seconds);\r\n    return hours.toString().padStart(2, '0') + \":\" + minutes.toString().padStart(2, '0') + \":\" + seconds.toString().padStart(2, '0');\r\n}\r\nexports.FormatTime = FormatTime;\r\nfunction NumberWithCommas(x) {\r\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n}\r\nexports.NumberWithCommas = NumberWithCommas;\r\nfunction GetNumberText(number, notation, floats) {\r\n    if (floats === void 0) { floats = 2; }\r\n    if (!notation) {\r\n        notation = content_1.Content.Settings.System.Notation.Value;\r\n    }\r\n    var float = new float_1.Float(number);\r\n    if (float.IsLess(1000)) {\r\n        if (utilsMath_1.FractionalPart(float.AsNumber).IsMore(0)) {\r\n            return float.ToStringFixed(floats);\r\n        }\r\n        else {\r\n            return float.ToStringFixed(0);\r\n        }\r\n    }\r\n    else {\r\n        if (notation == \"Scientific\") {\r\n            var str = float.ToStringExtendedFixed(floats);\r\n            var parts = str.split('+');\r\n            var newSecondPart = NumberWithCommas(parseInt(parts[1]));\r\n            return parts[0] + newSecondPart;\r\n        }\r\n        else {\r\n            var letter = new standardNotation_1.StandardNotation();\r\n            return letter.format(float.AsDecimal, 2, 0);\r\n        }\r\n    }\r\n    // number = FloatOrNumberValue(number);\r\n    // floats = FloatOrNumberValue(floats);\r\n    //todo implement floats and notation settings\r\n    /*\r\n    if (floats == -1) floats = GetOptionValue(Lang.Settings.Floats);\r\n\r\n    if (notation == -1) {\r\n        notation = GetOptionValue(Lang.Settings.Notation);\r\n    }\r\n    */\r\n    // number = parseFloat('' + number);\r\n    // if (!isInteger(number)) {\r\n    //     number = parseFloat(number.toFixed(floats));\r\n    // }\r\n    //\r\n    // if (notation === 'letter') {\r\n    //     if (number > 999) {\r\n    //         return ValueShort(number, floats);\r\n    //     }\r\n    //     else {\r\n    //         return number.toString();\r\n    //     }\r\n    // }\r\n    // else if (notation === 'scientific') {\r\n    //     if (number > 999) {\r\n    //         const numStr = parseFloat(number.toString()).toExponential(floats);\r\n    //         return ShortExpNumber(numStr);\r\n    //     }\r\n    //     else {\r\n    //         return number.toString();\r\n    //     }\r\n    // }\r\n    // else {\r\n    //     throw new Error(`Notation is not implemented: ${notation}`);\r\n    // }\r\n}\r\nexports.GetNumberText = GetNumberText;\r\nfunction ShortExpNumber(numStr) {\r\n    var before = \"e+\";\r\n    var after = \"e\";\r\n    return numStr.toString().replace(before, after);\r\n}\r\nexports.ShortExpNumber = ShortExpNumber;\r\n// export function ValueShort(num: number, floats: number): string {\r\n//     if (!isFinite(num)) return 'Infinity';\r\n//     if (num < 1e3 || num >= parseFloat('1e' + 3 * (nums.length))) return Math.round(num).toString();\r\n//     let i = 0;\r\n//\r\n//     while (num >= 1000) {\r\n//         num /= 1000;\r\n//         i++;\r\n//     }\r\n//\r\n//     num = Math.round(num * 1000) / 1000;\r\n//\r\n//     if (num >= 1000) {\r\n//         num /= 1000;\r\n//         i++;\r\n//         num = Math.round(num * 1000) / 1000;\r\n//     }\r\n//\r\n//     num = parseFloat(num.toFixed(floats));\r\n//     return (num + nums[i - 1]).toString();\r\n// }\r\n/*\r\nfunction ValueShortBig(num: BigNumber, floats: number): string {\r\n    if (!num.isFinite()) {\r\n        return 'Infinity';\r\n    }\r\n    if (num < new BigNumber(1e3) || num >= new BigNumber(parseFloat('1e' + 3 * (nums.length)))) {\r\n        return num.dp(0, BigNumber.ROUND_UP).toString();\r\n    }\r\n    let i = 0;\r\n\r\n    while (num >= new BigNumber(1000)) {\r\n        num = num.dividedBy(new BigNumber(1000));\r\n        i++;\r\n    }\r\n\r\n    //num = Math.round(num * 1000) / 1000;\r\n\r\n    if (num >= new BigNumber(1000)) {\r\n        num = num.dividedBy(new BigNumber(1000));\r\n        i++;\r\n        //num = Math.round(num * 1000) / 1000;\r\n    }\r\n\r\n    const numStr = parseFloat(num.toFixed(floats));\r\n    return (numStr + nums[i - 1]).toString();\r\n}\r\n*/\r\nfunction GetLinesCount(str) {\r\n    return (str.match(/\\n/g) || '').length + 1;\r\n}\r\nexports.GetLinesCount = GetLinesCount;\r\nfunction GetTimeText(timeOrMS, showOnlyTwo) {\r\n    if (showOnlyTwo === void 0) { showOnlyTwo = true; }\r\n    var seconds;\r\n    if (timeOrMS instanceof time_1.Time) {\r\n        seconds = timeOrMS.TotalSeconds;\r\n    }\r\n    else {\r\n        timeOrMS = new float_1.Float(timeOrMS);\r\n        seconds = timeOrMS.Divide(1000);\r\n    }\r\n    seconds = float_1.Float.Max(0, seconds);\r\n    /*\r\n    const centuries = Float.Floor(seconds.Divide(3153600000));\r\n    seconds.DoMinus(Float.Times(centuries, 3153600000));\r\n    const years = Float.Floor(seconds.Divide(31536000));\r\n    seconds.DoMinus(Float.Times(years, 31536000));\r\n    const months = Float.Floor(seconds.Divide(2629743));\r\n    seconds.DoMinus(Float.Times(months, 2629743));\r\n    const weeks = Float.Floor(seconds.Divide(604800));\r\n    seconds.DoMinus(Float.Times(weeks, 604800));\r\n    const days = Float.Floor(seconds.Divide(86400));\r\n    seconds.DoMinus(Float.Times(days, 86400));\r\n    */\r\n    var hours = float_1.Float.Floor(seconds.Divide(3600));\r\n    seconds = float_1.Float.Minus(seconds, float_1.Float.Times(hours, 3600));\r\n    var minutes = float_1.Float.Floor(seconds.Divide(60));\r\n    seconds = float_1.Float.Minus(seconds, float_1.Float.Times(minutes, 60));\r\n    var text = '';\r\n    var parts = [];\r\n    //todo make days/weeks/etc optional\r\n    /*\r\n    text += (years > 0 ? `${years}y ` : '');\r\n    text += (months > 0 ? `${months}mth ` : '');\r\n    text += (weeks > 0 ? `${weeks}w ` : '');\r\n    text += (days > 0 ? `${days}d ` : '');\r\n    */\r\n    if (hours.IsMore(0)) {\r\n        parts.push(hours.IsLess(1000) ? GetNumberText(hours) + \"h \" : GetNumberText(hours) + \" hours\");\r\n    }\r\n    if (minutes.IsMore(0) && hours.IsLess(1000)) {\r\n        parts.push(GetNumberText(minutes) + \"m \");\r\n    }\r\n    if (seconds.IsMore(0) && hours.IsLess(1000)) {\r\n        if (parts.length !== 0) {\r\n            parts.push(GetNumberText(float_1.Float.Floor(seconds)) + \"s \");\r\n        }\r\n        else {\r\n            if (utilsMath_1.FractionalPart(seconds).IsNotEqual(0)) {\r\n                parts.push(seconds.ToFixed(2) + \"s \");\r\n            }\r\n            else {\r\n                parts.push(GetNumberText(float_1.Float.Floor(seconds)) + \"s \");\r\n            }\r\n        }\r\n    }\r\n    if (seconds.IsLess(0)) {\r\n        parts.push(GetNumberText(float_1.Float.Floor(seconds.Times(1000))) + \"ms \");\r\n    }\r\n    for (var i = 0; i < parts.length; i++) {\r\n        text += parts[i];\r\n        if (showOnlyTwo && i === 1) {\r\n            return text.trimEnd();\r\n        }\r\n    }\r\n    return text.trimEnd();\r\n}\r\nexports.GetTimeText = GetTimeText;\r\n\n\n//# sourceURL=webpack://Game/./src/utils/utilsText.ts?");

/***/ }),

/***/ 0:
/*!***********************************************************!*\
  !*** multi ./javascript/construct3/main.js ./src/game.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("__webpack_require__(/*! ./javascript/construct3/main.js */\"./javascript/construct3/main.js\");\nmodule.exports = __webpack_require__(/*! ./src/game.ts */\"./src/game.ts\");\n\n\n//# sourceURL=webpack://Game/multi_./javascript/construct3/main.js_./src/game.ts?");

/***/ }),

/***/ 1:
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/util_(ignored)?");

/***/ }),

/***/ 10:
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/buffer_(ignored)?");

/***/ }),

/***/ 11:
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/buffer_(ignored)?");

/***/ }),

/***/ 12:
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/buffer_(ignored)?");

/***/ }),

/***/ 13:
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/buffer_(ignored)?");

/***/ }),

/***/ 14:
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/buffer_(ignored)?");

/***/ }),

/***/ 15:
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/buffer_(ignored)?");

/***/ }),

/***/ 2:
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/util_(ignored)?");

/***/ }),

/***/ 3:
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/util_(ignored)?");

/***/ }),

/***/ 4:
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/util_(ignored)?");

/***/ }),

/***/ 5:
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/buffer_(ignored)?");

/***/ }),

/***/ 6:
/*!************************!*\
  !*** buffer (ignored) ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/buffer_(ignored)?");

/***/ }),

/***/ 7:
/*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/crypto_(ignored)?");

/***/ }),

/***/ 8:
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/util_(ignored)?");

/***/ }),

/***/ 9:
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/* (ignored) */\n\n//# sourceURL=webpack://Game/util_(ignored)?");

/***/ })

/******/ });

// User script Script.js
function _some() { 
	var d = runtime.objects.Monster.getFirstInstance().getChildAt(0);
}

